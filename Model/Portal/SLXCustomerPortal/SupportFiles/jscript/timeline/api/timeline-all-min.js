if("undefined"==typeof SimileAjax){var SimileAjax={loaded:!1,loadingScriptsCount:0,error:null,params:{bundle:"true"}};SimileAjax.Platform=new Object;var getHead=function(e){return e.getElementsByTagName("head")[0]};if(SimileAjax.findScript=function(e,t){for(var i=e.documentElement.getElementsByTagName("head"),n=0;n<i.length;n++)for(var r=i[n].firstChild;null!=r;){if(1==r.nodeType&&"script"==r.tagName.toLowerCase()){var a=r.src,o=a.indexOf(t);if(o>=0)return a}r=r.nextSibling}return null},SimileAjax.includeJavascriptFile=function(e,t,i,n){if(i=i||"",null==e.body)try{var r="'"+i.replace(/'/g,"&apos")+"'";return void e.write("<script src='"+t+"' onerror="+r+(n?" charset='"+n+"'":"")+" type='text/javascript'>"+i+"</script>")}catch(a){}var o=e.createElement("script");if(i){try{o.innerHTML=i}catch(a){}o.setAttribute("onerror",i)}return n&&o.setAttribute("charset",n),o.type="text/javascript",o.language="JavaScript",o.src=t,getHead(e).appendChild(o)},SimileAjax.includeJavascriptFiles=function(e,t,i){for(var n=0;n<i.length;n++)SimileAjax.includeJavascriptFile(e,t+i[n]);SimileAjax.loadingScriptsCount+=i.length,SimileAjax.includeJavascriptFile(e,SimileAjax.urlPrefix+"scripts/signal.js?"+i.length)},SimileAjax.includeCssFile=function(e,t){if(null==e.body)try{return void e.write("<link rel='stylesheet' href='"+t+"' type='text/css'/>")}catch(i){}var n=e.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",t),getHead(e).appendChild(n)},SimileAjax.includeCssFiles=function(e,t,i){for(var n=0;n<i.length;n++)SimileAjax.includeCssFile(e,t+i[n])},SimileAjax.prefixURLs=function(e,t,i){for(var n=0;n<i.length;n++)e.push(t+i[n])},SimileAjax.parseURLParameters=function(e,t,i){t=t||{},i=i||{},"undefined"==typeof e&&(e=location.href);var n=e.indexOf("?");if(0>n)return t;e=(e+"#").slice(n+1,e.indexOf("#"));for(var r,a=e.split("&"),o={},l=window.decodeURIComponent||unescape,s=0;r=a[s];s++){var h=r.indexOf("="),u=l(r.slice(0,h)),c=o[u];"undefined"==typeof c?c=[]:c instanceof Array||(c=[c]),o[u]=c.concat(l(r.slice(h+1)))}for(var s in o)if(o.hasOwnProperty(s)){var m=i[s]||String,d=o[s];d instanceof Array||(d=[d]),t[s]=m===Boolean&&"false"==d[0]?!1:m.apply(this,d)}return t},"string"==typeof SimileAjax_urlPrefix)SimileAjax.urlPrefix=SimileAjax_urlPrefix;else{var url=SimileAjax.findScript(document,"timeline-all-min.js");null==url&&(SimileAjax.error=new Error("Failed to derive URL prefix for Simile Ajax API code files")),SimileAjax.urlPrefix=url.substr(0,url.indexOf("timeline-all-min.js"))}SimileAjax.loaded=!0}SimileAjax.Platform.os={isMac:!1,isWin:!1,isWin32:!1,isUnix:!1},SimileAjax.Platform.browser={isIE:!1,isNetscape:!1,isMozilla:!1,isFirefox:!1,isOpera:!1,isSafari:!1,majorVersion:0,minorVersion:0},function(){var e=navigator.appName.toLowerCase(),t=navigator.userAgent.toLowerCase();SimileAjax.Platform.os.isMac=-1!=t.indexOf("mac"),SimileAjax.Platform.os.isWin=-1!=t.indexOf("win"),SimileAjax.Platform.os.isWin32=SimileAjax.Platform.isWin&&(-1!=t.indexOf("95")||-1!=t.indexOf("98")||-1!=t.indexOf("nt")||-1!=t.indexOf("win32")||-1!=t.indexOf("32bit")),SimileAjax.Platform.os.isUnix=-1!=t.indexOf("x11"),SimileAjax.Platform.browser.isIE=-1!=e.indexOf("microsoft"),SimileAjax.Platform.browser.isNetscape=-1!=e.indexOf("netscape"),SimileAjax.Platform.browser.isMozilla=-1!=t.indexOf("mozilla"),SimileAjax.Platform.browser.isFirefox=-1!=t.indexOf("firefox"),SimileAjax.Platform.browser.isOpera=-1!=e.indexOf("opera"),SimileAjax.Platform.browser.isSafari=-1!=e.indexOf("safari");var i=function(e){var t=e.split(".");SimileAjax.Platform.browser.majorVersion=parseInt(t[0]),SimileAjax.Platform.browser.minorVersion=parseInt(t[1])},n=function(e,t,i){var n=e.indexOf(t,i);return n>=0?n:e.length};if(SimileAjax.Platform.browser.isMozilla){var r=t.indexOf("mozilla/");r>=0&&i(t.substring(r+8,n(t," ",r)))}if(SimileAjax.Platform.browser.isIE){var r=t.indexOf("msie ");r>=0&&i(t.substring(r+5,n(t,";",r)))}if(SimileAjax.Platform.browser.isNetscape){var r=t.indexOf("rv:");r>=0&&i(t.substring(r+3,n(t,")",r)))}if(SimileAjax.Platform.browser.isFirefox){var r=t.indexOf("firefox/");r>=0&&i(t.substring(r+8,n(t," ",r)))}"localeCompare"in String.prototype||(String.prototype.localeCompare=function(e){return e>this?-1:this>e?1:0})}(),SimileAjax.Platform.getDefaultLocale=function(){return SimileAjax.Platform.clientLocale},SimileAjax.ListenerQueue=function(e){this._listeners=[],this._wildcardHandlerName=e},SimileAjax.ListenerQueue.prototype.add=function(e){this._listeners.push(e)},SimileAjax.ListenerQueue.prototype.remove=function(e){for(var t=this._listeners,i=0;i<t.length;i++)if(t[i]==e){t.splice(i,1);break}},SimileAjax.ListenerQueue.prototype.fire=function(e,t){for(var i=[].concat(this._listeners),n=0;n<i.length;n++){var r=i[n];if(e in r)try{r[e].apply(r,t)}catch(a){SimileAjax.Debug.exception("Error firing event of name "+e,a)}else if(null!=this._wildcardHandlerName&&this._wildcardHandlerName in r)try{r[this._wildcardHandlerName].apply(r,[e])}catch(a){SimileAjax.Debug.exception("Error firing event of name "+e+" to wildcard handler",a)}}},SimileAjax.Set=function(e){if(this._hash={},this._count=0,e instanceof Array)for(var t=0;t<e.length;t++)this.add(e[t]);else e instanceof SimileAjax.Set&&this.addSet(e)},SimileAjax.Set.prototype.add=function(e){return e in this._hash?!1:(this._hash[e]=!0,this._count++,!0)},SimileAjax.Set.prototype.addSet=function(e){for(var t in e._hash)this.add(t)},SimileAjax.Set.prototype.remove=function(e){return e in this._hash?(delete this._hash[e],this._count--,!0):!1},SimileAjax.Set.prototype.removeSet=function(e){for(var t in e._hash)this.remove(t)},SimileAjax.Set.prototype.retainSet=function(e){for(var t in this._hash)e.contains(t)||(delete this._hash[t],this._count--)},SimileAjax.Set.prototype.contains=function(e){return e in this._hash},SimileAjax.Set.prototype.size=function(){return this._count},SimileAjax.Set.prototype.toArray=function(){var e=[];for(var t in this._hash)e.push(t);return e},SimileAjax.Set.prototype.visit=function(e){for(var t in this._hash)if(1==e(t))break},SimileAjax.SortedArray=function(e,t){this._a=t instanceof Array?t:[],this._compare=e},SimileAjax.SortedArray.prototype.add=function(e){var t=this,i=this.find(function(i){return t._compare(i,e)});i<this._a.length?this._a.splice(i,0,e):this._a.push(e)},SimileAjax.SortedArray.prototype.remove=function(e){for(var t=this,i=this.find(function(i){return t._compare(i,e)});i<this._a.length&&0==this._compare(this._a[i],e);){if(this._a[i]==e)return this._a.splice(i,1),!0;i++}return!1},SimileAjax.SortedArray.prototype.removeAll=function(){this._a=[]},SimileAjax.SortedArray.prototype.elementAt=function(e){return this._a[e]},SimileAjax.SortedArray.prototype.length=function(){return this._a.length},SimileAjax.SortedArray.prototype.find=function(e){for(var t=0,i=this._a.length;i>t;){var n=Math.floor((t+i)/2),r=e(this._a[n]);if(n==t)return 0>r?t+1:t;0>r?t=n:i=n}return t},SimileAjax.SortedArray.prototype.getFirst=function(){return this._a.length>0?this._a[0]:null},SimileAjax.SortedArray.prototype.getLast=function(){return this._a.length>0?this._a[this._a.length-1]:null},SimileAjax.EventIndex=function(e){var t=this;this._unit=null!=e?e:SimileAjax.NativeDateUnit,this._events=new SimileAjax.SortedArray(function(e,i){return t._unit.compare(e.getStart(),i.getStart())}),this._idToEvent={},this._indexed=!0},SimileAjax.EventIndex.prototype.getUnit=function(){return this._unit},SimileAjax.EventIndex.prototype.getEvent=function(e){return this._idToEvent[e]},SimileAjax.EventIndex.prototype.add=function(e){this._events.add(e),this._idToEvent[e.getID()]=e,this._indexed=!1},SimileAjax.EventIndex.prototype.removeAll=function(){this._events.removeAll(),this._idToEvent={},this._indexed=!1},SimileAjax.EventIndex.prototype.getCount=function(){return this._events.length()},SimileAjax.EventIndex.prototype.getIterator=function(e,t){return this._indexed||this._index(),new SimileAjax.EventIndex._Iterator(this._events,e,t,this._unit)},SimileAjax.EventIndex.prototype.getReverseIterator=function(e,t){return this._indexed||this._index(),new SimileAjax.EventIndex._ReverseIterator(this._events,e,t,this._unit)},SimileAjax.EventIndex.prototype.getAllIterator=function(){return new SimileAjax.EventIndex._AllIterator(this._events)},SimileAjax.EventIndex.prototype.getEarliestDate=function(){var e=this._events.getFirst();return null==e?null:e.getStart()},SimileAjax.EventIndex.prototype.getLatestDate=function(){var e=this._events.getLast();if(null==e)return null;this._indexed||this._index();for(var t=e._earliestOverlapIndex,i=this._events.elementAt(t).getEnd(),n=t+1;n<this._events.length();n++)i=this._unit.later(i,this._events.elementAt(n).getEnd());return i},SimileAjax.EventIndex.prototype._index=function(){for(var e=this._events.length(),t=0;e>t;t++){var i=this._events.elementAt(t);i._earliestOverlapIndex=t}for(var n=1,t=0;e>t;t++){var i=this._events.elementAt(t),r=i.getEnd();for(n=Math.max(n,t+1);e>n;){var a=this._events.elementAt(n),o=a.getStart();if(!(this._unit.compare(o,r)<0))break;a._earliestOverlapIndex=t,n++}}this._indexed=!0},SimileAjax.EventIndex._Iterator=function(e,t,i,n){this._events=e,this._startDate=t,this._endDate=i,this._unit=n,this._currentIndex=e.find(function(e){return n.compare(e.getStart(),t)}),this._currentIndex-1>=0&&(this._currentIndex=this._events.elementAt(this._currentIndex-1)._earliestOverlapIndex),this._currentIndex--,this._maxIndex=e.find(function(e){return n.compare(e.getStart(),i)}),this._hasNext=!1,this._next=null,this._findNext()},SimileAjax.EventIndex._Iterator.prototype={hasNext:function(){return this._hasNext},next:function(){if(this._hasNext){var e=this._next;return this._findNext(),e}return null},_findNext:function(){for(var e=this._unit;++this._currentIndex<this._maxIndex;){var t=this._events.elementAt(this._currentIndex);if(e.compare(t.getStart(),this._endDate)<0&&e.compare(t.getEnd(),this._startDate)>0)return this._next=t,void(this._hasNext=!0)}this._next=null,this._hasNext=!1}},SimileAjax.EventIndex._ReverseIterator=function(e,t,i,n){this._events=e,this._startDate=t,this._endDate=i,this._unit=n,this._minIndex=e.find(function(e){return n.compare(e.getStart(),t)}),this._minIndex-1>=0&&(this._minIndex=this._events.elementAt(this._minIndex-1)._earliestOverlapIndex),this._maxIndex=e.find(function(e){return n.compare(e.getStart(),i)}),this._currentIndex=this._maxIndex,this._hasNext=!1,this._next=null,this._findNext()},SimileAjax.EventIndex._ReverseIterator.prototype={hasNext:function(){return this._hasNext},next:function(){if(this._hasNext){var e=this._next;return this._findNext(),e}return null},_findNext:function(){for(var e=this._unit;--this._currentIndex>=this._minIndex;){var t=this._events.elementAt(this._currentIndex);if(e.compare(t.getStart(),this._endDate)<0&&e.compare(t.getEnd(),this._startDate)>0)return this._next=t,void(this._hasNext=!0)}this._next=null,this._hasNext=!1}},SimileAjax.EventIndex._AllIterator=function(e){this._events=e,this._index=0},SimileAjax.EventIndex._AllIterator.prototype={hasNext:function(){return this._index<this._events.length()},next:function(){return this._index<this._events.length()?this._events.elementAt(this._index++):null}},SimileAjax.DateTime=new Object,SimileAjax.DateTime.MILLISECOND=0,SimileAjax.DateTime.SECOND=1,SimileAjax.DateTime.MINUTE=2,SimileAjax.DateTime.HOUR=3,SimileAjax.DateTime.DAY=4,SimileAjax.DateTime.WEEK=5,SimileAjax.DateTime.MONTH=6,SimileAjax.DateTime.YEAR=7,SimileAjax.DateTime.DECADE=8,SimileAjax.DateTime.CENTURY=9,SimileAjax.DateTime.MILLENNIUM=10,SimileAjax.DateTime.EPOCH=-1,SimileAjax.DateTime.ERA=-2,SimileAjax.DateTime.gregorianUnitLengths=[],function(){var e=SimileAjax.DateTime,t=e.gregorianUnitLengths;t[e.MILLISECOND]=1,t[e.SECOND]=1e3,t[e.MINUTE]=60*t[e.SECOND],t[e.HOUR]=60*t[e.MINUTE],t[e.DAY]=24*t[e.HOUR],t[e.WEEK]=7*t[e.DAY],t[e.MONTH]=31*t[e.DAY],t[e.YEAR]=365*t[e.DAY],t[e.DECADE]=10*t[e.YEAR],t[e.CENTURY]=100*t[e.YEAR],t[e.MILLENNIUM]=1e3*t[e.YEAR]}(),SimileAjax.DateTime._dateRegexp=new RegExp("^(-?)([0-9]{4})("+["(-?([0-9]{2})(-?([0-9]{2}))?)","(-?([0-9]{3}))","(-?W([0-9]{2})(-?([1-7]))?)"].join("|")+")?$"),SimileAjax.DateTime._timezoneRegexp=new RegExp("Z|(([-+])([0-9]{2})(:?([0-9]{2}))?)$"),SimileAjax.DateTime._timeRegexp=new RegExp("^([0-9]{2})(:?([0-9]{2})(:?([0-9]{2})(.([0-9]+))?)?)?$"),SimileAjax.DateTime.setIso8601Date=function(e,t){var i=t.match(SimileAjax.DateTime._dateRegexp);if(!i)throw new Error("Invalid date string: "+t);var n="-"==i[1]?-1:1,r=n*i[2],a=i[5],o=i[7],l=i[9],s=i[11],h=i[13]?i[13]:1;if(e.setUTCFullYear(r),l)e.setUTCMonth(0),e.setUTCDate(Number(l));else if(s){e.setUTCMonth(0),e.setUTCDate(1);var u=e.getUTCDay(),c=u?u:7,m=Number(h)+7*Number(s);e.setUTCDate(4>=c?m+1-c:m+8-c)}else a&&(e.setUTCDate(1),e.setUTCMonth(a-1)),o&&e.setUTCDate(o);return e},SimileAjax.DateTime.setIso8601Time=function(e,t){var i=t.match(SimileAjax.DateTime._timeRegexp);if(!i)return SimileAjax.Debug.warn("Invalid time string: "+t),!1;var n=i[1],r=Number(i[3]?i[3]:0),a=i[5]?i[5]:0,o=i[7]?1e3*Number("0."+i[7]):0;return e.setUTCHours(n),e.setUTCMinutes(r),e.setUTCSeconds(a),e.setUTCMilliseconds(o),e},SimileAjax.DateTime.timezoneOffset=(new Date).getTimezoneOffset(),SimileAjax.DateTime.setIso8601=function(e,t){var i=null,n=t.split(-1==t.indexOf("T")?" ":"T");if(SimileAjax.DateTime.setIso8601Date(e,n[0]),2==n.length){var r=n[1].match(SimileAjax.DateTime._timezoneRegexp);r&&("Z"==r[0]?i=0:(i=60*Number(r[3])+Number(r[5]),i*="-"==r[2]?1:-1),n[1]=n[1].substr(0,n[1].length-r[0].length)),SimileAjax.DateTime.setIso8601Time(e,n[1])}return null==i&&(i=e.getTimezoneOffset()),e.setTime(e.getTime()+6e4*i),e},SimileAjax.DateTime.parseIso8601DateTime=function(e){try{return SimileAjax.DateTime.setIso8601(new Date(0),e)}catch(t){return null}},SimileAjax.DateTime.parseGregorianDateTime=function(e){if(null==e)return null;if(e instanceof Date)return e;var t=e.toString();if(t.length>0&&t.length<8){var i=t.indexOf(" ");if(i>0){var n=parseInt(t.substr(0,i)),r=t.substr(i+1);"bc"==r.toLowerCase()&&(n=1-n)}else var n=parseInt(t);var a=new Date(0);return a.setUTCFullYear(n),a}try{return new Date(Date.parse(t))}catch(o){return null}},SimileAjax.DateTime.roundDownToInterval=function(e,t,i,n,r){var a=i*SimileAjax.DateTime.gregorianUnitLengths[SimileAjax.DateTime.HOUR],o=new Date(e.getTime()+a),l=function(e){e.setUTCMilliseconds(0),e.setUTCSeconds(0),e.setUTCMinutes(0),e.setUTCHours(0)},s=function(e){l(e),e.setUTCDate(1),e.setUTCMonth(0)};switch(t){case SimileAjax.DateTime.MILLISECOND:var h=o.getUTCMilliseconds();o.setUTCMilliseconds(h-h%n);break;case SimileAjax.DateTime.SECOND:o.setUTCMilliseconds(0);var h=o.getUTCSeconds();o.setUTCSeconds(h-h%n);break;case SimileAjax.DateTime.MINUTE:o.setUTCMilliseconds(0),o.setUTCSeconds(0);var h=o.getUTCMinutes();o.setTime(o.getTime()-h%n*SimileAjax.DateTime.gregorianUnitLengths[SimileAjax.DateTime.MINUTE]);break;case SimileAjax.DateTime.HOUR:o.setUTCMilliseconds(0),o.setUTCSeconds(0),o.setUTCMinutes(0);var h=o.getUTCHours();o.setUTCHours(h-h%n);break;case SimileAjax.DateTime.DAY:l(o);break;case SimileAjax.DateTime.WEEK:l(o);var u=(o.getUTCDay()+7-r)%7;o.setTime(o.getTime()-u*SimileAjax.DateTime.gregorianUnitLengths[SimileAjax.DateTime.DAY]);break;case SimileAjax.DateTime.MONTH:l(o),o.setUTCDate(1);var h=o.getUTCMonth();o.setUTCMonth(h-h%n);break;case SimileAjax.DateTime.YEAR:s(o);var h=o.getUTCFullYear();o.setUTCFullYear(h-h%n);break;case SimileAjax.DateTime.DECADE:s(o),o.setUTCFullYear(10*Math.floor(o.getUTCFullYear()/10));break;case SimileAjax.DateTime.CENTURY:s(o),o.setUTCFullYear(100*Math.floor(o.getUTCFullYear()/100));break;case SimileAjax.DateTime.MILLENNIUM:s(o),o.setUTCFullYear(1e3*Math.floor(o.getUTCFullYear()/1e3))}e.setTime(o.getTime()-a)},SimileAjax.DateTime.roundUpToInterval=function(e,t,i,n,r){var a=e.getTime();SimileAjax.DateTime.roundDownToInterval(e,t,i,n,r),e.getTime()<a&&e.setTime(e.getTime()+SimileAjax.DateTime.gregorianUnitLengths[t]*n)},SimileAjax.DateTime.incrementByInterval=function(e,t,i){i="undefined"==typeof i?0:i;var n=i*SimileAjax.DateTime.gregorianUnitLengths[SimileAjax.DateTime.HOUR],r=new Date(e.getTime()+n);switch(t){case SimileAjax.DateTime.MILLISECOND:r.setTime(r.getTime()+1);break;case SimileAjax.DateTime.SECOND:r.setTime(r.getTime()+1e3);break;case SimileAjax.DateTime.MINUTE:r.setTime(r.getTime()+SimileAjax.DateTime.gregorianUnitLengths[SimileAjax.DateTime.MINUTE]);break;case SimileAjax.DateTime.HOUR:r.setTime(r.getTime()+SimileAjax.DateTime.gregorianUnitLengths[SimileAjax.DateTime.HOUR]);break;case SimileAjax.DateTime.DAY:r.setUTCDate(r.getUTCDate()+1);break;case SimileAjax.DateTime.WEEK:r.setUTCDate(r.getUTCDate()+7);break;case SimileAjax.DateTime.MONTH:r.setUTCMonth(r.getUTCMonth()+1);break;case SimileAjax.DateTime.YEAR:r.setUTCFullYear(r.getUTCFullYear()+1);break;case SimileAjax.DateTime.DECADE:r.setUTCFullYear(r.getUTCFullYear()+10);break;case SimileAjax.DateTime.CENTURY:r.setUTCFullYear(r.getUTCFullYear()+100);break;case SimileAjax.DateTime.MILLENNIUM:r.setUTCFullYear(r.getUTCFullYear()+1e3)}e.setTime(r.getTime()-n)},SimileAjax.DateTime.removeTimeZoneOffset=function(e,t){return new Date(e.getTime()+t*SimileAjax.DateTime.gregorianUnitLengths[SimileAjax.DateTime.HOUR])},SimileAjax.DateTime.getTimezone=function(){var e=(new Date).getTimezoneOffset();return e/-60},SimileAjax.Debug={silent:!1},SimileAjax.Debug.log=function(e){var t;t="console"in window&&"log"in window.console?function(e){console.log(e)}:function(e){SimileAjax.Debug.silent||alert(e)},SimileAjax.Debug.log=t,t(e)},SimileAjax.Debug.warn=function(e){var t;t="console"in window&&"warn"in window.console?function(e){console.warn(e)}:function(e){SimileAjax.Debug.silent||alert(e)},SimileAjax.Debug.warn=t,t(e)},SimileAjax.Debug.exception=function(e,t){var i,n=SimileAjax.parseURLParameters();i="throw"==n.errors||"throw"==SimileAjax.params.errors?function(e){throw e}:"console"in window&&"error"in window.console?function(e,t){throw null!=t?console.error(t+" %o",e):console.error(e),e}:function(e,t){throw SimileAjax.Debug.silent||alert("Caught exception: "+t+"\n\nDetails: "+("string"==typeof e?e:e.description)),e},SimileAjax.Debug.exception=i,i(e,t)},SimileAjax.Debug.objectToString=function(e){return SimileAjax.Debug._objectToString(e,"")},SimileAjax.Debug._objectToString=function(e,t){var i=t+" ";if("object"==typeof e){var n="{";for(r in e)n+=i+r+": "+SimileAjax.Debug._objectToString(e[r],i)+"\n";return n+=t+"}"}if("array"==typeof e){for(var n="[",r=0;r<e.length;r++)n+=SimileAjax.Debug._objectToString(e[r],i)+"\n";return n+=t+"]"}return e},SimileAjax.DOM=new Object,SimileAjax.DOM.registerEventWithObject=function(e,t,i,n){SimileAjax.DOM.registerEvent(e,t,function(e,t,r){return i[n].call(i,e,t,r)})},SimileAjax.DOM.registerEvent=function(e,t,i){var n=function(t){if(t=t?t:event?event:null){var n=t.target?t.target:t.srcElement?t.srcElement:null;return n&&(n=1==n.nodeType||9==n.nodeType?n:n.parentNode),i(e,t,n)}return!0};SimileAjax.Platform.browser.isIE?e.attachEvent("on"+t,n):e.addEventListener(t,n,!1)},SimileAjax.DOM.getPageCoordinates=function(e){var t=0,i=0;1!=e.nodeType&&(e=e.parentNode);for(var n=e;null!=n;)t+=n.offsetLeft,i+=n.offsetTop,n=n.offsetParent;for(var r=document.body;null!=e&&e!=r;)"scrollLeft"in e&&(t-=e.scrollLeft,i-=e.scrollTop),e=e.parentNode;return{left:t,top:i}},SimileAjax.DOM.getSize=function(e){var t=this.getStyle(e,"width"),i=this.getStyle(e,"height");return t.indexOf("px")>-1&&(t=t.replace("px","")),i.indexOf("px")>-1&&(i=i.replace("px","")),{w:t,h:i}},SimileAjax.DOM.getStyle=function(e,t){if(e.currentStyle)var i=e.currentStyle[t];else if(window.getComputedStyle)var i=document.defaultView.getComputedStyle(e,null).getPropertyValue(t);else var i="";return i},SimileAjax.DOM.getEventRelativeCoordinates=function(e,t){if(SimileAjax.Platform.browser.isIE)return{x:e.offsetX,y:e.offsetY};var i=SimileAjax.DOM.getPageCoordinates(t);return{x:e.pageX-i.left,y:e.pageY-i.top}},SimileAjax.DOM.getEventPageCoordinates=function(e){return SimileAjax.Platform.browser.isIE?{x:e.clientX+document.body.scrollLeft,y:e.clientY+document.body.scrollTop}:{x:e.pageX,y:e.pageY}},SimileAjax.DOM.hittest=function(e,t,i){return SimileAjax.DOM._hittest(document.body,e,t,i)},SimileAjax.DOM._hittest=function(e,t,i,n){var r=e.childNodes;e:for(var a=0;a<r.length;a++){for(var o=r[a],l=0;l<n.length;l++)if(o==n[l])continue e;if(0==o.offsetWidth&&0==o.offsetHeight){var s=SimileAjax.DOM._hittest(o,t,i,n);if(s!=o)return s}else{for(var h=0,u=0,c=o;c;)h+=c.offsetTop,u+=c.offsetLeft,c=c.offsetParent;if(t>=u&&i>=h&&t-u<o.offsetWidth&&i-h<o.offsetHeight)return SimileAjax.DOM._hittest(o,t,i,n);if(1==o.nodeType&&"TR"==o.tagName){var m=SimileAjax.DOM._hittest(o,t,i,n);if(m!=o)return m}}}return e},SimileAjax.DOM.cancelEvent=function(e){e.returnValue=!1,e.cancelBubble=!0,"preventDefault"in e&&e.preventDefault()},SimileAjax.DOM.appendClassName=function(e,t){for(var i=e.className.split(" "),n=0;n<i.length;n++)if(i[n]==t)return;i.push(t),e.className=i.join(" ")},SimileAjax.DOM.createInputElement=function(e){var t=document.createElement("div");return t.innerHTML="<input type='"+e+"' />",t.firstChild},SimileAjax.DOM.createDOMFromTemplate=function(e){var t={};return t.elmt=SimileAjax.DOM._createDOMFromTemplate(e,t,null),t},SimileAjax.DOM._createDOMFromTemplate=function(e,t,i){if(null==e)return null;if("object"!=typeof e){var r=document.createTextNode(e);return null!=i&&i.appendChild(r),r}var a=null;if("tag"in e){var o=e.tag;null!=i&&("tr"==o?a=i.insertRow(i.rows.length):"td"==o&&(a=i.insertCell(i.cells.length))),null==a&&(a="input"==o?SimileAjax.DOM.createInputElement(e.type):document.createElement(o),null!=i&&i.appendChild(a))}else a=e.elmt,null!=i&&i.appendChild(a);for(var l in e){var s=e[l];if("field"==l)t[s]=a;else if("className"==l)a.className=s;else if("id"==l)a.id=s;else if("title"==l)a.title=s;else if("type"==l&&"input"==a.tagName);else if("style"==l)for(n in s){var h=s[n];"float"==n&&(n=SimileAjax.Platform.browser.isIE?"styleFloat":"cssFloat"),a.style[n]=h}else if("children"==l)for(var u=0;u<s.length;u++)SimileAjax.DOM._createDOMFromTemplate(s[u],t,a);else"tag"!=l&&"elmt"!=l&&a.setAttribute(l,s)}return a},SimileAjax.DOM._cachedParent=null,SimileAjax.DOM.createElementFromString=function(e){return null==SimileAjax.DOM._cachedParent&&(SimileAjax.DOM._cachedParent=document.createElement("div")),SimileAjax.DOM._cachedParent.innerHTML=e,SimileAjax.DOM._cachedParent.firstChild},SimileAjax.DOM.createDOMFromString=function(e,t,i){var n="string"==typeof e?document.createElement(e):e;n.innerHTML=t;var r={elmt:n};return SimileAjax.DOM._processDOMChildrenConstructedFromString(r,n,null!=i?i:{}),r},SimileAjax.DOM._processDOMConstructedFromString=function(e,t,i){var n=t.id;if(null!=n&&n.length>0){if(t.removeAttribute("id"),n in i){var r=t.parentNode;return r.insertBefore(i[n],t),r.removeChild(t),void(e[n]=i[n])}e[n]=t}t.hasChildNodes()&&SimileAjax.DOM._processDOMChildrenConstructedFromString(e,t,i)},SimileAjax.DOM._processDOMChildrenConstructedFromString=function(e,t,i){for(var n=t.firstChild;null!=n;){var r=n.nextSibling;1==n.nodeType&&SimileAjax.DOM._processDOMConstructedFromString(e,n,i),n=r}},SimileAjax.Graphics=new Object,SimileAjax.Graphics.pngIsTranslucent=!SimileAjax.Platform.browser.isIE||SimileAjax.Platform.browser.majorVersion>6,SimileAjax.Graphics._createTranslucentImage1=function(e,t){var i=document.createElement("img");return i.setAttribute("src",e),null!=t&&(i.style.verticalAlign=t),i},SimileAjax.Graphics._createTranslucentImage2=function(e,t){var i=document.createElement("img");return i.style.width="1px",i.style.height="1px",i.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"', sizingMethod='image')",i.style.verticalAlign=null!=t?t:"middle",i},SimileAjax.Graphics.createTranslucentImage=SimileAjax.Graphics.pngIsTranslucent?SimileAjax.Graphics._createTranslucentImage1:SimileAjax.Graphics._createTranslucentImage2,SimileAjax.Graphics._createTranslucentImageHTML1=function(e,t){return'<img src="'+e+'"'+(null!=t?' style="vertical-align: '+t+';"':"")+" />"},SimileAjax.Graphics._createTranslucentImageHTML2=function(e,t){var i="width: 1px; height: 1px; filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"', sizingMethod='image');"+(null!=t?" vertical-align: "+t+";":"");return"<img src='"+e+"' style=\""+i+'" />'},SimileAjax.Graphics.createTranslucentImageHTML=SimileAjax.Graphics.pngIsTranslucent?SimileAjax.Graphics._createTranslucentImageHTML1:SimileAjax.Graphics._createTranslucentImageHTML2,SimileAjax.Graphics.setOpacity=function(e,t){if(SimileAjax.Platform.browser.isIE)e.style.filter="progid:DXImageTransform.Microsoft.Alpha(Style=0,Opacity="+t+")";else{var i=(t/100).toString();e.style.opacity=i,e.style.MozOpacity=i}},SimileAjax.Graphics._bubbleMargins={top:33,bottom:42,left:33,right:40},SimileAjax.Graphics._arrowOffsets={top:0,bottom:9,left:1,right:8},SimileAjax.Graphics._bubblePadding=15,SimileAjax.Graphics._bubblePointOffset=6,SimileAjax.Graphics._halfArrowWidth=18,SimileAjax.Graphics.createBubbleForContentAndPoint=function(e,t,i,n,r){"number"!=typeof n&&(n=300),e.style.position="absolute",e.style.left="-5000px",e.style.top="0px",e.style.width=n+"px",document.body.appendChild(e),window.setTimeout(function(){var n=e.scrollWidth+10,a=e.scrollHeight+10,o=SimileAjax.Graphics.createBubbleForPoint(t,i,n,a,r);document.body.removeChild(e),e.style.position="static",e.style.left="",e.style.top="",e.style.width=n+"px",o.content.appendChild(e)},200)},SimileAjax.Graphics.createBubbleForPoint=function(e,t,i,n,r){function a(){return"number"==typeof window.innerHeight?{w:window.innerWidth,h:window.innerHeight}:document.documentElement&&document.documentElement.clientHeight?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:document.body&&document.body.clientHeight?{w:document.body.clientWidth,h:document.body.clientHeight}:void 0}var o=function(){l._closed||(document.body.removeChild(l._div),l._doc=null,l._div=null,l._content=null,l._closed=!0)},l={_closed:!1},s=a(),h=s.w,u=s.h,c=SimileAjax.Graphics._bubbleMargins;i=parseInt(i,10),n=parseInt(n,10);var m=c.left+i+c.right,d=c.top+n+c.bottom,p=SimileAjax.Graphics.pngIsTranslucent,f=SimileAjax.urlPrefix,g=function(e,t,i,n){e.style.position="absolute",e.style.width=i+"px",e.style.height=n+"px",p?e.style.background="url("+t+")":e.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+t+"', sizingMethod='crop')"},y=document.createElement("div");y.style.width=m+"px",y.style.height=d+"px",y.style.position="absolute",y.style.zIndex=1e3;var v=SimileAjax.WindowManager.pushLayer(o,!0,y);l._div=y,l.close=function(){SimileAjax.WindowManager.popLayer(v)};var _=document.createElement("div");_.style.width="100%",_.style.height="100%",_.style.position="relative",y.appendChild(_);var x=function(e,t,i,n,r){var a=document.createElement("div");a.style.left=t+"px",a.style.top=i+"px",g(a,e,n,r),_.appendChild(a)};x(f+"images/bubble-top-left.png",0,0,c.left,c.top),x(f+"images/bubble-top.png",c.left,0,i,c.top),x(f+"images/bubble-top-right.png",c.left+i,0,c.right,c.top),x(f+"images/bubble-left.png",0,c.top,c.left,n),x(f+"images/bubble-right.png",c.left+i,c.top,c.right,n),x(f+"images/bubble-bottom-left.png",0,c.top+n,c.left,c.bottom),x(f+"images/bubble-bottom.png",c.left,c.top+n,i,c.bottom),x(f+"images/bubble-bottom-right.png",c.left+i,c.top+n,c.right,c.bottom);var b=document.createElement("div");b.style.left=m-c.right+SimileAjax.Graphics._bubblePadding-16-2+"px",b.style.top=c.top-SimileAjax.Graphics._bubblePadding+1+"px",b.style.cursor="pointer",g(b,f+"images/close-button.png",16,16),SimileAjax.WindowManager.registerEventWithObject(b,"click",l,"close"),_.appendChild(b);var T=document.createElement("div");return T.style.position="absolute",T.style.left=c.left+"px",T.style.top=c.top+"px",T.style.width=i+"px",T.style.height=n+"px",T.style.overflow="auto",T.style.background="white",_.appendChild(T),l.content=T,function(){if(e-SimileAjax.Graphics._halfArrowWidth-SimileAjax.Graphics._bubblePadding>0&&e+SimileAjax.Graphics._halfArrowWidth+SimileAjax.Graphics._bubblePadding<h){var a=e-Math.round(i/2)-c.left;if(a=h/2>e?Math.max(a,-(c.left-SimileAjax.Graphics._bubblePadding)):Math.min(a,h+(c.right-SimileAjax.Graphics._bubblePadding)-m),r&&"top"==r||!r&&t-SimileAjax.Graphics._bubblePointOffset-d>0){var o=document.createElement("div");return o.style.left=e-SimileAjax.Graphics._halfArrowWidth-a+"px",o.style.top=c.top+n+"px",g(o,f+"images/bubble-bottom-arrow.png",37,c.bottom),_.appendChild(o),y.style.left=a+"px",void(y.style.top=t-SimileAjax.Graphics._bubblePointOffset-d+SimileAjax.Graphics._arrowOffsets.bottom+"px")}if(r&&"bottom"==r||!r&&t+SimileAjax.Graphics._bubblePointOffset+d<u){var o=document.createElement("div");return o.style.left=e-SimileAjax.Graphics._halfArrowWidth-a+"px",o.style.top="0px",g(o,f+"images/bubble-top-arrow.png",37,c.top),_.appendChild(o),y.style.left=a+"px",void(y.style.top=t+SimileAjax.Graphics._bubblePointOffset-SimileAjax.Graphics._arrowOffsets.top+"px")}}var l=t-Math.round(n/2)-c.top;if(l=u/2>t?Math.max(l,-(c.top-SimileAjax.Graphics._bubblePadding)):Math.min(l,u+(c.bottom-SimileAjax.Graphics._bubblePadding)-d),r&&"left"==r||!r&&e-SimileAjax.Graphics._bubblePointOffset-m>0){var o=document.createElement("div");o.style.left=c.left+i+"px",o.style.top=t-SimileAjax.Graphics._halfArrowWidth-l+"px",g(o,f+"images/bubble-right-arrow.png",c.right,37),_.appendChild(o),y.style.left=e-SimileAjax.Graphics._bubblePointOffset-m+SimileAjax.Graphics._arrowOffsets.right+"px",y.style.top=l+"px"}else if(r&&"right"==r||!r&&e-SimileAjax.Graphics._bubblePointOffset-m<h){var o=document.createElement("div");o.style.left="0px",o.style.top=t-SimileAjax.Graphics._halfArrowWidth-l+"px",g(o,f+"images/bubble-left-arrow.png",c.left,37),_.appendChild(o),y.style.left=e+SimileAjax.Graphics._bubblePointOffset-SimileAjax.Graphics._arrowOffsets.left+"px",y.style.top=l+"px"}}(),document.body.appendChild(y),l},SimileAjax.Graphics.createMessageBubble=function(e){var t=e.createElement("div");if(SimileAjax.Graphics.pngIsTranslucent){var i=e.createElement("div");i.style.height="33px",i.style.background="url("+SimileAjax.urlPrefix+"images/message-top-left.png) top left no-repeat",i.style.paddingLeft="44px",t.appendChild(i);var n=e.createElement("div");n.style.height="33px",n.style.background="url("+SimileAjax.urlPrefix+"images/message-top-right.png) top right no-repeat",i.appendChild(n);var r=e.createElement("div");r.style.background="url("+SimileAjax.urlPrefix+"images/message-left.png) top left repeat-y",r.style.paddingLeft="44px",t.appendChild(r);var a=e.createElement("div");a.style.background="url("+SimileAjax.urlPrefix+"images/message-right.png) top right repeat-y",a.style.paddingRight="44px",r.appendChild(a);var o=e.createElement("div");a.appendChild(o);var l=e.createElement("div");l.style.height="55px",l.style.background="url("+SimileAjax.urlPrefix+"images/message-bottom-left.png) bottom left no-repeat",l.style.paddingLeft="44px",t.appendChild(l);var s=e.createElement("div");s.style.height="55px",s.style.background="url("+SimileAjax.urlPrefix+"images/message-bottom-right.png) bottom right no-repeat",l.appendChild(s)}else{t.style.border="2px solid #7777AA",t.style.padding="20px",t.style.background="white",SimileAjax.Graphics.setOpacity(t,90);var o=e.createElement("div");t.appendChild(o)}return{containerDiv:t,contentDiv:o}},SimileAjax.Graphics.createAnimation=function(e,t,i,n,r){return new SimileAjax.Graphics._Animation(e,t,i,n,r)},SimileAjax.Graphics._Animation=function(e,t,i,n,r){this.f=e,this.cont="function"==typeof r?r:function(){},this.from=t,this.to=i,this.current=t,this.duration=n,this.start=(new Date).getTime(),this.timePassed=0},SimileAjax.Graphics._Animation.prototype.run=function(){var e=this;window.setTimeout(function(){e.step()},50)},SimileAjax.Graphics._Animation.prototype.step=function(){this.timePassed+=50;var e=this.timePassed/this.duration,t=-Math.cos(e*Math.PI)/2+.5,i=t*(this.to-this.from)+this.from;
try{this.f(i,i-this.current)}catch(n){}this.current=i,this.timePassed<this.duration?this.run():(this.f(this.to,0),this.cont())},SimileAjax.Graphics.createStructuredDataCopyButton=function(e,t,i,n){var r=document.createElement("div");r.style.position="relative",r.style.display="inline",r.style.width=t+"px",r.style.height=i+"px",r.style.overflow="hidden",r.style.margin="2px",SimileAjax.Graphics.pngIsTranslucent?r.style.background="url("+e+") no-repeat":r.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"', sizingMethod='image')";var a;a=SimileAjax.Platform.browser.isIE?"filter:alpha(opacity=0)":"opacity: 0",r.innerHTML="<textarea rows='1' autocomplete='off' value='none' style='"+a+"' />";var o=r.firstChild;return o.style.width=t+"px",o.style.height=i+"px",o.onmousedown=function(e){e=e?e:event?event:null,2==e.button&&(o.value=n(),o.select())},r},SimileAjax.Graphics.getFontRenderingContext=function(e,t){return new SimileAjax.Graphics._FontRenderingContext(e,t)},SimileAjax.Graphics._FontRenderingContext=function(e,t){this._elmt=e,this._elmt.style.visibility="hidden","string"==typeof t?this._elmt.style.width=t:"number"==typeof t&&(this._elmt.style.width=t+"px")},SimileAjax.Graphics._FontRenderingContext.prototype.dispose=function(){this._elmt=null},SimileAjax.Graphics._FontRenderingContext.prototype.update=function(){this._elmt.innerHTML="A",this._lineHeight=this._elmt.offsetHeight},SimileAjax.Graphics._FontRenderingContext.prototype.computeSize=function(e){return this._elmt.innerHTML=e,{width:this._elmt.offsetWidth,height:this._elmt.offsetHeight}},SimileAjax.Graphics._FontRenderingContext.prototype.getLineHeight=function(){return this._lineHeight},SimileAjax.History={maxHistoryLength:10,historyFile:SimileAjax.urlPrefix+"content/history.html",enabled:!0,_initialized:!1,_listeners:new SimileAjax.ListenerQueue,_actions:[],_baseIndex:0,_currentIndex:0,_plainDocumentTitle:document.title},SimileAjax.History.formatHistoryEntryTitle=function(e){return SimileAjax.History._plainDocumentTitle+" {"+e+"}"},SimileAjax.History.initialize=function(){if(!SimileAjax.History._initialized){if(SimileAjax.History.enabled){var e=document.createElement("iframe");e.id="simile-ajax-history",e.style.position="absolute",e.style.width="10px",e.style.height="10px",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.src=SimileAjax.History.historyFile+"?0",document.body.appendChild(e),SimileAjax.DOM.registerEvent(e,"load",SimileAjax.History._handleIFrameOnLoad),SimileAjax.History._iframe=e}SimileAjax.History._initialized=!0}},SimileAjax.History.addListener=function(e){SimileAjax.History.initialize(),SimileAjax.History._listeners.add(e)},SimileAjax.History.removeListener=function(e){SimileAjax.History.initialize(),SimileAjax.History._listeners.remove(e)},SimileAjax.History.addAction=function(e){SimileAjax.History.initialize(),SimileAjax.History._listeners.fire("onBeforePerform",[e]),window.setTimeout(function(){try{if(e.perform(),SimileAjax.History._listeners.fire("onAfterPerform",[e]),SimileAjax.History.enabled){SimileAjax.History._actions=SimileAjax.History._actions.slice(0,SimileAjax.History._currentIndex-SimileAjax.History._baseIndex),SimileAjax.History._actions.push(e),SimileAjax.History._currentIndex++;var t=SimileAjax.History._actions.length-SimileAjax.History.maxHistoryLength;t>0&&(SimileAjax.History._actions=SimileAjax.History._actions.slice(t),SimileAjax.History._baseIndex+=t);try{SimileAjax.History._iframe.contentWindow.location.search="?"+SimileAjax.History._currentIndex}catch(i){var n=SimileAjax.History.formatHistoryEntryTitle(e.label);document.title=n}}}catch(i){SimileAjax.Debug.exception(i,"Error adding action {"+e.label+"} to history")}},0)},SimileAjax.History.addLengthyAction=function(e,t,i){SimileAjax.History.addAction({perform:e,undo:t,label:i,uiLayer:SimileAjax.WindowManager.getBaseLayer(),lengthy:!0})},SimileAjax.History._handleIFrameOnLoad=function(){try{var e=SimileAjax.History._iframe.contentWindow.location.search,t=0==e.length?0:Math.max(0,parseInt(e.substr(1))),i=function(){var e=t-SimileAjax.History._currentIndex;SimileAjax.History._currentIndex+=e,SimileAjax.History._baseIndex+=e,SimileAjax.History._iframe.contentWindow.location.search="?"+t};if(t<SimileAjax.History._currentIndex)SimileAjax.History._listeners.fire("onBeforeUndoSeveral",[]),window.setTimeout(function(){for(;SimileAjax.History._currentIndex>t&&SimileAjax.History._currentIndex>SimileAjax.History._baseIndex;){SimileAjax.History._currentIndex--;var e=SimileAjax.History._actions[SimileAjax.History._currentIndex-SimileAjax.History._baseIndex];try{e.undo()}catch(n){SimileAjax.Debug.exception(n,"History: Failed to undo action {"+e.label+"}")}}SimileAjax.History._listeners.fire("onAfterUndoSeveral",[]),i()},0);else if(t>SimileAjax.History._currentIndex)SimileAjax.History._listeners.fire("onBeforeRedoSeveral",[]),window.setTimeout(function(){for(;SimileAjax.History._currentIndex<t&&SimileAjax.History._currentIndex-SimileAjax.History._baseIndex<SimileAjax.History._actions.length;){var e=SimileAjax.History._actions[SimileAjax.History._currentIndex-SimileAjax.History._baseIndex];try{e.perform()}catch(n){SimileAjax.Debug.exception(n,"History: Failed to redo action {"+e.label+"}")}SimileAjax.History._currentIndex++}SimileAjax.History._listeners.fire("onAfterRedoSeveral",[]),i()},0);else{var n=SimileAjax.History._currentIndex-SimileAjax.History._baseIndex-1,r=n>=0&&n<SimileAjax.History._actions.length?SimileAjax.History.formatHistoryEntryTitle(SimileAjax.History._actions[n].label):SimileAjax.History._plainDocumentTitle;SimileAjax.History._iframe.contentWindow.document.title=r,document.title=r}}catch(a){}},SimileAjax.History.getNextUndoAction=function(){try{var e=SimileAjax.History._currentIndex-SimileAjax.History._baseIndex-1;return SimileAjax.History._actions[e]}catch(t){return null}},SimileAjax.History.getNextRedoAction=function(){try{var e=SimileAjax.History._currentIndex-SimileAjax.History._baseIndex;return SimileAjax.History._actions[e]}catch(t){return null}},SimileAjax.HTML=new Object,SimileAjax.HTML._e2uHash={},function(){var e=SimileAjax.HTML._e2uHash;e.nbsp=" [space]",e.iexcl="¡",e.cent="¢",e.pound="£",e.curren="¤",e.yen="¥",e.brvbar="¦",e.sect="§",e.uml="¨",e.copy="©",e.ordf="ª",e.laquo="«",e.not="¬",e.shy="­",e.reg="®",e.macr="¯",e.deg="°",e.plusmn="±",e.sup2="²",e.sup3="³",e.acute="´",e.micro="µ",e.para="¶",e.middot="·",e.cedil="¸",e.sup1="¹",e.ordm="º",e.raquo="»",e.frac14="¼",e.frac12="½",e.frac34="¾",e.iquest="¿",e.Agrave="À",e.Aacute="Á",e.Acirc="Â",e.Atilde="Ã",e.Auml="Ä",e.Aring="Å",e.AElig="Æ",e.Ccedil="Ç",e.Egrave="È",e.Eacute="É",e.Ecirc="Ê",e.Euml="Ë",e.Igrave="Ì",e.Iacute="Í",e.Icirc="Î",e.Iuml="Ï",e.ETH="Ð",e.Ntilde="Ñ",e.Ograve="Ò",e.Oacute="Ó",e.Ocirc="Ô",e.Otilde="Õ",e.Ouml="Ö",e.times="×",e.Oslash="Ø",e.Ugrave="Ù",e.Uacute="Ú",e.Ucirc="Û",e.Uuml="Ü",e.Yacute="Ý",e.THORN="Þ",e.szlig="ß",e.agrave="à",e.aacute="á",e.acirc="â",e.atilde="ã",e.auml="ä",e.aring="å",e.aelig="æ",e.ccedil="ç",e.egrave="è",e.eacute="é",e.ecirc="ê",e.euml="ë",e.igrave="ì",e.iacute="í",e.icirc="î",e.iuml="ï",e.eth="ð",e.ntilde="ñ",e.ograve="ò",e.oacute="ó",e.ocirc="ô",e.otilde="õ",e.ouml="ö",e.divide="÷",e.oslash="ø",e.ugrave="ù",e.uacute="ú",e.ucirc="û",e.uuml="ü",e.yacute="ý",e.thorn="þ",e.yuml="ÿ",e.quot='"',e.amp="&",e.lt="<",e.gt=">",e.OElig="",e.oelig="œ",e.Scaron="Š",e.scaron="š",e.Yuml="Ÿ",e.circ="ˆ",e.tilde="˜",e.ensp="?",e.emsp="?",e.thinsp="?",e.zwnj="?",e.zwj="?",e.lrm="?",e.rlm="?",e.ndash="–",e.mdash="—",e.lsquo="‘",e.rsquo="’",e.sbquo="‚",e.ldquo="“",e.rdquo="”",e.bdquo="„",e.dagger="†",e.Dagger="‡",e.permil="‰",e.lsaquo="‹",e.rsaquo="›",e.euro="€",e.fnof="ƒ",e.Alpha="?",e.Beta="?",e.Gamma="?",e.Delta="?",e.Epsilon="?",e.Zeta="?",e.Eta="?",e.Theta="?",e.Iota="?",e.Kappa="?",e.Lambda="?",e.Mu="?",e.Nu="?",e.Xi="?",e.Omicron="?",e.Pi="?",e.Rho="?",e.Sigma="?",e.Tau="?",e.Upsilon="?",e.Phi="?",e.Chi="?",e.Psi="?",e.Omega="?",e.alpha="?",e.beta="?",e.gamma="?",e.delta="?",e.epsilon="?",e.zeta="?",e.eta="?",e.theta="?",e.iota="?",e.kappa="?",e.lambda="?",e.mu="?",e.nu="?",e.xi="?",e.omicron="?",e.pi="?",e.rho="?",e.sigmaf="?",e.sigma="?",e.tau="?",e.upsilon="?",e.phi="?",e.chi="?",e.psi="?",e.omega="?",e.thetasym="?",e.upsih="?",e.piv="?",e.bull="•",e.hellip="…",e.prime="?",e.Prime="?",e.oline="?",e.frasl="?",e.weierp="?",e.image="?",e.real="?",e.trade="™",e.alefsym="?",e.larr="?",e.uarr="?",e.rarr="?",e.darr="?",e.harr="?",e.crarr="?",e.lArr="?",e.uArr="?",e.rArr="?",e.dArr="?",e.hArr="?",e.forall="?",e.part="?",e.exist="?",e.empty="?",e.nabla="?",e.isin="?",e.notin="?",e.ni="?",e.prod="?",e.sum="?",e.minus="?",e.lowast="?",e.radic="?",e.prop="?",e.infin="?",e.ang="?",e.and="?",e.or="?",e.cap="?",e.cup="?",e["int"]="?",e.there4="?",e.sim="?",e.cong="?",e.asymp="?",e.ne="?",e.equiv="?",e.le="?",e.ge="?",e.sub="?",e.sup="?",e.nsub="?",e.sube="?",e.supe="?",e.oplus="?",e.otimes="?",e.perp="?",e.sdot="?",e.lceil="?",e.rceil="?",e.lfloor="?",e.rfloor="?",e.lang="?",e.rang="?",e.loz="?",e.spades="?",e.clubs="?",e.hearts="?",e.diams="?"}(),SimileAjax.HTML.deEntify=function(e){for(var t=SimileAjax.HTML._e2uHash,i=/&(\w+?);/;i.test(e);){var n=e.match(i);e=e.replace(i,t[n[1]])}return e},function(){function evalScript(e,t){var i=jQuery.nodeName(t,"script");return i?(t.src?jQuery.ajax({url:t.src,async:!1,dataType:"script"}):jQuery.globalEval(t.text||t.textContent||t.innerHTML||""),t.parentNode&&t.parentNode.removeChild(t)):1==t.nodeType&&jQuery("script",t).each(evalScript),i}function bindReady(){if(!readyBound){if(readyBound=!0,jQuery.browser.mozilla||jQuery.browser.opera)document.addEventListener("DOMContentLoaded",jQuery.ready,!1);else if(jQuery.browser.msie){document.write("<script id=__ie_init defer=true src=//:></script>");var e=document.getElementById("__ie_init");e&&(e.onreadystatechange=function(){"complete"==this.readyState&&jQuery.ready()}),e=null}else jQuery.browser.safari&&(jQuery.safariTimer=setInterval(function(){("loaded"==document.readyState||"complete"==document.readyState)&&(clearInterval(jQuery.safariTimer),jQuery.safariTimer=null,jQuery.ready())},10));jQuery.event.add(window,"load",jQuery.ready)}}if("undefined"!=typeof jQuery)var _jQuery=jQuery;var jQuery=window.jQuery=function(e,t){return this instanceof jQuery?this.init(e,t):new jQuery(e,t)};if("undefined"!=typeof $)var _$=$;window.$=jQuery;var quickExpr=/^[^<]*(<(.|\s)+>)[^>]*$|^#(\w+)$/;jQuery.fn=jQuery.prototype={init:function(e,t){if(e=e||document,"string"==typeof e){var i=quickExpr.exec(e);if(!i||!i[1]&&t)return new jQuery(t).find(e);if(i[1])e=jQuery.clean([i[1]],t);else{var n=document.getElementById(i[3]);if(n)return n.id!=i[3]?jQuery().find(e):(this[0]=n,this.length=1,this);e=[]}}else if(jQuery.isFunction(e))return new jQuery(document)[jQuery.fn.ready?"ready":"load"](e);return this.setArray(e.constructor==Array&&e||(e.jquery||e.length&&e!=window&&!e.nodeType&&void 0!=e[0]&&e[0].nodeType)&&jQuery.makeArray(e)||[e])},jquery:"1.2.1",size:function(){return this.length},length:0,get:function(e){return void 0==e?jQuery.makeArray(this):this[e]},pushStack:function(e){var t=jQuery(e);return t.prevObject=this,t},setArray:function(e){return this.length=0,Array.prototype.push.apply(this,e),this},each:function(e,t){return jQuery.each(this,e,t)},index:function(e){var t=-1;return this.each(function(i){this==e&&(t=i)}),t},attr:function(e,t,i){var n=e;if(e.constructor==String){if(void 0==t)return this.length&&jQuery[i||"attr"](this[0],e)||void 0;n={},n[e]=t}return this.each(function(e){for(var t in n)jQuery.attr(i?this.style:this,t,jQuery.prop(this,n[t],i,e,t))})},css:function(e,t){return this.attr(e,t,"curCSS")},text:function(e){if("object"!=typeof e&&null!=e)return this.empty().append(document.createTextNode(e));var t="";return jQuery.each(e||this,function(){jQuery.each(this.childNodes,function(){8!=this.nodeType&&(t+=1!=this.nodeType?this.nodeValue:jQuery.fn.text([this]))})}),t},wrapAll:function(e){return this[0]&&jQuery(e,this[0].ownerDocument).clone().insertBefore(this[0]).map(function(){for(var e=this;e.firstChild;)e=e.firstChild;return e}).append(this),this},wrapInner:function(e){return this.each(function(){jQuery(this).contents().wrapAll(e)})},wrap:function(e){return this.each(function(){jQuery(this).wrapAll(e)})},append:function(){return this.domManip(arguments,!0,1,function(e){this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,-1,function(e){this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,1,function(e){this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,-1,function(e){this.parentNode.insertBefore(e,this.nextSibling)})},end:function(){return this.prevObject||jQuery([])},find:function(e){var t=jQuery.map(this,function(t){return jQuery.find(e,t)});return this.pushStack(/[^+>] [^+>]/.test(e)||e.indexOf("..")>-1?jQuery.unique(t):t)},clone:function(e){var t=this.map(function(){return this.outerHTML?jQuery(this.outerHTML)[0]:this.cloneNode(!0)}),i=t.find("*").andSelf().each(function(){void 0!=this[expando]&&(this[expando]=null)});return e===!0&&this.find("*").andSelf().each(function(e){var t=jQuery.data(this,"events");for(var n in t)for(var r in t[n])jQuery.event.add(i[e],n,t[n][r],t[n][r].data)}),t},filter:function(e){return this.pushStack(jQuery.isFunction(e)&&jQuery.grep(this,function(t,i){return e.apply(t,[i])})||jQuery.multiFilter(e,this))},not:function(e){return this.pushStack(e.constructor==String&&jQuery.multiFilter(e,this,!0)||jQuery.grep(this,function(t){return e.constructor==Array||e.jquery?jQuery.inArray(t,e)<0:t!=e}))},add:function(e){return this.pushStack(jQuery.merge(this.get(),e.constructor==String?jQuery(e).get():void 0==e.length||e.nodeName&&!jQuery.nodeName(e,"form")?[e]:e))},is:function(e){return e?jQuery.multiFilter(e,this).length>0:!1},hasClass:function(e){return this.is("."+e)},val:function(e){if(void 0!=e)return this.each(function(){if(e.constructor==Array&&/radio|checkbox/.test(this.type))this.checked=jQuery.inArray(this.value,e)>=0||jQuery.inArray(this.name,e)>=0;else if(jQuery.nodeName(this,"select")){var t=e.constructor==Array?e:[e];jQuery("option",this).each(function(){this.selected=jQuery.inArray(this.value,t)>=0||jQuery.inArray(this.text,t)>=0}),t.length||(this.selectedIndex=-1)}else this.value=e});if(this.length){var t=this[0];if(jQuery.nodeName(t,"select")){var i=t.selectedIndex,n=[],r=t.options,a="select-one"==t.type;if(0>i)return null;for(var o=a?i:0,l=a?i+1:r.length;l>o;o++){var s=r[o];if(s.selected){var e=jQuery.browser.msie&&!s.attributes.value.specified?s.text:s.value;if(a)return e;n.push(e)}}return n}return this[0].value.replace(/\r/g,"")}},html:function(e){return void 0==e?this.length?this[0].innerHTML:null:this.empty().append(e)},replaceWith:function(e){return this.after(e).remove()},eq:function(e){return this.slice(e,e+1)},slice:function(){return this.pushStack(Array.prototype.slice.apply(this,arguments))},map:function(e){return this.pushStack(jQuery.map(this,function(t,i){return e.call(t,i,t)}))},andSelf:function(){return this.add(this.prevObject)},domManip:function(e,t,i,n){var r,a=this.length>1;return this.each(function(){r||(r=jQuery.clean(e,this.ownerDocument),0>i&&r.reverse());var o=this;t&&jQuery.nodeName(this,"table")&&jQuery.nodeName(r[0],"tr")&&(o=this.getElementsByTagName("tbody")[0]||this.appendChild(document.createElement("tbody"))),jQuery.each(r,function(){var e=a?this.cloneNode(!0):this;evalScript(0,e)||n.call(o,e)})})}},jQuery.extend=jQuery.fn.extend=function(){var e=arguments[0]||{},t=1,i=arguments.length,n=!1;e.constructor==Boolean&&(n=e,e=arguments[1]||{}),1==i&&(e=this,t=0);for(var r;i>t;t++)if(null!=(r=arguments[t]))for(var a in r)e!=r[a]&&(n&&"object"==typeof r[a]&&e[a]?jQuery.extend(e[a],r[a]):void 0!=r[a]&&(e[a]=r[a]));return e};var expando="jQuery"+(new Date).getTime(),uuid=0,win={};jQuery.extend({noConflict:function(e){return window.$=_$,e&&(window.jQuery=_jQuery),jQuery},isFunction:function(e){return!!e&&"string"!=typeof e&&!e.nodeName&&e.constructor!=Array&&/function/i.test(e+"")},isXMLDoc:function(e){return e.documentElement&&!e.body||e.tagName&&e.ownerDocument&&!e.ownerDocument.body},globalEval:function(e){e=jQuery.trim(e),e&&(window.execScript?window.execScript(e):jQuery.browser.safari?window.setTimeout(e,0):eval.call(window,e))},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()==t.toUpperCase()},cache:{},data:function(e,t,i){e=e==window?win:e;var n=e[expando];return n||(n=e[expando]=++uuid),t&&!jQuery.cache[n]&&(jQuery.cache[n]={}),void 0!=i&&(jQuery.cache[n][t]=i),t?jQuery.cache[n][t]:n},removeData:function(e,t){e=e==window?win:e;var i=e[expando];if(t){if(jQuery.cache[i]){delete jQuery.cache[i][t],t="";for(t in jQuery.cache[i])break;t||jQuery.removeData(e)}}else{try{delete e[expando]}catch(n){e.removeAttribute&&e.removeAttribute(expando)}delete jQuery.cache[i]}},each:function(e,t,i){if(i)if(void 0==e.length)for(var n in e)t.apply(e[n],i);else for(var n=0,r=e.length;r>n&&t.apply(e[n],i)!==!1;n++);else if(void 0==e.length)for(var n in e)t.call(e[n],n,e[n]);else for(var n=0,r=e.length,a=e[0];r>n&&t.call(a,n,a)!==!1;a=e[++n]);return e},prop:function(e,t,i,n,r){jQuery.isFunction(t)&&(t=t.call(e,[n]));var a=/z-?index|font-?weight|opacity|zoom|line-?height/i;return t&&t.constructor==Number&&"curCSS"==i&&!a.test(r)?t+"px":t},className:{add:function(e,t){jQuery.each((t||"").split(/\s+/),function(t,i){jQuery.className.has(e.className,i)||(e.className+=(e.className?" ":"")+i)})},remove:function(e,t){e.className=void 0!=t?jQuery.grep(e.className.split(/\s+/),function(e){return!jQuery.className.has(t,e)}).join(" "):""},has:function(e,t){return jQuery.inArray(t,(e.className||e).toString().split(/\s+/))>-1}},swap:function(e,t,i){for(var n in t)e.style["old"+n]=e.style[n],e.style[n]=t[n];i.apply(e,[]);for(var n in t)e.style[n]=e.style["old"+n]},css:function(e,t){if("height"==t||"width"==t){var i,n,r={},a=["Top","Bottom","Right","Left"];return jQuery.each(a,function(){r["padding"+this]=0,r["border"+this+"Width"]=0}),jQuery.swap(e,r,function(){if(jQuery(e).is(":visible"))i=e.offsetHeight,n=e.offsetWidth;else{e=jQuery(e.cloneNode(!0)).find(":radio").removeAttr("checked").end().css({visibility:"hidden",position:"absolute",display:"block",right:"0",left:"0"}).appendTo(e.parentNode)[0];var t=jQuery.css(e.parentNode,"position")||"static";"static"==t&&(e.parentNode.style.position="relative"),i=e.clientHeight,n=e.clientWidth,"static"==t&&(e.parentNode.style.position="static"),e.parentNode.removeChild(e)}}),"height"==t?i:n}return jQuery.curCSS(e,t)},curCSS:function(e,t,i){function n(e){if(!jQuery.browser.safari)return!1;var t=document.defaultView.getComputedStyle(e,null);return!t||""==t.getPropertyValue("color")}var r,a=[],o=[];if("opacity"==t&&jQuery.browser.msie)return r=jQuery.attr(e.style,"opacity"),""==r?"1":r;if(t.match(/float/i)&&(t=styleFloat),!i&&e.style[t])r=e.style[t];else if(document.defaultView&&document.defaultView.getComputedStyle){t.match(/float/i)&&(t="float"),t=t.replace(/([A-Z])/g,"-$1").toLowerCase();var l=document.defaultView.getComputedStyle(e,null);if(l&&!n(e))r=l.getPropertyValue(t);else{for(var s=e;s&&n(s);s=s.parentNode)a.unshift(s);for(s=0;s<a.length;s++)n(a[s])&&(o[s]=a[s].style.display,a[s].style.display="block");for(r="display"==t&&null!=o[a.length-1]?"none":document.defaultView.getComputedStyle(e,null).getPropertyValue(t)||"",s=0;s<o.length;s++)null!=o[s]&&(a[s].style.display=o[s])}"opacity"==t&&""==r&&(r="1")}else if(e.currentStyle){var h=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()});if(r=e.currentStyle[t]||e.currentStyle[h],!/^\d+(px)?$/i.test(r)&&/^\d/.test(r)){var u=e.style.left,c=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,e.style.left=r||0,r=e.style.pixelLeft+"px",e.style.left=u,e.runtimeStyle.left=c}}return r},clean:function(e,t){var i=[];return t=t||document,jQuery.each(e,function(e,n){if(n){if(n.constructor==Number&&(n=n.toString()),"string"==typeof n){n=n.replace(/(<(\w+)[^>]*?)\/>/g,function(e,t,i){return i.match(/^(abbr|br|col|img|input|link|meta|param|hr|area)$/i)?e:t+"></"+i+">"});var r=jQuery.trim(n).toLowerCase(),a=t.createElement("div"),o=[],l=!r.indexOf("<opt")&&[1,"<select>","</select>"]||!r.indexOf("<leg")&&[1,"<fieldset>","</fieldset>"]||r.match(/^<(thead|tbody|tfoot|colg|cap)/)&&[1,"<table>","</table>"]||!r.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!r.indexOf("<td")||!r.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||!r.indexOf("<col")&&[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]||jQuery.browser.msie&&[1,"div<div>","</div>"]||[0,"",""];for(a.innerHTML=l[1]+n+l[2];l[0]--;)a=a.lastChild;if(jQuery.browser.msie){!r.indexOf("<table")&&r.indexOf("<tbody")<0?o=a.firstChild&&a.firstChild.childNodes:"<table>"==l[1]&&r.indexOf("<tbody")<0&&(o=a.childNodes);for(var s=o.length-1;s>=0;--s)jQuery.nodeName(o[s],"tbody")&&!o[s].childNodes.length&&o[s].parentNode.removeChild(o[s]);/^\s/.test(n)&&a.insertBefore(t.createTextNode(n.match(/^\s*/)[0]),a.firstChild)}n=jQuery.makeArray(a.childNodes)}(0!==n.length||jQuery.nodeName(n,"form")||jQuery.nodeName(n,"select"))&&(void 0==n[0]||jQuery.nodeName(n,"form")||n.options?i.push(n):i=jQuery.merge(i,n))}}),i},attr:function(e,t,i){var n=jQuery.isXMLDoc(e)?{}:jQuery.props;if("selected"==t&&jQuery.browser.safari&&e.parentNode.selectedIndex,n[t])return void 0!=i&&(e[n[t]]=i),e[n[t]];if(jQuery.browser.msie&&"style"==t)return jQuery.attr(e.style,"cssText",i);if(void 0==i&&jQuery.browser.msie&&jQuery.nodeName(e,"form")&&("action"==t||"method"==t))return e.getAttributeNode(t).nodeValue;if(e.tagName){if(void 0!=i){if("type"==t&&jQuery.nodeName(e,"input")&&e.parentNode)throw"type property can't be changed";e.setAttribute(t,i)}return jQuery.browser.msie&&/href|src/.test(t)&&!jQuery.isXMLDoc(e)?e.getAttribute(t,2):e.getAttribute(t)}return"opacity"==t&&jQuery.browser.msie?(void 0!=i&&(e.zoom=1,e.filter=(e.filter||"").replace(/alpha\([^)]*\)/,"")+("NaN"==parseFloat(i).toString()?"":"alpha(opacity="+100*i+")")),e.filter?(parseFloat(e.filter.match(/opacity=([^)]*)/)[1])/100).toString():""):(t=t.replace(/-([a-z])/gi,function(e,t){return t.toUpperCase()}),void 0!=i&&(e[t]=i),e[t])},trim:function(e){return(e||"").replace(/^\s+|\s+$/g,"")},makeArray:function(e){var t=[];if("array"!=typeof e)for(var i=0,n=e.length;n>i;i++)t.push(e[i]);else t=e.slice(0);return t},inArray:function(e,t){for(var i=0,n=t.length;n>i;i++)if(t[i]==e)return i;return-1},merge:function(e,t){if(jQuery.browser.msie)for(var i=0;t[i];i++)8!=t[i].nodeType&&e.push(t[i]);else for(var i=0;t[i];i++)e.push(t[i]);return e},unique:function(e){var t=[],i={};try{for(var n=0,r=e.length;r>n;n++){var a=jQuery.data(e[n]);i[a]||(i[a]=!0,t.push(e[n]))}}catch(o){t=e}return t},grep:function(elems,fn,inv){"string"==typeof fn&&(fn=eval("false||function(a,i){return "+fn+"}"));for(var result=[],i=0,el=elems.length;el>i;i++)(!inv&&fn(elems[i],i)||inv&&!fn(elems[i],i))&&result.push(elems[i]);return result},map:function(elems,fn){"string"==typeof fn&&(fn=eval("false||function(a){return "+fn+"}"));for(var result=[],i=0,el=elems.length;el>i;i++){var val=fn(elems[i],i);null!==val&&void 0!=val&&(val.constructor!=Array&&(val=[val]),result=result.concat(val))}return result}});var userAgent=navigator.userAgent.toLowerCase();jQuery.browser={version:(userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],safari:/webkit/.test(userAgent),opera:/opera/.test(userAgent),msie:/msie/.test(userAgent)&&!/opera/.test(userAgent),mozilla:/mozilla/.test(userAgent)&&!/(compatible|webkit)/.test(userAgent)};var styleFloat=jQuery.browser.msie?"styleFloat":"cssFloat";jQuery.extend({boxModel:!jQuery.browser.msie||"CSS1Compat"==document.compatMode,styleFloat:jQuery.browser.msie?"styleFloat":"cssFloat",props:{"for":"htmlFor","class":"className","float":styleFloat,cssFloat:styleFloat,styleFloat:styleFloat,innerHTML:"innerHTML",className:"className",value:"value",disabled:"disabled",checked:"checked",readonly:"readOnly",selected:"selected",maxlength:"maxLength"}}),jQuery.each({parent:"a.parentNode",parents:"jQuery.dir(a,'parentNode')",next:"jQuery.nth(a,2,'nextSibling')",prev:"jQuery.nth(a,2,'previousSibling')",nextAll:"jQuery.dir(a,'nextSibling')",prevAll:"jQuery.dir(a,'previousSibling')",siblings:"jQuery.sibling(a.parentNode.firstChild,a)",children:"jQuery.sibling(a.firstChild)",contents:"jQuery.nodeName(a,'iframe')?a.contentDocument||a.contentWindow.document:jQuery.makeArray(a.childNodes)"},function(e,t){jQuery.fn[e]=function(e){var i=jQuery.map(this,t);return e&&"string"==typeof e&&(i=jQuery.multiFilter(e,i)),this.pushStack(jQuery.unique(i))}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){jQuery.fn[e]=function(){var e=arguments;return this.each(function(){for(var i=0,n=e.length;n>i;i++)jQuery(e[i])[t](this)})}}),jQuery.each({removeAttr:function(e){jQuery.attr(this,e,""),this.removeAttribute(e)},addClass:function(e){jQuery.className.add(this,e)},removeClass:function(e){jQuery.className.remove(this,e)},toggleClass:function(e){jQuery.className[jQuery.className.has(this,e)?"remove":"add"](this,e)},remove:function(e){(!e||jQuery.filter(e,[this]).r.length)&&(jQuery.removeData(this),this.parentNode.removeChild(this))},empty:function(){for(jQuery("*",this).each(function(){jQuery.removeData(this)});this.firstChild;)this.removeChild(this.firstChild)}},function(e,t){jQuery.fn[e]=function(){return this.each(t,arguments)}}),jQuery.each(["Height","Width"],function(e,t){var i=t.toLowerCase();jQuery.fn[i]=function(e){return this[0]==window?jQuery.browser.safari&&self["inner"+t]||jQuery.boxModel&&Math.max(document.documentElement["client"+t],document.body["client"+t])||document.body["client"+t]:this[0]==document?Math.max(document.body["scroll"+t],document.body["offset"+t]):void 0==e?this.length?jQuery.css(this[0],i):null:this.css(i,e.constructor==String?e:e+"px")}});var chars=jQuery.browser.safari&&parseInt(jQuery.browser.version)<417?"(?:[\\w*_-]|\\\\.)":"(?:[\\w?-?*_-]|\\\\.)",quickChild=new RegExp("^>\\s*("+chars+"+)"),quickID=new RegExp("^("+chars+"+)(#)("+chars+"+)"),quickClass=new RegExp("^([#.]?)("+chars+"*)");jQuery.extend({expr:{"":"m[2]=='*'||jQuery.nodeName(a,m[2])","#":"a.getAttribute('id')==m[2]",":":{lt:"i<m[3]-0",gt:"i>m[3]-0",nth:"m[3]-0==i",eq:"m[3]-0==i",first:"i==0",last:"i==r.length-1",even:"i%2==0",odd:"i%2","first-child":"a.parentNode.getElementsByTagName('*')[0]==a","last-child":"jQuery.nth(a.parentNode.lastChild,1,'previousSibling')==a","only-child":"!jQuery.nth(a.parentNode.lastChild,2,'previousSibling')",parent:"a.firstChild",empty:"!a.firstChild",contains:"(a.textContent||a.innerText||jQuery(a).text()||'').indexOf(m[3])>=0",visible:'"hidden"!=a.type&&jQuery.css(a,"display")!="none"&&jQuery.css(a,"visibility")!="hidden"',hidden:'"hidden"==a.type||jQuery.css(a,"display")=="none"||jQuery.css(a,"visibility")=="hidden"',enabled:"!a.disabled",disabled:"a.disabled",checked:"a.checked",selected:"a.selected||jQuery.attr(a,'selected')",text:"'text'==a.type",radio:"'radio'==a.type",checkbox:"'checkbox'==a.type",file:"'file'==a.type",password:"'password'==a.type",submit:"'submit'==a.type",image:"'image'==a.type",reset:"'reset'==a.type",button:'"button"==a.type||jQuery.nodeName(a,"button")',input:"/input|select|textarea|button/i.test(a.nodeName)",has:"jQuery.find(m[3],a).length",header:"/h\\d/i.test(a.nodeName)",animated:"jQuery.grep(jQuery.timers,function(fn){return a==fn.elem;}).length"}},parse:[/^(\[) *@?([\w-]+) *([!*$^~=]*) *('?"?)(.*?)\4 *\]/,/^(:)([\w-]+)\("?'?(.*?(\(.*?\))?[^(]*?)"?'?\)/,new RegExp("^([:.#]*)("+chars+"+)")],multiFilter:function(e,t,i){for(var n,r=[];e&&e!=n;){n=e;var a=jQuery.filter(e,t,i);e=a.t.replace(/^\s*,\s*/,""),r=i?t=a.r:jQuery.merge(r,a.r)}return r},find:function(e,t){if("string"!=typeof e)return[e];t&&!t.nodeType&&(t=null),t=t||document;for(var i,n=[t],r=[];e&&i!=e;){var a=[];i=e,e=jQuery.trim(e);var o=!1,l=quickChild,s=l.exec(e);if(s){for(var h=s[1].toUpperCase(),u=0;n[u];u++)for(var c=n[u].firstChild;c;c=c.nextSibling)1!=c.nodeType||"*"!=h&&c.nodeName.toUpperCase()!=h.toUpperCase()||a.push(c);if(n=a,e=e.replace(l,""),0==e.indexOf(" "))continue;o=!0}else if(l=/^([>+~])\s*(\w*)/i,null!=(s=l.exec(e))){a=[];var h=s[2],m={};s=s[1];for(var d=0,p=n.length;p>d;d++)for(var f="~"==s||"+"==s?n[d].nextSibling:n[d].firstChild;f;f=f.nextSibling)if(1==f.nodeType){var g=jQuery.data(f);if("~"==s&&m[g])break;if(h&&f.nodeName.toUpperCase()!=h.toUpperCase()||("~"==s&&(m[g]=!0),a.push(f)),"+"==s)break}n=a,e=jQuery.trim(e.replace(l,"")),o=!0}if(e&&!o)if(e.indexOf(",")){var y=quickID,s=y.exec(e);s?s=[0,s[2],s[3],s[1]]:(y=quickClass,s=y.exec(e)),s[2]=s[2].replace(/\\/g,"");var v=n[n.length-1];if("#"==s[1]&&v&&v.getElementById&&!jQuery.isXMLDoc(v)){var _=v.getElementById(s[2]);(jQuery.browser.msie||jQuery.browser.opera)&&_&&"string"==typeof _.id&&_.id!=s[2]&&(_=jQuery('[@id="'+s[2]+'"]',v)[0]),n=a=!_||s[3]&&!jQuery.nodeName(_,s[3])?[]:[_]}else{for(var u=0;n[u];u++){var x="#"==s[1]&&s[3]?s[3]:""!=s[1]||""==s[0]?"*":s[2];"*"==x&&"object"==n[u].nodeName.toLowerCase()&&(x="param"),a=jQuery.merge(a,n[u].getElementsByTagName(x))}if("."==s[1]&&(a=jQuery.classFilter(a,s[2])),"#"==s[1]){for(var b=[],u=0;a[u];u++)if(a[u].getAttribute("id")==s[2]){b=[a[u]];break}a=b}n=a}e=e.replace(y,"")}else t==n[0]&&n.shift(),r=jQuery.merge(r,n),a=n=[t],e=" "+e.substr(1,e.length);if(e){var T=jQuery.filter(e,a);n=a=T.r,e=jQuery.trim(T.t)}}return e&&(n=[]),n&&t==n[0]&&n.shift(),r=jQuery.merge(r,n)},classFilter:function(e,t,i){t=" "+t+" ";for(var n=[],r=0;e[r];r++){var a=(" "+e[r].className+" ").indexOf(t)>=0;(!i&&a||i&&!a)&&n.push(e[r])}return n},filter:function(t,r,not){for(var last;t&&t!=last;){last=t;for(var p=jQuery.parse,m,i=0;p[i];i++)if(m=p[i].exec(t)){t=t.substring(m[0].length),m[2]=m[2].replace(/\\/g,"");break}if(!m)break;if(":"==m[1]&&"not"==m[2])r=jQuery.filter(m[3],r,!0).r;else if("."==m[1])r=jQuery.classFilter(r,m[2],not);else if("["==m[1]){for(var tmp=[],type=m[3],i=0,rl=r.length;rl>i;i++){var a=r[i],z=a[jQuery.props[m[2]]||m[2]];(null==z||/href|src|selected/.test(m[2]))&&(z=jQuery.attr(a,m[2])||""),(""==type&&!!z||"="==type&&z==m[5]||"!="==type&&z!=m[5]||"^="==type&&z&&!z.indexOf(m[5])||"$="==type&&z.substr(z.length-m[5].length)==m[5]||("*="==type||"~="==type)&&z.indexOf(m[5])>=0)^not&&tmp.push(a)}r=tmp}else if(":"==m[1]&&"nth-child"==m[2]){for(var merge={},tmp=[],test=/(\d*)n\+?(\d*)/.exec("even"==m[3]&&"2n"||"odd"==m[3]&&"2n+1"||!/\D/.test(m[3])&&"n+"+m[3]||m[3]),first=(test[1]||1)-0,last=test[2]-0,i=0,rl=r.length;rl>i;i++){var node=r[i],parentNode=node.parentNode,id=jQuery.data(parentNode);if(!merge[id]){for(var c=1,n=parentNode.firstChild;n;n=n.nextSibling)1==n.nodeType&&(n.nodeIndex=c++);merge[id]=!0}var add=!1;1==first?(0==last||node.nodeIndex==last)&&(add=!0):(node.nodeIndex+last)%first==0&&(add=!0),add^not&&tmp.push(node)}r=tmp}else{var f=jQuery.expr[m[1]];"string"!=typeof f&&(f=jQuery.expr[m[1]][m[2]]),f=eval("false||function(a,i){return "+f+"}"),r=jQuery.grep(r,f,not)}}return{r:r,t:t}},dir:function(e,t){for(var i=[],n=e[t];n&&n!=document;)1==n.nodeType&&i.push(n),n=n[t];return i},nth:function(e,t,i){t=t||1;for(var n=0;e&&(1!=e.nodeType||++n!=t);e=e[i]);return e},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1!=e.nodeType||t&&e==t||i.push(e);return i}}),jQuery.event={add:function(e,t,i,n){if(jQuery.browser.msie&&void 0!=e.setInterval&&(e=window),i.guid||(i.guid=this.guid++),void 0!=n){var r=i;i=function(){return r.apply(this,arguments)},i.data=n,i.guid=r.guid}var a=t.split(".");t=a[0],i.type=a[1];var o=jQuery.data(e,"events")||jQuery.data(e,"events",{}),l=jQuery.data(e,"handle",function(){var t;return"undefined"==typeof jQuery||jQuery.event.triggered?t:t=jQuery.event.handle.apply(e,arguments)}),s=o[t];s||(s=o[t]={},e.addEventListener?e.addEventListener(t,l,!1):e.attachEvent("on"+t,l)),s[i.guid]=i,this.global[t]=!0
},guid:1,global:{},remove:function(e,t,i){var n,r=jQuery.data(e,"events");if("string"==typeof t){var a=t.split(".");t=a[0]}if(r){if(t&&t.type&&(i=t.handler,t=t.type),t){if(r[t]){if(i)delete r[t][i.guid];else for(i in r[t])a[1]&&r[t][i].type!=a[1]||delete r[t][i];for(n in r[t])break;n||(e.removeEventListener?e.removeEventListener(t,jQuery.data(e,"handle"),!1):e.detachEvent("on"+t,jQuery.data(e,"handle")),n=null,delete r[t])}}else for(t in r)this.remove(e,t);for(n in r)break;n||(jQuery.removeData(e,"events"),jQuery.removeData(e,"handle"))}},trigger:function(e,t,i,n,r){if(t=jQuery.makeArray(t||[]),i){var a,o=jQuery.isFunction(i[e]||null),l=!t[0]||!t[0].preventDefault;l&&t.unshift(this.fix({type:e,target:i})),t[0].type=e,jQuery.isFunction(jQuery.data(i,"handle"))&&(a=jQuery.data(i,"handle").apply(i,t)),!o&&i["on"+e]&&i["on"+e].apply(i,t)===!1&&(a=!1),l&&t.shift(),r&&r.apply(i,t)===!1&&(a=!1),!o||n===!1||a===!1||jQuery.nodeName(i,"a")&&"click"==e||(this.triggered=!0,i[e]()),this.triggered=!1}else this.global[e]&&jQuery("*").add([window,document]).trigger(e,t);return a},handle:function(e){var t;e=jQuery.event.fix(e||window.event||{});var i=e.type.split(".");e.type=i[0];var n=jQuery.data(this,"events")&&jQuery.data(this,"events")[e.type],r=Array.prototype.slice.call(arguments,1);r.unshift(e);for(var a in n)if(r[0].handler=n[a],r[0].data=n[a].data,!i[1]||n[a].type==i[1]){var o=n[a].apply(this,r);t!==!1&&(t=o),o===!1&&(e.preventDefault(),e.stopPropagation())}return jQuery.browser.msie&&(e.target=e.preventDefault=e.stopPropagation=e.handler=e.data=null),t},fix:function(e){var t=e;if(e=jQuery.extend({},t),e.preventDefault=function(){t.preventDefault&&t.preventDefault(),t.returnValue=!1},e.stopPropagation=function(){t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0},!e.target&&e.srcElement&&(e.target=e.srcElement),jQuery.browser.safari&&3==e.target.nodeType&&(e.target=t.target.parentNode),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement==e.target?e.toElement:e.fromElement),null==e.pageX&&null!=e.clientX){var i=document.documentElement,n=document.body;e.pageX=e.clientX+(i&&i.scrollLeft||n.scrollLeft||0),e.pageY=e.clientY+(i&&i.scrollTop||n.scrollTop||0)}return e.which||!e.charCode&&!e.keyCode||(e.which=e.charCode||e.keyCode),!e.metaKey&&e.ctrlKey&&(e.metaKey=e.ctrlKey),!e.which&&e.button&&(e.which=1&e.button?1:2&e.button?3:4&e.button?2:0),e}},jQuery.fn.extend({bind:function(e,t,i){return"unload"==e?this.one(e,t,i):this.each(function(){jQuery.event.add(this,e,i||t,i&&t)})},one:function(e,t,i){return this.each(function(){jQuery.event.add(this,e,function(e){return jQuery(this).unbind(e),(i||t).apply(this,arguments)},i&&t)})},unbind:function(e,t){return this.each(function(){jQuery.event.remove(this,e,t)})},trigger:function(e,t,i){return this.each(function(){jQuery.event.trigger(e,t,this,!0,i)})},triggerHandler:function(e,t,i){return this[0]?jQuery.event.trigger(e,t,this[0],!1,i):void 0},toggle:function(){var e=arguments;return this.click(function(t){return this.lastToggle=0==this.lastToggle?1:0,t.preventDefault(),e[this.lastToggle].apply(this,[t])||!1})},hover:function(e,t){function i(i){for(var n=i.relatedTarget;n&&n!=this;)try{n=n.parentNode}catch(i){n=this}return n==this?!1:("mouseover"==i.type?e:t).apply(this,[i])}return this.mouseover(i).mouseout(i)},ready:function(e){return bindReady(),jQuery.isReady?e.apply(document,[jQuery]):jQuery.readyList.push(function(){return e.apply(this,[jQuery])}),this}}),jQuery.extend({isReady:!1,readyList:[],ready:function(){jQuery.isReady||(jQuery.isReady=!0,jQuery.readyList&&(jQuery.each(jQuery.readyList,function(){this.apply(document)}),jQuery.readyList=null),(jQuery.browser.mozilla||jQuery.browser.opera)&&document.removeEventListener("DOMContentLoaded",jQuery.ready,!1),window.frames.length||jQuery(window).load(function(){jQuery("#__ie_init").remove()}))}}),jQuery.each("blur,focus,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,change,select,submit,keydown,keypress,keyup,error".split(","),function(e,t){jQuery.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)}});var readyBound=!1;jQuery.fn.extend({load:function(e,t,i){if(jQuery.isFunction(e))return this.bind("load",e);var n=e.indexOf(" ");if(n>=0){var r=e.slice(n,e.length);e=e.slice(0,n)}i=i||function(){};var a="GET";t&&(jQuery.isFunction(t)?(i=t,t=null):(t=jQuery.param(t),a="POST"));var o=this;return jQuery.ajax({url:e,type:a,data:t,complete:function(e,t){("success"==t||"notmodified"==t)&&o.html(r?jQuery("<div/>").append(e.responseText.replace(/<script(.|\s)*?\/script>/g,"")).find(r):e.responseText),setTimeout(function(){o.each(i,[e.responseText,t,e])},13)}}),this},serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return jQuery.nodeName(this,"form")?jQuery.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||/select|textarea/i.test(this.nodeName)||/text|hidden|password/i.test(this.type))}).map(function(e,t){var i=jQuery(this).val();return null==i?null:i.constructor==Array?jQuery.map(i,function(e){return{name:t.name,value:e}}):{name:t.name,value:i}}).get()}}),jQuery.each("ajaxStart,ajaxStop,ajaxComplete,ajaxError,ajaxSuccess,ajaxSend".split(","),function(e,t){jQuery.fn[t]=function(e){return this.bind(t,e)}});var jsc=(new Date).getTime();jQuery.extend({get:function(e,t,i,n){return jQuery.isFunction(t)&&(i=t,t=null),jQuery.ajax({type:"GET",url:e,data:t,success:i,dataType:n})},getScript:function(e,t){return jQuery.get(e,null,t,"script")},getJSON:function(e,t,i){return jQuery.get(e,t,i,"json")},post:function(e,t,i,n){return jQuery.isFunction(t)&&(i=t,t={}),jQuery.ajax({type:"POST",url:e,data:t,success:i,dataType:n})},ajaxSetup:function(e){jQuery.extend(jQuery.ajaxSettings,e)},ajaxSettings:{global:!0,type:"GET",timeout:0,contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,data:null},lastModified:{},ajax:function(e){function t(){e.success&&e.success(a,r),e.global&&jQuery.event.trigger("ajaxSuccess",[c,e])}function i(){e.complete&&e.complete(c,r),e.global&&jQuery.event.trigger("ajaxComplete",[c,e]),e.global&&!--jQuery.active&&jQuery.event.trigger("ajaxStop")}var n,r,a,o=/=(\?|%3F)/g;if(e=jQuery.extend(!0,e,jQuery.extend(!0,{},jQuery.ajaxSettings,e)),e.data&&e.processData&&"string"!=typeof e.data&&(e.data=jQuery.param(e.data)),"jsonp"==e.dataType&&("get"==e.type.toLowerCase()?e.url.match(o)||(e.url+=(e.url.match(/\?/)?"&":"?")+(e.jsonp||"callback")+"=?"):e.data&&e.data.match(o)||(e.data=(e.data?e.data+"&":"")+(e.jsonp||"callback")+"=?"),e.dataType="json"),"json"==e.dataType&&(e.data&&e.data.match(o)||e.url.match(o))&&(n="jsonp"+jsc++,e.data&&(e.data=e.data.replace(o,"="+n)),e.url=e.url.replace(o,"="+n),e.dataType="script",window[n]=function(e){a=e,t(),i(),window[n]=void 0;try{delete window[n]}catch(r){}}),"script"==e.dataType&&null==e.cache&&(e.cache=!1),e.cache===!1&&"get"==e.type.toLowerCase()&&(e.url+=(e.url.match(/\?/)?"&":"?")+"_="+(new Date).getTime()),e.data&&"get"==e.type.toLowerCase()&&(e.url+=(e.url.match(/\?/)?"&":"?")+e.data,e.data=null),e.global&&!jQuery.active++&&jQuery.event.trigger("ajaxStart"),!e.url.indexOf("http")&&"script"==e.dataType){var l=document.getElementsByTagName("head")[0],s=document.createElement("script");if(s.src=e.url,!n&&(e.success||e.complete)){var h=!1;s.onload=s.onreadystatechange=function(){h||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(h=!0,t(),i(),l.removeChild(s))}}return void l.appendChild(s)}var u=!1,c=window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;c.open(e.type,e.url,e.async),e.data&&c.setRequestHeader("Content-Type",e.contentType),e.ifModified&&c.setRequestHeader("If-Modified-Since",jQuery.lastModified[e.url]||"Thu, 01 Jan 1970 00:00:00 GMT"),c.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.beforeSend&&e.beforeSend(c),e.global&&jQuery.event.trigger("ajaxSend",[c,e]);var m=function(o){if(!u&&c&&(4==c.readyState||"timeout"==o)){if(u=!0,d&&(clearInterval(d),d=null),r="timeout"==o&&"timeout"||!jQuery.httpSuccess(c)&&"error"||e.ifModified&&jQuery.httpNotModified(c,e.url)&&"notmodified"||"success","success"==r)try{a=jQuery.httpData(c,e.dataType)}catch(l){r="parsererror"}if("success"==r){var s;try{s=c.getResponseHeader("Last-Modified")}catch(l){}e.ifModified&&s&&(jQuery.lastModified[e.url]=s),n||t()}else jQuery.handleError(e,c,r);i(),e.async&&(c=null)}};if(e.async){var d=setInterval(m,13);e.timeout>0&&setTimeout(function(){c&&(c.abort(),u||m("timeout"))},e.timeout)}try{c.send(e.data)}catch(p){jQuery.handleError(e,c,null,p)}return e.async||m(),c},handleError:function(e,t,i,n){e.error&&e.error(t,i,n),e.global&&jQuery.event.trigger("ajaxError",[t,e,n])},active:0,httpSuccess:function(e){try{return!e.status&&"file:"==location.protocol||e.status>=200&&e.status<300||304==e.status||jQuery.browser.safari&&void 0==e.status}catch(t){}return!1},httpNotModified:function(e,t){try{var i=e.getResponseHeader("Last-Modified");return 304==e.status||i==jQuery.lastModified[t]||jQuery.browser.safari&&void 0==e.status}catch(n){}return!1},httpData:function(r,type){var ct=r.getResponseHeader("content-type"),xml="xml"==type||!type&&ct&&ct.indexOf("xml")>=0,data=xml?r.responseXML:r.responseText;if(xml&&"parsererror"==data.documentElement.tagName)throw"parsererror";return"script"==type&&jQuery.globalEval(data),"json"==type&&(data=eval("("+data+")")),data},param:function(e){var t=[];if(e.constructor==Array||e.jquery)jQuery.each(e,function(){t.push(encodeURIComponent(this.name)+"="+encodeURIComponent(this.value))});else for(var i in e)e[i]&&e[i].constructor==Array?jQuery.each(e[i],function(){t.push(encodeURIComponent(i)+"="+encodeURIComponent(this))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t.join("&").replace(/%20/g,"+")}}),jQuery.fn.extend({show:function(e,t){return e?this.animate({height:"show",width:"show",opacity:"show"},e,t):this.filter(":hidden").each(function(){this.style.display=this.oldblock?this.oldblock:"","none"==jQuery.css(this,"display")&&(this.style.display="block")}).end()},hide:function(e,t){return e?this.animate({height:"hide",width:"hide",opacity:"hide"},e,t):this.filter(":visible").each(function(){this.oldblock=this.oldblock||jQuery.css(this,"display"),"none"==this.oldblock&&(this.oldblock="block"),this.style.display="none"}).end()},_toggle:jQuery.fn.toggle,toggle:function(e,t){return jQuery.isFunction(e)&&jQuery.isFunction(t)?this._toggle(e,t):e?this.animate({height:"toggle",width:"toggle",opacity:"toggle"},e,t):this.each(function(){jQuery(this)[jQuery(this).is(":hidden")?"show":"hide"]()})},slideDown:function(e,t){return this.animate({height:"show"},e,t)},slideUp:function(e,t){return this.animate({height:"hide"},e,t)},slideToggle:function(e,t){return this.animate({height:"toggle"},e,t)},fadeIn:function(e,t){return this.animate({opacity:"show"},e,t)},fadeOut:function(e,t){return this.animate({opacity:"hide"},e,t)},fadeTo:function(e,t,i){return this.animate({opacity:t},e,i)},animate:function(e,t,i,n){var r=jQuery.speed(t,i,n);return this[r.queue===!1?"each":"queue"](function(){r=jQuery.extend({},r);var t=jQuery(this).is(":hidden"),i=this;for(var n in e){if("hide"==e[n]&&t||"show"==e[n]&&!t)return jQuery.isFunction(r.complete)&&r.complete.apply(this);("height"==n||"width"==n)&&(r.display=jQuery.css(this,"display"),r.overflow=this.style.overflow)}return null!=r.overflow&&(this.style.overflow="hidden"),r.curAnim=jQuery.extend({},e),jQuery.each(e,function(n,a){var o=new jQuery.fx(i,r,n);if(/toggle|show|hide/.test(a))o["toggle"==a?t?"show":"hide":a](e);else{var l=a.toString().match(/^([+-]=)?([\d+-.]+)(.*)$/),s=o.cur(!0)||0;if(l){var h=parseFloat(l[2]),u=l[3]||"px";"px"!=u&&(i.style[n]=(h||1)+u,s=(h||1)/o.cur(!0)*s,i.style[n]=s+u),l[1]&&(h=("-="==l[1]?-1:1)*h+s),o.custom(s,h,u)}else o.custom(s,a,"")}}),!0})},queue:function(e,t){return jQuery.isFunction(e)&&(t=e,e="fx"),!e||"string"==typeof e&&!t?queue(this[0],e):this.each(function(){t.constructor==Array?queue(this,e,t):(queue(this,e).push(t),1==queue(this,e).length&&t.apply(this))})},stop:function(){var e=jQuery.timers;return this.each(function(){for(var t=0;t<e.length;t++)e[t].elem==this&&e.splice(t--,1)}).dequeue()}});var queue=function(e,t,i){if(e){var n=jQuery.data(e,t+"queue");return(!n||i)&&(n=jQuery.data(e,t+"queue",i?jQuery.makeArray(i):[])),n}};jQuery.fn.dequeue=function(e){return e=e||"fx",this.each(function(){var t=queue(this,e);t.shift(),t.length&&t[0].apply(this)})},jQuery.extend({speed:function(e,t,i){var n=e&&e.constructor==Object?e:{complete:i||!i&&t||jQuery.isFunction(e)&&e,duration:e,easing:i&&t||t&&t.constructor!=Function&&t};return n.duration=(n.duration&&n.duration.constructor==Number?n.duration:{slow:600,fast:200}[n.duration])||400,n.old=n.complete,n.complete=function(){jQuery(this).dequeue(),jQuery.isFunction(n.old)&&n.old.apply(this)},n},easing:{linear:function(e,t,i,n){return i+n*e},swing:function(e,t,i,n){return(-Math.cos(e*Math.PI)/2+.5)*n+i}},timers:[],fx:function(e,t,i){this.options=t,this.elem=e,this.prop=i,t.orig||(t.orig={})}}),jQuery.fx.prototype={update:function(){this.options.step&&this.options.step.apply(this.elem,[this.now,this]),(jQuery.fx.step[this.prop]||jQuery.fx.step._default)(this),("height"==this.prop||"width"==this.prop)&&(this.elem.style.display="block")},cur:function(e){if(null!=this.elem[this.prop]&&null==this.elem.style[this.prop])return this.elem[this.prop];var t=parseFloat(jQuery.curCSS(this.elem,this.prop,e));return t&&t>-1e4?t:parseFloat(jQuery.css(this.elem,this.prop))||0},custom:function(e,t,i){function n(){return r.step()}this.startTime=(new Date).getTime(),this.start=e,this.end=t,this.unit=i||this.unit||"px",this.now=this.start,this.pos=this.state=0,this.update();var r=this;if(n.elem=this.elem,jQuery.timers.push(n),1==jQuery.timers.length)var a=setInterval(function(){for(var e=jQuery.timers,t=0;t<e.length;t++)e[t]()||e.splice(t--,1);e.length||clearInterval(a)},13)},show:function(){this.options.orig[this.prop]=jQuery.attr(this.elem.style,this.prop),this.options.show=!0,this.custom(0,this.cur()),("width"==this.prop||"height"==this.prop)&&(this.elem.style[this.prop]="1px"),jQuery(this.elem).show()},hide:function(){this.options.orig[this.prop]=jQuery.attr(this.elem.style,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(){var e=(new Date).getTime();if(e>this.options.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),this.options.curAnim[this.prop]=!0;var t=!0;for(var i in this.options.curAnim)this.options.curAnim[i]!==!0&&(t=!1);if(t&&(null!=this.options.display&&(this.elem.style.overflow=this.options.overflow,this.elem.style.display=this.options.display,"none"==jQuery.css(this.elem,"display")&&(this.elem.style.display="block")),this.options.hide&&(this.elem.style.display="none"),this.options.hide||this.options.show))for(var n in this.options.curAnim)jQuery.attr(this.elem.style,n,this.options.orig[n]);return t&&jQuery.isFunction(this.options.complete)&&this.options.complete.apply(this.elem),!1}var r=e-this.startTime;return this.state=r/this.options.duration,this.pos=jQuery.easing[this.options.easing||(jQuery.easing.swing?"swing":"linear")](this.state,r,0,1,this.options.duration),this.now=this.start+(this.end-this.start)*this.pos,this.update(),!0}},jQuery.fx.step={scrollLeft:function(e){e.elem.scrollLeft=e.now},scrollTop:function(e){e.elem.scrollTop=e.now},opacity:function(e){jQuery.attr(e.elem.style,"opacity",e.now)},_default:function(e){e.elem.style[e.prop]=e.now+e.unit}},jQuery.fn.offset=function(){function border(e){add(jQuery.css(e,"borderLeftWidth"),jQuery.css(e,"borderTopWidth"))}function add(e,t){left+=parseInt(e)||0,top+=parseInt(t)||0}var results,left=0,top=0,elem=this[0];if(elem)with(jQuery.browser){var absolute="absolute"==jQuery.css(elem,"position"),parent=elem.parentNode,offsetParent=elem.offsetParent,doc=elem.ownerDocument,safari2=safari&&parseInt(version)<522;if(elem.getBoundingClientRect){if(box=elem.getBoundingClientRect(),add(box.left+Math.max(doc.documentElement.scrollLeft,doc.body.scrollLeft),box.top+Math.max(doc.documentElement.scrollTop,doc.body.scrollTop)),msie){var border=jQuery("html").css("borderWidth");border=("medium"==border||jQuery.boxModel&&parseInt(version)>=7)&&2||border,add(-border,-border)}}else{for(add(elem.offsetLeft,elem.offsetTop);offsetParent;)add(offsetParent.offsetLeft,offsetParent.offsetTop),(mozilla&&/^t[d|h]$/i.test(parent.tagName)||!safari2)&&border(offsetParent),safari2&&!absolute&&"absolute"==jQuery.css(offsetParent,"position")&&(absolute=!0),offsetParent=offsetParent.offsetParent;for(;parent.tagName&&!/^body|html$/i.test(parent.tagName);)/^inline|table-row.*$/i.test(jQuery.css(parent,"display"))||add(-parent.scrollLeft,-parent.scrollTop),mozilla&&"visible"!=jQuery.css(parent,"overflow")&&border(parent),parent=parent.parentNode;safari2&&absolute&&add(-doc.body.offsetLeft,-doc.body.offsetTop)}results={top:top,left:left}}return results}}(),SimileAjax.JSON=new Object,function(){var m={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},s={array:function(e){var t,i,n,r,a=["["],o=e.length;for(n=0;o>n;n+=1)r=e[n],i=s[typeof r],i&&(r=i(r),"string"==typeof r&&(t&&(a[a.length]=","),a[a.length]=r,t=!0));return a[a.length]="]",a.join("")},"boolean":function(e){return String(e)},"null":function(){return"null"},number:function(e){return isFinite(e)?String(e):"null"},object:function(e){if(e){if(e instanceof Array)return s.array(e);var t,i,n,r,a=["{"];for(n in e)r=e[n],i=s[typeof r],i&&(r=i(r),"string"==typeof r&&(t&&(a[a.length]=","),a.push(s.string(n),":",r),t=!0));return a[a.length]="}",a.join("")}return"null"},string:function(e){return/["\\\x00-\x1f]/.test(e)&&(e=e.replace(/([\x00-\x1f\\"])/g,function(e,t){var i=m[t];return i?i:(i=t.charCodeAt(),"\\u00"+Math.floor(i/16).toString(16)+(i%16).toString(16))})),'"'+e+'"'}};SimileAjax.JSON.toJSONString=function(e){return e instanceof Object?s.object(e):e instanceof Array?s.array(e):e.toString()},SimileAjax.JSON.parseJSON=function(){try{return!/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(this.replace(/"(\\.|[^"\\])*"/g,""))&&eval("("+this+")")}catch(e){return!1}}}(),String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.startsWith=function(e){return this.length>=e.length&&this.substr(0,e.length)==e},String.prototype.endsWith=function(e){return this.length>=e.length&&this.substr(this.length-e.length)==e},String.substitute=function(e,t){for(var i="",n=0;n<e.length-1;){var r=e.indexOf("%",n);if(0>r||r==e.length-1)break;if(r>n&&"\\"==e.charAt(r-1))i+=e.substring(n,r-1)+"%",n=r+1;else{var a=parseInt(e.charAt(r+1));i+=isNaN(a)||a>=t.length?e.substring(n,r+2):e.substring(n,r)+t[a].toString(),n=r+2}}return n<e.length&&(i+=e.substring(n)),i},SimileAjax.NativeDateUnit=new Object,SimileAjax.NativeDateUnit.makeDefaultValue=function(){return new Date},SimileAjax.NativeDateUnit.cloneValue=function(e){return new Date(e.getTime())},SimileAjax.NativeDateUnit.getParser=function(e){return"string"==typeof e&&(e=e.toLowerCase()),"iso8601"==e||"iso 8601"==e?SimileAjax.DateTime.parseIso8601DateTime:SimileAjax.DateTime.parseGregorianDateTime},SimileAjax.NativeDateUnit.parseFromObject=function(e){return SimileAjax.DateTime.parseGregorianDateTime(e)},SimileAjax.NativeDateUnit.toNumber=function(e){return e.getTime()},SimileAjax.NativeDateUnit.fromNumber=function(e){return new Date(e)},SimileAjax.NativeDateUnit.compare=function(e,t){var i,n;return i="object"==typeof e?e.getTime():Number(e),n="object"==typeof t?t.getTime():Number(t),i-n},SimileAjax.NativeDateUnit.earlier=function(e,t){return SimileAjax.NativeDateUnit.compare(e,t)<0?e:t},SimileAjax.NativeDateUnit.later=function(e,t){return SimileAjax.NativeDateUnit.compare(e,t)>0?e:t},SimileAjax.NativeDateUnit.change=function(e,t){return new Date(e.getTime()+t)},SimileAjax.WindowManager={_initialized:!1,_listeners:[],_draggedElement:null,_draggedElementCallback:null,_dropTargetHighlightElement:null,_lastCoords:null,_ghostCoords:null,_draggingMode:"",_dragging:!1,_layers:[]},SimileAjax.WindowManager.initialize=function(){SimileAjax.WindowManager._initialized||(SimileAjax.DOM.registerEvent(document.body,"mousedown",SimileAjax.WindowManager._onBodyMouseDown),SimileAjax.DOM.registerEvent(document.body,"mousemove",SimileAjax.WindowManager._onBodyMouseMove),SimileAjax.DOM.registerEvent(document.body,"mouseup",SimileAjax.WindowManager._onBodyMouseUp),SimileAjax.DOM.registerEvent(document,"keydown",SimileAjax.WindowManager._onBodyKeyDown),SimileAjax.DOM.registerEvent(document,"keyup",SimileAjax.WindowManager._onBodyKeyUp),SimileAjax.WindowManager._layers.push({index:0}),SimileAjax.WindowManager._historyListener={onBeforeUndoSeveral:function(){},onAfterUndoSeveral:function(){},onBeforeUndo:function(){},onAfterUndo:function(){},onBeforeRedoSeveral:function(){},onAfterRedoSeveral:function(){},onBeforeRedo:function(){},onAfterRedo:function(){}},SimileAjax.History.addListener(SimileAjax.WindowManager._historyListener),SimileAjax.WindowManager._initialized=!0)},SimileAjax.WindowManager.getBaseLayer=function(){return SimileAjax.WindowManager.initialize(),SimileAjax.WindowManager._layers[0]},SimileAjax.WindowManager.getHighestLayer=function(){return SimileAjax.WindowManager.initialize(),SimileAjax.WindowManager._layers[SimileAjax.WindowManager._layers.length-1]},SimileAjax.WindowManager.registerEventWithObject=function(e,t,i,n,r){SimileAjax.WindowManager.registerEvent(e,t,function(e,t,r){return i[n].call(i,e,t,r)},r)},SimileAjax.WindowManager.registerEvent=function(e,t,i,n){null==n&&(n=SimileAjax.WindowManager.getHighestLayer());var r=function(e,t,r){if(SimileAjax.WindowManager._canProcessEventAtLayer(n)){SimileAjax.WindowManager._popToLayer(n.index);try{i(e,t,r)}catch(a){SimileAjax.Debug.exception(a)}}return SimileAjax.DOM.cancelEvent(t),!1};SimileAjax.DOM.registerEvent(e,t,r)},SimileAjax.WindowManager.pushLayer=function(e,t,i){var n={onPop:e,index:SimileAjax.WindowManager._layers.length,ephemeral:t,elmt:i};return SimileAjax.WindowManager._layers.push(n),n},SimileAjax.WindowManager.popLayer=function(e){for(var t=1;t<SimileAjax.WindowManager._layers.length;t++)if(SimileAjax.WindowManager._layers[t]==e){SimileAjax.WindowManager._popToLayer(t-1);break}},SimileAjax.WindowManager.popAllLayers=function(){SimileAjax.WindowManager._popToLayer(0)},SimileAjax.WindowManager.registerForDragging=function(e,t,i){SimileAjax.WindowManager.registerEvent(e,"mousedown",function(e,i){SimileAjax.WindowManager._handleMouseDown(e,i,t)},i)},SimileAjax.WindowManager._popToLayer=function(e){for(;e+1<SimileAjax.WindowManager._layers.length;)try{var t=SimileAjax.WindowManager._layers.pop();null!=t.onPop&&t.onPop()}catch(i){}},SimileAjax.WindowManager._canProcessEventAtLayer=function(e){if(e.index==SimileAjax.WindowManager._layers.length-1)return!0;for(var t=e.index+1;t<SimileAjax.WindowManager._layers.length;t++)if(!SimileAjax.WindowManager._layers[t].ephemeral)return!1;return!0},SimileAjax.WindowManager.cancelPopups=function(e){for(var t=e?SimileAjax.DOM.getEventPageCoordinates(e):{x:-1,y:-1},i=SimileAjax.WindowManager._layers.length-1;i>0&&SimileAjax.WindowManager._layers[i].ephemeral;){var n=SimileAjax.WindowManager._layers[i];if(null!=n.elmt){var r=n.elmt,a=SimileAjax.DOM.getPageCoordinates(r);if(t.x>=a.left&&t.x<a.left+r.offsetWidth&&t.y>=a.top&&t.y<a.top+r.offsetHeight)break}i--}SimileAjax.WindowManager._popToLayer(i)},SimileAjax.WindowManager._onBodyMouseDown=function(e,t){"eventPhase"in t&&t.eventPhase!=t.BUBBLING_PHASE||SimileAjax.WindowManager.cancelPopups(t)},SimileAjax.WindowManager._handleMouseDown=function(e,t,i){return SimileAjax.WindowManager._draggedElement=e,SimileAjax.WindowManager._draggedElementCallback=i,SimileAjax.WindowManager._lastCoords={x:t.clientX,y:t.clientY},SimileAjax.DOM.cancelEvent(t),!1},SimileAjax.WindowManager._onBodyKeyDown=function(e,t){if(SimileAjax.WindowManager._dragging)if(27==t.keyCode)SimileAjax.WindowManager._cancelDragging();else if((17==t.keyCode||16==t.keyCode)&&"copy"!=SimileAjax.WindowManager._draggingMode){SimileAjax.WindowManager._draggingMode="copy";var i=SimileAjax.Graphics.createTranslucentImage(SimileAjax.urlPrefix+"images/copy.png");i.style.position="absolute",i.style.left=SimileAjax.WindowManager._ghostCoords.left-16+"px",i.style.top=SimileAjax.WindowManager._ghostCoords.top+"px",document.body.appendChild(i),SimileAjax.WindowManager._draggingModeIndicatorElmt=i}},SimileAjax.WindowManager._onBodyKeyUp=function(e,t){SimileAjax.WindowManager._dragging&&(17==t.keyCode||16==t.keyCode)&&(SimileAjax.WindowManager._draggingMode="",null!=SimileAjax.WindowManager._draggingModeIndicatorElmt&&(document.body.removeChild(SimileAjax.WindowManager._draggingModeIndicatorElmt),SimileAjax.WindowManager._draggingModeIndicatorElmt=null))},SimileAjax.WindowManager._onBodyMouseMove=function(e,t,i){if(null!=SimileAjax.WindowManager._draggedElement){var n=SimileAjax.WindowManager._draggedElementCallback,r=SimileAjax.WindowManager._lastCoords,a=t.clientX-r.x,o=t.clientY-r.y;if(SimileAjax.WindowManager._dragging)try{if(SimileAjax.WindowManager._lastCoords={x:t.clientX,y:t.clientY},"onDragBy"in n&&n.onDragBy(a,o),"_ghostElmt"in n){var l=n._ghostElmt;if(SimileAjax.WindowManager._ghostCoords.left+=a,SimileAjax.WindowManager._ghostCoords.top+=o,l.style.left=SimileAjax.WindowManager._ghostCoords.left+"px",l.style.top=SimileAjax.WindowManager._ghostCoords.top+"px",null!=SimileAjax.WindowManager._draggingModeIndicatorElmt){var s=SimileAjax.WindowManager._draggingModeIndicatorElmt;s.style.left=SimileAjax.WindowManager._ghostCoords.left-16+"px",s.style.top=SimileAjax.WindowManager._ghostCoords.top+"px"}if("droppable"in n&&n.droppable){var h=SimileAjax.DOM.getEventPageCoordinates(t),i=SimileAjax.DOM.hittest(h.x,h.y,[SimileAjax.WindowManager._ghostElmt,SimileAjax.WindowManager._dropTargetHighlightElement]);if(i=SimileAjax.WindowManager._findDropTarget(i),i!=SimileAjax.WindowManager._potentialDropTarget){null!=SimileAjax.WindowManager._dropTargetHighlightElement&&(document.body.removeChild(SimileAjax.WindowManager._dropTargetHighlightElement),SimileAjax.WindowManager._dropTargetHighlightElement=null,SimileAjax.WindowManager._potentialDropTarget=null);var u=!1;if(null!=i&&("canDropOn"in n&&!n.canDropOn(i)||"canDrop"in i&&!i.canDrop(SimileAjax.WindowManager._draggedElement)||(u=!0)),u){var c=4,m=SimileAjax.DOM.getPageCoordinates(i),d=document.createElement("div");d.style.border=c+"px solid yellow",d.style.backgroundColor="yellow",d.style.position="absolute",d.style.left=m.left+"px",d.style.top=m.top+"px",d.style.width=i.offsetWidth-2*c+"px",d.style.height=i.offsetHeight-2*c+"px",SimileAjax.Graphics.setOpacity(d,30),document.body.appendChild(d),SimileAjax.WindowManager._potentialDropTarget=i,SimileAjax.WindowManager._dropTargetHighlightElement=d}}}}}catch(p){SimileAjax.Debug.exception("WindowManager: Error handling mouse move",p),SimileAjax.WindowManager._cancelDragging()}else if(Math.abs(a)>5||Math.abs(o)>5)try{if("onDragStart"in n&&n.onDragStart(),"ghost"in n&&n.ghost){var f=SimileAjax.WindowManager._draggedElement;SimileAjax.WindowManager._ghostCoords=SimileAjax.DOM.getPageCoordinates(f),SimileAjax.WindowManager._ghostCoords.left+=a,SimileAjax.WindowManager._ghostCoords.top+=o;var l=f.cloneNode(!0);l.style.position="absolute",l.style.left=SimileAjax.WindowManager._ghostCoords.left+"px",l.style.top=SimileAjax.WindowManager._ghostCoords.top+"px",l.style.zIndex=1e3,SimileAjax.Graphics.setOpacity(l,50),document.body.appendChild(l),n._ghostElmt=l}SimileAjax.WindowManager._dragging=!0,SimileAjax.WindowManager._lastCoords={x:t.clientX,y:t.clientY},document.body.focus()}catch(p){SimileAjax.Debug.exception("WindowManager: Error handling mouse down",p),SimileAjax.WindowManager._cancelDragging()}return SimileAjax.DOM.cancelEvent(t),!1}},SimileAjax.WindowManager._onBodyMouseUp=function(e,t,i){if(null!=SimileAjax.WindowManager._draggedElement){try{if(SimileAjax.WindowManager._dragging){var n=SimileAjax.WindowManager._draggedElementCallback;if("onDragEnd"in n&&n.onDragEnd(),"droppable"in n&&n.droppable){var r=!1,i=SimileAjax.WindowManager._potentialDropTarget;null!=i&&("canDropOn"in n&&!n.canDropOn(i)||"canDrop"in i&&!i.canDrop(SimileAjax.WindowManager._draggedElement)||("onDropOn"in n&&n.onDropOn(i),i.ondrop(SimileAjax.WindowManager._draggedElement,SimileAjax.WindowManager._draggingMode),r=!0))}}}finally{SimileAjax.WindowManager._cancelDragging()}return SimileAjax.DOM.cancelEvent(t),!1}},SimileAjax.WindowManager._cancelDragging=function(){var e=SimileAjax.WindowManager._draggedElementCallback;if("_ghostElmt"in e){var t=e._ghostElmt;document.body.removeChild(t),delete e._ghostElmt}null!=SimileAjax.WindowManager._dropTargetHighlightElement&&(document.body.removeChild(SimileAjax.WindowManager._dropTargetHighlightElement),SimileAjax.WindowManager._dropTargetHighlightElement=null),null!=SimileAjax.WindowManager._draggingModeIndicatorElmt&&(document.body.removeChild(SimileAjax.WindowManager._draggingModeIndicatorElmt),SimileAjax.WindowManager._draggingModeIndicatorElmt=null),SimileAjax.WindowManager._draggedElement=null,SimileAjax.WindowManager._draggedElementCallback=null,SimileAjax.WindowManager._potentialDropTarget=null,SimileAjax.WindowManager._dropTargetHighlightElement=null,SimileAjax.WindowManager._lastCoords=null,SimileAjax.WindowManager._ghostCoords=null,SimileAjax.WindowManager._draggingMode="",SimileAjax.WindowManager._dragging=!1},SimileAjax.WindowManager._findDropTarget=function(e){for(;null!=e&&!("ondrop"in e&&"function"==typeof e.ondrop);)e=e.parentNode;return e},SimileAjax.XmlHttp=new Object,SimileAjax.XmlHttp._onReadyStateChange=function(e,t,i){switch(e.readyState){case 4:try{0==e.status||200==e.status?"function"==typeof i&&i(e):t&&t(e.statusText,e.status,e)}catch(n){SimileAjax.Debug.exception("XmlHttp: Error handling onReadyStateChange",n)}}},SimileAjax.XmlHttp._createRequest=function(){if(SimileAjax.Platform.browser.isIE)for(var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],t=0;t<e.length;t++)try{var i=e[t],n=function(){return new ActiveXObject(i)},r=n();return SimileAjax.XmlHttp._createRequest=n,r}catch(a){}try{var n=function(){return new XMLHttpRequest},r=n();return SimileAjax.XmlHttp._createRequest=n,r}catch(a){throw new Error("Failed to create an XMLHttpRequest object")}},SimileAjax.XmlHttp.get=function(e,t,i){var n=SimileAjax.XmlHttp._createRequest();n.open("GET",e,!0),n.onreadystatechange=function(){SimileAjax.XmlHttp._onReadyStateChange(n,t,i)},n.send(null)},SimileAjax.XmlHttp.post=function(e,t,i,n){var r=SimileAjax.XmlHttp._createRequest();r.open("POST",e,!0),r.onreadystatechange=function(){SimileAjax.XmlHttp._onReadyStateChange(r,i,n)},r.send(t)},SimileAjax.XmlHttp._forceXML=function(e){try{e.overrideMimeType("text/xml")}catch(t){e.setrequestheader("Content-Type","text/xml")}};var useLocalResources=!1,ClientLocaleFromServer="",loadMe=function(){if(!("Timeline"in window)){window.Timeline=new Object,window.Timeline.DateTime=window.SimileAjax.DateTime;var e=!0,t=["timeline.css","ethers.css","events.css"],i=["l10n-bundle.js"],n=[],r=["cs","de","en","es","fr","it","ru","se","vi","zh"];try{var a=["en"],o="en",l=function(t){for(var i=t.split("&"),n=0;n<i.length;n++){var r=i[n].split("=");"locales"==r[0]?a=a.concat(r[1].split(",")):"defaultLocale"==r[0]?o=r[1]:"bundle"==r[0]?e="false"!=r[1]:"clientlocale"==r[0]&&(ClientLocaleFromServer=r[1])}};!function(){if("string"!=typeof Timeline_urlPrefix){for(var e=document.documentElement.getElementsByTagName("head"),t=0;t<e.length;t++)for(var i=e[t].getElementsByTagName("script"),n=0;n<i.length;n++){var r=i[n].src,a=r.indexOf("timeline-all-min.js");if(a>=0){Timeline.urlPrefix=r.substr(0,a);var o=r.indexOf("?");return void(o>0&&l(r.substr(o+1)))}}throw new Error("Failed to derive URL prefix for Timeline API code files")}Timeline.urlPrefix=Timeline_urlPrefix,"string"==typeof Timeline_parameters&&l(Timeline_parameters)
}();var s=function(e,t){SimileAjax.includeJavascriptFiles(document,e,t)},h=function(e,t){SimileAjax.includeCssFiles(document,e,t)};e?h(Timeline.urlPrefix,["timeline-bundle.css"]):h(Timeline.urlPrefix+"styles/",t);var u=[];u[o]=!0;for(var c=function(e){for(var t=0;t<r.length;t++)if(e==r[t])return u[e]=!0,!0;return!1},m=function(e){if(c(e))return e;var t=e.indexOf("-");return t>0&&c(e.substr(0,t))?e.substr(0,t):null},d=0;d<a.length;d++)m(a[d]);for(var p=o,f=((ClientLocaleFromServer+";"+("language"in navigator?navigator.language:navigator.browserLanguage)).split(";")),d=0;d<f.length;d++){var g=m(f[d]);if(null!=g){p=g;break}}for(var d=0;d<r.length;d++){var g=r[d];u[g]&&(s(Timeline.urlPrefix+"scripts/l10n/"+g+"/",i),h(Timeline.urlPrefix+"styles/l10n/"+g+"/",n))}Timeline.serverLocale=o,Timeline.clientLocale=p}catch(y){alert(y)}}};loadMe(),Timeline.SpanHighlightDecorator=function(e){this._unit="unit"in e?e.unit:SimileAjax.NativeDateUnit,this._startDate="string"==typeof e.startDate?this._unit.parseFromObject(e.startDate):e.startDate,this._endDate="string"==typeof e.endDate?this._unit.parseFromObject(e.endDate):e.endDate,this._startLabel=e.startLabel,this._endLabel=e.endLabel,this._color=e.color,this._opacity="opacity"in e?e.opacity:100},Timeline.SpanHighlightDecorator.prototype.initialize=function(e,t){this._band=e,this._timeline=t,this._layerDiv=null},Timeline.SpanHighlightDecorator.prototype.paint=function(){null!=this._layerDiv&&this._band.removeLayerDiv(this._layerDiv),this._layerDiv=this._band.createLayerDiv(10),this._layerDiv.setAttribute("name","span-highlight-decorator"),this._layerDiv.style.display="none";var e=this._band.getMinDate(),t=this._band.getMaxDate();if(this._unit.compare(this._startDate,t)<0&&this._unit.compare(this._endDate,e)>0){e=this._unit.later(e,this._startDate),t=this._unit.earlier(t,this._endDate);var i=this._band.dateToPixelOffset(e),n=this._band.dateToPixelOffset(t),r=this._timeline.getDocument(),a=function(){var e=r.createElement("table");return e.insertRow(0).insertCell(0),e},o=r.createElement("div");o.style.position="absolute",o.style.overflow="hidden",o.style.background=this._color,this._opacity<100&&SimileAjax.Graphics.setOpacity(o,this._opacity),this._layerDiv.appendChild(o);var l=a();l.style.position="absolute",l.style.overflow="hidden",l.style.fontSize="200%",l.style.fontWeight="bold",l.style.color=this._color,l.rows[0].cells[0].innerHTML=this._startLabel,this._layerDiv.appendChild(l);var s=a();s.style.position="absolute",s.style.overflow="hidden",s.style.fontSize="200%",s.style.fontWeight="bold",s.style.color=this._color,s.rows[0].cells[0].innerHTML=this._endLabel,this._layerDiv.appendChild(s),this._timeline.isHorizontal()?(o.style.left=i+"px",o.style.width=n-i+"px",o.style.top="0px",o.style.height="100%",l.style.right=this._band.getTotalViewLength()-i+"px",l.style.width=this._startLabel.length+"em",l.style.top="0px",l.style.height="100%",l.style.textAlign="right",l.rows[0].style.verticalAlign="top",s.style.left=n+"px",s.style.width=this._endLabel.length+"em",s.style.top="0px",s.style.height="100%",s.rows[0].style.verticalAlign="top"):(o.style.top=i+"px",o.style.height=n-i+"px",o.style.left="0px",o.style.width="100%",l.style.bottom=i+"px",l.style.height="1.5px",l.style.left="0px",l.style.width="100%",s.style.top=n+"px",s.style.height="1.5px",s.style.left="0px",s.style.width="100%")}this._layerDiv.style.display="block"},Timeline.SpanHighlightDecorator.prototype.softPaint=function(){},Timeline.PointHighlightDecorator=function(e){this._unit="unit"in e?e.unit:SimileAjax.NativeDateUnit,this._date="string"==typeof e.date?this._unit.parseFromObject(e.date):e.date,this._width="width"in e?e.width:10,this._color=e.color,this._opacity="opacity"in e?e.opacity:100},Timeline.PointHighlightDecorator.prototype.initialize=function(e,t){this._band=e,this._timeline=t,this._layerDiv=null},Timeline.PointHighlightDecorator.prototype.paint=function(){null!=this._layerDiv&&this._band.removeLayerDiv(this._layerDiv),this._layerDiv=this._band.createLayerDiv(10),this._layerDiv.setAttribute("name","span-highlight-decorator"),this._layerDiv.style.display="none";var e=this._band.getMinDate(),t=this._band.getMaxDate();if(this._unit.compare(this._date,t)<0&&this._unit.compare(this._date,e)>0){var i=this._band.dateToPixelOffset(this._date),n=i-Math.round(this._width/2),r=this._timeline.getDocument(),a=r.createElement("div");a.style.position="absolute",a.style.overflow="hidden",a.style.background=this._color,this._opacity<100&&SimileAjax.Graphics.setOpacity(a,this._opacity),this._layerDiv.appendChild(a),this._timeline.isHorizontal()?(a.style.left=n+"px",a.style.width=this._width+"px",a.style.top="0px",a.style.height="100%"):(a.style.top=n+"px",a.style.height=this._width+"px",a.style.left="0px",a.style.width="100%")}this._layerDiv.style.display="block"},Timeline.PointHighlightDecorator.prototype.softPaint=function(){},Timeline.DetailedEventPainter=function(e){this._params=e,this._onSelectListeners=[],this._filterMatcher=null,this._highlightMatcher=null,this._frc=null,this._eventIdToElmt={}},Timeline.DetailedEventPainter.prototype.initialize=function(e,t){this._band=e,this._timeline=t,this._backLayer=null,this._eventLayer=null,this._lineLayer=null,this._highlightLayer=null,this._eventIdToElmt=null},Timeline.DetailedEventPainter.prototype.addOnSelectListener=function(e){this._onSelectListeners.push(e)},Timeline.DetailedEventPainter.prototype.removeOnSelectListener=function(e){for(var t=0;t<this._onSelectListeners.length;t++)if(this._onSelectListeners[t]==e){this._onSelectListeners.splice(t,1);break}},Timeline.DetailedEventPainter.prototype.getFilterMatcher=function(){return this._filterMatcher},Timeline.DetailedEventPainter.prototype.setFilterMatcher=function(e){this._filterMatcher=e},Timeline.DetailedEventPainter.prototype.getHighlightMatcher=function(){return this._highlightMatcher},Timeline.DetailedEventPainter.prototype.setHighlightMatcher=function(e){this._highlightMatcher=e},Timeline.DetailedEventPainter.prototype.paint=function(){var e=this._band.getEventSource();if(null!=e){this._eventIdToElmt={},this._prepareForPainting();for(var t=this._params.theme.event,i=Math.max(t.track.height,this._frc.getLineHeight()),n={trackOffset:Math.round(this._band.getViewWidth()/2-i/2),trackHeight:i,trackGap:t.track.gap,trackIncrement:i+t.track.gap,icon:t.instant.icon,iconWidth:t.instant.iconWidth,iconHeight:t.instant.iconHeight,labelWidth:t.label.width},r=this._band.getMinDate(),a=this._band.getMaxDate(),o=null!=this._filterMatcher?this._filterMatcher:function(){return!0},l=null!=this._highlightMatcher?this._highlightMatcher:function(){return-1},s=e.getEventReverseIterator(r,a);s.hasNext();){var h=s.next();o(h)&&this.paintEvent(h,n,this._params.theme,l(h))}this._highlightLayer.style.display="block",this._lineLayer.style.display="block",this._eventLayer.style.display="block"}},Timeline.DetailedEventPainter.prototype.softPaint=function(){},Timeline.DetailedEventPainter.prototype._prepareForPainting=function(){var e=this._band;if(null==this._backLayer){this._backLayer=this._band.createLayerDiv(0,"timeline-band-events"),this._backLayer.style.visibility="hidden";var t=document.createElement("span");t.className="timeline-event-label",this._backLayer.appendChild(t),this._frc=SimileAjax.Graphics.getFontRenderingContext(t)}this._frc.update(),this._lowerTracks=[],this._upperTracks=[],null!=this._highlightLayer&&e.removeLayerDiv(this._highlightLayer),this._highlightLayer=e.createLayerDiv(105,"timeline-band-highlights"),this._highlightLayer.style.display="none",null!=this._lineLayer&&e.removeLayerDiv(this._lineLayer),this._lineLayer=e.createLayerDiv(110,"timeline-band-lines"),this._lineLayer.style.display="none",null!=this._eventLayer&&e.removeLayerDiv(this._eventLayer),this._eventLayer=e.createLayerDiv(110,"timeline-band-events"),this._eventLayer.style.display="none"},Timeline.DetailedEventPainter.prototype.paintEvent=function(e,t,i,n){e.isInstant()?this.paintInstantEvent(e,t,i,n):this.paintDurationEvent(e,t,i,n)},Timeline.DetailedEventPainter.prototype.paintInstantEvent=function(e,t,i,n){e.isImprecise()?this.paintImpreciseInstantEvent(e,t,i,n):this.paintPreciseInstantEvent(e,t,i,n)},Timeline.DetailedEventPainter.prototype.paintDurationEvent=function(e,t,i,n){e.isImprecise()?this.paintImpreciseDurationEvent(e,t,i,n):this.paintPreciseDurationEvent(e,t,i,n)},Timeline.DetailedEventPainter.prototype.paintPreciseInstantEvent=function(e,t,i,n){var r=(this._timeline.getDocument(),e.getText()),a=e.getStart(),o=Math.round(this._band.dateToPixelOffset(a)),l=Math.round(o+t.iconWidth/2),s=Math.round(o-t.iconWidth/2),h=this._frc.computeSize(r),u=this._findFreeTrackForSolid(l,o),c=this._paintEventIcon(e,u,s,t,i),m=l+i.event.label.offsetFromLine,d=u,p=this._getTrackData(u);Math.min(p.solid,p.text)>=m+h.width?(p.solid=s,p.text=m):(p.solid=s,m=o+i.event.label.offsetFromLine,d=this._findFreeTrackForText(u,m+h.width,function(e){e.line=o-2}),this._getTrackData(d).text=s,this._paintEventLine(e,o,u,d,t,i));var f=Math.round(t.trackOffset+d*t.trackIncrement+t.trackHeight/2-h.height/2),g=this._paintEventLabel(e,r,m,f,h.width,h.height,i),y=this,v=function(t,i){return y._onClickInstantEvent(c.elmt,i,e)};SimileAjax.DOM.registerEvent(c.elmt,"mousedown",v),SimileAjax.DOM.registerEvent(g.elmt,"mousedown",v),this._createHighlightDiv(n,c,i),this._eventIdToElmt[e.getID()]=c.elmt},Timeline.DetailedEventPainter.prototype.paintImpreciseInstantEvent=function(e,t,i,n){var r=(this._timeline.getDocument(),e.getText()),a=e.getStart(),o=e.getEnd(),l=Math.round(this._band.dateToPixelOffset(a)),s=Math.round(this._band.dateToPixelOffset(o)),h=Math.round(l+t.iconWidth/2),u=Math.round(l-t.iconWidth/2),c=this._frc.computeSize(r),m=this._findFreeTrackForSolid(s,l),d=this._paintEventTape(e,m,l,s,i.event.instant.impreciseColor,i.event.instant.impreciseOpacity,t,i),p=this._paintEventIcon(e,m,u,t,i),f=this._getTrackData(m);f.solid=u;var g,y=h+i.event.label.offsetFromLine,v=y+c.width;s>v?g=m:(y=l+i.event.label.offsetFromLine,v=y+c.width,g=this._findFreeTrackForText(m,v,function(e){e.line=l-2}),this._getTrackData(g).text=u,this._paintEventLine(e,l,m,g,t,i));var _=Math.round(t.trackOffset+g*t.trackIncrement+t.trackHeight/2-c.height/2),x=this._paintEventLabel(e,r,y,_,c.width,c.height,i),b=this,T=function(t,i){return b._onClickInstantEvent(p.elmt,i,e)};SimileAjax.DOM.registerEvent(p.elmt,"mousedown",T),SimileAjax.DOM.registerEvent(d.elmt,"mousedown",T),SimileAjax.DOM.registerEvent(x.elmt,"mousedown",T),this._createHighlightDiv(n,p,i),this._eventIdToElmt[e.getID()]=p.elmt},Timeline.DetailedEventPainter.prototype.paintPreciseDurationEvent=function(e,t,i,n){var r=(this._timeline.getDocument(),e.getText()),a=e.getStart(),o=e.getEnd(),l=Math.round(this._band.dateToPixelOffset(a)),s=Math.round(this._band.dateToPixelOffset(o)),h=this._frc.computeSize(r),u=this._findFreeTrackForSolid(s),c=e.getColor();c=null!=c?c:i.event.duration.color;var m=this._paintEventTape(e,u,l,s,c,100,t,i),d=this._getTrackData(u);d.solid=l;var p=l+i.event.label.offsetFromLine,f=this._findFreeTrackForText(u,p+h.width,function(e){e.line=l-2});this._getTrackData(f).text=l-2,this._paintEventLine(e,l,u,f,t,i);var g=Math.round(t.trackOffset+f*t.trackIncrement+t.trackHeight/2-h.height/2),y=this._paintEventLabel(e,r,p,g,h.width,h.height,i),v=this,_=function(t,i){return v._onClickDurationEvent(m.elmt,i,e)};SimileAjax.DOM.registerEvent(m.elmt,"mousedown",_),SimileAjax.DOM.registerEvent(y.elmt,"mousedown",_),this._createHighlightDiv(n,m,i),this._eventIdToElmt[e.getID()]=m.elmt},Timeline.DetailedEventPainter.prototype.paintImpreciseDurationEvent=function(e,t,i,n){var r=(this._timeline.getDocument(),e.getText()),a=e.getStart(),o=e.getLatestStart(),l=e.getEnd(),s=e.getEarliestEnd(),h=Math.round(this._band.dateToPixelOffset(a)),u=Math.round(this._band.dateToPixelOffset(o)),c=Math.round(this._band.dateToPixelOffset(l)),m=Math.round(this._band.dateToPixelOffset(s)),d=this._frc.computeSize(r),p=this._findFreeTrackForSolid(c),f=e.getColor();f=null!=f?f:i.event.duration.color;var g=(this._paintEventTape(e,p,h,c,i.event.duration.impreciseColor,i.event.duration.impreciseOpacity,t,i),this._paintEventTape(e,p,u,m,f,100,t,i)),y=this._getTrackData(p);y.solid=h;var v=u+i.event.label.offsetFromLine,_=this._findFreeTrackForText(p,v+d.width,function(e){e.line=u-2});this._getTrackData(_).text=u-2,this._paintEventLine(e,u,p,_,t,i);var x=Math.round(t.trackOffset+_*t.trackIncrement+t.trackHeight/2-d.height/2),b=this._paintEventLabel(e,r,v,x,d.width,d.height,i),T=this,j=function(t,i){return T._onClickDurationEvent(g.elmt,i,e)};SimileAjax.DOM.registerEvent(g.elmt,"mousedown",j),SimileAjax.DOM.registerEvent(b.elmt,"mousedown",j),this._createHighlightDiv(n,g,i),this._eventIdToElmt[e.getID()]=g.elmt},Timeline.DetailedEventPainter.prototype._findFreeTrackForSolid=function(e,t){for(var i=0;!0;i++){if(!(i<this._lowerTracks.length))return this._lowerTracks.push({solid:Number.POSITIVE_INFINITY,text:Number.POSITIVE_INFINITY,line:Number.POSITIVE_INFINITY}),i;var n=this._lowerTracks[i];if(Math.min(n.solid,n.text)>e&&(!t||n.line>t))return i;if(!(i<this._upperTracks.length))return this._upperTracks.push({solid:Number.POSITIVE_INFINITY,text:Number.POSITIVE_INFINITY,line:Number.POSITIVE_INFINITY}),-1-i;var n=this._upperTracks[i];if(Math.min(n.solid,n.text)>e&&(!t||n.line>t))return-1-i}},Timeline.DetailedEventPainter.prototype._findFreeTrackForText=function(e,t,i){var n,r,a,o;if(0>e)n=!0,a=-e,r=this._findFreeUpperTrackForText(a,t),o=-1-r;else if(e>0)n=!1,a=e+1,r=this._findFreeLowerTrackForText(a,t),o=r;else{var l=this._findFreeUpperTrackForText(0,t),s=this._findFreeLowerTrackForText(1,t);l>=s-1?(n=!1,a=1,r=s,o=r):(n=!0,a=0,r=l,o=-1-r)}if(n){r==this._upperTracks.length&&this._upperTracks.push({solid:Number.POSITIVE_INFINITY,text:Number.POSITIVE_INFINITY,line:Number.POSITIVE_INFINITY});for(var h=a;r>h;h++)i(this._upperTracks[h])}else{r==this._lowerTracks.length&&this._lowerTracks.push({solid:Number.POSITIVE_INFINITY,text:Number.POSITIVE_INFINITY,line:Number.POSITIVE_INFINITY});for(var h=a;r>h;h++)i(this._lowerTracks[h])}return o},Timeline.DetailedEventPainter.prototype._findFreeLowerTrackForText=function(e,t){for(;e<this._lowerTracks.length;e++){var i=this._lowerTracks[e];if(Math.min(i.solid,i.text)>=t)break}return e},Timeline.DetailedEventPainter.prototype._findFreeUpperTrackForText=function(e,t){for(;e<this._upperTracks.length;e++){var i=this._upperTracks[e];if(Math.min(i.solid,i.text)>=t)break}return e},Timeline.DetailedEventPainter.prototype._getTrackData=function(e){return 0>e?this._upperTracks[-e-1]:this._lowerTracks[e]},Timeline.DetailedEventPainter.prototype._paintEventLine=function(e,t,i,n,r,a){var o=Math.round(r.trackOffset+i*r.trackIncrement+r.trackHeight/2),l=Math.round(Math.abs(n-i)*r.trackIncrement),s="1px solid "+a.event.label.lineColor,h=this._timeline.getDocument().createElement("div");h.style.position="absolute",h.style.left=t+"px",h.style.width=a.event.label.offsetFromLine+"px",h.style.height=l+"px",i>n?(h.style.top=o-l+"px",h.style.borderTop=s):(h.style.top=o+"px",h.style.borderBottom=s),h.style.borderLeft=s,this._lineLayer.appendChild(h)},Timeline.DetailedEventPainter.prototype._paintEventIcon=function(e,t,i,n){var r=e.getIcon();r=null!=r?r:n.icon;var a=n.trackOffset+t*n.trackIncrement+n.trackHeight/2,o=Math.round(a-n.iconHeight/2),l=SimileAjax.Graphics.createTranslucentImage(r),s=this._timeline.getDocument().createElement("div");return s.style.position="absolute",s.style.left=i+"px",s.style.top=o+"px",s.appendChild(l),s.style.cursor="pointer",this._eventLayer.appendChild(s),{left:i,top:o,width:n.iconWidth,height:n.iconHeight,elmt:s}},Timeline.DetailedEventPainter.prototype._paintEventLabel=function(e,t,i,n,r,a,o){var l=this._timeline.getDocument(),s=l.createElement("div");s.style.position="absolute",s.style.left=i+"px",s.style.width=r+"px",s.style.top=n+"px",s.style.height=a+"px",s.style.backgroundColor=o.event.label.backgroundColor,SimileAjax.Graphics.setOpacity(s,o.event.label.backgroundOpacity),this._eventLayer.appendChild(s);var h=l.createElement("div");h.style.position="absolute",h.style.left=i+"px",h.style.width=r+"px",h.style.top=n+"px",h.innerHTML=t,h.style.cursor="pointer";var u=e.getTextColor();return null==u&&(u=e.getColor()),null!=u&&(h.style.color=u),this._eventLayer.appendChild(h),{left:i,top:n,width:r,height:a,elmt:h}},Timeline.DetailedEventPainter.prototype._paintEventTape=function(e,t,i,n,r,a,o,l){var s=n-i,h=l.event.tape.height,u=o.trackOffset+t*o.trackIncrement+o.trackHeight/2,c=Math.round(u-h/2),m=this._timeline.getDocument().createElement("div");return m.style.position="absolute",m.style.left=i+"px",m.style.width=s+"px",m.style.top=c+"px",m.style.height=h+"px",m.style.backgroundColor=r,m.style.overflow="hidden",m.style.cursor="pointer",SimileAjax.Graphics.setOpacity(m,a),this._eventLayer.appendChild(m),{left:i,top:c,width:s,height:h,elmt:m}},Timeline.DetailedEventPainter.prototype._createHighlightDiv=function(e,t,i){if(e>=0){var n=this._timeline.getDocument(),r=i.event,a=r.highlightColors[Math.min(e,r.highlightColors.length-1)],o=n.createElement("div");o.style.position="absolute",o.style.overflow="hidden",o.style.left=t.left-2+"px",o.style.width=t.width+4+"px",o.style.top=t.top-2+"px",o.style.height=t.height+4+"px",o.style.background=a,this._highlightLayer.appendChild(o)}},Timeline.DetailedEventPainter.prototype._onClickInstantEvent=function(e,t,i){var n=SimileAjax.DOM.getPageCoordinates(e);return this._showBubble(n.left+Math.ceil(e.offsetWidth/2),n.top+Math.ceil(e.offsetHeight/2),i),this._fireOnSelect(i.getID()),t.cancelBubble=!0,SimileAjax.DOM.cancelEvent(t),!1},Timeline.DetailedEventPainter.prototype._onClickDurationEvent=function(e,t,i){if("pageX"in t)var n=t.pageX,r=t.pageY;else var a=SimileAjax.DOM.getPageCoordinates(e),n=t.offsetX+a.left,r=t.offsetY+a.top;return this._showBubble(n,r,i),this._fireOnSelect(i.getID()),t.cancelBubble=!0,SimileAjax.DOM.cancelEvent(t),!1},Timeline.DetailedEventPainter.prototype.showBubble=function(e){var t=this._eventIdToElmt[e.getID()];if(t){var i=SimileAjax.DOM.getPageCoordinates(t);this._showBubble(i.left+t.offsetWidth/2,i.top+t.offsetHeight/2,e)}},Timeline.DetailedEventPainter.prototype._showBubble=function(e,t,i){var n=document.createElement("div");i.fillInfoBubble(n,this._params.theme,this._band.getLabeller()),SimileAjax.WindowManager.cancelPopups(),SimileAjax.Graphics.createBubbleForContentAndPoint(n,e,t,this._params.theme.event.bubble.width)},Timeline.DetailedEventPainter.prototype._fireOnSelect=function(e){for(var t=0;t<this._onSelectListeners.length;t++)this._onSelectListeners[t](e)},Timeline.GregorianEtherPainter=function(e){this._params=e,this._theme=e.theme,this._unit=e.unit,this._multiple="multiple"in e?e.multiple:1},Timeline.GregorianEtherPainter.prototype.initialize=function(e,t){this._band=e,this._timeline=t,this._backgroundLayer=e.createLayerDiv(0),this._backgroundLayer.setAttribute("name","ether-background"),this._backgroundLayer.style.background=this._theme.ether.backgroundColors[e.getIndex()%4],this._markerLayer=null,this._lineLayer=null;var i="align"in this._params&&void 0!=this._params.align?this._params.align:this._theme.ether.interval.marker[t.isHorizontal()?"hAlign":"vAlign"],n="showLine"in this._params?this._params.showLine:this._theme.ether.interval.line.show;this._intervalMarkerLayout=new Timeline.EtherIntervalMarkerLayout(this._timeline,this._band,this._theme,i,n),this._highlight=new Timeline.EtherHighlight(this._timeline,this._band,this._theme,this._backgroundLayer)},Timeline.GregorianEtherPainter.prototype.setHighlight=function(e,t){this._highlight.position(e,t)},Timeline.GregorianEtherPainter.prototype.paint=function(){this._markerLayer&&this._band.removeLayerDiv(this._markerLayer),this._markerLayer=this._band.createLayerDiv(100),this._markerLayer.setAttribute("name","ether-markers"),this._markerLayer.style.display="none",this._lineLayer&&this._band.removeLayerDiv(this._lineLayer),this._lineLayer=this._band.createLayerDiv(1),this._lineLayer.setAttribute("name","ether-lines"),this._lineLayer.style.display="none";var e=this._band.getMinDate(),t=this._band.getMaxDate(),i=this._band.getTimeZone(),n=this._band.getLabeller();SimileAjax.DateTime.roundDownToInterval(e,this._unit,i,this._multiple,this._theme.firstDayOfWeek);for(var r=this,a=function(e){for(var t=0;t<r._multiple;t++)SimileAjax.DateTime.incrementByInterval(e,r._unit)};e.getTime()<t.getTime();)this._intervalMarkerLayout.createIntervalMarker(e,n,this._unit,this._markerLayer,this._lineLayer),a(e);this._markerLayer.style.display="block",this._lineLayer.style.display="block"},Timeline.GregorianEtherPainter.prototype.softPaint=function(){},Timeline.HotZoneGregorianEtherPainter=function(e){this._params=e,this._theme=e.theme,this._zones=[{startTime:Number.NEGATIVE_INFINITY,endTime:Number.POSITIVE_INFINITY,unit:e.unit,multiple:1}];for(var t=0;t<e.zones.length;t++)for(var i=e.zones[t],n=SimileAjax.DateTime.parseGregorianDateTime(i.start).getTime(),r=SimileAjax.DateTime.parseGregorianDateTime(i.end).getTime(),a=0;a<this._zones.length&&r>n;a++){var o=this._zones[a];n<o.endTime&&(n>o.startTime&&(this._zones.splice(a,0,{startTime:o.startTime,endTime:n,unit:o.unit,multiple:o.multiple}),a++,o.startTime=n),r<o.endTime?(this._zones.splice(a,0,{startTime:n,endTime:r,unit:i.unit,multiple:i.multiple?i.multiple:1}),a++,o.startTime=r,n=r):(o.multiple=i.multiple,o.unit=i.unit,n=o.endTime))}},Timeline.HotZoneGregorianEtherPainter.prototype.initialize=function(e,t){this._band=e,this._timeline=t,this._backgroundLayer=e.createLayerDiv(0),this._backgroundLayer.setAttribute("name","ether-background"),this._backgroundLayer.style.background=this._theme.ether.backgroundColors[e.getIndex()%4],this._markerLayer=null,this._lineLayer=null;var i="align"in this._params&&void 0!=this._params.align?this._params.align:this._theme.ether.interval.marker[t.isHorizontal()?"hAlign":"vAlign"],n="showLine"in this._params?this._params.showLine:this._theme.ether.interval.line.show;this._intervalMarkerLayout=new Timeline.EtherIntervalMarkerLayout(this._timeline,this._band,this._theme,i,n),this._highlight=new Timeline.EtherHighlight(this._timeline,this._band,this._theme,this._backgroundLayer)},Timeline.HotZoneGregorianEtherPainter.prototype.setHighlight=function(e,t){this._highlight.position(e,t)},Timeline.HotZoneGregorianEtherPainter.prototype.paint=function(){this._markerLayer&&this._band.removeLayerDiv(this._markerLayer),this._markerLayer=this._band.createLayerDiv(100),this._markerLayer.setAttribute("name","ether-markers"),this._markerLayer.style.display="none",this._lineLayer&&this._band.removeLayerDiv(this._lineLayer),this._lineLayer=this._band.createLayerDiv(1),this._lineLayer.setAttribute("name","ether-lines"),this._lineLayer.style.display="none";for(var e=this._band.getMinDate(),t=this._band.getMaxDate(),i=this._band.getTimeZone(),n=this._band.getLabeller(),r=function(e,t){for(var i=0;i<t.multiple;i++)SimileAjax.DateTime.incrementByInterval(e,t.unit)},a=0;a<this._zones.length&&!(e.getTime()<this._zones[a].endTime);)a++;for(var o=this._zones.length-1;o>=0&&!(t.getTime()>this._zones[o].startTime);)o--;for(var l=a;o>=l;l++){var s=this._zones[l],h=new Date(Math.max(e.getTime(),s.startTime)),u=new Date(Math.min(t.getTime(),s.endTime));for(SimileAjax.DateTime.roundDownToInterval(h,s.unit,i,s.multiple,this._theme.firstDayOfWeek),SimileAjax.DateTime.roundUpToInterval(u,s.unit,i,s.multiple,this._theme.firstDayOfWeek);h.getTime()<u.getTime();)this._intervalMarkerLayout.createIntervalMarker(h,n,s.unit,this._markerLayer,this._lineLayer),r(h,s)}this._markerLayer.style.display="block",this._lineLayer.style.display="block"},Timeline.HotZoneGregorianEtherPainter.prototype.softPaint=function(){},Timeline.YearCountEtherPainter=function(e){this._params=e,this._theme=e.theme,this._startDate=SimileAjax.DateTime.parseGregorianDateTime(e.startDate),this._multiple="multiple"in e?e.multiple:1},Timeline.YearCountEtherPainter.prototype.initialize=function(e,t){this._band=e,this._timeline=t,this._backgroundLayer=e.createLayerDiv(0),this._backgroundLayer.setAttribute("name","ether-background"),this._backgroundLayer.style.background=this._theme.ether.backgroundColors[e.getIndex()%4],this._markerLayer=null,this._lineLayer=null;var i="align"in this._params?this._params.align:this._theme.ether.interval.marker[t.isHorizontal()?"hAlign":"vAlign"],n="showLine"in this._params?this._params.showLine:this._theme.ether.interval.line.show;this._intervalMarkerLayout=new Timeline.EtherIntervalMarkerLayout(this._timeline,this._band,this._theme,i,n),this._highlight=new Timeline.EtherHighlight(this._timeline,this._band,this._theme,this._backgroundLayer)},Timeline.YearCountEtherPainter.prototype.setHighlight=function(e,t){this._highlight.position(e,t)},Timeline.YearCountEtherPainter.prototype.paint=function(){this._markerLayer&&this._band.removeLayerDiv(this._markerLayer),this._markerLayer=this._band.createLayerDiv(100),this._markerLayer.setAttribute("name","ether-markers"),this._markerLayer.style.display="none",this._lineLayer&&this._band.removeLayerDiv(this._lineLayer),this._lineLayer=this._band.createLayerDiv(1),this._lineLayer.setAttribute("name","ether-lines"),this._lineLayer.style.display="none";var e=new Date(this._startDate.getTime()),t=this._band.getMaxDate(),i=this._band.getMinDate().getUTCFullYear()-this._startDate.getUTCFullYear();e.setUTCFullYear(this._band.getMinDate().getUTCFullYear()-i%this._multiple);for(var n=this,r=function(e){for(var t=0;t<n._multiple;t++)SimileAjax.DateTime.incrementByInterval(e,SimileAjax.DateTime.YEAR)},a={labelInterval:function(e){var t=e.getUTCFullYear()-n._startDate.getUTCFullYear();return{text:t,emphasized:0==t}}};e.getTime()<t.getTime();)this._intervalMarkerLayout.createIntervalMarker(e,a,SimileAjax.DateTime.YEAR,this._markerLayer,this._lineLayer),r(e);this._markerLayer.style.display="block",this._lineLayer.style.display="block"},Timeline.YearCountEtherPainter.prototype.softPaint=function(){},Timeline.QuarterlyEtherPainter=function(e){this._params=e,this._theme=e.theme,this._startDate=SimileAjax.DateTime.parseGregorianDateTime(e.startDate)},Timeline.QuarterlyEtherPainter.prototype.initialize=function(e,t){this._band=e,this._timeline=t,this._backgroundLayer=e.createLayerDiv(0),this._backgroundLayer.setAttribute("name","ether-background"),this._backgroundLayer.style.background=this._theme.ether.backgroundColors[e.getIndex()%4],this._markerLayer=null,this._lineLayer=null;var i="align"in this._params?this._params.align:this._theme.ether.interval.marker[t.isHorizontal()?"hAlign":"vAlign"],n="showLine"in this._params?this._params.showLine:this._theme.ether.interval.line.show;this._intervalMarkerLayout=new Timeline.EtherIntervalMarkerLayout(this._timeline,this._band,this._theme,i,n),this._highlight=new Timeline.EtherHighlight(this._timeline,this._band,this._theme,this._backgroundLayer)},Timeline.QuarterlyEtherPainter.prototype.setHighlight=function(e,t){this._highlight.position(e,t)},Timeline.QuarterlyEtherPainter.prototype.paint=function(){this._markerLayer&&this._band.removeLayerDiv(this._markerLayer),this._markerLayer=this._band.createLayerDiv(100),this._markerLayer.setAttribute("name","ether-markers"),this._markerLayer.style.display="none",this._lineLayer&&this._band.removeLayerDiv(this._lineLayer),this._lineLayer=this._band.createLayerDiv(1),this._lineLayer.setAttribute("name","ether-lines"),this._lineLayer.style.display="none";var e=new Date(0),t=this._band.getMaxDate();e.setUTCFullYear(Math.max(this._startDate.getUTCFullYear(),this._band.getMinDate().getUTCFullYear())),e.setUTCMonth(this._startDate.getUTCMonth());for(var i=this,n=function(e){e.setUTCMonth(e.getUTCMonth()+3)},r={labelInterval:function(e){var t=(4+(e.getUTCMonth()-i._startDate.getUTCMonth())/3)%4;return 0!=t?{text:"Q"+(t+1),emphasized:!1}:{text:"Y"+(e.getUTCFullYear()-i._startDate.getUTCFullYear()+1),emphasized:!0}}};e.getTime()<t.getTime();)this._intervalMarkerLayout.createIntervalMarker(e,r,SimileAjax.DateTime.YEAR,this._markerLayer,this._lineLayer),n(e);this._markerLayer.style.display="block",this._lineLayer.style.display="block"},Timeline.QuarterlyEtherPainter.prototype.softPaint=function(){},Timeline.EtherIntervalMarkerLayout=function(e,t,i,n,r){var a=e.isHorizontal();this.positionDiv=a?"Top"==n?function(e,t){e.style.left=t+"px",e.style.top="0px"}:function(e,t){e.style.left=t+"px",e.style.bottom="0px"}:"Left"==n?function(e,t){e.style.top=t+"px",e.style.left="0px"}:function(e,t){e.style.top=t+"px",e.style.right="0px"};var o=i.ether.interval.marker,l=i.ether.interval.line,s=i.ether.interval.weekend,h=(a?"h":"v")+n,u=o[h+"Styler"],c=o[h+"EmphasizedStyler"],m=SimileAjax.DateTime.gregorianUnitLengths[SimileAjax.DateTime.DAY];this.createIntervalMarker=function(n,o,h,d,p){var f=Math.round(t.dateToPixelOffset(n));if(r&&h!=SimileAjax.DateTime.WEEK){var g=e.getDocument().createElement("div");g.style.position="absolute",l.opacity<100&&SimileAjax.Graphics.setOpacity(g,l.opacity),a?(g.style.borderLeft="1px solid "+l.color,g.style.left=f+"px",g.style.width="1px",g.style.top="0px",g.style.height="100%"):(g.style.borderTop="1px solid "+l.color,g.style.top=f+"px",g.style.height="1px",g.style.left="0px",g.style.width="100%"),p.appendChild(g)}if(h==SimileAjax.DateTime.WEEK){var y=i.firstDayOfWeek,v=new Date(n.getTime()+(6-y-7)*m),_=new Date(v.getTime()+2*m),x=Math.round(t.dateToPixelOffset(v)),b=Math.round(t.dateToPixelOffset(_)),T=Math.max(1,b-x),j=e.getDocument().createElement("div");j.style.position="absolute",j.style.background=s.color,s.opacity<100&&SimileAjax.Graphics.setOpacity(j,s.opacity),a?(j.style.left=x+"px",j.style.width=T+"px",j.style.top="0px",j.style.height="100%"):(j.style.top=x+"px",j.style.height=T+"px",j.style.left="0px",j.style.width="100%"),p.appendChild(j)}var S=o.labelInterval(n,h),A=e.getDocument().createElement("div");return A.innerHTML=S.text,A.style.position="absolute",(S.emphasized?c:u)(A),this.positionDiv(A,f),d.appendChild(A),A}},Timeline.EtherHighlight=function(e,t,i,n){var r=e.isHorizontal();this._highlightDiv=null,this._createHighlightDiv=function(){if(null==this._highlightDiv){this._highlightDiv=e.getDocument().createElement("div"),this._highlightDiv.setAttribute("name","ether-highlight"),this._highlightDiv.style.position="absolute",this._highlightDiv.style.background=i.ether.highlightColor;var t=i.ether.highlightOpacity;100>t&&SimileAjax.Graphics.setOpacity(this._highlightDiv,t),n.appendChild(this._highlightDiv)}},this.position=function(e,i){this._createHighlightDiv();var n=Math.round(t.dateToPixelOffset(e)),a=Math.round(t.dateToPixelOffset(i)),o=Math.max(a-n,3);r?(this._highlightDiv.style.left=n+"px",this._highlightDiv.style.width=o+"px",this._highlightDiv.style.top="2px",this._highlightDiv.style.height=(t.getViewWidth()>4?t.getViewWidth()-4:0)+"px"):(this._highlightDiv.style.top=n+"px",this._highlightDiv.style.height=o+"px",this._highlightDiv.style.left="2px",this._highlightDiv.style.width=(t.getViewWidth()>4?t.getViewWidth()-4:0)+"px")}},Timeline.LinearEther=function(e){this._params=e,this._interval=e.interval,this._pixelsPerInterval=e.pixelsPerInterval},Timeline.LinearEther.prototype.initialize=function(e){this._timeline=e,this._unit=e.getUnit(),"startsOn"in this._params?this._start=this._unit.parseFromObject(this._params.startsOn):"endsOn"in this._params?(this._start=this._unit.parseFromObject(this._params.endsOn),this.shiftPixels(-this._timeline.getPixelLength())):"centersOn"in this._params?(this._start=this._unit.parseFromObject(this._params.centersOn),this.shiftPixels(-this._timeline.getPixelLength()/2)):(this._start=this._unit.makeDefaultValue(),this.shiftPixels(-this._timeline.getPixelLength()/2))},Timeline.LinearEther.prototype.setDate=function(e){this._start=this._unit.cloneValue(e)},Timeline.LinearEther.prototype.shiftPixels=function(e){var t=this._interval*e/this._pixelsPerInterval;this._start=this._unit.change(this._start,t)},Timeline.LinearEther.prototype.dateToPixelOffset=function(e){var t=this._unit.compare(e,this._start);
return this._pixelsPerInterval*t/this._interval},Timeline.LinearEther.prototype.pixelOffsetToDate=function(e){var t=e*this._interval/this._pixelsPerInterval;return this._unit.change(this._start,t)},Timeline.HotZoneEther=function(e){this._params=e,this._interval=e.interval,this._pixelsPerInterval=e.pixelsPerInterval},Timeline.HotZoneEther.prototype.initialize=function(e){this._timeline=e,this._unit=e.getUnit(),this._zones=[{startTime:Number.NEGATIVE_INFINITY,endTime:Number.POSITIVE_INFINITY,magnify:1}];for(var t=this._params,i=0;i<t.zones.length;i++)for(var n=t.zones[i],r=this._unit.parseFromObject(n.start),a=this._unit.parseFromObject(n.end),o=0;o<this._zones.length&&this._unit.compare(a,r)>0;o++){var l=this._zones[o];this._unit.compare(r,l.endTime)<0&&(this._unit.compare(r,l.startTime)>0&&(this._zones.splice(o,0,{startTime:l.startTime,endTime:r,magnify:l.magnify}),o++,l.startTime=r),this._unit.compare(a,l.endTime)<0?(this._zones.splice(o,0,{startTime:r,endTime:a,magnify:n.magnify*l.magnify}),o++,l.startTime=a,r=a):(l.magnify*=n.magnify,r=l.endTime))}"startsOn"in this._params?this._start=this._unit.parseFromObject(this._params.startsOn):"endsOn"in this._params?(this._start=this._unit.parseFromObject(this._params.endsOn),this.shiftPixels(-this._timeline.getPixelLength())):"centersOn"in this._params?(this._start=this._unit.parseFromObject(this._params.centersOn),this.shiftPixels(-this._timeline.getPixelLength()/2)):(this._start=this._unit.makeDefaultValue(),this.shiftPixels(-this._timeline.getPixelLength()/2))},Timeline.HotZoneEther.prototype.setDate=function(e){this._start=this._unit.cloneValue(e)},Timeline.HotZoneEther.prototype.shiftPixels=function(e){this._start=this.pixelOffsetToDate(e)},Timeline.HotZoneEther.prototype.dateToPixelOffset=function(e){return this._dateDiffToPixelOffset(this._start,e)},Timeline.HotZoneEther.prototype.pixelOffsetToDate=function(e){return this._pixelOffsetToDate(e,this._start)},Timeline.HotZoneEther.prototype._dateDiffToPixelOffset=function(e,t){var i=this._getScale(),n=e,r=t,a=0;if(this._unit.compare(n,r)<0){for(var o=0;o<this._zones.length&&!(this._unit.compare(n,this._zones[o].endTime)<0);)o++;for(;this._unit.compare(n,r)<0;){var l=this._zones[o],s=this._unit.earlier(r,l.endTime);a+=this._unit.compare(s,n)/(i/l.magnify),n=s,o++}}else{for(var o=this._zones.length-1;o>=0&&!(this._unit.compare(n,this._zones[o].startTime)>0);)o--;for(;this._unit.compare(n,r)>0;){var l=this._zones[o],s=this._unit.later(r,l.startTime);a+=this._unit.compare(s,n)/(i/l.magnify),n=s,o--}}return a},Timeline.HotZoneEther.prototype._pixelOffsetToDate=function(e,t){var i=this._getScale(),n=t;if(e>0){for(var r=0;r<this._zones.length&&!(this._unit.compare(n,this._zones[r].endTime)<0);)r++;for(;e>0;){var a=this._zones[r],o=i/a.magnify;if(a.endTime==Number.POSITIVE_INFINITY)n=this._unit.change(n,e*o),e=0;else{var l=this._unit.compare(a.endTime,n)/o;l>e?(n=this._unit.change(n,e*o),e=0):(n=a.endTime,e-=l)}r++}}else{for(var r=this._zones.length-1;r>=0&&!(this._unit.compare(n,this._zones[r].startTime)>0);)r--;for(e=-e;e>0;){var a=this._zones[r],o=i/a.magnify;if(a.startTime==Number.NEGATIVE_INFINITY)n=this._unit.change(n,-e*o),e=0;else{var l=this._unit.compare(n,a.startTime)/o;l>e?(n=this._unit.change(n,-e*o),e=0):(n=a.startTime,e-=l)}r--}}return n},Timeline.HotZoneEther.prototype._getScale=function(){return this._interval/this._pixelsPerInterval},Timeline.GregorianDateLabeller=function(e,t){this._locale=e,this._timeZone=t},Timeline.GregorianDateLabeller.monthNames=[],Timeline.GregorianDateLabeller.dayNames=[],Timeline.GregorianDateLabeller.labelIntervalFunctions=[],Timeline.GregorianDateLabeller.getMonthName=function(e,t){return Timeline.GregorianDateLabeller.monthNames[t][e]},Timeline.GregorianDateLabeller.prototype.labelInterval=function(e,t){var i=Timeline.GregorianDateLabeller.labelIntervalFunctions[this._locale];return null==i&&(i=Timeline.GregorianDateLabeller.prototype.defaultLabelInterval),i.call(this,e,t)},Timeline.GregorianDateLabeller.prototype.GMTToLocalDate=function(e){return new Date(e.getTime()-60*e.getTimezoneOffset()*1e3)},Timeline.GregorianDateLabeller.prototype.labelPrecise=function(e,t){var i=e;return t?i.toDateString():i.toLocaleString()},Timeline.GregorianDateLabeller.prototype.defaultLabelInterval=function(e,t){var i,n=!1;switch(e=SimileAjax.DateTime.removeTimeZoneOffset(e,this._timeZone),t){case SimileAjax.DateTime.MILLISECOND:i=e.getUTCMilliseconds();break;case SimileAjax.DateTime.SECOND:i=e.getUTCSeconds();break;case SimileAjax.DateTime.MINUTE:var r=e.getUTCMinutes();0==r?(i=e.getUTCHours()+":00",n=!0):i=r;break;case SimileAjax.DateTime.HOUR:i=e.getUTCHours()+"hr";break;case SimileAjax.DateTime.DAY:i=Timeline.GregorianDateLabeller.getMonthName(e.getUTCMonth(),this._locale)+" "+e.getUTCDate();break;case SimileAjax.DateTime.WEEK:i=Timeline.GregorianDateLabeller.getMonthName(e.getUTCMonth(),this._locale)+" "+e.getUTCDate();break;case SimileAjax.DateTime.MONTH:var r=e.getUTCMonth();if(0!=r){i=Timeline.GregorianDateLabeller.getMonthName(r,this._locale);break}case SimileAjax.DateTime.YEAR:case SimileAjax.DateTime.DECADE:case SimileAjax.DateTime.CENTURY:case SimileAjax.DateTime.MILLENNIUM:var a=e.getUTCFullYear();i=a>0?e.getUTCFullYear():1-a+"BC",n=t==SimileAjax.DateTime.MONTH||t==SimileAjax.DateTime.DECADE&&a%100==0||t==SimileAjax.DateTime.CENTURY&&a%1e3==0;break;default:i=e.toUTCString()}return{text:i,emphasized:n}},Timeline.OriginalEventPainter=function(e){this._params=e,this._onSelectListeners=[],this._filterMatcher=null,this._highlightMatcher=null,this._frc=null,this._eventIdToElmt={}},Timeline.OriginalEventPainter.prototype.initialize=function(e,t){this._band=e,this._timeline=t,this._backLayer=null,this._eventLayer=null,this._lineLayer=null,this._highlightLayer=null,this._eventIdToElmt=null},Timeline.OriginalEventPainter.prototype.addOnSelectListener=function(e){this._onSelectListeners.push(e)},Timeline.OriginalEventPainter.prototype.removeOnSelectListener=function(e){for(var t=0;t<this._onSelectListeners.length;t++)if(this._onSelectListeners[t]==e){this._onSelectListeners.splice(t,1);break}},Timeline.OriginalEventPainter.prototype.getFilterMatcher=function(){return this._filterMatcher},Timeline.OriginalEventPainter.prototype.setFilterMatcher=function(e){this._filterMatcher=e},Timeline.OriginalEventPainter.prototype.getHighlightMatcher=function(){return this._highlightMatcher},Timeline.OriginalEventPainter.prototype.setHighlightMatcher=function(e){this._highlightMatcher=e},Timeline.OriginalEventPainter.prototype.paint=function(){var e=this._band.getEventSource();if(null!=e){this._eventIdToElmt={},this._prepareForPainting();for(var t=this._params.theme.event,i=Math.max(t.track.height,t.tape.height+this._frc.getLineHeight()),n={trackOffset:t.track.gap,trackHeight:i,trackGap:t.track.gap,trackIncrement:i+t.track.gap,icon:t.instant.icon,iconWidth:t.instant.iconWidth,iconHeight:t.instant.iconHeight,labelWidth:t.label.width},r=this._band.getMinDate(),a=this._band.getMaxDate(),o=null!=this._filterMatcher?this._filterMatcher:function(){return!0},l=null!=this._highlightMatcher?this._highlightMatcher:function(){return-1},s=e.getEventReverseIterator(r,a);s.hasNext();){var h=s.next();o(h)&&this.paintEvent(h,n,this._params.theme,l(h))}this._highlightLayer.style.display="block",this._lineLayer.style.display="block",this._eventLayer.style.display="block"}},Timeline.OriginalEventPainter.prototype.softPaint=function(){},Timeline.OriginalEventPainter.prototype._prepareForPainting=function(){var e=this._band;if(null==this._backLayer){this._backLayer=this._band.createLayerDiv(0,"timeline-band-events"),this._backLayer.style.visibility="hidden";var t=document.createElement("span");t.className="timeline-event-label",this._backLayer.appendChild(t),this._frc=SimileAjax.Graphics.getFontRenderingContext(t)}this._frc.update(),this._tracks=[],null!=this._highlightLayer&&e.removeLayerDiv(this._highlightLayer),this._highlightLayer=e.createLayerDiv(105,"timeline-band-highlights"),this._highlightLayer.style.display="none",null!=this._lineLayer&&e.removeLayerDiv(this._lineLayer),this._lineLayer=e.createLayerDiv(110,"timeline-band-lines"),this._lineLayer.style.display="none",null!=this._eventLayer&&e.removeLayerDiv(this._eventLayer),this._eventLayer=e.createLayerDiv(115,"timeline-band-events"),this._eventLayer.style.display="none"},Timeline.OriginalEventPainter.prototype.paintEvent=function(e,t,i,n){e.isInstant()?this.paintInstantEvent(e,t,i,n):this.paintDurationEvent(e,t,i,n)},Timeline.OriginalEventPainter.prototype.paintInstantEvent=function(e,t,i,n){e.isImprecise()?this.paintImpreciseInstantEvent(e,t,i,n):this.paintPreciseInstantEvent(e,t,i,n)},Timeline.OriginalEventPainter.prototype.paintDurationEvent=function(e,t,i,n){e.isImprecise()?this.paintImpreciseDurationEvent(e,t,i,n):this.paintPreciseDurationEvent(e,t,i,n)},Timeline.OriginalEventPainter.prototype.paintPreciseInstantEvent=function(e,t,i,n){var r=(this._timeline.getDocument(),e.getText()),a=e.getStart(),o=Math.round(this._band.dateToPixelOffset(a)),l=Math.round(o+t.iconWidth/2),s=Math.round(o-t.iconWidth/2),h=this._frc.computeSize(r),u=l+i.event.label.offsetFromLine,c=u+h.width,m=c,d=this._findFreeTrack(m),p=Math.round(t.trackOffset+d*t.trackIncrement+t.trackHeight/2-h.height/2),f=this._paintEventIcon(e,d,s,t,i),g=this._paintEventLabel(e,r,u,p,h.width,h.height,i),y=this,v=function(t,i){return y._onClickInstantEvent(f.elmt,i,e)};SimileAjax.DOM.registerEvent(f.elmt,"mousedown",v),SimileAjax.DOM.registerEvent(g.elmt,"mousedown",v),this._createHighlightDiv(n,f,i),this._eventIdToElmt[e.getID()]=f.elmt,this._tracks[d]=s},Timeline.OriginalEventPainter.prototype.paintImpreciseInstantEvent=function(e,t,i,n){var r=(this._timeline.getDocument(),e.getText()),a=e.getStart(),o=e.getEnd(),l=Math.round(this._band.dateToPixelOffset(a)),s=Math.round(this._band.dateToPixelOffset(o)),h=Math.round(l+t.iconWidth/2),u=Math.round(l-t.iconWidth/2),c=this._frc.computeSize(r),m=h+i.event.label.offsetFromLine,d=m+c.width,p=Math.max(d,s),f=this._findFreeTrack(p),g=Math.round(t.trackOffset+f*t.trackIncrement+t.trackHeight/2-c.height/2),y=this._paintEventIcon(e,f,u,t,i),v=this._paintEventLabel(e,r,m,g,c.width,c.height,i),_=this._paintEventTape(e,f,l,s,i.event.instant.impreciseColor,i.event.instant.impreciseOpacity,t,i),x=this,b=function(t,i){return x._onClickInstantEvent(y.elmt,i,e)};SimileAjax.DOM.registerEvent(y.elmt,"mousedown",b),SimileAjax.DOM.registerEvent(_.elmt,"mousedown",b),SimileAjax.DOM.registerEvent(v.elmt,"mousedown",b),this._createHighlightDiv(n,y,i),this._eventIdToElmt[e.getID()]=y.elmt,this._tracks[f]=u},Timeline.OriginalEventPainter.prototype.paintPreciseDurationEvent=function(e,t,i,n){var r=(this._timeline.getDocument(),String.format("<img src='{0}' /> {1}",e.getIcon(),e.getText())),a=e.getStart(),o=e.getEnd(),l=Math.round(this._band.dateToPixelOffset(a)),s=Math.round(this._band.dateToPixelOffset(o)),h=this._frc.computeSize(r),u=l,c=u+h.width,m=Math.max(c,s),d=this._findFreeTrack(m),p=Math.round(t.trackOffset+d*t.trackIncrement+i.event.tape.height),f=e.getColor();f=null!=f?f:i.event.duration.color;var g=this._paintEventTape(e,d,l,s,f,100,t,i),y=this._paintEventLabel(e,r,u,p,h.width,h.height,i),v=this,_=function(t,i){return v._onClickInstantEvent(g.elmt,i,e)};SimileAjax.DOM.registerEvent(g.elmt,"mousedown",_),SimileAjax.DOM.registerEvent(y.elmt,"mousedown",_),this._createHighlightDiv(n,g,i),this._eventIdToElmt[e.getID()]=g.elmt,this._tracks[d]=l},Timeline.OriginalEventPainter.prototype.paintImpreciseDurationEvent=function(e,t,i,n){var r=(this._timeline.getDocument(),e.getText()),a=e.getStart(),o=e.getLatestStart(),l=e.getEnd(),s=e.getEarliestEnd(),h=Math.round(this._band.dateToPixelOffset(a)),u=Math.round(this._band.dateToPixelOffset(o)),c=Math.round(this._band.dateToPixelOffset(l)),m=Math.round(this._band.dateToPixelOffset(s)),d=this._frc.computeSize(r),p=u,f=p+d.width,g=Math.max(f,c),y=this._findFreeTrack(g),v=Math.round(t.trackOffset+y*t.trackIncrement+i.event.tape.height),_=e.getColor();_=null!=_?_:i.event.duration.color;var x=(this._paintEventTape(e,y,h,c,i.event.duration.impreciseColor,i.event.duration.impreciseOpacity,t,i),this._paintEventTape(e,y,u,m,_,100,t,i)),b=this._paintEventLabel(e,r,p,v,d.width,d.height,i),T=this,j=function(t,i){return T._onClickInstantEvent(x.elmt,i,e)};SimileAjax.DOM.registerEvent(x.elmt,"mousedown",j),SimileAjax.DOM.registerEvent(b.elmt,"mousedown",j),this._createHighlightDiv(n,x,i),this._eventIdToElmt[e.getID()]=x.elmt,this._tracks[y]=h},Timeline.OriginalEventPainter.prototype._findFreeTrack=function(e){for(var t=0;t<this._tracks.length;t++){var i=this._tracks[t];if(i>e)break}return t},Timeline.OriginalEventPainter.prototype._paintEventIcon=function(e,t,i,n){var r=e.getIcon();r=null!=r?r:n.icon;var a=n.trackOffset+t*n.trackIncrement+n.trackHeight/2,o=Math.round(a-n.iconHeight/2),l=SimileAjax.Graphics.createTranslucentImage(r),s=this._timeline.getDocument().createElement("div");return s.style.position="absolute",s.style.left=i+"px",s.style.top=o+"px",s.appendChild(l),s.style.cursor="pointer",this._eventLayer.appendChild(s),{left:i,top:o,width:n.iconWidth,height:n.iconHeight,elmt:s}},Timeline.OriginalEventPainter.prototype._paintEventLabel=function(e,t,i,n,r,a){var o=this._timeline.getDocument(),l=o.createElement("div");l.style.position="absolute",l.style.left=i+"px",l.style.width=r+1+"px",l.style.top=n+"px",l.innerHTML=t,l.style.cursor="pointer";var s=e.getTextColor();return null==s&&(s=e.getColor()),null!=s&&(l.style.color=s),this._eventLayer.appendChild(l),{left:i,top:n,width:r,height:a,elmt:l}},Timeline.OriginalEventPainter.prototype._paintEventTape=function(e,t,i,n,r,a,o,l){var s=n-i>0?n-i:0,h=l.event.tape.height,u=o.trackOffset+t*o.trackIncrement,c=this._timeline.getDocument().createElement("div");return c.style.position="absolute",c.style.left=i+"px",c.style.width=s+"px",c.style.top=u+"px",c.style.height=h+"px",c.style.backgroundColor=r,c.style.overflow="hidden",c.style.cursor="pointer",SimileAjax.Graphics.setOpacity(c,a),this._eventLayer.appendChild(c),{left:i,top:u,width:s,height:h,elmt:c}},Timeline.OriginalEventPainter.prototype._createHighlightDiv=function(e,t,i){if(e>=0){var n=this._timeline.getDocument(),r=i.event,a=r.highlightColors[Math.min(e,r.highlightColors.length-1)],o=n.createElement("div");o.style.position="absolute",o.style.overflow="hidden",o.style.left=t.left-2+"px",o.style.width=t.width+4+"px",o.style.top=t.top-2+"px",o.style.height=t.height+4+"px",o.style.background=a,this._highlightLayer.appendChild(o)}},Timeline.OriginalEventPainter.prototype._onClickInstantEvent=function(e,t,i){var n=SimileAjax.DOM.getPageCoordinates(e);return this._showBubble(n.left+Math.ceil(e.offsetWidth/2),n.top+Math.ceil(e.offsetHeight/2),i),this._fireOnSelect(i.getID()),t.cancelBubble=!0,SimileAjax.DOM.cancelEvent(t),!1},Timeline.OriginalEventPainter.prototype._onClickDurationEvent=function(e,t,i){if("pageX"in t)var n=t.pageX,r=t.pageY;else var a=SimileAjax.DOM.getPageCoordinates(e),n=t.offsetX+a.left,r=t.offsetY+a.top;return this._showBubble(n,r,i),this._fireOnSelect(i.getID()),t.cancelBubble=!0,SimileAjax.DOM.cancelEvent(t),!1},Timeline.OriginalEventPainter.prototype.showBubble=function(e){var t=this._eventIdToElmt[e.getID()];if(t){var i=SimileAjax.DOM.getPageCoordinates(t);this._showBubble(i.left+t.offsetWidth/2,i.top+t.offsetHeight/2,e)}},Timeline.OriginalEventPainter.prototype._showBubble=function(e,t,i){var n=document.createElement("div");i.fillInfoBubble(n,this._params.theme,this._band.getLabeller()),SimileAjax.WindowManager.cancelPopups(),SimileAjax.Graphics.createBubbleForContentAndPoint(n,e,t,this._params.theme.event.bubble.width)},Timeline.OriginalEventPainter.prototype._fireOnSelect=function(e){for(var t=0;t<this._onSelectListeners.length;t++)this._onSelectListeners[t](e)},Timeline.OverviewEventPainter=function(e){this._params=e,this._onSelectListeners=[],this._filterMatcher=null,this._highlightMatcher=null},Timeline.OverviewEventPainter.prototype.initialize=function(e,t){this._band=e,this._timeline=t,this._eventLayer=null,this._highlightLayer=null},Timeline.OverviewEventPainter.prototype.addOnSelectListener=function(e){this._onSelectListeners.push(e)},Timeline.OverviewEventPainter.prototype.removeOnSelectListener=function(e){for(var t=0;t<this._onSelectListeners.length;t++)if(this._onSelectListeners[t]==e){this._onSelectListeners.splice(t,1);break}},Timeline.OverviewEventPainter.prototype.getFilterMatcher=function(){return this._filterMatcher},Timeline.OverviewEventPainter.prototype.setFilterMatcher=function(e){this._filterMatcher=e},Timeline.OverviewEventPainter.prototype.getHighlightMatcher=function(){return this._highlightMatcher},Timeline.OverviewEventPainter.prototype.setHighlightMatcher=function(e){this._highlightMatcher=e},Timeline.OverviewEventPainter.prototype.paint=function(){var e=this._band.getEventSource();if(null!=e){this._prepareForPainting();for(var t=this._params.theme.event,i={trackOffset:t.overviewTrack.offset,trackHeight:t.overviewTrack.height,trackGap:t.overviewTrack.gap,trackIncrement:t.overviewTrack.height+t.overviewTrack.gap},n=this._band.getMinDate(),r=this._band.getMaxDate(),a=null!=this._filterMatcher?this._filterMatcher:function(){return!0},o=null!=this._highlightMatcher?this._highlightMatcher:function(){return-1},l=e.getEventReverseIterator(n,r);l.hasNext();){var s=l.next();a(s)&&this.paintEvent(s,i,this._params.theme,o(s))}this._highlightLayer.style.display="block",this._eventLayer.style.display="block"}},Timeline.OverviewEventPainter.prototype.softPaint=function(){},Timeline.OverviewEventPainter.prototype._prepareForPainting=function(){var e=this._band;this._tracks=[],null!=this._highlightLayer&&e.removeLayerDiv(this._highlightLayer),this._highlightLayer=e.createLayerDiv(105,"timeline-band-highlights"),this._highlightLayer.style.display="none",null!=this._eventLayer&&e.removeLayerDiv(this._eventLayer),this._eventLayer=e.createLayerDiv(110,"timeline-band-events"),this._eventLayer.style.display="none"},Timeline.OverviewEventPainter.prototype.paintEvent=function(e,t,i,n){e.isInstant()?this.paintInstantEvent(e,t,i,n):this.paintDurationEvent(e,t,i,n)},Timeline.OverviewEventPainter.prototype.paintInstantEvent=function(e,t,i,n){var r=e.getStart(),a=Math.round(this._band.dateToPixelOffset(r)),o=e.getColor();o=null!=o?o:i.event.duration.color;var l=this._paintEventTick(e,a,o,100,t,i);this._createHighlightDiv(n,l,i)},Timeline.OverviewEventPainter.prototype.paintDurationEvent=function(e,t,i,n){for(var r=e.getLatestStart(),a=e.getEarliestEnd(),o=Math.round(this._band.dateToPixelOffset(r)),l=Math.round(this._band.dateToPixelOffset(a)),s=0;s<this._tracks.length&&!(l<this._tracks[s]);s++);this._tracks[s]=l;var h=e.getColor();h=null!=h?h:i.event.duration.color;var u=this._paintEventTape(e,s,o,l,h,100,t,i);this._createHighlightDiv(n,u,i)},Timeline.OverviewEventPainter.prototype._paintEventTape=function(e,t,i,n,r,a,o){var l=o.trackOffset+t*o.trackIncrement,s=n-i,h=o.trackHeight,u=this._timeline.getDocument().createElement("div");return u.style.position="absolute",u.style.left=i+"px",u.style.width=s+"px",u.style.top=l+"px",u.style.height=h+"px",u.style.backgroundColor=r,u.style.overflow="hidden",SimileAjax.Graphics.setOpacity(u,a),this._eventLayer.appendChild(u),{left:i,top:l,width:s,height:h,elmt:u}},Timeline.OverviewEventPainter.prototype._paintEventTick=function(e,t,i,n,r,a){var o=a.event.overviewTrack.tickHeight,l=r.trackOffset-o,s=1,h=this._timeline.getDocument().createElement("div");return h.style.position="absolute",h.style.left=t+"px",h.style.width=s+"px",h.style.top=l+"px",h.style.height=o+"px",h.style.backgroundColor=i,h.style.overflow="hidden",SimileAjax.Graphics.setOpacity(h,n),this._eventLayer.appendChild(h),{left:t,top:l,width:s,height:o,elmt:h}},Timeline.OverviewEventPainter.prototype._createHighlightDiv=function(e,t,i){if(e>=0){var n=this._timeline.getDocument(),r=i.event,a=r.highlightColors[Math.min(e,r.highlightColors.length-1)],o=n.createElement("div");o.style.position="absolute",o.style.overflow="hidden",o.style.left=t.left-1+"px",o.style.width=t.width+2+"px",o.style.top=t.top-1+"px",o.style.height=t.height+2+"px",o.style.background=a,this._highlightLayer.appendChild(o)}},Timeline.OverviewEventPainter.prototype.showBubble=function(){},Timeline.DefaultEventSource=function(e){this._events=e instanceof Object?e:new SimileAjax.EventIndex,this._listeners=[]},Timeline.DefaultEventSource.prototype.addListener=function(e){this._listeners.push(e)},Timeline.DefaultEventSource.prototype.removeListener=function(e){for(var t=0;t<this._listeners.length;t++)if(this._listeners[t]==e){this._listeners.splice(t,1);break}},Timeline.DefaultEventSource.prototype.loadXML=function(e,t){for(var i=this._getBaseURL(t),n=e.documentElement.getAttribute("wiki-url"),r=e.documentElement.getAttribute("wiki-section"),a=e.documentElement.getAttribute("date-time-format"),o=this._events.getUnit().getParser(a),l=e.documentElement.firstChild,s=!1;null!=l;){if(1==l.nodeType){var h="";null==l.firstChild||3!=l.firstChild.nodeType&&4!=l.firstChild.nodeType||(h=l.firstChild.nodeValue);var u=new Timeline.DefaultEventSource.Event(l.getAttribute("id"),o(l.getAttribute("start")),o(l.getAttribute("end")),o(l.getAttribute("latestStart")),o(l.getAttribute("earliestEnd")),"true"!=l.getAttribute("isDuration"),l.getAttribute("title"),h,this._resolveRelativeURL(l.getAttribute("image"),i),this._resolveRelativeURL(l.getAttribute("link"),i),this._resolveRelativeURL(l.getAttribute("icon"),i),l.getAttribute("color"),l.getAttribute("textColor"));u._node=l,u.getProperty=function(e){return this._node.getAttribute(e)},u.setWikiInfo(n,r),this._events.add(u),s=!0}l=l.nextSibling}s&&this._fire("onAddMany",[]),Timeline_RecalculateHeight&&Timeline_RecalculateHeight()},Timeline.DefaultEventSource.prototype.loadJSON=function(e,t){var i=this._getBaseURL(t),n=!1;if(e&&e.events)for(var r=("wikiURL"in e?e.wikiURL:null),a=("wikiSection"in e?e.wikiSection:null),o=("dateTimeFormat"in e?e.dateTimeFormat:null),l=this._events.getUnit().getParser(o),s=0;s<e.events.length;s++){var h=e.events[s],u=new Timeline.DefaultEventSource.Event("id"in h?h.id:void 0,l(h.start),l(h.end),l(h.latestStart),l(h.earliestEnd),h.isDuration||!1,h.title,h.description,this._resolveRelativeURL(h.image,i),this._resolveRelativeURL(h.link,i),this._resolveRelativeURL(h.icon,i),h.color,h.textColor);u._obj=h,u.getProperty=function(e){return this._obj[e]},u.setWikiInfo(r,a),this._events.add(u),n=!0}n&&this._fire("onAddMany",[])},Timeline.DefaultEventSource.prototype.loadSPARQL=function(e,t){var i=this._getBaseURL(t),n="iso8601",r=this._events.getUnit().getParser(n);if(null!=e){for(var a=e.documentElement.firstChild;null!=a&&(1!=a.nodeType||"results"!=a.nodeName);)a=a.nextSibling;var o=null,l=null;null!=a&&(o=a.getAttribute("wiki-url"),l=a.getAttribute("wiki-section"),a=a.firstChild);for(var s=!1;null!=a;){if(1==a.nodeType){for(var h={},u=a.firstChild;null!=u;)1==u.nodeType&&null!=u.firstChild&&1==u.firstChild.nodeType&&null!=u.firstChild.firstChild&&3==u.firstChild.firstChild.nodeType&&(h[u.getAttribute("name")]=u.firstChild.firstChild.nodeValue),u=u.nextSibling;null==h.start&&null!=h.date&&(h.start=h.date);var c=new Timeline.DefaultEventSource.Event(h.id,r(h.start),r(h.end),r(h.latestStart),r(h.earliestEnd),"true"!=h.isDuration,h.title,h.description,this._resolveRelativeURL(h.image,i),this._resolveRelativeURL(h.link,i),this._resolveRelativeURL(h.icon,i),h.color,h.textColor);c._bindings=h,c.getProperty=function(e){return this._bindings[e]},c.setWikiInfo(o,l),this._events.add(c),s=!0}a=a.nextSibling}s&&this._fire("onAddMany",[])}},Timeline.DefaultEventSource.prototype.add=function(e){this._events.add(e),this._fire("onAddOne",[e])},Timeline.DefaultEventSource.prototype.addMany=function(e){for(var t=0;t<e.length;t++)this._events.add(e[t]);this._fire("onAddMany",[])},Timeline.DefaultEventSource.prototype.clear=function(){this._events.removeAll(),this._fire("onClear",[])},Timeline.DefaultEventSource.prototype.getEvent=function(e){return this._events.getEvent(e)},Timeline.DefaultEventSource.prototype.getEventIterator=function(e,t){return this._events.getIterator(e,t)},Timeline.DefaultEventSource.prototype.getEventReverseIterator=function(e,t){return this._events.getReverseIterator(e,t)},Timeline.DefaultEventSource.prototype.getAllEventIterator=function(){return this._events.getAllIterator()},Timeline.DefaultEventSource.prototype.getCount=function(){return this._events.getCount()},Timeline.DefaultEventSource.prototype.getEarliestDate=function(){return this._events.getEarliestDate()},Timeline.DefaultEventSource.prototype.getLatestDate=function(){return this._events.getLatestDate()},Timeline.DefaultEventSource.prototype._fire=function(e,t){for(var i=0;i<this._listeners.length;i++){var n=this._listeners[i];if(e in n)try{n[e].apply(n,t)}catch(r){SimileAjax.Debug.exception(r)}}},Timeline.DefaultEventSource.prototype._getBaseURL=function(e){if(e.indexOf("://")<0){var t=this._getBaseURL(document.location.href);e="/"==e.substr(0,1)?t.substr(0,t.indexOf("/",t.indexOf("://")+3))+e:t+e}var i=e.lastIndexOf("/");return 0>i?"":e.substr(0,i+1)},Timeline.DefaultEventSource.prototype._resolveRelativeURL=function(e,t){return null==e||""==e?e:e.indexOf("://")>0?e:e.indexOf("javascript:")>=0?e:"/"==e.substr(0,1)?t.substr(0,t.indexOf("/",t.indexOf("://")+3))+e:t+e},Timeline.DefaultEventSource.Event=function(e,t,i,n,r,a,o,l,s,h,u,c,m){if(e=e?e.trim():"",this._id=e.length>0?e:"e"+Math.floor(1e6*Math.random()),this._instant=a||null==i,!t||isNaN(new Date(t).getYear())||null==t)throw String.format("Error creating event: no valid startdate.\n{0}\n{1}",o,l);this._start=t,this._end=null!=i?i:t,this._latestStart=null!=n?n:a?this._end:this._start,this._earliestEnd=null!=r?r:a?this._start:this._end,this._text=SimileAjax.HTML.deEntify(o),this._description=SimileAjax.HTML.deEntify(l),this._image=null!=s&&""!=s?s:null,this._link=null!=h&&""!=h?h:null,this._icon=null!=u&&""!=u?u:null,this._color=null!=c&&""!=c?c:null,this._textColor=null!=m&&""!=m?m:null,this._wikiURL=null,this._wikiSection=null},Timeline.DefaultEventSource.Event.prototype={getID:function(){return this._id},isInstant:function(){return this._instant},isImprecise:function(){return this._start!=this._latestStart||this._end!=this._earliestEnd},getStart:function(){return this._start},getEnd:function(){return this._end},getLatestStart:function(){return this._latestStart},getEarliestEnd:function(){return this._earliestEnd},getText:function(){return this._text},getDescription:function(){return this._description},getImage:function(){return this._image},getLink:function(){return this._link},getIcon:function(){return this._icon},getColor:function(){return this._color},getTextColor:function(){return this._textColor},getProperty:function(){return null},getWikiURL:function(){return this._wikiURL},getWikiSection:function(){return this._wikiSection},setWikiInfo:function(e,t){this._wikiURL=e,this._wikiSection=t},fillDescription:function(e){e.innerHTML=this._description},fillWikiInfo:function(e){if(null!=this._wikiURL&&null!=this._wikiSection){var t=this.getProperty("wikiID");(null==t||0==t.length)&&(t=this.getText()),t=t.replace(/\s/g,"_");var i=this._wikiURL+this._wikiSection.replace(/\s/g,"_")+"/"+t,n=document.createElement("a");n.href=i,n.target="new",n.innerHTML=Timeline.strings[Timeline.clientLocale].wikiLinkLabel,e.appendChild(document.createTextNode("[")),e.appendChild(n),e.appendChild(document.createTextNode("]"))}else e.style.display="none"},fillTime:function(e,t){this._instant?this.isImprecise()?this._start-this._end==1e3?e.appendChild(e.ownerDocument.createTextNode(t.labelPrecise(this._start,!0))):(e.appendChild(e.ownerDocument.createTextNode(t.labelPrecise(this._start))),e.appendChild(e.ownerDocument.createElement("br")),e.appendChild(e.ownerDocument.createTextNode(t.labelPrecise(this._end)))):e.appendChild(e.ownerDocument.createTextNode(t.labelPrecise(this._start))):this.isImprecise()?(e.appendChild(e.ownerDocument.createTextNode(t.labelPrecise(this._start)+" ~ "+t.labelPrecise(this._latestStart))),e.appendChild(e.ownerDocument.createElement("br")),e.appendChild(e.ownerDocument.createTextNode(t.labelPrecise(this._earliestEnd)+" ~ "+t.labelPrecise(this._end)))):(e.appendChild(e.ownerDocument.createTextNode(t.labelPrecise(this._start))),e.appendChild(e.ownerDocument.createElement("br")),e.appendChild(e.ownerDocument.createTextNode(t.labelPrecise(this._end))))},fillInfoBubble:function(e,t,i){var n=e.ownerDocument,r=this.getText(),a=this.getLink(),o=this.getImage();if(null!=o){var l=n.createElement("img");l.src=o,t.event.bubble.imageStyler(l),e.appendChild(l)}var s=n.createElement("div"),h=n.createTextNode(r);if(null!=a){var u=n.createElement("a");u.href=a,u.appendChild(h),s.appendChild(u)}else s.appendChild(h);t.event.bubble.titleStyler(s),e.appendChild(s);var c=n.createElement("div");this.fillDescription(c),t.event.bubble.bodyStyler(c),e.appendChild(c);var m=n.createElement("div");this.fillTime(m,i),t.event.bubble.timeStyler(m),e.appendChild(m);var d=n.createElement("div");this.fillWikiInfo(d),t.event.bubble.wikiStyler(d),e.appendChild(d)}},Timeline.ClassicTheme=new Object,Timeline.ClassicTheme.implementations=[],Timeline.ClassicTheme.create=function(e){null==e&&(e=Timeline.getDefaultLocale());var t=Timeline.ClassicTheme.implementations[e];return null==t&&(t=Timeline.ClassicTheme._Impl),new t},Timeline.ClassicTheme._Impl=function(){this.firstDayOfWeek=0,this.ether={backgroundColors:["#EEE","#DDD","#CCC","#AAA"],highlightColor:"white",highlightOpacity:50,interval:{line:{show:!0,color:"#aaa",opacity:25},weekend:{color:"#FFFFE0",opacity:30},marker:{hAlign:"Bottom",hBottomStyler:function(e){e.className="timeline-ether-marker-bottom"},hBottomEmphasizedStyler:function(e){e.className="timeline-ether-marker-bottom-emphasized"},hTopStyler:function(e){e.className="timeline-ether-marker-top"},hTopEmphasizedStyler:function(e){e.className="timeline-ether-marker-top-emphasized"},vAlign:"Right",vRightStyler:function(e){e.className="timeline-ether-marker-right"},vRightEmphasizedStyler:function(e){e.className="timeline-ether-marker-right-emphasized"},vLeftStyler:function(e){e.className="timeline-ether-marker-left"},vLeftEmphasizedStyler:function(e){e.className="timeline-ether-marker-left-emphasized"}}}},this.event={track:{height:10,gap:2},overviewTrack:{offset:20,tickHeight:6,height:2,gap:1},tape:{height:4},instant:{icon:Timeline.urlPrefix+"images/dull-blue-circle.png",iconWidth:16,iconHeight:16,color:"#58A0DC",impreciseColor:"#58A0DC",impreciseOpacity:20},duration:{color:"#58A0DC",impreciseColor:"#58A0DC",impreciseOpacity:20},label:{backgroundColor:"white",backgroundOpacity:50,lineColor:"#58A0DC",offsetFromLine:3},highlightColors:["#FFFF00","#FFC000","#FF0000","#0000FF"],bubble:{width:250,height:125,titleStyler:function(e){e.className="timeline-event-bubble-title"},bodyStyler:function(e){e.className="timeline-event-bubble-body"},imageStyler:function(e){e.className="timeline-event-bubble-image"},wikiStyler:function(e){e.className="timeline-event-bubble-wiki"},timeStyler:function(e){e.className="timeline-event-bubble-time"}}}},Timeline.strings={},Timeline.getDefaultLocale=function(){return Timeline.clientLocale},Timeline.create=function(e,t,i,n){return new Timeline._Impl(e,t,i,n)},Timeline.HORIZONTAL=0,Timeline.VERTICAL=1,Timeline._defaultTheme=null,Timeline.createBandInfo=function(e){var t="theme"in e?e.theme:Timeline.getDefaultTheme(),i="eventSource"in e?e.eventSource:null,n=new Timeline.LinearEther({centersOn:"date"in e?e.date:new Date,interval:SimileAjax.DateTime.gregorianUnitLengths[e.intervalUnit],pixelsPerInterval:e.intervalPixels}),r=new Timeline.GregorianEtherPainter({unit:e.intervalUnit,multiple:"multiple"in e?e.multiple:1,theme:t,align:"align"in e?e.align:void 0}),a={showText:"showEventText"in e?e.showEventText:!0,theme:t};"trackHeight"in e&&(a.trackHeight=e.trackHeight),"trackGap"in e&&(a.trackGap=e.trackGap);
var o,l="overview"in e&&e.overview?"overview":"layout"in e?e.layout:"original";switch(l){case"overview":o=new Timeline.OverviewEventPainter(a);break;case"detailed":o=new Timeline.DetailedEventPainter(a);break;default:o=new Timeline.OriginalEventPainter(a)}return{width:e.width,eventSource:i,timeZone:"timeZone"in e?e.timeZone:0,ether:n,etherPainter:r,eventPainter:o}},Timeline.createHotZoneBandInfo=function(e){var t="theme"in e?e.theme:Timeline.getDefaultTheme(),i="eventSource"in e?e.eventSource:null,n=new Timeline.HotZoneEther({centersOn:"date"in e?e.date:new Date,interval:SimileAjax.DateTime.gregorianUnitLengths[e.intervalUnit],pixelsPerInterval:e.intervalPixels,zones:e.zones}),r=new Timeline.HotZoneGregorianEtherPainter({unit:e.intervalUnit,zones:e.zones,theme:t,align:"align"in e?e.align:void 0}),a={showText:"showEventText"in e?e.showEventText:!0,theme:t};"trackHeight"in e&&(a.trackHeight=e.trackHeight),"trackGap"in e&&(a.trackGap=e.trackGap);var o,l="overview"in e&&e.overview?"overview":"layout"in e?e.layout:"original";switch(l){case"overview":o=new Timeline.OverviewEventPainter(a);break;case"detailed":o=new Timeline.DetailedEventPainter(a);break;default:o=new Timeline.OriginalEventPainter(a)}return{width:e.width,eventSource:i,timeZone:"timeZone"in e?e.timeZone:0,ether:n,etherPainter:r,eventPainter:o}},Timeline.getDefaultTheme=function(){return null==Timeline._defaultTheme&&(Timeline._defaultTheme=Timeline.ClassicTheme.create(Timeline.getDefaultLocale())),Timeline._defaultTheme},Timeline.setDefaultTheme=function(e){Timeline._defaultTheme=e},Timeline.loadXML=function(e,t){var i=function(t){alert("Failed to load data xml from "+e+"\n"+t)},n=function(i){var n=i.responseXML;!n.documentElement&&i.responseStream&&n.load(i.responseStream),t(n,e)};SimileAjax.XmlHttp.get(e,i,n)},Timeline.loadJSON=function(url,f){var fError=function(e){alert("Failed to load json data from "+url+"\n"+e)},fDone=function(xmlhttp){f(eval("("+xmlhttp.responseText+")"),url)};SimileAjax.XmlHttp.get(url,fError,fDone)},Timeline._Impl=function(e,t,i,n){SimileAjax.WindowManager.initialize(),this._containerDiv=e,this._bandInfos=t,this._orientation=null==i?Timeline.HORIZONTAL:i,this._unit=null!=n?n:SimileAjax.NativeDateUnit,this._initialize()},Timeline._Impl.prototype.dispose=function(){for(var e=0;e<this._bands.length;e++)this._bands[e].dispose();this._bands=null,this._bandInfos=null,this._containerDiv.innerHTML=""},Timeline._Impl.prototype.getBandCount=function(){return this._bands.length},Timeline._Impl.prototype.getBand=function(e){return this._bands[e]},Timeline._Impl.prototype.layout=function(){this._distributeWidths()},Timeline._Impl.prototype.paint=function(){for(var e=0;e<this._bands.length;e++)this._bands[e].paint()},Timeline._Impl.prototype.getDocument=function(){return this._containerDiv.ownerDocument},Timeline._Impl.prototype.addDiv=function(e){this._containerDiv.appendChild(e)},Timeline._Impl.prototype.removeDiv=function(e){this._containerDiv.removeChild(e)},Timeline._Impl.prototype.isHorizontal=function(){return this._orientation==Timeline.HORIZONTAL},Timeline._Impl.prototype.isVertical=function(){return this._orientation==Timeline.VERTICAL},Timeline._Impl.prototype.getPixelLength=function(){return this._orientation==Timeline.HORIZONTAL?this._containerDiv.offsetWidth:this._containerDiv.offsetHeight},Timeline._Impl.prototype.getPixelWidth=function(){return this._orientation==Timeline.VERTICAL?this._containerDiv.offsetWidth:this._containerDiv.offsetHeight},Timeline._Impl.prototype.getUnit=function(){return this._unit},Timeline._Impl.prototype.loadXML=function(e,t){var i=this,n=function(t){alert("Failed to load data xml from "+e+"\n"+t),i.hideLoadingMessage()},r=function(n){try{var r=n.responseXML;!r.documentElement&&n.responseStream&&r.load(n.responseStream),t(r,e)}finally{i.hideLoadingMessage()}};this.showLoadingMessage(),window.setTimeout(function(){SimileAjax.XmlHttp.get(e,n,r)},0)},Timeline._Impl.prototype.loadJSON=function(url,f){var tl=this,fError=function(e){alert("Failed to load json data from "+url+"\n"+e),tl.hideLoadingMessage()},fDone=function(xmlhttp){try{f(eval("("+xmlhttp.responseText+")"),url)}finally{tl.hideLoadingMessage()}};this.showLoadingMessage(),window.setTimeout(function(){SimileAjax.XmlHttp.get(url,fError,fDone)},0)},Timeline._Impl.prototype._initialize=function(){var e=this._containerDiv,t=e.ownerDocument;for(e.className=e.className.split(" ").concat("timeline-container").join(" ");e.firstChild;)e.removeChild(e.firstChild);this._bands=[];for(var i=0;i<this._bandInfos.length;i++){var n=new Timeline._Band(this,this._bandInfos[i],i);this._bands.push(n)}this._distributeWidths();for(var i=0;i<this._bandInfos.length;i++){var r=this._bandInfos[i];"syncWith"in r&&this._bands[i].setSyncWithBand(this._bands[r.syncWith],"highlight"in r?r.highlight:!1)}var a=SimileAjax.Graphics.createMessageBubble(t);a.containerDiv.className="timeline-message-container",e.appendChild(a.containerDiv),a.contentDiv.className="timeline-message",a.contentDiv.innerHTML="<img src='"+Timeline.urlPrefix+"images/progress-running.gif' /> Loading...",this.showLoadingMessage=function(){a.containerDiv.style.display="block"},this.hideLoadingMessage=function(){a.containerDiv.style.display="none"}},Timeline._Impl.prototype._distributeWidths=function(){for(var e=this.getPixelLength(),t=this.getPixelWidth(),i=0,n=0;n<this._bands.length;n++){var r=this._bands[n],a=this._bandInfos[n],o=a.width,l=o.indexOf("%");if(l>0)var s=parseInt(o.substr(0,l)),h=s*t/100;else var h=parseInt(o);r.setBandShiftAndWidth(i,h),r.setViewLength(e),i+=h}},Timeline._Band=function(e,t,i){this._timeline=e,this._bandInfo=t,this._index=i,this._locale="locale"in t?t.locale:Timeline.getDefaultLocale(),this._timeZone="timeZone"in t?t.timeZone:0,this._labeller="labeller"in t?t.labeller:"createLabeller"in e.getUnit()?e.getUnit().createLabeller(this._locale,this._timeZone):new Timeline.GregorianDateLabeller(this._locale,this._timeZone),this._dragging=!1,this._changing=!1,this._originalScrollSpeed=5,this._scrollSpeed=this._originalScrollSpeed,this._onScrollListeners=[];var n=this;this._syncWithBand=null,this._syncWithBandHandler=function(){n._onHighlightBandScroll()},this._selectorListener=function(){n._onHighlightBandScroll()};var r=this._timeline.getDocument().createElement("div");r.className="timeline-band-input",this._timeline.addDiv(r),this._keyboardInput=document.createElement("input"),this._keyboardInput.type="text",r.appendChild(this._keyboardInput),SimileAjax.DOM.registerEventWithObject(this._keyboardInput,"keydown",this,"_onKeyDown"),SimileAjax.DOM.registerEventWithObject(this._keyboardInput,"keyup",this,"_onKeyUp"),this._div=this._timeline.getDocument().createElement("div"),this._div.className="timeline-band timeline-band-"+i,this._timeline.addDiv(this._div),SimileAjax.DOM.registerEventWithObject(this._div,"mousedown",this,"_onMouseDown"),SimileAjax.DOM.registerEventWithObject(this._div,"mousemove",this,"_onMouseMove"),SimileAjax.DOM.registerEventWithObject(this._div,"mouseup",this,"_onMouseUp"),SimileAjax.DOM.registerEventWithObject(this._div,"mouseout",this,"_onMouseOut"),SimileAjax.DOM.registerEventWithObject(this._div,"dblclick",this,"_onDblClick"),this._innerDiv=this._timeline.getDocument().createElement("div"),this._innerDiv.className="timeline-band-inner",this._div.appendChild(this._innerDiv),this._ether=t.ether,t.ether.initialize(e),this._etherPainter=t.etherPainter,t.etherPainter.initialize(this,e),this._eventSource=t.eventSource,this._eventSource&&(this._eventListener={onAddMany:function(){n._onAddMany()},onClear:function(){n._onClear()}},this._eventSource.addListener(this._eventListener)),this._eventPainter=t.eventPainter,t.eventPainter.initialize(this,e),this._decorators="decorators"in t?t.decorators:[];for(var a=0;a<this._decorators.length;a++)this._decorators[a].initialize(this,e)},Timeline._Band.SCROLL_MULTIPLES=5,Timeline._Band.prototype.dispose=function(){this.closeBubble(),this._eventSource&&(this._eventSource.removeListener(this._eventListener),this._eventListener=null,this._eventSource=null),this._timeline=null,this._bandInfo=null,this._labeller=null,this._ether=null,this._etherPainter=null,this._eventPainter=null,this._decorators=null,this._onScrollListeners=null,this._syncWithBandHandler=null,this._selectorListener=null,this._div=null,this._innerDiv=null,this._keyboardInput=null},Timeline._Band.prototype.addOnScrollListener=function(e){this._onScrollListeners.push(e)},Timeline._Band.prototype.removeOnScrollListener=function(e){for(var t=0;t<this._onScrollListeners.length;t++)if(this._onScrollListeners[t]==e){this._onScrollListeners.splice(t,1);break}},Timeline._Band.prototype.setSyncWithBand=function(e,t){this._syncWithBand&&this._syncWithBand.removeOnScrollListener(this._syncWithBandHandler),this._syncWithBand=e,this._syncWithBand.addOnScrollListener(this._syncWithBandHandler),this._highlight=t,this._positionHighlight()},Timeline._Band.prototype.getLocale=function(){return this._locale},Timeline._Band.prototype.getTimeZone=function(){return this._timeZone},Timeline._Band.prototype.getLabeller=function(){return this._labeller},Timeline._Band.prototype.getIndex=function(){return this._index},Timeline._Band.prototype.getEther=function(){return this._ether},Timeline._Band.prototype.getEtherPainter=function(){return this._etherPainter},Timeline._Band.prototype.getEventSource=function(){return this._eventSource},Timeline._Band.prototype.getEventPainter=function(){return this._eventPainter},Timeline._Band.prototype.layout=function(){this.paint()},Timeline._Band.prototype.paint=function(){this._etherPainter.paint(),this._paintDecorators(),this._paintEvents()},Timeline._Band.prototype.softLayout=function(){this.softPaint()},Timeline._Band.prototype.softPaint=function(){this._etherPainter.softPaint(),this._softPaintDecorators(),this._softPaintEvents()},Timeline._Band.prototype.setBandShiftAndWidth=function(e,t){var i=this._keyboardInput.parentNode,n=e+Math.floor(t/2);this._timeline.isHorizontal()?(this._div.style.top=e+"px",this._div.style.height=t+"px",i.style.top=n+"px",i.style.left="-1em"):(this._div.style.left=e+"px",this._div.style.width=t+"px",i.style.left=n+"px",i.style.top="-1em")},Timeline._Band.prototype.getViewWidth=function(){return this._timeline.isHorizontal()?this._div.offsetHeight:this._div.offsetWidth},Timeline._Band.prototype.setViewLength=function(e){this._viewLength=e,this._recenterDiv(),this._onChanging()},Timeline._Band.prototype.getViewLength=function(){return this._viewLength},Timeline._Band.prototype.getTotalViewLength=function(){return Timeline._Band.SCROLL_MULTIPLES*this._viewLength},Timeline._Band.prototype.getViewOffset=function(){return this._viewOffset},Timeline._Band.prototype.getMinDate=function(){return this._ether.pixelOffsetToDate(this._viewOffset)},Timeline._Band.prototype.getMaxDate=function(){return this._ether.pixelOffsetToDate(this._viewOffset+Timeline._Band.SCROLL_MULTIPLES*this._viewLength)},Timeline._Band.prototype.getMinVisibleDate=function(){return this._ether.pixelOffsetToDate(0)},Timeline._Band.prototype.getMaxVisibleDate=function(){return this._ether.pixelOffsetToDate(this._viewLength)},Timeline._Band.prototype.getCenterVisibleDate=function(){return this._ether.pixelOffsetToDate(this._viewLength/2)},Timeline._Band.prototype.setMinVisibleDate=function(e){this._changing||this._moveEther(Math.round(-this._ether.dateToPixelOffset(e)))},Timeline._Band.prototype.setMaxVisibleDate=function(e){this._changing||this._moveEther(Math.round(this._viewLength-this._ether.dateToPixelOffset(e)))},Timeline._Band.prototype.setCenterVisibleDate=function(e){this._changing||this._moveEther(Math.round(this._viewLength/2-this._ether.dateToPixelOffset(e)))},Timeline._Band.prototype.dateToPixelOffset=function(e){return this._ether.dateToPixelOffset(e)-this._viewOffset},Timeline._Band.prototype.pixelOffsetToDate=function(e){return this._ether.pixelOffsetToDate(e+this._viewOffset)},Timeline._Band.prototype.createLayerDiv=function(e,t){var i=this._timeline.getDocument().createElement("div");i.className="timeline-band-layer"+("string"==typeof t?" "+t:""),i.style.zIndex=e,this._innerDiv.appendChild(i);var n=this._timeline.getDocument().createElement("div");return n.className="timeline-band-layer-inner",n.style.cursor=SimileAjax.Platform.browser.isIE?"move":"-moz-grab",i.appendChild(n),n},Timeline._Band.prototype.removeLayerDiv=function(e){this._innerDiv.removeChild(e.parentNode)},Timeline._Band.prototype.scrollToCenter=function(e,t){var i=this._ether.dateToPixelOffset(e);i<-this._viewLength/2?this.setCenterVisibleDate(this.pixelOffsetToDate(i+this._viewLength)):i>3*this._viewLength/2&&this.setCenterVisibleDate(this.pixelOffsetToDate(i-this._viewLength)),this._autoScroll(Math.round(this._viewLength/2-this._ether.dateToPixelOffset(e)),t)},Timeline._Band.prototype.showBubbleForEvent=function(e){var t=this.getEventSource().getEvent(e);if(t){var i=this;this.scrollToCenter(t.getStart(),function(){i._eventPainter.showBubble(t)})}},Timeline._Band.prototype._onMouseDown=function(e,t){this.closeBubble(),this._dragging=!0,this._dragX=t.clientX,this._dragY=t.clientY},Timeline._Band.prototype._onMouseMove=function(e,t){if(this._dragging){var i=t.clientX-this._dragX,n=t.clientY-this._dragY;this._dragX=t.clientX,this._dragY=t.clientY,this._moveEther(this._timeline.isHorizontal()?i:n),this._positionHighlight()}},Timeline._Band.prototype._onMouseUp=function(){this._dragging=!1,this._keyboardInput.focus()},Timeline._Band.prototype._onMouseOut=function(e,t){var i=SimileAjax.DOM.getEventRelativeCoordinates(t,e);i.x+=this._viewOffset,(i.x<0||i.x>e.offsetWidth||i.y<0||i.y>e.offsetHeight)&&(this._dragging=!1)},Timeline._Band.prototype._onDblClick=function(e,t){var i=SimileAjax.DOM.getEventRelativeCoordinates(t,e),n=i.x-(this._viewLength/2-this._viewOffset);this._autoScroll(-n)},Timeline._Band.prototype._onKeyDown=function(e,t){if(!this._dragging){switch(t.keyCode){case 27:break;case 37:this._scrollSpeed=Math.min(50,Math.abs(1.05*this._scrollSpeed)),this._moveEther(this._scrollSpeed);break;case 38:this._moveEther(this._scrollSpeed,!0);break;case 39:this._scrollSpeed=-Math.min(50,Math.abs(1.05*this._scrollSpeed)),this._moveEther(this._scrollSpeed);break;case 40:this._moveEther(-this._scrollSpeed,!0);break;default:return!0}return this.closeBubble(),SimileAjax.DOM.cancelEvent(t),!1}return!0},Timeline._Band.prototype._onKeyUp=function(e,t){if(!this._dragging){switch(this._scrollSpeed=this._originalScrollSpeed,t.keyCode){case 35:this.setCenterVisibleDate(this._eventSource.getLatestDate());break;case 36:this.setCenterVisibleDate(this._eventSource.getEarliestDate());break;case 33:this._autoScroll(this._timeline.getPixelLength());break;case 34:this._autoScroll(-this._timeline.getPixelLength());break;default:return!0}return this.closeBubble(),SimileAjax.DOM.cancelEvent(t),!1}return!0},Timeline._Band.prototype._autoScroll=function(e,t){var i=this,n=SimileAjax.Graphics.createAnimation(function(e,t){i._moveEther(t)},0,e,1e3,t);n.run()},Timeline._Band.prototype._moveEther=function(e,t){if(this.closeBubble(),t)for(var i=this._div.getElementsByClassName("timeline-band-layer timeline-band-events")[1].getElementsByClassName("timeline-band-layer-inner")[0].children,n=0;n<i.length;n++)if(this._timeline.isHorizontal()){var r=parseInt(i[n].style.top);r+=e,i[n].style.top=r+"px"}else{var r=parseInt(i[n].style.width);r+=e,i[n].style.width=r+"px"}else this._viewOffset+=e,this._ether.shiftPixels(-e),this._timeline.isHorizontal()?this._div.style.left=this._viewOffset+"px":this._div.style.top=this._viewOffset+"px";this._viewOffset>.5*-this._viewLength||this._viewOffset<-this._viewLength*(Timeline._Band.SCROLL_MULTIPLES-1.5)?this._recenterDiv():this.softLayout(),this._onChanging()},Timeline._Band.prototype._onChanging=function(){this._changing=!0,this._fireOnScroll(),this._setSyncWithBandDate(),this._changing=!1},Timeline._Band.prototype._fireOnScroll=function(){for(var e=0;e<this._onScrollListeners.length;e++)this._onScrollListeners[e](this)},Timeline._Band.prototype._setSyncWithBandDate=function(){if(this._syncWithBand){var e=this._ether.pixelOffsetToDate(this.getViewLength()/2);this._syncWithBand.setCenterVisibleDate(e)}},Timeline._Band.prototype._onHighlightBandScroll=function(){if(this._syncWithBand){var e=this._syncWithBand.getCenterVisibleDate(),t=this._ether.dateToPixelOffset(e);this._moveEther(Math.round(this._viewLength/2-t)),this._highlight&&this._etherPainter.setHighlight(this._syncWithBand.getMinVisibleDate(),this._syncWithBand.getMaxVisibleDate())}},Timeline._Band.prototype._onAddMany=function(){this._paintEvents()},Timeline._Band.prototype._onClear=function(){this._paintEvents()},Timeline._Band.prototype._positionHighlight=function(){if(this._syncWithBand){var e=this._syncWithBand.getMinVisibleDate(),t=this._syncWithBand.getMaxVisibleDate();this._highlight&&this._etherPainter.setHighlight(e,t)}},Timeline._Band.prototype._recenterDiv=function(){this._viewOffset=-this._viewLength*(Timeline._Band.SCROLL_MULTIPLES-1)/2,this._timeline.isHorizontal()?(this._div.style.left=this._viewOffset+"px",this._div.style.width=Timeline._Band.SCROLL_MULTIPLES*this._viewLength+"px"):(this._div.style.top=this._viewOffset+"px",this._div.style.height=Timeline._Band.SCROLL_MULTIPLES*this._viewLength+"px"),this.layout()},Timeline._Band.prototype._paintEvents=function(){this._eventPainter.paint()},Timeline._Band.prototype._softPaintEvents=function(){this._eventPainter.softPaint()},Timeline._Band.prototype._paintDecorators=function(){for(var e=0;e<this._decorators.length;e++)this._decorators[e].paint()},Timeline._Band.prototype._softPaintDecorators=function(){for(var e=0;e<this._decorators.length;e++)this._decorators[e].softPaint()},Timeline._Band.prototype.closeBubble=function(){SimileAjax.WindowManager.cancelPopups()},Timeline.NativeDateUnit=new Object,Timeline.NativeDateUnit.createLabeller=function(e,t){return new Timeline.GregorianDateLabeller(e,t)},Timeline.NativeDateUnit.makeDefaultValue=function(){return new Date},Timeline.NativeDateUnit.cloneValue=function(e){return new Date(e.getTime())},Timeline.NativeDateUnit.getParser=function(e){return"string"==typeof e&&(e=e.toLowerCase()),"iso8601"==e||"iso 8601"==e?Timeline.DateTime.parseIso8601DateTime:Timeline.DateTime.parseGregorianDateTime},Timeline.NativeDateUnit.parseFromObject=function(e){return Timeline.DateTime.parseGregorianDateTime(e)},Timeline.NativeDateUnit.toNumber=function(e){return e.getTime()},Timeline.NativeDateUnit.fromNumber=function(e){return new Date(e)},Timeline.NativeDateUnit.compare=function(e,t){var i,n;return i="object"==typeof e?e.getTime():Number(e),n="object"==typeof t?t.getTime():Number(t),i-n},Timeline.NativeDateUnit.earlier=function(e,t){return Timeline.NativeDateUnit.compare(e,t)<0?e:t},Timeline.NativeDateUnit.later=function(e,t){return Timeline.NativeDateUnit.compare(e,t)>0?e:t},Timeline.NativeDateUnit.change=function(e,t){return new Date(e.getTime()+t)};