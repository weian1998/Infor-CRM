//>>built
require({cache:{"dgrid/Selection":function(){define("dgrid/Selection",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/Deferred","dojo/on","dojo/has","dojo/aspect","./List","dojo/has!touch?./util/touch","put-selector/put","dojo/query","dojo/_base/sniff"],function(_1,_2,_3,on,_4,_5,_6,_7,_8){_4.add("dom-comparedocumentposition",function(_9,_a,_b){return !!_b.compareDocumentPosition;});_4.add("pointer",function(_c,_d,_e){return "onpointerdown" in _e?"pointer":"onmspointerdown" in _e?"MSPointer":false;});_4.add("css-user-select",function(_f,doc,_10){var _11=_10.style,_12=["Khtml","O","ms","Moz","Webkit"],i=_12.length,_13="userSelect";do{if(typeof _11[_13]!=="undefined"){return _13;}}while(i--&&(_13=_12[i]+"UserSelect"));return false;});_4.add("dom-selectstart",typeof document.onselectstart!=="undefined");var _14=_4("mac")?"metaKey":"ctrlKey",_15=_4("css-user-select"),_16=_4("pointer"),_17=_16&&_16.slice(0,2)==="MS",_18=_16?_16+(_17?"Down":"down"):"mousedown",_19=_16?_16+(_17?"Up":"up"):"mouseup";function _1a(_1b,_1c){var _1d=_1b.unselectable=_1c?"on":"",_1e=_1b.getElementsByTagName("*"),i=_1e.length;while(--i){if(_1e[i].tagName==="INPUT"||_1e[i].tagName==="TEXTAREA"){continue;}_1e[i].unselectable=_1d;}};function _1f(_20,_21){var _22=_20.bodyNode,_23=_21?"text":_4("ff")<21?"-moz-none":"none";if(_15&&_15!=="msUserSelect"){_22.style[_15]=_23;}else{if(_4("dom-selectstart")){if(!_21&&!_20._selectstartHandle){_20._selectstartHandle=on(_22,"selectstart",function(evt){var tag=evt.target&&evt.target.tagName;if(tag!=="INPUT"&&tag!=="TEXTAREA"){evt.preventDefault();}});}else{if(_21&&_20._selectstartHandle){_20._selectstartHandle.remove();delete _20._selectstartHandle;}}}else{_1a(_22,!_21);if(!_21&&!_20._unselectableHandle){_20._unselectableHandle=_5.after(_20,"renderRow",function(row){_1a(row,true);return row;});}else{if(_21&&_20._unselectableHandle){_20._unselectableHandle.remove();delete _20._unselectableHandle;}}}}};return _2(null,{selectionDelegate:".dgrid-row",selectionEvents:_18+","+_19+",dgrid-cellfocusin",selectionTouchEvents:_4("touch")?_7.tap:null,deselectOnRefresh:true,allowSelectAll:false,selection:{},selectionMode:"extended",allowTextSelection:undefined,_selectionTargetType:"rows",create:function(){this.selection={};return this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this._initSelectionEvents();var _24=this.selectionMode;this.selectionMode="";this._setSelectionMode(_24);},destroy:function(){this.inherited(arguments);if(this._selectstartHandle){this._selectstartHandle.remove();}if(this._unselectableHandle){this._unselectableHandle.remove();}if(this._removeDeselectSignals){this._removeDeselectSignals();}},_setSelectionMode:function(_25){if(_25==this.selectionMode){return;}this.clearSelection();this.selectionMode=_25;this._selectionHandlerName="_"+_25+"SelectionHandler";this._setAllowTextSelection(this.allowTextSelection);},setSelectionMode:function(_26){_1.deprecated("setSelectionMode(...)","use set(\"selectionMode\", ...) instead","dgrid 0.4");this.set("selectionMode",_26);},_setAllowTextSelection:function(_27){if(typeof _27!=="undefined"){_1f(this,_27);}else{_1f(this,this.selectionMode==="none");}this.allowTextSelection=_27;},_handleSelect:function(_28,_29){if(!this[this._selectionHandlerName]||!this.allowSelect(this.row(_29))||(_28.type==="dgrid-cellfocusin"&&_28.parentType==="mousedown")||(_28.type===_19&&_29!=this._waitForMouseUp)){return;}this._waitForMouseUp=null;this._selectionTriggerEvent=_28;if(!_28.keyCode||!_28.ctrlKey||_28.keyCode==32){if(!_28.shiftKey&&_28.type===_18&&this.isSelected(_29)){this._waitForMouseUp=_29;}else{this[this._selectionHandlerName](_28,_29);}}this._selectionTriggerEvent=null;},_singleSelectionHandler:function(_2a,_2b){var _2c=_2a.keyCode?_2a.ctrlKey:_2a[_14];if(this._lastSelected===_2b){this.select(_2b,null,!_2c||!this.isSelected(_2b));}else{this.clearSelection();this.select(_2b);this._lastSelected=_2b;}},_multipleSelectionHandler:function(_2d,_2e){var _2f=this._lastSelected,_30=_2d.keyCode?_2d.ctrlKey:_2d[_14],_31;if(!_2d.shiftKey){_31=_30?null:true;_2f=null;}this.select(_2e,_2f,_31);if(!_2f){this._lastSelected=_2e;}},_extendedSelectionHandler:function(_32,_33){if(_32.button===2?!this.isSelected(_33):!(_32.keyCode?_32.ctrlKey:_32[_14])){this.clearSelection(null,true);}this._multipleSelectionHandler(_32,_33);},_toggleSelectionHandler:function(_34,_35){this.select(_35,null,null);},_initSelectionEvents:function(){var _36=this,_37=this.contentNode,_38=this.selectionDelegate;this._selectionEventQueues={deselect:[],select:[]};if(_4("touch")&&!_4("pointer")&&this.selectionTouchEvents){on(_37,_7.selector(_38,this.selectionTouchEvents),function(evt){_36._handleSelect(evt,this);_36._ignoreMouseSelect=this;});on(_37,on.selector(_38,this.selectionEvents),function(_39){if(_36._ignoreMouseSelect!==this){_36._handleSelect(_39,this);}else{if(_39.type===_19){_36._ignoreMouseSelect=null;}}});}else{on(_37,on.selector(_38,this.selectionEvents),function(_3a){_36._handleSelect(_3a,this);});}if(this.addKeyHandler){this.addKeyHandler(32,function(_3b){_36._handleSelect(_3b,_3b.target);});}if(this.allowSelectAll){this.on("keydown",function(_3c){if(_3c[_14]&&_3c.keyCode==65&&!/\bdgrid-input\b/.test(_3c.target.className)){_3c.preventDefault();_36[_36.allSelected?"clearSelection":"selectAll"]();}});}if(this._setStore){_5.after(this,"_setStore",function(){_36._updateDeselectionAspect();});}this._updateDeselectionAspect();},_updateDeselectionAspect:function(){var _3d=this,_3e=this.store,_3f,_40;function _41(_42,_43,_44){var id=_43||(_42&&_42[_3d.idProperty||"id"]);if(id!=null){var row=_3d.row(id),_45=row&&_3d.selection[row.id];if(_45){_3d[_44](row,null,_45);}}};if(this._removeDeselectSignals){this._removeDeselectSignals();}if(_3e&&_3e.notify){_3f=_5.before(_3e,"notify",function(_46,_47){if(!_46){_41(_46,_47,"deselect");}});_40=_5.after(_3e,"notify",function(_48,_49){_41(_48,_49,"select");},true);this._removeDeselectSignals=function(){_3f.remove();_40.remove();};}else{_3f=_5.before(this,"removeRow",function(_4a,_4b){var row;if(!_4b){row=this.row(_4a);if(row&&(row.id in this.selection)){this.deselect(row);}}});this._removeDeselectSignals=function(){_3f.remove();};}},allowSelect:function(row){return true;},_fireSelectionEvent:function(_4c){var _4d=this._selectionEventQueues[_4c],_4e=this._selectionTriggerEvent,_4f;_4f={bubbles:true,grid:this};if(_4e){_4f.parentType=_4e.type;}_4f[this._selectionTargetType]=_4d;on.emit(this.contentNode,"dgrid-"+_4c,_4f);this._selectionEventQueues[_4c]=[];},_fireSelectionEvents:function(){var _50=this._selectionEventQueues,_51;for(_51 in _50){if(_50[_51].length){this._fireSelectionEvent(_51);}}},_select:function(row,_52,_53){var _54,_55,_56,_57,_58;if(typeof _53==="undefined"){_53=true;}if(!row.element){row=this.row(row);}if(_53===false||this.allowSelect(row)){_54=this.selection;_55=!!_54[row.id];if(_53===null){_53=!_55;}_56=row.element;if(!_53&&!this.allSelected){delete this.selection[row.id];}else{_54[row.id]=_53;}if(_56){if(_53){_8(_56,".dgrid-selected"+(this.addUiClasses?".ui-state-active":""));}else{_8(_56,"!dgrid-selected!ui-state-active");}}if(_53!==_55&&_56){this._selectionEventQueues[(_53?"":"de")+"select"].push(row);}if(_52){if(!_52.element){_52=this.row(_52);}if(!_52){this._lastSelected=_56;return;}_57=_52.element;if(_57){_58=this._determineSelectionDirection(_56,_57);if(!_58){_57=document.getElementById(_57.id);_58=this._determineSelectionDirection(_56,_57);}while(row.element!=_57&&(row=this[_58](row))){this._select(row,null,_53);}}}}},_determineSelectionDirection:_4("dom-comparedocumentposition")?function(_59,to){var _5a=to.compareDocumentPosition(_59);if(_5a&1){return false;}return _5a===2?"down":"up";}:function(_5b,to){if(to.sourceIndex<1){return false;}return to.sourceIndex>_5b.sourceIndex?"down":"up";},select:function(row,_5c,_5d){this._select(row,_5c,_5d);this._fireSelectionEvents();},deselect:function(row,_5e){this.select(row,_5e,false);},clearSelection:function(_5f,_60){this.allSelected=false;for(var id in this.selection){if(_5f!==id){this._select(id,null,false);}}if(!_60){this._lastSelected=null;}this._fireSelectionEvents();},selectAll:function(){this.allSelected=true;this.selection={};for(var i in this._rowIdToObject){var row=this.row(this._rowIdToObject[i]);this._select(row.id,null,true);}this._fireSelectionEvents();},isSelected:function(_61){if(typeof _61==="undefined"||_61===null){return false;}if(!_61.element){_61=this.row(_61);}return (_61.id in this.selection)?!!this.selection[_61.id]:this.allSelected&&(!_61.data||this.allowSelect(_61));},refresh:function(){if(this.deselectOnRefresh){this.clearSelection();}this._lastSelected=null;return this.inherited(arguments);},renderArray:function(){var _62=this,_63=this.inherited(arguments);_3.when(_63,function(_64){var _65=_62.selection,i,row,_66;for(i=0;i<_64.length;i++){row=_62.row(_64[i]);_66=row.id in _65?_65[row.id]:_62.allSelected;if(_66){_62._select(row,null,_66);}}_62._fireSelectionEvents();});return _63;}});});},"xstyle/has-class":function(){define("xstyle/has-class",["dojo/has"],function(has){var _67={};return function(){var _68,_69=arguments;for(var i=0;i<_69.length;i++){var _68=_69[i];if(!_67[_68]){_67[_68]=true;var _6a=_68.match(/^(no-)?(.+?)((-[\d\.]+)(-[\d\.]+)?)?$/),_6b=has(_6a[2]),_6c=-_6a[4];if((_6c>0?_6c<=_6b&&(-_6a[5]||_6c)>=_6b:!!_6b)==!_6a[1]){document.documentElement.className+=" has-"+_68;}}}};});},"dgrid/OnDemandGrid":function(){define("dgrid/OnDemandGrid",["dojo/_base/declare","./Grid","./OnDemandList"],function(_6d,_6e,_6f){return _6d([_6e,_6f],{});});},"dgrid/Grid":function(){define("dgrid/Grid",["dojo/_base/kernel","dojo/_base/declare","dojo/on","dojo/has","put-selector/put","./List","./util/misc","dojo/_base/sniff"],function(_70,_71,_72,has,put,_73,_74){var _75=has("ie")<8&&!has("quirks");function _76(_77,_78){if(_78&&_78.nodeType){_77.appendChild(_78);}};function _79(str){return _74.escapeCssIdentifier(str,"-");};var _7a=_71(_73,{columns:null,cellNavigation:true,tabableHeader:true,showHeader:true,column:function(_7b){if(typeof _7b!="object"){return this.columns[_7b];}else{return this.cell(_7b).column;}},listType:"grid",cell:function(_7c,_7d){if(_7c.column&&_7c.element){return _7c;}if(_7c.target&&_7c.target.nodeType){_7c=_7c.target;}var _7e;if(_7c.nodeType){var _7f;do{if(this._rowIdToObject[_7c.id]){break;}var _80=_7c.columnId;if(_80){_7d=_80;_7e=_7c;break;}_7c=_7c.parentNode;}while(_7c&&_7c!=this.domNode);}if(!_7e&&typeof _7d!="undefined"){var row=this.row(_7c),_81=row&&row.element;if(_81){var _82=_81.getElementsByTagName("td");for(var i=0;i<_82.length;i++){if(_82[i].columnId==_7d){_7e=_82[i];break;}}}}if(_7c!=null){return {row:row||this.row(_7c),column:_7d&&this.column(_7d),element:_7e};}},createRowCells:function(tag,_83,_84,_85){var row=put("table.dgrid-row-table[role=presentation]"),_86=this.cellNavigation,_87=(has("ie")<9||has("quirks"))?put(row,"tbody"):row,tr,si,sl,i,l,_88,_89,id,_8a,_8b,_8c,_8d,_8e,_8f;_84=_84||this.subRows;for(si=0,sl=_84.length;si<sl;si++){_88=_84[si];tr=put(_87,"tr");if(_88.className){put(tr,"."+_88.className);}for(i=0,l=_88.length;i<l;i++){_89=_88[i];id=_89.id;_8a=_89.field?".field-"+_79(_89.field):"";_8b=typeof _89.className==="function"?_89.className(_85):_89.className;if(_8b){_8a+="."+_8b;}_8c=put(tag+(".dgrid-cell.dgrid-cell-padding"+(id?".dgrid-column-"+_79(id):"")+_8a.replace(/ +/g,"."))+"[role="+(tag==="th"?"columnheader":"gridcell")+"]");_8c.columnId=id;if(_75){_8d=put(_8c,"!dgrid-cell-padding div.dgrid-cell-padding");_8c.contents=_8d;}else{_8d=_8c;}_8e=_89.colSpan;if(_8e){_8c.colSpan=_8e;}_8f=_89.rowSpan;if(_8f){_8c.rowSpan=_8f;}_83(_8d,_89);tr.appendChild(_8c);}}return row;},left:function(_90,_91){if(!_90.element){_90=this.cell(_90);}return this.cell(this._move(_90,-(_91||1),"dgrid-cell"));},right:function(_92,_93){if(!_92.element){_92=this.cell(_92);}return this.cell(this._move(_92,_93||1,"dgrid-cell"));},renderRow:function(_94,_95){var _96=this;var row=this.createRowCells("td",function(td,_97){var _98=_94;if(_97.get){_98=_97.get(_94);}else{if("field" in _97&&_97.field!="_item"){_98=_98[_97.field];}}if(_97.renderCell){_76(td,_97.renderCell(_94,_98,td,_95));}else{_99.call(_97,_94,_98,td,_95);}},_95&&_95.subRows,_94);return put("div[role=row]>",row);},renderHeader:function(){var _9a=this,_9b=this.columns,_9c=this.headerNode,i=_9c.childNodes.length;_9c.setAttribute("role","row");while(i--){put(_9c.childNodes[i],"!");}var row=this.createRowCells("th",function(th,_9d){var _9e=_9d.headerNode=th;if(_75){th=th.parentNode;}var _9f=_9d.field;if(_9f){th.field=_9f;}if(_9d.renderHeaderCell){_76(_9e,_9d.renderHeaderCell(_9e));}else{if("label" in _9d||_9d.field){_9e.appendChild(document.createTextNode("label" in _9d?_9d.label:_9d.field));}}if(_9d.sortable!==false&&_9f&&_9f!="_item"){th.sortable=true;th.className+=" dgrid-sortable";}},this.subRows&&this.subRows.headerRows);this._rowIdToObject[row.id=this.id+"-header"]=this.columns;_9c.appendChild(row);if(this._sortListener){this._sortListener.remove();}this._sortListener=_72(row,"click,keydown",function(_a0){if(_a0.type=="click"||_a0.keyCode==32||(!has("opera")&&_a0.keyCode==13)){var _a1=_a0.target,_a2,_a3,_a4,_a5;do{if(_a1.sortable){_a4=[{attribute:(_a2=_a1.field||_a1.columnId),descending:(_a3=_9a._sort[0])&&_a3.attribute==_a2&&!_a3.descending}];_a5={bubbles:true,cancelable:true,grid:_9a,parentType:_a0.type,sort:_a4};if(_72.emit(_a0.target,"dgrid-sort",_a5)){_9a._sortNode=_a1;_9a.set("sort",_a4);}break;}}while((_a1=_a1.parentNode)&&_a1!=_9c);}});},resize:function(){var _a6=this.headerNode.firstChild,_a7=this.contentNode,_a8;this.inherited(arguments);if(!has("ie")||(has("ie")>7&&!has("quirks"))){_a7.style.width="";if(_a7&&_a6){if((_a8=_a6.offsetWidth)!=_a7.offsetWidth){_a7.style.width=_a8+"px";}}}},destroy:function(){this._destroyColumns();if(this._sortListener){this._sortListener.remove();}this.inherited(arguments);},_setSort:function(_a9,_aa){this.inherited(arguments);this.updateSortArrow(this._sort);},_findSortArrowParent:function(_ab){var _ac=this.columns;for(var i in _ac){var _ad=_ac[i];if(_ad.field==_ab){return _ad.headerNode;}}},updateSortArrow:function(_ae,_af){if(this._lastSortedArrow){put(this._lastSortedArrow,"<!dgrid-sort-up!dgrid-sort-down");put(this._lastSortedArrow,"!");delete this._lastSortedArrow;}if(_af){this._sort=_ae;}if(!_ae[0]){return;}var _b0=_ae[0].attribute,_b1=_ae[0].descending,_b2=this._sortNode||this._findSortArrowParent(_b0),_b3;delete this._sortNode;if(_b2){_b2=_b2.contents||_b2;_b3=this._lastSortedArrow=put("div.dgrid-sort-arrow.ui-icon[role=presentation]");_b3.innerHTML="&nbsp;";_b2.insertBefore(_b3,_b2.firstChild);put(_b2,_b1?".dgrid-sort-down":".dgrid-sort-up");this.resize();}},styleColumn:function(_b4,css){return this.addCssRule("#"+_74.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+_79(_b4),css);},_configColumns:function(_b5,_b6){var _b7=[],_b8=_b6 instanceof Array;function _b9(_ba,_bb){if(typeof _ba=="string"){_b6[_bb]=_ba={label:_ba};}if(!_b8&&!_ba.field){_ba.field=_bb;}_bb=_ba.id=_ba.id||(isNaN(_bb)?_bb:(_b5+_bb));if(this._configColumn){this._configColumn(_ba,_bb,_b6,_b5);_bb=_ba.id;}if(_b8){this.columns[_bb]=_ba;}_ba.grid=this;if(typeof _ba.init==="function"){_ba.init();}_b7.push(_ba);};_74.each(_b6,_b9,this);return _b8?_b6:_b7;},_destroyColumns:function(){var _bc=this.subRows,_bd=_bc&&_bc.length,i,j,_be,len;this.cleanup();for(i=0;i<_bd;i++){for(j=0,len=_bc[i].length;j<len;j++){_be=_bc[i][j];if(typeof _be.destroy==="function"){_be.destroy();}}}},configStructure:function(){var _bf=this.subRows,_c0=this._columns=this.columns;this.columns=!_c0||_c0 instanceof Array?{}:_c0;if(_bf){for(var i=0;i<_bf.length;i++){_bf[i]=this._configColumns(i+"-",_bf[i]);}}else{this.subRows=[this._configColumns("",_c0)];}},_getColumns:function(){return this._columns||this.columns;},_setColumns:function(_c1){this._destroyColumns();this.subRows=null;this.columns=_c1;this._updateColumns();},_setSubRows:function(_c2){this._destroyColumns();this.subRows=_c2;this._updateColumns();},setColumns:function(_c3){_70.deprecated("setColumns(...)","use set(\"columns\", ...) instead","dgrid 0.4");this.set("columns",_c3);},setSubRows:function(_c4){_70.deprecated("setSubRows(...)","use set(\"subRows\", ...) instead","dgrid 0.4");this.set("subRows",_c4);},_updateColumns:function(){this.configStructure();this.renderHeader();this.refresh();this._lastCollection&&this.renderArray(this._lastCollection);if(this._started){if(this._sort&&this._sort.length){this.updateSortArrow(this._sort);}else{this.resize();}}}});function _99(_c5,_c6,td,_c7){if(this.formatter){var _c8=this.formatter,_c9=this.grid.formatterScope;td.innerHTML=typeof _c8==="string"&&_c9?_c9[_c8](_c6,_c5):this.formatter(_c6,_c5);}else{if(_c6!=null){td.appendChild(document.createTextNode(_c6));}}};_7a.appendIfNode=_76;_7a.defaultRenderCell=_99;return _7a;});},"dgrid/_StoreMixin":function(){define("dgrid/_StoreMixin",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred","dojo/on","dojo/aspect","put-selector/put"],function(_ca,_cb,_cc,_cd,_ce,_cf,put){function _d0(_d1){return _d1;};function _d2(err){if(typeof err!=="object"){err=new Error(err);}else{if(err.dojoType==="cancel"){return;}}err.grid=this;if(_ce.emit(this.domNode,"dgrid-error",{grid:this,error:err,cancelable:true,bubbles:true})){console.error(err);}};return _cb(null,{store:null,query:null,queryOptions:null,getBeforePut:true,noDataMessage:"",loadingMessage:"",constructor:function(){this.query={};this.queryOptions={};this.dirty={};this._updating={};this._columnsWithSet={};_cf.before(this,"configStructure",_cc.hitch(this,function(){this._columnsWithSet={};}));},postCreate:function(){this.inherited(arguments);if(this.store){this._updateNotifyHandle(this.store);}},destroy:function(){this.inherited(arguments);if(this._notifyHandle){this._notifyHandle.remove();}},_configColumn:function(_d3){if(_d3.set){this._columnsWithSet[_d3.field]=_d3;}this.inherited(arguments);},_updateNotifyHandle:function(_d4){if(this._notifyHandle){this._notifyHandle.remove();delete this._notifyHandle;}if(_d4&&typeof _d4.notify==="function"){this._notifyHandle=_cf.after(_d4,"notify",_cc.hitch(this,"_onNotify"),true);var _d5=this.get("sort");if(!_d5||!_d5.length){}}},_setStore:function(_d6,_d7,_d8){this._updateNotifyHandle(_d6);this.store=_d6;this.dirty={};this.set("query",_d7,_d8);},_setQuery:function(_d9,_da){var _db=_da&&_da.sort;this.query=_d9!==undefined?_d9:this.query;this.queryOptions=_da||this.queryOptions;_db?this.set("sort",_db):this.refresh();},setStore:function(_dc,_dd,_de){_ca.deprecated("setStore(...)","use set(\"store\", ...) instead","dgrid 0.4");this.set("store",_dc,_dd,_de);},setQuery:function(_df,_e0){_ca.deprecated("setQuery(...)","use set(\"query\", ...) instead","dgrid 0.4");this.set("query",_df,_e0);},_getQueryOptions:function(){var _e1=_cc.delegate(this.queryOptions,{});if(typeof (this._sort)==="function"||this._sort.length){_e1.sort=this._sort;}return _e1;},_getQuery:function(){var q=this.query;return typeof q=="object"&&q!=null?_cc.delegate(q,{}):q;},_setSort:function(_e2,_e3){if(this.store){this._lastCollection=null;}this.inherited(arguments);},_onNotify:function(_e4,_e5){this.inherited(arguments);if(_e4&&this._numObservers<1){this.refresh({keepScrollPosition:true});}},insertRow:function(_e6,_e7,_e8,i,_e9){var _ea=this.store,_eb=this.dirty,id=_ea&&_ea.getIdentity(_e6),_ec;if(id in _eb&&!(id in this._updating)){_ec=_eb[id];}if(_ec){_e6=_cc.delegate(_e6,_ec);}return this.inherited(arguments);},updateDirty:function(id,_ed,_ee){var _ef=this.dirty,_f0=_ef[id];if(!_f0){_f0=_ef[id]={};}_f0[_ed]=_ee;},setDirty:function(id,_f1,_f2){_ca.deprecated("setDirty(...)","use updateDirty() instead","dgrid 0.4");this.updateDirty(id,_f1,_f2);},save:function(){var _f3=this,_f4=this.store,_f5=this.dirty,dfd=new _cd(),_f6=dfd.promise,_f7=function(id){var _f8;return (_f3.getBeforePut||!(_f8=_f3.row(id).data))?function(){return _f4.get(id);}:function(){return _f8;};};function _f9(id,_fa){return function(_fb){var _fc=_f3._columnsWithSet,_fd=_f3._updating,key,_fe;if(typeof _fb.set==="function"){_fb.set(_fa);}else{for(key in _fa){_fb[key]=_fa[key];}}for(key in _fc){_fe=_fc[key].set(_fb);if(_fe!==undefined){_fb[key]=_fe;}}_fd[id]=true;return _cd.when(_f4.put(_fb),function(){delete _f5[id];delete _fd[id];});};};for(var id in _f5){var put=_f9(id,_f5[id]);_f6=_f6.then(_f7(id)).then(put);}dfd.resolve();return _f6;},revert:function(){this.dirty={};this.refresh();},_trackError:function(_ff){var _100;if(typeof _ff=="string"){_ff=_cc.hitch(this,_ff);}try{_100=_ff();}catch(err){_d2.call(this,err);}return _cd.when(_100,_d0,_cc.hitch(this,_d2));},newRow:function(){var row=this.inherited(arguments);if(this.noDataNode){put(this.noDataNode,"!");delete this.noDataNode;}return row;},removeRow:function(_101,_102){var row={element:_101};if(!_102&&this.noDataMessage&&(this.up(row).element===_101)&&(this.down(row).element===_101)){this.noDataNode=put(this.contentNode,"div.dgrid-no-data");this.noDataNode.innerHTML=this.noDataMessage;}return this.inherited(arguments);}});});},"put-selector/put":function(){(function(_103){var _104,_105=/[-+,> ]/;_103("put-selector/put",[],_104=function(doc,_106){"use strict";_105=_106||_105;var _107=/(?:\s*([-+ ,<>]))?\s*(\.|!\.?|#)?([-\w%$|]+)?(?:\[([^\]=]+)=?['"]?([^\]'"]*)['"]?\])?/g,_108,_109,_10a=false,doc=doc||document,_10b=typeof doc.createElement=="object";function _10c(_10d,text){_10d.appendChild(doc.createTextNode(text));};function put(_10e){var _10f,_110,_111,_112,_113,args=arguments,_114=args[0];function _115(){if(_113&&_112&&_113!=_112){(_112==_10e&&(_10f||(_10f=_105.test(_116)&&doc.createDocumentFragment()))?_10f:_112).insertBefore(_113,_111||null);}};for(var i=0;i<args.length;i++){var _116=args[i];if(typeof _116=="object"){_110=false;if(_116 instanceof Array){_113=doc.createDocumentFragment();for(var key=0;key<_116.length;key++){_113.appendChild(put(_116[key]));}_116=_113;}if(_116.nodeType){_113=_116;_115();_112=_116;_111=0;}else{for(var key in _116){_113[key]=_116[key];}}}else{if(_110){_110=false;_10c(_113,_116);}else{if(i<1){_10e=null;}_110=true;var _117=_116.replace(_107,function(t,_118,_119,_11a,_11b,_11c){if(_118){_115();if(_118=="-"||_118=="+"){_112=(_111=(_113||_112)).parentNode;_113=null;if(_118=="+"){_111=_111.nextSibling;}}else{if(_118=="<"){_112=_113=(_113||_112).parentNode;}else{if(_118==","){_112=_10e;}else{if(_113){_112=_113;}}_113=null;}_111=0;}if(_113){_112=_113;}}var tag=!_119&&_11a;if(tag||(!_113&&(_119||_11b))){if(tag=="$"){_10c(_112,args[++i]);}else{tag=tag||put.defaultTag;var _11d=_10b&&args[i+1]&&args[i+1].name;if(_11d){tag="<"+tag+" name=\""+_11d+"\">";}_113=_10a&&~(_109=tag.indexOf("|"))?doc.createElementNS(_10a[tag.slice(0,_109)],tag.slice(_109+1)):doc.createElement(tag);}}if(_119){if(_11a=="$"){_11a=args[++i];}if(_119=="#"){_113.id=_11a;}else{var _11e=_113.className;var _11f=_11e&&(" "+_11e+" ").replace(" "+_11a+" "," ");if(_119=="."){_113.className=_11e?(_11f+_11a).substring(1):_11a;}else{if(_116=="!"){var _120;if(_10b){put("div",_113,"<").innerHTML="";}else{if(_120=_113.parentNode){_120.removeChild(_113);}}}else{_11f=_11f.substring(1,_11f.length-1);if(_11f!=_11e){_113.className=_11f;}}}}}if(_11b){if(_11c=="$"){_11c=args[++i];}if(_11b=="style"){_113.style.cssText=_11c;}else{var _121=_11b.charAt(0)=="!"?(_11b=_11b.substring(1))&&"removeAttribute":"setAttribute";_11c=_11c===""?_11b:_11c;_10a&&~(_109=_11b.indexOf("|"))?_113[_121+"NS"](_10a[_11b.slice(0,_109)],_11b.slice(_109+1),_11c):_113[_121](_11b,_11c);}}return "";});if(_117){throw new SyntaxError("Unexpected char "+_117+" in "+_116);}_115();_112=_114=_113||_112;}}}if(_10e&&_10f){_10e.appendChild(_10f);}return _114;};put.addNamespace=function(name,uri){if(doc.createElementNS){(_10a||(_10a={}))[name]=uri;}else{doc.namespaces.add(name,uri);}};put.defaultTag="div";put.forDocument=_104;return put;});})(function(id,deps,_122){_122=_122||deps;if(typeof define==="function"){define([],function(){return _122();});}else{if(typeof window=="undefined"){require("./node-html")(module,_122);}else{put=_122();}}});},"dgrid/OnDemandList":function(){define("dgrid/OnDemandList",["./List","./_StoreMixin","dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred","dojo/dom","dojo/on","./util/misc","put-selector/put"],function(List,_123,_124,lang,_125,dom,_126,_127,put){return _124([List,_123],{minRowsPerPage:25,maxRowsPerPage:250,maxEmptySpace:Infinity,bufferRows:10,farOffRemoval:2000,queryRowsOverlap:0,pagingMethod:"debounce",pagingDelay:_127.defaultDelay,keepScrollPosition:false,rowHeight:22,postCreate:function(){this.inherited(arguments);var self=this;_126(this.bodyNode,"scroll",_127[this.pagingMethod](function(_128){self._processScroll(_128);},null,this.pagingDelay));},renderQuery:function(_129,_12a,_12b){var self=this,_12c={query:_129,count:0,node:_12a,options:_12b},_12d=this.preload,_12e;if(!_12a){var _12f={node:put(this.contentNode,"div.dgrid-preload",{rowIndex:0}),count:0,query:_129,next:_12c,options:_12b};_12f.node.style.height="0";_12c.node=_12a=put(this.contentNode,"div.dgrid-preload");_12c.previous=_12f;}_12a.rowIndex=this.minRowsPerPage;if(_12d){if((_12c.next=_12d.next)&&_12a.offsetTop>=_12d.node.offsetTop){_12c.previous=_12d;}else{_12c.next=_12d;_12c.previous=_12d.previous;}_12c.previous.next=_12c;_12c.next.previous=_12c;}else{this.preload=_12c;}var _130=put(_12a,"-div.dgrid-loading"),_131=put(_130,"div.dgrid-below");_131.innerHTML=this.loadingMessage;function _132(err){put(_130,"!");if(err){if(self._refreshDeferred){self._refreshDeferred.reject(err);delete self._refreshDeferred;}throw err;}};_12b=lang.mixin(this.get("queryOptions"),_12b,{start:0,count:this.minRowsPerPage},"level" in _129?{queryLevel:_129.level}:null);this._trackError(function(){return _12e=_129(_12b);});if(typeof _12e==="undefined"){_132();return;}_125.when(self.renderArray(_12e,_12a,_12b),function(trs){var _133=typeof _12e.total==="undefined"?_12e.length:_12e.total;return _125.when(_133,function(_134){var _135=trs.length,_136=_12a.parentNode,_137=self.noDataNode;put(_130,"!");if(!("queryLevel" in _12b)){self._total=_134;}if(_134===0){if(_137){put(_137,"!");delete self.noDataNode;}self.noDataNode=_137=put("div.dgrid-no-data");_136.insertBefore(_137,self._getFirstRowSibling(_136));_137.innerHTML=self.noDataMessage;}var _138=0;for(var i=0;i<_135;i++){_138+=self._calcRowHeight(trs[i]);}if(_135&&_138){self.rowHeight=_138/_135;}_134-=_135;_12c.count=_134;_12a.rowIndex=_135;if(_134){_12a.style.height=Math.min(_134*self.rowHeight,self.maxEmptySpace)+"px";}else{_12a.style.display="none";_12b.count++;}if(self._previousScrollPosition){self.scrollTo(self._previousScrollPosition);delete self._previousScrollPosition;}self._processScroll();if(self._refreshDeferred){self._refreshDeferred.resolve(_12e);delete self._refreshDeferred;}return trs;},_132);},_132);return _12e;},refresh:function(_139){var self=this,keep=(_139&&_139.keepScrollPosition),dfd,_13a;if(typeof keep==="undefined"){keep=this.keepScrollPosition;}if(keep){this._previousScrollPosition=this.getScrollPosition();}this.inherited(arguments);if(this.store){dfd=this._refreshDeferred=new _125();_13a=self.renderQuery(function(_13b){return self.store.query(self.query,_13b);});if(typeof _13a==="undefined"){dfd.reject();}return dfd.then(function(_13c){setTimeout(function(){_126.emit(self.domNode,"dgrid-refresh-complete",{bubbles:true,cancelable:false,grid:self,results:_13c});},0);delete self._refreshDeferred;return _13c;},function(err){delete self._refreshDeferred;throw err;});}},resize:function(){this.inherited(arguments);this._processScroll();},_getFirstRowSibling:function(_13d){return _13d.lastChild;},_calcRowHeight:function(_13e){var _13f=_13e.previousSibling;if(_13f&&!/\bdgrid-preload\b/.test(_13f.className)){return _13e.offsetTop-_13f.offsetTop;}return _13e.offsetHeight;},lastScrollTop:0,_processScroll:function(evt){var grid=this,_140=grid.bodyNode,_141=(evt&&evt.scrollTop)||this.getScrollPosition().y,_142=_140.offsetHeight+_141,_143,_144,_145=grid.preload,_146=grid.lastScrollTop,_147=grid.bufferRows*grid.rowHeight,_148=_147-grid.rowHeight,_149,_14a,_14b,_14c=true;var _14d=1;grid.lastScrollTop=_141;function _14e(_14f,_150,_151,_152){var _153=grid.farOffRemoval,_144=_14f.node;if(_150>2*_153){var row,_154=_144[_151];var _155=0;var _156=0;var _157=[];while((row=_154)){var _158=grid._calcRowHeight(row);if(_155+_158+_153>_150||(_154.className.indexOf("dgrid-row")<0&&_154.className.indexOf("dgrid-loading")<0)){break;}var _154=row[_151];_155+=_158;_156+=row.count||1;grid.removeRow(row,true);_157.push(row);}_14f.count+=_156;if(_152){_144.rowIndex-=_156;_159(_14f);}else{_144.style.height=(_144.offsetHeight+_155)+"px";}var _15a=put("div",_157);setTimeout(function(){put(_15a,"!");},1);}};function _159(_15b,_15c){_15b.node.style.height=Math.min(_15b.count*grid.rowHeight,_15c?Infinity:grid.maxEmptySpace)+"px";};function _15d(_15e,_15f){do{_15e=_15f?_15e.next:_15e.previous;}while(_15e&&!_15e.node.offsetWidth);return _15e;};while(_145&&!_145.node.offsetWidth){_145=_145.previous;}while(_145&&_145!=_143){_143=grid.preload;grid.preload=_145;_144=_145.node;var _160=_144.offsetTop;var _161;if(_142+_14d+_148<_160){_145=_15d(_145,(_14c=false));}else{if(_141-_14d-_148>(_160+(_161=_144.offsetHeight))){_145=_15d(_145,(_14c=true));}else{var _162=((_144.rowIndex?_141-_147:_142)-_160)/grid.rowHeight;var _163=(_142-_141+2*_147)/grid.rowHeight;var _164=Math.max(Math.min((_141-_146)*grid.rowHeight,grid.maxRowsPerPage/2),grid.maxRowsPerPage/-2);_163+=Math.min(Math.abs(_164),10);if(_144.rowIndex==0){_162-=_163;}_162=Math.max(_162,0);if(_162<10&&_162>0&&_163+_162<grid.maxRowsPerPage){_163+=Math.max(0,_162);_162=0;}_163=Math.min(Math.max(_163,grid.minRowsPerPage),grid.maxRowsPerPage,_145.count);if(_163==0){_145=_15d(_145,_14c);continue;}_163=Math.ceil(_163);_162=Math.min(Math.floor(_162),_145.count-_163);var _165=lang.mixin(grid.get("queryOptions"),_145.options);_145.count-=_163;var _166=_144,_167,_168=grid.queryRowsOverlap,_169=_144.rowIndex>0&&_145;if(_169){var _16a=_145.previous;if(_16a){_14e(_16a,_141-(_16a.node.offsetTop+_16a.node.offsetHeight),"nextSibling");if(_162>0&&_16a.node==_144.previousSibling){_162=Math.min(_145.count,_162);_145.previous.count+=_162;_159(_145.previous,true);_144.rowIndex+=_162;_168=0;}else{_163+=_162;}_145.count-=_162;}_165.start=_144.rowIndex-_168;_165.count=Math.min(_163+_168,grid.maxRowsPerPage);_144.rowIndex=_165.start+_165.count;}else{if(_145.next){_14e(_145.next,_145.next.node.offsetTop-_142,"previousSibling",true);var _166=_144.nextSibling;if(_166==_145.next.node){_145.next.count+=_145.count-_162;_145.next.node.rowIndex=_162+_163;_159(_145.next);_145.count=_162;_168=0;}else{_167=true;}}_165.start=_145.count;_165.count=Math.min(_163+_168,grid.maxRowsPerPage);}if(_167&&_166&&_166.offsetWidth){_167=_166.offsetTop;}_159(_145);if("level" in _145.query){_165.queryLevel=_145.query.level;}if(!("queryLevel" in _165)&&(_165.start>grid._total||_165.count<0)){continue;}var _16b=put(_166,"-div.dgrid-loading[style=height:"+_163*grid.rowHeight+"px]"),_16c=put(_16b,"div.dgrid-"+(_169?"below":"above"));_16c.innerHTML=grid.loadingMessage;_16b.count=_163;var _16d=_145.query(_165),_16e=grid._trackError(function(){return _16d;});if(_16e===undefined){put(_16b,"!");return;}(function(_16f,_170,_171,_172){_14b=_125.when(grid.renderArray(_172,_16f,_165),function(rows){_14a=_172;_166=_16f.nextSibling;put(_16f,"!");if(_171&&_166&&_166.offsetWidth){var pos=grid.getScrollPosition();grid.scrollTo({x:pos.x,y:pos.y+_166.offsetTop-_171,preserveMomentum:true});}_125.when(_172.total||_172.length,function(_173){if(!("queryLevel" in _165)){grid._total=_173;}if(_170){_170.count=_173-_170.node.rowIndex;if(_170.count===0){_165.count++;}_159(_170);}});grid._processScroll();return rows;},function(e){put(_16f,"!");throw e;});}).call(this,_16b,_169,_167,_16d);_145=_145.previous;}}}if(_14b&&(_149=this._refreshDeferred)){delete this._refreshDeferred;_125.when(_14b,function(){_149.resolve(_14a);});}},removeRow:function(_174,_175){function _176(_177,_178){return _177!=null?_177:_178;};if(_174){var _179=_174.previousSibling,_17a=_174.nextSibling,_17b=_179&&_176(_179.observerIndex,_179.previousObserverIndex),_17c=_17a&&_176(_17a.observerIndex,_17a.nextObserverIndex),_17d=_174.observerIndex;_174.observerIndex=undefined;if(_175){_174.nextObserverIndex=_17c;_174.previousObserverIndex=_17b;}if(this.cleanEmptyObservers&&_17d>-1&&_17d!==_17b&&_17d!==_17c){var _17e=this.observers;var _17f=_17e[_17d];if(_17f){if(!_175){var rows=_17f.rows;for(var i=0;i<rows.length;i++){if(rows[i]!=_174&&dom.isDescendant(rows[i],this.domNode)){return this.inherited(arguments);}}}_17f.cancel();this._numObservers--;_17e[_17d]=0;}}}this.inherited(arguments);}});});},"dgrid/Keyboard":function(){define("dgrid/Keyboard",["dojo/_base/declare","dojo/aspect","dojo/on","dojo/_base/lang","dojo/has","put-selector/put","./util/misc","dojo/_base/Deferred","dojo/_base/sniff"],function(_180,_181,on,lang,has,put,_182,_183){var _184={checkbox:1,radio:1,button:1},_185=/\bdgrid-cell\b/,_186=/\bdgrid-row\b/;var _187=_180(null,{pageSkip:10,tabIndex:0,keyMap:null,headerKeyMap:null,postMixInProperties:function(){this.inherited(arguments);if(!this.keyMap){this.keyMap=lang.mixin({},_187.defaultKeyMap);}if(!this.headerKeyMap){this.headerKeyMap=lang.mixin({},_187.defaultHeaderKeyMap);}},postCreate:function(){this.inherited(arguments);var grid=this;function _188(_189){var _18a=_189.target;return _18a.type&&(!_184[_18a.type]||_189.keyCode==32);};function _18b(_18c){var _18d=grid.cellNavigation,_18e=_18d?_185:_186,_18f=_18c===grid.headerNode,_190=_18c;function _191(){if(grid._focusedHeaderNode){grid._focusedHeaderNode.tabIndex=-1;}if(grid.showHeader){grid._focusedHeaderNode=_190=_18d?grid.headerNode.getElementsByTagName("th")[0]:grid.headerNode;if(_190){_190.tabIndex=grid.tabIndex;}}};if(_18f){_191();_181.after(grid,"renderHeader",_191,true);}else{_181.after(grid,"renderArray",function(ret){return _183.when(ret,function(ret){var _192=grid._focusedNode||_190;if(_18e.test(_192.className)&&_182.contains(_18c,_192)){return ret;}for(var i=0,_193=_18c.getElementsByTagName("*"),_194;(_194=_193[i]);++i){if(_18e.test(_194.className)){_192=grid._focusedNode=_194;break;}}_192.tabIndex=grid.tabIndex;return ret;});});}grid._listeners.push(on(_18c,"mousedown",function(_195){if(!_188(_195)){grid._focusOnNode(_195.target,_18f,_195);}}));grid._listeners.push(on(_18c,"keydown",function(_196){if(_196.metaKey||_196.altKey){return;}var _197=grid[_18f?"headerKeyMap":"keyMap"][_196.keyCode];if(_197&&!_188(_196)){_197.call(grid,_196);}}));};if(this.tabableHeader){_18b(this.headerNode);on(this.headerNode,"dgrid-cellfocusin",function(){grid.scrollTo({x:this.scrollLeft});});}_18b(this.contentNode);},removeRow:function(_198){if(!this._focusedNode){return this.inherited(arguments);}var self=this,_199=document.activeElement===this._focusedNode,_19a=this[this.cellNavigation?"cell":"row"](this._focusedNode),_19b=_19a.row||_19a,_19c;_198=_198.element||_198;if(_198===_19b.element){_19c=this.down(_19b,true);if(!_19c||_19c.element===_198){_19c=this.up(_19b,true);}this._removedFocus={active:_199,rowId:_19b.id,columnId:_19a.column&&_19a.column.id,siblingId:!_19c||_19c.element===_198?undefined:_19c.id};setTimeout(function(){if(self._removedFocus){self._restoreFocus(_19b.id);}},0);this._focusedNode=null;}this.inherited(arguments);},insertRow:function(_19d){var _19e=this.inherited(arguments);if(this._removedFocus&&!this._removedFocus.wait){this._restoreFocus(_19e);}return _19e;},_restoreFocus:function(row){var _19f=this._removedFocus,_1a0,cell;row=row&&this.row(row);_1a0=row&&row.element&&row.id===_19f.rowId?row:typeof _19f.siblingId!=="undefined"&&this.row(_19f.siblingId);if(_1a0&&_1a0.element){if(!_1a0.element.parentNode.parentNode){_19f.wait=true;return;}if(typeof _19f.columnId!=="undefined"){cell=this.cell(_1a0,_19f.columnId);if(cell&&cell.element){_1a0=cell;}}if(_19f.active&&_1a0.element.offsetHeight!==0){this.focus(_1a0);}else{put(_1a0.element,".dgrid-focus");_1a0.element.tabIndex=this.tabIndex;}}delete this._removedFocus;},addKeyHandler:function(key,_1a1,_1a2){return _181.after(this[_1a2?"headerKeyMap":"keyMap"],key,_1a1,true);},_focusOnNode:function(_1a3,_1a4,_1a5){var _1a6="_focused"+(_1a4?"Header":"")+"Node",_1a7=this[_1a6],_1a8=this.cellNavigation?"cell":"row",cell=this[_1a8](_1a3),_1a9,_1aa,_1ab,_1ac,i;_1a3=cell&&cell.element;if(!_1a3){return;}if(this.cellNavigation){_1a9=_1a3.getElementsByTagName("input");for(i=0,_1ab=_1a9.length;i<_1ab;i++){_1aa=_1a9[i];if((_1aa.tabIndex!=-1||"lastValue" in _1aa)&&!_1aa.disabled){if(has("ie")<8){_1aa.style.position="relative";}_1aa.focus();if(has("ie")<8){_1aa.style.position="";}_1ac=true;break;}}}_1a5=lang.mixin({grid:this},_1a5);if(_1a5.type){_1a5.parentType=_1a5.type;}if(!_1a5.bubbles){_1a5.bubbles=true;}if(_1a7){put(_1a7,"!dgrid-focus[!tabIndex]");if(has("ie")<8){_1a7.style.position="";}_1a5[_1a8]=this[_1a8](_1a7);on.emit(_1a3,"dgrid-cellfocusout",_1a5);}_1a7=this[_1a6]=_1a3;_1a5[_1a8]=cell;var _1ad=this.cellNavigation?_185:_186;if(!_1ac&&_1ad.test(_1a3.className)){if(has("ie")<8){_1a3.style.position="relative";}_1a3.tabIndex=this.tabIndex;_1a3.focus();}put(_1a3,".dgrid-focus");on.emit(_1a7,"dgrid-cellfocusin",_1a5);},focusHeader:function(_1ae){this._focusOnNode(_1ae||this._focusedHeaderNode,true);},focus:function(_1af){this._focusOnNode(_1af||this._focusedNode,false);}});var _1b0=_187.moveFocusVertical=function(_1b1,_1b2){var _1b3=this.cellNavigation,_1b4=this[_1b3?"cell":"row"](_1b1),_1b5=_1b3&&_1b4.column.id,next=this.down(this._focusedNode,_1b2,true);if(_1b3){next=this.cell(next,_1b5);}this._focusOnNode(next,false,_1b1);_1b1.preventDefault();};var _1b6=_187.moveFocusUp=function(_1b7){_1b0.call(this,_1b7,-1);};var _1b8=_187.moveFocusDown=function(_1b9){_1b0.call(this,_1b9,1);};var _1ba=_187.moveFocusPageUp=function(_1bb){_1b0.call(this,_1bb,-this.pageSkip);};var _1bc=_187.moveFocusPageDown=function(_1bd){_1b0.call(this,_1bd,this.pageSkip);};var _1be=_187.moveFocusHorizontal=function(_1bf,_1c0){if(!this.cellNavigation){return;}var _1c1=!this.row(_1bf),_1c2=this["_focused"+(_1c1?"Header":"")+"Node"];this._focusOnNode(this.right(_1c2,_1c0),_1c1,_1bf);_1bf.preventDefault();};var _1c3=_187.moveFocusLeft=function(_1c4){_1be.call(this,_1c4,-1);};var _1c5=_187.moveFocusRight=function(_1c6){_1be.call(this,_1c6,1);};var _1c7=_187.moveHeaderFocusEnd=function(_1c8,_1c9){var _1ca;if(this.cellNavigation){_1ca=this.headerNode.getElementsByTagName("th");this._focusOnNode(_1ca[_1c9?0:_1ca.length-1],true,_1c8);}_1c8.preventDefault();};var _1cb=_187.moveHeaderFocusHome=function(_1cc){_1c7.call(this,_1cc,true);};var _1cd=_187.moveFocusEnd=function(_1ce,_1cf){var self=this,_1d0=this.cellNavigation,_1d1=this.contentNode,_1d2=_1cf?0:_1d1.scrollHeight,_1d3=_1d1.scrollTop+_1d2,_1d4=_1d1[_1cf?"firstChild":"lastChild"],_1d5=_1d4.className.indexOf("dgrid-preload")>-1,_1d6=_1d5?_1d4[(_1cf?"next":"previous")+"Sibling"]:_1d4,_1d7=_1d6.offsetTop+(_1cf?0:_1d6.offsetHeight),_1d8;if(_1d5){while(_1d6&&_1d6.className.indexOf("dgrid-row")<0){_1d6=_1d6[(_1cf?"next":"previous")+"Sibling"];}if(!_1d6){return;}}if(!_1d5||_1d4.offsetHeight<1){if(_1d0){_1d6=this.cell(_1d6,this.cell(_1ce).column.id);}this._focusOnNode(_1d6,false,_1ce);}else{if(!has("dom-addeventlistener")){_1ce=lang.mixin({},_1ce);}_1d8=_181.after(this,"renderArray",function(rows){_1d8.remove();return _183.when(rows,function(rows){var _1d9=rows[_1cf?0:rows.length-1];if(_1d0){_1d9=self.cell(_1d9,self.cell(_1ce).column.id);}self._focusOnNode(_1d9,false,_1ce);});});}if(_1d3===_1d7){_1ce.preventDefault();}};var _1da=_187.moveFocusHome=function(_1db){_1cd.call(this,_1db,true);};function _1dc(_1dd){_1dd.preventDefault();};_187.defaultKeyMap={32:_1dc,33:_1ba,34:_1bc,35:_1cd,36:_1da,37:_1c3,38:_1b6,39:_1c5,40:_1b8};_187.defaultHeaderKeyMap={32:_1dc,35:_1c7,36:_1cb,37:_1c3,39:_1c5};return _187;});},"dgrid/List":function(){define("dgrid/List",["dojo/_base/kernel","dojo/_base/declare","dojo/dom","dojo/on","dojo/has","./util/misc","dojo/has!touch?./TouchScroll","xstyle/has-class","put-selector/put","dojo/_base/sniff","xstyle/css!./css/dgrid.css"],function(_1de,_1df,dom,_1e0,has,_1e1,_1e2,_1e3,put){_1e3("mozilla","opera","webkit","ie","ie-6","ie-6-7","quirks","no-quirks","touch");var _1e4="dgrid-row-odd",_1e5="dgrid-row-even",_1e6,_1e7;function byId(id){return document.getElementById(id);};function _1e8(_1e9){_1e9.className="";document.body.removeChild(_1e9);};function _1ea(_1eb,_1ec){put(document.body,_1eb,".dgrid-scrollbar-measure");var size=_1eb["offset"+_1ec]-_1eb["client"+_1ec];_1e8(_1eb);return size;};has.add("dom-scrollbar-width",function(_1ed,doc,_1ee){return _1ea(_1ee,"Width");});has.add("dom-scrollbar-height",function(_1ef,doc,_1f0){return _1ea(_1f0,"Height");});has.add("dom-rtl-scrollbar-left",function(_1f1,doc,_1f2){var div=put("div"),_1f3;put(document.body,_1f2,".dgrid-scrollbar-measure[dir=rtl]");put(_1f2,div);_1f3=!!has("ie")||!!has("trident")||div.offsetLeft>=has("dom-scrollbar-width");_1e8(_1f2);put(div,"!");_1f2.removeAttribute("dir");return _1f3;});var _1f4=0;function _1f5(){return "dgrid_"+_1f4++;};var _1f6=/ +/g;function _1f7(cls){var _1f8=cls?"."+cls.replace(_1f6,"."):"";if(this._class){_1f8="!"+this._class.replace(_1f6,"!")+_1f8;}put(this.domNode,_1f8);this._class=cls;};function _1f9(){return this._class;};var _1fa=has("ie")<7&&!has("quirks")?function(){var root,w,h,dims;if(!this._started){return;}root=document.documentElement;w=root.clientWidth;h=root.clientHeight;dims=this._prevWinDims||[];if(dims[0]!==w||dims[1]!==h){this.resize();this._prevWinDims=[w,h];}}:function(){if(this._started){this.resize();}};function _1fb(){return {x:this.bodyNode.scrollLeft,y:this.bodyNode.scrollTop};};function _1fc(_1fd){if(typeof _1fd.x!=="undefined"){this.bodyNode.scrollLeft=_1fd.x;}if(typeof _1fd.y!=="undefined"){this.bodyNode.scrollTop=_1fd.y;}};return _1df(has("touch")?_1e2:null,{tabableHeader:false,showHeader:false,showFooter:false,maintainOddEven:true,cleanAddedRules:true,useTouchScroll:null,addUiClasses:true,cleanEmptyObservers:true,highlightDuration:250,postscript:function(_1fe,_1ff){var grid=this;(this._Row=function(id,_200,_201){this.id=id;this.data=_200;this.element=_201;}).prototype.remove=function(){grid.removeRow(this.element);};if(_1ff){this.srcNodeRef=_1ff=_1ff.nodeType?_1ff:byId(_1ff);}this.create(_1fe,_1ff);},listType:"list",create:function(_202,_203){var _204=this.domNode=_203||put("div"),cls;if(_202){this.params=_202;_1df.safeMixin(this,_202);cls=_202["class"]||_202.className||_204.className;this._sort=_202.sort||[];delete this.sort;}else{this._sort=[];}this.observers=[];this._numObservers=0;this._listeners=[];this._rowIdToObject={};this.postMixInProperties&&this.postMixInProperties();this.id=_204.id=_204.id||this.id||_1f5();if(this.useTouchScroll===null){this.useTouchScroll=!has("dom-scrollbar-width");}this.buildRendering();if(cls){_1f7.call(this,cls);}this.postCreate();delete this.srcNodeRef;if(this.domNode.offsetHeight){this.startup();}},buildRendering:function(){var _205=this.domNode,_206=this.addUiClasses,self=this,_207,_208,_209,_20a,_20b;_20b=this.isRTL=(document.body.dir||document.documentElement.dir||document.body.style.direction).toLowerCase()=="rtl";_205.className="";put(_205,"[role=grid].dgrid.dgrid-"+this.listType+(_206?".ui-widget":""));_207=this.headerNode=put(_205,"div.dgrid-header.dgrid-header-row"+(_206?".ui-widget-header":"")+(this.showHeader?"":".dgrid-header-hidden"));if(has("quirks")||has("ie")<8){_208=put(_205,"div.dgrid-spacer");}_209=this.bodyNode=put(_205,"div.dgrid-scroller");if(has("ff")){_209.tabIndex=-1;}this.headerScrollNode=put(_205,"div.dgrid-header.dgrid-header-scroll.dgrid-scrollbar-width"+(_206?".ui-widget-header":""));_20a=this.footerNode=put("div.dgrid-footer"+(this.showFooter?"":".dgrid-footer-hidden"));put(_205,_20a);if(_20b){_205.className+=" dgrid-rtl"+(has("dom-rtl-scrollbar-left")?" dgrid-rtl-swap":"");}_1e0(_209,"scroll",function(_20c){if(self.showHeader){_207.scrollLeft=_20c.scrollLeft||_209.scrollLeft;}_20c.stopPropagation();_1e0.emit(_205,"scroll",{scrollTarget:_209});});this.configStructure();this.renderHeader();this.contentNode=this.touchNode=put(this.bodyNode,"div.dgrid-content"+(_206?".ui-widget-content":""));this._listeners.push(this._resizeHandle=_1e0(window,"resize",_1e1.throttleDelayed(_1fa,this)));},postCreate:has("touch")?function(){if(this.useTouchScroll){this.inherited(arguments);}}:function(){},startup:function(){if(this._started){return;}this.inherited(arguments);this._started=true;this.resize();this.set("sort",this._sort);},configStructure:function(){},resize:function(){var _20d=this.bodyNode,_20e=this.headerNode,_20f=this.footerNode,_210=_20e.offsetHeight,_211=this.showFooter?_20f.offsetHeight:0,_212=has("quirks")||has("ie")<7;this.headerScrollNode.style.height=_20d.style.marginTop=_210+"px";_20d.style.marginBottom=_211+"px";if(_212){_20d.style.height="";_20d.style.height=Math.max((this.domNode.offsetHeight-_210-_211),0)+"px";if(_211){_20f.style.bottom="1px";setTimeout(function(){_20f.style.bottom="";},0);}}if(!_1e6){_1e6=has("dom-scrollbar-width");_1e7=has("dom-scrollbar-height");if(has("ie")){_1e6++;_1e7++;}_1e1.addCssRule(".dgrid-scrollbar-width","width: "+_1e6+"px");_1e1.addCssRule(".dgrid-scrollbar-height","height: "+_1e7+"px");if(_1e6!=17&&!_212){_1e1.addCssRule(".dgrid-header-row","right: "+_1e6+"px");_1e1.addCssRule(".dgrid-rtl-swap .dgrid-header-row","left: "+_1e6+"px");}}if(_212){_20e.style.width=_20d.clientWidth+"px";setTimeout(function(){_20e.scrollLeft=_20d.scrollLeft;},0);}},addCssRule:function(_213,css){var rule=_1e1.addCssRule(_213,css);if(this.cleanAddedRules){this._listeners.push(rule);}return rule;},on:function(_214,_215){var _216=_1e0(this.domNode,_214,_215);if(!has("dom-addeventlistener")){this._listeners.push(_216);}return _216;},cleanup:function(){var _217=this.observers,i;for(i in this._rowIdToObject){if(this._rowIdToObject[i]!=this.columns){var _218=byId(i);if(_218){this.removeRow(_218,true);}}}for(i=0;i<_217.length;i++){var _219=_217[i];_219&&_219.cancel();}this.observers=[];this._numObservers=0;this.preload=null;},destroy:function(){if(this._listeners){for(var i=this._listeners.length;i--;){this._listeners[i].remove();}delete this._listeners;}this._started=false;this.cleanup();put(this.domNode,"!");if(this.useTouchScroll){this.inherited(arguments);}},refresh:function(){this.cleanup();this._rowIdToObject={};this._autoId=0;this.contentNode.innerHTML="";this.scrollTo({x:0,y:0});},newRow:function(_21a,_21b,_21c,i,_21d){if(_21b){var row=this.insertRow(_21a,_21b,_21c,i,_21d);put(row,".dgrid-highlight"+(this.addUiClasses?".ui-state-highlight":""));setTimeout(function(){put(row,"!dgrid-highlight!ui-state-highlight");},this.highlightDuration);return row;}},adjustRowIndices:function(_21e){var next=_21e;var _21f=next.rowIndex;if(_21f>-1){do{if(next.rowIndex>-1){if(this.maintainOddEven){if((next.className+" ").indexOf("dgrid-row ")>-1){put(next,"."+(_21f%2==1?_1e4:_1e5)+"!"+(_21f%2==0?_1e4:_1e5));}}next.rowIndex=_21f++;}}while((next=next.nextSibling)&&next.rowIndex!=_21f);}},renderArray:function(_220,_221,_222){_222=_222||{};var self=this,_223=_222.start||0,_224=this.observers,rows,_225,_226;if(!_221){this._lastCollection=_220;}if(_220.observe){self._numObservers++;var _227=_220.observe(function(_228,from,to){var row,_229,_22a,_22b;function _22c(){_22a=(_22a.connected||_22a).nextSibling;};if(from>-1&&rows[from]){row=rows.splice(from,1)[0];if(row.parentNode==_225){_229=row.nextSibling;if(_229){if(from!=to){_229.rowIndex--;}}self.removeRow(row);}_222.count--;if(self._processScroll){self._processScroll();}}if(to>-1){if(rows.length){if(to===0){_22a=rows[to];_22a=_22a&&_22d(_22a);}else{_22a=rows[to-1];if(_22a){_22a=_22d(_22a);_22c();}}}else{_22a=self._getFirstRowSibling&&self._getFirstRowSibling(_225);}if(row&&_22a&&row.id===_22a.id){_22c();}if(_22a&&!_22a.parentNode){_22a=byId(_22a.id);}_22b=(_221&&_221.parentNode)||(_22a&&_22a.parentNode)||self.contentNode;row=self.newRow(_228,_22b,_22a,_222.start+to,_222);if(row){row.observerIndex=_226;rows.splice(to,0,row);if(!_229||to<from){var _22e=row.previousSibling;_229=!_22e||_22e.rowIndex+1==row.rowIndex||row.rowIndex==0?row:_22e;}}_222.count++;}if(from===0){_22f(1,1);}else{if(from===_220.length-(to===-1?0:1)){_22f(0,0);}}from!=to&&_229&&self.adjustRowIndices(_229);self._onNotification(rows,_228,from,to);},true);_226=_224.push(_227)-1;}var _230=document.createDocumentFragment(),_231;function _22f(){var _232=arguments;if(_226>-1){for(var i=0;i<_232.length;i++){var top=_232[i];var _233=rows[top?0:rows.length-1];_233=_233&&_22d(_233);if(_233){var row=_233[top?"previousSibling":"nextSibling"];if(row){row=self.row(row);}if(row&&row.element!=_233){var _234=top?"unshift":"push";_220[_234](row.data);rows[_234](row.element);_222.count++;}}}}};function _22d(row){if(!dom.isDescendant(row,self.domNode)&&byId(row.id)){return self.row(row.id.slice(self.id.length+5)).element;}return row;};function _235(_236){_231=self.insertRow(_236,_230,null,_223++,_222);_231.observerIndex=_226;return _231;};function _237(_238){if(typeof _226!=="undefined"){_224[_226].cancel();_224[_226]=0;self._numObservers--;}if(_238){throw _238;}};var _239;function _23a(_23b){_239=_23b.slice(0);_225=_221?_221.parentNode:self.contentNode;if(_225&&_225.parentNode&&(_225!==self.contentNode||_23b.length)){_225.insertBefore(_230,_221||null);_231=_23b[_23b.length-1];_231&&self.adjustRowIndices(_231);}else{if(_224[_226]&&self.cleanEmptyObservers){_237();}}rows=_23b;if(_227){_227.rows=rows;}};if(_220.map){rows=_220.map(_235,console.error);if(rows.then){return _220.then(function(_23c){_220=_23c;return rows.then(function(_23d){_23a(_23d);_22f(1,1,0,0);return _239;});});}}else{rows=[];for(var i=0,l=_220.length;i<l;i++){rows[i]=_235(_220[i]);}}_23a(rows);_22f(1,1,0,0);return _239;},_onNotification:function(rows,_23e,from,to){},renderHeader:function(){},_autoId:0,insertRow:function(_23f,_240,_241,i,_242){var _243=_242.parentId,id=this.id+"-row-"+(_243?_243+"-":"")+((this.store&&this.store.getIdentity)?this.store.getIdentity(_23f):this._autoId++),row=byId(id),_244=row&&row.previousSibling;if(row){if(row===_241){_241=(_241.connected||_241).nextSibling;}this.removeRow(row);}row=this.renderRow(_23f,_242);row.className=(row.className||"")+" dgrid-row "+(i%2==1?_1e4:_1e5)+(this.addUiClasses?" ui-state-default":"");this._rowIdToObject[row.id=id]=_23f;_240.insertBefore(row,_241||null);if(_244){this.adjustRowIndices(_244);}row.rowIndex=i;return row;},renderRow:function(_245,_246){return put("div",""+_245);},removeRow:function(_247,_248){_247=_247.element||_247;delete this._rowIdToObject[_247.id];if(!_248){put(_247,"!");}},row:function(_249){var id;if(_249 instanceof this._Row){return _249;}if(_249.target&&_249.target.nodeType){_249=_249.target;}if(_249.nodeType){var _24a;do{var _24b=_249.id;if((_24a=this._rowIdToObject[_24b])){return new this._Row(_24b.substring(this.id.length+5),_24a,_249);}_249=_249.parentNode;}while(_249&&_249!=this.domNode);return;}if(typeof _249=="object"){id=this.store.getIdentity(_249);}else{id=_249;_249=this._rowIdToObject[this.id+"-row-"+id];}return new this._Row(id,_249,byId(this.id+"-row-"+id));},cell:function(_24c){return {row:this.row(_24c)};},_move:function(item,_24d,_24e,_24f){var _250,_251,_252;_252=_251=item.element;_24d=_24d||1;do{if((_250=_251[_24d<0?"previousSibling":"nextSibling"])){do{_251=_250;if(_251&&(_251.className+" ").indexOf(_24e+" ")>-1){_252=_251;_24d+=_24d<0?1:-1;break;}}while((_250=(!_24f||!_251.hidden)&&_251[_24d<0?"lastChild":"firstChild"]));}else{_251=_251.parentNode;if(!_251||_251===this.bodyNode||_251===this.headerNode){break;}}}while(_24d);return _252;},up:function(row,_253,_254){if(!row.element){row=this.row(row);}return this.row(this._move(row,-(_253||1),"dgrid-row",_254));},down:function(row,_255,_256){if(!row.element){row=this.row(row);}return this.row(this._move(row,_255||1,"dgrid-row",_256));},scrollTo:has("touch")?function(_257){return this.useTouchScroll?this.inherited(arguments):_1fc.call(this,_257);}:_1fc,getScrollPosition:has("touch")?function(){return this.useTouchScroll?this.inherited(arguments):_1fb.call(this);}:_1fb,get:function(name){var fn="_get"+name.charAt(0).toUpperCase()+name.slice(1);if(typeof this[fn]==="function"){return this[fn].apply(this,[].slice.call(arguments,1));}if(!1&&typeof this[fn+"Attr"]==="function"){}return this[name];},set:function(name,_258){if(typeof name==="object"){for(var k in name){this.set(k,name[k]);}}else{var fn="_set"+name.charAt(0).toUpperCase()+name.slice(1);if(typeof this[fn]==="function"){this[fn].apply(this,[].slice.call(arguments,1));}else{if(!1&&typeof this[fn+"Attr"]==="function"){}this[name]=_258;}}return this;},_getClass:_1f9,_setClass:_1f7,_getClassName:_1f9,_setClassName:_1f7,_setSort:function(_259,_25a){this._sort=typeof _259!="string"?_259:[{attribute:_259,descending:_25a}];this.refresh();if(this._lastCollection){if(_259.length){if(typeof _259!="string"){_25a=_259[0].descending;_259=_259[0].attribute;}this._lastCollection.sort(function(a,b){var aVal=a[_259],bVal=b[_259];if(aVal===undefined){aVal="";}if(bVal===undefined){bVal="";}return aVal==bVal?0:(aVal>bVal==!_25a?1:-1);});}this.renderArray(this._lastCollection);}},sort:function(_25b,_25c){_1de.deprecated("sort(...)","use set(\"sort\", ...) instead","dgrid 0.4");this.set("sort",_25b,_25c);},_getSort:function(){return this._sort;},_setShowHeader:function(show){var _25d=this.headerNode;this.showHeader=show;put(_25d,(show?"!":".")+"dgrid-header-hidden");this.renderHeader();this.resize();if(show){_25d.scrollLeft=this.getScrollPosition().x;}},setShowHeader:function(show){_1de.deprecated("setShowHeader(...)","use set(\"showHeader\", ...) instead","dgrid 0.4");this.set("showHeader",show);},_setShowFooter:function(show){this.showFooter=show;put(this.footerNode,(show?"!":".")+"dgrid-footer-hidden");this.resize();}});});},"dgrid/util/misc":function(){define("dgrid/util/misc",["dojo/has","put-selector/put"],function(has,put){has.add("dom-contains",function(_25e,doc,_25f){return !!_25f.contains;});var _260=[],_261,_262,_263,_264=/([^A-Za-z0-9_\u00A0-\uFFFF-])/g;function _265(_266){var _267=_260[_266],i,l;if(_267===undefined){return;}_261[_262](_267);_260[_266]=undefined;for(i=_266+1,l=_260.length;i<l;i++){if(_260[i]>_267){_260[i]--;}}};var util={defaultDelay:15,throttle:function(cb,_268,_269){var ran=false;_269=_269||util.defaultDelay;return function(){if(ran){return;}ran=true;cb.apply(_268,arguments);setTimeout(function(){ran=false;},_269);};},throttleDelayed:function(cb,_26a,_26b){var ran=false;_26b=_26b||util.defaultDelay;return function(){if(ran){return;}ran=true;var a=arguments;setTimeout(function(){ran=false;cb.apply(_26a,a);},_26b);};},debounce:function(cb,_26c,_26d){var _26e;_26d=_26d||util.defaultDelay;return function(){if(_26e){clearTimeout(_26e);_26e=null;}var a=arguments;_26e=setTimeout(function(){cb.apply(_26c,a);},_26d);};},each:function(_26f,_270,_271){var i,len;if(!_26f){return;}if(typeof _26f.length==="number"){for(i=0,len=_26f.length;i<len;i++){_270.call(_271,_26f[i],i,_26f);}}else{for(i in _26f){_270.call(_271,_26f[i],i,_26f);}}},contains:function(_272,node){if(has("dom-contains")){return _272.contains(node);}else{return _272.compareDocumentPosition(node)&8;}},addCssRule:function(_273,css){if(!_261){_261=put(document.getElementsByTagName("head")[0],"style");_261=_261.sheet||_261.styleSheet;_262=_261.deleteRule?"deleteRule":"removeRule";_263=_261.cssRules?"cssRules":"rules";}var _274=_260.length;_260[_274]=(_261.cssRules||_261.rules).length;_261.addRule?_261.addRule(_273,css):_261.insertRule(_273+"{"+css+"}",_260[_274]);return {get:function(prop){return _261[_263][_260[_274]].style[prop];},set:function(prop,_275){if(typeof _260[_274]!=="undefined"){_261[_263][_260[_274]].style[prop]=_275;}},remove:function(){_265(_274);}};},escapeCssIdentifier:function(id,_276){return id.replace(_264,_276||"\\$1");}};return util;});},"xstyle/css":function(){define("xstyle/css",["require"],function(_277){"use strict";function _278(tag,id,_279){var _27a=document.documentElement;var _27b=_27a.insertBefore(document.createElement(tag),_27a.firstChild);_27b.id=id;var _27c=(_27b.currentStyle||getComputedStyle(_27b,null))[_279];_27a.removeChild(_27b);return _27c;};return {load:function(_27d,_27e,_27f,_280){var url=_27e.toUrl(_27d);var _281=_27e.cache&&_27e.cache["url:"+url];if(_281){if(_281.xCss){var _282=_281.parser;var xCss=_281.xCss;_281=_281.cssText;}_277(["./util/createStyleSheet"],function(_283){_284(_283(_281));});if(xCss){}return;}function _284(_285){var _286=_278("x-parse",null,"content");if(_286&&_286!="none"){_27e([eval(_286)],function(_287){if(_285){_287.process({sheet:_285},_27f);}else{_287.processAll();_27f(_285);}});}else{_27f(_285);}};var _288=_278("div",_27d.replace(/\//g,"-").replace(/\..*/,"")+"-loaded","display");if(_288=="none"){return _284();}_277(["./core/load-css"],function(load){load(url,_284);});}};});}}});require(["dojo/i18n"],function(i18n){i18n._preloadLocalizations("dgrid/nls/dgrid",[]);});define("dgrid/dgrid",[],1);