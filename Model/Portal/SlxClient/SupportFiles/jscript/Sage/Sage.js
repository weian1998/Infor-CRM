//>>built
require({cache:{"Sage/main":function(){define(["Sage/_ActionMixin","Sage/Utility","Sage/LanguageList","Sage/Link","Sage/Array","Sage/_ConfigurationProvider","Sage/_Templated","Sage/Format","Sage/Data/main","Sage/Store/main","Sage/Groups/main","Sage/Layout/main","Sage/Library/main","Sage/MailMerge/main","Sage/Services/main","Sage/MainView/main","Sage/QuickForms/Design/main","Sage/TaskPane/main","Sage/UI/main","Sage/Utility/main","Sage/Workspaces/main","dojo/i18n!dijit/nls/common"],function(){});},"Sage/_ActionMixin":function(){define(["dojo/NodeList-traverse","dojo/_base/declare"],function(_1,_2){var _3=_2("Sage._ActionMixin",null,{actionsFrom:"click",postCreate:function(){dojo.forEach(this.actionsFrom.split(","),function(_4){this.connect(this.domNode,_4,this._initiateActionFromEvent);},this);},_isValidElementForAction:function(el){var _5=this.domNode.contains?this.domNode!=el&&this.domNode.contains(el):!!(this.domNode.compareDocumentPosition(el)&&16);return (this.domNode===el)||_5;},_initiateActionFromEvent:function(_6){var el=dojo.query(_6.target).closest("[data-action]")[0],_7=el&&dojo.attr(el,"data-action");if(_7&&this._isValidElementForAction(el)&&this._hasAction(_7,_6,el)){var _8=this._getParametersForAction(_7,_6,el);this._invokeAction(_7,_8,_6,el);dojo.stopEvent(_6);}},_getParametersForAction:function(_9,_a,el){var _b={$event:_a,$source:el};for(var i=0,_c=el.attributes.length;i<_c;i++){var _d=el.attributes[i].name;if(/^((?=data-action)|(?!data))/.test(_d)){continue;}var _e=_d.substr("data-".length).replace(/-(\w)(\w+)/g,function($0,$1,$2){return $1.toUpperCase()+$2;});_b[_e]=dojo.attr(el,_d);}return _b;},_hasAction:function(_f,evt,el){return (typeof this[_f]==="function");},_invokeAction:function(_10,_11,evt,el){return this[_10].apply(this,[_11,evt,el]);}});return _3;});},"Sage/Utility":function(){define(["dojo/parser","Sage/Data/SDataServiceRegistry","Sage/UI/Dialogs","Sage/Utility/ErrorHandler","dojox/validate/regexp","dojo/i18n!./Utility/nls/Utility","dojo/has","dojo/ready","dojo/string","dojo/_base/array","dojo/_base/lang","dojo/_base/xhr"],function(_12,_13,_14,_15,_16,_17,has,_18,_19,_1a,_1b,xhr){Sage.namespace("Utility");dojo.mixin(Sage.Utility,{_timeZones:null,_ownersCache:null,_ownersCacheKey:"SecCodeCache",_userCache:null,_userCacheKey:"_userCacheKey",isIE:(typeof ActiveXObject!=="undefined"||has("trident")),nameToPathCache:{},nlsStrings:_17,regexp:{invalidInput:"^((?!(<([!\\/?A-Za-z])|(&#))).)*$",invalidInputFmt:"^((?!(<([!\\/?A-Za-z])|(&#)|(${0}))).)*$",invalidInputMatch:"<[!\\/?A-Za-z]|&#"},makeTemplateFromString:function(_1c,_1d){var _1e,_1f;if(typeof _1d==="undefined"||_1d===null){_1d="\r";}_1e=_1a.filter(_1c.split(_1d),function(_20){return typeof _20!=="undefined"&&_20!==null&&_19.trim(_20)!=="";});_1f=new Simplate(_1e);return _1f;},joinInvalidInputRegExpWith:function(_21){if(_21&&dojo.isString(_21)&&_21.length>0){return _19.substitute(this.regexp.invalidInputFmt,[_21]);}return _21;},getInvalidInputMatches:function(s){if(s&&dojo.isString(s)&&s.length>0){var _22=s.match(this.regexp.invalidInputMatch,"g");if(_22&&dojo.isArray(_22)){return _22;}}return [];},isSafeForPosting:function(s){if(s&&dojo.isString(s)){if(s.length===0){return true;}var _23=s.match(this.regexp.invalidInputMatch);if(_23===null){return true;}if(dojo.isArray(_23)&&_23.length===0){return true;}}if(!s&&s===null){return true;}return false;},makeSafeForPosting:function(s){var _24=this.getInvalidInputMatches(s);if(_24&&dojo.isArray(_24)&&_24.length>0){_1a.forEach(_24,function(_25){var _26=_25;if(_25.length>=2){_26=_25.substr(0,1)+" "+_25.substr(1);}if(_26!==_25){s=s.replace(_25,_26);}});}return s;},nameToPath:function(_27){var _28,_29,i,_2a;if(typeof _27!=="string"){return [];}if(Sage.Utility.nameToPathCache[_27]){return Sage.Utility.nameToPathCache[_27];}_28=_27.split(".");_29=[];for(i=0;i<_28.length;i++){_2a=_28[i].match(/([a-zA-Z0-9_$]+)\[([^\]]+)\]/);if(_2a){_29.push(_2a[1]);if(/^\d+$/.test(_2a[2])){_29.push(parseInt(_2a[2],10));}else{_29.push(_2a[2]);}}else{_29.push(_28[i]);}}Sage.Utility.nameToPathCache[_27]=_29.reverse();return Sage.Utility.nameToPathCache[_27];},expand:function(_2b,_2c){if(typeof _2c==="function"){return _2c.apply(_2b,Array.prototype.slice.call(arguments,2));}else{return _2c;}},getValue:function(o,_2d,_2e){_2e=(typeof _2e!=="undefined"&&_2e!==null)?_2e:"";var _2f=Sage.Utility.nameToPath(_2d).slice(0);var _30=o;while(_30&&_2f.length>0){var key=_2f.pop();if(typeof _30[key]!=="undefined"&&_30[key]!==null){_30=_30[key];}else{return _2e;}}return _30;},setValue:function(o,_31,val){var _32=o;var _33=Sage.Utility.nameToPath(_31).slice(0);while((typeof _32!=="undefined")&&_33.length>1){var key=_33.pop();if(_33.length>0){var _34=_33[_33.length-1];_32=_32[key]=(typeof _32[key]!=="undefined")?_32[key]:(typeof _34==="number")?[]:{};}}if(_32!==null&&typeof _33[0]!=="undefined"){_32[_33[0]]=val;}return o;},getPlainText:function(_35){var _36=function(a){if(!a){return "";}return a.replace(/ +/g," ").replace(/[\t]+/gm,"").replace(/[ ]+$/gm,"").replace(/^[ ]+/gm,"").replace(/\n+/g,"\n").replace(/\n+$/,"").replace(/^\n+/,"").replace(/\nNEWLINE\n/g,"\n\n").replace(/NEWLINE\n/g,"\n\n");};var _37=function(_38){var _39=function(_3a){return !(/[^\t\n\r ]/.test(_3a.nodeValue));};var ws=[];var _3b=function(_3c){for(var i=0;i<_3c.childNodes.length;i++){var n=_3c.childNodes[i];if(n.nodeType==3&&_39(n)){ws.push(n);}else{if(n.hasChildNodes()){_3b(n);}}}};_3b(_38);for(var i=0;i<ws.length;i++){ws[i].parentNode.removeChild(ws[i]);}};var sty=function(n,_3d){if(n.style[_3d]){return n.style[_3d];}var s=n.currentStyle||n.ownerDocument.defaultView.getComputedStyle(n,null);if(n.tagName=="SCRIPT"){return "none";}if(!s[_3d]){return "LI,P,TR".indexOf(n.tagName)>-1?"block":n.style[_3d];}if(s[_3d]=="block"&&n.tagName=="TD"){return "feaux-inline";}return s[_3d];};var _3e="table-row,block,list-item";var _3f=function(n){var s=sty(n,"display")||"feaux-inline";if(_3e.indexOf(s)>-1){return true;}return false;};var _40=function(n){if(/pre/.test(sty(n,"whiteSpace"))){t+=n.innerHTML.replace(/\t/g," ").replace(/\n/g," ");return "";}var s=sty(n,"display");if(s=="none"){return "";}var gap=_3f(n)?"\n":" ";t+=gap;for(var i=0;i<n.childNodes.length;i++){var c=n.childNodes[i];if(c.nodeType==3){t+=c.nodeValue;}if(c.childNodes.length){_40(c);}}t+=gap;return t;};_35=_35.cloneNode(true);_35.innerHTML=_35.innerHTML.replace(/<br>/g,"\n");var _41=_35.getElementsByTagName("p");for(var i=0;i<_41.length;i++){_41[i].innerHTML+="NEWLINE";}var t="";_37(_35);return _36(_40(_35));},debounce:function(_42,_43,_44){var _45;return function(){var _46=this,_47=arguments;var _48=function(){_45=null;if(!_44){_42.apply(_46,_47);}};if(_44&&!_45){_42.apply(_46,_47);}clearTimeout(_45);_45=setTimeout(_48,_43);};},extend:function(){var _49=arguments[0]||{},i=1,_4a=arguments.length,_4b=false,_4c;if(_49.constructor==Boolean){_4b=_49;_49=arguments[1]||{};i=2;}if(typeof _49!="object"&&typeof _49!="function"){_49={};}if(_4a==i){_49=this;--i;}for(;i<_4a;i++){if((_4c=arguments[i])!=null){for(var _4d in _4c){var src=_49[_4d],_4e=_4c[_4d];if(_49===_4e){continue;}if(_4b&&_4e&&typeof _4e=="object"&&!_4e.nodeType){_49[_4d]=Sage.Utility.extend(_4b,src||(_4e.length!=null?[]:{}),_4e);}else{if(_4e!==undefined){_49[_4d]=_4e;}}}}}return _49;},getCurrentEntityId:function(){var _4f=Sage.Services.getService("ClientEntityContext");var _50=_4f.getContext();return _50.EntityId;},getClientContextByKey:function(key){var res="";if(Sage.Services){var _51=Sage.Services.getService("ClientContextService");if((_51)&&(_51.containsKey(key))){res=_51.getValue(key);}}return res;},setClientContextByKey:function(key,_52){if(Sage.Services){var _53=Sage.Services.getService("ClientContextService");if(_53){if(_53.containsKey(key)){_53.setValue(key,_52);}else{_53.add(key,_52);}return true;}}return false;},getVirtualDirectoryName:function(){var reg=new RegExp(window.location.host+"/([A-Za-z0-9\\-_]+)/");var arr=reg.exec(window.location.href);if(arr){return arr[1];}return "";},getSDataService:function(_54,_55,_56,_57){return Sage.Data.SDataServiceRegistry.getSDataService(_54,_55,_56,_57);},appLoadHandler:function(_58,_59){Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(Sage.Utility.pageLoaded);Sys.WebForms.PageRequestManager.getInstance().add_pageLoading(Sage.Utility.pageLoading);Sys.WebForms.PageRequestManager.getInstance().add_initializeRequest(Sage.Utility.showRequestIndicator);Sys.WebForms.PageRequestManager.getInstance().add_endRequest(Sage.Utility.hideRequestIndicator);Sys.WebForms.PageRequestManager.getInstance().add_initializeRequest(window.AutoLogout.resetTimer);},pageLoaded:function(_5a,_5b){var _5c=_5b.get_panelsUpdated();if(typeof (_5c)==="undefined"){return;}for(var i=0;i<_5c.length;i++){dojo.parser.parse(_5c[i]);}},pageLoading:function(_5d,_5e){var _5f=_5e.get_panelsUpdating();if(typeof (_5f)==="undefined"){return;}for(var i=0;i<_5f.length;i++){var _60=_5f[i],_61=dijit.findWidgets(_60);dojo.forEach(_61,function(_62){_62.destroyRecursive(true);});}},destroyWidget:function(_63){var _64=dojo.attr(_63,"widgetId");if(dijit.byId(_64)){dijit.byId(_64).destroyRecursive();}},showRequestIndicator:function(){var _65=document.getElementById("asyncpostbackindicator");if(_65){_65.style.visibility="visible";}},hideRequestIndicator:function(_66,_67){var _68=dojo.byId("asyncpostbackindicator");if(_68){_68.style.visibility="hidden";}_15.handleEndRequestError(_67);},isAllowedNavigationKey:function(_69){return (_69==8||_69==9||_69==46||_69==37||_69==39);},restrictDecimalDigit:function(_6a,_6b,_6c){var _6d=_6a;if(typeof _6b==="undefined"){_6b=Sys.CultureInfo.CurrentCulture.numberFormat.NumberDecimalDigits;}if(_6b.length>1){var _6e=_6b.split(",");_6b=parseInt(_6e[1]);}if(typeof _6c==="undefined"){_6c=Sys.CultureInfo.CurrentCulture.numberFormat.NumberDecimalSeparator;}var _6f=_6a.indexOf(_6c)+1+_6b;if(_6b===0){_6f=_6f-1;}if(_6a.indexOf(")")>0){_6f+=1;}if(_6a.lastIndexOf(_6c)>-1){_6d=_6a.substr(0,_6f);}return _6d;},maximizeDecimalDigit:function(_70,_71,_72){var _73;var _74=_70;if(typeof _71==="undefined"){_71=Sys.CultureInfo.CurrentCulture.numberFormat.NumberDecimalDigits;}if(typeof _72==="undefined"){_72=Sys.CultureInfo.CurrentCulture.numberFormat.NumberDecimalSeparator;}if(_71>0&&_70.lastIndexOf(_72)==-1&&_70.length>0){_74=[_70,_72].join("");}var _75=_74.lastIndexOf(_72)+1+_71;if(_74.lastIndexOf(_72)>-1){_73=_75-_74.length;if(_73>0){for(var i=0;i<_73;i++){_74+=0;}}}return _74;},restrictToNumber:function(e,_76){var _77=Sys.CultureInfo.CurrentCulture.numberFormat;var _78=e.charCode||e.keyCode;var _79=e.keyChar;if(e.keyCode&&Sage.Utility.isAllowedNavigationKey(e.keyCode)){return true;}if((_78>=48&&_78<=57&&!e.shiftKey)||(_78>=96&&_78<=105&&!e.shiftKey)){return true;}if(_79===_77.NegativeSign||_78==109||_78==110){return true;}switch(_76){case "currency":if(_79==_77.CurrencyGroupSeparator||_79==_77.CurrencyDecimalSeparator){return true;}break;case "percent":if(_79==_77.PercentGroupSeparator||_79==_77.PercentDecimalSeparator){return true;}break;default:if(_79==_77.NumberGroupSeparator||_79==_77.NumberDecimalSeparator){return true;}break;}return false;},restrictToNumberOnKeyPress:function(e,_7a){if(e.keyCode&&Sage.Utility.isAllowedNavigationKey(e.keyCode)){return true;}var _7b=Sys.CultureInfo.CurrentCulture.numberFormat;var _7c=e.charCode||e.keyCode;var _7d=String.fromCharCode(_7c);var _7e="0123456789"+_7b.NegativeSign;switch(_7a){case "currency":_7e+=_7b.CurrencyGroupSeparator+_7b.CurrencyDecimalSeparator;break;case "percent":_7e+=_7b.PercentGroupSeparator+_7b.PercentDecimalSeparator;break;default:_7e+=_7b.NumberGroupSeparator+_7b.NumberDecimalSeparator;break;}return (_7e.indexOf(_7d)>=0);},Convert:function(){var _7f=/^(true|T)$/i,_80=/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(Z|(-|\+)(\d{2}):(\d{2}))/,_81=/^(\d{4})-(\d{2})-(\d{2})$/,_82=/\/Date\((-?\d+)(?:(-|\+)(\d{2})(\d{2}))?\)\//,pad=function(n){return n<10?"0"+n:n;},_83=function(str){return (str[0]==="0")?str.substring(1):str;};return {toBoolean:function(_84){return _7f.test(_84);},isDateString:function(_85){if(typeof _85!=="string"){return false;}return _80.test(_85)||_81.test(_85)||_82.test(_85);},dateToTimeless:function(d){var _86=new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),0,0,5);return _86;},toIsoStringFromDate:function(_87){if((_87.getHours()===0)&&(_87.getMinutes()===0)&&(_87.getSeconds()===5)){return _87.getFullYear()+"-"+pad(_87.getMonth()+1)+"-"+pad(_87.getDate())+"T00:00:05Z";}return _87.getUTCFullYear()+"-"+pad(_87.getUTCMonth()+1)+"-"+pad(_87.getUTCDate())+"T"+pad(_87.getUTCHours())+":"+pad(_87.getUTCMinutes())+":"+pad(_87.getUTCSeconds())+"Z";},toIsoStringFromDateNonUTC:function(_88){return _88.getFullYear()+"-"+pad(_88.getMonth()+1)+"-"+pad(_88.getDate())+"T"+pad(_88.getHours())+":"+pad(_88.getMinutes())+":"+pad(_88.getSeconds())+"Z";},toJsonStringFromDate:function(_89){return "/Date("+_89.getTime()+")/";},toDateFromString:function(_8a,_8b){if(typeof _8a!=="string"){return _8a;}var _8c,utc,h,m,_8d;if((_8c=_82.exec(_8a))){utc=new Date(parseInt(_8c[1]));if(_8b===true){if(_8c[2]){h=parseInt(_8c[3]);m=parseInt(_8c[4]);_8d=(h*60)+m;if(_8c[2]==="-"){_8d=-1*_8d;}utc.setMinutes(utc.getMinutes()+_8d);}}_8a=utc;}else{if((_8c=_80.exec(_8a))){utc=new Date(Date.UTC(parseInt(_8c[1]),parseInt(_83(_8c[2]))-1,parseInt(_83(_8c[3])),parseInt(_83(_8c[4])),parseInt(_83(_8c[5])),parseInt(_83(_8c[6]))));if(_8c[8]!=="Z"){h=parseInt(_8c[10],10);m=parseInt(_8c[11],10);_8d=(h*60)+m;if(_8c[9]==="-"){_8d=-1*_8d;}utc.setMinutes(utc.getMinutes()+_8d);}_8a=utc;}else{if((_8c=_81.exec(_8a))){_8a=new Date();_8a.setYear(parseInt(_8c[1]));_8a.setMonth(parseInt(_8c[2],10)-1);_8a.setDate(parseInt(_8c[3],10));_8a.setHours(0,0,0,0);}}}return _8a;},toArrayFromObject:function(_8e){if(_8e&&typeof _8e.length=="undefined"){var _8f=[];_8f.push(_8e);return _8f;}return _8e;}};}(),getModeId:function(){var _90=Sage.Services.getService("ClientContextService");if((_90)&&(_90.containsKey("modeid"))){var _91=_90.getValue("modeid");return _91.toLowerCase();}var u=document.location.href;var idx=u.indexOf("?");if(idx>0){var qry=u.substring(idx+1);var _92=qry.split("&");for(var i=0;i<_92.length;i++){var _93=_92[i].split("=");if(_93.length>1){if(_93[0].toLowerCase()==="modeid"){return _93[1];}}}}return "None";},getPageName:function(){var url=document.location.href;var _94=url.substring(url.lastIndexOf("/")+1);return _94;},openHelp:function(_95,_96){var url=Sage.Link.getHelpUrl(_95,_96);var _97=Sage.Link.getHelpUrlTarget();window.open(url,_97);},openPdfDoc:function(_98){var _99=Sage.Utility.getClientContextByKey("WebHelpUrlFmt");_99=_99.replace(_99.substring(_99.lastIndexOf("/")+1),"");var url=document.location.href;url=url.replace(url.substring(url.lastIndexOf("/")+1),"");window.open(url+_99+_98);},fragger:function(_9a,doc){if(typeof _9a!=="string"){return;}doc=doc||dojo.doc;var _9b=doc.createElement("div");var _9c=dojo._toDom(_9a,doc);_9b.appendChild(_9c);return _9b;},fragToDijits:function(_9d,ns){var _9e=dojo.parser.parse(_9d,{noStart:ns||true});return _9e;},strToDijits:function(tpl,ns){if(typeof tpl!=="string"){return;}var _9f=this.toMasterFrag(tpl);return this.fragToDijits(_9f,ns);},fragWalker:function walk(_a0,fn){fn(_a0);_a0=_a0.firstChild;while(_a0){_a1(_a0,fn);_a0=_a0.nextSibling;}},extract:function(obj,_a2){var _a3=(_a2===2),out=(_a3)?0:[],i;for(i in obj){if(_a3){out++;}else{if(window.has(obj,i)){out.push((_a2)?obj[i]:i);}}}return out;},keys:function(obj){return Sage.Utility.extract(obj);},size:function(obj){return Sage.Utility.extract(obj,2);},loadDetailsDialog:function(obj){Sage.ClientLinkHandler.request({request:"ShowDialog",type:obj.entityType,smartPart:obj.smartPart,entityId:obj.entityId,dialogTitle:obj.dialogTitle,isCentered:obj.isCentered,dialogTop:obj.dialogTop,dialogLeft:obj.dialogLeft,dialogHeight:obj.dialogHeight,dialogWidth:obj.dialogWidth});},values:function(obj){return Sage.Utility.extract(obj,1);},mixOwn:function(_a4,_a5){for(var p in _a5){if(_a5.hasOwnProperty(p)){_a4[p]=_a5[p];}}return _a4;},getPrecision:function(str){var _a6=str.match(/\.(\d+)/),_a7;if(_a6){_a7=parseInt(_a6[1],10);}return _a7?_a7:0;},htmlEncode:function(str){if(typeof str!="string"){return str;}if(!str){return "";}return str.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");},htmlDecode:function(str){if(typeof str!="string"){return str;}return str.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,"\"").replace(/&#39;/g,"'");},getSelectionInfo:function(){var _a8=dijit.byId("list");if(_a8){return _a8.getSelectionInfo();}return false;},Timezone_populatelist:function(_a9,_aa){var sel,_ab;if(_a9==="TimezoneList"){sel=dijit.byId(_a9);_ab=dojo.byId(_a9+"_Selected");}else{sel=$("#"+_a9+" #TimezoneList")[0];sel=dijit.getEnclosingWidget(sel);_ab=$("#"+_a9).find("input").filter("[@type=hidden]")[0];}if(sel&&typeof sel!=="undefined"&&sel.options.length==1){sel.options.length=0;var _ac=this;var _ad=function _ad(){var _ae=[];var _af=null;dojo.forEach(_ac._timeZones,function(tz){var _b0={label:tz.Displayname,value:tz.Keyname,selected:false};_ae.push(_b0);if(tz.Keyname==_ab.value){_af=tz.Keyname;_b0.selected=true;}});sel.addOption(_ae);if(_af!==null){sel.set("value",_af);}dojo.connect(sel,"onBlur",function(){_ab.value=sel.get("value");});dojo.connect(sel,"onChange",function(){if(_aa){_ab.value=sel.get("value");__doPostBack(sel.id,"");}});};if(this._timeZones!==null){_ad();}else{dojo.xhrGet({url:"slxdata.ashx/slx/crm/-/timezones/p",handleAs:"json",load:function(_b1){_ac._timeZones=_b1;_ad();},error:function(_b2,_b3){_15.handleHttpError(_b2,_b3);return _b2;}});}}return true;},getTimeZones:function(_b4){var _b5=JSON.parse(sessionStorage.getItem("_timeZones"));if(_b5&&_b5.length>0){_b4(_b5);}else{dojo.xhrGet({url:"slxdata.ashx/slx/crm/-/timezones/p",handleAs:"json",load:function(_b6){sessionStorage.setItem("_timeZones",JSON.stringify(_b6));_b4(_b6);},error:function(_b7,_b8){_15.handleHttpError(_b7,_b8);_b4(false);}});}},truncate:function(val,num){var i=0,len=val.length,res=[];if(typeof num==="string"){num=parseInt(num,10);}if(typeof val==="string"){return val.length>num?val.slice(0,num)+"...":val;}if(val.map&&typeof val.map==="function"){return val.map(function(v,i,c){return v.length>num?v.slice(0,num)+"...":v;});}else{for(i;i<len;i++){res.push(val[i].slice(0,num)+"...");}return res;}},Dashboard:{counter:1,generateString:function(str){return str+Sage.Utility.Dashboard.counter++;},getColors:function(num){if(!num){return;}var _b9=["blue 6","green 3","pink 5","orange 2","blue 4","green 6","pink 2","orange 7","blue 3","green 8","pink 4","orange 3","blue 7","green 5","pink 8","orange 6","blue 2","green 7","pink 3","orange 8","blue 5","green 2","pink 6","orange 5","blue 8","green 4","pink 7","orange 4"],_ba=["green 5","blue 3","green 7","blue 6","green 3","blue 7"],ret=[],i,j;if(num<=6){for(i=0;i<num;i++){ret[i]=Sage.Utility.Dashboard.colorPalette[_ba[i]];}}else{for(j=0;j<num;j++){ret[j]=Sage.Utility.Dashboard.colorPalette[_b9[j]];}}return ret;},getColor:function(idx){var _bb=["blue 6","green 3","pink 5","orange 2","blue 4","green 6","pink 2","orange 7","blue 3","green 8","pink 4","orange 3","blue 7","green 5","pink 8","orange 6","blue 2","green 7","pink 3","orange 8","blue 5","green 2","pink 6","orange 5","blue 8","green 4","pink 7","orange 4"];return Sage.Utility.Dashboard.colorPalette[_bb[idx]];},colorPalette:{"blue 0":"dfe8f6","blue 6":"00a1de","green 3":"c1d59f","pink 5":"a44e81","orange 2":"f8d6aa","blue 4":"55c0e9","green 6":"69923a","pink 2":"e2afcd","orange 7":"af6200","blue 3":"80d0ef","green 8":"35491d","pink 4":"c55e9b","orange 3":"f4c180","blue 7":"0079a7","green 5":"86a85c","pink 8":"421f34","orange 6":"e98300","blue 2":"aae0f4","green 7":"4f6e2c","pink 3":"d486b4","orange 8":"754200","blue 5":"2bb1e4","green 2":"d6e3bf","pink 6":"833f67","orange 5":"ed982b","blue 8":"00516f","green 4":"a4bf7d","pink 7":"632f4e","orange 4":"f0ac55"}},isBoolean:function(_bc){return typeof _bc==="boolean";},isDefined:function(_bd){return typeof _bd!=="undefined";},isEmptyString:function(_be){return (dojo.isString(_be)&&_be==="");},isStringWithLength:function(_bf){return (dojo.isString(_bf)&&_bf!=="");},isTrue:function(_c0){return (this.isBoolean(_c0))?(_c0===true):false;},getOwnerName:function(_c1){if(!_c1){return "";}this.buildOwnersCache();var _c2=_c1.replace(/^\s+|\s+$/g,"");var _c3=this._ownersCache[_c2];return _c3?_c3.name:_c1;},buildOwnersCache:function(_c4,_c5){if(sessionStorage.getItem(this._ownersCacheKey)){this._ownersCache=JSON.parse(sessionStorage.getItem(this._ownersCacheKey));return;}var _c6=this;if(!this._ownersCache){_c6._ownersCache={};}var _c7=100;_c4=_c4||_c7;_c5=_c5||1;return xhr("GET",{url:_19.substitute("slxdata.ashx/slx/dynamic/-/owners?select=Type&orderBy=$key&format=json&count=${0}&startIndex=${1}",[_c4,_c5]),handleAs:"json",sync:true}).then(function(_c8){var _c9=_c8.$totalResults;for(var i=0;i<_c8.$resources.length;i++){var u=_c8.$resources[i];_c6._ownersCache[u.$key.trim()]={type:u.Type,name:u.$descriptor};}if(_c9>_c7&&_c9>=(_c5+_c4)){_c5=_c5+_c4;_c6.buildOwnersCache(_c4,_c5);}sessionStorage.setItem(_c6._ownersCacheKey,JSON.stringify(_c6._ownersCache));});},getUserName:function(_ca){if(!_ca){return "";}this.buildUserCache();var _cb=_ca.replace(/^\s+|\s+$/g,"");var u=this._userCache[_cb];return u?u.name:_ca;},buildUserCache:function(_cc,_cd){if(sessionStorage.getItem(this._userCacheKey)){this._userCache=JSON.parse(sessionStorage.getItem(this._userCacheKey));return;}var _ce=this;if(!this._userCache){_ce._userCache={};}var _cf=100;_cc=_cc||_cf;_cd=_cd||1;return xhr("GET",{url:_19.substitute("slxdata.ashx/slx/dynamic/-/users?select=Enabled&format=json&Count=${0}&StartIndex=${1}",[_cc,_cd]),handleAs:"json",sync:true}).then(function(_d0){var _d1=_d0.$totalResults;for(var i=0;i<_d0.$resources.length;i++){var u=_d0.$resources[i];_ce._userCache[u.$key]={enabled:u.Enabled,name:u.$descriptor};}if(_d1>_cf&&_d1>=(_cd+_cc)){_cd=_cd+_cc;_ce.buildUserCache(_cc,_cd);}sessionStorage.setItem(_ce._userCacheKey,JSON.stringify(_ce._userCache));});},isItemInArray:function include(arr,_d2){for(var i=0;i<arr.length;i++){if(_1b.trim(arr[i])==_1b.trim(_d2)){return true;}}}});_18(function(){Sage.Utility.appLoadHandler();});return Sage.Utility;});},"Sage/Data/SDataServiceRegistry":function(){define(["Sage/Utility","dojo/json"],function(_d3,_d4){var _d5={},_d6=false;Sage.namespace("Data.SDataServiceRegistry");Sage.Data.SDataServiceRegistry={registerService:function(_d7,s,o){o=o||{};var _d8=s instanceof Sage.SData.Client.SDataService?s:new Sage.SData.Client.SDataService(s);_d5[_d7]=_d8;if(o.isDefault||!_d6){_d6=_d8;}return _d8;},hasService:function(_d9){return (typeof _d5[_d9]!=="undefined");},getService:function(_da){if(typeof _da==="string"&&_d5[_da]){return _d5[_da];}return _d6;},_createCacheKey:function(_db){var key=_db.build();key=key.replace(/[^a-zA-Z0-9_]/g,"");var ns=_db.getResourceKind().text;key=ns+"_"+key;return key;},_loadSDataRequest:function(_dc,o){var key=this._createCacheKey(_dc);var _dd=this._getFromLocalStorage(key);if(_dd){o.result=_dd;}},_cacheSDataRequest:function(_de,o,_df){if(/get/i.test(o.method)&&typeof _df==="object"){var key=this._createCacheKey(_de);this._saveToLocalStorage(key,_df);}},_saveToLocalStorage:function(key,_e0){sessionStorage.setItem(key,_d4.stringify(_e0));},_getFromLocalStorage:function(key){return _d4.parse(sessionStorage.getItem(key));},_removeFromLocalStorage:function(_e1){var _e2=sessionStorage.length;var _e3=[];for(var i=0;i<_e2;i++){var key=sessionStorage.key(i);if(key.indexOf(_e1)>-1){_e3.push(key);}}for(var j=0;j<_e3.length;j++){sessionStorage.removeItem(_e3[j]);}},getSDataService:function(_e4,_e5,_e6,_e7){_e5=_e4==="proxy"?true:_e5;_e4=_e4||"dynamic";var _e8="SDataService_"+_e4;_e8=_e7?[_e8,"_cacheResult"].join(""):_e8;if(this.hasService(_e8)&&!_e5){return this.getService(_e8);}var _e9=true;if(typeof _e6==="boolean"){_e9=_e6;}var svc=new Sage.SData.Client.SDataService({serverName:window.location.hostname,virtualDirectory:Sage.Utility.getVirtualDirectoryName()+"/slxdata.ashx",applicationName:"slx",contractName:_e4,port:window.location.port&&window.location.port!==80?window.location.port:false,protocol:/https/i.test(window.location.protocol)?"https":false,json:_e9});if(_e7){svc.on("beforerequest",this._loadSDataRequest,this);svc.on("requestcomplete",this._cacheSDataRequest,this);}if(!_e5){this.registerService(_e8,svc);}return svc;}};return Sage.Data.SDataServiceRegistry;});},"Sage/UI/Dialogs":function(){define(["dijit/form/Button","dijit/Dialog","dijit/ProgressBar","dijit/form/TextBox","dijit/form/ValidationTextBox","dojo/i18n!./nls/Dialogs","dojo/_base/array"],function(_ea,_eb,_ec,_ed,_ee,_ef,_f0){Sage.namespace("UI.Dialogs");dojo.mixin(Sage.UI.Dialogs,{raiseQueryDialog:function(_f1,_f2,_f3,_f4,_f5,_f6){return this.raiseQueryDialogExt({title:_f1,query:_f2,callbackFn:_f3,yesText:_f4,noText:_f5,icon:_f6});},raiseQueryDialogExt:function(_f7){var dlg=dijit.byId("queryDialog"),_f8,_f9,_fa,_fb,i,_fc,_fd,_fe;if(dlg){dlg.destroyRecursive();}_f8=(_f7&&typeof _f7.width==="number")?_f7.width:700;_f9=new dijit.Dialog({id:"queryDialog",title:_f7.title,style:_f7.style||{"width":_f8}});_fa=function(_ff){_f9.hide();if(!_f7.callbackFn||typeof _f7.callbackFn!=="function"){return;}if(_ff){_f7.callbackFn.call(_f7.scope||this,true);}else{_f7.callbackFn.call(_f7.scope||this,false);}};_f9.on("hide",function(){_f9.destroyRecursive();});if(_f7.icon){var _100=new dojo.create("div",{id:"queryDialog-iconDiv","class":"messageIcon "+_f7.icon});_f9.containerNode.appendChild(_100);}_fb=[];if(_f7.query instanceof Array){for(i=0;i<_f7.query.length;i++){_fb.push(dojo.create("div",{id:"queryDialog-questionDiv_"+i,innerHTML:_f7.query[i]}));}}else{var div=dojo.create("div",{id:"queryDialog-questionDiv",innerHTML:_f7.query});var _101=div.getElementsByTagName("script");_f0.forEach(_101,function(_102){var src=_102.getAttribute("src");if(src===null&&_102.innerHTML!==""){eval(_102.innerHTML);}else{if(src!==null&&_102.innerHTML===""){var head=document.getElementsByTagName("head")[0];var _103=dojo.clone(_102);(head||document.body).appendChild(_103);}else{if(typeof console!=="undefined"){}}}div.removeChild(_102);});_fb.push(div);}_fc=new dojo.create("div",{id:"queryDialog-buttonDiv",style:"text-align: "+(_f7.align||"center")+"; margin-top: 10px"});_fd=new dijit.form.Button({label:_f7.yesText||_ef.yesText,id:"qry_yesButton",onClick:function(_104){_fa(true);}});_fc.appendChild(_fd.domNode);if((_f7.noText)||(_f7.showNoButton)){_fe=new dijit.form.Button({label:_f7.noText||_ef.noText,id:"qry_noButton",style:"padding-left: 10px",onClick:function(_105){_fa(false);}});_fc.appendChild(_fe.domNode);}dojo.forEach(_fb,function(_106){_f9.containerNode.appendChild(_106);});_f9.containerNode.appendChild(_fc);_f9.show();},raiseInputDialog:function(_107,_108,_109,_10a,_10b,_10c,_10d,_10e){return this.raiseInputDialogExt({title:_107,query:_108,callbackFn:_109,yesText:_10a,noText:_10b,defaultValue:_10c,regExp:_10d,invalidMessage:_10e});},raiseInputDialogExt:function(opts){var _10f,_110,_111,_112,_113,_114,_115;_10f=dijit.byId("inputDialog");if(_10f){_10f.destroyRecursive();}_10f=new dijit.Dialog({id:"inputDialog",title:opts.title});_110=dojo.create("div",{id:"inputDialog-questionDiv",innerHTML:opts.query});_111=(opts.regExp&&dojo.isString(opts.regExp))?new dijit.form.ValidationTextBox({id:"inputDialog-inputBox",value:opts.defaultValue||"",style:"margin-top: 8px",regExp:opts.regExp||"",invalidMessage:opts.invalidMessage||""}):new dijit.form.TextBox({id:"inputDialog-inputBox",value:opts.defaultValue||"",style:"margin-top: 8px"});_112=function(_116){if(_116){opts.callbackFn(true,_111.get("value"));}else{opts.callbackFn(false,_111.get("value"));}_10f.hide();};_113=new dijit.form.Button({label:opts.yesText||_ef.yesText,id:"inp_yesButton",onClick:function(_117){_112(true);}});_114=new dijit.form.Button({label:opts.noText||_ef.noText,id:"inp_noButton",onClick:function(_118){_112(false);}});_115=new dojo.create("div",{id:"inputDialog-buttonDiv"});_10f.on("hide",function(){_10f.destroyRecursive();});_115.appendChild(_113.domNode);_115.appendChild(_114.domNode);_10f.containerNode.appendChild(_110);_10f.containerNode.appendChild(_111.domNode);_10f.containerNode.appendChild(_115);if(opts.closable===false){dojo.destroy(_10f.closeButtonNode);}_10f.show();},showProgressBar:function(opts){var iMax=(opts&&typeof opts.maximum!=="undefined")?opts.maximum:100,prog,_119=(opts&&typeof opts.width==="number")?opts.width:300,_11a=(opts&&typeof opts.width==="number")?opts.height:125,_11b=dojo.string.substitute("width: ${0}px; height: ${1}px",[_119,_11a]),_11c=(opts&&typeof opts.canclose==="boolean")?opts.canclose:true,_11d,sMsg,_11e,bar,msg;if(!dijit.byId("progressDialog")){prog=new dijit.ProgressBar({id:"progressDialogBar",style:"margin-top: 10px; margin-bottom: 10px",indeterminate:(opts&&opts.indeterminate!=="undefined")?opts.indeterminate:false,maximum:iMax});_11d=new dijit.Dialog({id:"progressDialog",title:opts.title,style:_11b,closable:_11c});if(opts&&typeof opts.showmessage==="boolean"&&opts.showmessage){sMsg=(opts&&typeof opts.message==="string")?opts.message:"";_11e=new dojo.create("div",{innerHTML:sMsg,style:"text-align: left; margin-top: 10px; margin-bottom: 10px",id:"progressDialogMessage"});_11d.containerNode.appendChild(_11e);}_11d.containerNode.appendChild(prog.domNode);_11d.show();}bar=dijit.byId("progressDialogBar");bar.update({progress:opts.pct,title:opts.title});if(opts&&typeof opts.showmessage==="boolean"&&opts.showmessage&&typeof opts.message==="string"){msg=dojo.byId("progressDialogMessage");if(msg){msg.innerHTML=opts.message;}}},closeProgressBar:function(opts){var dlg=dijit.byId("progressDialog");if(dlg){dlg.hide();dlg.destroyRecursive();}},alert:function(msg,_11f,icon){var opts={title:_11f||"Infor CRM",query:msg,callbackFn:false,yesText:_ef.okText||"OK",noText:false,scope:window,icon:icon||"noIcon",style:{width:"700px"}};Sage.UI.Dialogs.raiseQueryDialogExt(opts);},showInfo:function(msg,_120){this.alert(msg,_120,"infoIcon");},showWarning:function(msg,_121){this.alert(msg,_121,"warningIcon");},showError:function(msg,_122){this.alert(msg,_122,"errorIcon");}});Sage.WebClientMessageService=function(_123){};Sage.WebClientMessageService.prototype.hideClientMessage=function(){if(typeof console!=="undefined"){}};Sage.WebClientMessageService.prototype.showClientMessage=function(_124,msg,fn,_125){if(typeof console!=="undefined"){}if(typeof _124==="object"){Sage.UI.Dialog.raiseQueryDialogEx(_124);}var o={title:(typeof msg==="string")?_124:"",query:(typeof msg==="string")?msg:_124,callbackFn:fn,yesText:_ef.yesText||"Yes",noText:_ef.noText||"No",scope:_125};Sage.UI.Dialogs.raiseQueryDialogExt(o);};Sage.Services.addService("WebClientMessageService",new Sage.WebClientMessageService());return Sage.UI.Dialogs;});},"Sage/Utility/ErrorHandler":function(){define(["Sage/Utility","Sage/UI/Dialogs","dojo/io-query","dojo/string","dojo/_base/array"],function(_126,_127,_128,_129,_12a){Sage.namespace("Utility.ErrorHandler");dojo.mixin(Sage.Utility.ErrorHandler,{_debugEndRequest:false,_configuration:{isDebug:false,preemption:{enabled:true,allowAuthRedirect:true,handledStatusCodes:"577,578,579,580,581,582",showPreemptedErrorMsg:false,showInternalServerErrorMsg:false,showUnhandledMessagingServiceExceptionMsg:true},authenticationRedirectUrl:null,showExtendedValidationException:false,showExtendedRoleAccessDeniedException:false},_fmtSlxErrorId:function(_12b){if(Sage.Utility.isStringWithLength(_12b)){if(this._configuration.isDebug){return _129.substitute("\r\n\r\nSaleslogix Error Id: <a href=\"SLXErrorLookupService.asmx/GetEventLogError?slxErrorId=${0}\" target=\"_blank\">${0}</a>",[_12b]);}else{return _129.substitute("\r\n\r\nSaleslogix Error Id: ${0}",[_12b]);}}return "";},_fmtStackTrace:function(_12c){if(this._configuration.isDebug&&Sage.Utility.isStringWithLength(_12c)){var _12d=Sage.Utility.htmlEncode(_12c).replace(/(\r\n)/g,"&#13;&#10;").trim();return _129.substitute("\r\n\r\nStack trace:\r\n<textarea id=\"StackTrace\" cols=\"20\" name=\"StackTrace\" readonly=\"readonly\" rows=\"1\" style=\"width: 100%; height: 200px; font-family: 'Courier New', Courier, monospace; font-size: small; background-color: #F2F2F2; color: #444444; 1px: ; opacity: 0.8; -moz-box-sizing: border-box; box-sizing: border-box;\" unselectable=\"off\" wrap=\"off\">${0}</textarea>",[_12d]);}return "";},_mixinConfig:function(){if(window.errorHandlerConfig&&typeof window.errorHandlerConfig==="object"){dojo.mixin(this._configuration,window.errorHandlerConfig);}},_preemptError:function(xhr,o){try{var _12e=this.getHttpStatusInfo(xhr,o);if(this._configuration.isDebug&&typeof console!=="undefined"){}if(!(_12e&&typeof _12e==="object"&&_12e.hasOwnProperty("sdataError"))){return false;}var _12f=function(_130,_131){if(_130&&typeof _130==="object"&&typeof xhr.getResponseHeader!=="undefined"&&_131&&dojo.isString(_131)){var sUrl=_130.getResponseHeader(_131);if(sUrl&&Sage.Utility.isStringWithLength(sUrl)){return sUrl;}}return null;};var _132=function(_133){return _12f(_133,"Sage-SalesLogix-Exception-Redirect");};var _134=function(_135){return _12f(_135,"Sage-SalesLogix-Error-Id");};var _136=function(url){if(typeof console!=="undefined"){}window.location=url;};var _137;if((this.isSDataExceptionDiagnoses(_12e.sdataError.applicationCode)&&(_12e.status==500)&&this._configuration.preemption.showUnhandledMessagingServiceExceptionMsg)){this.showStatusInfoError(_12e);return true;}switch(_12e.status){case 401:if(typeof console!=="undefined"){console.error("Unauthorized (401): %o",_12e.url);}if(this.isConfiguredToHandle(_12e.status)){this.showStatusInfoError(_12e);return true;}return false;case 403:if(typeof console!=="undefined"){console.error("Forbidden (403): %o",_12e.url);}if(this.isConfiguredToHandle(_12e.status)){this.showStatusInfoError(_12e);return true;}return false;case 404:if(typeof console!=="undefined"){console.error("Not Found (404): %o",_12e.url);}if(this.isConfiguredToHandle(_12e.status)){this.showStatusInfoError(_12e);return true;}return false;case 408:if(typeof console!=="undefined"){console.error("Request Timeout: %o",_12e.url);}if(this.isConfiguredToHandle(_12e.status)){this.showStatusInfoError(_12e);return true;}return false;case 500:if(typeof console!=="undefined"){console.error("Internal Server Error (500) - HTTP Info: %o",_12e);}if((this.isSDataExceptionDiagnoses(_12e.sdataError.applicationCode)&&this._configuration.preemption.showUnhandledMessagingServiceExceptionMsg)||this._configuration.preemption.showInternalServerErrorMsg){this.showStatusInfoError(_12e);return true;}return false;case 575:if(typeof console!=="undefined"){console.error("AuthTokenNullException (575) - Saleslogix Error Id: %o; HTTP Info: %o",_134(xhr),_12e);}if(this._configuration.preemption.allowAuthRedirect){_137=_132(xhr);if(_137!==null){_136(_137);return true;}}return false;case 576:if(typeof console!=="undefined"){console.error("BaseException (576) - Saleslogix Error Id: %o; HTTP Info: %o",_134(xhr),_12e);}if(this._configuration.preemption.showPreemptedErrorMsg){this.showStatusInfoError(_12e);return true;}return false;case 577:if(typeof console!=="undefined"){console.error("RoleAccessDeniedException (577) - Saleslogix Error Id: %o; HTTP Info: %o",_134(xhr),_12e);}if(this.isConfiguredToHandle(_12e.status)){this.showStatusInfoError(_12e);return true;}return false;case 578:if(typeof console!=="undefined"){console.error("ValidationException (578) - Saleslogix Error Id: %o; HTTP Info: %o",_134(xhr),_12e);}if(this.isConfiguredToHandle(_12e.status)){this.showStatusInfoError(_12e);return true;}return false;case 579:if(typeof console!=="undefined"){console.error("UserObservableException (579) - Saleslogix Error Id: %o; HTTP Info: %o",_134(xhr),_12e);}if(this.isConfiguredToHandle(_12e.status)){this.showStatusInfoError(_12e);return true;}return false;case 580:if(typeof console!=="undefined"){console.error("HttpRequestValidationException (580) - Saleslogix Error Id: %o; HTTP Info: %o",_134(xhr),_12e);}if(this.isConfiguredToHandle(_12e.status)){this.showStatusInfoError(_12e);return true;}return false;case 581:if(typeof console!=="undefined"){console.error("StringOrBinaryDataWouldBeTruncatedException (581) - Saleslogix Error Id: %o; HTTP Info: %o",_134(xhr),_12e);}if(this.isConfiguredToHandle(_12e.status)){this.showStatusInfoError(_12e);return true;}return false;case 582:if(typeof console!=="undefined"){console.error("AccessException (582) - Saleslogix Error Id: %o; HTTP Info: %o",_134(xhr),_12e);}if(this.isConfiguredToHandle(_12e.status)){this.showStatusInfoError(_12e);return true;}return false;default:if(typeof console!=="undefined"){}if(this.isConfiguredToHandle(_12e.status)){this.showStatusInfoError(_12e);return true;}return false;}}catch(e){if(typeof console!=="undefined"){}return false;}},init:function(){this._mixinConfig();if(this._configuration.preemption.enabled){if(typeof console!=="undefined"){}if(window.dojoConfig&&window.dojoConfig.ioPublish&&typeof window.dojoConfig.ioPublish==="boolean"&&window.dojoConfig.ioPublish===true){dojo.subscribe("/dojo/io/error",function(dfd,_138){if(dfd&&typeof dfd==="object"&&typeof dfd.ioArgs==="object"){if((Sage.Utility.ErrorHandler._hasErrorHandler(dfd.ioArgs.url)===false)||(dfd.ioArgs.xhr.status===575)){Sage.Utility.ErrorHandler._preemptError(dfd.ioArgs.xhr,{url:dfd.ioArgs.url});}}return _138;});}else{(function(){var _139=dojo.xhr;dojo.xhr=function(_13a,args,_13b){return _139.apply(dojo,arguments).addErrback(function(err){if(err&&typeof err==="object"&&(err instanceof Error)&&typeof err.xhr==="object"){var sUrl=(args&&args.url)?args.url||"":"";if((Sage.Utility.ErrorHandler._hasErrorHandler(sUrl)===false)||(err.xhr.status===575)){Sage.Utility.ErrorHandler._preemptError(err.xhr,{url:sUrl});}}return err;});};})();}(function(){var _13c=Sage.SData.Client.Ajax.request;Sage.SData.Client.Ajax.request=function(o){dojo.mixin(o,{__failure:null,__failureHandler:function(_13d,opt){var _13e=false;if(opt.__failure&&typeof opt.__failure==="function"){try{opt.__failure.call(opt.scope||this,_13d,opt);}catch(e){if(typeof console!=="undefined"){console.error("There was an error calling the original failure() handler: %o",e);}if(e instanceof ReferenceError){_13e=true;}}}var sUrl=opt.url;if((Sage.Utility.ErrorHandler._hasErrorHandler(sUrl)===false)||(_13d.status===575)){if(_13e){Sage.Utility.ErrorHandler.handleHttpError(_13d,opt);}else{Sage.Utility.ErrorHandler._preemptError(_13d,opt);}}return _13d;}});if(typeof o.failure==="function"){o.__failure=o.failure;}o.failure=o.__failureHandler;return _13c.apply(this,arguments);};})();if(typeof $==="function"){$(function(){jQuery(this).ajaxError(function(_13f,_140,_141,_142){var sUrl=(typeof _141==="object")?(_141.url||""):"";var _143={url:sUrl};if((Sage.Utility.ErrorHandler._hasErrorHandler(sUrl)===false)||(_140.status===575)){Sage.Utility.ErrorHandler._preemptError(_140,_143);}});});}}},_getInternalHttpStatus:function(_144){if(_144&&typeof _144==="object"&&_144.hasOwnProperty("status")&&(isNaN(_144.status)===false)){if(typeof _144.sdataError==="object"&&this.isSDataExceptionDiagnoses(_144.sdataError.applicationCode)&&typeof _144.sdataError.appInfo==="object"&&typeof _144.sdataError.appInfo.exceptionKind==="string"){switch(_144.sdataError.appInfo.exceptionKind){case "AuthTokenNullException":return 575;case "BaseException":if(Number(_144.status)==500){return 576;}else{return Number(_144.status);}break;case "RoleAccessDeniedException":return 577;case "ValidationException":return 578;case "UserObservableException":return 579;case "HttpRequestValidationException":return 580;case "StringOrBinaryDataWouldBeTruncatedException":return 581;case "AccessException":return 582;default:return Number(_144.status);}}else{return Number(_144.status);}}return -1;},_getStatusInfoOptions:function(opt){var _145={"message":"","url":""};if(opt&&dojo.isObject(opt)){dojo.mixin(_145,opt);}return _145;},_handleAsDojoXhrHttpError:function(_146,_147,opt){var _148=this._getStatusInfoOptions(opt);var _149="";if(_146&&dojo.isObject(_146)){_149=_146.message||"";}if(_149!==""&&_148.message!==""){_148.message=_148.message+" "+_149;}else{_148.message=_149;}var xhr=(_147&&dojo.isObject(_147)&&_147.xhr&&dojo.isObject(_147.xhr))?_147.xhr:null;if(_148.url===""&&xhr!==null&&dojo.isString(_147.url)){_148.url=_147.url;}this._handleAsHttpError(xhr,null,_148);},_handleAsHttpError:function(xhr,_14a,_14b){var _14c=this.getHttpStatusInfo(xhr,_14a);if(_14c!==null){this.showStatusInfoError(_14c,_14b);}else{var _14d=(_14b&&dojo.isObject(_14b)&&Sage.Utility.isStringWithLength(_14b.message))?_14b.message:"There was an unknown error in response to an HTTP request.";_127.showError(_14d);}},_hasErrorHandler:function(url){var _14e="HASERRORHANDLER";if(url&&dojo.isString(url)&&url.toUpperCase().indexOf(_14e)!=-1){var _14f=url.substring(url.indexOf("?")+1,url.length);if(_14f!==""){var _150=_128.queryToObject(_14f.toUpperCase());if(_150&&dojo.isObject(_150)){return _150[_14e]==="TRUE";}}}return false;},handleEndRequestError:function(args){if(this._debugEndRequest&&typeof console!=="undefined"){}if(args&&typeof args==="object"&&typeof args.get_error==="function"&&args.get_error()!==null){try{function _151(msg){if(msg&&dojo.isString(msg)){return msg.replace("Sys.WebForms.PageRequestManagerServerErrorException: ","").replace("Sys.WebForms.PageRequestManagerParserErrorException: ","").replace("Sys.WebForms.PageRequestManagerTimeoutException: ","");}return msg;};switch(args.get_error().name){case "Sys.WebForms.PageRequestManagerTimeoutException":case "Sys.WebForms.PageRequestManagerParserErrorException":_127.showError(_151(args.get_error().message));args.set_errorHandled(true);return;}var _152=_151(args.get_error().message);var _153=args.get_error().httpStatusCode;if(_152==="${AjaxLoginRedirect}"||_152==="${LoginRedirect}"||_153==401||_153==575){if(this._configuration.preemption.allowAuthRedirect){var _154=this._configuration.authenticationRedirectUrl||"Login.aspx";if(typeof console!=="undefined"){}args.set_errorHandled(true);window.location=_154;return;}}var _155=args.get_response()!==null;var _156=_155?args.get_response().get_timedOut():false;var _157=_155?args.get_response().get_aborted():false;var _158=_155?args.get_response().get_statusCode():-1;var _159=_155?args.get_response().get_responseAvailable():false;if(this._debugEndRequest&&typeof console!=="undefined"){}if(_158===0||_157){args.set_errorHandled(true);return;}var _15a=_159?(args.get_response().hasOwnProperty("_xmlHttpRequest")&&args.get_response()._xmlHttpRequest!==null):false;if(this._debugEndRequest&&typeof console!=="undefined"){}if(_15a||_156){var xhr=args.get_response()._xmlHttpRequest;if(this._debugEndRequest&&typeof console!=="undefined"){}if(_158==200||_156){if(this._debugEndRequest&&typeof console!=="undefined"){}_127.showError(_151(args.get_error().message));args.set_errorHandled(true);return;}var _15b=this.isConfiguredToHandle(_158,xhr);if(this._debugEndRequest&&typeof console!=="undefined"){}if(_15b){if(this._debugEndRequest&&typeof console!=="undefined"){}this._preemptError(xhr);}else{if(this._debugEndRequest&&typeof console!=="undefined"){}this.handleHttpError(xhr);}args.set_errorHandled(true);return;}if(this._debugEndRequest&&typeof console!=="undefined"){}_127.showError(_151(args.get_error().message));args.set_errorHandled(true);}catch(e){if(typeof console!=="undefined"){console.error("There was an error in handleEndRequestError(): %o",e);}}}else{if(this._debugEndRequest&&typeof console!=="undefined"){}}},handleHttpError:function(arg1,arg2,_15c){var _15d=(arg1&&dojo.isObject(arg1)&&typeof arg1.getResponseHeader!=="undefined");if(_15d){this._handleAsHttpError(arg1,arg2,_15c);}else{this._handleAsDojoXhrHttpError(arg1,arg2,_15c);}},getInterceptedError:function(_15e,_15f){if(!Sage.Utility.isStringWithLength(_15e)){return null;}if(Sage.Utility.isTrue(_15f)){var obj=dojo.fromJson(_15e);if(obj&&typeof obj==="object"){return obj;}}else{return {"text":_15e};}return null;},getSDataDiagnosis:function(_160,_161){if(!Sage.Utility.isStringWithLength(_160)){return null;}var obj;if(Sage.Utility.isTrue(_161)){var xml=new XML.ObjTree();obj=xml.parseXML(_160);if(obj&&typeof obj==="object"&&obj.hasOwnProperty("sdata:diagnoses")){obj=obj["sdata:diagnoses"]["sdata:diagnosis"];if(!obj||typeof obj!=="object"){return null;}var _162=function(prop){var _163=obj.hasOwnProperty(prop)?obj[prop]:"";if(_163&&dojo.isString(_163)){if(prop==="stackTrace"){if(!this._configuration.isDebug){return "";}}return _163;}return "";};return {"severity":_162("sdata:severity"),"sdataCode":_162("sdata:sdataCode"),"applicationCode":_162("sdata:applicationCode"),"message":_162("sdata:message"),"stackTrace":_162("sdata:stackTrace"),"payloadPath":_162("sdata:payloadPath")};}}else{obj=dojo.fromJson(_160);if(obj&&dojo.isArray(obj)&&obj.length>0&&typeof obj[0]==="object"&&obj[0].hasOwnProperty("sdataCode")){return obj[0];}}return null;},getHttpStatusInfo:function(xhr,_164){var _165=(xhr&&dojo.isObject(xhr)&&typeof xhr.getResponseHeader!=="undefined");if(!_165){return null;}var _166=this.safeGetPropValue(xhr,"status",-1);var _167=this.safeGetPropValue(xhr,"statusText","Unknown HTTP status. Possible timeout.");var _168={"message":_129.substitute("HTTP status: ${0} (${1}).",[_167,_166]),"status":_166,"statusText":_167,"url":(_164&&dojo.isObject(_164)&&dojo.isString(_164.url))?_164.url:"","sdataError":{}};if(xhr.readyState!==4){return _168;}var _169=xhr.getResponseHeader("Content-Type");if(dojo.isString(_169)){var self=this;switch(_166){case 576:case 577:case 578:case 579:case 580:case 581:case 582:var _16a;var _16b=function(_16c){var _16d=self.safeGetPropValue(xhr,"responseText","");return self.getInterceptedError(_16d,_16c);};if(_169.indexOf("application/json")!==-1){_16a=_16b(true);}else{if(_169.indexOf("text/plain")!==-1){_16a=_16b(false);if(_16a&&typeof _16a==="object"&&_16a.hasOwnProperty("text")){if(_166===576){_168.message+="\r\n\r\n"+_16a.text;}else{_168.message=_16a.text;}return _168;}}else{return _168;}}if(_16a&&typeof _16a==="object"&&_16a.hasOwnProperty("slxErrorId")){_168.errorInfo=_16a;}break;default:var _16e;var _16f=function(_170){var _171=self.safeGetPropValue(xhr,"responseText","");return self.getSDataDiagnosis(_171,_170);};if(_169.indexOf("application/json")!==-1){_16e=_16f(false);}else{if(_169.indexOf("application/xml")!==-1){_16e=_16f(true);}else{return _168;}}if(_16e&&typeof _16e==="object"&&_16e.hasOwnProperty("sdataCode")){var _172={"severity":"","sdataCode":"","applicationCode":"","message":"","stackTrace":"","payloadPath":"",fmtError:function(){var _173=[];for(var prop in this){if(prop=="message"||prop=="stackTrace"||prop=="fmtError"){continue;}var _174=this[prop];if(dojo.isString(_174)&&_174!==""){_173.push(_129.substitute("${0}=${1}",[prop.toString(),_174]));}}return (_173.length>0)?_173.join("; "):"";}};_168.sdataError=_172;dojo.mixin(_168.sdataError,_16e);if(_168.sdataError.applicationCode&&this.isSDataExceptionDiagnoses(_168.sdataError.applicationCode)){var _175=function(){var obj={};var _176=_168.sdataError.applicationCode.split("; ");_12a.forEach(_176,function(item){if(item&&dojo.isString(item)&&item.indexOf("=")!==-1){var _177=item.split("=");var name=_177[0].trim();var _178=_177[1].trim();obj[name]=_178;}});return obj;};_168.sdataError.appInfo=_175();if(_168.sdataError.appInfo.hasOwnProperty("code")&&_168.sdataError.appInfo.source){_168.sdataError.applicationCode=_168.sdataError.appInfo.code+"|"+_168.sdataError.appInfo.source;}else{_168.sdataError.applicationCode=_168.sdataError.appInfo.source;}if(_168.sdataError.appInfo.source){delete _168.sdataError.appInfo.source;}}var _179="UNKNOWN";if(Sage.Utility.isStringWithLength(_168.sdataError.severity)){_179=_168.sdataError.severity.toUpperCase();}var _17a={"INFO":"Informational message","WARNING":"Warning message","TRANSIENT":"Transient error","ERROR":"Operation failed","FATAL":"Severe error","UNKNOWN":"Unknown"};var _17b=_17a[_179]||_17a["UNKNOWN"];var _17c=_168.sdataError.message;if(dojo.isString(_17c)){if(_17c.trim().match("."+"$")!="."){_17c+=".";}}if(this._configuration.isDebug){_168.message=_129.substitute("The following SData diagnosis occurred: Description=${0}. Message=${1} HTTP status: ${2} (${3}).",[_17b,_17c,_168.statusText,_168.status]);}else{var _17d=this._getInternalHttpStatus(_168);var _17e=true;switch(_17d){case 577:if(!this._configuration.showExtendedRoleAccessDeniedException){_17e=false;}break;case 578:if(!this._configuration.showExtendedValidationException){_17e=false;}break;case 582:_17e=false;break;}if(_17e){_168.message=_129.substitute("${0} HTTP status: ${1} (${2}).",[_17c,_168.statusText,_168.status]);}else{_168.message=_17c;}}}break;}}return _168;},isConfiguredToHandle:function(_17f,xhr){var _180=false;if(this._configuration.preemption.enabled===false){return false;}if(_17f&&isNaN(_17f)===false){switch(Number(_17f)){case 500:if(this._configuration.preemption.showInternalServerErrorMsg){return true;}if(this._configuration.preemption.showUnhandledMessagingServiceExceptionMsg){var _181=this.getHttpStatusInfo(xhr);if(!(_181&&typeof _181==="object"&&_181.hasOwnProperty("sdataError"))){return false;}return this.isSDataExceptionDiagnoses(_181.sdataError.applicationCode);}break;case 575:return this._configuration.preemption.allowAuthRedirect;case 576:return this._configuration.preemption.showPreemptedErrorMsg;default:if(this._configuration.preemption.handledStatusCodes!==""){var _182=this._configuration.preemption.handledStatusCodes.split(",");_12a.some(_182,function(sc){if(sc==_17f){_180=true;return true;}else{return false;}});}break;}}return _180;},isSDataExceptionDiagnoses:function(_183){if(_183&&typeof _183==="string"&&_183.indexOf("SDataExceptionDiagnoses")!=-1){return true;}return false;},preemptError:function(xhr,o){this._preemptError(xhr,o);},safeGetPropValue:function(obj,prop,_184){try{return obj[prop];}catch(e){return _184;}},showStatusInfoError:function(_185,opt){var _186=this._getStatusInfoOptions(opt);var _187=_186.message;var _188="";var _189="";var _18a="";var _18b="";var _18c=this._getInternalHttpStatus(_185);if((_18c==575)&&this._configuration.preemption.allowAuthRedirect){window.location=this._configuration.authenticationRedirectUrl||"Login.aspx";return;}if(_185&&dojo.isObject(_185)&&dojo.isString(_185.message)){_187+=(_187==="")?_185.message:" "+_185.message;switch(_18c){case 575:case 576:case 577:case 578:case 579:case 580:case 581:case 582:_187=Sage.Utility.htmlEncode(_185.message);if(typeof _185.errorInfo==="object"){_187=Sage.Utility.htmlEncode(_185.errorInfo.message);}switch(_18c){case 577:if(!this._configuration.showExtendedRoleAccessDeniedException){_127.showError(_187);return;}break;case 578:if(!this._configuration.showExtendedValidationException){_127.showError(_187);return;}break;case 579:break;case 576:case 580:case 581:if(_185.status!=500){_187+=_129.substitute(" HTTP status: ${info.statusText} (${info.status}).",{info:_185});}break;case 582:_127.showError(_187);return;}break;}if(typeof _185.sdataError==="object"&&typeof _185.sdataError.appInfo==="object"){_18a=_129.substitute("\r\n\r\nSaleslogix Error Id: ${0}",[_185.sdataError.appInfo.slxErrorId]);_18b=this._fmtSlxErrorId(_185.sdataError.appInfo.slxErrorId);_187+=_18b;}if(typeof _185.errorInfo==="undefined"){var sUrl=null;if(Sage.Utility.isStringWithLength(_185.url)){if(_187.indexOf(decodeURIComponent(_185.url))==-1){sUrl=decodeURIComponent(_185.url);}}else{if(Sage.Utility.isStringWithLength(_186.url)){if(_187.indexOf(decodeURIComponent(_186.url))==-1){sUrl=decodeURIComponent(_186.url);}}}if(sUrl!==null){_187+=_129.substitute("\r\n\r\nURL: ${0}",[sUrl]);}}if(this._configuration.isDebug){if(typeof _185.sdataError==="object"){if(dojo.isFunction(_185.sdataError.fmtError)){_187+=_129.substitute("\r\n\r\nExtended SData diagnosis information: ${0}.",[_185.sdataError.fmtError()]);}if(typeof _185.sdataError.appInfo==="object"){_187+=_129.substitute("\r\n\r\nException type: ${info.exceptionType}\r\n\r\nSource: ${info.exceptionSource}",{info:_185.sdataError.appInfo});}if(_185.sdataError.stackTrace){_188=_185.sdataError.stackTrace;_189=this._fmtStackTrace(_185.sdataError.stackTrace);_187+=_189;}}}var mail={subject:"Saleslogix Exception Details"};if(typeof _185.errorInfo==="object"){_18a=_129.substitute("\r\n\r\nSaleslogix Error Id: ${0}",[_185.errorInfo.slxErrorId]);_18b=this._fmtSlxErrorId(_185.errorInfo.slxErrorId);_187+=_18b;_187+=_129.substitute("\r\n\r\nURL: ${info.request.url}",{info:_185.errorInfo});if(this._configuration.isDebug){if(_185.errorInfo.stackTrace){_188=_185.errorInfo.stackTrace;_189=this._fmtStackTrace(_185.errorInfo.stackTrace);_185.errorInfo.__stackTrace=_189;_187+=_129.substitute("\r\n\r\nException type: ${info.type}\r\n\r\nSource: ${info.source}${info.__stackTrace}\r\n\r\nTarget site: ${info.targetSite}",{info:_185.errorInfo});}}mail.subject=_129.substitute("Saleslogix Exception Details (Saleslogix Error Id: ${0})",[_185.errorInfo.slxErrorId]);}mail.subject=encodeURIComponent(mail.subject);if(_188!==""){_188=_129.substitute("\r\n\r\nStack trace:\r\n${0}",[_188]);}mail.message=encodeURIComponent(Sage.Utility.htmlDecode(_187.replace(_189,_188).replace(_18b,_18a)));mail.linkCaption="Mail details of this exception to your administrator";_187+=_129.substitute("\r\n\r\n<a href=\"mailto:?subject=${info.subject}&amp;body=${info.message}\">${info.linkCaption}</a>",{info:mail});}if(_187===""){_187="There was an unknown error.";}_187=_187.replace(/(\r\n)/g,"<br />");_127.showError(_187);}});Sage.Utility.ErrorHandler.init();return Sage.Utility.ErrorHandler;});},"Sage/LanguageList":function(){define([],function(){return {root:{},"de":true,"en":true,"fr":true,"it":true,"ru":true,};});},"Sage/Link":function(){define(["Sage/UI/Dialogs","Sage/Utility","Sage/Services/ActivityService","dojo/string"],function(_18d,_18e,_18f,_190){Sage.namespace("Link");Sage.Link={entityDetail:function(kind,id){var _191=kind.toUpperCase();switch(_191){case "ACTIVITY":this.editActivity(id);break;case "HISTORY":this.editHistory(id);break;default:if(_18e.getModeId()==="detail"){var _192=Sage.Services.getService("ClientEntityContext");var _193=_192.getContext();if(_193.EntityType===kind||_193.EntityType==="Sage.Entity.Interfaces.I"+kind){_192.navigateSLXGroupEntity(id);return;}}var url=_190.substitute("${0}.aspx?entityid=${1}&modeid=Detail",[kind,id]);document.location=url;break;}},toListView:function(kind){var url;if(typeof kind!=="undefined"){url=kind+".aspx?modeid=list";}else{url=document.location.href.replace("#","");if(url.indexOf("?")>-1){var _194=url.split("?");url=_194[0];}url+="?modeid=list";}document.location=url;},toActivityListView:function(_195){if(document.location.href.toLowerCase().indexOf("activitymanager.aspx")<1){var url="ActivityManager.aspx"+((_195)?"?tabId="+_195:"");window.setTimeout(function(){document.location=url;},5);}else{if(_195){var s=Sage.Services.getService("ClientGroupContext");s.setCurrentGroup(_195);}}},schedule:function(type){if(type==="CompleteActivity"){Sage.ClientLinkHandler.request({request:"Schedule",type:type});return;}var _196=Sage.Services.getService("ActivityService");if(!_196){Sage.Services.addService("ActivityService",new _18f());_196=Sage.Services.getService("ActivityService");}_196.scheduleActivity({type:type});},newNote:function(){var _197=Sage.Services.getService("ActivityService");if(!_197){Sage.Services.addService("ActivityService",new _18f());_197=Sage.Services.getService("ActivityService");}_197.insertNote();},scheduleActivity:function(args){this.schedule(args);},schedulePhoneCall:function(){this.schedule("PhoneCall");},scheduleMeeting:function(){this.schedule("Meeting");},scheduleToDo:function(){this.schedule("ToDo");},schedulePersonalActivity:function(){this.schedule("PersonalActivity");},scheduleCompleteActivity:function(){this.schedule("CompleteActivity");},scheduleEvent:function(args){var _198=Sage.Services.getService("ActivityService");_198.scheduleEvent(args);},editEvent:function(id){var _199=Sage.Services.getService("ActivityService");_199.editEvent(id);},deleteEvent:function(id){var _19a=Sage.Services.getService("ActivityService");_19a.deleteEvent(id);},editActivity:function(id,_19b,_19c){var _19d=Sage.Services.getService("ActivityService");if(!_19d){Sage.Services.addService("ActivityService",new _18f());_19d=Sage.Services.getService("ActivityService");}_19c=_19c||"";_19d.editActivity(id,_19b,_19c);},editActivityIfConfirmed:function(id,_19e){var _19f=Sage.Services.getService("ActivityService");_19f.editActivityIfConfirmed(id,_19e);},editActivityOccurrence:function(id,_1a0){Sage.ClientLinkHandler.request({request:"EditActivityOccurrence",id:id,recurDate:_1a0});},editHistory:function(id,args){var _1a1=Sage.Services.getService("ActivityService");if(!_1a1){Sage.Services.addService("ActivityService",new _18f());_1a1=Sage.Services.getService("ActivityService");}_1a1.editHistory(id);},completeActivity:function(id,_1a2){var _1a3=Sage.Services.getService("ActivityService");_1a3.completeActivity(id,_1a2);},completeNewActivity:function(type,args){var _1a4=Sage.Services.getService("ActivityService");_1a4.completeNewActivity(type,args);},completeActivityOccurrence:function(id,_1a5){var _1a6=Sage.Services.getService("ActivityService");_1a6.completeActivityOccurrence(id,_1a5);},deleteActivity:function(id,_1a7){var _1a8=Sage.Services.getService("ActivityService");_1a8.deleteActivity(id,false,_1a7);},deleteActivityOccurrence:function(id){var _1a9=Sage.Services.getService("ActivityService");_1a9.deleteActivity(id);},confirmActivityFor:function(_1aa,_1ab){var _1ac=Sage.Services.getService("ActivityService");_1ac.confirmActivityFor(_1aa,_1ab);},editConfirmation:function(id){var _1ad=Sage.Services.getService("ActivityService");_1ad.editConfirmation(id);},acceptConfirmation:function(id){var _1ae=Sage.Services.getService("ActivityService");_1ae.acceptConfirmation({id:id});},declineConfirmation:function(id){var _1af=Sage.Services.getService("ActivityService");_1af.declineConfirmation(id);},deleteConfirmation:function(id){var _1b0=Sage.Services.getService("ActivityService");_1b0.deleteConfirmation(id);},scheduleLitRequest:function(){var _1b1=Sage.Services.getService("ActivityService");_1b1.scheduleLitRequest();},deleteLitRequest:function(id){var _1b2=Sage.Services.getService("ActivityService");_1b2.deleteLitRequest(id);},goToLitRequest:function(id){var _1b3=Sage.Services.getService("ActivityService");_1b3.goToLitRequest(id);},goToActivityAssociation:function(_1b4,id){var _1b5=Sage.Services.getService("ActivityService");_1b5.goToActivityAssociation(_1b4,id);},mergeRecords:function(){var _1b6=dijit.byId("list");if(_1b6){var _1b7=_1b6.getSelectionInfo();if(_1b7.selectionCount===2){var _1b8=Sage.Services.getService("SelectionContextService");_1b8.setSelectionContext(_1b7.key,_1b7,this.mergeRecordsSelectionInfoCallback);Sage.ClientLinkHandler.request({request:"MergeRecords",selectionInfoKey:_1b7.key});}else{_18d.showInfo(MasterPageLinks.Merge_Account_SelectionError);}}},mergeRecordsSelectionInfoCallback:function(){},removeDeletedConfirmation:function(id){Sage.ClientLinkHandler.request({request:"RemoveDeletedConfirmation",id:id});},getHelpUrl:function(_1b9,_1ba){var _1bb;_1bb=_18e.getClientContextByKey("WebHelpUrlFmt");if(_1bb===""){_1bb="help/WebClient_CSH.htm#${0}";}return _190.substitute(_1bb,[_1b9]);},getHelpUrlTarget:function(){var _1bc=_18e.getClientContextByKey("WebHelpLinkTarget");return (_1bc==="")?"MCWebHelp":_1bc;},editSecurityProfile:function(_1bd,_1be,_1bf){Sage.ClientLinkHandler.request({request:"Administration",type:"EditSecurityProfile",selectionInfoKey:_1bd+","+_1be+","+_1bf});},getTeamMemberLink:function(_1c0,_1c1){if(_1c0.toLowerCase()=="user"){Sage.ClientLinkHandler.request({request:"Administration",type:"RedirectToUser",kind:_1c0,id:_1c1});}else{window.location.href=_1c0+".aspx?entityId="+_1c1;}}};window.Link=Sage.Link;return Sage.Link;});},"Sage/Services/ActivityService":function(){define(["Sage/UI/Dialogs","Sage/MainView/ActivityMgr/ActivityEditor","Sage/MainView/ActivityMgr/EditEventEditor","Sage/MainView/ActivityMgr/QuickCompleteEditor","Sage/Services/ActivityActionProcessor","Sage/Services/ActivityAction","Sage/MainView/ActivityMgr/HistoryEditor","Sage/MainView/ActivityMgr/OccurrenceOrSeriesQueryDlg","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","dojo/string","Sage/Utility","dojo/i18n!./nls/ActivityService","dojo/_base/declare","dojo/topic","dojo/_base/lang"],function(_1c2,_1c3,_1c4,_1c5,_1c6,_1c7,_1c8,_1c9,_1ca,_1cb,_1cc,_1cd,_1ce,_1cf,_1d0,lang){var _1d1=_1cf("Sage.Services.ActivityService",null,{_defaultActivitManagerTabId:null,_activityEditor:false,_eventEditor:false,_historyEditor:false,_editOccSeriesDlg:false,_deleteOccSeriesDlg:false,_compOccSeriesDlg:false,_processor:false,_actCompleteQueue:false,_histCompleteQueue:[],activityEditorType:_1c3,eventEditorType:_1c4,historyEditorType:_1c8,constructor:function(){dojo.mixin(this,_1ce);},_ensureEditor:function(){if(!this._activityEditor){this._activityEditor=new this.activityEditorType({id:"activityEditor"});this.onActivityEditorCreated(this._activityEditor);}},onActivityEditorCreated:function(_1d2){},_ensureEventEditor:function(){if(!this._eventEditor){this._eventEditor=new this.eventEditorType();this.onEventEditorCreated(this._eventEditor);}},onEventEditorCreated:function(_1d3){},_ensureHistoryEditor:function(){if(!this._historyEditor){this._historyEditor=new this.historyEditorType({id:"historyEditor"});this.onHistoryEditorCreated(this._historyEditor);}},onHistoryEditorCreated:function(_1d4){},_ensureProcessor:function(){if(!this._processor){this._processor=new _1c6();}},_getIdFromGridSelection:function(){var _1d5=this.getSelectedItem();if(!_1d5){return false;}if(_1d5.hasCompositeKey){return _1d5.entity.Activity["$key"];}else{return _1d5.id;}},_getRecurringFromGridSelection:function(){var _1d6=false,_1d7=this.getSelectedItem();if(_1d7&&_1d7.entity){if(_1d7.entity.hasOwnProperty("Activity")){_1d6=_1d7.entity.Activity["Recurring"]===true;if((_1d6)&&(_1d7.entity.Activity["RecurIterations"]<0)){_1d6=false;}}else{_1d6=_1d7.entity["Recurring"]===true;if((_1d6)&&(_1d7.entity["RecurIterations"]<0)){_1d6=false;}}}return _1d6;},editActivity:function(id,_1d8,_1d9){if(!id){id=this._getIdFromGridSelection();_1d8=this._getRecurringFromGridSelection();}if(!id){return;}if((id.length===12)&&((typeof _1d8==="undefined")||_1d8===null)){this._resolveActivityOccurence(id,_1d9);return;}if(id.length===12&&!_1d8){this._ensureEditor();this._activityEditor.set("mode","Update");this._activityEditor.set("activityId",id);this._activityEditor.set("activityMemberId",_1d9);this._activityEditor.show();}else{this.editOccurrenceOrSeriesQuery(id,_1d9);}},_resolveActivityOccurence:function(id,_1da){var req=new Sage.SData.Client.SDataResourceCollectionRequest(_1cb.getSDataService("dynamic"));req.setResourceKind("activities");req.setQueryArg("select","Recurring");req.setQueryArg("where",_1cc.substitute("Id eq '${0}'",[id]));req.setQueryArg("precedence","0");req.read({success:function(_1db){var _1dc;if(_1db["$resources"]&&_1db["$resources"].length>0){_1dc=_1db["$resources"][0].Recurring;if(_1dc){this.editActivity(id,true,_1da);}else{this.editActivity(id,false,_1da);}}},failure:function(){},scope:this});},editOccurrence:function(id,_1dd,_1de){this._ensureEditor();this._activityEditor.set("mode","Update");this._activityEditor.set("activityId",id);this._activityEditor.set("activityMemberId",_1de);this._activityEditor.show();},editOccurrenceOrSeriesQuery:function(id,_1df){if(!this._editOccSeriesDlg){this._editOccSeriesDlg=new _1c9({id:"editOccSeriesQuery",mode:"edit"});dojo.connect(this._editOccSeriesDlg,"onSelectSeries",this,function(_1e0,mId){this.editActivity(_1e0.substring(0,12),false,mId);});dojo.connect(this._editOccSeriesDlg,"onSelectOccurrence",this,function(_1e1,_1e2,mId){this.editOccurrence(_1e1,_1e2,mId);});}this._editOccSeriesDlg.set("activityMemberId",_1df);this._editOccSeriesDlg.set("activityId",id);this._editOccSeriesDlg.show();},editTempActivity:function(id){this._ensureEditor();this._activityEditor.set("mode","deleteOnCancel");this._activityEditor.set("activityId",id);this._activityEditor.show();},completeOccurrenceOrSeriesQuery:function(id){if(!this._compOccSeriesDlg){this._compOccSeriesDlg=new _1c9({id:"compOccSeriesQuery",mode:"complete"});dojo.connect(this._compOccSeriesDlg,"onSelectSeries",this,function(id){this.completeActivity(id.substring(0,12),false);});dojo.connect(this._compOccSeriesDlg,"onSelectOccurrence",this,this.completeActivityOccurrence);}this._compOccSeriesDlg.set("activityId",id);this._compOccSeriesDlg.show();},scheduleActivity:function(args){var type=args["type"]||args["Type"];if(type==="CompleteActivity"){this.scheduleCompletedActivity(type,args);return;}this._ensureEditor();this._activityEditor.set("mode","New "+args["type"]||"Meeting");if(args.hasOwnProperty("preConfigured")){this._activityEditor.show(args.preConfigured);}else{this.getActivityEntityContext(this._activityEditor,function(_1e3,_1e4){_1e3.show(_1e4);});}},completeActivityOccurrence:function(id,_1e5){this._ensureEditor();if(id.indexOf(";")<0){var _1e6=["StartDate"];var _1e7=new _1ca({include:[],select:_1e6,resourceKind:"activities",service:_1cb.getSDataService("system")});if(id!==""){_1e7.fetch({predicate:"\""+id+"\"",onComplete:function(_1e8){if(_1e8){var _1e9=(_1cd.Convert.toDateFromString(_1e8.StartDate)/1000)+62135596800;var _1ea=_1e8["$key"]+";"+_1e9;this._activityEditor.set("mode","Complete");this._activityEditor.set("activityId",_1ea);this._activityEditor.show();}},scope:this});}}else{this._activityEditor.set("mode","Complete");this._activityEditor.set("activityId",id);this._activityEditor.show();}},completeActivity:function(id,_1eb){var _1ec=this._getSelectionContext(id,this.txtActivity,this.txtActivities);if(_1ec.count>1){this.completeActivitiesInSelectionContext(_1ec);}else{if(_1ec.id){var _1ed=_1ec.id;if(_1ec.selectionInfo&&_1ec.selectionInfo.selections[0].entity){var _1ee=_1ec.selectionInfo.selections[0].entity;if(_1ec.selectionInfo.hasCompositeKey){_1ed=_1ee["Activity"]["$key"];}if(_1ed.length===12){if(_1ee.hasOwnProperty("Activity")){_1ee=_1ee.Activity;}_1eb=_1ee["Recurring"]===true;if((_1eb)&&(_1ee["RecurIterations"]<0)){_1eb=false;}}}if(_1ed.length===12&&!_1eb){this._ensureEditor();this._activityEditor.set("mode","Complete");this._activityEditor.set("activityId",_1ed);this._activityEditor.show();}else{this.completeOccurrenceOrSeriesQuery(_1ed);}}}},_quickCompleteConnections:[],completeActivitiesInSelectionContext:function(_1ef){if(_1ef.count<1){return;}this._actCompleteQueue=_1ef;var _1f0={selectionContext:_1ef};var qce=new _1c5(_1f0);this._quickCompleteConnections.push(dojo.connect(qce,"onCompleteIndividually",this,"_completeActivitiesInQueue"));this._quickCompleteConnections.push(dojo.connect(qce,"onCompleteNow",this,"_completeActivitiesNow"));this._quickCompleteConnections.push(dojo.connect(qce,"onCompleteAsScheduled",this,"_completeActivitiesAsScheduled"));this._quickCompleteConnections.push(dojo.connect(qce,"onCancel",this,function(){this._actCompleteQueue=false;}));this._quickCompleteConnections.push(dojo.connect(qce._dialog,"onHide",this,"_quickCompleteHide"));qce.show();},_actEditorHideConnection:null,_quickCompleteHide:function(){if(!this._completingActivitiesIndividually){this._actCompleteQueue=false;}dojo.forEach(this._quickCompleteConnections,function(_1f1){dojo.disconnect(_1f1);});this._quickCompleteConnections=[];},_completingActivitiesIndividually:false,_completeActivitiesInQueue:function(){this._completingActivitiesIndividually=true;this._ensureEditor();this._actEditorHideConnection=dojo.connect(this._activityEditor,"onHide",this,this._completeNextActivityInQueue);this._completeNextActivityInQueue();},_completeNextActivityInQueue:function(){var _1f2=this._actCompleteQueue.selectionInfo.selections.pop();var id=_1f2.id;var _1f3=false;if(_1f2.entity){var _1f4=_1f2.entity.hasOwnProperty("Activity")?_1f2.entity["Activity"]:_1f2.entity;if(this._actCompleteQueue.selectionInfo.hasCompositeKey){id=_1f2.entity["Activity"]["$key"];}_1f3=(id.length>12||_1f4["Recurring"]===true);}this.completeActivity(id,_1f3);if(this._actCompleteQueues.selectionInfo.selections.length<1){dojo.disconnect(this._actEditorHideConnection);this._completingActivitiesIndividually=false;}},_completeActivitiesAsScheduled:function(_1f5){var args={selectionInfo:_1f5.selectionContext.selectionInfo,mode:"asScheduled",note:_1f5.note,result:_1f5.result,resultCode:_1f5.resultCode};var _1f6=new _1c7();_1f6.set("OperationName","completeActivities");_1f6.set("PublishMap","/entity/activity/change");_1f6.set("args",args);_1f6.execute({success:function(_1f7){_1d0.publish("/entity/activity/bulkComplete","true");},failure:function(){_1c2.showError(this.txtErrorActionMsg);}});},_completeActivitiesNow:function(_1f8){var args={selectionInfo:_1f8.selectionContext.selectionInfo,mode:"completeNow",note:_1f8.note,result:_1f8.result,resultCode:_1f8.resultCode};var _1f9=new Sage.Services.ActivityAction();_1f9.set("OperationName","completeActivities");_1f9.set("PublishMap","/entity/activity/change");_1f9.set("Args",args);_1f9.execute({success:function(_1fa){_1d0.publish("/entity/activity/bulkComplete","true");},failure:function(){_1c2.showError(this.txtErrorActionMsg);}});},completeHistoriesInList:function(_1fb){if(_1fb.length<1){return;}if(_1fb.length===1){this.completeHistory(_1fb[0]);return;}this._histCompleteQueue=_1fb;var _1fc={selectionContext:{count:_1fb.length,selectionInfo:{selectedIds:_1fb}}};this._histCompleteQueue=_1fb;var qce=new _1c5(_1fc);this._quickCompleteConnections.push(dojo.connect(qce,"onCompleteIndividually",this,"_completeHistoriesInQueue"));this._quickCompleteConnections.push(dojo.connect(qce,"onCompleteNow",this,"_updateHistoriesFromQuickComplete"));this._quickCompleteConnections.push(dojo.connect(qce,"onCompleteAsScheduled",this,"_updateHistoriesFromQuickComplete"));this._quickCompleteConnections.push(dojo.connect(qce,"onCancel",this,"_cancelCompleteHistoryQueue"));this._quickCompleteConnections.push(dojo.connect(qce._dialog,"onHide",this,"_quickCompleteHide"));qce.show();},completeHistory:function(_1fd){this._ensureHistoryEditor();this._historyEditor.set("historyId",_1fd);this._historyEditor.set("mode","Complete");this._historyEditor.show();},_histEditorHideConnection:null,_quickHistoryCompleteHide:function(){dojo.forEach(this._histEditorHideConnection,function(_1fe){dojo.disconnect(_1fe);});dojo.forEach(this._actEditorHideConnection,function(_1ff){dojo.disconnect(_1ff);});this._histEditorHideConnection=false;this._actEditorHideConnection=false;},_completeHistoriesInQueue:function(){this._ensureHistoryEditor();this._historyEditor._doingFollowup=false;this._histEditorHideConnection=dojo.connect(this._historyEditor,"onHide",this,this._completeNextHisotryInQueue);this._completeNextHisotryInQueue();},_completeNextHisotryInQueue:function(e){if(this._histCompleteQueue.length<1){dojo.disconnect(this._histEditorHideConnection);dojo.disconnect(this._actEditorHideConnection);return;}if(this._historyEditor._doingFollowup){this._ensureEditor();if(this._actEditorHideConnection){dojo.disconnect(this._actEditorHideConnection);}this._actEditorHideConnection=dojo.connect(this._activityEditor,"onHide",this,this._followupCompleteNextHistoryInQueue);return;}var _200=this._histCompleteQueue.pop();var self=this;this.completeHistory(_200);},_followupCompleteNextHistoryInQueue:function(){this._historyEditor._doingFollowup=false;this._completeNextHisotryInQueue();},_cancelCompleteHistoryQueue:function(){this._deleteHistoryFromQuickComplete();},_deleteHistoryFromQuickComplete:function(){var _201=function(_202){var _203=new _1ca({resourceKind:"history",service:_1cb.getSDataService("dynamic")});_203.fetch({predicate:"\""+_202+"\"",onComplete:function(_204){_203.deleteEntity(_204,this,null,null);},onError:function(){},scope:this});};var _205=this._histCompleteQueue.length;for(var i=0;i<_205;i++){_201(this._histCompleteQueue.pop());}},_updateHistoriesFromQuickComplete:function(_206){var _207=function(_208){var _209=new _1ca({resourceKind:"history",select:["LongNotes","Result","ResultCode"],service:_1cb.getSDataService("dynamic")});_209.fetch({predicate:"\""+_208+"\"",onComplete:function(_20a){_20a.Result=_206.result||_20a.Result;_20a.ResultCode=_206.resultCode||_20a.ResultCode;_20a.LongNotes=(_20a.LongNotes)?_20a.LongNotes+"\n"+_206.note:_206.note;_209.save({scope:this,success:function(hist){dojo.publish("/entities/history/create",hist);},failure:function(){}});},onError:function(){},scope:this});};var _20b=this._histCompleteQueue.length;for(var i=0;i<_20b;i++){_207(this._histCompleteQueue.pop());}},completeNewActivity:function(type,args){this._ensureEditor();if(!args||typeof args!="object"){args={};}args["Type"]=args["Type"]||type||"atAppointment";this._activityEditor.set("mode","CompleteUnscheduled");this._activityEditor.show(args);},deleteActivity:function(id,_20c,_20d){var _20e=this._getSelectionContext(id,this.txtActivity,this.txtActivities);if(id){if((id.length===12&&!_20c)||id.indexOf("ActivityId")>-1){this.deleteActivitiesInSelectionContext(_20e,_20d);}else{this.deleteOccurrenceOrSeriesQuery(id);}return;}if(_20e.count<1){return;}if(_20e.count>1){this.deleteActivitiesInSelectionContext(_20e);}else{var _20f=_20e.selectionInfo.selections[0];if(_20e.selectionInfo.hasCompositeKey){if(_20f.entity){id=_20f.entity["Activity"]["$key"];}}else{id=_20f.id;}_20c=false;if(_20f.entity){if(_20f.entity.hasOwnProperty("Activity")){_20c=_20f.entity.Activity["Recurring"]===true;}else{_20c=_20f.entity["Recurring"]===true;}}}if(!id){return;}if(id.length===12&&!_20c){this.deleteActivitiesInSelectionContext(_20e);}else{this.deleteOccurrenceOrSeriesQuery(id);}},deleteActivitiesInSelectionContext:function(_210,_211,_212){if(_210.count<1){return;}var _213=this.txtActionDeleteActivites;var _214=String.format(this.txtActionDeleteActivitiesQuestion,_210.count,_210.name);var _215=new _1c7();var args={selectionInfo:_210.selectionInfo};if(_210.count===1){var _216=_210.selectionInfo.selections[0];if(_216&&_216.id&&_216.id.indexOf("ActivityId")>-1){_215.set("PublishMapWithId","/entity/userActivity/delete");_215.set("ActivityId",_216.id);}else{if(_216){_215.set("PublishMapWithId","/entity/activity/delete/single");_215.set("ActivityId",_216.id);}}}_215.set("OperationName","deleteActivities");_215.set("PublishMap","/entity/activity/delete");_215.set("ActionDescription",_213);_215.set("ActionMessage",_214);_215.set("Args",args);this._ensureProcessor();this._processor.set("Action",_215);this._processor.set("SelectionContext",_210);if(_211){var _217=dojo.connect(this._processor,"onActionComplete",this,function(_218){dojo.disconnect(_217);_211.call(_212||this,_218);});}this._processor.start();},declineMemberConfirmation:function(_219,_21a){if(_219&&_21a){var _21b={"$name":"DeclineMember","request":{"entity":_219,"memberId":_21a}};var _21c=new Sage.SData.Client.SDataServiceOperationRequest(_1cb.getSDataService("dynamic")).setResourceKind("activities").setOperationName("DeclineMember");_21c.execute(_21b,{success:function(ua){var _21d=_1cc.substitute("'ActivityId=${0};UserId=${1}'",[_219.$key,_21a]);_1d0.publish("/entity/userActivity/delete",_21d);},failure:function(){},scope:this});}},deleteOccurrenceOrSeriesQuery:function(id){if(!this._deleteOccSeriesDlg){this._deleteOccSeriesDlg=new _1c9({id:"deleteOccSeriesQuery",mode:"delete"});dojo.connect(this._deleteOccSeriesDlg,"onSelectOccurrence",this,function(id){this.deleteOccurrence(id);});dojo.connect(this._deleteOccSeriesDlg,"onSelectSeries",this,function(id){this.deleteAllOccurrence(id);});}this._deleteOccSeriesDlg.set("activityId",id);this._deleteOccSeriesDlg.show();},deleteOccurrence:function(id){var _21e=this._getSelectionContext(id,this.txtActivity,this.txtActivities);this.deleteActivitiesInSelectionContext(_21e);},deleteAllOccurrence:function(id){var _21f=this._getSelectionContext(id,this.txtActivity,this.txtActivities);if(_21f.count<1){return;}var _220=this.txtActionDeleteActivites;var _221=String.format(this.txtActionDeleteActivitiesQuestion,_21f.count,_21f.name);var _222=new _1c7();var args={selectionInfo:_21f.selectionInfo};if(_21f.count===1){var _223=_21f.selectionInfo.selections[0];if(_223){_222.set("PublishMapWithId","/entity/activity/delete/recurrence");_222.set("ActivityId",_223.id);}}_222.set("OperationName","deleteAllOccurrence");_222.set("PublishMap","/entity/activity/delete");_222.set("ActionDescription",_220);_222.set("ActionMessage",_221);_222.set("Args",args);this._ensureProcessor();this._processor.set("Action",_222);this._processor.set("SelectionContext",_21f);this._processor.start();},snooze:function(id,_224){var _225=this._getSelectionContext(id,this.txtAlarm,this.txtAlarms);var _226=this.txtActionSnoozeAlarm;var _227=String.format(this.txtActionSnoozeQuestion,_225.count,_225.name,_224.name);var _228=new _1c7();var args={selectionInfo:_225.selectionInfo,interval:_224.interval,duration:_224.duration};_228.set("OperationName","SnoozeAlarms");_228.set("PublishMap","/entity/UserActivity/change");_228.set("ActionDescription",_226);_228.set("ActionMessage",_227);_228.set("Args",args);this._ensureProcessor();this._processor.set("Action",_228);this._processor.set("SelectionContext",_225);this._processor.start();},snoozeAll:function(_229){var id=null;var _22a=this._getSelectionContext(id,this.txtAlarm,this.txtAlarms);_22a.mode="ALL";var _22b=this.txtActionSnoozeAlarm;var _22c=String.format(this.txtActionSnoozeAllQuestion,_22a.name,_229.name);var _22d=new _1c7();var args={selectionInfo:_22a.selectionInfo,interval:_229.interval,duration:_229.duration};_22d.set("OperationName","SnoozeAlarms");_22d.set("PublishMap","/entity/UserActivity/change");_22d.set("ActionDescription",_22b);_22d.set("ActionMessage",_22c);_22d.set("Args",args);this._ensureProcessor();this._processor.set("Action",_22d);this._processor.set("SelectionContext",_22a);this._processor.start();},dismissAlarm:function(id){var _22e=this._getSelectionContext(id,this.txtAlarm,this.txtAlarms);var _22f=this.txtActionDismissAlarms;var _230=String.format(this.txtActionDismissAlarmsQuestion,_22e.count,_22e.name);var _231=new _1c7();var args={selectionInfo:_22e.selectionInfo};_231.set("OperationName","DismissAlarms");_231.set("ActionDescription",_22f);_231.set("ActionMessage",_230);_231.set("PublishMap","/entity/UserActivity/change");_231.set("Args",args);this._ensureProcessor();this._processor.set("Action",_231);this._processor.set("SelectionContext",_22e);this._processor.start();},scheduleCompletedActivity:function(_232){if(_232){this._ensureHistoryEditor();this._historyEditor.set("activityType",_232);this._historyEditor.set("mode","New");this._historyEditor.set("historyId","");this.getActivityEntityContext(this._historyEditor,function(_233,_234){_233.show(_234);});}else{alert("Show Schedule Completed Dialog");}},insertNote:function(){this._ensureHistoryEditor();this._historyEditor.set("activityType","Note");this._historyEditor.set("mode","New");this._historyEditor.set("historyId","");this.getActivityEntityContext(this._historyEditor,function(_235,_236){_235.show(_236);});},editHistory:function(_237){if(!_237){_237=this.getSelectedId();}if(!_237){return;}this._ensureHistoryEditor();this._historyEditor.set("mode","Edit");this._historyEditor.set("historyId",_237);this._historyEditor.show();},scheduleEvent:function(args){this._ensureEventEditor();this._eventEditor.set("mode","New");this._eventEditor.set("eventId","");this._eventEditor.show(args);},editEvent:function(id){if(!id){id=this.getSelectedId();}if(!id){return;}this._ensureEventEditor();this._eventEditor.set("mode","Update");this._eventEditor.set("eventId",id);this._eventEditor.show();},deleteEvent:function(id){var _238=this._getSelectionContext(id,this.txtEvent,this.txtEvents);var _239=this.txtActionDeleteEvents;var _23a=String.format(this.txtActionDeleteEventsQuestion,_238.count,_238.name);var args={selectionInfo:_238.selectionInfo};var _23b=new _1c7();if(_238.count===1){var _23c=_238.selectionInfo.selections[0];if(_23c){_23b.set("PublishMapWithId","/entity/event/delete/single");_23b.set("ActivityId",_23c.id);}}_23b.set("OperationName","deleteEvents");_23b.set("PublishMap","/entity/event/delete");_23b.set("ActionDescription",_239);_23b.set("ActionMessage",_23a);_23b.set("Args",args);this._ensureProcessor();this._processor.set("Action",_23b);this._processor.set("SelectionContext",_238);this._processor.start();},confirmActivityFor:function(_23d,_23e,_23f,_240){if(_23d){_23d=_23d.substring(0,12);}var req=new Sage.SData.Client.SDataResourceCollectionRequest(_1cb.getSDataService("dynamic"));req.setResourceKind("userNotifications");req.setQueryArg("where",_1cc.substitute("ActivityId eq '${0}' and ToUser.Id eq '${1}'",[_23d,_23e]));req.setQueryArg("precedence","0");req.read({success:function(_241){if(_241["$resources"]&&_241["$resources"].length>0){if(_23f){_23f.call(_240||this,_241["$resources"][0]["$key"]);}else{this.editConfirmation(_241["$resources"][0]["$key"],_23e);}}else{this.editActivity(_23d,false);}},failure:function(){},scope:this});},editActivityIfConfirmed:function(_242,_243){if(!_242){_242=this._getIdFromGridSelection();_243=this._getRecurringFromGridSelection();}var _244=_1cd.getClientContextByKey("userID");var _245=_1cc.substitute("\"${0};${1}\"",[(_242.indexOf(";")>0)?_242.substring(0,12):_242,_244]);var req=new Sage.SData.Client.SDataSingleResourceRequest(_1cb.getSDataService("dynamic")).setResourceKind("userActivities").setResourceSelector(_245);req.read({success:function(ua){if(ua.Status==="asUnconfirmed"){this.confirmActivityFor(_242,_244);}else{this.editActivity(_242,_243);}},failure:function(){this.editActivity(_242,_243);},scope:this});},editConfirmation:function(id,_246){if(!id){id=this.getSelectedId();}if(!id){return;}this._ensureEditor();this._activityEditor.set("mode","Confirm");this._activityEditor.set("userNotificationId",id);this._activityEditor.set("activityMemberId",_246);this._activityEditor.show();},acceptConfirmation:function(_247){var id=false;if(_247){if(_247.id){id=_247.id;}else{if(_247.notification){if(_247.notes){_247.notification.Notes=_247.notes;}var _248={"$name":"Accept","request":{"entity":_247.notification,"UserNotificationId":_247.notification["$key"]}};var _249=new Sage.SData.Client.SDataServiceOperationRequest(_1cb.getSDataService("dynamic")).setResourceKind("usernotifications").setOperationName("accept");_249.execute(_248,{success:_247.success||function(){},failure:_247.failure||function(){},scope:_247.scope||this});return;}}}var _24a=this._getSelectionContext(id,this.txtConfirmation,this.txtConfirmations);if(_24a.count>1){var args={selectionInfo:_24a.selectionInfo,mode:"accept",note:""};var _24b=this.txtActionAcceptConfirmations;var _24c=String.format(this.txtActionAcceptConfirmQuestion,_24a.count,_24a.name);var _24d=new _1c7();_24d.set("OperationName","acceptConfirmations");_24d.set("PublishMap","/entity/userNotification/change");_24d.set("ActionDescription",_24b);_24d.set("ActionMessage",_24c);_24d.set("Args",args);this._ensureProcessor();this._processor.set("Action",_24d);this._processor.set("SelectionContext",_24a);this._processor.start();}else{this.editConfirmation(_24a.id);}},declineConfirmation:function(_24e){var id=false;if(_24e){if(_24e.id){id=_24e.id;}else{if(_24e.notification){if(_24e.notes){_24e.notification.Notes=_24e.notes;}var _24f={"$name":"Decline","request":{"entity":_24e.notification,"UserNotificationId":_24e.notification["$key"]}};var _250=new Sage.SData.Client.SDataServiceOperationRequest(_1cb.getSDataService("dynamic")).setResourceKind("usernotifications").setOperationName("decline");_250.execute(_24f,{success:_24e.success||function(){},failure:_24e.failure||function(){},scope:_24e.scope||this});return;}}}var _251=this._getSelectionContext(id,this.txtConfirmation,this.txtConfirmations);if(_251.count>1){var args={selectionInfo:_251.selectionInfo,mode:"decline",note:""};var _252=this.txtDeclineConfirmations;var _253=String.format(this.txtActionDeclineConfrimQuestion,_251.count,_251.name);var _254=new _1c7();_254.set("OperationName","declineConfirmations");_254.set("PublishMap","/entity/userNotification/change");_254.set("ActionDescription",_252);_254.set("ActionMessage",_253);_254.set("Args",args);this._ensureProcessor();this._processor.set("Action",_254);this._processor.set("SelectionContext",_251);this._processor.start();}else{this.editConfirmation(_251.id);}},deleteConfirmation:function(id){var _255=this._getSelectionContext(id,this.txtConfirmation,this.txtConfirmations);var args={selectionInfo:_255.selectionInfo};var _256=this.txtActionRemoveConfirmations;var _257=String.format(this.txtActionRemoveConfirmationsQuestion,_255.count,_255.name);var _258=new _1c7();_258.set("OperationName","deleteConfirmations");_258.set("PublishMap","/entity/userNotification/change");_258.set("ActionDescription",_256);_258.set("ActionMessage",_257);_258.set("Args",args);this._ensureProcessor();this._processor.set("Action",_258);this._processor.set("SelectionContext",_255);this._processor.start();},goToActivityAssociation:function(_259,id){if(!id){id=this.getSelectedId();}if(!id){return;}this._getActivityAssociationId(_259,id,function(_25a){var _25b="";switch(_25a.Association){case "Account":_25b=_25a.AccountId;break;case "Contact":_25b=_25a.ContactId;break;case "Opportunity":_25b=_25a.OpportunityId;break;case "Lead":_25b=_25a.LeadId;break;case "Ticket":_25b=_25a.TicketId;break;default:}if(!_25b){return;}Sage.Link.entityDetail(_259,_25b);});},goToLitRequest:function(id){if(!id){id=this.getSelectedId();}if(!id){return;}Sage.Link.entityDetail("LitRequest",id);},scheduleLitRequest:function(){var url="Literature.aspx?modeid=Insert";document.location.href=url;},deleteLitRequest:function(id){var _25c=this._getSelectionContext(id,this.txtLiteratureRequest,this.txtLiteratureRequests);var _25d=this.txtActionDeleteLiteratureRequests;var _25e=String.format(this.txtActionDeleteLiteratureRequestsQuestion,_25c.count,_25c.name);var _25f=new _1c7();var args={selectionInfo:_25c.selectionInfo};_25f.set("Args",args);_25f.set("OperationName","deleteLitRequests");_25f.set("ActionDescription",_25d);_25f.set("ActionMessage",_25e);_25f.set("PublishMap","/entity/litRequest/change");this._ensureProcessor();this._processor.set("Action",_25f);this._processor.set("SelectionContext",_25c);this._processor.start();},getActivityEntityContext:function(_260,_261){var cec=Sage.Services.getService("ClientEntityContext");var _262=cec.getContext();var _263=_262.EntityType;var _264=_262.EntityId;var _265={};if((_264==="")||(_264==="Insert")){if(_261){_261(_260,_265);}return;}switch(_263){case "Sage.Entity.Interfaces.IAccount":this.getAccountContext(_262,_260,_261);break;case "Sage.Entity.Interfaces.IContact":this.getContactContext(_262,_260,_261);break;case "Sage.Entity.Interfaces.IOpportunity":this.getOpportunityContext(_262,_260,_261);break;case "Sage.Entity.Interfaces.ILead":this.getLeadContext(_262,_260,_261);break;case "Sage.Entity.Interfaces.ITicket":this.getTicketContext(_262,_260,_261);break;case "Sage.Entity.Interfaces.IReturn":this.getReturnContext(_262,_260,_261);break;default:if(_261){_261(_260,_265);}}},getAccountContext:function(_266,_267,_268){var req=new Sage.SData.Client.SDataResourceCollectionRequest(_1cb.getSDataService("dynamic"));req.setResourceKind("accounts");var _269=req.uri.pathSegments.length-1;var _26a=req.uri.getPathSegment(_269);_26a["predicate"]="\""+_266.EntityId+"\"";req.uri.setPathSegment(_269+1,"Contacts");req.setQueryArg("select","NameLF,IsPrimary,WorkPhone");req.setQueryArg("orderby","IsPrimary desc");req.setQueryArg("count","1");req.read({success:function(data){var _26b={AccountId:_266.EntityId,AccountName:_266.Description,ContactId:"",ContactName:"",PhoneNumber:""};var _26c=data["$resources"];if(_26c.length>0){var _26d=_26c[0];_26b.ContactId=_1cd.getValue(_26d,"$key");_26b.ContactName=_1cd.getValue(_26d,"NameLF");_26b.PhoneNumber=_1cd.getValue(_26d,"WorkPhone");}if(_268){_268(_267,_26b);}},failure:function(){var _26e={AccountId:_266.EntityId,AccountName:_266.Description,ContactId:"",ContactName:"",PhoneNumber:""};if(_268){_268(_267,_26e);}},scope:this});},getContactContext:function(_26f,_270,_271){var req=new Sage.SData.Client.SDataSingleResourceRequest(_1cb.getSDataService("dynamic"));req.setResourceKind("contacts");req.setResourceSelector("\""+_26f.EntityId+"\"");req.setQueryArg("select","NameLF,IsPrimary,WorkPhone,Account,AccountName");req.read({success:function(_272){var _273={AccountId:_1cd.getValue(_272,"Account.$key"),AccountName:_1cd.getValue(_272,"AccountName"),ContactId:_26f.EntityId,ContactName:_1cd.getValue(_272,"NameLF"),PhoneNumber:_1cd.getValue(_272,"WorkPhone")};if(_271){_271(_270,_273);}},failure:function(){var _274={AccountId:"",AccountName:"",ContactId:_26f.EntityId,ContactName:_26f.Description,PhoneNumber:""};if(_271){_271(_270,_274);}},scope:this});},getOpportunityContext:function(_275,_276,_277){var _278=new _1ca({include:["Contacts","Account"],select:["Description","Contacts/IsPrimary","Contacts/Contact/NameLF","Contacts/Contact/WorkPhone","Account/Id","Account/AccountName"],resourceKind:"opportunities",service:_1cb.getSDataService("dynamic")});_278.fetch({predicate:"\""+_275.EntityId+"\"",onComplete:function(opp){var _279={AccountId:opp.Account.$key,AccountName:opp.Account.AccountName,ContactId:"",ContactName:"",OpportunityId:_275.EntityId,OpportunityName:opp.Description,PhoneNumber:""};var _27a=opp.Contacts.$resources;var _27b=true;for(var i=0;i<_27a.length;i++){if(_27a[i].IsPrimary||_27b){_279["ContactId"]=_27a[i].Contact.$key;_279["ContactName"]=_27a[i].Contact.NameLF;_279["PhoneNumber"]=_27a[i].Contact.WorkPhone||"";}_27b=false;}if(_277){_277(_276,_279);}},onError:function(){var _27c={AccountId:"",AccountName:"",ContactId:"",ContactName:"",OpportunityId:_275.EntityId,OpportunityName:_275.Description,PhoneNumber:""};if(_277){_277(_276,_27c);}},scope:this});},getLeadContext:function(_27d,_27e,_27f){var _280=new _1ca({include:[],select:["LeadFullName","Company","WorkPhone"],resourceKind:"leads",service:_1cb.getSDataService("dynamic")});_280.fetch({predicate:"\""+_27d.EntityId+"\"",onComplete:function(_281){var _282={LeadId:_27d.EntityId,LeadName:_281.LeadFullName,AccountName:_281.Company,PhoneNumber:_281.WorkPhone};if(_27f){_27f(_27e,_282);}},onError:function(){var _283={LeadId:_27d.EntityId,LeadName:_27d.Description,AccountName:"",PhoneNumber:""};if(_27f){_27f(_27e,_283);}},scope:this});},getTicketContext:function(_284,_285,_286){var req=new Sage.SData.Client.SDataResourceCollectionRequest(_1cb.getSDataService("dynamic"));req.setResourceKind("tickets");var _287=req.uri.pathSegments.length-1;var _288=req.uri.getPathSegment(_287);_288["predicate"]="\""+_284.EntityId+"\"";req.setQueryArg("select","Account,Account/AccountName,Contact,Contact/NameLF,Contact/WorkPhone");req.read({success:function(data){var _289={AccountId:"",AccountName:"",ContactId:"",ContactName:"",TicketId:_284.EntityId,TicketNumber:_284.Description,PhoneNumber:""};var _28a=data["$resources"];if(_28a.length>0){var _28b=_28a[0];_289.AccountId=_1cd.getValue(_28b,"Account.$key");_289.AccountName=_1cd.getValue(_28b,"Account.AccountName");_289.ContactId=_1cd.getValue(_28b,"Contact.$key");_289.ContactName=_1cd.getValue(_28b,"Contact.NameLF");_289.PhoneNumber=_1cd.getValue(_28b,"Contact.WorkPhone");}if(_286){_286(_285,_289);}},failure:function(){var _28c={AccountId:"",AccountName:"",ContactId:"",ContactName:"",TicketId:_284.EntityId,TicketNumber:_284.Description,PhoneNumber:""};if(_286){_286(_285,_28c);}},scope:this});},getReturnContext:function(_28d,_28e,_28f){var req=new Sage.SData.Client.SDataResourceCollectionRequest(_1cb.getSDataService("dynamic"));req.setResourceKind("returns");var _290=req.uri.pathSegments.length-1;var _291=req.uri.getPathSegment(_290);_291["predicate"]="\""+_28d.EntityId+"\"";req.setQueryArg("select","Account,Account/AccountName,ReturnedBy,ReturnedBy/NameLF,ReturnedBy/WorkPhone,Ticket,Ticket/TicketNumber");req.read({success:function(data){var _292={AccountId:"",AccountName:"",ContactId:"",ContactName:"",TicketId:"",TicketNumber:"",PhoneNumber:""};var _293=data["$resources"];if(_293.length>0){var rma=_293[0];_292.AccountId=_1cd.getValue(rma,"Account.$key");_292.AccountName=_1cd.getValue(rma,"Account.AccountName");_292.ContactId=_1cd.getValue(rma,"ReturnedBy.$key");_292.ContactName=_1cd.getValue(rma,"ReturnedBy.NameLF");_292.PhoneNumber=_1cd.getValue(rma,"ReturnedBy.WorkPhone");_292.TicketNumber=_1cd.getValue(rma,"Ticket.TicketNumber");_292.TicketId=_1cd.getValue(rma,"Ticket.$key");}if(_28f){_28f(_28e,_292);}},failure:function(){var _294={AccountId:"",AccountName:"",ContactId:"",ContactName:"",TicketId:"",TicketNumber:"",PhoneNumber:""};if(_28f){_28f(_28e,_294);}},scope:this});},_getActivityAssociationId:function(_295,_296,_297){var req=new Sage.SData.Client.SDataResourceCollectionRequest(_1cb.getSDataService("dynamic"));req.setResourceKind("activities");var _298=req.uri.pathSegments.length-1;var _299=req.uri.getPathSegment(_298);_299["predicate"]="\""+_296+"\"";req.setQueryArg("select","AccountId,ContactId,OpportunityId,TicketId,LeadId");req.read({success:function(data){var _29a={Association:_295,ActivityId:_296,AccountId:"",ContactId:"",OpportunityId:"",TicketId:"",LeadId:""};var acts=data["$resources"];if(acts.length>0){var act=acts[0];_29a.AccountId=_1cd.getValue(act,"AccountId");_29a.ContactId=_1cd.getValue(act,"ContactId");_29a.OpportunityId=_1cd.getValue(act,"OpportunityId");_29a.TicketId=_1cd.getValue(act,"TicketId");_29a.LeadId=_1cd.getValue(act,"LeadId");}if(_297){_297(_29a);}},failure:function(){var _29b={Association:_295,ActivityId:_296,AccountId:"",ContactId:"",OpportunityId:"",TicketId:"",LeadId:""};if(_297){_297(_29b);}},scope:this});},getActivityFreeBusyFor:function(_29c,_29d,_29e,_29f){var self=this;this.getResourceActivitiesFor(self,_29d,function(_2a0){self.getUserActivitiesFor(self,_29d,function(_2a1){var _2a2=self._buildFreeBusyData(_2a0,_2a1);if(_29e){_29e.call(_29c,_2a2);}},function(_2a3){if(_29f){_29f.call(_29c,_2a3);}});},function(data){if(_29f){_29f.call(_29c,data);}});},getResourceActivitiesFor:function(_2a4,_2a5,_2a6,_2a7){var _2a8=["Timeless","Type","StartDate","Duration","Description","Resources/Resource"];var _2a9=["$descriptors"];var _2aa="activities";var _2ab=_1cb.getSDataService("system");var _2ac=_1cd.Convert.toIsoStringFromDate(_2a5.startDate);var _2ad=_1cd.Convert.toIsoStringFromDate(_2a5.endDate);var self=this;var _2ae="(Resources.ResourceId in ("+_2a5.quotedIds.join(",")+"))"+dojo.string.substitute("and (Timeless ne true) and (StartDate between @${0}@ and @${1}@)",[_2ac,_2ad]);var _2af=new Sage.SData.Client.SDataResourceCollectionRequest(_2ab);if(_2a5.select){_2a8=_2a5.select;}_2af.setResourceKind(_2aa);_2af.setQueryArg("select",_2a8.join(","));_2af.setQueryArg("where",_2ae);_2af.setQueryArg("include",_2a9.join(","));_2af.uri.queryArgs["_expandRecurrences"]=_2a5.expandRecurrences;_2af.read({success:function(data){if(_2a6){var _2b0=self._processResourceActivityData(data);_2a6.call(_2a4,_2b0);}},failure:dojo.hitch(_2a4,_2a7)});},getUserActivitiesFor:function(_2b1,_2b2,_2b3,_2b4){var _2b5=["Timeless","Type","StartDate","Duration","Description","Leader","UserActivities/User","UserActivities/Status"];var _2b6=["$descriptors"];var _2b7="activities";var _2b8=_1cb.getSDataService("system");var _2b9=_1cd.Convert.toIsoStringFromDate(_2b2.startDate);var _2ba=_1cd.Convert.toIsoStringFromDate(_2b2.endDate);var self=this;var _2bb="(UserActivities.UserId in ("+_2b2.quotedIds.join(",")+")) and (Type ne 'atLiterature') and (UserActivities.Status ne 'asDeclned')"+dojo.string.substitute("and (StartDate between @${0}@ and @${1}@)",[_2b9,_2ba]);var _2bc=new Sage.SData.Client.SDataResourceCollectionRequest(_2b8);if(_2b2.timelessOnly){_2bb=_2bb+" and (Timeless eq true)";}else{if(!_2b2.includeTimless){_2bb=_2bb+" and (Timeless ne true)";}}if(_2b2.select){_2b5=_2b2.select;}_2bc.setResourceKind(_2b7);_2bc.setQueryArg("select",_2b5.join(","));_2bc.setQueryArg("where",_2bb);_2bc.setQueryArg("include",_2b6.join(","));_2bc.uri.queryArgs["_expandRecurrences"]=_2b2.expandRecurrences;_2bc.read({success:function(data){var _2bd=self._processUserActivityData(data);if(_2b3){_2b3.call(_2b1,_2bd);}},failure:dojo.hitch(_2b1,_2b4)});},_processUserActivityData:function(_2be){var _2bf=[];_2bf["$resources"]=[];var data=_2be["$resources"];var _2c0,_2c1;if(data){var cnt=data.length;for(var i=0;i<cnt;i++){var _2c2=false;var _2c3=data[i]["$key"];if(data[i].UserActivities){var _2c4=data[i].UserActivities.$resources;var ln=_2c4.length;for(var j=0;j<ln;j++){var _2c5=data[i].UserActivities.$resources[j].User.$key;_2c0=_2c5+":"+_2c3;_2c2=_2bf[_2c0];if(!_2c2){_2c1={$Key:_2c0,UserId:data[i].UserActivities.$resources[j].User.$key,ActivityId:_2c3,UserActivity:data[i].UserActivities.$resources[j],Activity:data[i]};_2bf[_2c0]=_2c1;_2bf[_2c0]=_2c0;_2bf["$resources"].push(_2c1);continue;}}}else{var uId=data[i].Leader.$key;_2c0=uId+":"+_2c3;data[i].UserActivities=[];data[i].UserActivities.$resources=[];var _2c6={};_2c6.$key=uId;_2c6.User={$key:uId};data[i].UserActivities.$resources.push(_2c6);_2c1={$key:_2c0,UserId:data[i].Leader.$key,ActivityId:_2c3,UserActivity:data[i].UserActivities.$resources,Activity:data[i]};_2c2=_2bf[_2c0];if(!_2c2){_2bf[_2c0]=_2c0;_2bf["$resources"].push(_2c1);}}}}var _2c7=[];_2c7["$resources"]=_2bf["$resources"];return _2c7;},_processResourceActivityData:function(_2c8){var _2c9=[];_2c9["$resources"]=[];var data=_2c8["$resources"];if(data){var cnt=data.length;for(var i=0;i<cnt;i++){var _2ca=false;var _2cb=data[i]["$key"];if(data[i].Resources){var _2cc=data[i].Resources.$resources;var ln=_2cc.length;for(var j=0;j<ln;j++){var _2cd=data[i].Resources.$resources[j].Resource.$key;var _2ce=_2cd+":"+_2cb;_2ca=_2c9[_2ce];if(!_2ca){var _2cf={$Key:_2ce,ResourceId:_2cd,ActivityId:_2cb,ResourceActivity:data[i].Resources.$resources[j],Activity:data[i]};_2c9[_2ce]=_2cf;_2c9[_2ce]=_2ce;_2c9["$resources"].push(_2cf);continue;}}}}}var _2d0=[];_2d0["$resources"]=_2c9["$resources"];return _2d0;},_buildFreeBusyData:function(_2d1,_2d2){var _2d3=_2d1["$resources"];var _2d4=_2d2["$resources"];var _2d5=[];var i;var _2d6;_2d5["$resources"]=[];for(i=0;i<_2d4.length;i++){_2d6={id:_2d4[i].$key,activityId:_2d4[i].ActivityId,itemId:_2d4[i].UserId,type:_2d4[i].Activity.Type,startDate:_2d4[i].Activity.StartDate,duration:_2d4[i].Activity.Duration,timless:_2d4[i].Activity.Timeless,description:_2d4[i].Activity.Description};_2d5["$resources"].push(_2d6);}for(i=0;i<_2d3.length;i++){_2d6={id:_2d3[i].$key,activityId:_2d3[i].ActivityId,itemId:_2d3[i].ResourceId,type:_2d3[i].Activity.Type,startDate:_2d3[i].Activity.StartDate,duration:_2d3[i].Activity.Duration,timless:_2d3[i].Activity.Timeless,description:_2d3[i].Activity.Description};_2d5["$resources"].push(_2d6);}return _2d5;},getDefaultActivityManagerTabId:function(){if(!this._defaultActivitManagerTabId){var _2d7=Sage.Services.getService("UserOptions");var self=this;if(_2d7){_2d7.get("DefaultView","ActivityAlarm",function(data){self._defaultActivitManagerTabId=self.getTabIdFromCode(data.value);},null,this,false);}}return this._defaultActivitManagerTabId;},setDefaultActivityManagerTabId:function(_2d8){this._defaultActivitManagerTabId=_2d8;},getTabIdFromCode:function(code){var _2d9="activities";switch(code){case "0":_2d9="activities";break;case "1":_2d9="allopen";break;case "2":_2d9="pastdue";break;case "3":_2d9="alarms";break;case "4":_2d9="events";break;case "5":_2d9="confirmations";break;case "6":_2d9="literature";break;}return _2d9;},getSelectedId:function(){var _2da=this.getSelectionInfo();var id="";if(_2da){if(_2da.hasCompositeKey){var _2db=_2da.selections[0].entity;return _2db["Activity"]["$key"];}if(_2da.selections.length==1){id=_2da.selections[0].id;}else{id=_2da.selections[0].id;}}return id;},getSelectedItem:function(){var _2dc=this.getSelectionInfo();var _2dd={id:false,hasCompositeKey:false,entity:false};if(_2dc){_2dd.hasCompositeKey=_2dc.hasCompositeKey;_2dd.entity=_2dc.entity;if(_2dc.selections.length==1){_2dd.id=_2dc.selections[0].id;_2dd.entity=_2dc.selections[0].entity;}else{_2dd.id=_2dc.selections[0].id;_2dd.entity=_2dc.selections[0].entity;}}return _2dd;},getSelections:function(){var _2de=this.getSelectionInfo();var _2df=null;if(_2de){_2df=_2de.selections;}return _2df;},prepareSelections:function(){return this.getSelectionInfo();},getSelectionInfo:function(){var _2e0=false;try{var _2e1=dijit.byId("list");if(_2e1){_2e0=_2e1.getSelectionInfo(true);}}catch(e){_1c2.alert(this.txtErrorActionMsg||"error getting selectionInfo");}return _2e0;},getTotalSelectionCount:function(){var _2e2=0;try{var _2e3=dijit.byId("list");if(_2e3){_2e2=_2e3.getTotalSelectionCount();}}catch(e){}return _2e2;},verifySelection:function(_2e4){if(_2e4!==null){return (_2e4.selectionCount!==0);}return false;},verifySingleSelection:function(_2e5){if(_2e5!==null){return (_2e5.selectionCount===1);}return false;},setSelectionCount:function(){try{var _2e6=dijit.byId("list");if(_2e6){$("#selectionCount").text(_2e6.getTotalSelectionCount());}}catch(e){}},refreshList:function(_2e7){try{var _2e8=dijit.byId("list");if(_2e8){var _2e9=Sage.Services.getService("ClientGroupContext");if(_2e9){var ctx=_2e9.getContext();if(_2e7===ctx.CurrentGroupID){_2e8.refreshView(_2e7);}}}}catch(e){}},_getSelectionContext:function(id,_2ea,_2eb){var _2ec={id:null,selectionInfo:null,count:0,mode:"select",name:null};if(!id){_2ec.selectionInfo=this.getSelectionInfo();_2ec.count=_2ec.selectionInfo.selectionCount;if(_2ec.count===1){_2ec.id=_2ec.selectionInfo.selectedIds[0];}}else{var _2ed=[];var _2ee=[];_2ed.push(id);_2ee.push({rn:0,id:id});var _2ef={key:"",mode:"singleSelect",selectionCount:1,recordCount:1,sortDirection:"",sortField:"",keyField:"",hasCompositeKey:id.indexOf("Activity")>-1?true:false,ranges:[],selections:_2ee,selectedIds:_2ed};_2ec.selectionInfo=_2ef;_2ec.id=id;_2ec.count=1;}_2ec.name=(_2ec.count>1)?_2eb:_2ea;return _2ec;},getActivityService:function(){var _2f0=_1cb.getSDataService("dynamic");return _2f0;}});if(!Sage.Services.hasService("ActivityService")){Sage.Services.addService("ActivityService",new _1d1());}return _1d1;});},"Sage/MainView/ActivityMgr/ActivityEditor":function(){define(["dijit/_Widget","Sage/_Templated","dojo/_base/declare","Sage/Data/SingleEntrySDataStore","Sage/MainView/BindingsManager","Sage/Utility","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","Sage/UI/_DialogLoadingMixin","Sage/Utility/Activity","dojo/date","dojo/date/locale","dojo/string","Sage/UI/Dialogs","dijit/Tooltip","Sage/UI/AttachmentList","Sage/Data/SDataServiceRegistry","Sage/Utility/File","Sage/Utility/File/Attachment","Sage/UI/Controls/Lookup","dojo/i18n!./nls/ActivityEditor","dojo/text!./templates/ActivityEditor.html","dojo/dom-class","Sage/Utility/UserOptions","dijit/focus","dojo/_base/lang","Sage/MainView/ActivityMgr/ActivityEditorAttendeesTab","dijit/layout/ContentPane","dojo/dom-style","dojo/on","dojo/dom-geometry","dijit/Toolbar","dijit/layout/TabContainer","dijit/form/Textarea","dojox/layout/TableContainer","dijit/layout/BorderContainer","dijit/form/ComboBox","Sage/Services/UserOptions","Sage/UI/Controls/SingleSelectPickList","Sage/UI/Controls/DateTimePicker","Sage/UI/Controls/Lookup","Sage/MainView/ActivityMgr/RecurringEditor","dijit/Dialog","Sage/UI/Controls/DurationSelect","Sage/Services/CalendarSecurityService"],function(_2f1,_2f2,_2f3,_2f4,_2f5,_2f6,_2f7,_2f8,_2f9,_2fa,_2fb,_2fc,_2fd,_2fe,_2ff,_300,_301,_302,_303,_304,_305,_306,_307,_308,_309,lang,_30a,_30b,_30c,on,_30d){var _30e=_2f3("Sage.MainView.ActivityMgr.ActivityEditor",[_2f1,_2f2],{activityId:"",activityMemberId:"",_memberSecurityData:[],mode:"",userNotificationId:"",id:"",activityType:"",_options:{},_dialog:false,_currentUserId:null,_originalLeaderId:false,_activityService:false,_activityData:false,_activityStore:false,_currentUserActivityData:false,_tempUAData:false,_currentUserActivityStore:false,_notificationData:false,_notificationStore:false,_notificationBindingMgr:false,_historyStore:false,_deleteAttendeeConnects:[],_attendeesData:[],_newAttendeesData:[],_attendeesForRemoval:[],_userActivitiesRequestCount:0,_resourceRequestCount:0,_resourceDeleteRequestCount:0,_availabilityShowing:false,_bindingMgr:false,_uaBindingMgr:false,_activityChangeConnection:false,lup_Account:false,lup_Contact:false,lup_Opportunity:false,lup_Ticket:false,lup_Lead:false,lup_Leader:false,accountLookupConfig:{},contactLookupConfig:{},opportunityLookupConfig:{},ticketLookupConfig:{},leadLookupConfig:{},resourcesLookupConfig:{},_isBinding:false,_activitySaved:false,_userActivitiesSaved:false,_currentUserActivitySaved:false,_resourcesSaved:false,_resourcesRemoved:false,_attachmentsSaved:false,_completeAfterSaving:false,_attachmentList:false,_tempIdForAttachments:false,confirmationDisableList:["pk_Regarding","tb_Location","dtp_startDate","sel_Duration","cb_Timeless","cb_Alarm","sel_AlarmDur","cb_AutoRollover","rdo_Contact","rdo_Lead","lup_Account","lup_Contact","lup_Opportunity","lup_Ticket","lup_Lead","ta_Notes","pk_Priority","lup_Leader","pk_Category"],noEditDisableList:["pk_Regarding","tb_Location","dtp_startDate","sel_Duration","cb_Timeless","cb_AutoRollover","rdo_Contact","rdo_Lead","lup_Account","lup_Contact","lup_Opportunity","lup_Ticket","lup_Lead","pk_Priority","lup_Leader","pk_Category"],_readOnlyMode:false,_isProcessing:false,eventConnections:[],activityDefaultValues:{},widgetsInTemplate:true,widgetTemplate:new Simplate(eval(_306)),constructor:function(){_2f8.mixin(this,_305);this._preloadActivityOptions();this._activityService=_301.getSDataService("system");this._setupStore();this._currentUserId=_2f6.getClientContextByKey("userID")||"";this._currentUserId=this._currentUserId.trim();dojo.subscribe("/entity/attachment/create",this,this._updateActivityETag);dojo.subscribe("/entity/attachment/update",this,this._updateActivityETag);dojo.subscribe("/entity/attachment/delete",this,this._updateActivityETag);},destroy:function(){if(this._activityChangeConnection){dojo.disconnect(this._activityChangeConnection);this._activityChangeConnection=false;}if(this._bindingMgr){this._bindingMgr.destroy();}if(this._uaBindingMgr){this._uaBindingMgr.destroy();}for(var i=0;i<this.eventConnections.length;i++){dojo.disconnect(this.eventConnections[i]);}this.lup_Account.destroy();this.lup_Contact.destroy();this.lup_Opportunity.destroy();this.lup_Ticket.destroy();this.lup_Lead.destroy();this.lup_Leader.destroy();this.eventConnections=[];this.inherited(arguments);},postCreate:function(){this._asScheduledTooltip=new _2ff({connectId:[this.btn_asScheduled.id],label:" ",position:["below"]});dojo.connect(this.dtp_scheduledDate,"onChange",this,function(){this._asScheduledTooltip.set("label",_2fc.format(this.dtp_scheduledDate.get("value"),{selector:"datetime",fullYear:true}));});this._nowTooltip=new _2ff({connectId:[this.btn_Now.id],label:" ",position:["below"]});dojo.connect(this.dtp_completedDate,"onChange",this,function(){this._nowTooltip.set("label",_2fc.format(this.dtp_completedDate.get("value"),{selector:"datetime",fullYear:true}));});dojo.subscribe("/entity/activityAttendee/primaryChanged",this,this.primaryChanged);dojo.subscribe("/entity/activityAttendee/add",this,this._updateActivityAttendeeETag);dojo.subscribe("/entity/activityAttendee/delete",this,this._updateActivityAttendeeETag);},primaryChanged:function(_30f,type,_310){var _311=_2f8.clone(_30f);_311["attendeeTab"]=true;_311["$descriptor"]=_311["Name"];_311["$key"]=_311["EntityId"];if(_311.EntityType=="Contact"){if(!_311["Account"]){_311["Account"]={"$key":_311["AccountId"],"AccountName":_311["AccountName"]||_311["Company"]};}_311["ContactId"]=_311["EntityId"];if(_311["PrimaryChecked"]){this.rdo_Contact.set("checked",true);this.rdo_Lead.set("checked",false);this.lup_Contact.set("selectedObject",_311);this.attendeesTab._uncheckItem=_311;}else{this.lup_Contact.set("selectedObject",null);}}else{if(_311.EntityType=="Lead"){_311["Company"]=_311["AccountName"];_311["LeadFullName"]=_311["Name"];_311["LeadId"]=_311["EntityId"];if(_311["PrimaryChecked"]){this.rdo_Contact.set("checked",false);this.rdo_Lead.set("checked",true);this.lup_Lead.set("selectedObject",_311);this.attendeesTab._uncheckItem=_311;}else{this.lup_Lead.set("selectedObject",null);}}}},isFirstOpen:true,show:function(_312){this._isProcessing=false;this._dialog.set("refocus",false);this._dialog.show();if(this.isFirstOpen){this.isFirstOpen=false;this._ensureLookupsCreated();this.connect(this._recurringEditor,"onStartDateChanged",this._recurringStartDateChanged);this.connect(this._recurringEditor,"onRecurPeriodChanged",this._recurringPeriodChanged);this.connect(this._dialog,"onHide",this._cleanOnClose);this._ensureAttachmentList();}this.sel_AlarmDur.resetItems();this.activityDefaultValues={};if(this.mode==="New"){this.activityDefaultValues=_312||{};this._loadData();}if(this.mode==="CompleteUnscheduled"&&!this.historyId){this.activityDefaultValues=_312||{};this._loadHistory();}if(!this._dialog._standby){_2f8.mixin(this._dialog,new _2f9());if(!this._activityData&&!this._notificationData){this._dialog.showLoading();}}if(!this._dialog.helpIcon){_2f8.mixin(this._dialog,new _2f7());this._dialog.createHelpIconByTopic(this._getHelpTopicByMode());}this._availabilityShowing=false;this.tc_EditActivity.selectChild(this.cp_General);this._dialog.resize();},hide:function(){this._dialog.hide();},_onDlgHide:function(){this.onHide();},onHide:function(){this.attendeesTab._dialogHide();this._cleanOnClose();},_cleanOnClose:function(){var svc=Sage.Services.getService("ClientEntityContext");svc.clearTemporaryContext();this.set("activityId","");this.set("activityMemberId","");if(this._activityStore){this._activityStore.clearCache();}if(this._historyStore){this._historyStore.clearCache();}this._hideLookupTooltip(this.lup_Account);this._hideLookupTooltip(this.lup_Contact);this._hideLookupTooltip(this.lup_Opportunity);this._hideLookupTooltip(this.lup_Ticket);this._hideLookupTooltip(this.lup_Lead);this._hideLookupTooltip(this.lup_Leader);},_hideLookupTooltip:function(_313){if(_313){_313.hideTooltip();}},_controllOnMouseEnter:function(){},_updateActivityETag:function(_314){if(_314){this._activityData.AttachmentCount++;}else{this._activityData.AttachmentCount--;}if(this._dialog.open&&this.activityId){var req=new Sage.SData.Client.SDataSingleResourceRequest(_301.getSDataService("system"));req.setResourceKind("activities");req.setResourceSelector("\""+this.activityId+"\"");req.setQueryArg("precedence","0");req.read({success:function(_315){this._activityData["$etag"]=_315["$etag"];},scope:this});}},_updateActivityAttendeeETag:function(_316){if(this._dialog.open&&this.activityId){this.AttCount=_316;var req=new Sage.SData.Client.SDataSingleResourceRequest(_301.getSDataService("system"));req.setResourceKind("activities");req.setResourceSelector("\""+this.activityId+"\"");req.setQueryArg("precedence","0");req.setQueryArg("select","details/AttendeeCount");req.read({success:function(_317){this._activityData["$etag"]=_317["$etag"];if(_317["Details"]){this._activityData["Details"]["AttendeeCount"]=_317["Details"]["AttendeeCount"];}},scope:this});}},_ensureAttendeesTab:function(){if(!this.attendeesTab||this.mode!=this.attendeesTab.editorMode||this.activityId!==this.attendeesTab._activityId){this._addAttendeesTab(this.mode);this.userNotificationId=null;}},_addAttendeesTab:function(mode){if(this.attendeesTab){dijit.byId(this.tc_EditActivity.id).removeChild(dijit.byId("attendeesTabPane"));if(dijit.byId(this.attendeesTab.lup_Lead.id)){dijit.byId(this.attendeesTab.lup_Lead.id).destroyRecursive();}if(dijit.byId(this.attendeesTab.lup_Contact.id)){dijit.byId(this.attendeesTab.lup_Contact.id).destroyRecursive();}dijit.byId("attendeesTabPane").destroyRecursive();this.attendeesTab=null;}var _318={editorMode:mode};var _319=this.attendeesTab=new _30a(_318);var cp=new _30b({id:"attendeesTabPane",title:this.tabNameParticipants,"class":"tabContent remove-padding"},_319.domNode);this.tc_EditActivity.addChild(cp);_319.actEditor=this;var _31a=true;if((this.mode==="Confirm")||this._isOccurence()){_31a=false;}_319.startup(!_31a);on(cp,"show",function(){if(_31a){_319.setToReadOnly(false);}else{_319.setToReadOnly(true);}_319._tabShow();});},_getHelpTopicByMode:function(){switch(this.mode){case "Confirm":return "confirmnotifications";case "Complete":case "CompleteUnscheduled":return "completeactivity";}return "activitydetailview";},_showCorrectButtonBar:function(mode){if(mode==="Confirm"){_307.add(this.add_edit_buttons,"display-none");_307.add(this.complete_buttons,"display-none");_307.remove(this.confirmation_edit_buttons,"display-none");}else{if(mode==="Complete"||mode==="CompleteUnscheduled"){_307.add(this.add_edit_buttons,"display-none");_307.add(this.confirmation_edit_buttons,"display-none");_307.remove(this.complete_buttons,"display-none");}else{_307.add(this.confirmation_edit_buttons,"display-none");_307.add(this.complete_buttons,"display-none");_307.remove(this.add_edit_buttons,"display-none");}}},_setModeAttr:function(mode){var idx;this.mode=mode;this._showCorrectButtonBar(mode);if(mode==="Confirm"){this._ensureLookupsCreated();this._bulkSetProperty(this,this.confirmationDisableList,"disabled",true);}else{this._bulkSetProperty(this,this.confirmationDisableList,"disabled",false);}if(mode.indexOf("New")===0){this.mode="New";var _31b=mode.replace("New ","").toLowerCase();switch(_31b){case "phonecall":case "atphonecall":this.activityType="atPhoneCall";break;case "meeting":case "atappointment":this.activityType="atAppointment";break;case "todo":case "attodo":this.activityType="atToDo";break;case "personalactivity":case "atpersonal":case "personal":this.activityType="atPersonal";break;case "letter":case "atletter":case "doc":case "atdoc":this.activityType="atDoc";break;case "fax":case "atfax":this.activityType="atFax";break;default:this.activityType="atAppointment";break;}this._activityData=false;_307.add(this.btn_Delete.domNode,"display-none");_307.add(this.btn_Complete.domNode,"display-none");this._ensureAttendeesTab();}else{_307.remove(this.btn_Delete.domNode,"display-none");_307.remove(this.btn_Complete.domNode,"display-none");}if(mode==="Complete"||mode==="CompleteUnscheduled"){_307.add(this.dateSection_AddEdit.domNode,"display-none");_307.remove(this.dateSection_Complete.domNode,"display-none");_307.remove(this.resultContainer.domNode,"display-none");idx=this.tc_EditActivity.getIndexOfChild(this.cp_Recurring);if(idx>0){this.tc_EditActivity.removeChild(this.cp_Recurring);window.setTimeout(dojo.hitch(this,function(){this._dialog.resize();},10));}if(this._dialog.open){this._setUI();this._completeModeManualBind();}var _31c=this._options.followUp.defaultFollowUpType;var _31d=(_31c==="None")?this.noneText:_2fa.getActivityTypeName(_31c);this.sel_Followup.set("value",_31d);this.ck_coAttachments.set("checked",this._options.followUp.carryOverAttachments);this.ck_coNotes.set("checked",this._options.followUp.carryOverNotes);if(mode==="CompleteUnscheduled"){this._ensureAttendeesTab();}}else{_307.add(this.dateSection_Complete.domNode,"display-none");_307.remove(this.dateSection_AddEdit.domNode,"display-none");_307.add(this.resultContainer.domNode,"display-none");idx=this.tc_EditActivity.getIndexOfChild(this.cp_Recurring);if(idx<0){var _31e=this.tc_EditActivity.getIndexOfChild(this.cp_Attachments);this.tc_EditActivity.addChild(this.cp_Recurring,_31e);window.setTimeout(dojo.hitch(this,function(){this._dialog.resize();},10));}}if(this._dialog.helpIcon){this._dialog.set("helpTopic",this._getHelpTopicByMode());}},_setActivityIdAttr:function(_31f){_31f=_31f||"";this.activityId=_31f;this._activityData=false;if(_31f!==""){this.historyId="";this._loadData();this._ensureAttendeesTab();}},_getActivityIdAttr:function(){return this.activityId;},_setActivityMemberIdAttr:function(_320){_320=_320||"";this.activityMemberId=_320;},_getActivityMemberIdAttr:function(){return this.activityMemberId;},_setUserNotificationIdAttr:function(_321){_321=_321||"";if(_321!==this.userNotificationId){this.userNotificationId=_321;this.set("activityId","");this._notificationData=false;this._loadNotification();}this._ensureAttendeesTab();},_getUserNotificationId:function(){return this.userNotificationId;},_setHistoryIdAttr:function(_322){_322=_322||"";if(this.historyId!==_322){this.historyId=_322;this._activityData=false;if(_322!==""){this.activityId="";this._loadHistory();}}},_getHistoryIdAttr:function(){return this.historyId;},_preloadActivityOptions:function(){this._options={atAppointment:{alarmLead:"15",duration:"60",autoRollover:false,timeless:false},atPhoneCall:{alarmLead:"15",duration:"15",autoRollover:false,timeless:false},atToDo:{alarmLead:"none",duration:"15",autoRollover:false,timeless:false},atPersonal:{alarmLead:"none",duration:"5",autoRollover:false,timeless:false},followUp:{defaultFollowUpType:"None",carryOverNotes:false,carryOverAttachments:false},calendar:{dayStartTime:"9",dayEndTime:"6"}};var _323=Sage.Services.getService("UserOptions");if(_323){_323.getByCategories(["ActivityMeetingOptions","ActivityPhoneOptions","ActivityToDoOptions","ActivityPersonalOptions","Calendar"],this._receivedOptions,this);}},_receivedOptions:function(data){var _324={"0":"None","1":"atPhoneCall","2":"atAppointment","3":"atToDo"};var opts=data["$resources"];for(var i=0;i<opts.length;i++){var opt=opts[i];var _325=(opt.category==="ActivityMeetingOptions")?"atAppointment":(opt.category==="ActivityPhoneOptions")?"atPhoneCall":(opt.category==="ActivityToDoOptions")?"atToDo":(opt.category==="ActivityPersonalOptions")?"atPersonal":false;if(_325&&this._options[_325]&&opt.value){switch(opt.name){case "AlarmLead":this._options[_325].alarmLead=(parseInt(opt.value,10)>0)?opt.value:"none";break;case "Duration":this._options[_325].duration=opt.value;break;case "Timeless":var tval=opt.value.substring(0,1).toUpperCase();this._options[_325].timeless=tval==="T";break;case "AutoRollover":var _326=opt.value.substring(0,1).toUpperCase();this._options[_325].autoRollover=_326==="T";break;}}else{if(opt.category==="Calendar"){switch(opt.name){case "DayStartTime":this._options.calendar.dayStartTime=_308.getConvertedOptionValue(opt["name"],opt["value"]);break;case "DayEndTime":this._options.calendar.dayEndTime=_308.getConvertedOptionValue(opt["name"],opt["value"]);break;case "DefaultFollowUpType":this._options.followUp.defaultFollowUpType=_324[opt.value]||"None";break;case "CarryOverNotes":var nval=opt.value.substring(0,1).toUpperCase();this._options.followUp.carryOverNotes=nval==="T";break;case "CarryOverAttachments":var aval=opt.value.substring(0,1).toUpperCase();this._options.followUp.carryOverAttachments=aval==="T";}}}}},_setupStore:function(){if(!this._activityStore){this._activityStore=new _2f4({include:["$descriptors"],resourceKind:"activities",ignoreETag:true,service:this._activityService});}if(!this._currentUserActivityStore){this._currentUserActivityStore=new _2f4({include:["$descriptors"],select:["Alarm","AlarmTime","Activity/StartDate"],resourceKind:"userActivities",service:this._activityService});}if(!this._historyStore){this._historyStore=new _2f4({include:["$descriptors"],resourceKind:"history",service:_301.getSDataService("dynamic")});}},_resetDataProps:function(){this._activityData=false;this._currentUserActivityData=false;this._tempUAData=false;this._notificationData=false;this._attendeesData=[];this._attendeesForRemoval=[];this._newAttendeesData=[];this._userActivitiesRequestCount=0;this._resourceRequestCount=0;this._resourceDeleteRequestCount=0;this._activitySaved=false;this._userActivitiesSaved=false;this._currentUserActivitySaved=false;this._resourcesSaved=false;this._resourcesRemoved=false;this._attachmentsSaved=false;this._originalLeaderId=false;if(this._attachmentList){this._attachmentList.clearNewAttachments();}this._availabilityDataDateRange={fromDate:false,toDate:false,users:[]};},_loadData:function(){if(this._dialog._standby){this._dialog.showLoading();}this._resetDataProps();if(this._activityStore){if(this.mode==="New"){this._activityStore.newItem({onComplete:function(act){Sage.Utility.setValue(act,"Type",this.activityType);this._receivedActivity(act);},onError:this._requestFailure,scope:this});}else{this._activityStore.fetch({predicate:"\""+this.activityId+"\"",onComplete:this._receivedActivity,onError:this._requestFailure,scope:this});}}},_receivedActivity:function(_327){this._activityData=_327;if((this._currentUserActivityStore)&&(this.mode!=="New")&&(this.mode!="CompleteUnscheduled")){var id=this.activityId||_327.$key;id=(id.indexOf(";")>0)?id.substring(0,12):id;var _328=this.activityMemberId||this._currentUserId;this._currentUserActivityStore.fetch({predicate:_2fd.substitute("'ActivityId=${0};UserId=${1}'",[id,_328]),onComplete:this._receivedUserActivity,onError:this._noUserActivity,scope:this});}if(_327.AttachmentCount>0){this._activityData.Attachment=true;}this._tempIdForAttachments=false;var _329=Sage.Services.getService("ClientEntityContext");var _32a=(this.historyId)?{"EntityId":this.historyId,"EntityType":"Sage.Entity.Interfaces.IHistory","Description":this._activityData.$descriptor,"EntityTableName":"HISTORY"}:{"EntityId":this.activityId,"EntityType":"Sage.Entity.Interfaces.IActivity","Description":this._activityData.$descriptor,"EntityTableName":"ACTIVITY"};_329.setTemporaryContext(_32a);if(this.mode!=="New"&&this.mode!="CompleteUnscheduled"){this.activityType=_327.Type;}else{this._applyUserOptionsForNewActivity();}if(this.activityMemberId&&this.activityMemberId!==this._currentUserId&&!this._memberSecurityData[this.activityMemberId]){this._checkSecurityAccess(this._currentUserId,this.activityMemberId,function(_32b){if(_32b){this._memberSecurityData[this.activityMemberId]=[];this._memberSecurityData[this.activityMemberId].AllowAdd=_32b.AllowAdd;this._memberSecurityData[this.activityMemberId].AllowEdit=_32b.AllowEdit;this._memberSecurityData[this.activityMemberId].AllowDelete=_32b.AllowDelete;}this._setUIForActivityType(_327.Type);this._bind();},this);}else{this._setUIForActivityType(_327.Type);this._bind();}if(this._activityData["Leader"]){this._originalLeaderId=this._activityData.Leader["$key"];}else{this._originalLeaderId=this._activityData["UserId"]||this._currentUserId;}if(this._dialog._standby){this._dialog.hideLoading();}this.attendeesTab._activityId=_327.$key;if(_327.details){this._activityData.AttendeeCount=_327.details.AttendeeCount;}if(this.mode=="Confirm"){this.attendeesTab._grid.refresh();}},_receivedUserActivity:function(_32c){if(this._dialog._standby){this._dialog.hideLoading();}this._currentUserActivityData=_32c;if(_32c.Alarm===null){_32c.Alarm=this._activityData.Alarm;}if(_32c.AlarmTime===null){_32c.AlarmTime=this._activityData.AlarmTime;}this._tempUAData={Alarm:_32c.Alarm,AlarmTime:_2f6.Convert.toDateFromString(_32c.AlarmTime)};this._bindUserActivity();},_loadNotification:function(){if(this._dialog._standby){this._dialog.showLoading();}this._resetDataProps();if(!this._notificationStore){this._notificationStore=new _2f4({include:["Activity","$descriptors"],resourceKind:"userNotifications",service:_301.getSDataService("system")});}this._notificationStore.fetch({predicate:"'"+this.userNotificationId+"'",onComplete:this._receivedNotification,onError:this._requestFailure,scope:this});},_loadHistory:function(){if(this._dialog._standby){this._dialog.showLoading();}if(this._historyStore){if(!this.historyId){this._historyStore.newItem({onComplete:function(hist){this._receivedActivity(_2f8.mixin(hist,this.activityDefaultValues));this._formatHeader();},scope:this});}else{this._historyStore.fetch({predicate:this.historyId,onComplete:function(hist){this._receivedActivity(hist);this._formatHeader();},onError:this._requestFailure,scope:this});}}},_receivedNotification:function(_32d){this._receivedActivity(_32d.Activity||this._emptyActivity);this._notificationData=_32d;this._formatHeader();this._bindUserNotification();if(_32d.Type==="New"){this._setUIAsUnConfirmed();}else{_307.remove(this.otherConfButtons,"display-none");_307.add(this.newConfButtons,"display-none");if(_32d.Type==="Confirm"||_32d.Type==="Decline"){this.ta_confirmationResponse.set("disabled",true);_307.remove(this.responseLabel,"display-none");_307.remove(this.ta_confirmationResponse.domNode,"display-none");}else{_307.add(this.responseLabel,"display-none");_307.add(this.ta_confirmationResponse.domNode,"display-none");}if(_32d.Type==="Change"){this._checkUserConfirmationStatus();}}},_checkUserConfirmationStatus:function(){var req=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("system")).setResourceKind("userActivities").setResourceSelector("\""+this._notificationData.Activity["$key"]+";"+this._notificationData.ToUser["$key"]+"\"");req.read({success:function(ua){if(ua.Status==="asUnconfirmed"){this._setUIAsUnConfirmed();}},failure:function(){},scope:this});},_setUIAsUnConfirmed:function(){_307.add(this.otherConfButtons,"display-none");_307.remove(this.newConfButtons,"display-none");this.ta_confirmationResponse.set("disabled",false);_307.remove(this.responseLabel,"display-none");_307.remove(this.ta_confirmationResponse.domNode,"display-none");},_applyUserOptionsForNewActivity:function(){var _32e=_2fa.roundDateToNextQuarterHour(new Date());var _32f="15";if(this._options[this.activityType]){var _330=this._options[this.activityType];_2f6.setValue(this._activityData,"Duration",_330["duration"]||"60");_32f=_330["alarmLead"];_2f6.setValue(this._activityData,"Rollover",_330["autoRollover"]);_2f6.setValue(this._activityData,"Timeless",_330["timeless"]);if(this._activityData.Timeless){_32e=new Date(_32e.getFullYear(),_32e.getMonth(),_32e.getDate(),0,0,5);}}_2f6.setValue(this._activityData,"StartDate",_2f6.Convert.toIsoStringFromDate(_32e));this._activityData=_2f8.mixin(this._activityData,this.activityDefaultValues);if(_32f.toLowerCase()==="none"){_2f6.setValue(this._activityData,"Alarm",false);_32f=15;}else{Sage.Utility.setValue(this._activityData,"Alarm",true);_32f=parseInt(_32f,10);}var d=_2f6.Convert.toDateFromString(_2f6.getValue(this._activityData,"StartDate"));var _331=this._getAlarmTime(d,_32f,this._activityData.Timeless);_2f6.setValue(this._activityData,"AlarmTime",_2f6.Convert.toIsoStringFromDate(_331));this.sel_AlarmDur.set("startTime",d);this.sel_AlarmDur.set("timeValue",_331);var ldr={"$key":this._currentUserId,"$descriptor":_2f6.getClientContextByKey("userPrettyName")};_2f6.setValue(this._activityData,"Leader",ldr);if(this.activityDefaultValues.hasOwnProperty("carryOverAttachmentsFrom")){window.setTimeout(dojo.hitch(this,function(){this.doCarryOverAttachments(this.activityDefaultValues["carryOverAttachmentsFrom"]);},1000));}if(this.activityDefaultValues.hasOwnProperty("carryOverParticipantsFrom")){window.setTimeout(dojo.hitch(this,function(){this._getHistoryAttendees(this.activityDefaultValues["carryOverParticipantsFrom"]);},1000));}},_noUserActivity:function(){this._bindUserActivity();},_requestFailure:function(_332){if(this._dialog._standby){this._dialog.hideLoading();}_2fe.showError(this.failedLoadingDataMsg);this.hide();},_createBindings:function(){if(this._bindingMgr){this._bindingMgr.destroy();this._bindingMgr=false;}this._bindingMgr=new _2f5({defaultBinding:{boundEntity:this._activityData},items:[{boundWidget:this.tb_Location,entityProperty:"Location"},{boundWidget:this.pk_Regarding,entityProperty:"Description",onChange:dojo.hitch(this,"_descriptionChanged")},{boundWidget:this.pk_Category,entityProperty:"Category"},{boundWidget:this.pk_Priority,entityProperty:"Priority"},{boundWidget:this.ta_Notes,entityProperty:"LongNotes",onChange:dojo.hitch(this,"_notesChanged")},{boundWidget:this.dtp_startDate,dataType:"date",entityProperty:"StartDate",onChange:dojo.hitch(this,"_startDateChanged")},{boundWidget:this.sel_Duration,entityProperty:"Duration"},{boundWidget:this.sel_Duration,entityProperty:"StartDate",widgetProperty:"startTime",dataType:"date",twoWay:false},{boundWidget:this.sel_AlarmDur,entityProperty:"StartDate",widgetProperty:"startTime",dataType:"date",twoWay:false},{boundWidget:this.cb_Timeless,entityProperty:"Timeless",widgetProperty:"checked",onChange:dojo.hitch(this,"_timelessChange")},{boundWidget:this.cb_AutoRollover,entityProperty:"Rollover",widgetProperty:"checked"},{boundWidget:this.dtp_scheduledDate,dataType:"date",entityProperty:"StartDate"},{boundWidget:this.sel_DurationComplete,entityProperty:"Duration"},{boundWidget:this.sel_DurationComplete,entityProperty:"StartDate",widgetProperty:"startTime",dataType:"date",twoWay:false},{boundWidget:this.cb_TimelessComplete,entityProperty:"Timeless",widgetProperty:"checked",onChange:dojo.hitch(this,"_timelessChange")}]});},_createUABindings:function(){this._uaBindingMgr=new _2f5({items:[{boundWidget:this.cb_Alarm,entityProperty:"Alarm",widgetProperty:"checked",onChange:dojo.hitch(this,"_alarmCheckChanged")}]});},_createNotificationBindings:function(){this._notificationBindingMgr=new _2f5({items:[{boundWidget:this.ta_confirmationResponse,entityProperty:"Notes",boundEntity:this._notificationData}]});},_bind:function(){if(this._activityData){if(!this._bindingMgr){this._createBindings();}else{if(!this._bindingMgr.boundEntity||(this._activityData["$key"]!==this._bindingMgr.boundEntity["$key"])){this._bindingMgr.setBoundEntity(this._activityData);}else{this._bindingMgr.bind();}}if(this.mode==="New"||this.mode==="CompleteUnscheduled"){this._noUserActivity();}this._manualBind();this._setUI();}},_bindUserNotification:function(){if(!this._notificationBindingMgr){this._createNotificationBindings();}else{this._notificationBindingMgr.setBoundEntity(this._notificationData);}},_isNullOrWhitespace:function(str){return (!str||str.trim()==="");},_manualBind:function(){if(this._activityData){var act,_333,_334;this._isBinding=true;act=this._activityData;var _335=this._isNullOrWhitespace(act.AccountId)?null:{"$key":act.AccountId,"$descriptor":act.AccountName};this.lup_Account.set("selectedObject",_335);_333=this._isNullOrWhitespace(act.ContactId)?null:{"$key":act.ContactId,"$descriptor":act.ContactName};this.lup_Contact.set("selectedObject",_333);var _336=this._isNullOrWhitespace(act.OpportunityId)?null:{"$key":act.OpportutunityId,"$descriptor":act.OpportunityName};this.lup_Opportunity.set("selectedObject",_336);var _337=this._isNullOrWhitespace(act.TicketId)?null:{"$key":act.TicketId,"$descriptor":act.TicketNumber};this.lup_Ticket.set("selectedObject",_337);_334=this._isNullOrWhitespace(act.LeadId)?null:{"$key":act.LeadId,"$descriptor":act.LeadName};this.lup_Lead.set("selectedObject",_334);this.tb_LeadCompanyName.set("value",this._isNullOrWhitespace(act.LeadId)?"":act.AccountName);this._updateLookupSeedValues(act.AccountId);this.lup_Leader.set("selectedObject",act.Leader);if(this.mode!=="Complete"){this._recurringEditor.set("activity",act);}var _338=Sage.Utility.Convert.toDateFromString(this._activityData.AlarmTime);this.sel_AlarmDur.set("timeValue",_338);this._completeModeManualBind();this._isBinding=false;if(this.mode=="New"||this.mode==="CompleteUnscheduled"){if(this._activityData){act=this._activityData;_333=this._isNullOrWhitespace(act.ContactId)?null:{"$key":act.ContactId,"$descriptor":act.ContactName};this.attendeesTab._addContactAttendee(_333);_334=this._isNullOrWhitespace(act.LeadId)?null:{"$key":act.LeadId,"$descriptor":act.LeadName};this.attendeesTab._addLeadAttendee(_334);}}}},_completeModeManualBind:function(){if(this.mode==="Complete"||this.mode==="CompleteUnscheduled"){this.dtp_completedDate.set("value",new Date());this.pl_Result.set("value",this.completeText);if(this.mode==="Complete"){this.pl_Result.focus();}}},_bindUserActivity:function(){if(!this._uaBindingMgr){this._createUABindings();}this.sel_AlarmDur.set("disabled",false);var _339=this._getActivityStartDate();this.sel_AlarmDur.set("startTime",_339);var ent=(this._currentUserActivityData)?this._currentUserActivityData:this._activityData;var _33a=_2f6.Convert.toDateFromString(ent.AlarmTime);if(this._currentUserActivityData&&_2f6.getValue(this._activityData,"RecurrenceState")==="rstOccurrence"){var _33b=_2f6.Convert.toDateFromString(this._currentUserActivityData.Activity.StartDate);var _33c=_2f6.Convert.toDateFromString(this._currentUserActivityData.AlarmTime);var dur=_2fb.difference(_33b,_33c,"minute");_33a=_2fb.add(_339,"minute",dur);}this._uaBindingMgr.setBoundEntity(ent);this.sel_AlarmDur.set("timeValue",_33a);this.sel_AlarmDur.set("disabled",!ent.Alarm||this.mode==="Confirm");},_getActivityStartDate:function(){if(this._activityData){var _33d=Sage.Utility.Convert.toDateFromString(this._activityData.StartDate);if((this._activityData.Timeless)&&(_2fa.isDateFiveSecondRuleTimeless(_33d))){return new Date(_33d.getUTCFullYear(),_33d.getUTCMonth(),_33d.getUTCDate(),0,0,5);}return _33d;}return new Date();},_onShowAvailabilityTab:function(){if(!this._availabilityShowing){this._resetAttendeesList();this._loadAttendeesData();}else{scheduler.setCurrentView(this._getActivityStartDate(),"timeline");}},_accountChanged:function(_33e){if(this._isBinding){return;}var _33f=(_33e)?_33e["$key"]:"";var _340=(_33e)?_33e["$descriptor"]:"";var act=this._activityData;var _341=this._isNullOrWhitespace(act.ContactId);act.AccountId=_33f;act.AccountName=_340;act.ContactId=null;act.ContactName="";act.PhoneNumber="";act.OpportunityId=null;act.OpportunityName="";act.TicketId=null;act.TicketNumber="";act.LeadId=null;act.LeadName="";this._isBinding=true;this.lup_Contact.set("selectedObject",null);this.lup_Opportunity.set("selectedObject",null);this.lup_Ticket.set("selectedObject",null);this.lup_Lead.set("selectedObject",null);this.tb_LeadCompanyName.set("value","");this._updateLookupSeedValues(_33f);this.lup_Lead.set("selectedObject",null);this.tb_LeadCompanyName.set("value","");if(_341){this._setContactToCurrentAccountPrimary();}this._isBinding=false;},_contactChanged:function(_342){if(!this._isBinding){var act=this._activityData;if(!_342){act.ContactId=null;act.ContactName="";act.PhoneNumber="";return;}act.ContactId=_342["$key"];act.ContactName=_342["$descriptor"];act.PhoneNumber=Sage.Utility.getValue(_342,"WorkPhone");act.LeadId=null;act.LeadName="";act.AccountId=_342.Account["$key"];act.AccountName=_342.Account.AccountName;this._updateLookupSeedValues(_342.Account["$key"]);this._isBinding=true;this.lup_Account.set("selectedObject",{"$key":_342.Account["$key"],"$descriptor":_342.Account.AccountName});this.lup_Lead.set("selectedObject",null);this.tb_LeadCompanyName.set("value","");this._isBinding=false;}if(_342&&_342["$key"]&&!_342["attendeeTab"]){if(this.attendeesTab._grid.mode!="insert"&&this._isBinding){if(!this.attendeesTab._gridStarted){this.attendeesTab.setInitialPrimaryContact(_342);}else{if(!this.attendeesTab._attendeeExists(_342["$key"])){this.attendeesTab._addContactAttendee(_342);}}}else{this.attendeesTab._addContactAttendee(_342);}}},_opportunityChanged:function(_343){if(this._isBinding){return;}var act=this._activityData;if(!_343){act.OpportunityId=null;act.OpportunityName="";return;}act.OpportunityId=_343["$key"];act.OpportunityName=_343["$descriptor"];if(this._isNullOrWhitespace(act.AccountId)||act.AccountId!==_343.Account["$key"]){act.AccountId=_343.Account["$key"];act.AccountName=_343.Account.AccountName;act.LeadId=null;act.LeadName="";this._updateLookupSeedValues(_343.Account["$key"]);this._isBinding=true;this.lup_Account.set("selectedObject",{"$key":_343.Account["$key"],"$descriptor":_343.Account.AccountName});this.lup_Contact.set("selectedObject",null);this.lup_Lead.set("selectedObject",null);this.tb_LeadCompanyName.set("value","");this._isBinding=false;this._setContactBasedOnOpportunity();}},_ticketChanged:function(_344){if(this._isBinding){return;}var act=this._activityData;if(!_344){act.TicketId=null;act.TicketNumber="";return;}act.TicketId=_344["$key"];act.TicketNumber=_344["$descriptor"];if(this._isNullOrWhitespace(act.AccountId)||act.AccountId!==_344.Account["$key"]){act.AccountId=_344.Account["$key"];act.AccountName=_344.Account["AccountName"];act.LeadId=null;act.LeadName="";this._updateLookupSeedValues();act.ContactId=Sage.Utility.getValue(_344,"Contact.$key");act.ContactName=Sage.Utility.getValue(_344,"Contact.NameLF");act.PhoneNumber=Sage.Utility.getValue(_344,"Contact.WorkPhone");this._isBinding=true;this.lup_Account.set("selectedObject",{"$key":_344.Account["$key"],"$descriptor":_344.Account["AccountName"]});this.lup_Contact.set("selectedObject",{"$key":_344.Contact["$key"],"$descriptor":_344.Contact["NameLF"]});this.lup_Lead.set("selectedObject",null);this.tb_LeadCompanyName.set("value","");this._isBinding=false;}},_leadChanged:function(_345){if(this._isBinding){return;}var act=this._activityData;if(!_345){act.LeadId=null;act.LeadName="";act.PhoneNumber="";this.tb_LeadCompanyName.set("value","");return;}act.ContactId=null;act.ContactName="";act.AccountId=null;act.TicketId=null;act.TicketNumber="";act.OpportunityId=null;act.OpportunityName="";this._updateLookupSeedValues();this._isBinding=true;this.lup_Contact.set("selectedObject",null);this.lup_Account.set("selectedObject",null);this.lup_Opportunity.set("selectedObject",null);this.lup_Ticket.set("selectedObject",null);this._isBinding=false;act.LeadId=_345["$key"];act.LeadName=_345["LeadFullName"];act.AccountName=_345["Company"];act.PhoneNumber=_345["WorkPhone"];this.tb_LeadCompanyName.set("value",_345["Company"]);if(this._isBinding){return;}if(_345&&_345["$key"]&&!_345["attendeeTab"]){this.attendeesTab._addLeadAttendee(_345);}},_leaderChanged:function(_346){if(this._isBinding){return;}var _347=this._activityData.Leader["$key"]||this._activityData["UserId"];if(_346){var key=_346["$key"].substr(0,12);this._activityData.Leader={"$key":key,"$descriptor":_346["$descriptor"]||_346["Name"]};this._activityData.LeaderChanged=true;}this._updateUsersListWithNewLeader(_347,this._activityData.Leader);},_setContactBasedOnOpportunity:function(){if(this._isNullOrWhitespace(this._activityData.OpportunityId)){this._rebindToCurrentContact();return;}var req=new Sage.SData.Client.SDataResourceCollectionRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));req.setResourceKind("opportunities");var _348=req.uri.pathSegments.length-1;var _349=req.uri.getPathSegment(_348);_349["predicate"]="\""+this._activityData.OpportunityId+"\"";req.uri.setPathSegment(_348+1,"Contacts");req.setQueryArg("select","IsPrimary,Contact/NameLF,Contact/IsPrimary,Contact/WorkPhone");req.setQueryArg("orderby","IsPrimary desc");req.read({success:function(data){var _34a=data["$resources"];if(_34a.length<1){this._setContactToCurrentAccountPrimary();return;}var _34b=false,_34c=false,_34d=_34a[0],_34e;for(var i=0;i<_34a.length;i++){if(_34a[i]){if(_34a.IsPrimary){if(!_34b||_34a[i].Contact.IsPrimary){_34b=_34a[i];}}if(!_34c&&_34a[i].Contact.IsPrimary){_34c=_34a[i];}}}_34e=_34b||_34c||_34d;if(_34e){this._activityData.ContactId=Sage.Utility.getValue(_34e,"Contact.$key");this._activityData.ContactName=Sage.Utility.getValue(_34e,"Contact.NameLF");this._activityData.PhoneNumber=Sage.Utility.getValue(_34e,"Contact.WorkPhone");this._rebindToCurrentContact();}},failure:function(){this._rebindToCurrentContact();},scope:this});},_setContactToCurrentAccountPrimary:function(){if(this._isNullOrWhitespace(this._activityData.AccountId)){this._rebindToCurrentContact();return;}var req=new Sage.SData.Client.SDataResourceCollectionRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));req.setResourceKind("accounts");var _34f=req.uri.pathSegments.length-1;var _350=req.uri.getPathSegment(_34f);_350["predicate"]="\""+this._activityData.AccountId+"\"";req.uri.setPathSegment(_34f+1,"Contacts");req.setQueryArg("select","NameLF,IsPrimary,WorkPhone");req.setQueryArg("orderby","IsPrimary desc");req.setQueryArg("count","1");req.read({success:function(data){var _351=data["$resources"];if(_351.length<1){this._rebindToCurrentContact();return;}var _352=_351[0];this._activityData.ContactId=Sage.Utility.getValue(_352,"$key");this._activityData.ContactName=Sage.Utility.getValue(_352,"NameLF");this._activityData.PhoneNumber=Sage.Utility.getValue(_352,"WorkPhone");this._isBinding=true;this.lup_Contact.set("selectedObject",_352);this._isBinding=false;},failure:function(){this._rebindToCurrentContact();},scope:this});},_rebindToCurrentContact:function(){this._isBinding=true;this.lup_Contact.set("selectedObject",{"$key":this._activityData.ContactId,"$descriptor":this._activityData.ContactName});this._isBinding=false;},_updateLookupSeedValues:function(_353){var _354=_353||this._activityData.AccountId;this.contactLookupConfig.seedValue=_354;this.opportunityLookupConfig.seedValue=_354;this.ticketLookupConfig.seedValue=_354;},_setUI:function(){this._formatHeader();this._setDisabledByTimlessValue();this._setHasAlarmUI();if(this._isNullOrWhitespace(this._activityData.LeadId)){this.rdo_Contact.set("checked",true);}else{this.rdo_Lead.set("checked",true);}this._setContactLeadVisibility();this._setScheduledByLabel();},_checkSecurityAccess:function(_355,_356,_357,_358){this.accessData=false;if(!this._accessStore){this._accessStore=new _2f4({include:["$descriptors"],resourceKind:"activityresourceviews",service:_301.getSDataService("dynamic")});}this._accessStore.fetch({predicate:"'"+_356+"-"+_355+"'",onComplete:function(_359){_357.call(_358,_359);},onError:function(){_357.call(_358,null);},scope:this});},_setUIForActivityType:function(_35a){this.pk_Regarding.set("pickListName",_2fa.getActivityPicklistName("Regarding",_35a));this.pk_Category.set("pickListName",_2fa.getActivityPicklistName("Category",_35a));this.pl_Result.set("pickListName",_2fa.getActivityPicklistName("Result",_35a));this.btn_Complete.set("disabled",!this._activityData.AllowComplete);if(this.mode!=="Confirm"){var _35b=this._activityData.AllowEdit;var _35c=this._activityData.AllowDelete;if(this.activityMemberId&&this.activityMemberId!==this._activityData.Leader.$key){_35b=false;_35c=false;}this._bulkSetProperty(this,this.noEditDisableList,"disabled",(!_35b));this.ta_Notes.set("readonly",!_35b);if((this.activityMemberId&&this._memberSecurityData[this.activityMemberId]&&this._memberSecurityData[this.activityMemberId].AllowEdit)||this.activityMemberId===this._currentUserId||this._activityData["UserId"]===this._currentUserId){this.btn_OK.set("disabled",false);}else{this.btn_OK.set("disabled",!this._activityData.AllowEdit);}this.btn_Delete.set("disabled",!_35c);}if(this.mode==="Complete"){this.btn_asScheduled.set("disabled",!this._activityData.AllowComplete);this.btn_Now.set("disabled",!this._activityData.AllowComplete);}this.pk_Category.set("disabled",(_35a==="atPersonal")||(this.mode==="Confirm")||this.pk_Category.get("disabled"));if((!this._canEdit())||(_35a==="atPersonal"||_35a==="atToDo")){_307.add(this.lup_Resources.domNode,"display-none");}else{_307.remove(this.lup_Resources.domNode,"display-none");}},_setDisabledByTimlessValue:function(){if(!this._activityData){return;}var _35d=this._activityData["Timeless"];this._handleAutoRolloverState();this.dtp_startDate.set("displayTime",!_35d);var _35e=this._activityData.AllowEdit;if(this.activityMemberId&&this.activityMemberId!==this._activityData.Leader.$key){_35e=false;}this.sel_Duration.set("disabled",_35d||(this.mode==="Confirm")||!_35e);this.sel_DurationComplete.set("disabled",_35d);this.dtp_scheduledDate.set("displayTime",!_35d);},_handleAutoRolloverState:function(){var _35f=(this._activityData["Timeless"]&&!this._activityData["Recurring"]);if(_35f){this.cb_AutoRollover.set("disabled",false);}else{this.cb_AutoRollover.set("disabled",true);this.cb_AutoRollover.set("checked",false);}},_bulkSetProperty:function(ui,_360,prop,val){for(var i=0;i<_360.length;i++){var ctrl=ui[_360[i]];if(ctrl){ctrl.set(prop,val);}}},_timelessChange:function(){this._setDisabledByTimlessValue();if(this.mode==="Complete"||this.mode==="CompleteUnscheduled"){if(this.cb_TimelessComplete.get("checked")){var _361=this.dtp_scheduledDate.get("value");_361.setHours(0);_361.setMinutes(0);_361.setSeconds(5);this.dtp_scheduledDate.set("value",_361);}}else{var _362;var _363;var d=this.dtp_startDate.get("value");_2f6.setValue(this._activityData,"TimelessChanged",true);if(this.cb_Timeless.get("checked")){d.setHours(0);d.setMinutes(0);d.setSeconds(5);this.dtp_startDate.set("value",d);_362=this._getAlarmLeadTime();_363=this._getAlarmTime(d,_362,true);this.sel_AlarmDur.set("startTime",d);this.sel_AlarmDur.set("timeValue",_363);}else{var _364=_2fa.roundDateToNextQuarterHour(new Date());var min=_364.getMinutes();var hour=_364.getHours();var _365=new Date(d.getFullYear(),d.getMonth(),d.getDate(),hour,min);this.dtp_startDate.set("value",_365);_362=this._getAlarmLeadTime();_363=this._getAlarmTime(_365,_362,false);this.sel_AlarmDur.set("startTime",_365);this.sel_AlarmDur.set("timeValue",_363);}}},_alarmCheckChanged:function(_366,_367,_368,_369){this._setHasAlarmUI(_369);},_descriptionChanged:function(){this._formatHeader();},_notesChanged:function(_36a,_36b,_36c,_36d){_2f6.setValue(this._activityData,"Notes",(_36d)?_36d.substr(0,255):_36d);},_startDateChanged:function(){var _36e=this.dtp_startDate.get("value");this.sel_Duration.set("startTime",_36e);this.sel_AlarmDur.set("startTime",_36e);var _36f=this._getAlarmLeadTime();var _370=this._getAlarmTime(_36e,_36f,this.cb_Timeless.get("checked"));this.sel_AlarmDur.set("timeValue",_370);var act=(this._currentUserActivityData)?this._currentUserActivityData:this._activityData;Sage.Utility.setValue(act,"AlarmTime",Sage.Utility.Convert.toIsoStringFromDate(this.sel_AlarmDur.get("timeValue")));if(this._availabilityShowing){scheduler.setCurrentView(_36e,"timeline");this._requestAvailability();}this._recurringEditor.set("startDate",_36e);},_getAlarmTime:function(_371,_372,_373){var _374=_2fb.add(_371,"minute",_372*-1);if(_373===true){_374=new Date(_371.getFullYear(),_371.getMonth(),_371.getDate());_374=_2fb.add(_374,"minute",_372*-1);}return _374;},_getAlarmLeadTime:function(){var _375="15";if(this._options[this.activityType]){var _376=this._options[this.activityType];_375=_376["alarmLead"];}if(_375.toLowerCase()==="none"){_375=15;}else{_375=parseInt(_375,10);}return _375;},_setHasAlarmUI:function(_377){if(typeof _377==="undefined"){_377=Sage.Utility.getValue(this._currentUserActivityData||this._activityData,"Alarm");}this.sel_AlarmDur.set("disabled",!_377||this.mode==="Confirm");},_setContactLeadVisibility:function(){var _378=this.rdo_Contact.get("checked");_307.remove((_378)?this.contactContainer.domNode:this.leadContainer.domNode,"display-none");_307.add((_378)?this.leadContainer.domNode:this.contactContainer.domNode,"display-none");},_formatHeader:function(){var _379="";var _37a=_2fa.getActivityTypeName(this._activityData["Type"]||"atAppointment");switch(this.mode){case "New":_379=this.scheduleText;break;case "Complete":case "CompleteUnscheduled":_379=this.completeText;break;}if(this.mode==="Confirm"){if(!this._notificationData){return;}this._getUserInfoFor(this._notificationData.FromUser["$key"],function(user){if(this._notificationData){var _37b=this._notificationData.Type;switch(_37b){case "Change":_379=this.updatedText;break;case "Confirm":_379=this.acceptedText;break;case "Deleted":_379=this.deletedText;break;case "Leader":_379=this.scheduledText;break;case "Decline":_379=this.declinedText;break;}var _37c=(_37b==="New")?this.newConfirmationHeaderFormatText:this.otherConfimationHeaderFormatText;this._setHeader(_2fd.substitute(_37c,{activityType:_37a,actionText:_379,user:user["UserName"]||user["$descriptor"]}));}});}else{this._setHeader(_2fd.substitute(this.dialogHeaderFormatText,{actionText:_379,activityType:_37a,description:this._activityData["Description"]||""}));}},_setHeader:function(_37d){var html=_2fd.substitute("<div class=\"Global_Images icon16x16 ${0}\" > </div>&nbsp;<span class=\"activity-dialog-title\" style=\"max-width: 975px; text-overflow: ellipsis;\">${1}</span>",[_2fa.getActivityImageClass(this._activityData["Type"]||"atAppointment","small"),_37d]);this._dialog.titleNode.innerHTML=html;},_setScheduledByLabel:function(){var _37e=_2f6.Convert.toDateFromString(_2f6.getValue(this._activityData,"CreateDate"));if(!_37e||_37e.getFullYear()<1000){_37e=new Date();}var _37f=this._getActivityStartDate();var _380=_2f6.getValue(this._activityData,"CreateUser").trim();var _381=(this.mode==="Complete"||this.mode==="CompleteUnscheduled")?this.completeScheduledByFormatText:this.scheduledByFormatText;var lbl;if(!_380||this._currentUserId===_380){_380=_2f6.getClientContextByKey("userPrettyName");}else{if(_380==="PROCESS"||_380==="ADMIN"){_380="Administrator";}else{this._getUserInfoFor(_380,function(user){lbl=_2fd.substitute(_381,{user:user["$descriptor"],date:_2fc.format(_37e,{selector:"date",fullYear:true}),startDate:_2fc.format(_37f,{selector:"date",fullYear:true})});dojo.html.set(this.lbl_ScheduledBy,lbl);dojo.html.set(this.lbl_ScheduledByComp,lbl);});return;}}lbl=_2fd.substitute(_381,{user:_380,date:_2fc.format(_37e,{selector:"date",fullYear:true}),startDate:_2fc.format(_37f,{selector:"date",fullYear:true})});dojo.html.set(this.lbl_ScheduledBy,lbl);dojo.html.set(this.lbl_ScheduledByComp,lbl);},_getUserInfoFor:function(_382,_383){if(_382){var _384=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic",false,true,true));_384.setResourceKind("userInfo");_384.setResourceSelector("'"+_382+"'");_384.setQueryArg("precedence","0");_384.read({success:_383,scope:this,failure:function(){}});}},_showRecurringTab:function(){this._recurringEditor.onTabShow();this._recurringEditor._setReadOnly(!this._canEdit());},_ensureAttachmentList:function(){on(this.cp_Attachments,"show",dojo.hitch(this,function(){if(!this._attachmentList){this._attachmentList=new _300({workspace:"",tabId:"",placeHolder:this.id+"_attachmentsGridPlaceholder",parentRelationshipName:"activityId"});this._attachmentList.startup(dojo.hitch(this,function(){this.cp_Attachments.resize();}));}this._attachmentList.setToReadOnly(!this._canEdit());window.setTimeout(this._attachmentList.resetEntityContext(),100);}));},_completeClick:function(){this._completeAfterSaving=true;this._saveAndClose();},_deleteClick:function(){if(this._activityData&&this._activityStore){_2fe.raiseQueryDialogExt({title:"",query:this.areYouSureText,callbackFn:function(_385){if(_385){this._activityStore.deleteEntity(this._activityData,this._successfulActivityDelete,this._failedActivityDelete,this);}},yesText:this.okText,noText:this.cancelText,icon:"questionIcon",scope:this});}},_asScheduledClick:function(){this._updateAttendeesAndComplete(_2fb.add(this.dtp_scheduledDate.get("value"),"minute",this._activityData.Duration));},_nowClick:function(){this._updateAttendeesAndComplete(this.dtp_completedDate.get("value"));},_updateAttendeesAndComplete:function(_386){if(this.mode==="Complete"){var self=this;var _387=this.attendeesTab._activitySaved();_387.then(function(_388){self._completeActivity(_386);});}else{this._completeActivity(_386);}},_completeActivity:function(_389){if(this._isProcessing){return;}this._isProcessing=true;if(this.mode==="Complete"){var _38a={"$name":"Complete","request":{"entity":this._activityData,"userId":this._currentUserId,"result":this.pl_Result.get("value"),"resultCode":this.pl_Result.get("code"),"completeDate":_2f6.Convert.toIsoStringFromDate(_389)}};var _38b=new Sage.SData.Client.SDataServiceOperationRequest(_301.getSDataService("system")).setResourceKind("activities").setOperationName("Complete");_38b.execute(_38a,{success:this._successfulComplete,failure:this._failedComplete,scope:this});}else{if(this.mode==="CompleteUnscheduled"){var _38c=new _2f4({include:["$descriptors"],resourceKind:"history",service:_301.getSDataService("dynamic")});_2f6.setValue(this._activityData,"CompletedDate",_2f6.Convert.toIsoStringFromDate(_389));_2f6.setValue(this._activityData,"Result",this.pl_Result.get("value"));_2f6.setValue(this._activityData,"ResultCode",this.pl_Result.get("code"));_2f6.setValue(this._activityData,"UserId",this._activityData.Leader.$key);_2f6.setValue(this._activityData,"UserName",this._activityData.Leader.$descriptor);_38c.saveNewEntity(this._activityData,this._successfulComplete,this._failedComplete,this);}}},_okClick:function(){var _38d=_309.curNode;if(_38d){_38d.blur();}setTimeout(lang.hitch(this,function(){this._saveAndClose();}),1);},_saveAndClose:function(){if(this._isProcessing){return;}this._isProcessing=true;var _38e=this.sel_AlarmDur.get("timeValue");if(_38e.getSeconds()===5){_38e=new Date(_38e.getFullYear(),_38e.getMonth(),_38e.getDate(),_38e.getHours(),_38e.getMinutes(),0);}if(this.mode==="New"){if(this._attachmentList){var _38f=this._attachmentList.getNewAttachments();if(_38f.length>0){this._activityData.Attachment=true;}}this._currentUserActivitySaved=true;_2f6.setValue(this._activityData,"Alarm",this.cb_Alarm.get("checked"));_2f6.setValue(this._activityData,"AlarmTime",_2f6.Convert.toIsoStringFromDate(_38e));this._activityStore.saveNewEntity(this._activityData,this._successfulActivitySave,this._failedActivitySave,this);}else{this._activityData.Attachment=this._activityData.AttachmentCount>0?true:false;if(this._currentUserActivityData){if(_2f6.getValue(this._activityData,"RecurrenceState")==="rstOccurrence"){_2f6.setValue(this._activityData,"Alarm",this.cb_Alarm.get("checked"));_2f6.setValue(this._activityData,"AlarmTime",_2f6.Convert.toIsoStringFromDate(_38e));this._currentUserActivitySaved=true;if(this._activityData.AllowEdit){this._saveActivity();}}else{if((this._tempUAData)&&(this._tempUAData.Alarm===this._currentUserActivityData.Alarm&&this._tempUAData.AlarmTime.getTime()===_38e.getTime())){this._currentUserActivitySaved=true;if(this._activityData.AllowEdit){this._saveActivity();}}else{delete (this._currentUserActivityData.Activity);this._currentUserActivityData.AlarmTime=_2f6.Convert.toIsoStringFromDate(_38e);this._saveUserActivity();}}}else{_2f6.setValue(this._activityData,"AlarmTime",_2f6.Convert.toIsoStringFromDate(_38e));this._currentUserActivitySaved=true;if(this._activityData.AllowEdit){this._saveActivity();}}this._ensureActivitySave();}},_saveUserActivity:function(){if(this._currentUserActivityStore){this._currentUserActivityStore.save({scope:this,success:this._successfulCurrentUserActivitySave,failure:this._failedUserActivitySave});}},_saveActivity:function(){if(this._activityStore){this._activityStore.save({scope:this,success:this._successfulActivitySave,failure:this._failedActivitySave});}},_ensureActivitySave:function(){if(!this._activityData.AllowEdit){this._activitySaved=true;this._userActivitiesSaved=true;this._resourcesSaved=true;this._resourcesRemoved=true;this._attachmentsSaved=true;this._hideIfComplete();}},_successfulActivitySave:function(_390){var _391=this.attendeesTab._activitySaved(_390);_391.then(dojo.hitch(this,function(_392){this._successfulActivityAttendeeSave(_390);}));},_successfulActivityAttendeeSave:function(_393){if(this._activityData.LeaderChanged){_393.LeaderChanged=true;}if(this._activityData.TimelessChanged){_393.TimelessChanged=true;}this._activityData=_393;var _394=false;var svc=Sage.Services.getService("ClientEntityContext");svc.clearTemporaryContext();if(this.activityId===""){dojo.publish("/entity/activity/create",[this._activityData,this]);_394=true;}this.activityId=_393["$key"];var _395=false,_396=false;var ldr=_393.Leader["$key"];for(var i=0;i<this._newAttendeesData.length;i++){_395=(_395||(this._newAttendeesData[i]["Type"]==="User"&&this._newAttendeesData[i]["$key"]!==ldr));_396=(_396||this._newAttendeesData[i]["Type"]==="Resource");}if(_395){var _397=new Sage.SData.Client.SDataTemplateResourceRequest(_301.getSDataService("system"));_397.setResourceKind("userActivities");_397.read({success:this._onGetUserActivityTemplate,failure:this._failedUserActivitySave,scope:this});}else{this._userActivitiesSaved=true;}if(_396){var _398=new Sage.SData.Client.SDataTemplateResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));_398.setResourceKind("resourceSchedules");_398.read({success:this._onGetResourceScheduleTemplate,failure:this._failedUserActivitySave,scope:this});}else{this._resourcesSaved=true;}this._attachmentsSaved=true;if(this._attachmentList){var _399=this._attachmentList.getNewAttachments();if(_399.length>0&&this.mode==="New"){this._saveAttachments(_399);this._attachmentsSaved=false;}}if(this._attendeesForRemoval.length>0){this._removeResources();}else{this._resourcesRemoved=true;}if(!this._completeAfterSaving&&!_394){dojo.publish("/entity/activity/change",[_393,this]);}this._activitySaved=true;this._ensureActivitySave();this._hideIfComplete();},_saveAttachments:function(_39a,_39b){this._attachmentRequests=_39a.length;for(var i=0;i<_39a.length;i++){var att=_39a[i];var req=new Sage.SData.Client.SDataSingleResourceRequest(_301.getSDataService("system"));req.setResourceKind("attachments");req.setResourceSelector("'"+att.$key+"'");if(_39b){att.historyId=_39b;}else{att.activityId=this.activityId;}for(var p in this._activityData){if(p.substring(p.length-2)==="Id"&&p!=="UserId"){var _39c=p.substring(0,1).toLowerCase()+p.substring(1);att[_39c]=this._activityData[p];}}req.update(att,{ignoreETag:true,success:this._successfulAttachmentSave,failure:this._failedAttachmentSave,scope:this});}},_removeAttachments:function(){if(!this._attachmentList){return;}var _39d=this._attachmentList.getNewAttachments();for(var i=0;i<_39d.length;i++){var att=_39d[i];var req=new Sage.SData.Client.SDataSingleResourceRequest(_301.getSDataService("system"));req.setResourceKind("attachments");req.setResourceSelector("'"+att.$key+"'");req["delete"](att,{success:function(){},failure:function(){},scope:this});}},getRelationshipsForAttachments:function(){var obj={};for(var p in this._activityData){if(p.substring(p.length-2)==="Id"&&p!=="UserId"){var _39e=p.substring(0,1).toLowerCase()+p.substring(1);obj[_39e]=this._activityData[p];}}if(this.mode==="New"&&!_302.supportsHTML5File&&!slx.desktop){this._tempIdForAttachments=this._makeTempID();obj["activityId"]=this._tempIdForAttachments;}return obj;},doCarryOverAttachments:function(_39f){_303.getAttachmentTemplate(function(_3a0){this._getHistoryAttachments(_39f,_3a0);},this);},_getHistoryAttachments:function(_3a1,_3a2){var _3a3=new Sage.SData.Client.SDataResourceCollectionRequest(_301.getSDataService("system"));_3a3.setResourceKind("attachments");_3a3.setQueryArg("where","historyId eq '"+_3a1+"'");_3a3.read({success:function(data){var _3a4=data["$resources"];var _3a5={activityId:this._makeTempID(),historyId:null};var req=new Sage.SData.Client.SDataSingleResourceRequest(_301.getSDataService("system"));req.setResourceKind("attachments");if(_3a4&&_3a4.length){var l=_3a4.length;for(var i=0;i<l;i++){var _3a6=_2f8.mixin(_3a4[i],_3a5);var _3a7=_2f8.mixin(_3a2,_3a6);delete _3a7.createDate;delete _3a7.modifyDate;delete _3a7.createUser;delete _3a7.modifyUser;delete _3a7.$key;delete _3a7.$etag;_3a7.fileName=_3a7.physicalFileName;_3a7.attachDate=_2f6.Convert.toIsoStringFromDate(new Date());req.create(_3a7,{success:function(_3a8){dojo.publish("/entity/attachment/create",[_3a8]);},failure:function(){},scope:this});}}},failure:function(){},scope:this});},_getHistoryAttendees:function(_3a9){var _3aa=new Sage.SData.Client.SDataResourceCollectionRequest(_301.getSDataService("dynamic"));_3aa.setResourceKind("historyAttendees");_3aa.setQueryArg("where","HistoryId eq '"+_3a9+"'");_3aa.read({success:function(data){var _3ab=data["$resources"];var _3ac=[];for(var i=0;i<_3ab.length;i++){if(_3ab[i].EntityType!="User"){var _3ad={$key:_3ab[i].EntityId,$descriptor:_3ab[i].Name,general:false};var _3ae=_2f8.mixin(_3ab[i],_3ad);_3ac.push(_3ae);}}this.attendeesTab._addAttendeesToStore(_3ac);},failure:function(){},scope:this});},_makeTempID:function(){if(!this._tempIdForAttachments){var uid=this._currentUserId;var dstr=_2f6.Convert.toIsoStringFromDate(this.dtp_startDate.get("value"));dstr=dstr.replace(/[T:-]/g,"").substr(6,6);this._tempIdForAttachments="NE"+uid.substr(uid.length-4,4)+dstr;}return this._tempIdForAttachments;},_attachmentRequests:0,_successfulAttachmentSave:function(_3af){this._attachmentRequests--;if(this._attachmentRequests<1){this._attachmentsSaved=true;this._hideIfComplete();}},_failedAttachmentSave:function(){this._attachmentRequests--;if(this._attachmentRequests<1){this._attachmentsSaved=true;this._hideIfComplete();}},_successfulCurrentUserActivitySave:function(_3b0){this._currentUserActivitySaved=true;dojo.publish("/entity/userActivity/change",[_3b0,this]);if(this._activityData.AllowEdit){this._saveActivity();}this._hideIfComplete();},_successfulActivityDelete:function(){var svc=Sage.Services.getService("ClientEntityContext");svc.clearTemporaryContext();dojo.publish("/entity/activity/delete",[this._activityData["$key"],this]);if(this._activityData["Timeless"]){dojo.publish("/entity/activity/timeless/delete",[this._activityData["$key"],this]);}this.hide();},_successfulComplete:function(_3b1){if(this.mode==="CompleteUnscheduled"){var self=this;var _3b2=arguments;var _3b3=this.attendeesTab._historySaved(_3b1);_3b3.then(function(_3b4){self._successfulAttendeesComplete(_3b1);});}else{this._successfulAttendeesComplete(_3b1);}},_successfulAttendeesComplete:function(_3b5){var svc=Sage.Services.getService("ClientEntityContext");svc.clearTemporaryContext();var hist=_3b5;if(this.mode==="Complete"){if(_3b5.Response){hist=_3b5.Response;}dojo.publish("/entity/activity/delete",[this._activityData["$key"],this]);if(this._activityData["Timeless"]){dojo.publish("/entity/activity/timeless/delete",[this._activityData["$key"],this]);}}dojo.publish("/entity/history/create",[hist,this]);var _3b6=null;if(this.mode==="Complete"){if(_3b5.Response){_3b6=_3b5.Response.HistoryId;}}else{_3b6=hist.$key;}if(this._attachmentList){var _3b7=this._attachmentList.getNewAttachments();if(_3b7.length>0){this._activityData.Attachment=true;this._saveAttachments(_3b7,_3b6);}}var _3b8=this.sel_Followup.get("value");switch(_3b8){case this.noneText:this.hide();return;case _2fa.getActivityTypeName("atPhoneCall"):_3b8="atPhoneCall";break;case _2fa.getActivityTypeName("atAppointment"):_3b8="atAppointment";break;case _2fa.getActivityTypeName("atToDo"):_3b8="atToDo";break;}if(typeof _3b6==="undefined"||_3b6===null){this.hide();_2fe.showError(this.scheduleFollowUpErrorText);return;}var _3b9=this._getFollowUpActivityData(_3b6);this.hide();window.setTimeout(function(){var _3ba=Sage.Services.getService("ActivityService");if(_3ba){_3ba.scheduleActivity({"type":_3b8,"preConfigured":_3b9});}},250);},_getFollowUpActivityData:function(_3bb){var a=this._activityData;var ret={AccountId:a.AccountId,AccountName:a.AccountName,ContactId:a.ContactId,ContactName:a.ContactName,Description:a.Description,LeadId:a.LeadId,LeadName:a.LeadName,OpportunityId:a.OpportunityId,OpportunityName:a.OpportunityName,TicketId:a.TicketId,TicketNumber:a.TicketNumber};if(this.ck_coNotes.get("checked")){ret["LongNotes"]=a.LongNotes;ret["Notes"]=a.Notes;}if(this.ck_coAttachments.get("checked")){ret["carryOverAttachmentsFrom"]=_3bb;}ret["carryOverParticipantsFrom"]=_3bb;return ret;},_failedActivitySave:function(_3bc){var msg=_2fa.findFailedRequestMessage(_3bc,this.couldNotSaveErrorText);_2fe.showError(msg);this._completeAfterSaving=false;},_failedActivityDelete:function(_3bd){var msg=_2fa.findFailedRequestMessage(_3bd,this.couldNotDeleteErrorText);_2fe.showError(msg);this._completeAfterSaving=false;},_failedUserActivitySave:function(_3be){var msg=_2fa.findFailedRequestMessage(_3be,this.couldNotSaveErrorText);_2fe.showError(msg);},_failedResourceSave:function(_3bf){var msg=_2fa.findFailedRequestMessage(_3bf,this.couldNotSaveErrorText);_2fe.showError(msg);},_failedComplete:function(_3c0){var msg=_2fa.findFailedRequestMessage(_3c0,this.couldNotCompleteErrorText);_2fe.showError(msg);},_onGetUserActivityTemplate:function(_3c1){this._userActivitiesRequestCount=0;var ldr=this.lup_Leader.get("selectedObject");ldr=ldr["$key"].substr(0,12);var act=this._activityData;var _3c2=_2f6.Convert.toDateFromString(act.AlarmTime);for(var i=0;i<this._newAttendeesData.length;i++){var nat=this._newAttendeesData[i];if(nat["Type"]==="User"&&nat["$key"]!==ldr){var _3c3=dojo.mixin({},_3c1);var _3c4={User:{"$key":nat["$key"]},ActivityId:this.activityId,Activity:{"$key":this.activityId},Alarm:act.Alarm,AlarmTime:_2f6.Convert.toIsoStringFromDate(_3c2),Status:"asUnconfirmed"};_3c3=_2f8.mixin(_3c3,_3c4);var req=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("system"));req.setResourceKind("userActivities");this._userActivitiesRequestCount++;req.create(_3c3,{success:function(_3c5){this._userActivitiesRequestCount--;dojo.publish("/entity/userActivity/create",[_3c5,this]);if(this._userActivitiesRequestCount<1){this._userActivitiesSaved=true;this._hideIfComplete();}},failure:this._failedUserActivitySave,scope:this});}}if(this._userActivitiesRequestCount<1){this._userActivitiesSaved=true;if(act.Timeless){dojo.publish("/entity/userActivities/timeless/saved",[act,this]);}this._hideIfComplete();}},_onGetResourceScheduleTemplate:function(_3c6){this._resourceRequestCount=0;for(var i=0;i<this._newAttendeesData.length;i++){var nat=this._newAttendeesData[i];if(nat["Type"]==="Resource"){var _3c7=_2f8.mixin({},_3c6);var act=this._activityData;var sd=Sage.Utility.Convert.toDateFromString(act["StartDate"]);var ed=_2fb.add(sd,"minute",act["Duration"]);var _3c8={ResourceId:nat["$key"],ActivityId:this.activityId,Description:nat["Name"],StartDate:act["StartDate"],EndDate:Sage.Utility.Convert.toIsoStringFromDate(ed),UserId:act.Leader["$key"]};_3c7=_2f8.mixin(_3c7,_3c8);var req=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));req.setResourceKind("resourceSchedules");this._resourceRequestCount++;req.create(_3c7,{success:function(_3c9){this._resourceRequestCount--;if(this._resourceRequestCount<1){this._resourcesSaved=true;this._hideIfComplete();}},failure:this._failedResourceSave,scope:this});}}},_removeResources:function(){this._resourceDeleteRequestCount=0;for(var i=0;i<this._attendeesForRemoval.length;i++){var rem=this._attendeesForRemoval[i];var _3ca;var _3cb;var _3cc;if(rem["type"]==="user"){_3ca=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("system"));_3ca.setResourceKind("userActivities");_3cb=_2fd.substitute("'ActivityId=${0};UserId=${1}'",[this.activityId,rem["id"]]);_3cc="/entity/userActivity/delete";}else{_3ca=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));_3ca.setResourceKind("resourceSchedules");_3cb="'"+rem["rsid"]+"'";_3cc="/entity/resourceSchedule/delete";}_3ca.setResourceSelector(_3cb);this._resourceDeleteRequestCount++;var _3cd={notify:function(){dojo.publish(this.evt,[this.predicate]);this.editor._resourceDeleteRequestCount--;if(this.editor._resourceDeleteRequestCount<1){this.editor._resourcesRemoved=true;this.editor._hideIfComplete();}},evt:_3cc,predicate:_3cb,editor:this};var _3ce={success:_3cd.notify,aborted:function(){},failure:this._failedResourceSave,scope:_3cd};_3ca["delete"]({"$key":_3cb},_3ce);}},_cancelClick:function(){if(this.mode==="New"){this._removeAttachments();}this.hide();},_hideIfComplete:function(){if(this._activitySaved&&this._userActivitiesSaved&&this._currentUserActivitySaved&&this._resourcesSaved&&this._resourcesRemoved&&this._attachmentsSaved){var _3cf=this.activityId;if(this._completeAfterSaving){this._completeAfterSaving=false;var svc=Sage.Services.getService("ActivityService");if(svc){svc.completeActivity(_3cf);}}else{this.hide();}}},_acceptConfClick:function(){var _3d0=Sage.Services.getService("ActivityService");_3d0.acceptConfirmation({notification:this._notificationData,success:this._successfulAcceptConfirmation,failure:this._failedAcceptDecline,scope:this});},_declineClick:function(){var _3d1=Sage.Services.getService("ActivityService");_3d1.declineConfirmation({notification:this._notificationData,success:this._successfulDeclineConfirmation,failure:this._failedAcceptDecline,scope:this});},_deleteConfClick:function(){if(this._notificationData&&this._notificationStore){this._notificationStore.deleteEntity(this._notificationData,this._successfulNotificationDelete,this._failedActivityDelete,this);}},_getActivityDataFromNotificationData:function(){var _3d2=null;var _3d3=null;if(this._notificationData){if(this._notificationData.Activity){_3d2=this._notificationData.Activity.$key;}if(this._notificationData.ToUser){_3d3=this._notificationData.ToUser.$key;}}var _3d4={"activityId":_3d2,"userId":_3d3};return _3d4;},_successfulAcceptConfirmation:function(){dojo.publish("/entity/activity/confirm",[this._getActivityDataFromNotificationData(),null]);this._successfulNotificationDelete();},_successfulDeclineConfirmation:function(){dojo.publish("/entity/activity/decline",[this._getActivityDataFromNotificationData(),null]);this._successfulNotificationDelete();},_successfulNotificationDelete:function(){dojo.publish("/entity/userNotification/delete",[this._notificationData["$key"],this]);this.hide();},_ensureLookupsCreated:function(){if(!this.lup_Account){this.createAccountLookup();this.createContactLookup();this.createOpportunityLookup();this.createTicketLookup();this.createLeadLookup();this.createLeaderlookup();this.createResourcesLookup();}var self=this;if(dojo.byId("lu_lead_btnClearResult")){dojo.connect(dojo.byId("lu_lead_btnClearResult"),"onclick",null,function(){self.attendeesTab.unCheckPrimary();},true);}if(dojo.byId("lu_contact_btnClearResult")){dojo.connect(dojo.byId("lu_contact_btnClearResult"),"onclick",null,function(){self.attendeesTab.unCheckPrimary();},true);}},createAccountLookup:function(){this.accountLookupConfig={id:"_activityAcc",structure:[{"cells":[{"name":this.accountText,"field":"AccountName"},{"name":this.cityText,"field":"Address.City"},{"name":this.stateText,"field":"Address.State"},{"name":this.mainPhoneText,"field":"MainPhone"},{"name":this.typeText,"field":"Type"},{"name":this.subTypeText,"field":"SubType"},{"name":this.statusText,"field":"Status"},{"name":this.acctMgrText,"field":"AccountManager.UserInfo.UserName"},{"name":this.ownerText,"field":"Owner.OwnerDescription"}],"defaultCell":{"sortable":true,"width":"150px","editable":false,"propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"pickListName":null,"defaultValue":""}}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"accounts",sort:[{attribute:"AccountName"}]},isModal:true,seedProperty:"",seedValue:"",overrideSeedValueOnSearch:false,initializeLookup:false,preFilters:[],returnPrimaryKey:true,dialogTitle:this.lookupActText,dialogButtonText:this.okText},this.lup_Account=new _304({id:"lu_account",allowClearingResult:true,showEntityInfoToolTip:true,readonly:true,config:this.accountLookupConfig});this.eventConnections.push(dojo.connect(this.lup_Account,"onChange",this,"_accountChanged"));dojo.place(this.lup_Account.domNode,this.container_AccountLup.domNode,"only");},createContactLookup:function(){this.contactLookupConfig={id:"_activityContact",structure:[{defaultCell:{"sortable":true,"width":"150px","editable":false,"propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"pickListName":null,"defaultValue":""},cells:[{name:this.nameText,field:"NameLF"},{name:this.accountText,field:"Account.AccountName"},{name:this.cityText,field:"Address.City"},{name:this.stateText,field:"Address.State"},{name:this.workphoneText,field:"WorkPhone"},{name:this.emailText,field:"Email"}]}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"contacts",select:["Address/Timezone"],sort:[{attribute:"NameLF"}]},isModal:true,seedProperty:"Account.Id",seedValue:"",overrideSeedValueOnSearch:true,initialLookup:true,preFilters:[],returnPrimaryKey:true,dialogTitle:this.lookupContactText,dialogButtonText:this.okText};this.lup_Contact=new _304({id:"lu_contact",allowClearingResult:true,config:this.contactLookupConfig,readonly:true,showEntityInfoToolTip:true});this.eventConnections.push(dojo.connect(this.lup_Contact,"onChange",this,"_contactChanged"));dojo.place(this.lup_Contact.domNode,this.container_ContactLup.domNode,"only");},createOpportunityLookup:function(){this.opportunityLookupConfig={id:"_activityOpp",structure:[{defaultCell:{"sortable":true,"width":"150px","editable":false,"propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"pickListName":null,"defaultValue":""},cells:[{name:this.descriptionText,field:"Description"},{name:this.acctMgrText,field:"AccountManager.UserInfo.UserName"},{name:this.accountText,field:"Account.AccountName"},{name:this.stageText,field:"Stage"},{name:this.statusText,field:"Status"},{name:this.ownerText,field:"Owner.OwnerDescription"}]}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"opportunities",sort:[{attribute:"Description"}]},isModal:true,seedProperty:"Account.Id",seedValue:"",overrideSeedValueOnSearch:true,initialLookup:true,preFilters:[],returnPrimaryKey:true,dialogTitle:this.lookupOpportunityText,dialogButtonText:this.okText};this.lup_Opportunity=new _304({id:"lu_opportunity",allowClearingResult:true,config:this.opportunityLookupConfig,readonly:true,showEntityInfoToolTip:true});this.eventConnections.push(dojo.connect(this.lup_Opportunity,"onChange",this,"_opportunityChanged"));dojo.place(this.lup_Opportunity.domNode,this.container_OppLup.domNode,"only");},createTicketLookup:function(){this.ticketLookupConfig={id:"_activityTicket",structure:[{defaultCell:{"sortable":true,"width":"150px","editable":false,"propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"pickListName":null,"defaultValue":""},cells:[{name:this.ticketNumberText,field:"TicketNumber"},{name:this.accountText,field:"Account.AccountName"},{name:this.nameText,field:"Contact.NameLF"},{name:this.phoneText,field:"Contact.WorkPhone"},{name:this.statusText,field:"StatusCode",pickListName:"Ticket Status",propertyType:"SalesLogix.PickList",type:Sage.UI.Columns.PickList},{name:this.urgencyText,field:"Urgency.Description"},{name:this.areaText,field:"Area"}]}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"tickets",sort:[{attribute:"TicketNumber"}]},isModal:true,seedProperty:"Account.Id",seedValue:"",overrideSeedValueOnSearch:true,initialLookup:true,preFilters:[],returnPrimaryKey:true,dialogTitle:this.lookupTicketText,dialogButtonText:this.okText};this.lup_Ticket=new _304({id:"lu_ticket",allowClearingResult:true,config:this.ticketLookupConfig,readonly:true,showEntityInfoToolTip:true});this.eventConnections.push(dojo.connect(this.lup_Ticket,"onChange",this,"_ticketChanged"));dojo.place(this.lup_Ticket.domNode,this.container_TicketLup.domNode,"only");},createLeadLookup:function(){this.leadLookupConfig={id:"_activityLead",structure:[{defaultCell:{"sortable":true,"width":"150px","editable":false,"propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"pickListName":null,"defaultValue":""},cells:[{name:this.leadFullNameText,field:"LeadFullName"},{name:this.companyText,field:"Company"},{name:this.cityText,field:"Address.City"},{name:this.stateText,field:"Address.State"},{name:this.postalText,field:"Address.PostalCode"},{name:this.statusText,field:"Status"},{name:this.workphoneText,field:"WorkPhone"},{name:this.ownerText,field:"Owner.OwnerDescription"}]}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"leads",select:["Address/Timezone"],sort:[{attribute:"LeadFullName"}]},isModal:true,initialLookup:false,preFilters:[],returnPrimaryKey:true,dialogTitle:this.lookupLeadText,dialogButtonText:this.okText};this.lup_Lead=new _304({id:"lu_lead",allowClearingResult:true,config:this.leadLookupConfig,readonly:true,showEntityInfoToolTip:true});this.eventConnections.push(dojo.connect(this.lup_Lead,"onChange",this,"_leadChanged"));dojo.place(this.lup_Lead.domNode,this.container_LeadLup.domNode,"only");},createLeaderlookup:function(){var _3d5={id:"_activityLeader",structure:[{cells:[{name:this.nameText,field:"Name",sortable:true,width:"400px",editable:false,propertyType:"System.String",excludeFromFilters:false,defaultValue:""}]}],gridOptions:{contextualCondition:function(){return "AllowAdd AND (AccessId eq '"+_2f6.getClientContextByKey("userID")+"' OR AccessId eq 'EVERYONE') AND Type eq 'User'";},contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"activityresourceviews",sort:[{attribute:"Name"}]},isModal:true,preFilters:[],returnPrimaryKey:true,dialogTitle:this.lookupLeaderText,dialogButtonText:this.okText};this.lup_Leader=new _304({id:"lu_leader",readonly:true,config:_3d5});this.eventConnections.push(dojo.connect(this.lup_Leader,"onChange",this,"_leaderChanged"));dojo.place(this.lup_Leader.domNode,this.container_LeaderLup.domNode,"only");},createResourcesLookup:function(){this.resourcesLookupConfig={id:"_activityResources",btnToolTip:this.lookupResourcesText,structure:[{defaultCell:{"sortable":true,"width":"150px","editable":false,"propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"pickListName":null,"defaultValue":""},cells:[{name:this.nameText,field:"Name"},{name:this.typeText,field:"Type",width:"100px"},{name:this.locationText,field:"IsLocation",propertyType:"System.Boolean",format:function(_3d6,_3d7){var type=_2f6.getValue(_3d7,"Type");if(!type){return this.defaultValue;}if(type==="User"){return "";}return (_3d7["IsLocation"]===null||_3d7["IsLocation"]==="false")?this.noText:this.yesText;}},{name:this.descriptionText,field:"Subtype",width:"200px"}]}],gridOptions:{},displayMode:5,storeOptions:{resourceKind:"activityresourceviews",select:["AccessId","ResourceId","AllowAdd","AllowEdit","AllowDelete"],sort:[{attribute:"Type"},{attribute:"Name"}]},isModal:true,initialLookup:false,preFilters:[],query:{conditions:"AllowAdd AND (AccessId eq '"+this._currentUserId+"' OR AccessId eq 'EVERYONE')"},dialogTitle:this.lookupResourcesText,dialogButtonText:this.addResourceText,doSelected:function(_3d8){var _3d9=dijit.byId("activityEditor");if(_3d9){_3d9.addMembers(_3d8);}this.lookupDialog.hide();}};this.lup_Resources=new Sage.UI.SDataLookup(this.resourcesLookupConfig);this.lup_Resources.cancelText=this.lup_Resources.closeText;dojo.place(this.lup_Resources.domNode,this.container_ResourcesLup.domNode,"only");},_schedulerInitialized:false,_resetAttendeesList:function(){if(!this._schedulerInitialized){scheduler.showLightbox=function(){return false;};scheduler.config.timelineStep=30;scheduler.config.timelineStart=(this._options.calendar.dayStartTime*2);scheduler.config.timelineSize=((this._options.calendar.dayEndTime-this._options.calendar.dayStartTime)*2);scheduler.createTimelineView({name:"timeline",x_unit:"minute",x_date:"%g:%i",x_step:scheduler.config.timelineStep,x_start:scheduler.config.timelineStart,x_size:scheduler.config.timelineSize,y_unit:[],y_property:"section_id",render:"bar",section_autoheight:false,dy:30});scheduler.init("scheduler_here",new Date(),"timeline");scheduler.attachEvent("onBeforeDrag",function(){return false;});scheduler.config.dblclick_create=false;scheduler.templates.day_date=function(dt){return _2fa.formatLongDate(dt);};var self=this;dojo.query(".dhx_cal_prev_timeline_button").connect("onclick",function(){if(!scheduler.config.timelineStart==0){self.reRenderTimeline("left");}});dojo.query(".dhx_cal_next_timeline_button").connect("onclick",function(){if(scheduler.config.timelineStart+scheduler.config.timelineSize<48){self.reRenderTimeline("right");}});this._schedulerInitialized=true;}scheduler.clearAll();},_loadAttendeesData:function(){this._availabilityShowing=true;if(this.mode==="New"){var ldr=this.lup_Leader.get("selectedObject");var _3da=ldr["$descriptor"],_3db=ldr["$key"].substr(0,12);this.addMembers([{$descriptor:_3da,$key:_3db,IsLocation:false,Name:_3da,Subtype:"",Type:"User"}]);return;}var _3dc=this.activityId;if(!_3dc&&this._activityData){_3dc=this._activityData.$key;}if(!_3dc){return;}var _3dd=_3dc.substr(0,12);var req=new Sage.SData.Client.SDataNamedQueryRequest(Sage.Data.SDataServiceRegistry.getSDataService("mashups")).setApplicationName("$app").setResourceKind("mashups").setQueryName("execute").setQueryArg("_resultName","GetMembers").setQueryArg("_activityId",_3dd);req.uri.setCollectionPredicate("'ActivityFreeBusy'");req.read({success:dojo.hitch(this,this._onReceiveAttendees),failure:dojo.hitch(this,this._availabilityFailed)});},_attendeesTemplate:new Simplate(["<table class=\"attendee-item\">","<tr>","<td class=\"attendee-name\">{%= $.name %}</td>","{% if (($.isNotLeader) && ($.allowDelete)) { %}","<td class=\"remove-attendee\" id=\"{%= $.id %}\"><img src=\"images/icons/Delete_16x16.png\" alt=\"{%= $.removeText %}\" title=\"{%= $.removeText %}\" onclick=\"{%= $.deleteCode %}\" /></td>","{% } %}","<td class=\"attendee-status\"><img src=\"{%= $.img %}\" alt=\"{%= $.imgToolTipText %}\" title=\"{%= $.imgToolTipText %}\"/></td>","</tr>","</table>"]),_onReceiveAttendees:function(data){this._attendeesData=data["$resources"];if(this._originalLeaderId&&this._originalLeaderId!==this._activityData.Leader["$key"]){var len=this._attendeesData.length;for(var i=0;i<len;i++){if(this._attendeesData[i]["id"]===this._originalLeaderId){this._attendeesData.splice(i,1);break;}}}this._rebuildTimeLine();this._requestAvailability();},_rebuildTimeLine:function(_3de){var i;for(i=0;i<this._deleteAttendeeConnects.length;i++){dojo.disconnect(this._deleteAttendeeConnects[i]);}this._deleteAttendeeConnects=[];var _3df=[];var _3e0={};var _3e1=[];var _3e2=[];var _3e3=this._activityData.Leader["$key"].trim();var _3e4="Sage.Utility.Activity.removeMember('${0}','${1}');";for(i=0;i<this._attendeesData.length;i++){var img=this._blankGif;var _3e5="";var _3e6=this._attendeesData[i]["status"]||0;if(_3e6===1||_3e6==="asAccepted"){img="images/icons/Accept.png";_3e5=this.acceptedText;}else{if(_3e6===2||_3e6==="asDeclned"){img="images/icons/Decline.png";_3e5=this.declinedText;}}var _3e7={key:this._attendeesData[i]["id"],label:this._attendeesTemplate.apply({name:this._attendeesData[i]["name"],img:img,imgToolTipText:_3e5,id:this._attendeesData[i]["id"],isNotLeader:this._attendeesData[i]["id"].trim()!==_3e3,allowDelete:this._canEdit(),removeText:this.removeText,deleteCode:dojo.string.substitute(_3e4,[this.id,this._attendeesData[i]["id"]])})};if(this._attendeesData[i]["id"].trim()===_3e3){_3e0=_3e7;}else{if(this._attendeesData[i]["type"]==="user"){_3e1.push(_3e7);}else{_3e2.push(_3e7);}}}_3df=(_3e0.key)?[_3e0].concat(_3e1.concat(_3e2)):_3e1.concat(_3e2);for(i=0;i<this._newAttendeesData.length;i++){_3df.push({key:this._newAttendeesData[i]["$key"],label:this._attendeesTemplate.apply({name:this._newAttendeesData[i]["Name"],img:this._blankGif,id:this._newAttendeesData[i]["$key"],isNotLeader:this._newAttendeesData[i]["$key"].trim()!==_3e3,allowDelete:this._canEdit(),removeText:this.removeText,deleteCode:dojo.string.substitute(_3e4,[this.id,this._newAttendeesData[i]["$key"]])})});}if(_3de=="left"){if((scheduler.config.timelineStart-scheduler.config.timelineSize)>0){scheduler.config.timelineStart=scheduler.config.timelineStart-scheduler.config.timelineSize;}else{scheduler.config.timelineStart=0;}}else{if(_3de=="right"){var st=(scheduler.config.timelineSize+scheduler.config.timelineStart);if(st>(48-scheduler.config.timelineSize)){scheduler.config.timelineStart=48-scheduler.config.timelineSize;}else{scheduler.config.timelineStart=st;}}}scheduler.createTimelineView({name:"timeline",x_unit:"minute",x_date:"%g:%i",x_step:scheduler.config.timelineStep,x_start:scheduler.config.timelineStart,x_size:scheduler.config.timelineSize,y_unit:_3df,y_property:"section_id",render:"bar",section_autoheight:false,dy:30});scheduler.setCurrentView(this._getActivityStartDate(),"timeline");},_updateLocation:function(_3e8,_3e9){var _3ea=this._activityData.Location;if(!_3ea||_3ea===""){if(_3e9){_3ea=_3e8;}}else{var _3eb=_3ea.split("; ");var _3ec=[];var _3ed=false;for(var i=0;i<_3eb.length;i++){if(_3eb[i]===_3e8){if(_3e9){_3ed=true;}else{continue;}}_3ec.push(_3eb[i]);}if(!_3ed&&_3e9){_3ec.push(_3e8);}_3ea=_3ec.join("; ");}Sage.Utility.setValue(this._activityData,"Location",_3ea);this.tb_Location.set("value",_3ea);},_removeMember:function(args){var i;var id=args.memberId;var lst=[];for(i=0;i<this._attendeesData.length;i++){if(this._attendeesData[i]["id"]===id){if(this._attendeesData[i]["type"]==="resource"&&this._attendeesData[i]["IsLocation"]){this._updateLocation(this._attendeesData[i]["name"],false);}this._attendeesForRemoval.push(this._attendeesData[i]);}else{lst.push(this._attendeesData[i]);}}this._attendeesData=lst;lst=[];for(i=0;i<this._newAttendeesData.length;i++){if(this._newAttendeesData[i]["$key"]===id){if(this._newAttendeesData[i]["Type"]==="Resource"&&this._newAttendeesData[i]["IsLocation"]===true){this._updateLocation(this._newAttendeesData[i]["Name"],false);}}else{lst.push(this._newAttendeesData[i]);}}this._newAttendeesData=lst;this._rebuildTimeLine();if(!args.attendeesTab){this.attendeesTab._removeAssociatedContact(args.memberId);}},addMembers:function(_3ee){var _3ef=[];for(var i=0;i<_3ee.length;i++){var item=_3ee[i];if(item["$key"].length>12){item["$key"]=item["$key"].substr(0,12);}if(this._isMember(item)){continue;}if(item["ResourceId"]){item["$key"]=item["ResourceId"];}if(item["Type"]==="Resource"&&item["IsLocation"]===true){this._updateLocation(item["Name"],true);}_3ef.push(item["$key"]);this._newAttendeesData.push(item);}if(this._availabilityShowing){this._rebuildTimeLine();this._requestAvailability();}this.attendeesTab._addContactAttendees(_3ef);},_isMember:function(_3f0){var i,len=this._attendeesData.length;for(i=0;i<len;i++){if(this._attendeesData[i]["id"]===_3f0["$key"]){return true;}}len=this._newAttendeesData.length;for(i=0;i<len;i++){if(this._newAttendeesData[i]["$key"]===_3f0["$key"]){return true;}}return false;},_updateUsersListWithNewLeader:function(_3f1,_3f2){var i,len=this._attendeesData.length;for(i=0;i<len;i++){if(this._attendeesData[i]["id"]===_3f1){this._attendeesData.splice(i,1);break;}}len=this._newAttendeesData.length;for(i=0;i<len;i++){if(this._newAttendeesData[i]["$key"]===_3f1){this._newAttendeesData.splice(i,1);break;}}this.addMembers([{$descriptor:_3f2["$descriptor"],$key:_3f2["$key"],IsLocation:false,Name:_3f2["$descriptor"],Subtype:"",Type:"User"}]);},_requestAvailability:function(){if(this._attendeesData.length<1&&this._newAttendeesData.length<1){return;}var _3f3=[];for(var i=0;i<this._attendeesData.length;i++){_3f3.push("'"+this._attendeesData[i]["id"]+"'");}for(i=0;i<this._newAttendeesData.length;i++){_3f3.push("'"+this._newAttendeesData[i]["$key"]+"'");}if(this._availabilityDataDateRange.fromDate){var _3f4=Sage.Utility.Convert.toDateFromString(this._activityData["StartDate"]);if((_3f4>this._availabilityDataDateRange.fromDate)&&(_3f4<this._availabilityDataDateRange.toDate)&&(_3f3.join("")===this._availabilityDataDateRange.users.join(""))){return;}}this._requestAvailabilityFor(_3f3);},_availabilityDataDateRange:{fromDate:false,toDate:false,users:[]},_requestAvailabilityFor:function(_3f5){var _3f6=Sage.Utility.Convert.toDateFromString(this._activityData["StartDate"]);var _3f7=_2fb.add(_3f6,"day",-7);var _3f8=_2fb.add(_3f6,"day",7);this._availabilityDataDateRange.fromDate=_3f7;this._availabilityDataDateRange.toDate=_3f8;this._availabilityDataDateRange.users=_3f5;var _3f9=Sage.Services.getService("ActivityService");if(_3f9){var _3fa={quotedIds:_3f5,startDate:_3f7,endDate:_3f8,expandRecurrences:true,includeTimless:false,timelessOnly:false};_3f9.getActivityFreeBusyFor(this,_3fa,this._onReceiveAvailability,this._availabilityFailed);}},_onReceiveAvailability:function(data){this._availabilityData=data["$resources"];this._applyAvailability();},_applyAvailability:function(){scheduler.clearAll();for(var i=0;i<this._availabilityData.length;i++){var item=this._availabilityData[i];if(item.type===262162&&item.itemId!==this._currentUserId){item["description"]=_2fa.getActivityTypeName("atPersonal");}var _3fb=(item["activityId"]==this.activityId)?true:false;var _3fc=Sage.Utility.Convert.toDateFromString(item["startDate"]);var _3fd=_2fb.add(_3fc,"minute",item["duration"]);scheduler.addEvent(_3fc,_3fd,item["description"],null,{section_id:item["itemId"],activity_Id:item["activityId"],current_event:_3fb});}},reRenderTimeline:function(_3fe){this._rebuildTimeLine(_3fe);this._applyAvailability();},_availabilityFailed:function(req,msg){},_recurringStartDateChanged:function(_3ff){var _400=this.dtp_startDate.get("value");if(_3ff.getMonth()===_400.getMonth()&&_3ff.getDate()===_400.getDate()&&_3ff.getFullYear()===_400.getFullYear()){return;}if(this._activityData.StartDate){var _401=Sage.Utility.Convert.toDateFromString(this._activityData.StartDate).getHours();var _402=Sage.Utility.Convert.toDateFromString(this._activityData.StartDate).getMinutes();_3ff.setHours(_401);_3ff.setMinutes(_402);}this._activityData.StartDate=(_3ff.getFullYear)?_2f6.Convert.toIsoStringFromDate(_3ff):_3ff;this.dtp_startDate.set("value",_3ff);this._startDateChanged();},_recurringPeriodChanged:function(_403){this._handleAutoRolloverState();},_isOccurence:function(){if(this.activityId.length>12){return true;}return false;},_canEdit:function(){if((this.mode==="Confirm")||(!this._activityData.AllowEdit)||this._isOccurence()){return false;}return true;},_emptyActivity:{"$key":"","AccountId":null,"AccountName":"","ActivityBasedOn":null,"Alarm":false,"AlarmTime":_2f6.Convert.toIsoStringFromDate(new Date()),"Attachment":false,"Category":null,"ContactId":null,"ContactName":"","CreateDate":"","CreateUser":"","Description":"","Duration":15,"ForeignId1":null,"ForeignId2":null,"ForeignId3":null,"ForeignId4":null,"LeadId":null,"LeadName":"","LongNotes":null,"Notes":null,"OpportunityId":null,"OpportunityName":null,"OriginalDate":"","PhoneNumber":"","Priority":null,"ProcessId":null,"ProcessNode":null,"ProjectId":null,"RecurIterations":0,"RecurPeriod":0,"RecurPeriodSpec":0,"Recurring":false,"RecurSkip":"","Rollover":false,"StartDate":_2f6.Convert.toIsoStringFromDate(new Date()),"TicketId":null,"TicketNumber":null,"Timeless":false,"Type":"atAppointment","UserDef1":null,"UserDef2":null,"UserDef3":null,"AttachmentCount":null,"Location":null,"EndDate":"","Resources":{},"Leader":{"$key":""},"UserActivities":{},"UserNotifications":{}}});return _30e;});},"Sage/_Templated":function(){define(["dojo/dom-construct","dojo/_base/declare","dojo/query","dojo/parser","dojo/_base/array","dojo/_base/lang","dijit/registry","dijit/_base/wai"],function(_404,_405,_406,_407,_408,lang,_409,wai){var _40a=_405("Sage._Templated",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[];},buildRendering:function(){var root,_40b;if(this.widgetTemplate&&this.contentTemplate){throw new Error("Both \"widgetTemplate\" and \"contentTemplate\" cannot be specified at the same time.");}if(this.contentTemplate){this.inherited(arguments);_40b=["<div>",this.contentTemplate.apply(this),"</div>"].join("");root=_404.toDom(_40b);this._attachTemplateNodes(root);}else{if(this.widgetTemplate){_40b=this.widgetTemplate.apply(this);root=_404.toDom(_40b);if(root.nodeType!==1){throw new Error("Invalid template.");}this.domNode=root;this._attachTemplateNodes(root);}else{return;}}if(this.widgetsInTemplate){var _40c=_407.parse(root,{noStart:!this._earlyTemplatedStartup,template:true,inherited:{dir:this.dir,lang:this.lang},propsThis:this,scope:"dojo"});this._startupWidgets=this._startupWidgets||[];this._startupWidgets=this._startupWidgets.concat(_40c);this._supportingWidgets=this._supportingWidgets||[];this._supportingWidgets=this._supportingWidgets.concat(_409.findWidgets(root));this._attachTemplateNodes(_40c,function(n,p){return n[p];});}if(this.contentTemplate){_406("> *",root).place(this.domNode);}else{this._fillContent(this.srcNodeRef);}},_fillContent:function(_40d){var dest,frag,_40e;dest=this.containerNode;frag=document.createDocumentFragment();_40e=false;if(_40d&&dest){while(_40d.hasChildNodes()){frag.appendChild(_40d.firstChild);_40e=true;}if(_40e){dest.appendChild(frag);}}},_attachTemplateNodes:function(_40f,_410){_410=_410||function(n,p){return n.getAttribute(p);};var _411=(_40f instanceof Array)?_40f:(_40f.all||_40f.getElementsByTagName("*"));var x=(_40f instanceof Array)?0:-1;for(;x<_411.length;x++){var _412=(x==-1)?_40f:_411[x];if(this.widgetsInTemplate&&(_410(_412,"dojoType")||_410(_412,"data-dojo-type"))){continue;}var _413=_410(_412,"dojoAttachPoint")||_410(_412,"data-dojo-attach-point");if(_413){var _414,_415=_413.split(/\s*,\s*/);while((_414=_415.shift())){if(this[_414] instanceof Array){this[_414].push(_412);}else{this[_414]=_412;}this._attachPoints.push(_414);}}var _416=_410(_412,"dojoAttachEvent")||_410(_412,"data-dojo-attach-event");if(_416){var _417,_418=_416.split(/\s*,\s*/);var trim=lang.trim;while((_417=_418.shift())){if(_417){var _419=null;if(_417.indexOf(":")!=-1){var _41a=_417.split(":");_417=trim(_41a[0]);_419=trim(_41a[1]);}else{_417=trim(_417);}if(!_419){_419=_417;}this._attachEvents.push(this.connect(_412,_417,_419));}}}var role=_410(_412,"waiRole");if(role){wai.setWaiRole(_412,role);}var _41b=_410(_412,"waiState");if(_41b){_408.forEach(_41b.split(/\s*,\s*/),function(_41c){if(_41c.indexOf("-")!=-1){var pair=_41c.split("-");wai.setWaiState(_412,pair[0],pair[1]);}});}}},startup:function(){_408.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);},destroyRendering:function(){_408.forEach(this._attachPoints,function(_41d){delete this[_41d];},this);this._attachPoints=[];_408.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments);}});return _40a;});},"Sage/Data/SingleEntrySDataStore":function(){define(["Sage/Data/BaseSDataStore","Sage/Utility","dojo/_base/declare"],function(_41e,_41f,_420){var _421=_420("Sage.Data.SingleEntrySDataStore",_41e,{_entity:false,_request:false,_okToCache:true,postMixInProperties:function(){},getFeed:function(_422){},fetch:function(_423){if(_423.queryOptions&&_423.queryOptions.currentEntity&&this._entity){this.returnCollectionProperty(_423,_423.queryOptions.property);return;}this.verifyService();var _424=this._getRequest();if(_423.predicate){if(this._entity&&(_423.predicate===this._entity.$key)&&this._okToCache){if(_423.onComplete){_423.onComplete.call(_423.scope||this,this._entity,_423);return;}}_424.setResourceSelector(_423.predicate);}if(this.select&&this.select.length>0){_424.setQueryArg("select",this.select.join(","));}if(this.include&&this.include.length>0){_424.setQueryArg("include",this.include.join(","));}if(this.predicate&&this.predicate.length>0){_424.setResourceSelector(this.predicate);}if(_423.beforeRequest){_423.beforeRequest.call(_423.scope||this,_424);}_424.read({success:dojo.hitch(this,this.onSuccess,_423),failure:dojo.hitch(this,this.onFailure,_423)});},save:function(_425){if(this._request&&this._entity){this._okToCache=false;this._request.update(this._entity,_425);}},setValue:function(item,_426,_427){var _428=item||this._entity;if(_428){var _429=this.getValue(_428,_426,"");_41f.setValue(_428,_426,_427);this.onSet(_428,_426,_429,_427);}},getCurrentEntity:function(){return this._entity;},newItem:function(args){var _42a=new Sage.SData.Client.SDataTemplateResourceRequest(this.service);_42a.setResourceKind(this.resourceKind);_42a.read({success:function(_42b){this._entity=_42b;if((args.onComplete)&&(typeof args.onComplete==="function")){args.onComplete.call(args.scope||this,_42b);}},failure:function(err){if(args.onError){args.onError.call(args.scope||this,err);}},scope:this});},saveNewEntity:function(_42c,_42d,_42e,_42f,_430){if(!_42c){_42c=this._entity;}var _431=new Sage.SData.Client.SDataSingleResourceRequest(this.service);_431.setResourceKind(this.resourceKind);if(_430){_430.call(_42f||this,_431,_42c);}_431.create(_42c,{success:_42d||function(_432){if(typeof console!=="undefined"){}},failure:_42e||function(_433,o){if(typeof console!=="undefined"){}},scope:_42f||this});},deleteEntity:function(_434,_435,_436,_437){_434=_434||this._entity;if(_434){var _438=new Sage.SData.Client.SDataSingleResourceRequest(this.service);_438.setResourceKind(this.resourceKind);_438.setResourceSelector("'"+_434["$key"]+"'");_438["delete"](_434,{success:_435||function(_439){if(typeof console!=="undefined"){}},failure:_436||function(_43a){if(typeof console!=="undefined"){}},scope:_437||this});}},clearCache:function(){this._entity=false;},_getRequest:function(){if(!this._request){var req=new Sage.SData.Client.SDataSingleResourceRequest(this.service);req.setResourceKind(this.resourceKind);this._request=req;}return this._request;},returnCollectionProperty:function(_43b,_43c){if(this._entity&&this._entity.hasOwnProperty(_43c)){var list=this._entity[_43c].$resources;if(typeof list!=="unknown"){if(_43b.onBegin){_43b.onBegin.call(_43b.scope||this,list.length,_43b);}if(_43b.onComplete){_43b.onComplete.call(_43b.scope||this,list,_43b);}}}},onSuccess:function(_43d,data){if(data){this._okToCache=true;this._entity=data;if(_43d.onComplete){_43d.onComplete.call(_43d.scope||this,data,_43d);}}else{if(_43d.onError){_43d.onError.call(_43d.scope||this,"invalid feed",_43d);}}},onFailure:function(_43e,_43f,_440){this._entity=false;if(_43e.onError){_43e.onError.call(_43e.scope||this,_43f.responseText,_43e);}},onSet:function(item,_441,_442,_443){}});return _421;});},"Sage/Data/BaseSDataStore":function(){define(["Sage/Utility","Sage/Data/SDataServiceRegistry","dojo/_base/declare","dojo/_base/lang"],function(_444,_445,_446,lang){var _447=_446("Sage.Data.BaseSDataStore",null,{queryName:null,constructor:function(o){lang.mixin(this,o);this.features={"dojo.data.api.Read":true};if(!this.identityAttributes){this.identityAttributes=[this.identityAttribute||"$key"];}if(!this.labelAttributes){this.labelAttributes=["$descriptor"];}this.features["dojo.data.api.Identity"]=true;this.dataCache={query:""};},fetch:function(_448){if(!this.isNewContext(_448)&&this.feed){this.onSuccess(_448,this.feed);return;}this.setContext(_448);if(_448.count===Infinity){_448.count=500;}var _449=(_448.count-0)||this.pageSize||15;var _44a=(_448.start-0)||1;if(_44a>1){_44a=_44a+1;}this.verifyService();var _44b=this.getCollectionRequestObj(_448);if(!_44b){if(_448.onError){_448.onError.call(_448.scope||this,"Invalid data url",_448);}return;}_44b.setQueryArg(Sage.SData.Client.SDataUri.QueryArgNames.StartIndex,(isNaN(_44a))?1:_44a);var qry="";if(this.query&&typeof this.query!=="function"){if(!this.directQuery){this.directQuery=this.query;}}if(this.directQuery){if(!_448.query){_448.query={};}lang.mixin(_448.query,this.directQuery);}if(_448.query){if(typeof _448.query==="function"){qry=_448.query();}else{if(typeof _448.query==="string"){qry=_448.query;}else{if(typeof _448.query==="object"){for(var _44c in _448.query){if(_44c==="fn"){qry=_448.query.fn.call(_448.query.scope||this);}else{if(_44c==="conditions"){if(typeof _448.query.conditions==="string"&&_448.query.conditions!==""){qry+=(qry&&qry.length>0)?" and "+_448.query.conditions:_448.query.conditions;}}else{if(_44c!=="scope"){if(_448.query.hasOwnProperty(_44c)){var _44d=[_44c," like ","'",_448.query[_44c].replace("*","%"),"'"].join("");qry+=(qry.length>0)?" and "+_44d:_44d;}}}}}}}}}_448.evaluatedQuery=qry||"";if(qry&&qry!==""){_44b.setQueryArg("where",qry);}if(this.select&&this.select.length>0){_44b.setQueryArg("select",this.select.join(","));}if(this.include&&this.include.length>0){_44b.setQueryArg("include",this.include.join(","));}if(this.sort){_448.sort=_448.sort||[];dojo.forEach(this.sort,function(_44e){if(dojo.filter(_448.sort,function(_44f){return _44e.attribute==_44f.attribute;}).length===0){_448.sort.push(_44e);}});}if(typeof _448.resourcePredicate!=="undefined"){_44b.getUri().setCollectionPredicate(_448.resourcePredicate);}this._setQueryArgsOnRequest(_448.queryArgs,_44b);if(_448.sort&&_448.sort.length>0){var _450=[];dojo.forEach(_448.sort,function(v){if(v.descending){this.push(v.attribute+" desc");}else{this.push(v.attribute);}},_450);_44b.setQueryArg("orderBy",_450.join(","));}if(this.beforeRequest&&typeof this.beforeRequest==="function"){this.beforeRequest.call(_448.scope||this,_44b);}var key=_44b.read({success:lang.hitch(this,this.onSuccess,_448),failure:lang.hitch(this,this.onFailure,_448)});return {abort:lang.hitch(this,this.abortRequest,key)};},getCollectionRequestObj:function(_451){var _452=this.queryName?new Sage.SData.Client.SDataNamedQueryRequest(this.service).setQueryName(this.queryName):new Sage.SData.Client.SDataResourceCollectionRequest(this.service);_452.setResourceKind(this.resourceKind);_452.setStartIndex(_451.start+1);if(this.resourcePredicate&&this.resourcePredicate!=="''"){_452.getUri().setCollectionPredicate(this.resourcePredicate);}this._setQueryArgsOnRequest(this.queryArgs,_452);if(!_451.count&&this.count){_451.count=this.count;}_452.setCount(_451.count);return _452;},_setQueryArgsOnRequest:function(_453,_454){if(_453){for(var prop in _453){if(_453.hasOwnProperty(prop)){_454.setQueryArg(prop,_453[prop]);}}}},abortRequest:function(key){this.service.abortRequest(key);},onSuccess:function(_455,feed){if(_455.onBegin){if(typeof feed.$totalResults==="undefined"){feed.$totalResults=feed.$itemsPerPage+feed.$startIndex;}_455.onBegin.call(_455.scope||this,feed.$totalResults,_455);}if(_455.onComplete){_455.onComplete.call(_455.scope||this,feed.$resources,_455);}this.addToCache(_455,feed);},onFailure:function(_456,_457,o){var msg="An unknown exception occurred obtaining data.";if(_457.responseText){var _458=Sys.Serialization.JavaScriptSerializer.deserialize(_457.responseText);if(dojo.isArray(_458)){msg=_458[0].message;}else{msg=_457.responseText;}}if(_456&&_456.onError){_456.onError.call(_456.scope||this,msg,_456);}else{if(typeof msg==="string"&&typeof console!=="undefined"){if(_457&&_457.status){msg+=" (HTTP status = %o; statusText = %o)";console.error(msg,_457.status,_457.statusText);}else{console.error(msg);}}}},setContext:function(_459){this.context={start:_459.start,count:_459.count,query:_459.query,queryOptions:_459.queryOptions,sort:_459.sort};},addToCache:function(_45a,feed){var i,item,key;if(_45a.evaluatedQuery!==this.dataCache.query){this.clearCache();this.dataCache.query=_45a.evaluatedQuery;}if(feed.$resources){for(i=0;i<feed.$resources.length;i++){item=feed.$resources[i];key=this.getIdentity(item);this.dataCache[key]=item;}}},clearCache:function(){for(var key in this.dataCache){if(key!=="query"){delete this.dataCache[key];}}this.dataCache.query="";},isNewContext:function(_45b){if(typeof this.context!=="object"){return true;}if(this.context.start!==_45b.start){return true;}if(this.context.count!==_45b.count){return true;}return false;},verifyService:function(_45c){if(!this.service){this.service=_445.getSDataService(_45c||"dynamic");}},getValue:function(item,_45d,_45e){return _444.getValue(item,_45d);},getFeatures:function(){return this.features;},getLabel:function(item){var lbl=[];for(var i=0;i<this.labelAttributes.length;i++){if(item.hasOwnProperty(this.labelAttributes[i])){lbl.push(item[this.labelAttributes[i]]);}}return lbl.join(" ");},getLabelAttributes:function(item){return this.labelAttributes;},getIdentity:function(item){if(item){var _45f=[];for(var i=0;i<this.identityAttributes.length;i++){if(item.hasOwnProperty(this.identityAttributes[i])){_45f.push(item[this.identityAttributes[i]]);}}return _45f.join("");}},getIdentityAttributes:function(item){return this.identityAttributes;},fetchItemByIdentity:function(_460){if(this.dataCache.hasOwnProperty(_460.identity)){_460.onItem.call(_460.scope||this,this.dataCache[_460.identity]);}else{var msg="Item with that key does not exist in the data cache: "+_460.identity;if(_460.onError){_460.onError.call(_460.scope||this,{"error":msg});}else{if(typeof console!=="undefined"){}}}},containsValue:function(item,attr,_461){var val=_444.getValue(item,attr);return val!=="";}});return _447;});},"Sage/MainView/BindingsManager":function(){define(["dijit/_Widget","dojo/_base/declare","Sage/Utility/Activity"],function(_462,_463,_464){var _465=_463("Sage.MainView.DataBinding",_462,{boundEntity:false,boundWidget:false,widgetEvent:"onChange",widgetProperty:"value",entityProperty:false,defaultValue:"",twoWay:true,_connection:false,bind:function(){if(this.boundWidget&&this.boundEntity&&this.entityProperty){this.boundWidget.set(this.widgetProperty,this._formatValueFromEntity(Sage.Utility.getValue(this.boundEntity,this.entityProperty,this.defaultValue)));if(this.twoWay&&!this._connection){this._connection=dojo.connect(this.boundWidget,this.widgetEvent,dojo.hitch(this,"applyWidgetChange",this.boundWidget));}}},_formatValueFromEntity:function(val){return val;},applyWidgetChange:function(_466,_467){if(!_467){_467=_466.get(this.widgetProperty);}var _468=Sage.Utility.getValue(this.boundEntity,this.entityProperty);var _469=this._formatValueFromControl(_467);if(_468!=_469){Sage.Utility.setValue(this.boundEntity,this.entityProperty,_469);this.onChange(this.boundEntity,this.entityProperty,_468,_467);}},_formatValueFromControl:function(val){return val;},_setBoundEntityAttr:function(_46a){this.boundEntity=_46a;this.bind();},destroy:function(){dojo.disconnect(this._connection);this.inherited(arguments);},onChange:function(_46b,_46c,_46d,_46e){}});var _46f=_463("Sage.MainView.DateDataBinding",_465,{_formatValueFromEntity:function(val){var _470=Sage.Utility.Convert.toDateFromString(val);if(_470&&_464.isDateFiveSecondRuleTimeless(_470)){_470=new Date(_470.getUTCFullYear(),_470.getUTCMonth(),_470.getUTCDate(),0,0,5);}return _470;},_formatValueFromControl:function(val){if(!val||!val.getUTCFullYear){val=this.boundWidget.get(this.widgetProperty);if(!val||!val.getUTCFullYear){return "";}}return Sage.Utility.Convert.toIsoStringFromDate(val);}});var _471=_463("Sage.MainView.BindingsManager",null,{constructor:function(opts){this._bindings=[];this._connections=[];this.boundEntity=false;this._defaultBindingOptions={boundEntity:false,boundWidget:false,widgetEvent:"onChange",widgetProperty:"value",entityProperty:false,defaultValue:"",twoWay:true,dataType:"string"};var o=opts||{};var def=dojo.mixin(this._defaultBindingOptions,o.defaultBinding||{});var bdgs=o.items||[];for(var i=0;i<bdgs.length;i++){this._addNew(dojo.mixin({},def,bdgs[i]));}},add:function(_472){if(_472 instanceof Sage.MainView.DataBinding){this._connections.push(dojo.connect(_472,"onChange",this,"onChange"));this._bindings.push(_472);}},_addNew:function(_473){if(_473.dataType==="date"){this.add(new _46f(_473));}else{this.add(new _465(_473));}},addBindings:function(_474){if(dojo.isArray(_474)){for(var i=0;i<_474.length;i++){this._addNew(dojo.mixin(this._defaultBindingOptions,_474[i]));}}else{this._addNew(dojo.mixin(this._defaultBindingOptions,_474));}},bind:function(){for(var i=0;i<this._bindings.length;i++){if(this._bindings[i] instanceof Sage.MainView.DataBinding){this._bindings[i].bind();}}},setBoundEntity:function(_475){this._entity=_475;for(var i=0;i<this._bindings.length;i++){if(this._bindings[i] instanceof Sage.MainView.DataBinding){this._bindings[i].set("boundEntity",_475);}}},destroy:function(){var i,l=this._connections.length;for(i=0;i<l;i++){dojo.disconnect(this._connections.length);}this._connections=[];l=this._bindings.length;for(i=0;i<l;i++){var item=this._bindings.pop();item.destroy();}this._bindings=[];},onChange:function(_476,_477,_478,_479){}});return _471;});},"Sage/Utility/Activity":function(){define(["dojo/date/locale","dojox/grid/cells/_base","Sage/Utility","dojo/string","dojo/i18n!./nls/Activity","dojo/_base/declare","Sage/Data/SDataServiceRegistry","Sage/Data/SingleEntrySDataStore"],function(_47a,cell,_47b,_47c,_47d,_47e,_47f,_480){var _481=function(id){var _482=false;if(id){if(id.trim()!==""){_482=true;}}return _482;};var _483=_47e("Sage.Utility.Activity.TypeCell",dojox.grid.cells.Cell,{format:function(_484,_485){if(!_485){return this.defaultValue;}var type=this.get(_484,_485);var _486=(_485.hasOwnProperty("Activity")&&typeof _485["Activity"]==="object")?_485.Activity:_485;var key=_47b.getValue(_486,"$key");var _487=(_485.hasOwnProperty("Status"))?_485.Status:false;var _488="<span onclick=\"${0}\" class=\"activity-type-link\" ><div class=\"Global_Images icon16x16 ${1}\" title=\"${2}\"></div>&nbsp;${2}</span>";var _489=Sage.Utility.getValue(_486,"RecurrenceState");var _48a=Sage.Utility.Activity._getReccurenceFlag(_486);var href="javascript:Sage.Link.editActivity('"+key+"', "+_48a+")";if(_487){var _48b=_47b.getClientContextByKey("userID");var _48c=(_485.hasOwnProperty["User"])?_485.User["$key"]:_48b;if(_487==="asUnconfirmed"&&_48b===_48c){href="javascript:Sage.Link.confirmActivityFor('"+key+"', '"+_48b+"')";}}else{href="javascript:Sage.Link.editActivityIfConfirmed('"+key+"', "+_48a+")";}return _47c.substitute(_488,[href,Sage.Utility.Activity.getActivityImageClass(type,"small"),Sage.Utility.Activity.getActivityTypeName(type)]);}});var _48d=_47e("Sage.Utility.Activity.HistoryTypeCell",dojox.grid.cells.Cell,{format:function(_48e,_48f){if(!_48f){return this.defaultValue;}var key=_47b.getValue(_48f,"$key");var _490=_47b.getValue(_48f,"Type");var _491="";var type="";if(_490.toString().substring(0,2)==="at"){_491=Sage.Utility.Activity.getActivityTypeName(_490);type=_490;}else{_491=Sage.Utility.Activity.getActivityTypeNameFromEnumValue(_490);type=Sage.Utility.Activity.getActivityTypeCodeFromEnumValue(_490);}var fmt="<span onclick=\"javascript:Sage.Link.editHistory('${0}')\" class=\"activity-type-link\"><div class=\"Global_Images icon16x16 ${1} title=\"${2}\"></div>&nbsp;${2}</span>";return _47c.substitute(fmt,[key,Sage.Utility.Activity.getActivityImageClass(type,"small"),_491]);}});var _492=_47e("Sage.Utility.Activity.AlarmCell",cell,{formatter:function(val,_493){return (val)?"<img src='images/icons/Alarm_16x16.gif'/>":"<div><div>";}});var _494=_47e("Sage.Utility.Activity.RecurCell",dojox.grid.cells.Cell,{format:function(_495,_496){if(!_496){return this.defaultValue;}var html="";var _497=(_496.hasOwnProperty("Activity")&&typeof _496["Activity"]==="object")?_496.Activity:_496;var _498=_47b.getValue(_497,"Recurring");var _499=_47b.getValue(_497,"RecurrenceState");if(_498||(_499&&_499==="rstOccurrence")){html="<div class=\"Global_Images icon16x16 icon_recurring\"></div>";}return html;}});var _49a=_47e("Sage.Utility.Activity.AttachCell",dojox.grid.cells.Cell,{format:function(_49b,_49c){if(!_49c){return this.defaultValue;}var html="<div><div>";var _49d=(_49c.hasOwnProperty("Activity")&&typeof _49c["Activity"]==="object")?_49c.Activity:_49c;var _49e=_47b.getValue(_49d,"Attachment");if(_49e){html="<div class=\"Global_Images icon16x16 icon_attach_to_16\"></div>";}return html;}});var _49f=_47e("Sage.Utility.Activity.ConfrimStatusCell",dojox.grid.cells.Cell,{format:function(_4a0,_4a1){if(!_4a1){return this.defaultValue;}var html="<div><div>";var _4a2=_47b.getValue(_4a1,"Status");if(_4a2==="asUnconfirmed"){html="<div class=\"Global_Images icon16x16 icon_unconfirmedActivity16x16\"></div>";}return html;}});var _4a3=_47e("Sage.Utility.Activity.DurationCell",dojox.grid.cells.Cell,{format:function(_4a4,_4a5){if(!_4a5){return this.defaultValue;}var _4a6="";var _4a7=(_4a5.hasOwnProperty("Activity")&&typeof _4a5["Activity"]==="object")?_4a5.Activity:_4a5;var _4a8=_47b.getValue(_4a7,"Duration");if(_4a8){var _4a9=_47b.getValue(_4a7,"Timeless");_4a6=Sage.Utility.Activity.formatDuration(_4a8,_4a9);}return _4a6;}});var _4aa=_47e("Sage.Utility.Activity.NameCell",dojox.grid.cells.Cell,{format:function(_4ab,_4ac){if(!_4ac){return this.defaultValue;}var _4ad=(_4ac.hasOwnProperty("Activity")&&typeof _4ac["Activity"]==="object")?_4ac.Activity:_4ac;var _4ae=_47b.getValue(_4ad,"ContactName");var _4af=_47b.getValue(_4ad,"ContactId");if(_481(_4af)){return "<a href=\"Contact.aspx?entityid="+_4af+"\" >"+_4ae+"</a>";}var lead=_47b.getValue(_4ad,"LeadName");var _4b0=_47b.getValue(_4ad,"LeadId");if(_481(_4b0)){return "<a href=\"Lead.aspx?entityid="+_4b0+"\" >"+lead+"</a>";}return "<div></div> ";}});var _4b1=_47e("Sage.Utility.Activity.NameTypeCell",dojox.grid.cells.Cell,{format:function(_4b2,_4b3){if(!_4b3){return this.defaultValue;}var _4b4=(_4b3.hasOwnProperty("Activity")&&typeof _4b3["Activity"]==="object")?_4b3.Activity:_4b3;var _4b5=_47b.getValue(_4b4,"ContactId");if(_481(_4b5)){return _47d.Contact;}var _4b6=_47b.getValue(_4b4,"LeadId");if(_481(_4b6)){return _47d.Lead;}return "";}});var _4b7=_47e("Sage.Utility.Activity.AccountCell",dojox.grid.cells.Cell,{format:function(_4b8,_4b9){if(!_4b9){return this.defaultValue;}var _4ba=(_4b9.hasOwnProperty("Activity")&&typeof _4b9["Activity"]==="object")?_4b9.Activity:_4b9;var _4bb=_47b.getValue(_4ba,"AccountName");var _4bc=_47b.getValue(_4ba,"AccountId");var html="";if(_481(_4bc)){html="<a href=\"Account.aspx?entityid="+_4bc+"\" >"+_4bb+"</a>";}var _4bd=_47b.getValue(_4ba,"LeadId");if(_481(_4bd)){html="<a href=\"Lead.aspx?entityid="+_4bd+"\" >"+_4bb+"</a>";}return html;}});var _4be=_47e("Sage.Utility.Activity.LeaderCell",dojox.grid.cells.Cell,{format:function(_4bf,_4c0){if(!_4c0){return this.defaultValue;}var _4c1=(_4c0.hasOwnProperty("Activity")&&typeof _4c0["Activity"]==="object")?_4c0.Activity:null;var _4c2;if(_4c1){_4c2=_47b.getValue(_4c1,"Leader");}else{_4c2=(_4c0.hasOwnProperty("Leader")&&typeof _4c0["Leader"]==="object")?_4c0.Leader:_4c0;}var _4c3=_47b.getValue(_4c2,"$descriptor");return _4c3;}});var _4c4=_47e("Sage.Utility.Activity.CompleteCell",dojox.grid.cells.Cell,{format:function(_4c5,_4c6){if(!_4c6){return this.defaultValue;}var key=_47b.getValue(_4c6,"$key");if(_481(key)){var _4c7=(_4c6.hasOwnProperty("Activity")&&typeof _4c6["Activity"]==="object")?_4c6.Activity:_4c6;return _47c.substitute("<span onclick=\"javascript:Sage.Link.completeActivity('${0}', ${1})\" class=\"activity-type-link\">${2}</span>",[key,_47b.getValue(_4c7,"Recurring"),_47d.Complete]);}return "";}});Sage.namespace("Utility.Activity");Sage.Utility.Activity={timelessText:"timeless",_imageMap:{small:{"atNote":"images/icons/note_16x16.gif","atPhoneCall":"images/icons/Call_16x16.gif","atToDo":"images/icons/To_Do_16x16.gif","atAppointment":"images/icons/Meeting_16x16.gif","atPersonal":"images/icons/Personal_16x16.gif","atLiterature":"images/icons/Literature_16x16.png","atDoc":"images/icons/mailletter_16x16.png","atFax":"images/icons/fax_16x16.gif","atEmail":"images/icons/mailletter_16x16.png"},medium:{"atNote":"images/icons/Note_24x24.gif","atPhoneCall":"images/icons/Call_24x24.gif","atToDo":"images/icons/To_Do_24x24.gif","atAppointment":"images/icons/Meeting_24x24.gif","atPersonal":"images/icons/Personal_24x24.gif","atLiterature":"images/icons/Literature_24x24.png","atDoc":"images/icons/mailletter_24x24.gif","atFax":"images/icons/fax_24x24.gif","atEmail":"images/icons/mailletter_24x24.gif"},large:{"atNote":"images/icons/Note_24x24.gif","atPhoneCall":"images/icons/Call_32x32.gif","atToDo":"images/icons/To_Do_32x32.gif","atAppointment":"images/icons/Meeting_32x32.gif","atPersonal":"images/icons/Personal_32x32.gif","atLiterature":"images/icons/Literature_32x32.png","atDoc":"images/icons/mailletter_32x32.gif","atFax":"images/icons/fax_32x32.gif","atEmail":"images/icons/mailletter_32x32.gif"}},_iconClassMap:{small:{"atNote":"icon_note_16x16","atPhoneCall":"icon_Call_16x16","atToDo":"icon_To_Do_16x16","atAppointment":"icon_Meeting_16x16","atPersonal":"icon_Personal_16x16","atLiterature":"icon_Literature_16x16","atDoc":"icon_mailletter_16x16","atFax":"icon_fax_16x16","atEMail":"icon_mailletter_16x16"},medium:{"atNote":"icon_Note_24x24","atPhoneCall":"icon_Call_24x24","atToDo":"icon_To_Do_24x24","atAppointment":"icon_Meeting_24x24","atPersonal":"icon_Personal_24x24","atLiterature":"icon_Literature_24x24","atDoc":"icon_mailletter_24x24","atFax":"icon_fax_24x24","atEmail":"icon_mailletter_24x24"},large:{"atNote":"icon_Note_24x24","atPhoneCall":"icon_Call_32x32","atToDo":"icon_To_Do_32x32","atAppointment":"icon_Meeting_32x32","atPersonal":"icon_Personal_32x32","atLiterature":"icon_Literature_32x32","atDoc":"icon_mailletter_32x32","atFax":"icon_fax_32x32","atEmail":"icon_mailletter_32x32"}},_picklistMap:{"Regarding":{"atNote":"Note Regarding","atPhoneCall":"Phone Call Regarding","atToDo":"To Do Regarding","atAppointment":"Meeting Regarding","atEmail":"To Do Regarding","atPersonal":"Personal Activity Regarding","atLiterature":"To Do Regarding"},"Category":{"atNote":"Note Category Codes","atPhoneCall":"Phone Call Category Codes","atToDo":"To Do Category Codes","atAppointment":"Meeting Category Codes","atEmail":"To Do Category Codes","atPersonal":"","atLiterature":"To Do Category Codes"},"Result":{"atNote":"Meeting Result Codes","atPhoneCall":"Phone Call Result Codes","atToDo":"To Do Result Codes","atAppointment":"Meeting Result Codes","atEmail":"To Do Result Codes","atPersonal":"Personal Activity Result Codes","atLiterature":"To Do Result Codes"}},_notMyPersonalActivityMixin:{"AccountId":"","AccountName":"","Category":_47d.Personal,"ContactId":"","ContactName":"","Description":_47d.Personal,"LeadId":"","LeadName":"","LongNotes":"","Notes":"","OpportunityId":"","OpportunityName":"","PhoneNumber":"","Priority":"","TicketId":"","TicketNumber":"","Location":""},secureActivityData:function(_4c8){if((_4c8.Type==262162)||(_4c8.Type=="atPersonal")){var _4c9;var _4ca=Sage.Services.getService("ClientContextService");if(_4ca){if(_4ca.containsKey("userID")){_4c9=_4ca.getValue("userID");}}if(_4c9===_4c8.UserId){return;}if(_4c8.Leader){if(_4c9===_4c8.Leader.$key){return;}}dojo.mixin(_4c8,Sage.Utility.Activity._notMyPersonalActivityMixin);}},getActivityImage:function(type,size){size=Sage.Utility.Activity._verifySize(size);type=type||"atAppointment";return Sage.Utility.Activity._imageMap[size][type]||Sage.Utility.Activity._imageMap[size]["atAppointment"];},_verifySize:function(size){size=size||"small";size=size.toLowerCase();if(size!=="small"&&size!=="medium"&&size!=="large"){size="small";}return size;},getActivityImageClass:function(type,size){size=Sage.Utility.Activity._verifySize(size);type=type||"atAppointment";return Sage.Utility.Activity._iconClassMap[size][type]||Sage.Utility.Activity._iconClassMap[size]["atAppointment"];},getActivityTypeName:function(type){switch(type){case "atPhoneCall":return _47d.PhoneCall||"Phone Call";case "atToDo":return _47d.ToDo||"To Do";case "atAppointment":return _47d.Meeting||"Meeting";case "atPersonal":return _47d.Personal||"Personal Activity";case "atLiterature":return _47d.Literature||"Literature";case "atFax":return _47d.Fax||"Fax";case "atLetter":return _47d.Letter||"Letter";case "atNote":return _47d.Note||"Note";case "atEMail":return _47d.Email||"E-mail";case "atDoc":return _47d.Document||"Document";case "atDatabaseChange":return _47d.DatabaseChange||"Database Change";case "atInternal":return _47d.Event||"Event";case "atSchedule":return _47d.ScheduledEvent||"Scheduled Event";default:return type;}},getActivityTypeNameFromEnumValue:function(_4cb){switch(_4cb){case 262146:return _47d.PhoneCall||"Phone Call";case 262147:return _47d.ToDo||"To Do";case 262145:return _47d.Meeting||"Meeting";case 262162:return _47d.Personal||"Personal Activity";case 262163:return _47d.Literature||"Literature";case 262155:return _47d.Fax||"Fax";case 262148:return _47d.Note||"Note";case 262154:return _47d.Email||"E-mail";case 262153:return _47d.Document||"Document";case 262156:return _47d.DatabaseChange||"Database Change";case 0:return _47d.Event||"Event";case 1:return _47d.ScheduledEvent||"Scheduled Event";default:return _4cb;}},getActivityTypeCodeFromEnumValue:function(_4cc){switch(_4cc){case 262146:return "atPhoneCall";case 262147:return "atToDo";case 262145:return "atAppointment";case 262162:return "atPersonal";case 262163:return "atLiterature";case 262155:return "atFax";case 262148:return "atNote";case 262154:return "atEMail";case 262153:return "atDoc";case 262156:return "atDatabaseChange";case 0:return "atInternal";case 1:return "atSchedule";default:return _4cc;}},getActivityTypeEnumValue:function(name){switch(name){case "atPhoneCall":return "262146";case "atToDo":return "262147";case "atAppointment":return "262145";case "atPersonal":return "262162";case "atLiterature":return "262163";case "atFax":return "262155";case "atNote":return "262148";case "atEMail":return "262154";case "atDoc":return "262153";case "atDatabaseChange":return "262156";case "atSchedule":return "1";case "atInternal":return "0";default:return name;}},getActivityTypeEnumCode:function(type){switch(type){case 262146:return "atPhoneCall";case 262147:return "atToDo";case "atAppointment":case 262145:return "atAppointment";case 262162:return "atPersonal";case "atLiterature":return "atLiterature";case "atFax":return "atFax";case "atLetter":return "atLetter";case "atNote":return "atNote";case "atEMail":return "atEMail";default:return type;}},getConfirmationTypeEnumCode:function(type){switch(type){case 0:return "New";case 1:return "Change";case 2:return "Deleted";case 3:return "Confirm";case 4:return "Decline";case 5:return "Unknown";case 6:return "Leader";default:return type;}},getConfirmationDisplayName:function(type){switch(type){case "New":return _47d.New||"New";case "Change":return _47d.Change||"Change";case "Deleted":return _47d.Deleted||"Deleted";case "Confirm":return _47d.Confirm||"Confirm";case "Decline":return _47d.Decline||"Decline";case "Unknown":return _47d.Unknown||"Unknown";case "Leader":return _47d.Leader||"Leader";default:return type;}},getActivityPicklistName:function(_4cd,_4ce){_4cd=_4cd||"Regarding";if(!Sage.Utility.Activity._picklistMap.hasOwnProperty(_4cd)){_4cd="Regarding";}return Sage.Utility.Activity._picklistMap[_4cd][_4ce]||Sage.Utility.Activity._picklistMap[_4cd]["atToDo"];},formatActivityStartDate:function(_4cf,_4d0){if(!_4cf){return "";}if(Sage.Utility.Convert.isDateString(_4cf)){_4cf=Sage.Utility.Convert.toDateFromString(_4cf);}if(typeof _4d0==="undefined"){_4d0=Sage.Utility.Activity.isDateFiveSecondRuleTimeless(_4cf);}if(!_4d0){return _47a.format(_4cf,{selector:"datetime",fullYear:true});}else{var _4d1=new Date(_4cf.getUTCFullYear(),_4cf.getUTCMonth(),_4cf.getUTCDate());return _47a.format(_4d1,{selector:"date",fullYear:true})+" "+this.timelessText;}},getActivityEndDate:function(_4d2,_4d3,_4d4){if(!_4d2){return false;}if(Sage.Utility.Convert.isDateString(_4d2)){_4d2=Sage.Utility.Convert.toDateFromString(_4d2);}if(typeof _4d4==="undefined"){_4d4=Sage.Utility.Activity.isDateFiveSecondRuleTimeless(_4d2);}if(!_4d4){return dojo.date.add(_4d2,"minute",_4d3);}else{return new Date(_4d2.getUTCFullYear(),_4d2.getUTCMonth(),_4d2.getUTCDate(),0,0,5);}},formatActivityStartDateForCalendar:function(_4d5,_4d6,_4d7){if(!_4d5){return "";}if(Sage.Utility.Convert.isDateString(_4d5)){_4d5=Sage.Utility.Convert.toDateFromString(_4d5);}var _4d8=new Date(_4d5.getFullYear(),_4d5.getMonth(),_4d5.getDate(),_4d5.getHours(),_4d5.getMinutes());if(_4d7){_4d8=new Date(_4d5.getUTCFullYear(),_4d5.getUTCMonth(),_4d5.getUTCDate(),0,0,5);}if(_4d6){return _47a.format(_4d8,{selector:"date",datePattern:_4d6});}else{return _47a.format(_4d8,{selector:"date",datePattern:"MM/d/yy H:mm"});}},formatActivityEndDateForCalendar:function(_4d9,_4da){if(!_4d9){return "";}if(Sage.Utility.Convert.isDateString(_4d9)){_4d9=Sage.Utility.Convert.toDateFromString(_4d9);}var _4db=new Date(_4d9.getFullYear(),_4d9.getMonth(),_4d9.getDate(),_4d9.getHours(),_4d9.getMinutes());var _4dc=dojo.date.add(_4db,"minute",_4da);if(dojo.date.compare(_4dc,_4db,"date")>0){return _47a.format(_4db,{selector:"date",datePattern:"MM/d/yy 24:00"});}return _47a.format(_4dc,{selector:"date",datePattern:"MM/d/yy H:mm"});},formatEventDateForCalendar:function(_4dd,_4de){if(!_4dd){return "";}if(Sage.Utility.Convert.isDateString(_4dd)){_4dd=Sage.Utility.Convert.toDateFromString(_4dd);}var _4df=new Date(_4dd.getFullYear(),_4dd.getMonth(),_4dd.getDate(),_4dd.getHours(),_4dd.getMinutes());if(_4de){return _47a.format(_4df,{selector:"date",datePattern:_4de});}else{return _47a.format(_4df,{selector:"date",datePattern:"MM/d/yy H:mm"});}},formatEventDate:function(_4e0){if(!_4e0){return "";}if(Sage.Utility.Convert.isDateString(_4e0)){_4e0=Sage.Utility.Convert.toDateFromString(_4e0);}return _47a.format(_4e0,{selector:"date",fullYear:true});},formatDateAdd:function(dt,mode,_4e1){if(!dt){return "";}if(Sage.Utility.Convert.isDateString(dt)){dt=Sage.Utility.Convert.toDateFromString(dt);}var _4e2=new Date(dt.getFullYear(),dt.getMonth(),dt.getDate(),dt.getHours(),dt.getMinutes());_4e2=dojo.date.add(_4e2,mode,_4e1);return _47a.format(_4e2,{selector:"date",fullYear:true});},formatShortDate:function(dt){if(!dt){return "";}if(Sage.Utility.Convert.isDateString(dt)){dt=Sage.Utility.Convert.toDateFromString(dt);}var _4e3=new Date(dt.getFullYear(),dt.getMonth(),dt.getDate(),dt.getHours(),dt.getMinutes());return _47a.format(_4e3,{selector:"date",formatLength:"short",fullYear:true});},formatLongDate:function(dt){if(!dt){return "";}if(Sage.Utility.Convert.isDateString(dt)){dt=Sage.Utility.Convert.toDateFromString(dt);}var _4e4=new Date(dt.getFullYear(),dt.getMonth(),dt.getDate(),dt.getHours(),dt.getMinutes());return _47a.format(_4e4,{selector:"date",formatLength:"long",fullYear:true});},roundDateToNextQuarterHour:function(dt){dt.setSeconds(0);var _4e5=dt.getMinutes();if(_4e5<15){dt.setMinutes(15);}else{if(_4e5<30){dt.setMinutes(30);}else{if(_4e5<45){dt.setMinutes(45);}else{dt.setMinutes(0);dt=dojo.date.add(dt,"hour",1);}}}return dt;},isDateFiveSecondRuleTimeless:function(d){if(!d){return false;}return ((d.getUTCHours()===0)&&(d.getUTCMinutes()===0)&&(d.getUTCSeconds()===5));},formatDuration:function(_4e6,_4e7){if(_4e7){return "";}if(!_4e6){return "0m";}if(_4e6<60){return _4e6+"m";}if(_4e6>60){var _4e8=String(_4e6/60).split(".");var min=_4e6%60;return _4e8[0]+"h "+min+"m";}else{return "1hr";}},formatTimelessStartDate:function(_4e9){if(!_4e9){return "";}var pad=function(n){return n<10?"0"+n:n;};return _4e9.getUTCFullYear()+"-"+pad(_4e9.getUTCMonth()+1)+"-"+pad(_4e9.getUTCDate())+"T00:00:00Z";},formatTimelessEndDate:function(_4ea,mode,_4eb){if(!_4ea){return "";}var _4ec=new Date(_4ea.getFullYear(),_4ea.getMonth(),_4ea.getDate());if(mode&&_4eb){_4ec=dojo.date.add(_4ec,mode,_4eb);}var pad=function(n){return n<10?"0"+n:n;};var _4ed=_4ec.getUTCFullYear();var _4ee=_4ec.getUTCMonth()+1;var _4ef=_4ec.getUTCDate();return _4ed+"-"+pad(_4ee)+"-"+pad(_4ef)+"T23:59:59Z";},formatRawTimelessStartDate:function(_4f0){if(!_4f0){return "";}var pad=function(n){return n<10?"0"+n:n;};return _4f0.getFullYear()+"-"+pad(_4f0.getMonth()+1)+"-"+pad(_4f0.getDate())+"T00:00:00Z";},formatRawTimelessEndDate:function(_4f1,mode,_4f2){if(!_4f1){return "";}var _4f3=new Date(_4f1.getFullYear(),_4f1.getMonth(),_4f1.getDate());if(mode&&_4f2){_4f3=dojo.date.add(_4f3,mode,_4f2);}var pad=function(n){return n<10?"0"+n:n;};var _4f4=_4f3.getFullYear();var _4f5=_4f3.getMonth()+1;var _4f6=_4f3.getDate();return _4f4+"-"+pad(_4f5)+"-"+pad(_4f6)+"T23:59:59Z";},getNthWeekOfMonth:function(d){var _4f7=new Date(d.getFullYear(),d.getMonth(),d.getDate());var _4f8=_4f7.getMonth();for(var i=1;i<7;i++){_4f7=dojo.date.add(_4f7,"week",-1);if(_4f8!==_4f7.getMonth()){return i;}}return 1;},setDateToNthWeekDay:function(d,_4f9,_4fa){var i,_4fb=new Date(d.getFullYear(),d.getMonth(),d.getDate());if(_4f9===5){_4fb.setDate(dojo.date.getDaysInMonth(_4fb));for(i=0;i<7;i++){if(_4fb.getDay()===_4fa){break;}_4fb=dojo.date.add(_4fb,"day",-1);}}else{_4fb.setDate(1);for(i=0;i<7;i++){if(_4fb.getDay()===_4fa){break;}_4fb=dojo.date.add(_4fb,"day",1);}_4fb=dojo.date.add(_4fb,"week",_4f9-1);}return _4fb;},isValidId:function(id){var _4fc=false;if(id){if(id.trim()!==""){_4fc=true;}}return _4fc;},getConfirmStatusName:function(type){if(!type){return _47d.Unknown||"Unknown";}switch(type.toUpperCase().trim()){case "CHANGE":return _47d.confirmTypeChanged||"Changed";case "CONFIRM":return _47d.confirmTypeConfirmed||"Confirmed";case "DELETED":return _47d.confirmTypeDeleted||"Deleted";case "LEADER":return _47d.Leader||"Leader";case "NEW":return _47d.New||"New";default:return type;}},isReocurringId:function(id){if(id.charAt(12)===";"){return true;}return false;},findFailedRequestMessage:function(_4fd,def){if(_4fd.responseText){var rsp=eval(_4fd.responseText);if(dojo.isArray(rsp)){if(rsp[0]){return rsp[0].message||def;}}}return def;},removeMember:function(_4fe,_4ff){var _500=dijit.byId(_4fe);if(_500){var args={memberId:_4ff};_500._removeMember(args);}},getActivityEditLink:function(_501){var key=_501.id;var _502="<span onclick=\"${0}\" class=\"activity-type-link\">${1}</span>";var _503=Sage.Utility.Activity._getReccurenceFlag(_501);var desc=_501.Description||Sage.Utility.Activity.getActivityTypeName(Sage.Utility.Activity.getActivityTypeEnumCode(_501.Type));var href="javascript:Sage.Link.editActivity('"+key+"', "+_503+")";return _47c.substitute(_502,[href,desc]);},getActivitySummaryHeader:function(_504){var key=_504.id;var _505="<span onclick=\"${0}\" class=\"activity-type-link\">${1}</span>";var _506="";if(_504.Alarm){_506+="<div class=\"Global_Images icon24x24 icon_Alarm_24x24\" > </div>&nbsp;";}if((Sage.Utility.Activity.isReocurringId(_504.id))||(_504.Recurring)){_506+="<div class=\"Global_Images icon16x16 icon_recurring\" > </div>&nbsp;";}_506+="<div class=\"Global_Images icon24x24 "+Sage.Utility.Activity.getActivityImageClass(_504.Type,"medium")+"\"> </div>&nbsp;";var _507=Sage.Utility.Activity._getReccurenceFlag(_504);var desc=_504.Description||Sage.Utility.Activity.getActivityTypeName(Sage.Utility.Activity.getActivityTypeEnumCode(_504.Type));var href="javascript:Sage.Link.editActivity('"+key+"', "+_507+")";_506+=_47c.substitute(_505,[href,desc]);return _506;},getUserActivitySummaryHeader:function(_508){var _509=_508.Activity;var _50a="";if(_508.Status==="asUnconfirmed"){_50a+="<div class=\"Global_Images icon16x16 icon_unconfirmedActivity16x16\" > </div>";}if(_509.Alarm){_50a+="<div class=\"Global_Images icon24x24 icon_Alarm_24x24\" > </div>&nbsp;";}if((Sage.Utility.Activity.isReocurringId(_509.$key))||(_509.Recurring)){_50a+="<div class=\"Global_Images icon16x16 icon_recurring\" > </div>&nbsp;";}_50a+="<div class=\"Global_Images icon24x24 "+Sage.Utility.Activity.getActivityImageClass(_509.Type,"medium")+"\"> </div>&nbsp;";var _50b=Sage.Utility.Activity._getReccurenceFlag(_509);var _50c="<span onclick=\"${0}\" class=\"activity-type-link\">${1}</span>";var desc=_509.Description||Sage.Utility.Activity.getActivityTypeName(Sage.Utility.Activity.getActivityTypeEnumCode(_509.Type));var href="javascript:Sage.Link.editActivity('"+_509.$key+"', "+_50b+")";if(_508.Status==="asUnconfirmed"){href="javascript:Sage.Link.confirmActivityFor('"+_509.$key+"', "+_508.User.$key+")";}_50a+=_47c.substitute(_50c,[href,desc]);return _50a;},getActivityCompleteHref:function(_50d){var key=_50d.$key;var _50e=Sage.Utility.Activity._getReccurenceFlag(_50d);var href="javascript:Sage.Link.completeActivity('"+key+"', "+_50e+")";return href;},_getReccurenceFlag:function(_50f){if(_50f.RecurrenceState){if((_50f.Recurring===true)&&(_50f.RecurrenceState==="rstMaster")){return false;}if((_50f.Recurring===true)&&((_50f.RecurIterations)<0)){return false;}if(_50f.RecurrenceState==="rstOccurrence"){return true;}}else{if(_50f.Recurring===true){if((_50f.RecurIterations)<0){return false;}return true;}return false;}return false;},getCurrentActivityId:function(){var _510=Sage.Services.getService("ClientEntityContext");var _511=_510.getContext();var _512=null;if(_511&&_511.EntityTableName=="ACTIVITY"){_512=_511.EntityId;}return _512;},_getContactData:function(_513,_514,_515){if(!this._contactStore){this._contactStore=new _480({include:["$descriptors","Address"],resourceKind:"contacts",service:_47f.getSDataService("dynamic")});}this._contactStore.fetch({predicate:"'"+_513+"'",onComplete:function(_516){_514.call(_515,_516);},onError:function(){_514.call(_515,null);},scope:this});},_getLeadData:function(_517,_518,_519){if(!this._leadStore){this._leadStore=new _480({include:["$descriptors","Address"],resourceKind:"leads",service:_47f.getSDataService("dynamic")});}this._leadStore.fetch({predicate:"'"+_517+"'",onComplete:function(_51a){_518.call(_519,_51a);},onError:function(){_518.call(_519,null);},scope:this});},activityTypeCell:_483,activityAlarmCell:_492,activityRecurringCell:_494,activityAttachCell:_49a,activityConfirmStatusCell:_49f,activityDurationCell:_4a3,activityNameCell:_4aa,activityNameTypeCell:_4b1,activityAccountCell:_4b7,activityCompleteCell:_4c4,historyTypeCell:_48d,activityLeaderCell:_4be};return Sage.Utility.Activity;});},"Sage/UI/Controls/_DialogHelpIconMixin":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-attr","dojo/i18n!./nls/_DialogHelpIconMixin"],function(_51b,_51c,_51d,nls){return _51b("Sage.UI.Controls._DialogHelpIconMixin",null,{helpTopic:"",createHelpIcon:function(url,_51e){if(!url||this.helpIcon){_51c.destroy(this.helpIcon);}var link=_51c.create("a",{href:url,"target":_51e||"help","class":"dialogHelpIcon"},this.titleBar,"first"),node=_51c.create("div",{"class":"Global_Images icon16x16 icon_Help_16x16",title:nls.helpTooltip},link);this.helpIcon=link;},createHelpIconByTopic:function(_51f,_520){if(!_51f){_51f=this.helpTopic;}else{this.helpTopic=_51f;}var _521=Sage.Link.getHelpUrlTarget(),url=Sage.Link.getHelpUrl(_51f,_520);this.createHelpIcon(url,_521);},destroy:function(){_51c.destroy(this.helpIcon);this.inherited(arguments);},_setHelpTopicAttr:function(_522){this.helpTopic=_522;if(this.helpIcon){var url=Sage.Link.getHelpUrl(_522);_51d.set(this.helpIcon,"href",url);}else{this.createHelpIconByTopic(_522);}},_getHelpTopicAttr:function(){return this.helpTopic;}});});},"Sage/UI/_DialogLoadingMixin":function(){define(["dojo/_base/declare","dojox/widget/Standby"],function(_523,_524){return _523("Sage.UI._DialogLoadingMixin",null,{_standby:false,showLoading:function(){if(!this._standby&&this.domNode){var _525=this.domNode;if(this.containerNode){_525=this.containerNode;}this._standby=new _524({target:_525,color:"white",image:"images/loader_lg.gif",duration:50});document.body.appendChild(this._standby.domNode);this._standby.startup();}var self=this;window.setTimeout(function(){self._standby.show();},0);},hideLoading:function(){var self=this;window.setTimeout(function(){if(self._standby){self._standby.hide();}},1);}});});},"Sage/UI/AttachmentList":function(){define(["dijit/_Widget","Sage/UI/EditableGrid","Sage/Data/SDataServiceRegistry","dojo/string","Sage/UI/Columns/DateTime","Sage/UI/Columns/SlxLink","Sage/Utility","Sage/Utility/File","Sage/Utility/File/Attachment","Sage/UI/Dialogs","Sage/Utility/File/AttachmentPropertiesEditForm","Sage/Utility/File/FallbackFilePicker","Sage/Utility/File/AddURLAttachment","Sage/Utility/File/GoogleDocPicker","Sage/UI/SLXPreviewGrid","Sage/UI/SLXPreviewGrid/Filter/DateRange","Sage/UI/SLXPreviewGrid/Filter/Text","dojo/_base/declare","dojo/dom-construct","dojo/_base/lang","dojo/_base/connect","dojo/i18n!./nls/AttachmentList","Sage/Utility/Workspace"],function(_526,_527,_528,_529,_52a,_52b,_52c,_52d,_52e,_52f,_530,_531,_532,_533,_534,_535,_536,_537,_538,lang,_539,_53a,_53b){var _53c=_537("Sage.UI.AttachmentList",[_526],{placeHolder:"",conditionFmt:"",parentRelationshipName:"",workspace:"",tabId:"",fileInputBtn:false,_fileInputOnChange:null,_attachmentEditor:false,_newAttachmentsCache:[],subscriptions:[],constructor:function(){lang.mixin(this,_53a);this.subscriptions=[];},startup:function(_53d){this._checkDbType(_53d);},_checkDbType:function(_53e){var svc=Sage.Services.getService("SystemOptions");svc.get("DbType",function(val){this._buildGrid(val==="2"||val==="3");if(typeof _53e=="function"){_53e(this);}},function(){this._buildGrid(false);if(typeof _53e=="function"){_53e(this);}},this);},_buildGrid:function(_53f){var _540=[{field:"$key",editable:false,hidden:true,id:"id",formatter:function(_541,_542,cel){var _543=[cel.grid.id,"-row",_542].join("");var id=(_52c.getModeId()==="insert")?_543:_541;var _544=["<div id=",id," >",id,"</ div>"].join("");return _544;}},{field:"description",name:_53a.attachmentText,format:function(_545,_546){if(!_546){return this.defaultValue;}if(_546["url"]){var href=_546["url"]||"";href=(href.indexOf("http")<0)?"http://"+href:href;return _529.substitute("<a href=\"${0}\" target=\"_blank\" title=\"${1}\">${2}</a>",[href,_546["url"],_546["$descriptor"]]);}else{if(_546["fileExists"]){return _529.substitute("<a href=\"javascript: Sage.Utility.File.Attachment.getAttachment('${0}');\" title=\"${1}\">${1}</a>",[_546["$key"],_546["$descriptor"]]);}else{return _546["$descriptor"];}}},filterConfig:{widgetType:_536},width:"300px"},{field:"user",name:_53a.userText,format:function(_547,_548){if(!_548){return "";}var user=(_548.hasOwnProperty("user")&&typeof _548["user"]==="object")?_548.user:null;if(!user){return "";}return user["$descriptor"];},width:"120px"},{field:"attachDate",name:_53a.modDateText,filterConfig:{widgetType:_535,label:_53a.dateRangeText},type:_52a,width:"175px"},{field:"fileSize",name:_53a.sizeText,formatter:function(v){return _52d.formatFileSize(v);},width:"120px"},{field:"fileName",name:_53a.extensionText,formatter:function(s,_549,cell){if(!s){return ".";}return s.substr(s.lastIndexOf("."));},sortable:false,width:"120px"}];var _54a=[{id:this.id+"_btnBrowse",imageClass:"icon_Add_File_16x16",handler:this.browseForFiles,title:_53a.addFileText,alternateText:_53a.addFileText,appliedSecurity:"",scope:this},{id:this.id+"_btnAddUrl",imageClass:"icon_Internet_Service_Add_16x16",handler:this.addUrlAttachment,title:_53a.addUrlText,appliedSecurity:"",alternateText:_53a.addUrlText,scope:this},{id:this.id+"_btnEditAttachProps",imageClass:"icon_Edit_Item_16x16",handler:this.editSelectedAttachment,title:_53a.editText,appliedSecurity:"",alternateText:_53a.editText,scope:this},{id:this.id+"_btnDeleteAttachment",imageClass:"icon_Delete_16x16",title:_53a.deleteText,handler:this.deleteSelectedAttachment,appliedSecurity:"",alternateText:_53a.deleteText,scope:this},{id:this.id+"_btnHelp",imageClass:"icon_Help_16x16",handler:function(){_52c.openHelp("attachmentstab");},title:_53a.helpText,alternateText:_53a.helpText,appliedSecurity:""}];if(_53f){var _54b={field:"remoteStatus",name:"&nbsp;",width:"300px",format:function(_54c,_54d){if(!_54d){return this.defaultValue;}var _54e=(_54d["remoteStatus"])?_54d["remoteStatus"]:(_54d["fileExists"])?"Delivered":"Available";if(!_54d["dataType"]){_54e="X";}var link=_529.substitute("<a href=\"javascript:Sage.Utility.File.Attachment.remoteRequestAttachment('${0}')\">${1}</a>",[_54d["$key"],_53a.request]);switch(_54e){case "Available":return _53a.available+" - "+link;case "Requested":return _53a.requested;case "Delivered":return _53a.delivered+" - "+link;default:return " ";}}};_540.splice(2,0,_54b);}var _54f=this.parentRelationshipName;var _550=_52c.getCurrentEntityId();if(_54f==="activityId"){_550=_550.substr(0,12);}var _551={readOnly:true,columns:_540,tools:_54a,storeOptions:{service:_528.getSDataService("system"),resourceKind:"attachments",include:["$descriptors"],select:["description","user","attachDate","fileSize","fileName","url","fileExists","remoteStatus","dataType"],sort:[{attribute:"attachDate",descending:true}]},slxContext:{"workspace":this.workspace,tabId:this.tabId},contextualCondition:function(){return (_54f||"'A'")+" eq '"+_550+"'";},id:this.id+"_attachments",rowsPerPage:20};var _552=_52c.getCurrentEntityId();if(!_552){_551.storeOptions["isInsertMode"]=true;}this.onBeforeCreateGrid(_551);var grid=new _534.Grid(_551,this.placeHolder);grid.setSortColumn("attachDate",false);this._grid=grid._grid;this._previewGrid=grid;grid.startup();if(this.workspace){var _553=_53b.getDetailTabWorkspaceContainer();_553.resize();_553.resize();}var self=this;this.fileInputBtn=dojo.doc.createElement("INPUT");dojo.attr(this.fileInputBtn,{"type":"file","multiple":"true","accept":"*/*","class":"display-none"});dojo.place(this.fileInputBtn,this.domNode,"last");self._fileInputOnChange=_539.connect(this.fileInputBtn,"onchange",self,self.handleFiles);this.subscriptions.push(dojo.subscribe("/entity/attachment/create",this,this.onNewAttachmentEntity));this.subscriptions.push(dojo.subscribe("/entity/attachment/update",this,this.onAttachmentUpdated));if(_53f){this.subscriptions.push(dojo.subscribe("/entity/attachment/requested",this,this.onAttachmentUpdated));}dojo.connect(grid,"destroy",this,this.destroy);var _554=Sage.Services.getService("ClientEntityContext");var ctx=_554.getContext();this.contextEntityType=ctx.EntityType;},refresh:function(){if(this._grid){var _555=this._grid.get("mode");var _556=_52c.getCurrentEntityId();if((!_556&&_555!=="insert")||(_556&&_555==="insert")){this._grid.set("mode",(!_556)?"insert":"");}this._previewGrid.refresh();}},resetEntityContext:function(){var _557=this.parentRelationshipName;var _558=_52c.getCurrentEntityId();if(_557==="activityId"){_558=_558.substr(0,12);}var _559=function(){return (_557||"'A'")+" eq '"+_558+"'";};if(this._previewGrid){this._previewGrid.resetContextualCondition(_559);}this.refresh();},destroy:function(){var len=this.subscriptions.length;for(var i=0;i<len;i++){dojo.unsubscribe(this.subscriptions.pop());}},handleFiles:function(e){var _55a=this.fileInputBtn.files;this._createAttachments(_55a);},handleGearsDesktopFileSelect:function(_55b){if(_55b.length>0){_52e.createAttachments(_55b);}},_createAttachments:function(_55c){if(_55c.length>0){_52e.createAttachments(_55c);}},onNewAttachmentEntity:function(_55d){var _55e=Sage.Services.getService("ClientEntityContext");var ctx=_55e.getContext();if(this.contextEntityType!==ctx.EntityType){return;}if(this._grid.mode==="insert"){if(!_55d){this._getFallBackPickerAttachment();return;}else{this._newAttachmentsCache.push(_55d);this._grid.store.addToCache(this,_55d,1);}}this._previewGrid.refresh();},_getFallBackPickerAttachment:function(){var _55f=dijit.byId("activityEditor");var _560="activityId";if(!_55f||!_55f._tempIdForAttachments){_55f=dijit.byId("historyEditor")||{};_560="historyId";}var _561=_55f._tempIdForAttachments;if(_561){var req=new Sage.SData.Client.SDataResourceCollectionRequest(_528.getSDataService("system")).setResourceKind("attachments").setQueryArg("select",["description","userId","attachDate","fileSize","fileName","url","fileExists"].join(",")).setQueryArg("where",_560+" eq '"+_561+"'").setStartIndex(1).setCount(50);req.read({success:this._receivedFallBackPickerAttachments,failure:function(){},scope:this});}},_receivedFallBackPickerAttachments:function(data){var _562=data.$resources;this.clearNewAttachments();for(var i=0;i<_562.length;i++){var att=_562[i];this._newAttachmentsCache.push(att);this._grid.store.addToCache(this,att,i);}this._previewGrid.refresh();},onAttachmentUpdated:function(_563){var _564=Sage.Services.getService("ClientEntityContext");var ctx=_564.getContext();if(this.contextEntityType!==ctx.EntityType){return;}if(this._grid.mode==="insert"){var _565=this._newAttachmentsCache;for(var i=0;i<_565.length;i++){if(_565[i].$key===_563.$key){lang.mixin(_565[i],_563);}}}this._previewGrid.refresh();},getNewAttachments:function(){return this._newAttachmentsCache;},clearNewAttachments:function(){this._newAttachmentsCache=[];if(this._grid&&this._grid.store){this._grid.store.clearCache();}},_editAttachmentInfo:function(_566){if(!this._attachmentEditor){this._attachmentEditor=new _530();}this._attachmentEditor.set("attachmentId",_566);this._attachmentEditor.show();},browseForFiles:function(e){if(_52d.supportsHTML5File){var node=this.fileInputBtn.cloneNode();_538.destroy(this.fileInputBtn);_538.place(node,this.domNode,"last");this.fileInputBtn=node;_539.disconnect(this._fileInputOnChange);this._fileInputOnChange=_539.connect(this.fileInputBtn,"onchange",this,this.handleFiles);this.fileInputBtn.click();}else{var fbfp=dijit.byId("fallbackFilePicker");if(!fbfp){fbfp=new _531({id:"fallbackFilePicker"});}fbfp.show();}},addUrlAttachment:function(e){var ed=dijit.byId("urlAttachmentEditor");if(!ed){ed=new _532({id:"urlAttachmentEditor"});}ed.set("attachmentId","");ed.show();},editSelectedAttachment:function(){var _567=this._grid.selection.getSelected();if(_567.length<1){return;}var item=_567[0];this._editAttachmentInfo(item["$key"]);},deleteSelectedAttachment:function(){this._grid.deleteSelected(function(){dojo.publish("/entity/attachment/delete");});},addGoogle:function(){var _568=dijit.byId("googleDocumentPicker");if(!_568){_568=new _533({id:"googleDocumentPicker"});dojo.connect(_568,"onDocumentSelected",this,"_handleGoogleDocPicked");}_568.pick();},_handleGoogleDocPicked:function(_569,url){var _56a=new Sage.SData.Client.SDataTemplateResourceRequest(_528.getSDataService("system"));_56a.setResourceKind("attachments");_56a.read({success:function(_56b){_56b.description=dojo.isArray(_569)?_569[0]:_569;_56b.url=dojo.isArray(url)?url[0]:url;this._addRelationshipsToGoogleDocAttachment(_56b);},failure:function(err){},scope:this});},_addRelationshipsToGoogleDocAttachment:function(_56c){_52e.getKnownRelationships(function(rels){var _56d=lang.mixin(_56c,rels);_56d.user={"$key":_52c.getClientContextByKey("userID")||""};_56d.attachDate=_52c.Convert.toIsoStringFromDate(new Date());var _56e=new Sage.SData.Client.SDataSingleResourceRequest(_528.getSDataService("system")).setResourceKind("attachments");_56e.create(_56d,{success:function(att){dojo.publish("/entity/attachment/create",att);},failure:function(err){},scope:this});},this);},onBeforeCreateGrid:function(_56f){},setToReadOnly:function(_570){var _571=[this.id+"_btnBrowse",this.id+"_btnAddUrl",this.id+"_btnEditAttachProps",this.id+"_btnDeleteAttachment"];this._bulkSetProperty(this,_571,"disabled",_570);},_bulkSetProperty:function(ui,_572,prop,val){for(var i=0;i<_572.length;i++){var ctrl=dijit.byId(_572[i]);if(ctrl){ctrl.set(prop,val);}}}});return _53c;});},"Sage/UI/EditableGrid":function(){define(["dojox/grid/DataGrid","dijit/Toolbar","dijit/form/Button","dijit/layout/ContentPane","Sage/Data/WritableSDataStore","Sage/Data/WritableStore","Sage/UI/SDataLookup","dojo/i18n","dojo/_base/lang","Sage/Utility","Sage/UI/ImageButton","Sage/UI/Dialogs","Sage/Utility/_LocalStorageMixin","dojo/i18n!./nls/EditableGrid","Sage/UI/ToolBarLabel","dojo/parser","dojo/dom-construct","dojo/_base/declare","dojo/_base/array"],function(_573,_574,_575,_576,_577,_578,_579,i18n,_57a,_57b,_57c,_57d,_57e,_57f,_580,_581,_582,_583,_584){var _585=_583("Sage.UI.EditableGrid",[_573,_57e],{recordCountLabel:null,STORE_KEY_COLUMN_SIZE:"_COLUMN_UNIT_WIDTH_",STORE_NS:"SAGE_UI_EDITABLEGRID",STORE_KEY_SORT:"_SORT_INFO_",lookupControl:null,mode:"",region:"center",_dataChangeConnections:[],_registeredWidgets:null,constructor:function(opts){this.mode=_57b.getModeId();if(opts.storeOptions&&opts.storeOptions.isInsertMode){this.mode="insert";}this._dataChangeConnections=[];this._registeredWidgets=[];},_setModeAttr:function(mode){if(this.mode!==mode){this.mode=mode;if(!this.store){return;}if(((mode==="insert")&&(this.store.declaredClass!=="Sage.Data.WritableStore"))||((mode!=="insert")&&(this.store.declaredClass!="Sage.Data.WritableSDataStore"))){this._replaceStore();}}},_getModeAttr:function(){return this.mode;},onBlur:function(){if(this.edit&&this.edit.isEditing()){this.edit.apply();}},postMixInProperties:function(){dojo.mixin(this,_57f);dojo.mixin(this,i18n.getLocalization("dijit","common"));this.setEditable();if(!this.storeOptions){this.storeOptions={};}this.ensureValue(this.storeOptions,"pagesize",this.rowsPerPage||20);this.ensureValue(this,"singleClickEdit",true);if(typeof this.contextualCondition==="function"){this.query={fn:this.contextualCondition,scope:this};}else{if(typeof this.contextualCondition==="object"){if(this.contextualCondition.fn){this.ensureValue(this.contextualCondition,"scope",this);this.query=this.contextualCondition;}}}this.structure=[{defaultCell:_57a.mixin({defaultValue:""},this.columnDefaults),cells:this.columns}];function _586(item,list){for(var i=0;i<list.length;i++){if(item===list[i]){return;}}list.push(item);};if((this.tabId)&&(this.tabId!=="")){this.addToolsToWorkspaceToolbar();this.currentEntityId=_57b.getCurrentEntityId();}else{this.createOwnToolbar();}this._setUserPrefColumnWidths();var cols=this.columns,sel,i,p,inc,_587,_588,_589;if(!this.store){sel=this.storeOptions.select||[];for(i=0;i<sel.length;i++){sel[i]=sel[i].replace(/\./g,"/");}inc=this.storeOptions.include||[];for(i=0;i<cols.length;i++){if(cols[i].field){_589=cols[i].field;_586(_589.replace(/\./g,"/"),sel);}if(cols[i].field.indexOf(".")>0){_587=cols[i].field.split(".");_588="";for(p=0;p<_587.length-1;p++){_588+=_587[p];_586(_588,inc);_588+="/";}}}this.store=this.getStore();this.markClean();}else{sel=this.store.select=this.store.select||[];inc=this.store.include=this.store.include||[];for(i=0;i<sel.length;i++){sel[i]=sel[i].replace(/\./g,"/");}for(i=0;i<cols.length;i++){if(cols[i].field){_589=cols[i].field;_586(_589.replace(/\./g,"/"),sel);}if(cols[i].field.indexOf(".")>0){_587=cols[i].field.split(".");_588="";for(p=0;p<_587.length-1;p++){_588+=_587[p];_586(_588,inc);_588+="/";}}}}this._setSortInfo();this.inherited(arguments);},postCreate:function(){dojo.connect(this,"onKeyDown",this.customKeyDown);dojo.connect(this,"onResizeColumn",this._onResizeColumn);dojo.subscribe("Sage/events/TabWorkspace/MIDDLE_AREA_DROP",this,this._setMiddleAreaHeight);this.connect(this,"_onNew",this.showLoading);this.connect(this.scroller,"scroll",this._onScroll);dojo.connect(this,"onResizeColumn",this._onScroll);this.setupHeader();this.inherited(arguments);},showLoading:function(){this.showMessage(this.loadingMessage);this._clearData();this.markClean();},headerTemplate:new Simplate(["<div>","<div id=\"{%= $.id %}_HeaderBar\"  data-dojo-type=\"dijit.layout.ContentPane\" gutters=\"false\"  region=\"top\" ","style=\"{%= $.headerStyle %}\" class=\"editable-grid-hbar\">","<div class=\"editable-grid-hbar-left\"></div>","<div class=\"editable-grid-hbar-center\"></div>","<div class=\"editable-grid-hbar-right\"><div id=\"{%= $.gridNodeId %}_recordCountLabel\"></div></div>","</div>","</div>"]),setupHeader:function(){this.recordCountLabel=new _580();this.recordCountLabel.set("label",dojo.string.substitute(this.recordCountFormatString,this._getRecordCount()));var _58a=this.headerTemplate.apply(this);_58a=dojo.toDom(_58a);this.headerContentPane=_581.parse(_58a);var _58b=dijit.byId(this.gridNodeId);_58b.addChild(this.headerContentPane[0]);dojo.place(this.recordCountLabel.domNode,this.gridNodeId+"_recordCountLabel","replace");},resetContextualCondition:function(_58c){if(typeof _58c==="function"){this.query={fn:_58c,scope:this};}else{if(typeof _58c==="object"){if(_58c.fn){this.ensureValue(_58c,"scope",this);this.query=_58c;}}}this.contextualCondition=_58c;},_getRecordCount:function(){var _58d,_58e,_58f,_590;_58d=this.scroller;_590=_58d.rowCount;if(_590<=0){_58e=0;_58f=0;_590=0;}else{_58e=(_58d.firstVisibleRow===0)?1:_58d.firstVisibleRow+1;_58f=(_58d.lastVisibleRow>=_58d.rowCount)?_58d.rowCount:_58d.lastVisibleRow;}return [_58e,_58f,_590];},_onScroll:function(_591){if(this.recordCountLabel){this.recordCountLabel.set("label",dojo.string.substitute(this.recordCountFormatString,this._getRecordCount()));}},_setMiddleAreaHeight:function(data){var _592=["#",data.tab.ElementId," #",this.id].join("");var self=dojo.query(_592)[0];if(self){var _593=["#",data.tab.ElementId," .tws-tab-view-body"].join("");var _594=dojo.query(_593)[0];dojo.style(_594,"height","10px");TabControl.setViewBodyHeight();}},_setUserPrefColumnWidths:function(){var self=this;dojo.forEach(this.columns,function(col){if(col&&col.field){var key=self._getColumnSizeKey(col),_595=self.getFromLocalStorage(key,self.STORE_NS);if(_595){col.width=_595;}}});},_getColumnSizeKey:function(cell){var _596=cell.field.replace(/[\.\$]/g,"_"),id=[this.id,"_",this.STORE_KEY_COLUMN_SIZE,_596].join("");return id;},_onResizeColumn:function(_597){var cell=this.getCell(_597),_598=cell.unitWidth,key=this._getColumnSizeKey(cell);this.saveToLocalStorage(key,_598,this.STORE_NS);},listenForPageSave:function(){var _599=Sage.Services.getService("ClientBindingManagerService");if(_599){_599.addListener(_599.ON_SAVE,this.saveChanges,this);}},removePageSaveListener:function(){var _59a=Sage.Services.getService("ClientBindingManagerService");if(_59a){_59a.removeListener(_59a.ON_SAVE,this.saveChanges);}},setEditable:function(){var _59b=true,i;if(this.appliedSecurity){var svc=Sage.Services.getService("RoleSecurityService");if(svc){_59b=svc.hasAccess(this.appliedSecurity);}}if(this.readOnly){_59b=false;}if(!_59b){for(i=0;i<this.columns.length;i++){if(this.columns[i].editable){this.columns[i].editable=false;}}this.editable=false;}else{for(i=0;i<this.columns.length;i++){if(this.columns[i].editable){this.editable=true;break;}}}},onHeaderCellClick:function(e){var r=true;if(this.store.dirtyDataCache.isDirty){var s=Sage.Services.getService("ClientBindingManagerService");r=confirm(s._PageExitWarningMessage);}if(this.columns[e.cell.index].sortable===false||!r||this.mode==="insert"){dojo.stopEvent(e);}else{this.inherited(arguments);var _59c=this.getSortProps();if(_59c&&_59c.length>0){var _59d=_59c[0];_59d.cellIndex=e.cell.index;this.saveToLocalStorage(this.STORE_KEY_SORT+this.id,_59d,this.STORE_NS);}}},_setSortInfo:function(){var key=this.STORE_KEY_SORT+this.id;var _59e=this.getFromLocalStorage(key,this.STORE_NS);if(_59e){if(_59e.descending){this.sortInfo=(_59e.cellIndex+1)*-1;}else{this.sortInfo=_59e.cellIndex+1;}}},ensureValue:function(obj,key,_59f){obj[key]=obj[key]||_59f;},amIInATab:function(){if(this.context&&this.context.workspace){return (this.context.workspace.indexOf("TabWorkspace")>-1);}return false;},isMyTabVisible:function(){if(this.amIInATab()&&window.TabControl){return window.TabControl.getState().isTabVisible(this.tabId);}return true;},startup:function(){if(this._started){return;}this.inherited(arguments);if(this.mode!=="insert"){this.listenForPageSave();}if(this.context&&this.context.workspace){if(this.context.workspace.indexOf("TabWorkspace")<=-1){dojo.style(dojo.byId(this.id+"_Container"),"height","300px");var main=dijit.byId(this.gridNodeId);main.resize();}}if(this.amIInATab()&&this.isMyTabVisible()){var _5a0=["#","element_",this.tabId," .formtable"].join("");var _5a1=dojo.query(_5a0)[0];if(_5a1){var _5a2=dojo.byId(this.id+"_Container");if(!_5a2){_5a2=dijit.byId(this.id).getParent();_5a2=_5a2.domNode;}dojo.style(_5a2,"height","300px");}}},destroy:function(){if(this.lookupControl){this.lookupControl.destroy(false);}if(this.toolbar){this.toolbar.destroy(false);}if(this.grid){this.grid.destroy(false);}if(this.store&&this.store.destroy){this.store.destroy(false);}if(this._registeredWidgets){_584.forEach(this._registeredWidgets,function(item){item.destroy(false);});this._registeredWidgets=null;}this.removePageSaveListener();this.inherited(arguments);},_replaceStore:function(){dojo.forEach(this._dataChangeConnections,function(_5a3){dojo.disconnect(_5a3);});if(this.store&&this.store.destroy){this.store.destroy(false);}this.store=false;this.store=this.getStore();},getStore:function(){if(this.store){return this.store;}this.storeOptions["isInsertMode"]=(this.mode==="insert");var _5a4=(this.mode!=="insert")?new _577(this.storeOptions):new _578(this.storeOptions);if(this.onDataChange){this._dataChangeConnections.push(dojo.connect(_5a4,"onSet",this.onDataChange));}if(_5a4.onDataChange){this._dataChangeConnections.push(dojo.connect(_5a4,"setValue",_5a4.onDataChange));this._dataChangeConnections.push(dojo.connect(_5a4,"saveNewEntity",_5a4.onDataChange));this._dataChangeConnections.push(dojo.connect(_5a4,"deleteItem",_5a4.onDataChange));this._dataChangeConnections.push(dojo.connect(_5a4,"createItem",_5a4.onDataChange));}this._dataChangeConnections.push(dojo.connect(_5a4,"onSet",this,function(_5a5,_5a6,_5a7,_5a8){if(this.mode!=="insert"&&_5a8){if(this.edit.info.cell&&this.edit.info.cell.widget&&this.edit.info.cell.widget.returnObject===true){if(_5a7.$key!==_5a8.$key){this.markDirty();}}else{if(_5a7!==_5a8){this.markDirty();}}}}));return _5a4;},customKeyDown:function(e){this.applyEditOnEnter(e);this.navigateOnKeyDown(e);},navigateOnKeyDown:function(e){},applyEditOnEnter:function(e){if(e.charOrCode==13||e.keyCode==13){this.doApplyEdit();this.edit.apply();dojo.stopEvent(e);}},createOwnToolbar:function(){var _5a9=Sage.Services.getService("RoleSecurityService");var _5aa=dijit.byId(this.gridNodeId);this.toolbar=new _574({"class":"right-tools","region":"top"});_5aa.addChild(this.toolbar);for(var i=0;i<this.tools.length;i++){var tool=this.tools[i];if(tool.appliedSecurity&&tool.appliedSecurity!==""){if((_5a9)&&(!_5a9.hasAccess(tool.appliedSecurity))){continue;}}var btn=false;if(typeof tool==="string"){switch(tool){case "add":btn=new _57c({imageClass:"icon_plus_16x16",tooltip:this.addText,id:this.id+"_addBtn",onClick:_57a.hitch(this,function(){this.addNew();})});break;case "delete":btn=new _57c({imageClass:"icon_Delete_16x16",tooltip:this.deleteText,id:this.id+"_delBtn",onClick:_57a.hitch(this,function(){this.deleteSelected();})});break;case "save":btn=new _57c({imageClass:"icon_Save_16x16",tooltip:this.saveText,id:this.id+"_saveBtn",onClick:_57a.hitch(this,function(){this.saveChanges();})});break;case "cancel":btn=new _57c({imageClass:"icon_Reset_16x16",tooltip:this.cancelText,id:this.id+"_cancelBtn",onClick:_57a.hitch(this,function(){this.cancelChanges();})});break;}}else{if((tool.type)&&(tool.type==="Sage.UI.SDataLookup")){var conf=tool.controlConfig||tool;btn=new _579(conf);this.lookupControl=btn;}else{btn=new _57c({icon:tool.icon||"",imageClass:tool.imageClass||"",id:tool.id,onClick:_57a.hitch(tool.scope||this,tool.handler),tooltip:tool.alternateText||tool.tooltip});}}if(btn){this.toolbar.addChild(btn);btn=false;}}this.toolbar.startup();},addToolsToWorkspaceToolbar:function(){if(this.readOnly){return;}this.dirtyDataMsgID=this.tabId+"_dirtydatamsg";var _5ab=_582.create("span",{"class":"grid-unsaveddata-msg","id":this.dirtyDataMsgID,"style":"display:none;","content":(this.editable)?this.unsavedDataText:""});var _5ac,_5ad;switch(this.context.workspace){case "Sage.Platform.WebPortal.Workspaces.Tab.TabWorkspace":if(this.mode!=="insert"){var elem=dojo.query("#"+"element_"+this.tabId+" td.tws-tab-view-title");if(elem.length>0){dojo.place(_5ab,elem[0]);}}_5ad=["element_",this.tabId].join("");_5ac=dojo.query(["#",_5ad," td.tws-tab-view-tools-right"].join(""));break;case "Sage.Platform.WebPortal.Workspaces.MainContentWorkspace":if(this.mode!=="insert"){dojo.place(_5ab,dojo.query("#"+this.tabId+" span.mainContentHeaderTitle")[0]);}_5ad=this.tabId;_5ac=dojo.query("#"+_5ad+" td.mainContentHeaderToolsRight");break;case "Sage.Platform.WebPortal.Workspaces.DialogWorkspace":_5ac=dojo.query("td.dialog-tools-right");break;default:}var _5ae=Sage.Services.getService("RoleSecurityService");var _5af=0,_5b0,_5b1;for(var i=0;i<this.tools.length;i++){_5b0="";var tool=this.tools[i];if(typeof tool.mergeControlId!=="undefined"&&tool.mergeControlId.length!==0){_5b1=dojo.query("[id$="+tool.mergeControlId+"]",dojo.byId("element_"+this.tabId))[0];_5b0=tool.mergePosition.toLowerCase();}if(!_5b1){_5b1=_5ac[0];_5b0="";}if(this.mode==="insert"&&!tool.displayInInsert){continue;}if(tool.appliedSecurity&&tool.appliedSecurity!==""){if((_5ae)&&(!_5ae.hasAccess(tool.appliedSecurity))){continue;}}if(typeof tool==="string"){switch(tool){case "add":var _5b2=this.id+"_addBtn";var _5b3=new _57c({id:_5b2,imageClass:"icon_plus_16x16",onClick:_57a.hitch(this,this.addNew),tooltip:this.addText});this._registeredWidgets.push(_5b3);dojo.place(_5b3.domNode,_5ac[0],_5af);break;case "delete":var _5b4=this.id+"_delBtn";var _5b5=new _57c({id:_5b4,tooltip:this.deleteText,imageClass:"icon_Delete_16x16",onClick:_57a.hitch(this,this.deleteSelected)});this._registeredWidgets.push(_5b5);dojo.place(_5b5.domNode,_5ac[0],_5af);break;case "save":var _5b6=this.id+"_saveBtn";var _5b7=new _57c({id:_5b6,tooltip:this.saveText,imageClass:"icon_Save_16x16",onClick:_57a.hitch(this,this.saveChanges)});this._registeredWidgets.push(_5b7);dojo.place(_5b7.domNode,_5ac[0],_5af);break;case "cancel":var _5b8=this.id+"_cancelBtn";var _5b9=new _57c({id:_5b8,tooltip:this.cancelText,imageClass:"icon_Reset_16x16",onClick:_57a.hitch(this,this.cancelChanges)});this._registeredWidgets.push(_5b9);dojo.place(_5b9.domNode,_5ac[0],_5af);break;}}else{if((tool.type)&&(tool.type==="Sage.UI.SDataLookup")){var conf=tool.controlConfig||tool;var lup=new _579(conf);dojo.place(lup.domNode,_5b1,_5af);this.lookupControl=lup;}else{var _5ba=new _57c({id:tool.id,icon:tool.icon||"",imageClass:tool.imageClass||"",onClick:_57a.hitch(tool.scope||this,tool.handler),tooltip:tool.alternateText||tool.tooltip});this._registeredWidgets.push(_5ba);dojo.place(_5ba.domNode,_5b1,(_5b0.length>0)?_5b0:_5af);}}_5af++;}},addNew:function(args){if(this.store){this.store.newItem(args);}},addAssociatedItems:function(_5bb,_5bc,_5bd,_5be){var grid=this;if(_57b.getModeId()!=="insert"&&this.store.dirtyDataCache.isDirty){_57d.raiseQueryDialog("Infor CRM",this.dirtyDataMessage,function(_5bf){if(_5bf){grid.addSelectedItems(_5bb,_5bc,_5bd,_5be);}},this.okText,this.cancelText);}else{grid.addSelectedItems(_5bb,_5bc,_5bd,_5be);}},addSelectedItems:function(_5c0,_5c1,_5c2,_5c3){var _5c4=[];var grid=this;for(var i=0;i<_5c0.length;i++){var _5c5=false;for(var k in grid.store.dataCache){var rec=grid.store.dataCache[k];if(rec[_5c2]&&rec[_5c2].$key==_5c0[i].$key){_5c5=true;}}if(_5c5){continue;}var _5c6={};if(_57b.getModeId()!=="insert"){_5c6[_5c1]={$key:_57b.getCurrentEntityId()};}_5c6[_5c2]={};_57b.extend(_5c6[_5c2],_5c0[i]);delete _5c6.$key;delete _5c6.$name;delete _5c6.$url;_5c4.push(_5c6);}if(_5c4.length>0){grid.createItems(_5c4,function(){if(_57b.getModeId()!=="insert"){__doPostBack("MainContent","");}});}if(_5c3){_5c3.lookupDialog.hide();}},createItems:function(_5c7,_5c8){if(dojo.isArray(_5c7)){var _5c9=this.store;var _5ca=_5c7.length;if(typeof console!=="undefined"){}var _5cb=function(arg1){this.currentCount=this.currentCount+1;if(typeof console!=="undefined"){if(arg1&&typeof arg1!=="undefined"&&arg1.getResponseHeader){}else{if(arg1&&typeof arg1!=="undefined"&&typeof arg1.$httpStatus==="string"){}else{}}}if(this.currentCount===this.totalCount){this.grid.refresh();if(typeof this.onComplete==="function"){this.onComplete.call(this.grid);}}};var _5cc={grid:this,totalCount:_5ca,currentCount:0,onResponse:_5cb,onComplete:_5c8||null};for(var i=0;i<_5c7.length;i++){_5c9.createItem(_5c7[i],_5cc);}}else{_57d.showError(this.createItemsInvalidArrayText);}},deleteSelected:function(_5cd){var _5ce=this.selection.getSelected();if(_5ce.length<1){_57d.showError(this.noSelectionsText);return;}if(this.mode!=="insert"){if(!this.store._checkPageExitWarningMessage()){return;}}var self=this;var opts={title:"Infor CRM",query:dojo.string.substitute(this.confirmDeleteFmtTxt,[_5ce.length]),callbackFn:function(_5cf){self.deleteCallback(_5cf,_5cd,_5ce);},yesText:this.buttonOk,noText:this.buttonCancel};_57d.raiseQueryDialogExt(opts);},deleteCallback:function(_5d0,_5d1,_5d2){if(_5d0){var grid=this;var _5d3=this.store;var _5d4=0;for(var i=0;i<_5d2.length;i++){if(this.store.isItem(_5d2[i])){_5d4++;}}grid.selection.clear();this.showLoading();var _5d5=function(arg1,arg2){this.currentCount=this.currentCount+1;if(typeof console!=="undefined"){if(arg1&&typeof arg1!=="undefined"&&arg1.getResponseHeader){}else{}}if(this.currentCount===this.totalCount){grid.refresh();if(typeof this.onComplete==="function"){this.onComplete.call(grid);}}};var _5d6={grid:grid,totalCount:_5d4,currentCount:0,onResponse:_5d5,onComplete:_5d1||null};for(i=0;i<_5d2.length;i++){if(_5d3.isItem(_5d2[i])){_5d3.deleteItem(_5d2[i],_5d6);}}if(!this.storeOptions.hasOwnProperty("clearStoreCacheOnDelete")||this.storeOptions.clearStoreCacheOnDelete===true){_5d3.clearCache();}}},cancelChanges:function(){if(this.store&&this.store.revert){this.store.revert();this.markClean();this.refresh();}},saveChanges:function(_5d7){this.onBlur();if(!this.store.save){return;}var _5d8=0;for(var key in this.store.dirtyDataCache){if(key!=="isDirty"){var _5d9=this.store.dirtyDataCache[key];if(this.store.isItem(_5d9)){_5d8++;}}}var _5da=function(arg1,arg2){this.currentCount=this.currentCount+1;if(typeof console!=="undefined"){if(arg1&&typeof arg1!=="undefined"&&arg1.getResponseHeader){}else{if(arg1&&typeof arg1!=="undefined"&&typeof arg1.$httpStatus==="string"){}else{}}}if(this.currentCount===this.totalCount){this.grid.markClean();this.grid.refresh();if(typeof this.onComplete==="function"){this.onComplete.call(this.grid);}}};var _5db={grid:this,totalCount:_5d8,currentCount:0,onResponse:_5da,onComplete:_5d7||null};this.store.save(_5db);},markClean:function(){if(this.dirtyDataMsgID){var _5dc=dojo.byId(this.dirtyDataMsgID);if(_5dc){dojo.style(dojo.byId(this.dirtyDataMsgID),"display","none");}var _5dd=Sage.Services.getService("ClientBindingManagerService");if(_5dd){_5dd.clearDirtyAjaxItem(this.id);}}},markDirty:function(){var node=dojo.byId(this.dirtyDataMsgID);if(node){dojo.style(node,"display","inline");}var _5de=Sage.Services.getService("ClientBindingManagerService");if(_5de){_5de.addDirtyAjaxItem(this.id);}},refresh:function(){if(!this.scroller){return;}this._refresh();this.onRefresh();},onRefresh:function(){}});return _585;});},"Sage/Data/WritableSDataStore":function(){define(["Sage/Data/BaseSDataStore","Sage/Utility","dojo/_base/declare","dojo/_base/array","dojo/_base/lang"],function(_5df,_5e0,_5e1,_5e2,lang){var _5e3=_5e1("Sage.Data.WritableSDataStore",_5df,{newItemParentReferenceProperty:false,constructor:function(o){this.features["dojo.data.api.Write"]=true;this.features["dojo.data.api.Notification"]=true;this.dirtyDataCache={isDirty:false};this.singleResourceRequest=null;dojo.connect(this,"clearCache",this,this._clearCache);this.onComplete=o.onComplete;},getSingleResourceRequest:function(key){this.verifyService();if(this.singleResourceRequest===null){this.singleResourceRequest=new Sage.SData.Client.SDataSingleResourceRequest(this.service);this.singleResourceRequest.setResourceKind(this.resourceKind);if(this.select&&this.select.length>0){this.singleResourceRequest.setQueryArg("select",this.select.join(","));}if(this.include&&this.include.length>0){this.singleResourceRequest.setQueryArg("include",this.include.join(","));}}if(key){this.singleResourceRequest.setResourceSelector("'"+key+"'");}return this.singleResourceRequest;},onSuccess:function(_5e4,feed){if(_5e4.onBegin){_5e4.onBegin.call(_5e4.scope||this,feed.$totalResults,_5e4);}if(this.onComplete){this.onComplete.call(_5e4.scope||this,feed.$resources,_5e4);}if(_5e4.onComplete){_5e4.onComplete.call(_5e4.scope||this,feed.$resources,_5e4);}this.addToCache(_5e4,feed);},_clearCache:function(){this.clearDirtyDataCache();},clearDirtyDataCache:function(){for(var key in this.dirtyDataCache){if(key!=="isDirty"){delete this.dirtyDataCache[key];}}this.dirtyDataCache.isDirty=false;},isItem:function(_5e5){var id=this.getIdentity(_5e5);if(id&&id!==""){return this.dataCache.hasOwnProperty(id);}return false;},isItemLoaded:function(_5e6){return this.isItem(_5e6);},loadItem:function(_5e7){if(!this.isItem(_5e7.item)){throw new Error("Unable to load "+_5e7.item);}},getValues:function(item,_5e8){if(this.isItem(item)&&(typeof _5e8==="string")){return (item[_5e8]||[]).slice(0);}return [];},hasAttribute:function(item,_5e9){if(this.isItem(item)&&(typeof _5e9==="string")){return _5e9 in item;}return false;},close:function(){this.clearCache();},deleteItem:function(item,_5ea){var _5eb={};_5eb.scope=_5ea||this;_5eb.ignoreETag=true;var _5ec=this.getSingleResourceRequest(this.getIdentity(item));if(_5ea&&typeof _5ea.onResponse==="function"){_5eb.success=_5ea.onResponse;_5eb.aborted=_5ea.onResponse;_5eb.failure=_5ea.onResponse;}_5ec["delete"](item,_5eb);},isDirty:function(item){if(item){var id=this.getIdentity(item);if(id&&id!==""){return this.dirtyDataCache.hasOwnPropery(id);}}return this.dirtyDataCache.isDirty;},_checkPageExitWarningMessage:function(){var _5ed=true;if(this.dirtyDataCache.isDirty){var _5ee=Sage.Services.getService("ClientBindingManagerService");_5ed=confirm(_5ee._PageExitWarningMessage);}return _5ed;},newItem:function(args){if(!this._checkPageExitWarningMessage()){return;}var _5ef=this.createTemplateRequest();if(_5ef){_5ef.read({success:function(_5f0){this._newItemCreated(args,_5f0);this.onNew(_5f0);},failure:this.requestTemplateFailure,scope:this});}},_newItemCreated:function(_5f1,_5f2){if(this.newItemParentReferenceProperty){var _5f3=Sage.Utility.getCurrentEntityId();if(_5f2.hasOwnProperty(this.newItemParentReferenceProperty)&&_5f3){_5f2[this.newItemParentReferenceProperty]={"$key":_5f3};}}if((_5f1)&&(_5f1.onComplete)&&(typeof _5f1.onComplete==="function")){_5f1.onComplete.call(_5f1.scope||this,_5f2);}},createTemplateRequest:function(){var _5f4=new Sage.SData.Client.SDataTemplateResourceRequest(this.service);if((this.resourceKind)&&(this.resourceKind!=="")){_5f4.setResourceKind(this.resourceKind);}return _5f4;},requestTemplateFailure:function(){},saveNewEntity:function(_5f5,_5f6,_5f7,_5f8){var _5f9=new Sage.SData.Client.SDataSingleResourceRequest(this.service);if(_5f9){if((this.resourceKind)&&(this.resourceKind!=="")){_5f9.setResourceKind(this.resourceKind);}_5f9.create(_5f5,{success:_5f6||function(_5fa){if(typeof console!=="undefined"){}},failure:_5f7||function(_5fb,o){if(typeof console!=="undefined"){}},scope:_5f8||this});}},createItem:function(item,_5fc){var _5fd=new Sage.SData.Client.SDataSingleResourceRequest(this.service);if(_5fd){if((this.resourceKind)&&(this.resourceKind!=="")){_5fd.setResourceKind(this.resourceKind);}var _5fe={};_5fe.scope=_5fc||this;_5fe.scope.store=this;var _5ff=function(_600){if(typeof console!=="undefined"){}if(typeof this.onResponse==="function"){this.onResponse.call(this,_600);}};_5fe.success=_5ff;var _601=function(_602,o){if(typeof this.onResponse==="function"){this.onResponse.call(this,_602,o);}else{if(typeof console!=="undefined"&&_602&&typeof _602!=="undefined"&&_602.status){}}};_5fe.failure=_601;_5fe.aborted=_601;_5fd.create(item,_5fe);}},revert:function(){this.clearDirtyDataCache();this.onDataReset();},save:function(_603){var _604,_605;if(!this.dirtyDataCache.isDirty){if(_603&&typeof _603.onComplete==="function"){_603.onComplete.call(_603);}return;}for(var key in this.dirtyDataCache){if(key!=="isDirty"){_604=this.dirtyDataCache[key];if(this.isItem(_604)){_605=this.getSingleResourceRequest(key);var _606={};_606.scope=_603||this;_606.scope.store=this;if(!this.isSecurityManager){_606.ignoreETag=true;}var _607=function(_608){if(this.store.dataCache[_608.$key]){this.store.dataCache[_608.$key].$etag=_608.$etag;}if(typeof this.onResponse==="function"){this.onResponse.call(this,_608);}};_606.success=_607;var _609=function(_60a,o){if(typeof console!=="undefined"){if(_60a&&typeof _60a!=="undefined"&&_60a.responseText){var _60b=dojo.fromJson(_60a.responseText);if(_60b&&typeof _60b!=="undefined"&&_60b.$key){var obj=this.store.dataCache[_60b.$key];if(obj&&obj.$etag){}}}}if(typeof this.onResponse==="function"){this.onResponse.call(this,_60a,o);}};_606.failure=_609;_606.aborted=_609;_605.update(_604,_606);}delete this.dirtyDataCache[key];}}this.dirtyDataCache.isDirty=false;if(_603&&typeof _603.onResponse!=="function"&&typeof _603.onComplete==="function"){_603.onComplete.call(_603);}},setValue:function(item,_60c,_60d){var _60e=this.getValue(item,_60c,"");_5e0.setValue(item,_60c,_60d);this.onSet(item,_60c,_60e,_60d);if(_60e!=_60d){this.dirtyDataCache[this.getIdentity(item)]=item;this.dirtyDataCache.isDirty=true;}return true;},setValues:function(item,_60f,_610){_5e2.forEach(_610,lang.hitch(this,function(val){this.setValue(item,_60f,val);}));},unsetAttribute:function(item,_611){alert("not implemented - unsetAttribute");},onSet:function(item,_612,_613,_614){},onNew:function(_615){},onDelete:function(_616){},onDataReset:function(){},onDataSaved:function(){},onItemSaved:function(_617,_618){},onItemNotSaved:function(_619,_61a){}});return _5e3;});},"Sage/Data/WritableStore":function(){define(["Sage/Data/BaseSDataStore","Sage/Utility","dojo/_base/declare","dojo/_base/lang"],function(_61b,_61c,_61d,lang){var _61e=_61d("Sage.Data.WritableStore",_61b,{isInsertMode:false,constructor:function(o){lang.mixin(this,o);this.features["dojo.data.api.Write"]=true;this.features["dojo.data.api.Notification"]=true;this.identityAttributes=["$cacheID"];this.dirtyDataCache={isDirty:false};this.singleResourceRequest=null;if(!o.hasOwnProperty("isInsertMode")){this.isInsertMode=_61c.getModeId()==="insert";}},entry:"",fetch:function(_61f){var _620={};_620.$resources=[];if(_61f.isRender&&this.dataCarrierId){var _621=dojo.query([".",this.dataCarrierId].join(""));if(_621[0].value.length>0){var _622=dojo.fromJson(_621[0].value);this.addItemsToCache(_61f,_622.$resources);}}for(var item in this.dataCache){if(this.dataCache.hasOwnProperty(item)&&item!=="query"){_620.$resources.push(this.dataCache[item]);}}this.setContext(_61f);this.verifyService();if(this.isInsertMode){var self=this;window.setTimeout(function(){self.onSuccess(_61f,_620);},5);return;}var _623=new Sage.SData.Client.SDataResourceCollectionRequest(this.service).setResourceKind(this.resourceKind).setStartIndex(_61f.start+1).setCount(_61f.count);var qry="";if(this.query){if(!_61f.query){_61f.query={};}lang.mixin(_61f.query,this.query);}if(_61f.query){if(typeof _61f.query==="function"){qry=_61f.query();}else{if(typeof _61f.query==="string"){qry=_61f.query;}else{if(typeof _61f.query==="object"){if(_61f.query.hasOwnProperty("fn")){qry=_61f.query.fn.call(_61f.query.scope||this);}if(_61f.query.hasOwnProperty("conditions")){if(typeof _61f.query.conditions==="string"){qry+=(qry.length>0)?" and "+_61f.query.conditions:_61f.query.conditions;}}}}}}_61f.evaluatedQuery=qry||"";if(qry&&qry!==""){_623.setQueryArg("where",qry);}if(this.select&&this.select.length>0){_623.setQueryArg("select",this.select.join(","));}if(this.include&&this.include.length>0){_623.setQueryArg("include",this.include.join(","));}var key=_623.read({success:lang.hitch(this,this.onSuccess,_61f),failure:lang.hitch(this,this.onFailure,_61f)});return {abort:lang.hitch(this,this.abortRequest,key)};},onSuccess:function(_624,feed){if(this.entry===""){this.entry=feed;}if(_624.onBegin){_624.onBegin.call(_624.scope||this,feed.$resources.length,_624);}if(_624.onComplete){_624.onComplete.call(_624.scope||this,feed.$resources,_624);}},addToCache:function(_625,item,_626){var key;_626=(typeof _626==="undefined")?(Math.random()*11):_626;if(this.isInsertMode){item.$cacheID=new Date().getTime()+_626;}key=this.getIdentity(item);this.dataCache[key]=item;},addItemsToCache:function(_627,_628){for(var i=0;i<_628.length;i++){this.addToCache(_627,_628[i],i);}},clearCache:function(){this.inherited(arguments);this.clearDirtyDataCache();},clearDirtyDataCache:function(){for(var key in this.dirtyDataCache){if(key!=="isDirty"){delete this.dirtyDataCache[key];}}this.dirtyDataCache.isDirty=false;},isItem:function(_629){var id=this.getIdentity(_629);if(id&&id!==""){return this.dataCache.hasOwnProperty(id);}return false;},isItemLoaded:function(_62a){return this.isItem(_62a);},loadItem:function(_62b){if(!this.isItem(_62b.item)){throw new Error("Unable to load "+_62b.item);}},getValues:function(item,_62c){if(this.isItem(item)&&(typeof _62c==="string")){return (item[_62c]||[]).slice(0);}return [];},hasAttribute:function(item,_62d){if(this.isItem(item)&&(typeof _62d==="string")){return _62d in item;}return false;},close:function(){this.clearCache();},deleteItem:function(item,_62e){var id=this.getIdentity(item);if(id&&id!==""){delete this.dataCache[id];}var _62f={};_62f.scope=_62e||this;var _630=function(){if(typeof this.onResponse==="function"){this.onResponse.call(this);}};_62f.success=_630;_62f.success.call(_62f.scope);},isDirty:function(item){if(item){var id=this.getIdentity(item);if(id&&id!==""){return this.dirtyDataCache.hasOwnPropery(id);}}return this.dirtyDataCache.isDirty;},newItem:function(args){var _631=this.createTemplateRequest();if(_631){_631.read({success:function(_632){if((args)&&(args.onComplete)&&(typeof args.onComplete==="function")){args.onComplete.call(args.scope||this,_632);}},failure:this.requestTemplateFailure,scope:this});}},createTemplateRequest:function(){var _633=new Sage.SData.Client.SDataTemplateResourceRequest(this.service);if((this.resourceKind)&&(this.resourceKind!=="")){_633.setResourceKind(this.resourceKind);}return _633;},requestTemplateFailure:function(){},saveNewEntity:function(_634,_635,_636,_637){this.addToCache(_637,_634);_635();},createItem:function(item,_638){var _639={};_639.scope=_638||this;_639.scope.store=this;var _63a=function(_63b){if(typeof this.onResponse==="function"){this.onResponse.call(this,_63b);}};_639.success=_63a;this.addToCache(_638,item);_639.success.call(_639.scope,item);},revert:function(){this.clearDirtyDataCache();this.onDataReset();},setValue:function(item,_63c,_63d){var _63e=this.getValue(item,_63c,"");_61c.setValue(item,_63c,_63d);this.onSet(item,_63c,_63e,_63d);return true;},setValues:function(item,_63f,_640){alert("not implemented - setValues");},unsetAttribute:function(item,_641){alert("not implemented - unsetAttribute");},dataCacheToArray:function(){var _642=[];for(var item in this.dataCache){if(this.dataCache.hasOwnProperty(item)&&item!=="query"){_642.push(this.dataCache[item]);}}return _642;},onDataChange:function(){this.clearDirtyDataCache();var _643=dojo.query([".",this.dataCarrierId].join(""));if(_643[0]){this.entry.$resources=this.dataCacheToArray();_643[0].value=JSON.stringify(this.entry);}},onSet:function(item,_644,_645,_646){},onNew:function(_647,_648){},onDelete:function(_649){},onDataReset:function(){},onDataSaved:function(){},onItemSaved:function(_64a,_64b){},onItemNotSaved:function(_64c,_64d){}});return _61e;});},"Sage/UI/SDataLookup":function(){define(["dojo/_base/html","dojox/grid/DataGrid","dijit/Dialog","dijit/form/Button","Sage/UI/ComboBox","Sage/Data/BaseSDataStore","Sage/UI/ConditionManager","Sage/Utility","Sage/_Templated","Sage/UI/Columns/DateTime","Sage/UI/Columns/Phone","Sage/UI/Columns/PickList","dijit/_Widget","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dojo/i18n!./nls/SDataLookup","dojo/_base/declare"],function(html,_64e,_64f,_650,_651,_652,_653,_654,_655,_656,_657,_658,_659,_65a,_65b,_65c,_65d){(function(){if(!_654){Sage.namespace("Utility");}_654.addToListUnique=function(item,list){for(var i=0;i<list.length;i++){if(item===list[i]){return;}}list.push(item);};_654.SDataLookupChildObjectFormatter=function(opts){var _65e=opts.grid.grid._by_idx[opts.rowIdx].item,res,i;if(!_65e||!_65e[opts.childentity]||_65e[opts.childentity].$resources.length===0){return dojo.string.substitute("<div style=\"text-indent:16px\">${0}</div>",[opts.value||"&nbsp;"]);}opts.value=opts.value||"&nbsp;";res=[];if(opts.includeButton){res.push(dojo.string.substitute(["<input type=button id=\"SOPshow${1}\" style=\"height:16px;width:14px;border:0;background:transparent;vertical-align:top\" onclick=\"dojo.query('.SOProw${1}').style({display:''});dojo.query('#SOPshow${1}').style({display:'none'});dojo.query('#SOPhide${1}').style({display:''})\" value=\"+\">","<input type=button id=\"SOPhide${1}\" style=\"display:none;height:16px;width:14px;border:0;background:transparent;vertical-align:top\" onclick=\"dojo.query('.SOProw${1}').style({display:'none'});dojo.query('#SOPshow${1}').style({display:''});dojo.query('#SOPhide${1}').style({display:'none'})\" value=\"-\"> "].join(""),[opts.value,opts.rowIdx]));}res.push(dojo.string.substitute("${0}<div class=SOProw${1} style=\"display:none\">",[opts.value,opts.rowIdx]));for(i=0;i<_65e[opts.childentity].$resources.length;i++){res.push(dojo.string.substitute("<div style=\"text-indent:2em\">${0}</div>",[_65e[opts.childentity].$resources[i][opts.fieldName]||"&nbsp;"]));}res.push("</div>");return res.join("");};}());var _65f=_65d("Sage.UI.SDataLookup",[_659,_655],{config:null,grid:null,sdataStore:null,conditionMgr:null,structure:null,displayMode:5,lookupDialog:null,dialogTitle:"",dialogWidth:675,dialogHeight:500,seedOnRowEntity:false,seedOnRelatedEntity:"",seedProperty:"",seedValue:"",overrideSeedValueOnSearch:false,preFilters:null,initializeLookup:true,rowEntityId:"",relatedEntityId:"",returnObject:true,addEmptyListItem:false,fields:null,query:null,callerId:null,widgetsInTemplate:true,storeOptions:null,gridOptions:null,sortColumn:"",displayModes:{"DropDownList":0,"Dialog":1,"HyperText":2,"Text":3,"ButtonOnly":4,"ButtonOnlyClient":5},btnIcon:"images/icons/plus_16x16.gif",isModal:false,cancelText:"Cancel",closeText:"Close",loadingText:"Loading...",noDataText:"No records returned",_initialized:false,_addCondHandle:null,_removeCondHandle:null,_originalQueryConditions:"",id:"lookupControl",dialogContent:new Simplate(["<div >","<div style=\"padding:5px;\" id=\"{%= $.id %}-Condition-container\"></div>","<div id=\"{%= $.id %}-Grid-container\" style=\"width:auto;height:{%= $.gridHeight %}px;\"></div>","<div class=\"lookupButtonWrapper\">","{% if($.dialogButtonText){ %}","<button data-dojo-type=\"dijit.form.Button\" type=\"button\" id=\"{%= $.id %}-GridSelectButton\" ","onClick=\"dijit.byId('{%= $.id %}').getGridSelections(); \">","{%= $.dialogButtonText %} </button>","{% } %}","<button data-dojo-type=\"dijit.form.Button\" type=\"button\" id=\"{%= $.id %}-CloseButton\" ","onClick=\"dijit.byId('{%= $.id %}-Dialog').hide();\">{%= $.hideText %}</button>","</div>","</div> "]),constructor:function(){this.gridOptions={};this.storeOptions={pagesize:15,include:[],select:["Id"],orderby:""};this.preFilters=[];this.query={};this.config={};this.fields=[];this.structure=[];this.grid=[];this.sdataStore=[];},postMixInProperties:function(){var _660,i,_661,_662;this._initialized=false;_65b.mixin(this,dojo.i18n.getLocalization("Sage.UI","SDataLookup"));if(typeof this.displayMode==="string"){this.displayMode=this.displayModes[this.displayMode];}if(this.structure&&this.structure[0]&&this.structure[0].cells){_660=this.structure[0].cells;for(i=0;i<_660.length;i++){if(_660[i]&&_660[i].type&&(typeof _660[i].type==="string")){switch(_660[i].type){case "Sage.UI.Columns.DateTime":_660[i].type=_656;break;case "Sage.UI.Columns.Phone":_660[i].type=_657;break;case "Sage.UI.Columns.PickList":_660[i].type=_658;break;default:delete _660[i].type;break;}}}}_661={pagesize:15,include:[],orderby:"",select:["Id"]};if(this.displayMode===0){this.initSDataStore();this.buildSDataStoreQueryConditions();}else{if(typeof this.gridOptions.contextualCondition==="function"){this.query={fn:this.gridOptions.contextualCondition,scope:this};}else{if(typeof this.gridOptions.contextualCondition==="object"){if(this.gridOptions.contextualCondition.fn){this.ensureValue(this.gridOptions.contextualCondition,"scope",this);this.query=this.gridOptions.contextualCondition;}}}this.buildSDataStoreQueryForSeeding();}_662={rowsPerPage:15,loadingMessage:this.loadingText,noDataMessage:this.noDataText,query:this.query};this._originalQueryConditions=this.query.conditions;this.storeOptions=_654.extend(true,_661,this.storeOptions);this.gridOptions=_654.extend(false,_662,this.gridOptions);this.widgetTemplate=new Simplate(this.setTemplate(this.displayMode));},setTemplate:function(mode){var _663=["<div id=\"{%= $.id %}\" style=\"width:inherit;\" > ","<select style=\"width:inherit;\"  id=\"{%= $.id %}_select\" searchAttr=\"{%= $.field %}\" labelAttr=\"{%= $.field %}\" "," dojoAttachPoint=\"focusNode\" autoComplete=\"true\" required=\"{%= $.required %}\" data-dojo-type=\"Sage.UI.ComboBox\" value=\"{%= $.setSelectedValue() %}\" "," store=\"dijit.byId('{%= $.id %}').sdataStore\" name=\"{%= $.field %}\">","</select>","</div>"],_664=["<img style=\"cursor: pointer; margin: 4px;\" "," onclick=\"dijit.byId('{%= $.id %}').showLookup();\" ","src=\"{%= $.btnIcon %}\" alt=\"{%= $.btnToolTip %}\" title=\"{%= $.btnToolTip %}\" >"];switch(mode){case 0:return _663;case 5:return _664;default:return _664;}},initDialog:function(){this.initConditionManager();this.initSDataStore();this._setQueryForLoad();this.initGrid(this.initializeLookup);},_setQueryForLoad:function(){var _665=this.conditionMgr.getConditionsAsUrlWhereString(),_666=this._originalQueryConditions,_667="",_668=[];_668.push(_665);_668.push(_666);_668=dojo.filter(_668,function(item,_669,_66a){return item&&item!=="";});_667=_668.join(" and ");if(_667){this.gridOptions.query.conditions=_667;}},_setQueryForSearch:function(){var _66b=this.conditionMgr.getConditionsAsUrlWhereString(),_66c=this._originalQueryConditions,_66d="",_66e=[];if(this.isSeeded()&&this.overrideSeedValueOnSearch===false){_66e.push(_66b);_66e.push(_66c);}else{if(this.isSeeded()){_66e.push(_66b);}else{_66e.push(_66b);_66e.push(_66c);}}_66e=dojo.filter(_66e,function(item,_66f,_670){return item&&item!=="";});_66d=_66e.join(" and ");this.gridOptions.query.conditions=_66d;},doLookup:function(){this.grid.destroy(false);this._setQueryForSearch();this.initGrid(true);},setSelectedValue:function(){var _671=(this.value!==null)?this.value:"",_672,_673,i;if(this.returnObject&&this.value!==null){_672=this.field.split(".");_673=this.value;for(i=0;i<_672.length;i++){if(_673){_673=_673[_672[i]];}}_671=_673;}return _671;},getGridSelections:function(){var _674=this.grid.selection.getSelected();if(_674.length<=0&&this.grid._by_idx.length===1){_674.push(this.grid._by_idx[0].item);}if(_674.length===0){return;}this.doSelected(_674);this.grid.selection.deselectAll();},initConditionManager:function(){var _675,cols,_676,_677,_678,_679,_67a,i,cell,opts,self,_67b,_67c,_67d,op,_67e,_67f,_680;if(this.conditionMgr){return;}_675=function(_681,_682,_683,_684,_685,list){var i;for(i=0;i<list.length;i++){if(_681===list[i].fieldname){return;}}list.push({fieldName:_681,displayName:_682,propertyType:_683,pickListName:_684,pickListStorageMode:_685});};cols=this.structure[0];_676=this.fields;for(i=0;i<cols.cells.length;i++){if(cols.cells[i].excludeFromFilters!==true){if(cols.cells[i].field){cell=cols.cells[i];_677=cell.field;_679=cell.propertyType;_678=cell.displayField||cell.name;_67a=cell.pickListName;_680=cell.pickListStorageMode;_675(_677,_678,_679,_67a,_680,_676);}}}opts={fields:_676,fieldNameProperty:"fieldName",fieldDisplayNameProperty:"displayName",fieldTypeProperty:"propertyType",id:this.id+"-ConditionManager"};this.conditionMgr=new _653(opts);self=this;this._addCondHandle=dojo.subscribe("onAddLookupCondition",self,function(mgr){this._increaseDialogHeight();});this._removeCondHandle=dojo.subscribe("onRemoveLookupCondition",self,function(mgr){this._decreaseDialogHeight();});if(this.preFilters.length>0){this.conditionMgr.setFirstConditionValue("","=","");}for(_67b=0;_67b<this.preFilters.length;_67b++){_67c=this.preFilters[_67b];_67d=_67c.propertyName.trim();op=_67c.conditionOperator.trim();_67e=_67c.filterValue.trim();_67f=_67c.visible;this.conditionMgr.addCondition(_67d,op,_67e,_67f);if(_67f){this._increaseDialogHeight();}}dojo.place(this.conditionMgr.domNode,dojo.byId(this.id+"-Condition-container"),"only");this._doSearchConnection=dojo.connect(this.conditionMgr,"onDoSearch",this,"doLookup");},_increaseDialogHeight:function(){if(this.dialogHeight){this.dialogHeight+=30;dojo.style([this.id,"-Dialog"].join(""),"height",this.dialogHeight+"px");}},_decreaseDialogHeight:function(){if(this.dialogHeight){this.dialogHeight-=30;dojo.style([this.id,"-Dialog"].join(""),"height",this.dialogHeight+"px");}},onDoubleClick:function(_686){this.getGridSelections();if(this.lookupDialog){}},initGrid:function(_687){var _688=dijit.byId([this.id,"-Grid"].join(""));if(!_688){this.gridOptions.store=this.sdataStore;this.gridOptions.structure=this.structure;this.gridOptions.id=[this.id,"-Grid"].join("");this.grid=new _64e(this.gridOptions);this.grid.canSort=function(_689){var cols=this.structure[0];return cols.cells[Math.abs(_689)-1].sortable;};dojo.connect(this.grid,"onDblClick",this,this.onDoubleClick);dojo.place(this.grid.domNode,[this.id,"-Grid-container"].join(""),"only");if(_687){this.grid.startup();}else{this.grid.query.conditions="Id like '_hack_'";this.grid.startup();}}else{if(this.query.conditions!==_688.query.conditions){_688.destroy();this.initGrid(_687);}else{this.grid=_688;}}},resetGrid:function(){var _68a=dijit.byId([this.id,"-Grid"].join(""));if(_68a){_68a.destroy();}},initSDataStore:function(){var cols=this.structure[0],sel=this.storeOptions.select||[],inc=this.storeOptions.include||[],_68b,i,_68c,_68d,p;for(i=0;i<cols.cells.length;i++){if(cols.cells[i].field){_68b=cols.cells[i].field;if(cols.cells[i].displayField){_68b=_68b+"."+cols.cells[i].displayField;}_654.addToListUnique(_68b.replace(/\./g,"/"),sel);if(cols.cells[i].field.indexOf(".")>0){_68c=cols.cells[i].field.split(".");_68d="";for(p=0;p<_68c.length-1;p++){_68d+=_68c[p];_654.addToListUnique(_68d,inc);_68d+="/";}}}}this.storeOptions.include=inc;this.storeOptions.select=sel;this.sdataStore=new _652(this.storeOptions);},isSeeded:function(){var _68e=(this.seedValue&&this.seedValue!==""&&this.seedProperty!=="");return _68e;},buildSDataStoreQueryForSeeding:function(){var _68f,_690,_691;if(this.isSeeded()){_690=dojo.string.substitute("${0} eq \"${1}\"",[this.seedProperty,this.seedValue]);_691=this.query.conditions;if(_691&&_691!==""){_68f=_691+" and "+_690;}else{_68f=_690;}this.sdataStore.query={conditions:_68f};this.query.conditions=_68f;}},buildSDataStoreQueryConditions:function(){var _692;if(this.seedOnRowEntity){this.sdataStore.directQuery=dojo.string.substitute("Id eq \"${0}\"",[this.rowEntityId]);}if(this.seedOnRelatedEntity!==""){this.sdataStore.directQuery={conditions:dojo.string.substitute(" ${0}.Id eq \"${1}\" ",[this.seedOnRelatedEntity,this.relatedEntityId])};}if(typeof this.gridOptions.contextualCondition==="function"){_692={fn:this.gridOptions.contextualCondition,scope:this};this.sdataStore.directQuery=_654.extend(true,this.sdataStore.directQuery,_692);}},render:function(){dojo.place(this.domNode,this.renderTo);},canShowLookup:function(){if(typeof this.gridOptions.contextualShow==="function"){return this.gridOptions.contextualShow();}return {result:true,reason:""};},showLookup:function(){var _693="The lookup cannot be displayed because one or more conditions have not been met.",_694=this.canShowLookup(),self=this,_695,_696,_697="";if(typeof _694!=="object"){Sage.UI.Dialogs.showError("The call to the function canShowLookup() returned an invalid result.");return;}if(typeof _694.result==="boolean"&&_694.result){_695=(self.dialogHeight>0)?self.dialogHeight:450;_696=(self.dialogWidth>0)?self.dialogWidth:700;self.lookupDialog=dijit.byId([self.id,"-Dialog"].join(""));if(!self.lookupDialog){self.lookupDialog=new _64f({title:self.dialogTitle,id:[self.id,"-Dialog"].join(""),style:["height:",_695,"px;width:",_696,"px;"].join(""),refreshOnShow:false,_onKey:this._onKey});self.dialogHeight=_695;self.dialogWidth=_696;if(self.isModal){_697=self.cancelText;}else{_697=self.closeText;}self.lookupDialog.set("content",self.dialogContent.apply({hideText:_697,dialogButtonText:self.dialogButtonText,id:self.id,gridHeight:_695-150}));_65b.mixin(self.lookupDialog,new _65a());self.lookupDialog.createHelpIconByTopic("findlookup");}else{self.dialogHeight=_695;dojo.style([self.id,"-Dialog"].join(""),"height",_695+"px");}self.lookupDialog.show();if(!this.isModal){dojo.destroy([self.id,"-Dialog_underlay"].join(""));}dojo.style([self.id,"-Dialog"].join(""),"top","60px");dojo.style([self.id,"-Dialog"].join(""),"left","300px");self.initDialog();}else{if(typeof _694.reason==="string"&&_694.reason.length!==0){_693=_694.reason;}Sage.UI.Dialogs.showError(_693);}},doSelected:function(_698){},_onKey:function(evt){var self=this,args=arguments;dojo.query("*",this.domNode).forEach(function(node,_699,arr){if(node===evt.target){self.inherited(args);}});},destroy:function(){var _69a=dijit.byId([this.id,"-Dialog"].join(""));if(this.btnIcon){dojo.destroy(this.btnIcon);}dojo.disconnect(this._doSearchConnection);dojo.unsubscribe(this._addCondHandle);dojo.unsubscribe(this._removeCondHandle);if(this.conditionMgr){this.conditionMgr.destroy(false);}if(_69a){_69a.uninitialize();}this.inherited(arguments);}});return _65f;});},"Sage/UI/ComboBox":function(){define(["dijit/form/ComboBox","dojo/currency","dojo/_base/declare"],function(_69b,_69c,_69d){var _69e=_69d("Sage.UI.ComboBox",[_69b],{_hClickBody:false,maxHeight:dojo.isIE?160:170,shouldPublishMarkDirty:true,autoPostBack:false,_onKeyPress:function(e){dojo.stopEvent(e);},postCreate:function(){this.connect(this,"onChange",this.onChanged);this.inherited(arguments);},onChanged:function(e){if(this.shouldPublishMarkDirty){dojo.publish("Sage/events/markDirty");}if(this.autoPostBack){__doPostBack(this.id,"");}}});return _69e;});},"Sage/UI/ConditionManager":function(){define(["Sage/_Templated","dijit/_Widget","dijit/form/Select","dijit/form/Button","Sage/UI/ImageButton","Sage/UI/SearchConditionWidget","Sage/Utility","dojo/i18n!./nls/ConditionManager","dojo/_base/declare"],function(_69f,_6a0,_6a1,_6a2,_6a3,_6a4,util,nls,_6a5){var _6a6=_6a5("Sage.UI.ConditionManager",[_6a0,_69f],{widgetsInTemplate:true,srchBtnCaption:"Search",addrowlabel:"Lookup by:",hiderowlabel:"And:",hideimgurl:"images/icons/Find_Remove_16x16.gif",addimgurl:"images/icons/Find_Add_16x16.gif",hideimgalttext:"Remove Condition",addimgalttext:"Add Condition",errorOperatorRequiresValue:"The operator requires a value",operators:null,fields:null,fieldsHash:null,fieldNameProperty:"fieldname",fieldDisplayNameProperty:"displayname",fieldTypeProperty:"propertyType",fieldPickListNameProperty:"pickListName",conditionWidgets:null,widgetConnects:null,widgetTemplate:new Simplate(["<div id=\"{%= $.id %}\" class=\"lookup-condition-manager\">","<table cellspacing=\"0\" cellpadding=\"3\">","<tr><td><div dojoAttachPoint=\"conditions\"></div></td></tr>","</table>","<div class=\"lookup-condition-actions\">","<button id=\"{%= $.id %}-Search\" data-dojo-type=\"dijit.form.Button\" type=\"button\" dojoAttachPoint=\"searchButton\" dojoAttachEvent=\"onClick:_doSearch\">{%= $.srchBtnCaption %}</button>","</div>","</div>"]),isSettingValues:false,id:"",constructor:function(){this.conditionWidgets={};this.operators={};this.fieldsHash={};this.fields=[];this.widgetConnects=[];},destroy:function(){var wid,i;for(i=0;i<this.widgetConnects.length;i++){dojo.disconnect(this.widgetConnects[i]);}for(wid in this.conditionWidgets){if(this.conditionWidgets.hasOwnProperty(wid)){if(this.conditionWidgets[wid].destroy){this.conditionWidgets[wid].destroy();}}}this.inherited(arguments);},postMixInProperties:function(){dojo.mixin(this,nls);this.inherited(arguments);},getOperatorsByField:function(_6a7){var _6a8,_6a9,_6aa,_6ab,_6ac;_6a8=[{value:"eq",label:this.equalTo,selected:false,disabled:false},{value:"ne",label:this.notEqualTo,selected:false,diabled:false}];_6a9=[{value:"sw",label:this.startingWith,selected:false,disabled:false},{value:"like",label:this.contains,selected:false,diabled:false},{value:"eq",label:this.equalTo,selected:false,diabled:false},{value:"ne",label:this.notEqualTo,selected:false,diabled:false},{value:"le",label:this.equalOrLessThan,selected:false,diabled:false},{value:"ge",label:this.equalOrGreaterThan,selected:false,diabled:false},{value:"lt",label:this.lessThan,selected:false,diabled:false},{value:"gt",label:this.greaterThan,selected:false,diabled:false}];_6aa=[{value:"eq",label:this.equalTo,selected:false,diabled:false},{value:"ne",label:this.notEqualTo,selected:false,diabled:false},{value:"le",label:this.equalOrLessThan,selected:false,diabled:false},{value:"ge",label:this.equalOrGreaterThan,selected:false,diabled:false},{value:"lt",label:this.lessThan,selected:false,diabled:false},{value:"gt",label:this.greaterThan,selected:false,diabled:false}];_6ab=[{value:"eq",label:this.equalTo,selected:false,diabled:false},{value:"ne",label:this.notEqualTo,selected:false,diabled:false}];_6ac={"System.Boolean":{options:_6a8},"Boolean":{options:_6a8},"System.String":{options:_6a9},"SalesLogix.PickList":{options:_6ab},"Sage.Entity.Interfaces.UserType":{options:_6aa},"Sage.Entity.Interfaces.OwnerType":{options:_6aa},"System.DateTime":{options:_6aa},"DateTime":{options:_6aa},"Phone":{options:_6a9},"User":{options:_6a9},"Owner":{options:_6a9},"System.Double":{options:_6aa},"System.Int32":{options:_6aa},"System.Int16":{options:_6aa},"System.Decimal":{options:_6aa},"Fixed":{options:_6aa},"Decimal":{options:_6aa},"Integer":{options:_6aa},"Positive Integer":{options:_6aa},"Currency":{options:_6aa},"Percent":{options:_6aa},"defaultOperators":{options:_6a9},"None":{options:_6a9}};if((_6a7.hasOwnProperty(this.fieldTypeProperty))&&(_6ac.hasOwnProperty(_6a7[this.fieldTypeProperty]))){return _6ac[_6a7[this.fieldTypeProperty]].options;}return _6ac.defaultOperators&&_6ac.defaultOperators.options;},getConditionsAsUrlWhereString:function(){var _6ad=this.getConditions(),_6ae=[],_6af=null,i,_6b0,lhd,rhd,lhs,rhs,_6b1;for(i=0;i<_6ad.length;i++){_6af=_6ad[i].val;if(typeof _6af==="string"){if(_6ad[i].operator==="like"||_6ad[i].operator==="sw"){var _6b2=new RegExp("[%]|\\[|[*]|[_]","g");_6af=_6af.replace(_6b2,"[$&]");}var _6b3=new RegExp("[\"]|[']","g");_6af=_6af.replace(_6b3,"$&$&");}if(_6af.constructor===Date){if(_6ad[i].operator==="eq"||_6ad[i].operator==="ne"){lhd=_6af;rhd=_6af;lhd.setHours(0);lhd.setMinutes(0);lhd.setSeconds(0);lhs=util.Convert.toIsoStringFromDate(lhd);rhd.setHours(23);rhd.setMinutes(59);rhd.setSeconds(59);rhs=util.Convert.toIsoStringFromDate(rhd);_6b1={field:_6ad[i].fieldname,leftOp:"gt",leftVal:lhs,rightOp:"lt",rightVal:rhs,join:"and"};if(_6ad[i].operator==="ne"){_6b1.leftOp="lt";_6b1.rightOp="gt";_6b1.join="or";}_6ae.push(dojo.string.substitute("(${field} ${leftOp} '${leftVal}' ${join} ${field} ${rightOp} '${rightVal}')",_6b1));continue;}else{if(_6ad[i].operator==="le"||_6ad[i].operator==="gt"){_6af.setHours(23);_6af.setMinutes(59);_6af.setSeconds(59);}else{if(_6ad[i].operator==="ge"||_6ad[i].operator==="lt"){_6af.setHours(0);_6af.setMinutes(0);_6af.setSeconds(0);}}}_6af=util.Convert.toIsoStringFromDate(_6af);}_6b0={field:_6ad[i].fieldname,op:_6ad[i].operator,val:_6af};var fld=this.getField(_6ad[i].fieldname);if(fld&&fld.propertyType==="SalesLogix.PickList"){if(typeof _6af==="object"&&_6af[0]){_6b0.val=_6af[0];}}if(_6b0.op==="like"){_6b0.val=["%",_6b0.val,"%"].join("");}else{if(_6b0.op==="sw"){_6b0.op="like";_6b0.val+="%";}}if(typeof _6b0.val==="string"){_6b0.val=["\"",_6b0.val.toUpperCase(),"\""].join("");_6b0.field=["upper(",_6b0.field,")"].join("");}_6ae.push([_6b0.field," ",_6b0.op," ",_6b0.val].join(""));}return _6ae.join(" and ");},getField:function(_6b4){if(this.fieldsHash&&this.fieldsHash.hasOwnProperty(_6b4)){return this.fieldsHash[_6b4];}return false;},getConditionsJSON:function(){var i,_6b5=this.getConditions(),_6b6,_6b7,_6b8=_6b5.length;for(i=0;i<_6b8;i++){_6b7=_6b5[i];_6b6=_6b5[i].val;if(_6b6.constructor===Date){var _6b9=this.getField(_6b7.fieldname);_6b6=(_6b9.dateTimeType==="D")?util.Convert.toIsoStringFromDateNonUTC(_6b6):util.Convert.toIsoStringFromDate(_6b6);}_6b5[i].val=_6b6;}return Sys.Serialization.JavaScriptSerializer.serialize(_6b5);},getConditions:function(){var _6ba=[],wid,c;for(wid in this.conditionWidgets){if(this.conditionWidgets.hasOwnProperty(wid)){if(this.conditionWidgets[wid].getCondition){c=this.conditionWidgets[wid].getCondition();if(c){if(c.fieldname==="$key"){c.fieldname="id";}_6ba.push(c);}}}}return _6ba;},resetConditions:function(){var wid,i;for(i=0;i<this.widgetConnects.length;i++){dojo.disconnect(this.widgetConnects[i]);}for(wid in this.conditionWidgets){if(this.conditionWidgets.hasOwnProperty(wid)){if(this.conditionWidgets[wid].getCondition){this._removeCondition(this.conditionWidgets[wid]);}}}this._setInitialCondition();},_doSearch:function(){this.onDoSearch(this.getConditions());},_setFieldsAttr:function(_6bb){var i;this.fields=_6bb;this.fieldsHash={};for(i=0;i<_6bb.length;i++){this.fieldsHash[_6bb[i][this.fieldNameProperty]]=_6bb[i];}this.resetConditions();},setFirstConditionValue:function(_6bc,op,_6bd){var prop,wid;for(prop in this.conditionWidgets){if(this.conditionWidgets.hasOwnProperty(prop)){wid=this.conditionWidgets[prop];if(wid.isFirstCondition){wid.defaultOperator=op;wid.defaultField=_6bc;wid.defaultValue=_6bd;wid.refreshDefaults();}}}},addCondition:function(_6be,op,_6bf,_6c0){var _6c1=this._conditionCount(),_6c2=new _6a4({conditionManager:this,label:this.hiderowlabel,isFirstCondition:false,defaultField:_6be,defaultOperator:op,defaultValue:_6bf,id:this.id+"-SearchCondition"+_6c1,visible:_6c0});this.widgetConnects.push(dojo.connect(_6c2,"onRemoveLookupCondition",this,"_removeCondition"));dojo.place(_6c2.domNode,this.conditions);_6c2.startup();this.conditionWidgets[_6c2.id]=_6c2;},_setInitialCondition:function(){var self=this,wid=new _6a4({conditionManager:self,label:self.addrowlabel,isFirstCondition:true,id:self.id+"-SearchCondition0",visible:true});this.widgetConnects.push(dojo.connect(wid,"onAddLookupCondition",self,"_addCondition"));self.conditionWidgets[wid.id]=wid;dojo.place(wid.domNode,self.conditions);wid.startup();},_addCondition:function(){var _6c3=this._conditionCount(),_6c4=new _6a4({conditionManager:this,label:this.hiderowlabel,isFirstCondition:false,id:this.id+"-SearchCondition"+_6c3,visible:true});this.widgetConnects.push(dojo.connect(_6c4,"onRemoveLookupCondition",this,"_removeCondition"));this.conditionWidgets[_6c4.id]=_6c4;dojo.place(_6c4.domNode,this.conditions);_6c4.startup();},_removeCondition:function(_6c5){var id=_6c5.id;_6c5.destroyRecursive();delete (this.conditionWidgets[id]);},_conditionCount:function(){var _6c6=0,wid;for(wid in this.conditionWidgets){if(this.conditionWidgets.hasOwnProperty(wid)){_6c6+=1;}}return _6c6;},onDoSearch:function(args){}});return _6a6;});},"Sage/UI/ImageButton":function(){define(["dijit/form/Button","dijit/_Widget","dojo/text","dojo/dom-style","dojo/_base/declare","dojo/text!../templates/ImageButton.html"],function(_6c7,_6c8,text,_6c9,_6ca,_6cb){var _6cc=_6ca("Sage.UI.ImageButton",_6c7,{hoverText:"",templateString:_6cb,iconClass:"",_setIconClassAttr:{node:"iconNode",type:"class"},label:"",_setLabelAttr:{node:"containerNode",type:"innerHTML"},icon:"",_setIconAttr:{node:"iconNode",type:"attribute",attribute:"src"},imageClass:"",iconStyle:"",_setIconStyleAttr:{node:"iconNode",type:"style"},tooltip:"",_setTooltipAttr:{node:"titleNode",type:"attribute",attribute:"title"},alt:"",_setAltAttr:{node:"valueNode",type:"attribute",attribute:"title"},postMixInProperties:function(){if(this.hasImageClass()&&this.hasIcon()){this.icon=this._blankGif;}else{this.icon=this.icon||this._blankGif;}this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(this.hasImageClass()){this.set("icon",this._blankGif);_6c9.set(this.iconNode,"display","none");}else{_6c9.set(this.iconNodeSprite,"display","none");}},hasImageClass:function(){if(this.imageClass&&this.imageClass!=="noIcon"){return true;}return false;},hasIcon:function(){if(this.icon&&this.icon!==this._blankGif){return true;}return false;},_onButtonClick:function(e){}});return _6cc;});},"Sage/UI/SearchConditionWidget":function(){define(["dojo/parser","dojo/i18n","dojo/_base/lang","dojo/has","dojo/_base/array","dijit/_Widget","dijit/form/Button","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/DateTextBox","Sage/_Templated","Sage/UI/ImageButton","Sage/UI/Controls/DropDownSelectPickList","Sage/UI/Controls/DropDownSelectUser","Sage/UI/Controls/Phone","dojo/i18n!./nls/SearchConditionWidget","dojo/_base/declare"],function(_6cd,i18n,lang,has,_6ce,_6cf,_6d0,_6d1,_6d2,_6d3,_6d4,_6d5,_6d6,_6d7,_6d8,_6d9,_6da,_6db){var _6dc=_6db("Sage.UI.SearchConditionWidget",[_6cf,_6d5],{widgetsInTemplate:true,isFirstCondition:false,conditionManager:false,label:"",defaultOperator:null,defaultField:null,defaultValue:null,id:"",_valueBox:null,visible:true,_loaded:false,trueText:"true",falseText:"false",networkText:"Network",remoteText:"Remote",webText:"Web",webViewerText:"Web Viewer",concurrentText:"Concurrent",retiredText:"Retired",templateText:"Template",addonText:"Addon",adminText:"Admin",userText:"User",teamText:"Team",departmentText:"Department",systemText:"System",propertyTypeHandler:{},widgetTemplate:new Simplate(["<div id=\"{%= $.id %}\" class=\"lookup-condition-row\" dojoAttachPoint=\"_conditionRow\">","<label class=\"slxlabel lookupLabel\">","{%= $.label %}","</label>","<select id=\"{%= $.id %}_fieldName\" name=\"{%= $.id %}_fieldName\" dojoAttachPoint=\"_fieldNameSelect\" data-dojo-type=\"dijit.form.Select\" style=\"width:150px\">","{% for (var i=0; i < $.conditionManager.fields.length;i++) { %}","<option id=\"{%= $.id %}_fieldOption{%= i %}\" value=\"{%= $.conditionManager.fields[i][$.conditionManager.fieldNameProperty] %}\">{%= $.conditionManager.fields[i][$.conditionManager.fieldDisplayNameProperty] %}</option>","{% } %}","</select>","<select id=\"{%= $.id %}_operators\" name=\"{%= $.id %}_operators\" dojoAttachPoint=\"_operatorSelect\" data-dojo-type=\"dijit.form.Select\" style=\"width:130px\">","</select>","<div style=\"display: inline;\" class=\"searchConditionInput\" dojoAttachPoint=\"_inputWidgetPlaceHolder\"></div>","<div class=\"conditionButton\">","{% if ( $.isFirstCondition ) { %}","<div id=\"{%= $.id %}-AddImageButton\" data-dojo-type=\"Sage.UI.ImageButton\" icon=\"{%= $.conditionManager.addimgurl %}\" tooltip=\"{%= $.conditionManager.addimgalttext %}\" dojoAttachPoint=\"_addConditionButton\" dojoAttachEvent=\"onClick:_addLookupCondition\"></div>","{% } else { %}","<div id=\"{%= $.id %}-RemoveImageButton\" data-dojo-type=\"Sage.UI.ImageButton\" icon=\"{%= $.conditionManager.hideimgurl %}\" tooltip=\"{%= $.conditionManager.hideimgalttext %}\" dojoAttachPoint=\"_removeConditionButton\" dojoAttachEvent=\"onClick:_removeLookupCondition\"></div>","{% } %}","</div>","</div>"]),constructor:function(_6dd){if(_6da){this.trueText=_6da.trueText;this.falseText=_6da.falseText;this.networkText=_6da.networkText;this.remoteText=_6da.remoteText;this.webText=_6da.webText;this.webViewerText=_6da.webViewerText;this.concurrentText=_6da.concurrentText;this.retiredText=_6da.retiredText;this.templateText=_6da.templateText;this.addonText=_6da.addonText;this.adminText=_6da.adminText;this.userText=_6da.userText;this.teamText=_6da.teamText;this.departmentText=_6da.departmentText;this.systemText=_6da.systemText;}this.registerTypeHandlers();},registerTypeHandlers:function(){this.propertyTypeHandler["default"]={getValue:function(){var _6de=this._valueBox.get("value");return _6de;},getTemplate:function(){return ["<input id=\"{%= $.id %}-TextValue\" data-dojo-type=\"dijit.form.TextBox\" dojoAttachPoint=\"_valueBox\" />"];}};this.propertyTypeHandler["System.Boolean"]={getValue:function(){var _6df;if(this._valueBox.value==="true"){_6df=true;}else{_6df=false;}return _6df;},getTemplate:function(){return ["<select id=\"{%= $.id %}-SelectValue\" class=\"dijitDropDown\" data-dojo-type=\"dijit.form.Select\" dojoAttachPoint=\"_valueBox\">","<option id=\"{%= $.id %}-BooleanOptionTrue\" value=\"true\">{%= $.trueText %}</option>","<option id=\"{%= $.id %}-BooleanOptionFalse\" value=\"false\">{%= $.falseText %}</option>","</select>"];}};this.propertyTypeHandler["Boolean"]={getValue:function(){var _6e0;if(this._valueBox.value==="true"){_6e0="T";}else{_6e0="F";}return _6e0;},getTemplate:function(){return lang.hitch(this,this.propertyTypeHandler["System.Boolean"].getTemplate)();}};this.propertyTypeHandler["SalesLogix.PickList"]={getValue:function(){return lang.hitch(this,this.propertyTypeHandler["default"].getValue)();},getTemplate:function(){return ["<select id=\"{%= $.id %}-PickValue\" class=\"dijitDropDown\" ","data-dojo-type=\"Sage.UI.Controls.DropDownSelectPickList\" ","dojoAttachPoint=\"_valueBox\" ","pickListName=\"{%= $.pickListName %}\" ","storeMode=\"{%= $.pickListStorageMode %}\" ","style=\"display: inline-block\"","/>"];}};this.propertyTypeHandler["System.DateTime"]={getValue:function(){var _6e1=this._valueBox.value;return isNaN(Date.parse(_6e1))?null:_6e1;},getTemplate:function(){return ["<input data-dojo-type=\"dijit.form.DateTextBox\" id=\"{%= $.id %}-Date\" dojoAttachPoint=\"_valueBox\"","/>"];}};this.propertyTypeHandler["DateTime"]=this.propertyTypeHandler["System.DateTime"];this.propertyTypeHandler["Fixed"]={getValue:function(){var _6e2=this._valueBox.get("value");return _6e2;},getTemplate:function(){return ["<input id=\"{%= $.id %}-NumericValue\" data-dojo-type=\"dijit.form.NumberTextBox\" data-dojo-attach-point=\"_valueBox\" constraints=\"{ type: 'decimal' }\" value=\"0\" name=\"{%= $.id %}-NumberValue\" />"];}};this.propertyTypeHandler["Integer"]=this.propertyTypeHandler["Fixed"];this.propertyTypeHandler["Positive Integer"]=this.propertyTypeHandler["Fixed"];this.propertyTypeHandler["Percent"]=this.propertyTypeHandler["Fixed"];this.propertyTypeHandler["Currency"]=this.propertyTypeHandler["Fixed"];this.propertyTypeHandler["System.Int32"]=this.propertyTypeHandler["Fixed"];this.propertyTypeHandler["System.Double"]=this.propertyTypeHandler["Fixed"];this.propertyTypeHandler["System.Decimal"]=this.propertyTypeHandler["Fixed"];this.propertyTypeHandler["System.Int16"]=this.propertyTypeHandler["Fixed"];this.propertyTypeHandler["Phone"]={getValue:function(){var _6e3=this._valueBox.get("unformattedValue");return _6e3;},getTemplate:function(){return ["<input id=\"{%= $.id %}-PhoneValue\" data-dojo-type=\"Sage.UI.Controls.Phone\" shouldPublishMarkDirty=\"false\" dojoAttachPoint=\"_valueBox\" />"];}};this.propertyTypeHandler["User"]={getValue:function(){var _6e4=this._valueBox.get("value");return _6e4;},getTemplate:function(){return ["<select id=\"{%= $.id %}-UserValue\" ","data-dojo-type=\"Sage.UI.Controls.DropDownSelectUser\" ","dojoAttachPoint=\"_valueBox\" ","style=\"display: inline-block;\" ","></select>"];}};this.propertyTypeHandler["Sage.Entity.Interfaces.UserType"]={getValue:function(){var _6e5=parseInt(this._valueBox.get("value"),10);return _6e5;},getTemplate:function(){return ["<select id=\"{%= $.id %}-UserTypeValue\" class=\"dijitDropDown\" data-dojo-type=\"dijit.form.Select\" dojoAttachPoint=\"_valueBox\">","<option id=\"{%= $.id %}-UserTypeOption0\" value=\"0\">{%= $.networkText %}</option>","<option id=\"{%= $.id %}-UserTypeOption1\" value=\"1\">{%= $.remoteText %}</option>","<option id=\"{%= $.id %}-UserTypeOption2\" value=\"2\">{%= $.webText %}</option>","<option id=\"{%= $.id %}-UserTypeOption3\" value=\"3\">{%= $.webViewerText %}</option>","<option id=\"{%= $.id %}-UserTypeOption4\" value=\"4\">{%= $.concurrentText %}</option>","<option id=\"{%= $.id %}-UserTypeOption5\" value=\"5\">{%= $.retiredText %}</option>","<option id=\"{%= $.id %}-UserTypeOption6\" value=\"6\">{%= $.templateText %}</option>","<option id=\"{%= $.id %}-UserTypeOption7\" value=\"7\">{%= $.addonText %}</option>","<option id=\"{%= $.id %}-UserTypeOption8\" value=\"8\">{%= $.adminText %}</option>","</select>"];}};this.propertyTypeHandler["Sage.Entity.Interfaces.OwnerType"]={getValue:function(){var _6e6=parseInt(this._valueBox.get("value"),10);return _6e6;},getTemplate:function(){return ["<select id=\"{%= $.id %}-OwnerTypeValue\" class=\"dijitDropDown\" data-dojo-type=\"dijit.form.Select\" dojoAttachPoint=\"_valueBox\">","<option id=\"{%= $.id %}-OwnerTypeOption0\" value=\"1\">{%= $.userText %}</option>","<option id=\"{%= $.id %}-OwnerTypeOption1\" value=\"2\">{%= $.teamText %}</option>","<option id=\"{%= $.id %}-OwnerTypeOption2\" value=\"3\">{%= $.departmentText %}</option>","<option id=\"{%= $.id %}-OwnerTypeOption3\" value=\"0\">{%= $.systemText %}</option>","</select>"];}};this.propertyTypeHandler["Owner"]=this.propertyTypeHandler["default"];this.propertyTypeHandler["None"]=this.propertyTypeHandler["default"];this.propertyTypeHandler["System.String"]=this.propertyTypeHandler["default"];this.propertyTypeHandler["defaultOperators"]=this.propertyTypeHandler["default"];},postCreate:function(){this.refreshDefaults();if(!this.visible){dojo.style(this._conditionRow,"display","none");}this._fieldNameSelect.on("change",lang.hitch(this,this._fieldChanged));this.inherited(arguments);},getCondition:function(){var _6e7=false;if(this.isValidCondition()){_6e7={fieldname:this._fieldNameSelect.get("value"),operator:this._operatorSelect.get("value"),val:this._getFieldValue()};}return _6e7;},isValidCondition:function(){var val=this._getFieldValue(),_6e8=false;if(typeof val==="string"){_6e8=(val.trim()!=="");}else{_6e8=(val!==null&&val!==undefined);}return _6e8;},_getFieldValue:function(){var _6e9=this._fieldNameSelect.get("value"),_6ea=this._operatorSelect.get("value"),_6eb=this._getField(_6e9),_6ec,_6ed,_6ee;if(_6eb){_6ed=this._getFieldPropertyTypeValue(_6eb);_6ee=this.propertyTypeHandler[_6ed];if(typeof _6ee==="undefined"){_6ee=this.propertyTypeHandler["default"];}_6ec=lang.hitch(this,_6ee.getValue)();}return _6ec;},_renderFieldTemplates:function(){var _6ef,_6f0,_6f1,_6f2,val=this._fieldNameSelect.get("value"),_6f3=this._getField(val),_6f4,temp,_6f5;if(_6f3){_6f4=this._getFieldPropertyTypeValue(_6f3);_6f5=this.propertyTypeHandler[_6f4];if(typeof _6f5==="undefined"){_6f5=this.propertyTypeHandler["default"];}_6f0=lang.hitch(this,_6f5.getTemplate)();_6f1=new Simplate(_6f0);temp={};dojo.mixin(temp,this);dojo.mixin(temp,{pickListName:_6f3.pickListName});dojo.mixin(temp,{pickListStorageMode:_6f3.pickListStorageMode});_6f2=_6f1.apply(temp);if(_6f2){dojo.forEach(dijit.findWidgets(this._inputWidgetPlaceHolder),function(wid){wid.destroy();},this);this._inputWidgetPlaceHolder.innerHTML="";dojo.place(_6f2,this._inputWidgetPlaceHolder);_6cd.parse(this._inputWidgetPlaceHolder);dojo.forEach(dijit.findWidgets(this._inputWidgetPlaceHolder),function(wid){wid.startup();this._valueBox=wid;dojo.connect(this._valueBox,"onKeyDown",this,"_onKeyDown");},this);}}},uninitialize:function(){if(this._inputWidgetPlaceHolder){dojo.forEach(dijit.findWidgets(this._inputWidgetPlaceHolder),function(wid){wid.destroy();},this);}this.inherited(arguments);},_fieldChanged:function(_6f6){var val=this._fieldNameSelect.get("value"),_6f7=this._getField(val),_6f8,_6f9,len,i;if(_6f7){this._renderFieldTemplates();_6f8=this.conditionManager.getOperatorsByField(_6f7);if(_6f8){_6f9=this._operatorSelect;len=_6f9.options.length;for(i=len-1;i>=0;i--){_6f9.removeOption(i);}for(i=0;i<_6f8.length;i++){_6f8[i].selected=false;}_6f9.addOption(_6f8);}this._setToDefaultOperator();this._setToDefaultValue();}},_onKeyDown:function(_6fa){if(_6fa.keyCode===13){var _6fb=this._fieldNameSelect.get("value");var _6fc=this._getField(_6fb);if(_6fc&&_6fc.format&&_6fc.format==="Phone"){this._valueBox.onChange(this._valueBox.displayedValue);}this.conditionManager._doSearch();}},_getField:function(_6fd){if(this.conditionManager.fieldsHash.hasOwnProperty(_6fd)){return this.conditionManager.fieldsHash[_6fd];}return false;},_getFieldPropertyTypeValue:function(_6fe){if(_6fe&&_6fe.hasOwnProperty(this.conditionManager.fieldTypeProperty)){return _6fe[this.conditionManager.fieldTypeProperty];}return null;},_addLookupCondition:function(){this.onAddLookupCondition();dojo.publish("onAddLookupCondition",this);},onAddLookupCondition:function(){},_removeLookupCondition:function(){this.onRemoveLookupCondition(this);dojo.publish("onRemoveLookupCondition",this);},onRemoveLookupCondition:function(_6ff){},_setToDefaultValue:function(){if(!this._isOnDefaultField()){return;}if(this.defaultValue){this._valueBox.set("value",this.defaultValue);}},_setToDefaultField:function(){var i,_700;if(this.defaultField){_700=this._fieldNameSelect.getOptions();for(i=0;i<_700.length;i++){if(_700[i].value===this.defaultField){this._fieldNameSelect.set("value",_700[i].value);break;}}}},_setToDefaultOperator:function(){var _701,j;if(!this._isOnDefaultField()){return;}if(this.defaultOperator&&typeof this.defaultOperator==="string"){_701=this._operatorSelect.getOptions();for(j=0;j<_701.length;j++){if(_701[j].label===this.defaultOperator||_701[j].value===this.defaultOperator){this._operatorSelect.set("value",_701[j].value);break;}}}},_isOnDefaultField:function(){var _702=false,_703;if(this.defaultField){_703=this._fieldNameSelect.get("value");_702=(_703===this.defaultField);}else{_702=true;}return _702;},refreshDefaults:function(){this._setToDefaultField();this._fieldChanged();}});return _6dc;});},"Sage/UI/Controls/DropDownSelectPickList":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","dijit/form/ComboBox","dojo/data/ItemFileReadStore","Sage/UI/Controls/PickList","dojo/_base/array","dojo/text!./templates/DropDownSelectPickList.html","dojo/_base/declare"],function(_704,_705,_706,_707,_708,_709,_70a,_70b,_70c){var _70d=_70c("Sage.UI.Controls.DropDownSelectPickList",[_709,_706,_704,_705],{constructor:function(_70e){if(_70e.clientId){this.id=_70e.clientId+"-DropDownSelectPickList";}this.inherited(arguments);},postCreate:function(){this.inherited(arguments);},_onChange:function(_70f){this.onChange(_70f);},_loadData:function(){var def=new dojo.Deferred();this.getPickListData(def);def.then(dojo.hitch(this,function(data){if(typeof data==="string"){this.comboBox.set("value",data);}var _710=[];for(var i=0;i<data.items.$resources.length;i++){var item=data.items.$resources[i];_710.push({id:item.$key,code:item.code,number:item.number,text:item.text});}this.storeData={identifier:"id",label:"text",items:_710};var _711=new _708({data:this.storeData});this.comboBox.set("store",_711);this.comboBox.set("searchAttr","text");}),function(e){console.error(e);});},uninitialize:function(){this.inherited(arguments);},_getValueAttr:function(){var _712=this.comboBox.get("value");if(this.storeMode==="id"){_70a.forEach(this.storeData.items,function(item){if(_712==item.text){_712=item.id;}},this);}return _712;},_setPickListNameAttr:function(){this.inherited(arguments);this._loadData();},value:"",templateString:_70b,widgetsInTemplate:true,storeData:null,lastValidValue:"",onChange:function(_713){}});return _70d;});},"Sage/UI/Controls/PickList":function(){define(["dojo/topic","dojo/_base/declare","dijit/_Widget","dijit/Tooltip","Sage/Data/BaseSDataStore","Sage/Utility","dijit/Tooltip","dojo/i18n!./nls/PickList","dojo/_base/lang","Sage/Utility/_LocalStorageMixin","Sage/Data/SDataServiceRegistry"],function(_714,_715,_716,_717,_718,util,_719,nls,lang,_71a,_71b){var _71c=_715("Sage.UI.Controls.PickList",[_716,_71a],{dataStore:null,storeOptions:null,pickListName:"",canEditText:false,itemMustExist:true,maxLength:-1,storeMode:"text",sort:true,displayMode:"AsControl",clientId:"",required:false,tabIndex:0,placeInNodeId:"",autoPostBack:false,controlTooltip:"",buttonTooltip:"",shouldPublishMarkDirty:true,renderAsHyperlink:false,_textId:"",_codeId:"",_picklistId:"",_defaultValueId:"",_defaultCodeId:"",_defaultPicklistId:"",_storageNameSpace:"PickListData",okText:"",missingPickListText:"",constructor:function(_71d){this.storeOptions=_71d.storeOptions;this.dataStore=_71d.dataStore;this.clientId=_71d.clientId||"";var cid=this.clientId;this._textId=cid+"_Text";this._codeId=cid+"_Code";this._picklistId=cid+"_PicklistId";this._defaultValueId=cid+"_DefaultValue";this._defaultCodeId=cid+"_DefaultCode";this._defaultPicklistId=cid+"_DefaultPicklistId";if(nls){this.okText=nls.okText;this.missingPickListText=nls.missingPickListText;}},postCreate:function(){var node=dojo.byId(this.placeInNodeId);if(node){this._setDefaultFields();dojo.place(this.domNode,node,"first");}this.inherited(arguments);},uninitialize:function(){this.inherited(arguments);},_setStore:function(_71e){this.storeOptions={include:["items"],select:["Id","name","allowMultiples","valueMustExist","required","alphaSorted","noneEditable","modifyDate","items/text","items/code","items/number"],resourceKind:"picklists",service:_71b.getSDataService("system",false,true,false),directQuery:{name:_71e}};this.dataStore=new _718(this.storeOptions);},_setDefaultFields:function(){if(this.required){var text=dojo.byId(this._textId);if(text&&text.value===""){var code=dojo.byId(this._codeId),_71f=dojo.byId(this._picklistId);var _720=dojo.byId(this._defaultValueId);var _721=dojo.byId(this._defaultCodeId);var _722=dojo.byId(this._defaultPicklistId);text.value=_720.value;code.value=_721.value;_71f.value=_722.value;}}},_setupTooltips:function(_723,_724){if(this.controlTooltip&&this.controlTooltip!==""&&_724){var t=new _719({connectId:[_724],label:this.controlTooltip,position:["below"]});}if(this.buttonTooltip&&this.buttonTooltip!==""&&_723){var t2=new _719({connectId:[_723],label:this.buttonTooltip,position:["below"]});}},getPickListData:function(_725){var list=this.getFromLocalStorage(this.pickListName,this._storageNameSpace);if(list){this.setPicklistAttributes(list);_725.callback(list);return;}this.dataStore.fetch({onComplete:lang.hitch(this,function(data){var _726;if(data&&data.length>0){_726=data[0];var temp=_726.items.$resources;if(this.sort&&_726.alphaSorted){_726.items.$resources=temp.sort(function(a,b){if(a.text<b.text){return -1;}if(a.text>b.text){return 1;}return 0;});}}else{_726="";}this.saveToLocalStorage(this.pickListName,_726,this._storageNameSpace);this.setPicklistAttributes(_726);_725.callback(_726);}),onError:function(e){_725.errback(e);},scope:this});},setPicklistAttributes:function(_727){if(_727.valueMustExist){this._setItemMustExistAttr(_727.valueMustExist);}},setASPNETInputs:function(_728,_729,_72a){if(this._textId&&this._codeId&&this._picklistId){var text=dojo.byId(this._textId);var code=dojo.byId(this._codeId);var id=dojo.byId(this._picklistId);if(text&&code&&id){text.value=_728;id.value=_72a;code.value=_729;this.invokeChangeEvent();}}},invokeChangeEvent:function(){if(this.shouldPublishMarkDirty){dojo.publish("Sage/events/markDirty");}if(this.autoPostBack){__doPostBack(this.clientId,"");}},_getCanEditTextAttr:function(){return this.canEditText;},_setCanEditTextAttr:function(_72b){this.canEditText=_72b;},_getItemMustExistAttr:function(){return this.itemMustExist;},_setItemMustExistAttr:function(_72c){this.itemMustExist=_72c;},_getMaxLengthAttr:function(){return this.maxLength;},_setMaxLengthAttr:function(_72d){this.maxLength=_72d;},_getStoreModeAttr:function(){return this.storeMode;},_setStoreModeAttr:function(_72e){this.storeMode=_72e;},_getPickListNameAttr:function(){return this.pickListName;},_setPickListNameAttr:function(_72f){this.pickListName=_72f;this._setStore(_72f);},statics:{}});return _71c;});},"Sage/Utility/_LocalStorageMixin":function(){define(["dojo/_base/declare","dojox/storage/LocalStorageProvider"],function(_730,_731){return _730("Sage.Utility._LocalStorageMixin",null,{localStorageProvider:null,_setLocalStorageProviderAttr:function(_732){this.localStorageProvider=_732;},_getLocalStorageProviderAttr:function(){this._ensureProvider();return this.localStorageProvider;},_ensureProvider:function(){var _733;if(!this.localStorageProvider){_733=new _731();_733.initialize();this._setLocalStorageProviderAttr(_733);}},saveToLocalStorage:function(key,_734,ns){var _735=this._getLocalStorageProviderAttr(),_736=ns,_737=key;if(!_735.isValidKey(key)){_737=this._stripBadValues(key);}if(!_735.isValidNamespace(ns)){_736=this._stripBadValues(ns);}_735.put(_737,_734,function(_738,key,_739){if(_738===_735.FAILED){console.error("Failed writing key: "+key+" in local storage. Message: "+_739);}},_736);var mod=new Date(Date.now());_735.put(_737+"_modified_at",mod,function(_73a,key,_73b){if(_73a===_735.FAILED){console.error("Failed writing key: "+key+" in local storage. Message: "+_73b);}},_736);_735.put("modified_at",mod,function(_73c,key,_73d){if(_73c===_735.FAILED){console.error("Failed writing key: "+key+" in local storage. Message: "+_73d);}},_736);},getFromLocalStorage:function(key,ns){var _73e=this._getLocalStorageProviderAttr(),_73f=ns,_740=key;if(!_73e.isValidKey(key)){_740=this._stripBadValues(key);}if(!_73e.isValidNamespace(ns)){_73f=this._stripBadValues(ns);}return _73e.get(_740,_73f);},getKeys:function(ns){var _741=this._getLocalStorageProviderAttr();return _741.getKeys(ns);},clear:function(ns){var _742=this._getLocalStorageProviderAttr();if(ns){_742.clear(ns);}else{_742.clear();}},_stripBadValues:function(key){return key.replace(/[^A-Za-z0-9]/g,"-");}});});},"Sage/UI/Controls/DropDownSelectUser":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","dijit/form/ComboBox","dojo/data/ItemFileReadStore","Sage/Data/BaseSDataStore","Sage/Data/SDataServiceRegistry","Sage/UI/ComboBox","dojo/text!./templates/DropDownSelectUser.html","dojo/_base/declare"],function(_743,_744,_745,_746,_747,_748,_749,_74a,_74b,_74c){var _74d=_74c("Sage.UI.Controls.DropDownSelectUser",[_745,_743,_744],{dataStore:null,storeOptions:null,storeData:null,templateString:_74b,widgetsInTemplate:true,constructor:function(_74e){this.storeOptions=_74e.storeOptions||{include:["UserInfo"],select:["Id","UserName","UserInfo/FirstName","UserInfo/LastName","Type"],sort:[{attribute:"UserInfo.LastName",descending:false}],service:_749.getSDataService("dynamic",false,true,true),resourceKind:"users"};this.dataStore=new _748(this.storeOptions);this.inherited(arguments);},postCreate:function(){var def=new dojo.Deferred();this.getUserData(def);def.then(dojo.hitch(this,function(data){if(!data){return;}var _74f=[];var _750=data.length;var item=null;for(var i=0;i<_750;i++){item=data[i];if(item.Type!=="Template"){_74f.push({id:item.$key,text:[item.UserInfo.FirstName,item.UserInfo.LastName].join(" ")});}}this.storeData={identifier:"id",label:"text",items:_74f};var _751=new _747({data:this.storeData});this.comboBox.set("store",_751);this.comboBox.set("searchAttr","text");}),function(e){console.error(e);});this.inherited(arguments);},getUserData:function(_752){this.dataStore.fetch({onComplete:function(data){_752.callback(data);},onError:function(e){_752.errback(e);},scope:this});},_getValueAttr:function(){return this.comboBox.get("value");}});return _74d;});},"Sage/UI/Controls/Phone":function(){define(["dijit/_Widget","Sage/_Templated","Sage/UI/Controls/TextBox","dojo/_base/declare"],function(_753,_754,_755,_756){var _757=_756("Sage.UI.Controls.Phone",_755,{slxchangehook:"true",_setslxchangehookAttr:{node:"focusNode",type:"attribute",attribute:"slxchangehook"},shouldPublishMarkDirty:true,autoPostBack:false,postCreate:function(){this.inherited(arguments);this.unformattedValue=this.unformatNumber(this.get("value"));},unformattedValue:"",formatPhoneChange:function(_758){var _759=this.formatNumberForDisplay(_758);this.unformattedValue=this.unformatNumber(_758);this.set("value",_759);},formatters:[{test:/^\+.*/,format:"{0}"},{test:/^(\d{3})(\d{3,4})$/,format:"{3}-{4}"},{test:/^(\d{3})(\d{3})(\d{2,4})$/,format:"({3}) {4}-{5}"},{test:/^(\d{3})(\d{3})(\d{2,4})([^0-9]{1,}.*)$/,format:"({3}) {4}-{5}{6}"},{test:/^(\d{11,})(.*)$/,format:"{1}"}],unformatNumber:function(_75a){var n=_75a;n=n.replace("(","");n=n.replace(")","");n=n.replace(" ","");n=n.replace("-","");return n;},formatNumberForDisplay:function(_75b,_75c){var n=_75b;if(typeof _75c==="undefined"){_75c=n;}for(var i=0;i<this.formatters.length;i++){var _75d=this.formatters[i],_75e;if((_75e=_75d.test.exec(_75c))){return String.format.apply(String,[_75d.format,n,_75c].concat(_75e));}}return n;},onChange:function(e){if(this.shouldPublishMarkDirty){dojo.publish("Sage/events/markDirty");}this.formatPhoneChange(e);}});return _757;});},"Sage/UI/Controls/TextBox":function(){define(["dijit/form/ValidationTextBox","dojo/dom-class","dojo/query","dojo/_base/declare"],function(_75f,_760,_761,_762){var _763=_762("Sage.UI.Controls.TextBox",[_75f],{maxLength:"",textWithIcons:false,shouldPublishMarkDirty:true,autoPostBack:false,hotKey:"",_setHotKeyAttr:{node:"textbox",type:"attribute",attribute:"accessKey"},slxchangehook:"true",_setslxchangehookAttr:{node:"focusNode",type:"attribute",attribute:"slxchangehook"},postCreate:function(){this.connect(this,"onChange",this.onChanged);this.inherited(arguments);},startup:function(_764){if(this.textWithIcons){var self=this;dojo.ready(function(){if(_761("#"+self.id)[0]){var _765=_761("#"+self.id)[0];_760.add(_765.parentNode,"textcontainer-with-icons");}});}this.inherited(arguments);},onChanged:function(e){if(this.shouldPublishMarkDirty){dojo.publish("Sage/events/markDirty");}if(this.autoPostBack){__doPostBack(this.id,"");}},setAttribute:function(attr,val){this.set(attr,val);}});return _763;});},"Sage/UI/Columns/DateTime":function(){define(["dojox/grid/cells/dijit","dojo/date/locale","Sage/Utility","Sage/Utility/Activity","dojo/_base/declare"],function(_766,_767,_768,_769,_76a){var _76b=_76a("Sage.UI.Columns.DateTime",dojox.grid.cells.Cell,{timelessField:"",timelessText:"",dateOnly:false,utc:true,useFiveSecondRuleToDetermineTimeless:false,format:function(_76c,_76d){var _76e=this.formattedDate(_76c,_76d);if(this.abbreviationLength){var _76f=Sage.Format.abbreviationFormatter(this.abbreviationLength);_76e=_76f(_76e);}return _76e;},formattedDate:function(_770,_771){if(!_771){return "";}var d=this.get?this.get(_770,_771):(this.value||this.defaultValue);this.dateOnly=(typeof this.dateTimeType==="undefined")?this.dateOnly:(this.dateTimeType.toUpperCase()==="D");if(!d){return "";}d=_772.toDateFromString(d,true);if(!d||d.constructor!==Date){return "";}var _773=false;if(this.timelessField&&this.timelessField!==""){_773=_772.toBoolean(_768.getValue(_771,this.timelessField,"F"));}if(this.useFiveSecondRuleToDetermineTimeless){_773=_769.isDateFiveSecondRuleTimeless(d);}if(!this.dateOnly&&!this.datePattern){if(!_773){return _767.format(d,{selector:this.formatType||"date/time",fullYear:true});}else{var _774=d;if(this.utc){_774=new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),0,0,5);}return dojo.date.locale.format(_774,{selector:"date",fullYear:true})+this.timelessText;}}else{if(this.datePattern){if(this.dateOnly){d=new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate());}return d.format(this.datePattern);}else{if(this.utc){var _775=new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate());return _767.format(_775,{selector:"date",fullYear:true});}else{return dojo.date.locale.format(d,{selector:"date",fullYear:true});}}}}});var _772=_768.Convert;return _76b;});},"Sage/UI/Columns/Phone":function(){define(["Sage/Format","Sage/UI/Controls/Phone","Sage/UI/Columns/Cell","dojo/_base/declare"],function(_776,_777,Cell,_778){var _779=_778("Sage.UI.Columns.Phone",Cell,{defaultValue:"",widgetClass:_777,getWidgetProps:function(_77a){var _77b=this._getControlId();return dojo.mixin({},this.widgetProps||{},{id:_77b,value:_77a,width:this.width,maxLength:this.maxLength,style:this.style,hotKey:this.hotKey,tabIndex:this.tabIndex,field:this.field});},formatter:_776.phone,styles:"text-align: left;",getValue:function(_77c){var _77d=this.widget.get("value");_77d=this.widget.unformatNumber(_77d);if((typeof _77d==="undefined")||(_77d==="")){_77d=this.defaultValue;}if(this.widget&&this.widget.focusNode.state==="Error"){return this.widget.focusNode._resetValue;}return _77d;}});return _779;});},"Sage/Format":function(){define(["Sage/Utility","dojo/string"],function(_77e,_77f){Sage.Format={phone:function(val,_780){if(!val){return "";}if(val.length!==10){return _77e.htmlEncode(val);}return _77f.substitute("(${0}) ${1}-${2}",[val.substring(0,3),val.substring(3,6),val.substring(6)]);},email:function(val,_781){if(!val){return "";}var _782=val;if(this.icon&&this.icon!==""){_782=(this.icon===true||this.icon==="true")?"<img src=\"images/icons/Send_Write_email_16x16.png\" />":"<img src=\""+this.icon+"\" />";}return dojo.string.substitute("<a href=\"mailto:${0}\">${1}</a>",[val,_782]);},stringFromArray:function(_783,arr){switch(arr.length){case 1:return String.format(_783,arr[0]);case 2:return String.format(_783,arr[0],arr[1]);case 3:return String.format(_783,arr[0],arr[1],arr[2]);case 4:return String.format(_783,arr[0],arr[1],arr[2],arr[3]);case 5:return String.format(_783,arr[0],arr[1],arr[2],arr[3],arr[4]);case 6:return String.format(_783,arr[0],arr[1],arr[2],arr[3],arr[4],arr[5]);case 7:return String.format(_783,arr[0],arr[1],arr[2],arr[3],arr[4],arr[5],arr[6]);case 8:return String.format(_783,arr[0],arr[1],arr[2],arr[3],arr[4],arr[5],arr[6],arr[7]);case 9:return String.format(_783,arr[0],arr[1],arr[2],arr[3],arr[4],arr[5],arr[6],arr[7],arr[8]);case 10:return String.format(_783,arr[0],arr[1],arr[2],arr[3],arr[4],arr[5],arr[6],arr[7],arr[8],arr[9]);default:return _783;}},abbreviationFormatter:function(_784){return function(_785){if(!_785||typeof (_785)!="string"||_785.length<=_784){return _785;}_785=_785.substring(0,_784);var _786=_785.lastIndexOf(" ");if(_786>0&&_786>_785.length*0.75){_785=_785.substring(0,_786);}return _785+"...";};},Address:{fullAddressFormatStrings:{"USA":"${0}\r\n${1}\r\n${2}\r\n${3}, ${4} ${5}\r\n${6}","Japan":"${0}\r\n${1}${2}\r\n${3}, ${4} ${5}\r\n${6}"},formatDefault:function(_787){var _788="",_789="",_78a="",_78b="",_78c="",_78d="",_78e="";var _78f="\r\n";for(var i=0;i<_787.length;i++){switch(_787[i].name){case "addr1":_788=(_787[i].value.length>0)?_787[i].value:"";break;case "addr2":_789=(_787[i].value.length>0)?[_78f,_787[i].value].join(""):"";break;case "addr3":_78a=(_787[i].value.length>0)?[_78f,_787[i].value].join(""):"";break;case "city":_78b=(_787[i].value.length>0)?[_78f,_787[i].value,","].join(""):"";break;case "state":var _790=(_787[i-1].value.length>0)?"":_78f;_78c=(_787[i].value.length>0)?[_790," ",_787[i].value].join(""):"";break;case "postalCode":_78d=(_787[i].value.length>0)?[" ",_787[i].value].join(""):"";break;case "country":_78e=(_787[i].value.length>0)?[_78f,_787[i].value].join(""):"";break;}}return [_788,_789,_78a,_78b,_78c,_78d,_78e].join("");},formatAddress:function(_791,_792){var _793="",_794="",_795="",city="",_796="",_797="",_798="";var _799="";for(var i=0;i<_791.length;i++){switch(_791[i].name){case "addr1":_793=_791[i].value;break;case "addr2":_794=_791[i].value;break;case "addr3":_795=_791[i].value;break;case "city":city=_791[i].value;break;case "state":_796=_791[i].value;break;case "postalCode":_797=_791[i].value;break;case "country":_798=_791[i].value;break;}}if(_792){switch(_798){case "USA":_799=this.formatDefault(_791);break;case "Japan":_799=dojo.string.substitute(this.fullAddressFormatStrings["Japan"],[_793,_794,_795,city,_796,_797,_798]);break;default:_799=this.formatDefault(_791);}}else{_799=this.formatDefault(_791);}return _799;}}};return Sage.Format;});},"Sage/UI/Columns/Cell":function(){define(["dojox/grid/cells","dojox/grid/cells/dijit","dojo/_base/declare"],function(_79a,_79b,_79c){var _79d=_79c("Sage.UI.Columns.Cell",_79a._Widget,{formatNode:function(_79e,_79f,_7a0){if(!this.widgetClass){return _79f;}var _7a1=dijit.byId(this._getControlId());if(!_7a1){this.widget=this.createWidget.apply(this,arguments);}else{this.widget=_7a1;if(_7a1.value!==_79f||this.widget.focusNode.value!==_79f){if(this.widget.focusNode.set){this.widget.focusNode.set("value",_79f);}else{this.widget.set("value",_79f);}}this.attachWidget.apply(this,arguments);}this.sizeWidget.apply(this,arguments);this.grid.views.renormalizeRow(_7a0);this.grid.scroller.rowHeightChanged(_7a0,true);this.focus();return undefined;},setCurrentItems:function(){this.editInfo=this.grid.edit.info;this.item=this.grid.getItem(this.editInfo.rowIndex);},_getControlId:function(){this.setCurrentItems();return [this.item.$key,this.editInfo.cell.field,this.index].join("_");}});return _79d;});},"Sage/UI/Columns/PickList":function(){define(["Sage/UI/Controls/PickList","Sage/UI/Controls/DropDownSelectPickList","Sage/Data/BaseSDataStore","dojo/_base/declare","dojo/_base/array","dojo/_base/lang"],function(_7a2,_7a3,_7a4,_7a5,_7a6,lang){var _7a7=_7a5("Sage.UI.Columns.PickList",dojox.grid.cells._Widget,{widgetClass:_7a3,storeData:null,pickList:null,storageMode:"id",displayMode:"AsText",constructor:function(){this.inherited(arguments);if(this.storageMode==="id"||this.storageMode==="code"){if(this.pickListName&&this.storeData===null){this._loadPickList();}}},formatter:function(val){if(this.storageMode==="id"){val=this.getStoreTextById(val);}if(this.storageMode==="code"){val=this.getStoreTextByCode(val);}return val;},_loadPickList:function(){var _7a8=new dojo.Deferred();var _7a9={pickListName:this.pickListName,canEditText:false,itemMustExist:true,maxLength:-1,storeMode:this.storageMode,sort:false,displayMode:this.displayMode};this.pickList=new _7a2(_7a9);this.pickList.getPickListData(_7a8);_7a8.then(lang.hitch(this,this._loadData),function(e){console.error(e);});},getStoreTextById:function(val){var _7aa=val;if(this.storeData){_7a6.some(this.storeData.items,function(item){if(item.id===val){_7aa=item.text;}},this);}return _7aa;},getStoreTextByCode:function(val){var _7ab=val;if(this.storeData){_7a6.some(this.storeData.items,function(item){if(item.code===val){_7ab=item.text;}},this);}return _7ab;},_loadData:function(data){var _7ac=[];for(var i=0;i<data.items.$resources.length;i++){var item=data.items.$resources[i];_7ac.push({id:item.$key,code:item.code,number:item.number,text:item.text});}this.storeData={identifier:"id",label:"text",items:_7ac};}});return _7a7;});},"Sage/UI/ToolBarLabel":function(){define(["dijit/_Widget","dijit/_TemplatedMixin","dojo/_base/declare"],function(_7ad,_7ae,_7af){var _7b0=_7af("Sage.UI.ToolBarLabel",[_7ad,_7ae],{label:"label",region:"leading",templateString:"<span class=\"dijitToolbarLabel\"><span class=\"dijitReset dijitInline \" dojoAttachPoint=\"containerNode\"></span></span>",attributeMap:{label:{node:"containerNode",type:"innerHTML"}},_append:function(val){this.containerNode.innerHTML+=val;},_setLabelAttr:function(_7b1){this.containerNode.innerHTML=this.label=_7b1;}});return _7b0;});},"Sage/UI/Columns/SlxLink":function(){define(["Sage/Format","Sage/Utility","dojo/_base/declare"],function(_7b2,_7b3,_7b4){Sage.Region={decimalSeparator:".",numberGroupSeparator:",",numberGroupDigits:3,decimalDigits:2,currencySymbol:"$",positiveCurrencyPattern:0,negativeCurrencyPattern:0,numberNegativeSign:"-"};var _7b5=_7b4("Sage.UI.Columns.SlxLink",dojox.grid.cells.Cell,{_dataTypeChecked:null,_layout:null,_getDisplayValue:function(_7b6,_7b7,_7b8){var _7b9=_7b8||"";if(this._layout===null){if(_7b3.getModeId()=="list"){var _7ba=dijit.byId("list");if(_7ba&&_7b3.isDefined(_7ba)&&_7b3.isDefined(_7ba._configuration)){this._layout=_7ba._configuration.list.layout[this.layoutIndex];}else{return _7b9;}}else{var _7bb=this.get?this.get(_7b6,_7b7):(this.value||this.defaultValue);if(this._dataTypeChecked===null&&_7b3.isStringWithLength(_7bb)){this._dataTypeChecked=true;if(_7bc.isDateString(_7bb)){this._layout={"fieldType":"DateTime","format":"DateTime","formatString":this.displayFormatString||""};}else{return _7b9;}}else{return _7b9;}}}if(this._layout.fieldType==="DateTime"&&this._layout.format==="DateTime"){var _7bd=this.get?this.get(_7b6,_7b7):(this.value||this.defaultValue);if(dojo.isString(_7bd)&&_7bc.isDateString(_7bd)){var _7be=_7b3.getModeId()=="list";var _7bf=_7bc.toDateFromString(_7bd,_7be);_7bf=new Date(_7bf.getUTCFullYear(),_7bf.getUTCMonth(),_7bf.getUTCDate());if(_7b3.isStringWithLength(this._layout.formatString)){try{return dojo.date.locale.format(_7bf,{selector:"date",datePattern:this._layout.formatString});}catch(e){if(typeof console!=="undefined"){}return dojo.date.locale.format(_7bf,{selector:"date",fullYear:true});}}else{return dojo.date.locale.format(_7bf,{selector:"date",fullYear:true});}}}return _7b9;},displayFields:[],displayFormatString:"",idField:"",pageName:"",appliedSecurity:"",urlFields:[],urlFormatString:"",target:"",image:"",queryParams:null,getPageName:function(_7c0){if(this.pageName===""){var url=document.location.href;if(url.indexOf("?")>-1){url=url.substring(0,url.indexOf("?"));}url=url.substring(url.lastIndexOf("/")+1);this.pageName=url.replace(".aspx","");return this.pageName;}if(_7b3.getModeId()=="list"){return this.pageName;}var _7c1=_7b3.getValue(_7c0,this.property);if(_7c1!==""&&typeof _7c1==="string"){return _7c1;}else{return this.pageName;}},formatEditing:function(_7c2,_7c3){},format:function(_7c4,_7c5){if(_7c5===null){return this.defaultValue;}var _7c6,_7c7,vals=[],_7c8="",_7c9="",i=this.grid.edit.info,idx=0,d=this.get?this.get(_7c4,_7c5):(this.value||this.defaultValue);if((this.displayFormatString)&&(this.displayFormatString!=="")){if(this.displayFields.length<1){vals.push(d);}for(idx;idx<this.displayFields.length;idx++){vals.push(_7b3.getValue(_7c5,this.displayFields[idx].trim()));}d=dojo.string.substitute(this.displayFormatString,vals);}if(this.target!==""){_7c8=dojo.string.substitute(" target=\"${0}\" ",[this.target]);}if(this.queryParams){if(typeof this.queryParams==="object"){_7c9="&"+dojo.objectToQuery(this.queryParams);}else{if(typeof this.queryParams==="string"){_7c9="&"+this.queryParams;}}}d=(d&&d.replace&&this.grid.escapeHTMLInData)?d.replace(/</g,"&lt;"):d;if(this.editable&&(this.alwaysEditing||(i.rowIndex==_7c4&&i.cell==this))){return this.formatEditing(d,_7c4);}else{_7c7=this._defaultFormat(d,[d,_7c4,this]);if(this.image!==""){_7c7=dojo.string.substitute("<img src=\"${0}\" alt=\"${1}\" />",[this.image.replace(/^~\//,""),_7c7]);}if(this.appliedSecurity!==""){var svc=Sage.Services.getService("RoleSecurityService");if(svc){if(!svc.hasAccess(this.appliedSecurity)){_7c7=this._getDisplayValue(_7c4,_7c5,_7c7);return _7c7;}}}if(this.idField!==""){var _7ca=this.getPageName(_7c5);_7c6=_7b3.getValue(_7c5,this.idField);if(!_7c6){var _7cb=(this.idField==="id")?"$key":this.idField.replace(/\.[iI]d/g,".$key");_7c6=_7b3.getValue(_7c5,_7cb);}if(_7c6){_7c7=_7b3.htmlEncode(this._getDisplayValue(_7c4,_7c5,_7c7));if(_7ca.toUpperCase()==="HISTORY"){return dojo.string.substitute("<span onclick=\"javascript:Sage.Link.editHistory('${0}')\" id=\"${0}\" title=\"${1}\" class=\"activity-type-link\">${1}</span>",[_7c6,_7c7]);}else{if(_7ca.toUpperCase()==="ACTIVITY"){return dojo.string.substitute("<span onclick=\"javascript:Sage.Link.editActivity('${0}')\" id=\"${0}\" title=\"${1}\" class=\"activity-type-link\">${1}</span>",[_7c6,_7c7]);}else{if(_7ca.toUpperCase()==="RMA"){_7ca="Return";}return dojo.string.substitute("<a href=\"${0}.aspx?entityid=${1}&modeid=Detail${2}\"${3} id=\"${1}\" title=\"${4}\">${4}</a>",[_7ca,_7c6,_7c9,_7c8,_7c7]);}}}}else{var _7cc=(this.urlFormatString!=="")?this.urlFormatString:"${0}";vals=[];if(this.urlFields.length<1){vals.push(d);}for(idx=0;idx<this.urlFields.length;idx++){vals.push(_7b3.getValue(_7c5,dojo.trim(this.urlFields[idx])));}_7c7=_7b3.htmlEncode(this._getDisplayValue(_7c4,_7c5,_7c7));return dojo.string.substitute("<a href=\"http://${0}${1}\"${2}>${3}</a>",[dojo.string.substitute(this.urlFormatString,vals),_7c9,_7c8,_7c7]);}return _7c7;}},markupFactory:function(node,cell){dojox.grid.cells.Cell.markupFactory(node,cell);var d=dojo;var _7cd=d.trim(d.attr(node,"displayFields")||"");if(_7cd){var f=_7cd.split(",");cell.displayFields=f;}cell.displayFormatString=d.trim(d.attr(node,"displayFormatString")||"");cell.idField=d.trim(d.attr(node,"idField")||"");cell.pageName=d.trim(d.attr(node,"pageName")||"");cell.appliedSecurity=d.trim(d.attr(node,"appliedSecurity")||"");cell.image=d.trim(d.attr(node,"image")||"");var _7ce=d.trim(d.attr(node,"urlFields")||"");if(_7ce){var u=_7ce.split(",");cell.urlFields=u;}cell.urlFormatString=d.trim(d.attr(node,"urlFormatString")||"");cell.target=d.trim(d.attr(node,"target")||"");if(d.hasAttr(node,"queryParams")){cell["queryParams"]=d.trim(d.attr(node,"queryParams")||"");}}});var _7bc=_7b3.Convert;return _7b5;});},"Sage/Utility/File":function(){define(["Sage/UI/Dialogs","dojo/number","dojo/_base/lang","dojo/i18n!./nls/File"],function(_7cf,_7d0,lang,_7d1){Sage.namespace("Utility.File");Sage.Utility.File={fileType:{ftAttachment:0,ftLibraryDocs:1},supportsHTML5File:(window.File&&window.FileReader&&window.FileList&&window.Blob),fileUploadOptions:{maxFileSize:4000000},init:function(_7d2){if(_7d2){this.fileUploadOptions=_7d2;}},isFileSizeAllowed:function(_7d3){var l=0;var _7d4=Sage.Utility.File.fileUploadOptions.maxFileSize;var _7d5=_7d1.largeFileWarningTitle;var msg=_7d1.largeFileWarningText;for(var i=0;i<_7d3.length;i++){if(_7d3[i].size===0){}else{l+=_7d3[i].size||_7d3[i].blob.length;}}if(l>(_7d4)){_7cf.showError(msg,_7d5);return false;}return true;},uploadFile:function(file,url,_7d6,_7d7,_7d8,_7d9,_7da){if(!Sage.Utility.File.isFileSizeAllowed([file])){return;}if(Sage.gears){this._uploadFileGears(file,url,_7d6,_7d7,_7d8,_7d9,_7da);}else{if(this.supportsHTML5File){if((window.FileReader.prototype.readAsBinaryString)||(window.FileReader.prototype.readAsArrayBuffer)){this._uploadFileHTML5_asBinary(file,url,_7d6,_7d7,_7d8,_7d9,_7da);}else{this._uploadFileHTML5(file,url,_7d6,_7d7,_7d8,_7d9,_7da);}}else{this._showUnableToUploadError();}}},uploadFileHTML5:function(file,url,_7db,_7dc,_7dd,_7de,_7df){if(!Sage.Utility.File.isFileSizeAllowed([file])){return;}if(this.supportsHTML5File){if((window.FileReader.prototype.readAsBinaryString)||(window.FileReader.prototype.readAsArrayBuffer)){this._uploadFileHTML5_asBinary(file,url,_7db,_7dc,_7dd,_7de,_7df);}else{this._uploadFileHTML5(file,url,_7db,_7dc,_7dd,_7de,_7df);}}else{this._showUnableToUploadError();}},_uploadFileGears:function(file,url,_7e0,_7e1,_7e2,_7e3,_7e4){if(!window.Sage&&!Sage.gears){this._showUnableToUploadError();return;}if(_7e0){_7e0.call(_7e3,null);}if(!url){url="slxdata.ashx/slx/system/-/attachments/file?format=json";}var _7e5=Sage.gears.factory.create("beta.httprequest");_7e5.open((_7e4)?"PUT":"POST",url);var _7e6="---------------------------"+(new Date()).getTime();var _7e7="--";var crlf="\r\n";var _7e8=Sage.gears.factory.create("beta.blobbuilder");_7e8.append(_7e7);_7e8.append(_7e6);_7e8.append(crlf);_7e8.append("Content-Disposition: attachment; name=\"file_\"");if(file.name){_7e8.append("; filename*=\""+encodeURI(file.name)+"\"");}_7e8.append(crlf);_7e8.append("Content-Type: application/octet-stream");_7e8.append(crlf);_7e8.append(crlf);_7e8.append(file.blob);_7e8.append(crlf);_7e8.append(_7e7);_7e8.append(_7e6);_7e8.append(_7e7);_7e8.append(crlf);if(typeof (_7e1)==="function"){_7e5.onreadystatechange=function(){if(_7e5.readyState===4){if(Math.floor(_7e5.status/100)!==2){if(typeof (_7e2)==="function"){_7e2.call(_7e3||this,_7e5);}}else{_7e1.call(_7e3||this,_7e5);}}};}if(typeof (_7e0)==="function"){_7e5.upload.onprogress=function(prog){_7e0.call(_7e3||this,prog);};}_7e5.setRequestHeader("Content-Type","multipart/attachment; boundary="+_7e6);var blob=_7e8.getAsBlob();_7e5.send(blob);},_uploadFileHTML5:function(file,url,_7e9,_7ea,_7eb,_7ec,_7ed){if(!this.supportsHTML5File||!window.FormData){this._showUnableToUploadError();return;}if(_7e9){_7e9.call(_7ec,null);}if(!url){url="slxdata.ashx/slx/system/-/attachments/file";}var fd=new FormData();fd.append("file_",file,file.name);var _7ee=new XMLHttpRequest();_7ee.open((_7ed)?"PUT":"POST",url);_7ee.setRequestHeader("X-Requested-With","XMLHttpRequest");if(_7ea){_7ee.onreadystatechange=function(){if(_7ee.readyState===4){if(Math.floor(_7ee.status/100)!==2){if(_7eb){_7eb.call(_7ec||this,_7ee);}}else{_7ea.call(_7ec||this,_7ee);}}};}if(_7e9){_7ee.upload.addEventListener("progress",function(e){_7e9.call(_7ec||this,e);});}_7ee.send(fd);},_uploadFileHTML5_asBinary:function(file,url,_7ef,_7f0,_7f1,_7f2,_7f3){if(!this.supportsHTML5File){this._showUnableToUploadError();return;}if(_7ef){_7ef.call(_7f2,null);}window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(!url){url="slxdata.ashx/slx/system/-/attachments/file";}var _7f4=new XMLHttpRequest();_7f4.open((_7f3)?"PUT":"POST",url);_7f4.setRequestHeader("X-Requested-With","XMLHttpRequest");var _7f5=new FileReader();_7f5.onload=lang.hitch(this,function(evt){var _7f6,_7f7,_7f8,crlf,bb,_7f9,_7fa,_7fb;_7fa=new FileReader();try{new Blob();bb=[];}catch(e){bb=new window.BlobBuilder();_7f9=true;}_7f6=evt.target.result;_7f7="---------------------------"+(new Date()).getTime();_7f8="--";crlf="\r\n";this._append(bb,_7f8+_7f7+crlf);this._append(bb,"Content-Disposition: attachment; ");this._append(bb,"name=\"file_\"; ");this._append(bb,"filename*=\""+encodeURI(file.name)+"\" ");this._append(bb,crlf);this._append(bb,"Content-Type: "+file.type);this._append(bb,crlf+crlf);this._append(bb,_7f6);this._append(bb,crlf);this._append(bb,_7f8+_7f7+_7f8+crlf);if(_7f0){_7f4.onreadystatechange=function(){if(_7f4.readyState===4){if(Math.floor(_7f4.status/100)!==2){if(_7f1){_7f1.call(_7f2||this,_7f4);}}else{_7f0.call(_7f2||this,_7f4);}}};}if(_7ef){_7f4.upload.addEventListener("progress",function(e){_7ef.call(_7f2||this,e);});}_7f4.setRequestHeader("Content-Type","multipart/attachment; boundary="+_7f7);if(_7f9){_7fb=bb.getBlob(file.type);}else{_7fb=new Blob(bb);}_7fa.onload=function(e){_7f4.send(e.target.result);};try{_7f4.send(_7fb);}catch(e){_7fa.readAsArrayBuffer(_7fb);}});try{_7f5.readAsArrayBuffer(file);}catch(e){if((typeof file.blob!="undefined")&&(typeof VBArray!="undefined")){var blob=file.blob;var _7fc=new VBArray(blob.getAsArray()).toArray();var data=new Blob([new Uint8Array(_7fc)],{type:"application/binary"});_7f5.readAsArrayBuffer(data);}}},_append:function(_7fd,data){if(_7fd&&_7fd.constructor===Array){_7fd.push(data);}else{_7fd.append(data);}},_showUnableToUploadError:function(){_7cf.showError(_7d1.unableToUploadText);},formatFileSize:function(size){size=parseInt(size,10);if(size===0){return "0 KB";}if(!size||size<0){return _7d1.unknownSizeText;}if(size<1024){return "1 KB";}return _7d0.format(Math.round(size/1024))+" KB";}};return Sage.Utility.File;});},"Sage/Utility/File/Attachment":function(){define(["Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/Utility/File","Sage/UI/Dialogs","dojo/_base/lang","dojo/string","Sage/Utility","Sage/Utility/File/DescriptionsForm","dojo/i18n","dojo/i18n!./nls/Attachment"],function(_7fe,_7ff,_800,_801,_802,_803,_804,_805,i18n){Sage.namespace("Utility.File.Attachment");Sage.Utility.File.Attachment={uploadingAttachments:"Uploading attachments",uploadCompleted:"Completed",uploadingPleaseWait:"Uploading, please wait...",uploadFailed:"Upload failed.",_store:false,_totalProgress:0,_attachmentTemplate:false,_mixinsByName:{},_files:[],_fileCount:0,_filesUploadedCount:0,_isUploading:false,_descriptionsForm:false,_uploadUrl:"slxdata.ashx/slx/system/-/attachments/file",createAttachments:function(_806){var _807="";if(Sage.Services.hasService("ClientEntityContext")){var _808=Sage.Services.getService("ClientEntityContext");var _809=_808.getContext();_807=_809.Description||"";}this._ensureDescriptionsForm();this._descriptionsForm.set("entityDesc",_807);this._descriptionsForm.set("files",_806);this._descriptionsForm.show();},createAttachmentSilent:function(file,_80a){if(!_80a.hasOwnProperty("description")){_80a["description"]=this.getDefaultDescription(file.name);}this._mixinsByName[file.name]=_802.mixin(_80a,{attachDate:_804.Convert.toIsoStringFromDate(new Date()),dataType:"R"});this._files.push(file);if(!this._attachmentTemplate){this.getAttachmentTemplate(this.uploadFiles,this);}else{this.uploadFiles();}},handleDescriptions:function(_80b,_80c){var _80d="";var id="";this.getKnownRelationships(function(rels){var _80e=_802.mixin(rels,{attachDate:_804.Convert.toIsoStringFromDate(new Date()),dataType:"R",user:{"$key":_804.getClientContextByKey("userID")||""}});for(var i=0;i<_80c.length;i++){_80c[i][_80d]=id;this._mixinsByName[_80c[i].fileName]=_802.mixin(_80c[i],_80e);}for(i=0;i<_80b.length;i++){this._files.push(_80b[i]);}if(!this._attachmentTemplate){this.getAttachmentTemplate(this.uploadFiles,this);}else{this.uploadFiles();}},this);},uploadFiles:function(_80f){this._isUploading=true;this._fileCount=this._files.length;if(_80f&&!this._attachmentTemplate){this._attachmentTemplate=_80f;}while(this._files.length>0){var file=this._files.pop();Sage.Utility.File.uploadFile(file,this._uploadUrl,this._updateProgress,this._successUpload,this._failAdd,this);}},_successUpload:function(_810){var url=_810.getResponseHeader("Location");var re=/\'\w+\'/g;var _811=url.match(re);if(_811){var id=_811[0].replace(/\'/g,"");var _812=new _7fe({resourceKind:"attachments",service:_7ff.getSDataService("system")});_812.fetch({predicate:"\""+id+"\"",onComplete:function(_813){var _814=this._mixinsByName[_813.fileName];if(_814){_813=_802.mixin(_813,_814);_812.save({scope:this,success:this._successAddEntity,failure:this._failAdd});}delete (this._mixinsByName[_813.fileName]);},beforeRequest:function(req){req.setQueryArg("_includeFile","false");},onError:this._failAdd,scope:this});}this._filesUploadedCount=this._filesUploadedCount+1;this._updateProgress((this._fileCount<1)?100:(this._filesUploadedCount/this._fileCount)*100);},_successAddEntity:function(_815){dojo.publish("/entity/attachment/create",_815);},getAttachment:function(id){if(id&&id.length===12){window.open("slxdata.ashx/slx/system/-/attachments('"+id+"')/file","file");}},getAttachmentTemplate:function(_816,_817){_800.Attachment._createStore();_800.Attachment._store.newItem({onComplete:_816,scope:_817||this});},getDefaultDescription:function(_818){this._ensureDescriptionsForm();return this._descriptionsForm.getDefaultDescription(_818);},_createStore:function(){if(!_800.Attachment._store){_800.Attachment._store=new _7fe({resourceKind:"attachments",service:_7ff.getSDataService("system")});}},_updateProgress:function(_819){var self;var pct=this._totalProgress;if(_819&&_819.lengthComputable){var _81a=(_819.loaded/_819.total)*100;pct+=Math.round(_81a/this._fileCount);}else{if(_819){pct=_819;}}this._totalProgress=pct;if(pct<99){_801.showProgressBar({pct:pct,title:this.uploadingAttachments,message:this.uploadingPleaseWait,showmessage:true});}else{_801.showProgressBar({pct:pct,message:this.uploadCompleted,showmessage:true});self=this;window.setTimeout(function(){_801.closeProgressBar();},1000);this._resetCounts();}},_resetCounts:function(){this._fileCount=0;this._filesUploadedCount=0;this._isUploading=false;this._totalProgress=0;},_failAdd:function(resp){_801.showProgressBar({title:this.uploadingAttachments,message:this.uploadFailed,showmessage:true});},_successUpdate:function(_81b){dojo.publish("/entity/attachment/update",_81b);},_ensureDescriptionsForm:function(){if(!this._descriptionsForm){this._descriptionsForm=new _805({entityDesc:"",files:this._files||[]});dojo.connect(this._descriptionsForm,"onDescriptionsEntered",this,"handleDescriptions");}},getKnownRelationships:function(_81c,_81d,_81e){var _81f={};if(Sage.Services.hasService("ClientEntityContext")){var _820=Sage.Services.getService("ClientEntityContext");var _821=_820.getContext();var _822=_821.EntityType.split(".");var _823=_822[_822.length-1];if(_821.EntityId!==""){var id=_821.EntityId;switch(_823){case "IContact":this._getContactRelationships(id,_81c,_81d);return;case "IOpportunity":this._getOpportunityRelationships(id,_81c,_81d);return;case "ITicket":this._getTicketRelationships(id,_81c,_81d);return;case "ISalesOrder":this._getSalesOrderRelationships(id,_81c,_81d);return;case "IActivity":this._getActivityRelationships(id,_81c,_81d);return;case "IHistory":this._getHistoryRelationships(id,_81c,_81d);return;case "IContract":this._getContractRelationships(id,_81c,_81d);return;case "IReturn":this._getReturnRelationships(id,_81c,_81d);return;}var _824=_821.EntityTableName.toLowerCase()+"Id";_81f[_824]=id;_81c.call(_81d||this,_81f);return;}else{if(_823==="IActivity"&&_81e){this._getInsertActivityRelationships(_81c,_81d);return;}else{if(_823==="IHistory"&&_81e){this._getInsertHistoryRelationships(_81c,_81d);return;}}}}_81c.call(_81d||this,{});},_getRequest:function(_825,id){var req=new Sage.SData.Client.SDataSingleResourceRequest(_7ff.getSDataService("dynamic"));req.setResourceKind(_825);req.setResourceSelector("\""+id+"\"");req.setQueryArg("precedence","0");return req;},_getContactRelationships:function(id,_826,_827){var req=this._getRequest("contacts",id);req.setQueryArg("include","Account");req.read({success:function(_828){var obj={accountId:_804.getValue(_828,"Account.$key"),contactId:_828.$key};_826.call(_827||this,obj);},failure:function(){_826.call(_827||this,{"contactId":id});},scope:this});},_getOpportunityRelationships:function(id,_829,_82a){var req=this._getRequest("opportunities",id);req.setQueryArg("include","Account,Contacts");req.setQueryArg("select","Contacts/IsPrimary,Account/Id");req.read({success:function(opp){var obj={accountId:_804.getValue(opp,"Account.$key"),opportunityId:opp.$key};var _82b="";var _82c=opp.Contacts.$resources;if(_82c.length>0){_82b=_82c[0].$key;}for(var i=0;i<_82c.length;i++){if(_82c[i].IsPrimary){_82b=_82c[i].$key;}}obj["contactId"]=_82b;_829.call(_82a||this,obj);},failure:function(){_829.call(_82a||this,{"opportunityId":id});},scope:this});},_getSalesOrderRelationships:function(id,_82d,_82e){var req=this._getRequest("salesorders",id);req.setQueryArg("include","Account");req.read({success:function(so){var obj={accountId:_804.getValue(so,"Account.$key"),salesOrderId:so.$key};_82d.call(_82e||this,obj);},failure:function(){_82d.call(_82e||this,{"salesOrderId":id});},scope:this});},_getTicketRelationships:function(id,_82f,_830){var req=this._getRequest("tickets",id);req.setQueryArg("include","Account,Contact");req.read({success:function(_831){var obj={accountId:_804.getValue(_831,"Account.$key"),ticketId:_831.$key,contactId:_804.getValue(_831,"Contact.$key")};_82f.call(_830||this,obj);},failure:function(){_82f.call(_830||this,{"ticketId":id});},scope:this});},_getReturnRelationships:function(id,_832,_833){var req=this._getRequest("returns",id);req.setQueryArg("include","Account,Contact,Ticket");req.read({success:function(rma){var obj={returnId:rma.$key,accountId:_804.getValue(rma,"Account.$key"),ticketId:_804.getValue(rma,"Ticket.$key"),contactId:_804.getValue(rma,"Contact.$key")};_832.call(_833||this,obj);},failure:function(){_832.call(_833||this,{returnId:id});},scope:this});},_getActivityRelationships:function(id,_834,_835){var req=this._getRequest("activities",id);req.setQueryArg("select","AccountId,ContactId,LeadId,OpportunityId,TicketId");req.read({success:function(_836){var obj={accountId:_804.getValue(_836,"AccountId"),activityId:_836.$key,contactId:_804.getValue(_836,"ContactId"),leadId:_804.getValue(_836,"LeadId"),opportunityId:_804.getValue(_836,"OpportunityId"),ticketId:_804.getValue(_836,"TicketId")};_834.call(_835||this,obj);},failure:function(){_834.call(_835||this,{"activityId":id});},scope:this});},_getInsertActivityRelationships:function(_837,_838){var ed=dijit.byId("activityEditor");if(ed){var obj=ed.getRelationshipsForAttachments();_837.call(_838||this,obj);return;}_837.call(_838||this,{"activityId":""});},_getHistoryRelationships:function(id,_839,_83a){var req=this._getRequest("history",id);req.setQueryArg("select","AccountId,ContactId,LeadId,OpportunityId,TicketId");req.read({success:function(_83b){var obj={accountId:_804.getValue(_83b,"AccountId"),historyId:_83b.$key,contactId:_804.getValue(_83b,"ContactId"),leadId:_804.getValue(_83b,"LeadId"),opportunityId:_804.getValue(_83b,"OpportunityId"),ticketId:_804.getValue(_83b,"TicketId")};_839.call(_83a||this,obj);},failure:function(){_839.call(_83a||this,{"historyId":id});},scope:this});},_getInsertHistoryRelationships:function(_83c,_83d){var ed=dijit.byId("historyEditor");if(ed){var obj=ed.getRelationshipsForAttachments();_83c.call(_83d||this,obj);return;}_83c.call(_83d||this,{"historyId":""});},_getContractRelationships:function(id,_83e,_83f){var req=this._getRequest("contracts",id);req.setQueryArg("include","Account,Contact");req.read({success:function(_840){var obj={accountId:_804.getValue(_840,"Account.$key"),contractId:_840.$key,contactId:_804.getValue(_840,"Contact.$key")};_83e.call(_83f||this,obj);},failure:function(){_83e.call(_83f||this,{"ticketId":id});},scope:this});},remoteRequestAttachment:function(_841){var _842={"$name":"RequestAttachment","request":{"entity":{"$key":_841},AttachmentId:_841}};var _843=new Sage.SData.Client.SDataServiceOperationRequest(_7ff.getSDataService("system")).setResourceKind("attachments").setOperationName("RequestAttachment");_843.execute(_842,{success:function(_844){dojo.publish("/entity/attachment/requested",_844);}});}};Sage.Utility.File.Attachment=dojo.mixin(Sage.Utility.File.Attachment,i18n.getLocalization("Sage.Utility.File","Attachment"));return Sage.Utility.File.Attachment;});},"Sage/Utility/File/DescriptionsForm":function(){define(["Sage/Utility/File","dijit/_Widget","Sage/_Templated","dojo/_base/lang","dojo/string","dijit/Dialog","dojo/i18n","dojo/i18n!./nls/DescriptionsForm","dojo/_base/declare"],function(File,_845,_846,_847,_848,_849,i18n,_84a,_84b){var _84c=_84b("Sage.Utility.File.DescriptionsForm",[_845,_846],{fileType:File.fileType.ftAttachment,titleFmt:"Add Attachment(s) for ${0}",titleLibraryDoc:"Add Library Document(s)",fileNameText:"File name and size: ",descText:"Description:",okText:"OK",cancelText:"Cancel",entityDesc:"",_formParts:[],files:[],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div>","<div dojoType=\"dijit.Dialog\" id=\"dlgFileDescriptions\" title=\"\" dojoAttachPoint=\"_dialog\">","<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"3\" style=\"width:580px\">","<div dojoType=\"dijit.layout.ContentPane\" label=\"\" style=\"width:212px;\"><label>{%= $.fileNameText %}</label></div>","<div dojoType=\"dijit.layout.ContentPane\" label=\"\" style=\"width:250px;\"><label>{%= $.descText %}</label></div>","</div>","<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"5\" dojoAttachPoint=\"contentNode\" style=\"min-height:150px;width:580px;max-height:250px;overflow:auto\" >","</div>","<div class=\"general-dialog-actions\">","<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btnOK\" name=\"_btnOK\" dojoAttachPoint=\"_btnOK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.okText %}</div>","<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btnCancel\" name=\"_btnCancel\" dojoAttachPoint=\"_btnCancel\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $.cancelText %}</div>","</div>","</div>","</div>"]),postMixInProperties:function(){dojo.mixin(this,_84a);this.inherited(arguments);},show:function(){if(this.fileType!==File.fileType.ftLibraryDocs){this._dialog.set("title",_848.substitute(this.titleFmt,[this.entityDesc]));}else{this._dialog.set("title",this.titleLibraryDoc);}this._dialog.show();this._addFormParts();},_setEntityDescAttr:function(desc){this.entityDesc=desc;},_getEntityDescAttr:function(){return this.entityDesc;},_setFilesAttr:function(_84d){this.files=_84d;},_getFilesAttr:function(){return this.files;},_addFormParts:function(){for(var i=0;i<this.files.length;i++){var file=this.files[i];var _84e=0;if(file.size===0){_84e=0;}else{_84e=file.size||file.blob.length;}if(_84e===0){_84e+="0 Bytes";}else{if(_84e){if(_84e>1024){if(_84e>1048576){_84e=Math.round(_84e/1048576)+" MB";}else{_84e=Math.round(_84e/1024)+" KB";}}else{_84e+=" Bytes";}}}var _84f=new dijit.form.TextBox({id:"filename_"+i,value:file.name+"  ("+_84e+")",style:"min-width:250px;margin:0 0 5px 15px;",disabled:true});var _850=new dijit.form.TextBox({id:"desc_"+i,value:this.getDefaultDescription(file.name),style:"min-width:250px;margin:0 0 5px 20px;",maxLength:128,relFileName:file.name});this._formParts.push(_84f);this._formParts.push(_850);this.contentNode.addChild(_84f);this.contentNode.addChild(_850);}},_clearForm:function(){var len=this._formParts.length;for(var i=len-1;i>-1;i--){var elem=this._formParts[i];this.contentNode.removeChild(elem);elem.destroyRecursive(false);}this._formParts=[];},_okClick:function(){var _851=[];for(var i=0;i<this._formParts.length;i++){var elem=this._formParts[i];if(elem.params["relFileName"]){_851.push({description:elem.get("value")||this.getDefaultDescription(elem.params["relFileName"]),fileName:elem.params["relFileName"]});}}this._clearForm();this.onDescriptionsEntered(this.files,_851);this._dialog.hide();},_cancelClick:function(){this._clearForm();this._dialog.hide();},getDefaultDescription:function(_852){return _852.replace(/\.[\w]*/,"");},onDescriptionsEntered:function(_853,_854){}});return _84c;});},"Sage/Utility/File/AttachmentPropertiesEditForm":function(){define(["dijit/_Widget","Sage/_Templated","dojo/string","dijit/Dialog","Sage/UI/_DialogLoadingMixin","dojo/_base/lang","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/MainView/BindingsManager","Sage/Utility/File","Sage/Utility","Sage/UI/Dialogs","dojox/layout/TableContainer","Sage/UI/Controls/DateTimePicker","dijit/form/TextBox","dijit/form/Button","dojox/form/Uploader","dojo/i18n","dojo/i18n!./nls/AttachmentPropertiesEditForm","dojo/_base/declare"],function(_855,_856,_857,_858,_859,_85a,_85b,_85c,_85d,_85e,_85f,_860,_861,_862,_863,_864,_865,i18n,_866,_867){var _868=_867("Sage.Utility.File.AttachmentPropertiesEditForm",[_855,_856],{attachmentId:"",widgetsInTemplate:true,attachment:false,_bindingMgr:false,_store:false,_tempFile:false,_iframe:null,_showing:false,_iframeId:"attachmentRePostIFrame",_uploadUrlFmt:"slxdata.ashx/slx/system/-/attachments('${0}')/file",widgetTemplate:new Simplate(["<div>","<div dojoType=\"dijit.Dialog\" title=\"{%= $.editText %}\" dojoAttachPoint=\"_dialog\">","<iframe src=\"about:blank\" style=\"width:0px;height:0px;border-width:0px;\" name=\"{%= $._iframeId %}\" id=\"{%= $._iframeId %}\" dojoAttachPoint=\"_iframe\" dojoAttachEvent=\"onload:_iframeLoad\"></iframe>","<form method=\"post\" enctype=\"multipart/form-data\" action=\"{%= $._buildPostUrl() %}\" target=\"{%= $._iframeId %}\" dojoAttachPoint=\"_postForm\", class=\"attachment-properties-form\">","<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"160\" dojoAttachPoint=\"_urlContainer\">","<div dojoType=\"dijit.form.TextBox\" label=\"{%= $.urlText %}\" id=\"{%= $.id %}_tb_Url\" dojoAttachPoint=\"tb_Url\" ></div>","</div>","<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"160\" dojoAttachPoint=\"_fileNameContainer\" >","<div dojoType=\"dijit.form.TextBox\" label=\"{%= $.fileText %}\" id=\"{%= $.id %}_tb_File\" dojoAttachPoint=\"tb_File\" ></div>","</div>","<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"160\" >","<div dojoType=\"dijit.form.TextBox\" label=\"{%= $.descriptionText %}\" name=\"description\" id=\"{%= $.id %}_tb_Description\" dojoAttachPoint=\"tb_Description\" maxlength=\"128\" ></div>","<div dojoType=\"dijit.form.TextBox\" label=\"{%= $.sizeText %}\" id=\"{%= $.id %}_tb_size\" dojoAttachPoint=\"tb_size\" disabled=\"true\" shouldPublishMarkDirty=\"false\"></div>","<div dojoType=\"Sage.UI.Controls.DateTimePicker\" label=\"{%= $.attachDateText %}\" id=\"{%= $.id %}_dtp_AttachDate\" dojoAttachPoint=\"dtp_attachDate\" displayDate=\"true\" displayTime=\"true\" disabled=\"true\" shouldPublishMarkDirty=\"false\"></div>","<div dojoType=\"dijit.form.TextBox\" label=\"{%= $.attachedByText %}\" id=\"{%= $.id %}_tb_attachedBy\" dojoAttachPoint=\"tb_attachedBy\" disabled=\"true\" shouldPublishMarkDirty=\"false\"></div>","</div>","<div class=\"general-dialog-actions\">","<input dojoType=\"dojox.form.Uploader\" multiple=\"false\" label=\"{%= $.uploadFileText %}\" type=\"file\" name=\"file\" dojoAttachEvent=\"onChange:_onNewFile\" dojoAttachPoint=\"btn_FileSelect\" class=\"uploadButton\" ></input>","</div>","<div class=\"general-dialog-actions\">","<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btnOK\" name=\"_btnOK\" dojoAttachPoint=\"_btnOK\" dojoAttachEvent=\"onClick:_okClick\" >{%= $.okText %}</div>","<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btnCancel\" name=\"_btnCancel\" dojoAttachPoint=\"_btnCancel\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $.cancelText %}</div>","</div>","<input type=\"hidden\" name=\"X-HTTP-Method-Override\" value=\"PUT\" />","</form>","</div>","</div>"]),postMixInProperties:function(){dojo.mixin(this,i18n.getLocalization("Sage.Utility.File","AttachmentPropertiesEditForm"));this.inherited(arguments);},show:function(){this._dialog.show();if(!this._dialog._standby){_85a.mixin(this._dialog,new _859());}this._showing=true;if(!this.attachment){this._dialog.showLoading();}},hide:function(){this.attachmentId="";this.attachment=false;this._tempFile=false;if(this._dialog._standby){this._dialog.hideLoading();}this._dialog.hide();this._showing=false;},_buildPostUrl:function(){var _869=[];_869.push(/https/i.test(window.location.protocol)?"https":"http");_869.push("://");_869.push(window.location.hostname);if(window.location.port&&window.location.port!==80){_869.push(":",window.location.port);}_869.push("/");_869.push(_85f.getVirtualDirectoryName());_869.push("/slxdata.ashx/slx/system/-/attachments");if(this.attachment){_869.push("(\""+this.attachment.$key+"\")");}_869.push("/file");var url=_869.join("");return url;},_iframeLoad:function(e){if(this._iframe.contentDocument&&this._iframe.contentDocument.URL.indexOf("attachments")>0){dojo.publish("/entity/attachment/update","");this.hide();}},_setAttachmentIdAttr:function(_86a){this.attachmentId=_86a;if(this.attachmentId&&this.attachmentId!==""){this._loadData();}},_getAttachmentIdAttr:function(){return this.attachmentId;},_loadData:function(){if(this._dialog._standby){this._dialog.showLoading();}if(!this._store){this._store=new _85b({include:["$descriptors"],resourceKind:"attachments",service:_85c.getSDataService("system")});}if(this.attachmentId!==""){this._store.clearCache();this._store.fetch({predicate:"\""+this.attachmentId+"\"",onComplete:this._receiveAttachment,beforeRequest:function(_86b){_86b.setQueryArg("_includeFile","false");},onError:this._requestFail,scope:this});}else{_860.showError("No attachment to edit");}},_receiveAttachment:function(_86c){if(this._dialog._standby){this._dialog.hideLoading();}this.attachment=_86c;this._ensureBindings();this._bind();if(this.attachment.url){dojo.removeClass(this._urlContainer.domNode,"display-none");dojo.addClass(this.btn_FileSelect.domNode,"display-none");dojo.addClass(this._fileNameContainer.domNode,"display-none");}else{dojo.addClass(this._urlContainer.domNode,"display-none");dojo.removeClass(this.btn_FileSelect.domNode,"display-none");dojo.removeClass(this._fileNameContainer.domNode,"display-none");}},_ensureBindings:function(){if(!this._bindingMgr){this._bindingMgr=new _85d({defaultBinding:{boundEntity:this.attachment},items:[{boundWidget:this.tb_File,entityProperty:"fileName"},{boundWidget:this.tb_Description,entityProperty:"description"},{boundWidget:this.tb_size,entityProperty:"fileSize",_formatValueFromEntity:function(v){return Sage.Utility.File.formatFileSize(v);},twoWay:false},{boundWidget:this.dtp_attachDate,entityProperty:"attachDate",dataType:"date",twoWay:false},{boundWidget:this.tb_Url,entityProperty:"url"},{boundWidget:this.tb_attachedBy,entityProperty:"user.$descriptor",twoWay:false}]});}},_bind:function(){if(!this._bindingMgr.boundEntity||(this.attachment.$key!==this._bindingMgr.boundEntity.$key)){this._bindingMgr.setBoundEntity(this.attachment);}else{this._bindingMgr.bind();}},_onNewFile:function(){var _86d=this.btn_FileSelect._files;if(_86d&&_86d.length>0){this.tb_File.set("value",_86d[0].name);this._tempFile=_86d[0];}else{}this.tb_Description.focus();},_uploadNewFile:function(file){if(file){var url=_857.substitute(this._uploadUrlFmt,[this.attachment.$key]);_85e.uploadFileHTML5(file,url,false,this._newFileUploaded,this._requestFail,this,true);}},_newFileUploaded:function(){this._tempFile=false;dojo.publish("/entity/attachment/update",this.attachment);this.hide();},_okClick:function(){if(this._dialog._standby){this._dialog.showLoading();}this._saveAndHide();},_saveAndHide:function(){if(this._dialog._standby){this._dialog.showLoading();}var self=this;if((!_85e.supportsHTML5File&&!Sage.gears)&&(this._tempFile)){this._store._okToCache=false;this._postForm.action=this._buildPostUrl();this._postForm.submit();window.setTimeout(function(){if(self._showing){dojo.publish("/entity/attachment/update","");self.hide();}},5000);return;}window.setTimeout(function(){self._saveAttachment();},10);},_saveAttachment:function(){this._store.save({scope:this,success:function(_86e){if(!this._tempFile){dojo.publish("/entity/attachment/update",_86e);this._dialog.hide();}},failure:this._requestFail});if(this._tempFile){this._uploadNewFile(this._tempFile);}},_cancelClick:function(){this.hide();},_requestFail:function(req){_860.showError(this.requestFailedMsg);this.hide();}});return _868;});},"Sage/UI/Controls/DateTimePicker":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/fx","dojo/date/locale","dijit/_Widget","dijit/form/TimeTextBox","Sage/UI/Calendar","Sage/Utility","dijit/TooltipDialog","dijit/_base/popup","dijit/form/ComboBox","dijit/focus","dojo/data/ItemFileReadStore","dojo/i18n!./nls/DateTimePicker","dojo/json","dojo/_base/lang","dojo/_base/array","dojo/_base/config","dojo/_base/declare","dojo/dom-construct","Sage/Utility/_LocalStorageMixin","dojo/text!./templates/DateTimePicker.html"],function(_86f,_870,fx,_871,_872,_873,_874,_875,_876,_877,_878,_879,_87a,_87b,json,lang,_87c,_87d,_87e,_87f,_880,_881){var _882,_883,_884;_884=_87e("Sage.UI.Controls.DateTimePicker.TimeZoneDataLoader",_880,{_requests:[],_requestingData:false,_tzData:false,_storageNamespace:"DateTimePickerTZ",constructor:function(){this._requests=[];this._requestingData=false;this._tzData=false;},requestTimeZones:function(_885,_886){if(!this._tzData){var data=this.getFromLocalStorage(this._storageNamespace,this._storageNamespace);if(data){this._tzData=json.parse(data);}else{this._requests.push({fn:_885,scope:_886||this});if(!this._requestingData){dojo.xhrGet({url:"slxdata.ashx/slx/crm/-/timezones/p",handleAs:"json",load:lang.hitch(this,this._receiveData),error:function(err){}});this._requestingData=true;}return;}}_885.call(_886||this,this._tzData);},_receiveData:function(data){this.saveToLocalStorage(this._storageNamespace,json.stringify(data),this._storageNamespace);this._tzData=data;var len=this._requests.length;for(var i=0;i<len;i++){var clbk=this._requests.pop();clbk.fn.call(clbk.scope,data);}}});_882=_87e("Sage.UI.Controls._DateTimePickerMenu",[_872,_86f,_870],{templateString:_881,widgetsInTemplate:true,textAlign:"left",okText:"",cancelText:"",convertText:"",calculatorText:"",timeZoneSourceText:"",timeZoneDestText:"",id:"dateTimePickerMenu",dir:"",_messages:null,_started:false,_timezonesLoaded:false,_timezonesVisible:false,displayTime:false,constructor:function(_887){lang.mixin(this,_87b);this.inherited(arguments);},startup:function(){this._started=true;this._messages=[];this.focus();this.inherited(arguments);},uninitialize:function(){this.dateNode.destroy(false);this.timeZoneSourceComboNode.destroy(false);this.timeZoneDestComboNode.destroy(false);this.timeZoneConvertButtonNode.destroy(false);this.timeNode.destroy(false);this.OKButtonNode.destroy(false);this.CancelButtonNode.destroy(false);this.inherited(arguments);},_getUTCDate:function(date){return new Date(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate(),date.getUTCHours(),date.getUTCMinutes(),date.getUTCSeconds());},_okClicked:function(_888){this.onExecute();this.onOKClicked();},onOKClicked:function(){},_onCalendarBlur:function(){this.calendarBlur();},calendarBlur:function(){},_onValueSelected:function(){if(!this.displayTime){this.calendarDateSelected();this.onExecute();}},calendarDateSelected:function(){},_cancelClicked:function(){this.onCancel();this.onCancelClicked();},onFocusOut:function(){this.onExecute();},onCancelClicked:function(){},onCancel:function(){},onExecute:function(){},_hideTimeNode:function(){this._hideNode(this.timeZoneContainer);},_hideDateNode:function(){this._hideNode(this.dateContainer);},_showTimeNode:function(){this._showNode(this.timeZoneContainer);},_showDateNode:function(){this._showNode(this.dateContainer);},_hideNode:function(id){dojo.style(id,"visibility","hidden");dojo.style(id,"display","none");},_showNode:function(id){dojo.style(id,"visibility","visible");dojo.style(id,"display","block");},_convertClicked:function(){if(!this._timezonesLoaded){return;}var self=this,_889=this.dateNode.get("value"),_88a=this.timeNode.get("value"),_88b=this.timeZoneSourceComboNode.get("value"),_88c=this.timeZoneDestComboNode.get("value"),_88d="",_88e=null,url="slxdata.ashx/slx/crm/-/timezones/convertTimeFormatted?timezoneNameSource=${0}&timezoneNameDest=${1}&date=${2}&getFormatted=${3}";_889.setHours(_88a.getHours());_889.setMinutes(_88a.getMinutes());_88d=_889.toLocaleString();if(_88b&&_88c){dojo.xhrGet({url:dojo.string.substitute(url,[escape(_88b),escape(_88c),_88d,"false"]),handleAs:"json",load:function(_88f){self.convertResultsNode.innerHTML=_88f;},error:function(err){console.error(err);}});}},processTimeZones:function(data){var _890=[];var _891=_875.getClientContextByKey("userTimeZone");_87c.forEach(data,function(item){if(!item.Displayname||!item.Keyname){return;}_890.push({id:item.Keyname,text:item.Displayname,offsetHours:item.OffsetHours,offsetMinutes:item.OffsetMinutes});});this.storeData={label:"text",identifier:"id",items:_890};this.timeZoneStore=new _87a({data:this.storeData});var self=this;this.timeZoneSourceComboNode.set("store",this.timeZoneStore);this.timeZoneSourceComboNode.set("searchAttr","text");this.timeZoneSourceComboNode.store.fetch({query:{text:_891},onComplete:function(_892){self.timeZoneSourceComboNode.setAttribute("item",_892[0]);}});this.timeZoneDestComboNode.set("store",this.timeZoneStore);this.timeZoneDestComboNode.set("searchAttr","text");},loadTimeZones:function(){if(this._timezonesLoaded){return;}this._timezonesLoaded=true;var _893=new _884();_893.requestTimeZones(this.processTimeZones,this);}});_883=_87e("Sage.UI.Controls.DateTimePicker",[_878],{id:"dateTimePicker",buttonToolTip:"Calendar",toolTip:"",displayDate:true,displayTime:true,initialDate:null,initialTime:null,initialTextValue:"",dateFormat:"",timeZoneStore:null,storeData:null,dropDown:false,_opened:false,readOnly:false,enabled:true,required:false,renderAsHyperlink:false,shouldPublishMarkDirty:true,handles:null,store:null,dateOnlyHanlde:null,documentClickHandle:null,dropdownIconClicked:false,popupElements:null,minDate:null,constructor:function(_894){this.buttonToolTip=_87b.buttonToolTip;this.handles=[];this.documentClickHandle=[];this.dateOnlyHanlde=[];this.store={};this.inherited(arguments);},_onChanged:function(e){if(this.shouldPublishMarkDirty){dojo.publish("Sage/events/markDirty");}this._updateHiddenFields();},_onFocusChange:function(){this._updateHiddenFields();},_updateHiddenFields:function(){var _895,_896,_897,_898;_895=dojo.byId(this.id);if(_895){_897=_895.children[0];_896=_895.children[1];if(_897&&_896){_898=this.getValueForASPNET();_896.value=_898;if(_898===""){_897.value="";}if(_896.onchange){_896.onchange();}}}},uninitialize:function(){this.inherited(arguments);},startup:function(){this.inherited(arguments);this.dropDown=new _882({id:this.id+"_Popout",displayTime:this.displayTime});this.handles.push(this.connect(this,"onChange",this._onChanged));this.handles.push(dojo.connect(this.dropDown,"onOKClicked",this,"_displayCurrentValue"));this.handles.push(dojo.connect(this.focusNode,"onkeyup",this,"_onFocusKeyUp",true));this.handles.push(dojo.connect(this.focusNode,"onblur",this,"_onFocusBlur",true));this.handles.push(dojo.connect(this.focusNode,"onchange",this,"_onFocusChange",true));this.focusNode.value=this.initialTextValue;var date=_875.Convert.toDateFromString(this.initialDate)||new Date();var time=_875.Convert.toDateFromString(this.initialTime)||new Date();this.dropDown.dateNode.set("value",date.toDateString());this.dropDown.timeNode.set("value",time);if(this.displayDate){this.dropDown._showDateNode();}else{this.dropDown._hideDateNode();}if(this.displayTime){this.dropDown._showTimeNode();}else{this.dateOnlyHanlde.push(dojo.connect(this.dropDown,"calendarDateSelected",this,"_displayCurrentValue"));this.dropDown._hideTimeNode();}var _899=[];var _89a=function(node){if(node&&node.children&&node.children.length>0){for(var i=0;i<node.children.length;i++){if(node.children[i]){_899.push(node.children[i]);}_89a(node.children[i]);}}return _899;};this.popupElements=_89a(this.dropDown.domNode);this.popupElements.push(this.dropDown.domNode);this.popupElements.push(this._buttonNode.parentNode);this.documentClickHandle.push(dojo.connect(document,"onclick",this,"_documentOnClick"));this._setupRenderAsHyperlink();this._setupDropDownIcon();},_documentOnClick:function(evt){var e=evt||window.event;var _89b=e.target||e.srcElement;if(e.target.nodeType==3){_89b=e.target.parentNode;}var _89c=function(_89d,node){if(dojo.indexOf(_89d,node)>-1){return true;}else{if(node.parentNode){return _89c(_89d,node.parentNode);}else{return false;}}};if((_89b&&_89b.className&&(_89b.className.indexOf("dijitTimePickerItemInner")>-1||_89b.className.indexOf("dijitCalendarMonthLabel")>-1))||(_89b&&_89b.id&&(_89b.id.indexOf("_Popout-TzSelectSource_popup")>-1||_89b.id.indexOf("_Popout-TzSelectDest_popup")>-1))){e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation();}e.preventDefault=true;}else{if(this.dropDown&&this.dropDown.timeNode&&this.dropDown.timeNode.dropDown){if(dojo.indexOf(this.popupElements,this.dropDown.timeNode.dropDown.domNode)==-1){this.popupElements.push(this.dropDown.timeNode.dropDown.domNode);}}if(!_89c(this.popupElements,_89b)){this.closeDropDown();}else{e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation();}e.preventDefault=true;}}},_setupDropDownIcon:function(){if(this.renderAsHyperlink){return;}_87f.create("div",{"class":"Global_Images icon16x16 icon_Calendar_16x16",title:this.buttonToolTip,tabIndex:0},this._buttonNode,"only");dojo.addClass(this._buttonNode,"smCalendarIconTxtBox");this.handles.push(this.connect(this._buttonNode,"ondijitclick",function(){if(!this.displayTime){dojo.style(this.dropDown.domNode,"height","226px");}else{dojo.style(this.dropDown.domNode,"height","266px");}if(!this.dropdownIconClicked){this.openDropDown();this.dropdownIconClicked=true;}}));},_displayCurrentValue:function(){if(!this._started){return;}var _89e=this.getDateValue(),_89f=this.getTimeValue(),_8a0,_8a1={fullYear:true};if(!_89e){return;}_89e.setHours(_89f.getHours());_89e.setMinutes(_89f.getMinutes());_89e.setSeconds(_89f.getSeconds());if(this.displayDate&&this.displayTime){_8a1.selector="date and time";}else{if(this.displayDate){_8a1.selector="date";}else{if(this.displayTime){_8a1.selector="time";}}}_8a0=_871.format(_89e,_8a1);if(this.renderAsHyperlink){var node=dojo.byId(this.id+"-Link");node.innerHTML=_8a0;}else{this.focusNode.value=_8a0;}if((!this.value.getTime)||this.value.getTime()!==_89e.getTime()){this.value=_89e;this.onChange(_89e);}},_setupRenderAsHyperlink:function(){if(!this.renderAsHyperlink){return;}dojo.style(this.domNode,"border","none");var node=dojo.create("a",{id:this.id+"-Link",innerHTML:this.focusNode.value},this.domNode,"only");dojo.style(node,"cursor","pointer");this.handles.push(dojo.connect(node,"onclick",this,function(){if(!this.displayTime){dojo.style(this.dropDown.domNode,"height","226px");}else{dojo.style(this.dropDown.domNode,"height","266px");}this.openDropDown();}));},loadDropDown:function(){},isLoaded:function(){return true;},_setBlurValue:function(){},closeDropDown:function(){_877.close(this.dropDown);this._opened=false;this.dropdownIconClicked=false;dojo.forEach(this.documentClickHandle,function(_8a2){dojo.disconnect(_8a2);});},_openResultList:function(){},_showResultList:function(){},_onBlur:function(){},triggerOnFocusBlur:function(_8a3){this._validateInputDate(_8a3);},_validateInputDate:function(_8a4){if(!this._opened&&!this.readOnly&&this.dropDown&&this.focusNode.value!==""){var text=this.focusNode.value;if(text===this.initialTextValue){return;}var _8a5=null;var _8a6="date";if(text.indexOf(":")>0){_8a6="datetime";}_8a4=_8a4||_87d.locale;_8a5=dojo.date.locale.parse(text,{selector:_8a6,locale:_8a4});if(this.dropDown&&_8a5!==null&&isNaN(_8a5.getDate())===false){if(_8a5.getFullYear()>=(new Date().getFullYear()-259)){this.dropDown.dateNode.set("value",_8a5);this.dropDown.timeNode.set("value",_8a5);}}this.dropDown.onOKClicked();}},_onFocusBlur:function(){this._validateInputDate();if(this._opened){_879.focus(dojo.query(".dijitCalendarContainer",this.dropDown.dateContainer)[0]);}},_onFocusKeyUp:function(e){},_onKey:function(e){},openDropDown:function(){this._opened=true;var self=this;_877.open({popup:this.dropDown,around:this.domNode,onExecute:function(){self.closeDropDown();_879.focus(self.focusNode);},onCancel:function(){self.closeDropDown();_879.focus(self.focusNode);},onClose:function(){}});this.documentClickHandle.push(dojo.connect(document,"onclick",this,"_documentOnClick"));if(this.displayTime){this.dropDown.loadTimeZones();}if(this.dropDown.dateNode._selectedCells!=="undefined"&&this.dropDown.dateNode._selectedCells.length===0){this.dropDown.dateNode.goToToday();}_879.focus(dojo.query(".dijitCalendarContainer",this.dropDown.dateContainer)[0]);_877._stack[0].handlers[0].remove();},_getUTCDate:function(date){return this.dropDown._getUTCDate(date);},getDateValue:function(){return this.dropDown.dateNode.get("value");},getTimeValue:function(){var _8a7=this.dropDown.timeNode.get("value")||new Date(Date.now());if(_8a7){_8a7.setSeconds(this.dropDown.timeNode["seconds"]||0);}return _8a7;},getMinDate:function(){this.minDate=Sage.Utility.Activity.formatDateAdd(new Date(),"year",-259);return this.minDate;},_getValueAttr:function(){var d=this.getDateValue();var t=this.getTimeValue();d.setHours(t.getHours());d.setMinutes(t.getMinutes());d.setSeconds(t.getSeconds());return d;},_setValueAttr:function(val){if(val&&val.toDateString){if(this.dropDown){this.dropDown.dateNode.set("value",val);this.dropDown.timeNode.set("value",val);this.dropDown.timeNode["seconds"]=val.getSeconds();this._displayCurrentValue();}if((!this.value.getTime)||this.value.getTime()!==val.getTime()){this.value=val;this.onChange(val);}}},_setDisplayDateAttr:function(_8a8){this.displayDate=_8a8;this._displayCurrentValue();if(this.dropDown){if(this.displayDate){this.dropDown._showDateNode();}else{this.dropDown._hideDateNode();}}},_getDisplayDateAttr:function(){return this.displayDate;},_setToolTipAttr:function(_8a9){if(_8a9&&_8a9!==""){this.set("title",_8a9);}},_getToolTipAttr:function(){return this.toolTip;},_setDisabledAttr:function(_8aa){if(_8aa){dojo.style(this._buttonNode,"visibility","hidden");dojo.style(this._buttonNode,"display","none");}else{dojo.style(this._buttonNode,"visibility","");dojo.style(this._buttonNode,"display","");}this.inherited(arguments);},_setReadOnlyAttr:function(_8ab){if(_8ab){dojo.style(this._buttonNode,"visibility","hidden");dojo.style(this._buttonNode,"display","none");}this.inherited(arguments);},_setDisplayTimeAttr:function(_8ac){this.displayTime=_8ac;this._displayCurrentValue();if(this.dropDown){if(this.displayDate){this.dropDown._showDateNode();}else{this.dropDown._hideDateNode();}dojo.forEach(this.dateOnlyHanlde,function(_8ad){dojo.disconnect(_8ad);});if(this.displayTime){this.dropDown.displayTime=true;this.dropDown._showTimeNode();}else{this.dropDown.displayTime=false;this.dateOnlyHanlde.push(dojo.connect(this.dropDown,"calendarDateSelected",this,"_displayCurrentValue"));this.dropDown._hideTimeNode();}}},_getDisplayTimeAttr:function(){return this.displayTime;},getValueForASPNET:function(){if(this.focusNode.value===""){return "";}var _8ae=[];var date=this.getDateValue();_8ae.push(date.getFullYear());_8ae.push(date.getMonth()+1);_8ae.push(date.getDate());var time=this.getTimeValue();_8ae.push(time.getHours());_8ae.push(time.getMinutes());return _8ae.join(",");},destroy:function(){dojo.forEach(dijit.findWidgets(this.domNode),function(wid){wid.destroy(false);});dojo.forEach(this.handles,function(_8af){dojo.disconnect(_8af);});this.inherited(arguments);},fmtDateForASPNET:function(){var date=this.getDateValue();var time=this.getTimeValue();var year=date.getFullYear();var _8b0=date.getMonth()+1;var day=date.getDate();var _8b1=time.getHours();var _8b2=time.getMinutes();var _8b3="";if(this.displayDate){var _8b4=this.getDivChar();var _8b5=_8b0;var _8b6=day;if(this.dateFormat.substring(0,1).toUpperCase()=="MM"){_8b5=(_8b5<10)?"0"+_8b5:_8b5;}if(this.dateFormat.substring(0,1).toUpperCase=="DD"){_8b6=(_8b6<10)?"0"+_8b6:_8b6;}if(this.dateFormat.substring(0,1)=="M"||this.dateFormat.substring(0,1)=="m"){_8b3=_8b5+_8b4+_8b6+_8b4+date.getFullYear();}if(this.dateFormat.substring(0,1)=="D"||this.dateFormat.substring(0,1)=="d"){_8b3=_8b6+_8b4+_8b5+_8b4+date.getFullYear();}if(this.dateFormat.substring(0,1)=="Y"||this.dateFormat.substring(0,1)=="y"){_8b3=date.getFullYear()+_8b4+_8b5+_8b4+_8b6;}if(this.displayTime){_8b3+=" ";}}if(this.displayTime){var _8b7=this.getTimeDivChar();var _8b8=_8b1;var _8b9=_8b2;if(_8b9<10){_8b9="0"+_8b9;}if(this.dateFormat.indexOf("H")>-1){_8b3+=_8b8+_8b7+_8b9;}else{if(this.dateFormat.indexOf("h")>-1){var _8ba=_8b1;if(this.Hours===0){_8ba="12";}var _8bb="AM";if(_8b1>=12){if(_8b1>12){_8ba=(_8b1-12);}_8bb="PM";}_8b3+=_8ba+_8b7+_8b9+" "+_8bb;}else{_8b3+=time.toLocaleTimeString();}}}return _8b3;},getDivChar:function(){var _8bc="";for(var i=0;i<this.dateFormat.length;i++){if(isNaN(this.dateFormat.charAt(i))){if((this.dateFormat.charAt(i)<"A"||this.dateFormat.charAt(i)>"Z")&&(this.dateFormat.charAt(i)<"a"||this.dateFormat.charAt(i)>"z")){_8bc=this.dateFormat.charAt(i);break;}}}return _8bc;},getTimeDivChar:function(){if(this.displayTime){var _8bd=this.dateFormat.split(" ");if(_8bd.length>1){var _8be=_8bd[1];for(var i=0;i<_8be.length;i++){if(isNaN(_8be.charAt(i))){if((_8be.charAt(i)<"A"||_8be.charAt(i)>"Z")&&(_8be.charAt(i)<"a"||_8be.charAt(i)>"z")){return _8be.charAt(i);}}}}}return ":";}});return _883;});},"Sage/UI/Calendar":function(){define(["dijit/Calendar","dojo/_base/declare"],function(_8bf,_8c0){var _8c1=_8c0("Sage.UI.Calendar",_8bf,{_dateModifiedExternal:false,displayMode:"",constructor:function(_8c2){this.displayMode=_8c2.displayMode;var self=this;if(this.displayMode==="popup"){dojo.connect(this,"_setValueAttr",function(_8c3,_8c4){if(_8c3){_8c3=new self.dateClassObj(_8c3);}if(self._isValidDate(_8c3)){_8c3.setHours(1,0,0,0);if(!self.isDisabledDate(_8c3,self.lang)){self._set("value",_8c3);if(self.monthWidget&&self.monthWidget.dropDown){self.set("currentFocus",_8c3);}if(_8c4||typeof _8c4=="undefined"){self.onChange(self.get("value"));}}}else{self._set("value",null);self.set("currentFocus",self.currentFocus);}});}else{dojo.subscribe("/entity/activity/calendar/schedulerDateChanged",function(data){(function(){self._dateModifiedExternal=true;self.set("value",data.date);self._dateModifiedExternal=false;})();});dojo.connect(this,"_setCurrentFocusAttr",function(date){var _8c5=self._setCurrentFocusAttr;self._setCurrentFocusAttr=function(){};self.set("value",date);self._setCurrentFocusAttr=_8c5;});}this.inherited(arguments);},onValueSelected:function(date){if(this.displayMode!="popup"){if(!this._dateModifiedExternal){this._dateModifiedExternal=false;dojo.publish("/entity/activity/calendar/navigationCalendarDateChanged",[date,this]);this._dateModifiedExternal=false;}}},getClassForDate:function(date){var day=date.getDay();if((day===6)||(day===0)){return "dijitCalendarWeekEndDate";}}});return _8c1;});},"Sage/Utility/File/FallbackFilePicker":function(){define(["dijit/_Widget","Sage/_Templated","dijit/Dialog","require","dojo/string","Sage/UI/Dialogs","Sage/Utility","Sage/Utility/ErrorHandler","Sage/Utility/File","Sage/Utility/File/Attachment","dojo/_base/lang","Sage/UI/_DialogLoadingMixin","dojo/i18n","dojo/i18n!./nls/FallbackFilePicker","dojo/text!./templates/FallbackFilePicker_Attachment.html","dojo/text!./templates/FallbackFilePicker_LibraryDoc.html","dojo/_base/array","dojo/_base/declare","dojo/has"],function(_8c6,_8c7,_8c8,_8c9,_8ca,_8cb,_8cc,_8cd,File,_8ce,_8cf,_8d0,i18n,_8d1,_8d2,_8d3,_8d4,_8d5,has){var _8d6=_8d5("Sage.Utility.File.FallbackFilePicker",[_8c6,_8c7],{addLibraryFileText:"Add Library File",attachFileText:"Attach File",descriptionText:"Description",uploadFileText:"Select File",okText:"OK",cancelText:"Cancel",_iframeId:"attachmentPostIFrame",_hiddenFields:["_attachDate","_accountId","_activityId","_contactId","_contractId","_defectId","_historyId","_leadId","_opportunityId","_productId","_returnId","_salesOrderId","_ticketId","_userId"],_showing:false,fileType:File.fileType.ftAttachment,widgetsInTemplate:true,id:"fallbackFilePicker",widgetTemplate:null,constructor:function(_8d7){this.inherited(arguments);if(_8d7&&typeof _8d7==="object"){dojo.mixin(this,_8d7);}},destroy:function(){if(this._dialog){this._dialog.destroyRecursive();}this.inherited(arguments);},postMixInProperties:function(){dojo.mixin(this,i18n.getLocalization("Sage.Utility.File","FallbackFilePicker"));this.inherited(arguments);if(this.fileType!=File.fileType.ftLibraryDocs){this.widgetTemplate=new Simplate(eval(_8d2));}else{this.widgetTemplate=new Simplate(eval(_8d3));}},show:function(){if(this._postForm){this._postForm.reset();}this._dialog.show();if(this.fileType!=File.fileType.ftLibraryDocs){_8ce.getKnownRelationships(this._receiveRelationships,this,true);}if(has("ie")<9){this._iframe.attachEvent("onload",this._iframeLoad);window.FallbackFilePicker=this;}this._showing=true;},hide:function(){this._dialog.hide();},_onHide:function(){if(this._dialog._standby){this._dialog.hideLoading();}if(this.fileType!=File.fileType.ftLibraryDocs){for(var i=0;i<this._hiddenFields.length;i++){if(this._hiddenFields[i]){this[this._hiddenFields[i]].value="";}}}this.tb_Description.set("value","");this.tb_realFileName.set("value","");this._showing=false;},_receiveRelationships:function(rels){if(this.fileType==File.fileType.ftLibraryDocs){return;}for(var rel in rels){if(this["_"+rel]){this["_"+rel].value=rels[rel];}else{if(rel){this["_"+rel]=dojo.create("input",{"type":"hidden","name":rel,"value":rels[rel]},this._postForm);this._hiddenFields.push("_"+rel);}}}this._userId.value=_8cc.getClientContextByKey("userID")||"";this._attachDate.value=_8cc.Convert.toIsoStringFromDate(new Date());},_buildPostUrl:function(){var _8d8=[];_8d8.push(/https/i.test(window.location.protocol)?"https":"http");_8d8.push("://");_8d8.push(window.location.hostname);if(window.location.port&&window.location.port!==80){_8d8.push(":",window.location.port);}_8d8.push("/");_8d8.push(_8cc.getVirtualDirectoryName());if(this.fileType!=File.fileType.ftLibraryDocs){_8d8.push("/slxdata.ashx/slx/system/-/attachments/file?iframe=true&format=xml");}else{if(!Sage.Library||!Sage.Library.Manager||!Sage.Library.FileHandler){_8cb.showError(this.invalidContext);return null;}var _8d9=Sage.Library.FileHandler.findDirectoryId();var sUrl=_8ca.substitute("/slxdata.ashx/slx/system/-/libraryDirectories('${0}')/documents/file?iframe=true&format=xml",[_8d9]);_8d8.push(sUrl);}var url=_8d8.join("");return url;},_iframeLoad:function(e){var self;if(has("ie")<9){self=window.FallbackFilePicker;}else{self=this;}var _8da=self._iframe;if(_8da.contentDocument.body&&_8da.contentDocument.body.innerText){if(_8da.contentDocument.body.innerText=="RuntimeErrorPostTooLarge"){self.hide();_8cb.showError(self.fileTooLargeError);return;}}try{var _8db=function(_8dc){if(_8dc&&_8dc.hasOwnProperty("message")){var _8dd=_8dc.message;if(_8dc.hasOwnProperty("applicationCode")&&_8cd.isSDataExceptionDiagnoses(_8dc.applicationCode)){var _8de=function(){var obj={};var _8df=_8dc.applicationCode.split("; ");_8d4.forEach(_8df,function(item){if(item&&dojo.isString(item)&&item.indexOf("=")!==-1){var _8e0=item.split("=");var name=_8e0[0].trim();var _8e1=_8e0[1].trim();obj[name]=_8e1;}});return obj;};var info=_8de();if(info&&info.hasOwnProperty("slxErrorId")){_8dd+="<br /><br />";_8dd+=self.slxErrorIdInfo+info.slxErrorId;}}_8cb.showError(_8dd);}};if(has("ie")){var obj={};if(has("ie")<9){var sXml=(_8da.contentDocument.body)?_8da.contentDocument.body.innerText:null;if(sXml&&dojo.isString(sXml)){sXml=sXml.trim();var _8e2=sXml.split("\n");if(dojo.isArray(_8e2)){_8d4.forEach(_8e2,function(line,idx){var pos=line.indexOf("- ");if(pos===0){_8e2[idx]=line.replace("- ","");}else{pos=line.indexOf("  ");if(pos===0){_8e2[idx]=line.replace("  ","");}}});sXml=_8e2.join("");obj=_8cd.getSDataDiagnosis(sXml,true);_8db(obj);}}}else{if(_8da.contentDocument.documentElement&&_8da.contentDocument.documentElement.childNodes.length>=2){if(_8da.contentDocument.documentElement.childNodes[1].tagName==="sdata:diagnosis"){var _8e3=_8da.contentDocument.documentElement.childNodes[1];for(var i=0;i<_8e3.childNodes.length;i++){var node=_8e3.childNodes[i];if(node.nodeName.indexOf("sdata:")===0){obj[node.nodeName.replace("sdata:","")]=node.textContent;}}_8db(obj);}}}}}catch(err){if(typeof console!=="undefined"){}}if(_8da.contentDocument.URL&&typeof _8da.contentDocument.URL!=="undefined"){if(self.fileType!=File.fileType.ftLibraryDocs){if(_8da.contentDocument.URL.indexOf("attachments")>0){dojo.publish("/entity/attachment/create","");self.hide();}}else{if(_8da.contentDocument.URL.indexOf("/documents/file")>0){dojo.publish("/sage/library/manager/libraryDocuments/refresh",null);self.hide();}}}},_onNewFile:function(_8e4){if(_8e4.srcElement&&_8e4.srcElement.value.length>0){if(_8e4.srcElement.value){var _8e5=_8e4.srcElement.value.replace(/^.*[\\\/]/,"");if(this.tb_Description.get("value")===""){var _8e6=_8e5.split("."),_8e7="";if(_8e6.length<=2){_8e7=_8e6[0];}else{for(var i=0;i<_8e6.length-1;i++){if(i>0){_8e7+=".";}_8e7+=_8e6[i];}}this.tb_Description.set("value",_8e7);}this.tb_realFileName.set("value",_8e5);}}},_okClick:function(){if(this.tb_realFileName.get("value")===""){_8cb.showInfo(this.pleaseSelectFile);return;}if(this.fileType===File.fileType.ftLibraryDocs){this._postForm.action=this._buildPostUrl();}this._postForm.submit();if(!this._dialog._standby){_8cf.mixin(this._dialog,new _8d0());}this._dialog.showLoading();},_cancelClick:function(){this.hide();}});return _8d6;});},"Sage/Utility/File/AddURLAttachment":function(){define(["dijit/_Widget","Sage/_Templated","dojo/string","dijit/Dialog","Sage/UI/_DialogLoadingMixin","dojo/_base/lang","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/MainView/BindingsManager","Sage/Utility/File","Sage/Utility","Sage/Utility/File/Attachment","Sage/UI/Dialogs","dojo/i18n","dojo/i18n!./nls/AddURLAttachment","dojo/_base/declare"],function(_8e8,_8e9,_8ea,_8eb,_8ec,_8ed,_8ee,_8ef,_8f0,_8f1,_8f2,_8f3,_8f4,i18n,_8f5,_8f6){var _8f7=_8f6("Sage.Utility.File.AddURLAttachment",[_8e8,_8e9],{descriptionText:"Description",urlText:"URL",titleText:"Add URL Attachment",okText:"OK",cancelText:"Cancel",requestFailedMsg:"The requested operation could not be completed, please try again later.",urlBlankMsg:"The URL or description property cannot be blank.",attachmentId:"",attachment:false,widgetsInTemplate:true,_bindingMgr:false,_store:false,id:"",widgetTemplate:new Simplate(["<div>","<div dojoType=\"dijit.Dialog\" id=\"addUrlAttachDialog\" title=\"{%= $.titleText %}\" dojoAttachPoint=\"_dialog\">","<div  class=\"attachment-properties-form\">","<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"160\" >","<div dojoType=\"dijit.form.TextBox\" label=\"{%= $.urlText %}\" id=\"{%= $.id %}_tb_Url\" dojoAttachPoint=\"tb_Url\" ></div>","<div dojoType=\"dijit.form.TextBox\" label=\"{%= $.descriptionText %}\" name=\"description\" id=\"{%= $.id %}_tb_Description\" dojoAttachPoint=\"tb_Description\" maxlength=\"128\" ></div>","</div>","<div class=\"general-dialog-actions\">","<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btnOK\" name=\"_btnOK\" dojoAttachPoint=\"_btnOK\" dojoAttachEvent=\"onClick:_okClick\" >{%= $.okText %}</div>","<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btnCancel\" name=\"_btnCancel\" dojoAttachPoint=\"_btnCancel\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $.cancelText %}</div>","</div>","</div>","</div>","</div>"]),postMixInProperties:function(){dojo.mixin(this,i18n.getLocalization("Sage.Utility.File","AddURLAttachment"));this.inherited(arguments);},show:function(){this._dialog.show();if(!this._dialog._standby){_8ed.mixin(this._dialog,new _8ec());}this._loadData();},hide:function(){this.attachmentId="";this.attachment=false;if(this._dialog._standby){this._dialog.hideLoading();}this._dialog.hide();},_loadData:function(){if(this._dialog._standby){this._dialog.showLoading();}if(!this._store){this._store=new _8ee({include:[],resourceKind:"attachments",service:_8ef.getService("system")});}this._store.newItem({onComplete:this._receiveAttachment,onError:this._requestFail,scope:this});},_receiveAttachment:function(_8f8){if(this._dialog._standby){this._dialog.hideLoading();}this.attachment=_8f8;_8f3.getKnownRelationships(this._receiveRelationships,this);},_ensureBindings:function(){if(!this._bindingMgr){this._bindingMgr=new _8f0({defaultBinding:{boundEntity:this.attachment},items:[{boundWidget:this.tb_Description,entityProperty:"description"},{boundWidget:this.tb_Url,entityProperty:"url",onChange:dojo.hitch(this,this._urlChange)}]});}},_bind:function(){if(!this._bindingMgr.boundEntity||(this.attachment.$key!==this._bindingMgr.boundEntity.$key)){this._bindingMgr.setBoundEntity(this.attachment);}else{this._bindingMgr.bind();}if(this._dialog._standby){this._dialog.hideLoading();}},_receiveRelationships:function(rels){this.attachment=_8ed.mixin(this.attachment,rels);this.attachment.user={"$key":_8f2.getClientContextByKey("userID")||""};this.attachment.attachDate=_8f2.Convert.toIsoStringFromDate(new Date());this._ensureBindings();this._bind();},_urlChange:function(){var desc=this.tb_Description.get("value");if(!desc){var _8f9=this.tb_Url.get("value");if(_8f9){var r=new RegExp(/\.([\w]*)/);var _8fa=r.exec(_8f9);if(_8fa.length>1){this.tb_Description.set("value",_8fa[1]);}}}},_cancelClick:function(){this.hide();},_okClick:function(){if(this._dialog._standby){this._dialog.showLoading();}if((this.attachment.url===null)||(this.attachment.url.trim()==="")){_8f4.showError(this.urlBlankMsg);return;}if((this.attachment.description===null)||(this.attachment.description.trim()==="")){_8f4.showError(this.urlBlankMsg);return;}this._saveAndHide();},_saveAndHide:function(){if(this._dialog._standby){this._dialog.showLoading();}var self=this;window.setTimeout(function(){var _8fb=self.attachment;self._store.saveNewEntity(_8fb,function(_8fc){dojo.publish("/entity/attachment/create",_8fc);this.hide();},self._requestFail,self);},10);},_requestFail:function(req){_8f4.showError(this.requestFailedMsg);this.hide();}});return _8f7;});},"Sage/Utility/File/GoogleDocPicker":function(){define(["dijit/_Widget","dijit/tree/TreeStoreModel","dijit/Dialog","dijit/Tree","dojo/window","dojo/data/ItemFileReadStore","dojo/i18n!./nls/GoogleDocPicker","dojo/_base/declare"],function(_8fd,_8fe,_8ff,Tree,_900,_901,_902,_903){var _904=_903("Sage.Utility.File.GoogleAuthModule",null,{couldNotOpenWindowMsg:"Could not open authentication window - please check your popup blocker settings.",scope:"",authUrl:"",constructor:function(opts){this.scope=opts.authUrl;dojo.mixin(this,opts);dojo.mixin(this,_902);},login:function(){var r=this;this._loadGoogleLibrary(function(){google.load("gdata","2.0",{"callback":function(){google.gdata.onLoad();if(google.accounts.user.checkLogin(r.authUrl)){r.onLoggedIn();}else{window.googleAuthModule=r;var win=window.open("GoogleAuth.aspx","_blank");setTimeout(function(){var _905=false;if(typeof win=="undefined"){_905=true;}else{if(win&&win.closed){_905=false;}else{if(win&&!win.outerHeight){_905=true;}}}if(_905){alert(r.couldNotOpenWindowMsg);}},3000);}}});});},logout:function(){if(google.accounts.user.checkLogin(this.authUrl)){google.accounts.user.logout();}},onLoggedIn:function(){},_loadGoogleLibrary:function(_906){if(typeof google!=="undefined"){_906();}else{var _907="googleCallback_"+String(Math.random()).replace(/^0\./,"");window[_907]=_906;var _908=document.createElement("script");_908.src="https://www.google.com/jsapi?callback="+_907;_908.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(_908);}}});var _909=_903("Sage.Utility.File.GoogleDocPicker",_8fd,{id:"",googleDocumentsTitle:"Google Documents",pick:function(){var auth=new _904({authUrl:"https://docs.google.com/feeds"});dojo.connect(auth,"onLoggedIn",this,this._onLoggedInHandler);auth.login();},_onLoggedInHandler:function(){var svc=new google.gdata.client.GoogleService("writely","mytest");svc.getFeed("https://docs.google.com/feeds/documents/private/full?showfolders=true",dojo.hitch(this,"_displayFeed"),function(e){},undefined,true);},_displayFeed:function(feed){var root=this._parseFeed(feed);dojo.ready(dojo.hitch(this,function(){var _90a=new _901({data:{items:[{children:root,title:"Root",root:true}]}});var _90b=new _8fe({store:_90a,childrenAttrs:["children"],labelAttr:"title",query:{}});var tree=new Tree({model:_90b,showRoot:false,openOnDblClick:true});dojo.connect(tree,"onDblClick",dojo.hitch(this,function(item,node,evt){this.onDocumentSelected(item.title,item.url);}));dojo.connect(tree,"onLoad",dojo.hitch(this,function(){var dlg=new _8ff({title:_902.googleDocumentsTitle,content:tree});dlg.startup();dlg.containerNode.style.maxHeight=dojo.window.getBox().h/3+"px";dlg.containerNode.style.minWidth="200px";dlg.containerNode.style.overflow="auto";dlg.show();}));}));},_parseFeed:function(feed){var _90c=[];var _90d=feed.feed.entry;if(_90d){for(var i=0;i<_90d.length;i++){var _90e=_90d[i];var _90f={id:_90e.id.$t,title:_90e.title.$t,feedentry:_90e};dojo.some(_90e.category,function(x){if(x.scheme=="http://schemas.google.com/g/2005#kind"){_90f.type=x.label;return true;}});_90c.push(_90f);}}_90c.sort(function(a,b){return a.title>b.title?1:(a.title<b.title?-1:0);});var root=_90c.slice(0);var _910=0;dojo.forEach(_90c,function(item,i){var _911=false;dojo.forEach(item.feedentry.link,function(link){if(link.rel=="http://schemas.google.com/docs/2007#parent"){dojo.some(_90c,function(_912){if(link.href==_912.id){_911=true;if(!_912.children){_912.children=[];}_912.children.push(item);}});}if(link.rel=="alternate"){item.url=link.href;}});if(_911){root.splice(i-_910,1);_910++;}});return root;},onDocumentSelected:function(_913,url){}});return _909;});},"Sage/UI/SLXPreviewGrid":function(){define(["./SLXPreviewGrid/Grid","./SLXPreviewGrid/FilterPanel","./SLXPreviewGrid/Filter/DateRange","./SLXPreviewGrid/Filter/Text"],function(Grid,_914,_915,Text){return {Grid:Grid,FilterPanel:_914,Filter:{DateRange:_915,Text:Text}};});},"Sage/UI/SLXPreviewGrid/Grid":function(){define(["Sage/UI/EditableGrid","dijit/layout/BorderContainer","dijit/form/SimpleTextarea","dijit/_Widget","dijit/_Templated","dojo/i18n!../nls/SLXPreviewGrid","dojo/_base/declare"],function(_916,_917,_918,_919,_91a,_91b,_91c){var Grid=_91c("Sage.UI.SLXPreviewGrid.Grid",[_919,_917],{filterText:"Filter",previewField:"",columns:null,tools:null,slxContext:null,dblClickAction:null,contextualConditionFunction:null,liveSplitters:true,gutters:false,gridNodeId:"",_filter:null,_grid:null,_preview:null,constructor:function(){this.connections=[];},amIInATab:function(){if(this.slxContext&&this.slxContext.workspace){return (this.slxContext.workspace.indexOf("TabWorkspace")>-1);}return false;},isMyTabVisible:function(){if(this.amIInATab()&&TabControl){return TabControl.getState().isTabVisible(this.slxContext.tabId);}return true;},postMixInProperties:function(){dojo.mixin(this,_91b);this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);if(this.previewField){this._preview=this._buildPreview();}this._filter=this._buildFilter();this._grid=this._buildGrid();},startup:function(){if(this._started){return;}this.inherited(arguments);this.domNode.style.visibility="visible";if(this._preview){var _91d=this.getSplitter("right");this.connections.push(dojo.connect(_91d,"_stopDrag",this,function(){this._setPref("previewSize",this._preview.domNode.style.width);this.layout();}));}},getSelectedRecords:function(_91e){var _91f=this._grid.selection.getSelected();return dojo.map(_91f,function(rec){var _920={};dojo.forEach(_91e,function(_921){_920[_921]=this._grid.store.getValue(rec,_921);},this);return _920;},this);},refresh:function(){this._grid.refresh();},setSortIndex:function(_922,_923){this._grid.setSortIndex(_922,_923);},setSortColumn:function(_924,_925){var _926=0;for(var i=0;i<this.columns.length;i++){if(_924===this.columns[i].field){_926=i;}}this._grid.setSortIndex(_926,_925);},addAssociatedItems:function(){this._grid.addAssociatedItems.apply(this._grid,arguments);},onSelected:function(){},_buildPreview:function(){var _927=new _918({style:"height:100%; overflow: auto; width: "+this._getPref("previewSize","150px"),region:"right",splitter:true,readOnly:true});this.addChild(_927);dojo.addClass(_927.domNode,"preview-grid-text");return _927;},_buildGrid:function(){var _928=[];if(this._filter){_928.push({id:this.id+"_Filter",imageClass:"icon_Filter_16x16",tooltip:this.filterText,handler:dojo.hitch(this,function(){this._filter.toggle();this.layout();})});}if(this.tools){dojo.forEach(this.tools,function(item){_928.push(item);});}var _929={fn:this.contextualConditionFunction||this.contextualCondition,conditions:this._filter?this._filter.getQuery():null};if(!this.storeOptions){throw ("SLXPreviewGrid configuration is missing storeOptions");}this.storeOptions.select=this.storeOptions.select||[];this.storeOptions.select.push("Id");this.storeOptions.select.push(this.previewField);var grid=new _916({id:this.domNode.id+"_grid",gridNodeId:this.id,tabId:this.slxContext.tabId,context:this.slxContext,region:"center",columnDefaults:{editable:false},columns:this.columns,tools:_928,contextualCondition:_929,storeOptions:this.storeOptions,keepSelection:true});this.connections.push(dojo.connect(grid,"onSelected",this,this._updatePreviewText));this.connections.push(dojo.connect(grid.store,"onSuccess",this,this._updatePreviewText));if(this.dblClickAction){dojo.connect(grid,"onRowDblClick",this,function(e){var rec=grid.getItem(e.rowIndex);var id=grid.store.getValue(rec,"$key");this.dblClickAction(id,rec);});}if(this._filter){dojo.connect(this._filter,"onFilterApply",this,function(_92a){_929.conditions=this._filter.getQuery();grid.refresh();});}this.addChild(grid);return grid;},destroy:function(){var len=this.connections.length;for(var i=0;i<len;i++){dojo.disconnect(this.connections.pop());}this.inherited(arguments);},resetContextualCondition:function(_92b){this.contextualConditionFunction=_92b;var _92c={fn:this.contextualConditionFunction||this.contextualCondition,conditions:this._filter?this._filter.getQuery():null};this._grid.resetContextualCondition(_92c);},_updatePreviewText:function(){if(this.previewField){var sel=this._grid.selection.getSelected();var note="";if(sel.length>0&&sel[0]){note=sel[0][this.previewField]||this._grid.store.getValue(sel[0],this.previewField);}this._preview.set("value",note);}},_buildFilter:function(){var _92d=[];dojo.forEach(this.columns,function(cc){if(cc.filterConfig){var fc=dojo.mixin(dojo.clone(cc),cc.filterConfig);if(!fc.label){fc.label=cc.name;}_92d.push(fc);}});if(_92d.length===0){return null;}var _92e=new Sage.UI.SLXPreviewGrid.FilterPanel({id:this.id+"_filterpanel",region:"top",filterConfig:_92d,style:"display: none"});this.addChild(_92e);return _92e;},_getPref:function(_92f,_930){var _931=window["localStorage"];var key=this.id+_92f;if(_931&&_931[key]){return _931[key];}return _930;},_setPref:function(_932,_933){var _934=window["localStorage"];if(_934){_934[this.id+_932]=_933;}}});return Grid;});},"Sage/UI/SLXPreviewGrid/FilterPanel":function(){define(["dijit/form/Button","dijit/_Widget","Sage/Utility/_LocalStorageMixin","dojo/i18n!../nls/SLXPreviewGrid","dojo/_base/declare"],function(_935,_936,_937,_938,_939){var _93a=_939("Sage.UI.SLXPreviewGrid.FilterPanel",[_936,_937],{_filters:null,_state:{},STORE_NS:"SAGE_UI_EDITABLEGRID",STORE_KEY_FILTERINFO:"_FILTER_INFO_",applyText:"Apply",resetText:"Reset",constructor:function(){this._filters=[];},postMixInProperties:function(){dojo.mixin(this,_938);this._loadState();this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);this.domNode.className="filterPanel";var left=document.createElement("div");left.style.styleFloat=left.style.cssFloat="left";left.style.width="39%";var _93b=document.createElement("div");_93b.style.styleFloat=_93b.style.cssFloat="left";_93b.style.width="39%";var _93c=this._state["filterStates"]||{};var _93d=left;dojo.forEach(this.filterConfig,function(item,_93e,ar){if(_93d===left&&_93e+1>ar.length/2){_93d=_93b;}var _93f=document.createElement("div");_93f.className="filterItem";var _940=this._createFilter(item);if(_93c[item.field]&&_940.applyState){_940.applyState(_93c[item.field]);}this._filters.push(_940);if(item.label){var lbl=document.createElement("label");lbl.appendChild(document.createTextNode(item.label+":"));lbl.className="filterPanelLabel";lbl.htmlFor=_940.domNode.id;_93f.appendChild(lbl);}_93f.appendChild(_940.domNode);_93d.appendChild(_93f);},this);var _941=document.createElement("div");_941.style.styleFloat=_941.style.cssFloat="left";_941.style.width="20%";_941.className="filterButtonPanel";var _942=new _935({label:this.applyText});_941.appendChild(_942.domNode);dojo.connect(_942,"onClick",this,"_applyFilter");var _943=new _935({label:this.resetText});_941.appendChild(_943.domNode);dojo.connect(_943,"onClick",this,"_resetFilter");dojo.connect(this.domNode,"keydown",this,function(e){if(e.keyCode===13){this._applyFilter();}});this.domNode.appendChild(left);this.domNode.appendChild(_93b);this.domNode.appendChild(_941);},startup:function(){this.inherited(arguments);dojo.forEach(this._filters,function(item){item.startup();});if(this._state["visible"]&&this._state["visible"]===true){this.toggle();}},destroy:function(){dojo.forEach(this._filters,function(item){item.destroy(false);});dojo.forEach(dijit.findWidgets(this.domNode),function(wid){wid.destroy(false);});this.inherited(arguments);},getQuery:function(){var c=[];dojo.forEach(this._filters,function(f){var q=f.getQuery();if(q){c.push(q);}});return c.length>0?c.join(" and "):null;},toggle:function(){if(this.domNode.style.display==="none"){this.domNode.style.display="block";this._state["visible"]=true;}else{this.domNode.style.display="none";this._state["visible"]=false;}this._saveState();},onFilterApply:function(_944){},_createFilter:function(_945){var c=_945.widgetType;return new c(_945);},_applyFilter:function(){var _946={};for(var i=0;i<this._filters.length;i++){var f=this._filters[i];if(f.getState){_946[f.field]=f.getState();}}this._state["filterStates"]=_946;this._saveState();this.onFilterApply(this.getQuery());},_resetFilter:function(){dojo.forEach(this._filters,function(f){f.reset();});this._applyFilter();},_saveState:function(){var key=this.STORE_KEY_FILTERINFO+this.id;this.saveToLocalStorage(key,this._state,this.STORE_NS);},_loadState:function(){var key=this.STORE_KEY_FILTERINFO+this.id;this._state=this.getFromLocalStorage(key,this.STORE_NS)||{};}});return _93a;});},"Sage/UI/SLXPreviewGrid/Filter/DateRange":function(){define(["dijit/form/DateTextBox","dijit/_Widget","dijit/_Templated","Sage/UI/SLXPreviewGrid/Filter/_previewGridFilterMixin","dojo/_base/declare"],function(_947,_948,_949,_94a,_94b){var _94c=_94b("Sage.UI.SLXPreviewGrid.Filter.DateRange",[_948,_949,_94a],{templateString:"<div>"+"<input data-dojo-type='dijit.form.DateTextBox' dojoAttachPoint='dteFrom'> - "+"<input data-dojo-type='dijit.form.DateTextBox' dojoAttachPoint='dteTo'>"+"</div>",widgetsInTemplate:true,getQuery:function(){var _94d=function(_94e,_94f){if(!_94e){return "";}if(_94e.constructor!==Date){_94e=Date.parse(_94e);}if(_94f){_94e.setUTCDate(_94e.getUTCDate()+1);}var pad=function(n){return n<10?"0"+n:n;};return _94e.getUTCFullYear()+"-"+pad(_94e.getUTCMonth()+1)+"-"+pad(_94e.getUTCDate())+"T"+pad(_94e.getUTCHours())+":"+pad(_94e.getUTCMinutes())+":"+pad(_94e.getUTCSeconds())+"Z";};var _950=_94d(this.dteFrom.get("value"));var dTo=_94d(this.dteTo.get("value"),true);var qry="";if(_950){qry=this.field+" ge '"+_950+"'";}if(dTo){if(qry){qry+=" and ";}qry+=this.field+" lt '"+dTo+"'";}if(this.params["getTimeless"]){if(qry){var _951=false;qry="(("+qry+" and not Timeless) or (";var _952=Sage.Utility.Activity.formatTimelessStartDate(this.dteFrom.get("value"));var _953=Sage.Utility.Activity.formatTimelessEndDate(this.dteTo.get("value"));if(_952){qry+=this.field+" gt '"+_952+"'";_951=true;}if(_953){if(_951){qry+=" and ";}qry+=this.field+" lt '"+_953+"'";}qry+=" and Timeless))";}}return qry;},reset:function(){this.dteFrom.set("value",0);this.dteTo.set("value",0);},getState:function(){return {"dFrom":this.dteFrom.get("value"),"dTo":this.dteTo.get("value")};},applyState:function(_954){if(_954){if(_954["dFrom"]){this.dteFrom.set("value",_954["dFrom"]);}if(_954["dTo"]){this.dteTo.set("value",_954["dTo"]);}}}});return _94c;});},"Sage/UI/SLXPreviewGrid/Filter/_previewGridFilterMixin":function(){define(["dojo/_base/declare"],function(_955){return _955("Sage.UI.SLXPreviewGrid.Filter._previewGridFilterMixin",null,{getQuery:function(){var v=this.get("value");if(v){return "upper("+this.field+") like '%"+v.replace("'","''").toUpperCase()+"%'";}return "";},reset:function(){this.set("value","");},getState:function(){return {"value":this.get("value")};},applyState:function(_956){if(_956){this.set("value",_956["value"]||"");}}});});},"Sage/UI/SLXPreviewGrid/Filter/Text":function(){define(["dijit/form/TextBox","Sage/UI/SLXPreviewGrid/Filter/_previewGridFilterMixin","dojo/_base/declare"],function(_957,_958,_959){var text=_959("Sage.UI.SLXPreviewGrid.Filter.Text",[_957,_958],{postMixInProperties:function(){this.type="text";this.style="width: 200px";this.inherited(arguments);},reset:function(){this.set("displayedValue","");this.set("value","");}});return text;});},"Sage/Utility/Workspace":function(){define(["dojo/_base/declare","dijit/registry"],function(_95a,_95b){var _95c=_95a("Sage.Utility.Workspace",[],{});_95c.getDetailTabWorkspaceContainer=function(){var _95d=_95b.byId("tabContent");var _95e=(_95d)?_95d:_95b.byId("mainContentDetails");return _95e;};return _95c;});},"Sage/UI/Controls/Lookup":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","Sage/UI/ConditionManager","Sage/UI/SDataLookup","dojo/dom-attr","Sage/UI/Controls/EntityInfoToolTip","dojo/i18n!./nls/Lookup","dojo/text!./templates/Lookup.html","dojo/_base/declare"],function(_95f,_960,_961,_962,_963,_964,_965,_966,_967,_968){var _969=_968("Sage.UI.Controls.Lookup",[_961,_95f,_960],{id:"lookup",config:null,selectedObject:null,showEntityInfoToolTip:false,disabled:false,required:false,allowClearingResult:false,buttonToolTip:"Find",closeButtonToolTip:"Remove",_tooltip:false,_setSelectedObjectAttr:function(_96a){this.textbox.value=(_96a)?_96a.$descriptor:"";this.selectedObject=_96a;this._onChange(_96a);},_getSelectedObjectAttr:function(){return this.selectedObject;},_setShowEntityInfoToolTipAttr:function(_96b){this.showEntityInfoToolTip=_96b;if(!this.domNode){return;}this._tooltip=(_96b)?this._createToolTip():false;},_getShowEntityInfoToolTipAttr:function(){return this.showEntityInfoToolTip;},_createToolTip:function(){return new _965({connectId:[this.domNode],position:["below"],entityName:this.config.storeOptions.resourceKind,entityId:(this.selectedObject&&this.selectedObject["$key"])?this.selectedObject["$key"]:""});},_setAllowClearingResultAttr:function(_96c){this.allowClearingResult=_96c;if(_96c){dojo.removeClass(this.clearButton,"display-none");}else{dojo.addClass(this.clearButton,"display-none");}},_getAllowClearingResultAttr:function(){return this.allowClearingResult;},_setDisabledAttr:function(_96d){this.disabled=_96d;_964.set(this.focusNode,"disabled",_96d);this.focusNode.setAttribute("aria-disabled",_96d);if(_96d){dojo.style(this.clearButton,"visibility","hidden");dojo.style(this.clearButton,"display","none");dojo.style(this.lookupButton,"visibility","hidden");dojo.style(this.lookupButton,"display","none");}else{dojo.style(this.clearButton,"visibility","");dojo.style(this.clearButton,"display","");dojo.style(this.lookupButton,"visibility","");dojo.style(this.lookupButton,"display","");}},_getDisabledAttr:function(){return this.disabled;},_onChange:function(_96e){if(this._tooltip){this._tooltip.set("entityId",(_96e&&_96e["$key"])?_96e["$key"]:"");}this.onChange(_96e);},onChange:function(_96f){},templateString:_967,widgetsInTemplate:false,constructor:function(_970){this.inherited(arguments);dojo.mixin(this,_966);},hideTooltip:function(){if(this._tooltip){this._tooltip.close();}},postCreate:function(){var self=this;dojo.connect(this.lookupButton,"onclick",this.lookupButton,function(){if(!self.get("disabled")){var _971=new _963(self.config);_971.doSelected=function(_972){self.set("selectedObject",_972[0]);_971.lookupDialog.hide();};_971.showLookup();var _973=dojo.connect(_971.lookupDialog,"onHide",_971,function(){dojo.disconnect(_973);this.destroy();});}},true);dojo.connect(this.clearButton,"onclick",null,function(){if(!self.get("disabled")){self.textbox.value="";self.set("selectedObject",null);}},true);}});return _969;});},"Sage/UI/Controls/EntityInfoToolTip":function(){define(["dijit/Tooltip","Sage/Data/SingleEntrySDataStore","Sage/Utility","dojo/string","dojo/html","dojo/i18n!./nls/EntityInfoToolTip","dojo/_base/lang","dojo/_base/declare"],function(_974,_975,util,_976,_977,_978,lang,_979){var _97a=_979("Sage.UI.Controls.EntityInfoToolTip",_974,{entityName:"",entityId:"",dataProps:[],include:[],_store:null,_storeOptions:null,constructor:function(_97b){lang.mixin(this,_978);this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this.label="Loading...";},onShow:function(_97c){if(!this.entityId||this.entityId.trim()===""){this.set("label",this.noInfoText);}else{if(!this._store){if(this.dataProps.length<1){this.dataProps=this._findPredefined(this.entityName);}if(this.dataProps.length<1){this.set("label",this.errorText);return;}this._setupStore();this._fetchData(_97c);}}this.inherited(arguments);},_setDataPropsAttr:function(_97d){this._store=false;this.set("label",this.loadingText);this.dataProps=_97d;},_getDataPropsAttr:function(){return this.dataProps;},_setEntityIdAttr:function(_97e){this._store=false;this.set("label",(_97e==="")?this.noInfoText:this.loadingText);this.entityId=_97e;},_getEntityIdAttr:function(){return this.entityId;},_setupStore:function(){var _97f=[],sel="",_980=[],_981={};for(var i=0;i<this.dataProps.length;i++){sel=this.dataProps[i].property;if(sel.indexOf(".")>0){var _982=sel.split("."),inc="";for(var p=0;p<_982.length-1;p++){inc+=_982[p];if(!_981[inc]){_980.push(inc);_981[inc]=true;}inc+="/";}sel=sel.replace(/\./g,"/");}_97f.push(sel);}var self=this;var _983={include:dojo.isArray(this.include)?this.include:[],select:_97f,resourceKind:self.entityName};if(_980.length>0){_983["include"]=_980;}var _984=new _975(_983);self._storeOptions=_983;self._store=_984;},_fetchData:function(_985){var t=_985;this._store.fetch({predicate:"\""+this.entityId+"\"",onComplete:function(data){this.displayResults(data,t);},onError:function(e){this.set("label",this.errorText);},scope:this});},displayResults:function(data,_986){var html="<table class=\"propertyTip\">";for(var i=0;i<this.dataProps.length;i++){var dp=this.dataProps[i];var val=util.getValue(data,dp.property);if(val){html+=_976.substitute("<tr><td class=\"caption\">${0}</td><td class=\"value\">${1}</td></tr>",[dp.label,val]);}}html+="</table>";this.set("label",html);this.close();this.open(_986);},_findPredefined:function(_987){switch(_987){case "accounts":return [{label:this.mainText||"Main Phone:",property:"MainPhone"},{label:this.faxText||"Fax:",property:"Fax"},{label:this.tollFreeText||"Toll Free",property:"TollFree"},{label:this.urlText||"Web URL",property:"WebAddress"}];case "contacts":return [{label:this.workText||"Work:",property:"WorkPhone"},{label:this.mobileText||"Mobile:",property:"Mobile"},{label:this.faxText||"Fax:",property:"Fax"},{label:this.emailText||"Email:",property:"Email"}];case "leads":return [{label:this.workText||"Work:",property:"WorkPhone"},{label:this.mobileText||"Mobile:",property:"Mobile"},{label:this.faxText||"Fax:",property:"Fax"},{label:this.emailText||"Email:",property:"Email"}];case "tickets":return [{label:this.contactNameText||"Contact:",property:"Contact.Name"},{label:this.phoneText||"Phone:",property:"Contact.WorkPhone"},{label:this.emailText||"Email:",property:"Contact.Email"}];case "opportunities":return [{label:this.accountText||"Account:",property:"Account.AccountName"},{label:this.mainText||"Main Phone:",property:"Account.MainPhone"}];}return [];}});return _97a;});},"Sage/Utility/UserOptions":function(){define(["Sage/Utility"],function(_988){Sage.namespace("Utility.UserOptions");Sage.Utility.UserOptions={getConvertedOptionValue:function(_989,_98a){_98a=_98a.toLowerCase();var _98b=_98a;switch(_989.toUpperCase()){case "DEFAULTCALENDARVIEW":var _98c=/^(month|2)$/i;var _98d=/^(week|1)$/i;var _98e=/^(workweek|3)$/i;var _98f=/^(day|0)$/i;if(_98c.test(_98a)){_98b="month";}else{if(_98d.test(_98a)){_98b="week";}else{if(_98e.test(_98a)){_98b="workweek";}else{if(_98f.test(_98a)){_98b="day";}else{_98b="day";}}}}break;case "WORKWEEKSUN":case "WORKWEEKMON":case "WORKWEEKTUE":case "WORKWEEKWED":case "WORKWEEKTHU":case "WORKWEEKFRI":case "WORKWEEKSAT":case "REMEMBERUSERS":case "SHOWONOPPORTUNITIES":case "SHOWONREGARDING":case "SHOWONPHONENUMBER":case "SHOWONTIME":var _990=/^(true|yes|T|1)$/i;_98b=_990.test(_98a);break;case "LOADHISTORYONSTART":var _991=/^(true|yes|T|Y|0)$/i;_98b=_991.test(_98a);break;case "DAYSTARTTIME":_98b=this.getHourPart(_98a);if(_98b>24){_98b=9;}break;case "DAYENDTIME":_98b=this.getHourPart(_98a);if(_98b>24){_98b=17;}break;case "NUMEVENTS":case "DEFAULTINTERVAL":_98b=parseInt(_98a);break;default:_98b=_98a;}return _98b;},getHourPart:function(_992){var dt=_992.split(" ");var t,h;if(dt.length>1&&_992.indexOf("-")>0){t=dt[1];if(t){h=t.split(":")[0];}}else{h=_992.split(":")[0];}if(_992.indexOf("pm")>0||_992.indexOf("PM")>0){h=parseInt(h)+12;}return parseInt(h,10);},getDay:function(_993){var _994=_993;if(_993.length>1){var _995=[];_995["SUNDAY"]=0;_995["MONDAY"]=1;_995["TUESDAY"]=2;_995["WEDNESDAY"]=3;_995["THURSDAY"]=4;_995["FRIDAY"]=5;_995["SATURDAY"]=6;_994=_995[_993.toUpperCase()];}if(!_994){_994=1;}return _994;},arraySort:function(a,b){return a-b;}};return Sage.Utility.UserOptions;});},"Sage/MainView/ActivityMgr/ActivityEditorAttendeesTab":function(){define("Sage/MainView/ActivityMgr/ActivityEditorAttendeesTab",["dojo","dijit/_Widget","Sage/_Templated","dojo/_base/declare","Sage/Data/SDataServiceRegistry","Sage/Data/SingleEntrySDataStore","Sage/Data/WritableSDataStore","Sage/Utility","Sage/Utility/Activity","Sage/UI/SLXPreviewGrid","Sage/UI/EditableGrid","dijit/layout/ContentPane","dojo/_base/lang","dojo/DeferredList","dojo/on","dojo/_base/array","dojo/topic","dojo/string","dojo/_base/Deferred","Sage/MainView/ActivityMgr/AttendeeLookup/SpeedSearchLookup","Sage/UI/Controls/SingleSelectPickList","dojo/i18n!./nls/ActivityEditorAttendeesTab","dojox/grid/cells/_base","Sage/Extensions/UI/Columns/Radio","Sage/Extensions/UI/Columns/CheckBox","Sage/Extensions/UI/Columns/PickListSelect","Sage/MainView/ActivityMgr/AttendeeLookup/LookupService"],function(dojo,_996,_997,_998,_999,_99a,_99b,_99c,_99d,_99e,_99f,_9a0,lang,_9a1,on,_9a2,_9a3,_9a4,_9a5,_9a6,_9a7,_9a8,_9a9,_9aa,_9ab,_9ac,_9ad){var _9ae=_998("Sage.MainView.ActivityMgr.ActivityEditorAttendeesTab",[_996,_997],{actEditor:null,lup_Contact:null,lup_Lead:null,self:null,widgetsInTemplate:true,currentPrimaryEntityId:null,userContactAttendees:[],editorMode:null,_activityId:null,_addedAttendees:null,_uncheckItem:null,_initialPrimaryContact:false,_gridStarted:false,_timeZones:[],constructor:function(_9af){lang.mixin(this,_9af);lang.mixin(this,_9a8);var self=this;if(this._timeZones.length==0){Sage.Utility.getTimeZones(function(_9b0){self._timeZones=_9b0;});}},widgetTemplate:new Simplate(["<div>","<div id=\"{%= $.id %}_attendeesGridPlaceholder\" dojoAttachPoint=\"_attendeesGridPlaceholder\" style=\"width:100%;height:100%\"></div>","</div>"]),userContactList:[],_newItems:[],startup:function(_9b1){this._newItems=[];this._addedAttendees=[];if(!this.actEditor){return;}this._activityId=_99c.getCurrentEntityId();this._buildGrid(_9b1);dojo.subscribe("/entity/activity/create",this,this._activitySaved);dojo.subscribe("/entity/activity/change",this,this._activitySaved);this.createLookups();this.self=this;var self=this;},primaryClicked:function(_9b2){_9b2["attendeeTab"]=true;_9b2["PrimaryChecked"]=_9b2.checked;if(_9b2.checked){this._uncheckItem=_9b2;}if(!_9b2["AccountId"]&&_9b2["EntityType"]=="Contact"){_99d._getContactData(_9b2["EntityId"],function(_9b3){if(_9b3["Account"]&&_9b3["Account"]["$key"]){_9b2["AccountId"]=_9b3["Account"]["$key"];}dojo.publish("/entity/activityAttendee/primaryChanged",[_9b2,this]);},this);}else{if(!_9b2["AccountId"]&&_9b2["EntityType"]=="Lead"){_99d._getLeadData(_9b2["EntityId"],function(_9b4){if(_9b4["Account"]&&_9b4["Account"]["$key"]){_9b2["AccountId"]=_9b4["Account"]["$key"];}dojo.publish("/entity/activityAttendee/primaryChanged",[_9b2,this]);},this);}else{dojo.publish("/entity/activityAttendee/primaryChanged",[_9b2,this]);}}},_primaryUnChecked:function(_9b5){if(this.currentPrimaryEntityId!==entityId){}else{}},_getTimeZoneDisplayName:function(_9b6){var _9b7=_9b6;if(this._timeZones&&this._timeZones.length>0){var obj=this._timeZones.filter(function(val){return val.Keyname===_9b6;});if(obj&&obj[0]){_9b7=obj[0].Displayname;}}return _9b7;},_buildGrid:function(_9b8){var _9b9=[];_9b9=[{id:"attendeeSpeedSearch",imageClass:"icon_plus_16x16",handler:this.speedSearch,tooltip:this.tooltip_speedSearch,scope:this},{id:"attendeeAddContact",imageClass:"icon_Contact_Lookup_16x23",handler:this.lookupContacts,tooltip:this.tooltip_AddContact,scope:this},{id:"attendeeeAddLead",imageClass:"icon_Lead_Lookup_16x23",handler:this.lookupLeads,tooltip:this.tooltip_AddLead,scope:this},{id:"attendeeDelete",imageClass:"icon_Delete_16x16",handler:this.deleteAttendees,tooltip:this.tooltip_Delete,scope:this}];var _9ba=this;var _9bb=function(data,_9bc){_9a2.forEach(data,function(item,i){if(item["IsPrimary"]){this.currentPrimaryEntityId=item["EntityId"];}if(item["TimeZone"]){item["TimeZone"]=_9ba._getTimeZoneDisplayName(item["TimeZone"]);}if(_9ba._grid&&_9ba._grid.mode!=="insert"&&_9ba._grid.store&&_9ba._grid.store.dirtyDataCache.isDirty){if(_9ba._grid.store.dirtyDataCache[item["$key"]]){item["RoleName"]=_9ba._grid.store.dirtyDataCache[item["$key"]]["RoleName"];item["IsPrimary"]=_9ba._grid.store.dirtyDataCache[item["$key"]]["IsPrimary"];item["IsAttendee"]=_9ba._grid.store.dirtyDataCache[item["$key"]]["IsAttendee"];}}});};var _9bd=function(_9be,_9bf,_9c0){return;};_998("Sage.Extensions.Activity.primaryContactCheckBox1",dojox.grid.cells.Bool,{format:function(_9c1,_9c2){var _9c3=Sage.Utility.getValue(_9c2,"IsPrimary");var _9c4="<input type=\"checkbox\" disabled=\"disabled\" />";if(_9c3){_9c4="<input type=\"checkbox\" checked=\"checked\" disabled=\"disabled\" />";}return _9c4;}});_998("Sage.Extensions.Activity.isAttendeeCheckBox1",dojox.grid.cells.Bool,{format:function(_9c5,_9c6){var _9c7=Sage.Utility.getValue(_9c6,"IsAttendee");var _9c8="<input type=\"checkbox\" disabled=\"disabled\" />";if(_9c7){_9c8="<input type=\"checkbox\" checked=\"checked\" disabled=\"disabled\" />";}return _9c8;}});var _9c9={};var _9ca={};var _9cb={};if(_9b8){_9c9={field:"IsPrimary",name:this.header_Primary,width:"40px",type:Sage.Extensions.Activity.primaryContactCheckBox1};_9ca={field:"RoleName",name:this.header_RoleName};_9cb={field:"IsAttendee",name:this.header_Attendee,width:"70px",type:Sage.Extensions.Activity.isAttendeeCheckBox1};}else{_9c9={field:"IsPrimary",name:this.header_Primary,width:"40px",editable:true,radioType:"group",type:Sage.Extensions.UI.Columns.CheckBox,checkBoxClicked:this.primaryClicked};_9ca={field:"RoleName",name:this.header_RoleName,pickListName:"Attendee Role",width:"130px",type:Sage.Extensions.UI.Columns.PickListSelect,options:["Decison Maker","Gate Keeper","Other"],editable:true};_9cb={field:"IsAttendee",name:this.header_Attendee,width:"70px",editable:true,radioType:"group",type:dojox.grid.cells.Bool};}var _9cc=[{field:"Name",name:this.header_Name,width:"150px",editable:false},{field:"AccountName",name:this.header_AccountName,width:"150px",editable:false},{field:"EntityType",name:this.header_Type,width:"60px",editable:false},_9c9,_9ca,_9cb,{field:"PhoneNumber",name:this.header_Phone,width:"100px",editable:false},{field:"Email",name:this.header_Email,width:"150px",editable:false},{field:"TimeZone",name:this.header_TimeZone,width:"150px",editable:false}];var _9cd=_99d.getCurrentActivityId();this._activityId=this._activityId||_9cd;var _9ce={columns:_9cc,tools:_9b9,storeOptions:{service:_999.getSDataService("dynamic"),resourceKind:"activityAttendees",select:["EntityType","EntityId","IsPrimary","Name","Description","Notes","AccountId","AccountName"],sort:[{attribute:"Name"}],onDataChange:_9bd,onComplete:_9bb,clearStoreCacheOnDelete:false},slxContext:{"workspace":"",tabId:""},contextualCondition:function(){var _9cf=_9ba._activityId;if(_9cf&&_9cf.length>12){_9cf=_9cf.substr(0,12);}return "Activity.id eq '"+_9cf+"'";},id:this.id+"_attendees",rowsPerPage:40,singleClickEdit:false,enableCheckBoxSelection:false,selectionMode:"single"};if(_9b8){_9ce.readOnly=true;}if(this.editorMode.indexOf("New")==0||this.editorMode==="CompleteUnscheduled"){_9ce.storeOptions["isInsertMode"]=true;}var grid=new _99e.Grid(_9ce,this._attendeesGridPlaceholder);grid.setSortColumn("Name");this._grid=grid._grid;var self=this;dojo.connect(this._grid,"onBlur",function(){if(self._grid.mode!="insert"&&self._grid.store.dirtyDataCache.isDirty){}});grid.startup();this._grid.markClean=function(){if(this.dirtyDataMsgID){var _9d0=dojo.byId(this.dirtyDataMsgID);if(_9d0){dojo.style(dojo.byId(this.dirtyDataMsgID),"display","none");}}var _9d1=Sage.Services.getService("ClientBindingManagerService");if(_9d1){_9d1.clearDirtyAjaxItem(this.id);}};this._grid.markDirty=function(){};dojo.connect(this._grid,"_onFetchComplete",function(){if(self._grid.mode!="insert"&&self._uncheckItem){}if(self._initialPrimaryContact&&self._gridStarted){self._addPrimaryContact();}});},_addMemberToAvailabilityTab:function(_9d2){var _9d3=[];_9d3.push(_9d2);this.actEditor.addMembers(_9d3);},disableGrid:function(){this._grid.readOnly=true;this._grid.refresh();},saveGridChanges:function(_9d4){if(this._grid.mode!=="insert"){this._grid.saveChanges(lang.hitch(this,_9d4));}else{_9d4();}},speedSearch:function(){var self=this;this._speedSearchLookup=new _9a6();this._speedSearchLookup.showLookup();this._speedSearchLookup.doSelected=function(_9d5){self._processLookupResults(_9d5);};},lookupContacts:function(){this.lup_Contact.seedProperty="Account.Id",this.lup_Contact.seedValue=this.actEditor._activityData.AccountId;this.lup_Contact.query.conditions="";this.lup_Contact.buildSDataStoreQueryForSeeding();this.lup_Contact._originalQueryConditions=this.lup_Contact.query.conditions;this.lup_Contact.cancelText=this.lup_Contact.closeText;this.lup_Contact.overrideSeedValueOnSearch=true;this.lup_Contact.showLookup();var _9d6=dojo.connect(this.lup_Contact.lookupDialog,"onHide",this.lup_Contact,function(){dojo.disconnect(_9d6);if(this.seedValue){this.resetGrid();}});},lookupLeads:function(){this.lup_Lead.query.conditions="";this.lup_Lead.buildSDataStoreQueryForSeeding();this.lup_Lead._originalQueryConditions=this.lup_Lead.query.conditions;this.lup_Lead.cancelText=this.lup_Lead.closeText;this.lup_Lead.showLookup();},deleteAttendees:function(){var _9d7=this._grid.selection.getSelected();var self=this;this._grid.deleteSelected(function(){if(_9d7){for(var i=0;i<_9d7.length;i++){var _9d8=_9d7[i];if(_9d8.IsPrimary){_9d8["attendeeTab"]=true;_9d8["PrimaryChecked"]=false;dojo.publish("/entity/activityAttendee/primaryChanged",[_9d8,this]);}if(_9d7[i].EntityType=="Contact"){var _9d9=self._checkUserContactAssociation(_9d7[i].EntityId);if(_9d9){var args={"memberId":_9d9,"attendeesTab":true};self.actEditor._removeMember(args);}}if(i==_9d7.length-1){dojo.publish("/entity/activityAttendee/delete",[null,this]);}}}});},_attendeeExists:function(_9da){var _9db=this._grid.rowCount;for(var i=0;i<_9db;i++){var item=this._grid.getItem(i);if(item.EntityId===_9da){return true;}}return false;},resetPrimary:function(_9dc){var _9dd=this._grid.rowCount;for(var i=0;i<_9dd;i++){var item=this._grid.getItem(i);if(item.EntityId!==_9dc){item.IsPrimary=false;}}},unCheckPrimary:function(_9de){if(this._grid.mode=="insert"){this.resetPrimary();}else{var _9df=this._grid.rowCount;for(var i=0;i<_9df;i++){var item=this._grid.getItem(i);if(item.IsPrimary){this._uncheckItem=item;}}}},resetRows:function(grid,_9e0,_9e1,_9e2){var _9e3=grid.rowCount;for(var i=0;i<_9e3;i++){var item=grid.getItem(i);if(item&&item.EntityId!==_9e2.EntityId){var _9e4="chk_"+this.field+"_"+item.EntityId;dojo.byId(_9e4).checked=false;grid.store.setValue(item,_9e1,false);}else{if(item&&item.EntityId===_9e2.EntityId){var _9e4="chk_"+this.field+"_"+item.EntityId;grid.store.setValue(item,_9e1,true);}}}},resetEntityContext:function(){var _9e5=this.parentRelationshipName;var _9e6=_99c.getCurrentEntityId();if(_9e5==="activityId"){_9e6=_9e6.substr(0,12);}var _9e7=function(){return (_9e5||"'A'")+" eq '"+_9e6+"'";};this._previewGrid.resetContextualCondition(_9e7);this.refresh();},_processLookupResults:function(_9e8){var _9e9=[];var _9ea=[];for(var i=0;i<_9e8.length;i++){if(!this._attendeeExists(_9e8[i].$key)){_9e9.push(this._setAttendeeEntity(_9e8[i]));if(_9e8[i].type=="Contact"){this._getSlxAssociation("Contact",_9e8[i].$key,null,function(data){if(data&&data.length>0&&data[0].UserId){this._updateUserContactList(data[0].UserId,data[0].ContactId);this._getResourceData(_99c.getClientContextByKey("userID"),data[0].UserId,this._addMemberToAvailabilityTab,this);}},this);}}}if(_9e9.length>0){this._addAttendeesToStore(_9e9);}},_processContactLookupResults:function(_9eb){var _9ec=[];for(var i=0;i<_9eb.length;i++){if(!this._attendeeExists(_9eb[i].$key)){_9eb[i].EntityType="Contact";var _9ed=this._setAttendeeEntityFromContactLead("Contact",_9eb[i]);_9ed["IsAttendee"]=true;_9ec.push(_9ed);_9eb[i].New=true;}}if(_9ec.length>0){this._addAttendeesToStore(_9ec);}for(var i=0;i<_9eb.length;i++){if(_9eb[i].New&&_9eb[i].ContactUser&&_9eb[i].ContactUser.$resources&&_9eb[i].ContactUser.$resources.length>0){this._updateUserContactList(_9eb[i].ContactUser.$resources[0].UserId,_9eb[i].$key);this._getResourceData(_99c.getClientContextByKey("userID"),_9eb[i].ContactUser.$resources[0].UserId,this._addMemberToAvailabilityTab,this);}}},_processLeadLookupResults:function(_9ee){var _9ef=[];for(var i=0;i<_9ee.length;i++){if(!this._attendeeExists(_9ee[i].$key)){_9ee[i].EntityType="Lead";var _9f0=this._setAttendeeEntityFromContactLead("Lead",_9ee[i]);_9f0["IsAttendee"]=true;_9ef.push(_9f0);}}if(_9ef.length>0){this._addAttendeesToStore(_9ef);}},getFieldValue:function(_9f1,name){for(var i=0;i<_9f1.length;i++){var _9f2=_9f1[i];if(_9f2.fieldName==name){return _9f2.fieldValue;}}return "";},_setAttendeeEntity:function(_9f3){var _9f4={};_9f4.EntityType=_9f3.type;_9f4.EntityId=_9f3.$key;_9f4.IsPrimary=false;_9f4.Name=_9f3.$descriptor;_9f4.AccountName=this.getFieldValue(_9f3.fields,"account");_9f4.Email=this.getFieldValue(_9f3.fields,"email");_9f4.Description="";_9f4.Notes="";_9f4.TimeZone="";_9f4.PhoneNumber=this.getFieldValue(_9f3.fields,"phone");_9f4.RoleName="";_9f4.general=false;_9f4.IsAttendee=true;return _9f4;},_setAttendeeEntityFromContactLead:function(type,_9f5){var _9f6=false;if(_9f5&&_9f5.$key){_9f6={};_9f6.EntityType=type;_9f6.EntityId=_9f5.$key;_9f6.$key=_9f5.$key;_9f6.IsPrimary=false;_9f6.Name=_9f5.$descriptor;_9f6.$descriptor=_9f5.$descriptor;_9f6.Account=_9f5.Account;_9f6.AccountName=_9f5.AccountName||_9f5.Company;if(type=="Lead"){_9f6.Company=_9f5.Company;_9f6.LeadFullName=_9f5.$descriptor;}_9f6.Company=_9f5.Company;_9f6.Email=_9f5.Email;_9f6.Description="";_9f6.Notes="";if(_9f5.Address){_9f6.TimeZone=_9f5.Address.TimeZone;if(_9f6.TimeZone){_9f6.TimeZone=this._getTimeZoneDisplayName(_9f6.TimeZone);}}_9f6.PhoneNumber=_9f5.WorkPhone;_9f6.RoleName="";_9f6.general=false;}return _9f6;},_getResourceData:function(_9f7,_9f8,_9f9,_9fa){this.accessData=false;if(!this._accessStore){this._accessStore=new _99a({include:["$descriptors"],resourceKind:"activityresourceviews",service:_999.getSDataService("dynamic")});}this._accessStore.fetch({predicate:"'"+_9f8+"-"+_9f7+"'",onComplete:function(_9fb){_9f9.call(_9fa,_9fb);},onError:function(){_9f9.call(_9fa,null);},scope:this});},_getSlxAssociation:function(type,_9fc,_9fd,_9fe,_9ff){this.accessData=false;if(!this._associationStore){this._associationStore=new _99b({include:["$descriptors"],resourceKind:"contactusers",select:["UserId","ContactId","Contact/Name","Contact/Email","Contact/WorkPhone","Contact/AccountName","User/Name"],service:_999.getSDataService("dynamic")});}var _a00="";if(type=="Contact"){_a00=_9a4.substitute("ContactId eq '${0}' ",[_9fc]);}else{if(type=="User"){_a00=_9a4.substitute("UserId eq '${0}' ",[_9fc]);}}this._associationStore.fetch({query:_a00,onComplete:function(_a01){_9fe.call(_9ff,_a01,_9fd);},onError:function(){_9fe.call(_9ff,null);},scope:this});},_updateUserContactList:function(_a02,_a03){if(!this.userContactList[_a02]){this.userContactList[_a02]={"UserId":_a02,"ContactId":_a03};}},_checkUserContactAssociation:function(_a04){var _a05=false;if(this.userContactList){for(var i in this.userContactList){if(this.userContactList[i]["ContactId"]==_a04){_a05=this.userContactList[i]["UserId"];break;}}}return _a05;},_addContactAttendees:function(_a06){var _a07=[];var len=_a06.length;var self=this;for(var i=0;i<len;i++){_a07.push(this._getAssociationData(_a06[i]));}var _a08=new _9a1(_a07);_a08.then(function(_a09){for(var j=0;j<_a09.length;j++){if(_a09[j][1]){self.userContactAttendees.push(_a09[j][1]);}}self._addAttendeesToStore(self.userContactAttendees);self.userContactAttendees=[];});},_getAssociationData:function(_a0a){var d=new _9a5();var _a0b={"last":false};this._getSlxAssociation("User",_a0a,_a0b,function(data,_a0c){if(data&&data.length>0){var _a0d=null;if(data[0].Contact){this._updateUserContactList(data[0].UserId,data[0].ContactId);_a0d=this._setAttendeeEntityFromContactLead("Contact",data[0].Contact);}d.resolve(_a0d);}},this);return d;},_addPrimaryContact:function(_a0e){if(this._initialPrimaryContact){if(!this._attendeeExists(this._initialPrimaryContact["$key"])){this._addContactAttendee(this._initialPrimaryContact);}}this._initialPrimaryContact=false;},_addContactAttendee:function(_a0f){var _a10=[];var _a11=null;if(_a0f){this.resetPrimary(_a0f["$key"]);if(this._grid.mode!=="insert"){}if(_a0f.Account){_a0f.AccountName=_a0f.Account.AccountName;_a11=this._setAttendeeEntityFromContactLead("Contact",_a0f);_a11.IsPrimary=true;_a11.general=true;_a10.push(_a11);this._addAttendeesToStore(_a10,true);}else{_99d._getContactData(_a0f.$key,function(data){if(data){_a11=this._setAttendeeEntityFromContactLead("Contact",data);_a11.IsPrimary=true;_a11.general=true;_a10.push(_a11);this._addAttendeesToStore(_a10,true);}},this);}}},_addLeadAttendee:function(lead){var _a12=[];var _a13=null;if(lead){this.resetPrimary(lead["$key"]);if(!lead.Email&&!lead.WorkPhone){this._removeLeadAttendee();_99d._getLeadData(lead.$key,function(data){if(data){_a13=this._setAttendeeEntityFromContactLead("Lead",data);_a13.general=true;_a13.IsPrimary=true;_a12.push(_a13);this._addAttendeesToStore(_a12,true);}},this);}else{_a13=this._setAttendeeEntityFromContactLead("Lead",lead);_a13.general=true;_a13.IsPrimary=true;_a12.push(_a13);this._addAttendeesToStore(_a12,true);}}},_removeAssociatedContact:function(_a14){if(this.userContactList[_a14]){var self=this;var _a15=this.userContactList[_a14]["ContactId"];var _a16=this._grid.rowCount;for(var i=0;i<_a16;i++){var item=this._grid.getItem(i);if(item.EntityId===_a15){self._grid.store.deleteItem(item);if(item.IsPrimary){item["attendeeTab"]=true;item["PrimaryChecked"]=false;dojo.publish("/entity/activityAttendee/primaryChanged",[item,this]);}break;}}}},checkStoreItem:function(_a17){var self=this;var _a18=new _9a5();this._grid.store.fetch({onComplete:function(_a19){var _a1a=false;dojo.forEach(_a19,function(item,_a1b){if(item&&item.EntityId==_a17){_a1a=true;}});_a18.resolve(_a1a);}});return _a18;},_removeContactAttendee:function(){var self=this;this._grid.store.fetch({onComplete:function(_a1c){dojo.forEach(_a1c,function(item,_a1d){if(item&&item.general&&item.EntityType=="Contact"){self._grid.store.deleteItem(item);}});}});},_removeLeadAttendee:function(){var self=this;this._grid.store.fetch({onComplete:function(_a1e){dojo.forEach(_a1e,function(item,_a1f){if(item&&item.general&&item.EntityType=="Lead"){self._grid.store.deleteItem(item);}});}});},_addLeadAttendees:function(_a20){var grid=this._grid;var _a21=Sage.Data.SDataServiceRegistry.getSDataService("dynamic");var _a22=function(){var _a23=new Sage.SData.Client.SDataServiceOperationRequest(_a21).setResourceKind("activities").setOperationName("AddLeadAttendees");var _a24=_99c.getCurrentEntityId();var _a25={"$name":"AddLeadAttendees","request":{"ActivityId":_a24,"leadIds":_a20.join()}};_a23.execute(_a25,{success:function(_a26){grid.refresh();},failure:function(_a27){Sage.UI.Dialogs.showError(dojo.string.substitute("Error adding lead attendees",[_a27]));grid.refresh();}});};if(_a20.length>0){grid.showLoading();_a22();}},_getNewContactAttendees:function(){return this._newItems;},setInitialPrimaryContact:function(_a28){this._initialPrimaryContact=_a28;},refreshGrid:function(){this._grid.saveChanges();this._grid.refresh();},_addAttendeesToStore:function(_a29,_a2a){var _a2b=_99c.getCurrentEntityId();var _a2c=false;var self=this;if(this._grid.mode==="insert"||!_a2b){var _a2d=[];for(var i=0;i<_a29.length;i++){var _a2e=_a29[i];if(!this._attendeeExists(_a2e.EntityId)){var _a2f=-1;for(var j=0,len=this._newItems.length;j<len;j++){if(this._newItems[j]["$key"]===_a2e.EntityId){_a2f=j;break;}}if(_a2f===-1){this._newItems.push(_a2e);}_a2d.push(_a2e);}}this._grid.store.addItemsToCache(this,_a2d);}else{var _a30=[];for(var i=0;i<_a29.length;i++){var _a2e=_a29[i];_a2e["Account"]=null;if(!this._attendeeExists(_a2e.EntityId)){this._newItems.push(_a2e);_a2e.Activity={"$key":_a2b};_a30.push(this._saveGridActivityAttendee(_a2e));}}var d1=new _9a1(_a30);d1.then(function(_a31){dojo.publish("/entity/activityAttendee/add",[_a31.length,this]);if(_a2a&&_a29&&_a29.length>0){}});}this._grid.refresh();},_saveGridActivityAttendee:function(_a32){var d=new _9a5();this._grid.store.saveNewEntity(_a32,function(){d.resolve("success");},function(){d.resolve("success");},this);return d;},_addAdhocAttendee:function(){this._grid.store.newItem({onComplete:function(_a33){var _a34=_99c.getCurrentEntityId();if(!_a34){_a34=this.actEditor._makeTempID();}_a33.Activity={"$key":_a34};this._newItems.push(association);if(this._grid.mode==="insert"){this._grid.store.addToCache(this,_a33,1);}else{this._grid.store.saveNewEntity(_a33);}this._grid.refresh();},scope:this});},_activitySaved:function(_a35){var _a36=new _9a5();if(this._grid.mode==="insert"){var _a37=_a35["$key"];var _a38=0;var _a39=[];var _a3a=null;for(var i=0;i<this._newItems.length;i++){_a38=i;var itm=this._newItems[i];itm["Account"]=null;itm["Activity"]={"$key":_a37};if(!itm["IsPrimary"]){_a39.push(this._saveActivityAttendee(itm));}else{_a3a=itm;}}this._newItems=[];var d1=new _9a1(_a39);d1.then(function(_a3b){_a36.resolve({success:true});});if(_a3a){this._updatePrimaryAttendee(_a3a,_a37);}}else{this._grid.saveChanges();_a36.resolve({success:true});this._newItems=[];this._uncheckItem=null;}return _a36;},_updatePrimaryAttendee:function(_a3c,_a3d){var _a3e=Sage.Data.SDataServiceRegistry.getSDataService("dynamic");var _a3f=new Sage.SData.Client.SDataServiceOperationRequest(_a3e).setResourceKind("activities").setOperationName("UpdatePrimaryActivityAttendee");var _a40={"$name":"UpdatePrimaryActivityAttendee","request":{"ActivityId":_a3d,"entityId":_a3c.EntityId,"isAttendee":_a3c.IsAttendee,"roleName":_a3c.RoleName}};_a3f.execute(_a40,{success:function(_a41){},failure:function(ex){},scope:this});},_historySaved:function(_a42){var _a43=new _9a5();if(this._grid.mode==="insert"){var _a44=_a42["$key"];var _a45=0;var _a46=[];var _a47="";for(var i=0;i<this._newItems.length;i++){_a45=i;var itm=this._newItems[i];itm["Account"]=null;itm["History"]={"$key":_a44};if(_a47!==itm["EntityId"]){_a46.push(this._saveHistoryAttendee(itm));_a47=itm["EntityId"];}}this._newItems=[];var d1=new _9a1(_a46);d1.then(function(_a48){_a43.resolve({success:true});});}return _a43;},_saveActivityAttendee:function(itm){var d=new _9a5();var self=this;var req=new Sage.SData.Client.SDataSingleResourceRequest(_999.getSDataService("dynamic")).setResourceKind("activityAttendees").create(itm,{success:function(){d.resolve("success");},failure:function(){},scope:this});return d;},_saveHistoryAttendee:function(itm){var d=new _9a5();var self=this;var req=new Sage.SData.Client.SDataSingleResourceRequest(_999.getSDataService("dynamic")).setResourceKind("historyAttendees").create(itm,{success:function(){d.resolve("success");},failure:function(){},scope:this});return d;},_dialogHide:function(){this._newItems=[];this._grid.store.clearCache();this._grid._clearData();this._grid.markClean();this._uncheckItem=null;this._gridStarted=false;},destroy:function(){this.lup_Contact.destroy();this.lup_Lead.destroy();this._gridStarted=false;this.inherited(arguments);},_tabShow:function(){if(this._grid){var _a49=this._grid.get("mode");if(this.editorMode.indexOf("New")==0||!this._activityId){this._grid.set("mode","insert");}else{this._grid.set("mode","");}this._grid.refresh();if(this.lup_Contact){this.lup_Contact.resetGrid();this.lup_Contact.destroy();}if(this.lup_Lead){this.lup_Lead.resetGrid();this.lup_Lead.destroy();}this.createLookups();this._gridStarted=true;}},createLookups:function(){var srvc=Sage.Services.getService("LookupService");if(srvc){var self=this;var _a4a=srvc.getLookupInstance("Contact","activityContactAttendee");if(_a4a){this.lup_Contact=_a4a;this.lup_Contact.doSelected=function(_a4b){self._processContactLookupResults(_a4b);};}var _a4c=srvc.getLookupInstance("Lead","activityLeadAttendee");if(_a4c){this.lup_Lead=_a4c;_a4c.doSelected=function(_a4d){self._processLeadLookupResults(_a4d);};}}},setToReadOnly:function(_a4e){var _a4f=["attendeeSpeedSearch","attendeeAddContact","attendeeeAddLead","attendeeDelete"];this._bulkSetProperty(this,_a4f,"disabled",_a4e);},_bulkSetProperty:function(ui,_a50,prop,val){for(var i=0;i<_a50.length;i++){var ctrl=dijit.byId(_a50[i]);if(ctrl){ctrl.set(prop,val);}}}});return _9ae;});},"Sage/MainView/ActivityMgr/AttendeeLookup/SpeedSearchLookup":function(){define("Sage/MainView/ActivityMgr/AttendeeLookup/SpeedSearchLookup",["dojo/_base/html","dojox/grid/DataGrid","Sage/Data/SDataServiceRegistry","Sage/UI/SLXPreviewGrid","Sage/UI/EditableGrid","dijit/Dialog","dijit/_Widget","Sage/_Templated","dojo/_base/lang","dojo/string","dojo/_base/array","dijit/registry","dojo/text!./templates/SpeedSearchLookup.html","dojo/_base/declare","Sage/Data/ServiceOperationSDataStore","dojo/i18n!./nls/SpeedSearchLookup"],function(html,_a51,_a52,_a53,_a54,_a55,_a56,_a57,_a58,_a59,_a5a,_a5b,_a5c,_a5d,_a5e,_a5f){var _a60=_a5d("Sage.MainView.ActivityMgr.AttendeeLookup.SpeedSearchLookup",[_a56,_a57],{id:"speedSearchLookup",btnIcon:"images/icons/plus_16x16.gif",btnToolTip:"Lookup",dialogTitle:"Contact/Lead Look up",closeText:"Close",loadingText:"Loading...",_initialized:false,_started:false,dialogButtonText:"Search",widgetsInTemplate:true,widgetTemplate:new Simplate(eval(_a5c)),srchBtnCaption:"Search",_store:null,_grid:null,currentPage:0,pageSize:100,indexes:[{indexName:"Contact",indexType:1,isSecure:true},{indexName:"Lead",indexType:1,isSecure:true}],types:["Contact","Lead"],iconPathsByType:{"Account":"content/images/icons/Company_24.png","Activity":"content/images/icons/To_Do_24x24.png","Contact":"content/images/icons/Contacts_24x24.png","History":"content/images/icons/journal_24.png","Lead":"content/images/icons/Leads_24x24.png","Opportunity":"content/images/icons/opportunity_24.png","Ticket":"content/images/icons/Ticket_24x24.png"},constructor:function(){_a58.mixin(this,_a5f);},postMixInProperties:function(){},startup:function(){this._buildGrid();var self=this;},extractTypeFromItem:function(item){for(var i=0;i<this.types.length;i++){if(item.source.indexOf(this.types[i])!==-1){return this.types[i];}}return null;},extractDescriptorFromItem:function(item,type){var _a61="";switch(type){case "Contact":_a61=_a59.substitute("${lastname}, ${firstname}",this.getFieldValues(item.fields,["firstname","lastname"]));break;case "Lead":_a61=_a59.substitute("${lastname}, ${firstname}",this.getFieldValues(item.fields,["firstname","lastname"]));break;}return _a61;},extractKeyFromItem:function(item){var _a62,len;_a62=item.displayName;if(!_a62){return "";}len=_a62.length;return _a62.substring(len-12);},getFieldValue:function(_a63,name){for(var i=0;i<_a63.length;i++){var _a64=_a63[i];if(_a64.fieldName==name){return _a64.fieldValue;}}return "";},getFieldValues:function(_a65,_a66){var _a67={};_a5a.forEach(_a66,function(name){_a67[name]="";});_a5a.forEach(_a65,function(_a68){_a5a.forEach(_a66,function(name,i){if(_a68.fieldName===name){_a67[name]=_a68.fieldValue;}});});return _a67;},showLookup:function(_a69){this._dialog.set("title",this.dialogTitle);this.eventDefaultValues=_a69||{};this._dialog.show();if(!this._initialized){this._initializeList();}this._dialog.set("refocus",false);this.connect(this._dialog,"onHide",this.destroy);},processFeed:function(feed){if(!this.feed){this.set("listContent","");}this.feed=feed=feed.response;if(feed.totalCount===0){this.set("listContent",this.noDataTemplate.apply(this));}else{if(feed.items){var o=[];for(var i=0;i<feed.items.length;i++){var _a6a=feed.items[i];_a6a.type=this.extractTypeFromItem(_a6a);_a6a.$descriptor=_a6a.$descriptor||this.extractDescriptorFromItem(_a6a,_a6a.type);_a6a.$key=this.extractKeyFromItem(_a6a);this.entries[_a6a.$key]=_a6a;o.push(this.rowTemplate.apply(_a6a,this));}if(o.length>0){domConstruct.place(o.join(""),this.contentNode,"last");}}}if(typeof feed.totalCount!=="undefined"){var _a6b=this.feed.totalCount-((this.currentPage+1)*this.pageSize);this.set("remainingContent",_a59.substitute(this.remainingText,[_a6b]));}domClass.toggle(this.domNode,"list-has-more",this.hasMoreData());},_onComplete:function(feed,_a6c){_a5a.forEach(feed,function(_a6d,i){_a6d.type=self.extractTypeFromItem(_a6d);_a6d.$descriptor=_a6d.$descriptor||self.extractDescriptorFromItem(_a6d,_a6d.type);_a6d.$key=self.extractKeyFromIt;_a6d.account=self.extractKeyFromIt;self._storeItems.push(_a6d);});},_initializeList:function(){this._started=false;var _a6e=[{field:"$descriptor",name:this.colName,width:"20%"},{field:"type",name:this.colType,width:"10%"},{field:"accountName",name:this.colAccount,width:"30%"},{field:"title",name:this.colTitle,width:"10%"},{field:"email",name:this.colEmail,width:"30%"},{field:"phone",name:this.colWorkPhone,width:"30%"}];var self=this;var _a6f={request:{docTextItem:-1,searchText:"",searchType:1,noiseFile:"PMINoise.dat",includeStemming:false,includeThesaurus:false,includePhonic:false,useFrequentFilter:false,indexes:this.indexes,whichPage:this.currentPage,itemsPerPage:this.pageSize,filters:null},response:null};var _a70=function(feed,_a71){this._initialized=true;_a5a.forEach(feed,function(_a72,i){_a72.type=self.extractTypeFromItem(_a72);_a72.$descriptor=_a72.$descriptor||self.extractDescriptorFromItem(_a72,_a72.type);_a72.$key=self.extractKeyFromItem(_a72);_a72.accountName=self.getFieldValue(_a72.fields,"account");_a72.title=self.getFieldValue(_a72.fields,"title");_a72.email=self.getFieldValue(_a72.fields,"email");_a72.phone=self.getFieldValue(_a72.fields,"phone");});};var _a73=this._store=new _a5e({service:_a52.getSDataService("system"),contractName:"system",operationName:"executeSearch",entry:_a6f,onProcess:_a70});if(!this._grid){var grid=this._grid=new dojox.grid.EnhancedGrid({id:"speedSearchGrid",store:_a73,structure:_a6e,layout:"layout",noDataMessage:"<span class=\"dojoxGridNoData\">"+this.noDataText+"</span>",rowsPerPage:100},dojo.byId(this._speedSearchGrid));}this._grid.canSort=function(col){return false;};dojo.connect(this._grid,"onDblClick",this,this.onDoubleClick);this._in=true;},onDoubleClick:function(_a74){this.getGridSelections();},uninitialize:function(){if(!this.contentNode){return;}_a5a.forEach(this.mainHandles,function(_a75){_a75.remove();});this._destroyContent();this.inherited(arguments);},_destroyContent:function(){if(!this.contentNode){return;}_a5a.forEach(_a5b.findWidgets(this.contentNode),function(_a76){_a76.destroy(false);});_a5a.forEach(this.handles,function(_a77){_a77.remove();});this.handles=[];this.contentNode.innerHTML="";},initDialog:function(){},_onKey:function(evt){var self=this,args=arguments;dojo.query("*",this.domNode).forEach(function(node,_a78,arr){if(node===evt.target){self.inherited(args);}});},getGridSelections:function(){var _a79=this._grid.selection.getSelected();this._grid.selection.deselectAll();this.doSelected(_a79);},doSelected:function(_a7a){},_cancelClick:function(){this.hide();},hide:function(){this._dialog.hide();this._started=false;},_doSearch:function(){if(this._valueBox.value){this._store.entry.request.searchText=this._valueBox.value;if(!this._started){this._started=true;this._grid.startup();}else{dijit.byId("speedSearchGrid").setQuery();this._grid.store=this._store;this._grid.update();}}},_onKeyPress:function(evt){if(evt.keyCode==13||evt.keyCode==10){this._valueBox.blur();this._doSearch();}},destroy:function(){var _a7b=dijit.byId([this.id,"-Dialog"].join(""));if(this.btnIcon){dojo.destroy(this.btnIcon);}dojo.disconnect(this._doSearchConnection);dojo.unsubscribe(this._addCondHandle);dojo.unsubscribe(this._removeCondHandle);if(this.conditionMgr){this.conditionMgr.destroy(false);}if(_a7b){_a7b.uninitialize();}_a7b.destroyRecursive();this.inherited(arguments);}});return _a60;});},"Sage/Data/ServiceOperationSDataStore":function(){define(["Sage/Data/BaseSDataStore","Sage/Utility","dojo/_base/declare","dojo/_base/lang"],function(_a7c,_a7d,_a7e,lang){var _a7f=_a7e("Sage.Data.ServiceOperationSDataStore",_a7c,{isInsertMode:false,constructor:function(o){lang.mixin(this,o);this.features["dojo.data.api.Notification"]=true;this.identityAttributes=["$cacheID"];this.dirtyDataCache={isDirty:false};this.singleResourceRequest=null;},entry:"",fetch:function(_a80){var _a81={};_a81.$resources=[];if(_a80.isRender&&this.dataCarrierId){var _a82=dojo.query([".",this.dataCarrierId].join(""));if(_a82[0].value.length>0){var _a83=dojo.fromJson(_a82[0].value);this.addItemsToCache(_a80,_a83.$resources);}}for(var item in this.dataCache){if(this.dataCache.hasOwnProperty(item)&&item!=="query"){_a81.$resources.push(this.dataCache[item]);}}this.setContext(_a80);this.verifyService();if(this.isInsertMode){var self=this;window.setTimeout(function(){self.onSuccess(_a80,_a81);},5);return;}var _a84=new Sage.SData.Client.SDataServiceOperationRequest(this.service).setContractName(this.contractName).setOperationName(this.operationName);var qry="";if(this.query){if(!_a80.query){_a80.query={};}lang.mixin(_a80.query,this.query);}if(_a80.query){if(typeof _a80.query==="function"){qry=_a80.query();}else{if(typeof _a80.query==="string"){qry=_a80.query;}else{if(typeof _a80.query==="object"){if(_a80.query.hasOwnProperty("fn")){qry=_a80.query.fn.call(_a80.query.scope||this);}if(_a80.query.hasOwnProperty("conditions")){if(typeof _a80.query.conditions==="string"){qry+=(qry.length>0)?" and "+_a80.query.conditions:_a80.query.conditions;}}}}}}_a80.evaluatedQuery=qry||"";if(qry&&qry!==""){_a84.setQueryArg("where",qry);}if(this.select&&this.select.length>0){_a84.setQueryArg("select",this.select.join(","));}if(this.include&&this.include.length>0){_a84.setQueryArg("include",this.include.join(","));}_a84.execute(this.entry,{success:lang.hitch(this,this.onSuccess,_a80),failture:lang.hitch(this,this.onFailure,_a80)});var key;return {abort:lang.hitch(this,this.abortRequest,key)};},onSuccesssss:function(_a85,feed){if(this.entry===""){this.entry=feed;}if(_a85.onBegin){_a85.onBegin.call(_a85.scope||this,feed.response.totalCount,_a85);}if(_a85.onComplete){_a85.onComplete.call(_a85.scope||this,feed.response.totalCount,_a85);}},onSuccess:function(_a86,feed){if(_a86.onBegin){_a86.onBegin.call(_a86.scope||this,feed.response.totalCount,_a86);}if(this.onProcess){this.onProcess.call(_a86.scope||this,feed.response.items,_a86);}if(_a86.onComplete){_a86.onComplete.call(_a86.scope||this,feed.response.items,_a86);}if(this.onComplete){this.onComplete.call(_a86.scope||this,feed.response.items,_a86);}this.addToCache(_a86,feed);},addToCache:function(_a87,item,_a88){var key;_a88=(typeof _a88==="undefined")?(Math.random()*11):_a88;if(this.isInsertMode){item.$cacheID=new Date().getTime()+_a88;}key=this.getIdentity(item);this.dataCache[key]=item;},addItemsToCache:function(_a89,_a8a){for(var i=0;i<_a8a.length;i++){this.addToCache(_a89,_a8a[i],i);}},clearCache:function(){this.inherited(arguments);this.clearDirtyDataCache();},clearDirtyDataCache:function(){for(var key in this.dirtyDataCache){if(key!=="isDirty"){delete this.dirtyDataCache[key];}}this.dirtyDataCache.isDirty=false;},isItem:function(_a8b){var id=this.getIdentity(_a8b);if(id&&id!==""){return this.dataCache.hasOwnProperty(id);}return false;},isItemLoaded:function(_a8c){return this.isItem(_a8c);},loadItem:function(_a8d){if(!this.isItem(_a8d.item)){throw new Error("Unable to load "+_a8d.item);}},getValues:function(item,_a8e){if(this.isItem(item)&&(typeof _a8e==="string")){return (item[_a8e]||[]).slice(0);}return [];},hasAttribute:function(item,_a8f){if(this.isItem(item)&&(typeof _a8f==="string")){return _a8f in item;}return false;},close:function(){this.clearCache();},deleteItem:function(item,_a90){var id=this.getIdentity(item);if(id&&id!==""){delete this.dataCache[id];}var _a91={};_a91.scope=_a90||this;var _a92=function(){if(typeof this.onResponse==="function"){this.onResponse.call(this);}};_a91.success=_a92;_a91.success.call(_a91.scope);},isDirty:function(item){if(item){var id=this.getIdentity(item);if(id&&id!==""){return this.dirtyDataCache.hasOwnPropery(id);}}return this.dirtyDataCache.isDirty;},newItem:function(args){var _a93=this.createTemplateRequest();if(_a93){_a93.read({success:function(_a94){if((args)&&(args.onComplete)&&(typeof args.onComplete==="function")){args.onComplete.call(args.scope||this,_a94);}},failure:this.requestTemplateFailure,scope:this});}},createTemplateRequest:function(){var _a95=new Sage.SData.Client.SDataTemplateResourceRequest(this.service);if((this.resourceKind)&&(this.resourceKind!=="")){_a95.setResourceKind(this.resourceKind);}return _a95;},requestTemplateFailure:function(){},saveNewEntity:function(_a96,_a97,_a98,_a99){this.addToCache(_a99,_a96);_a97();},createItem:function(item,_a9a){var _a9b={};_a9b.scope=_a9a||this;_a9b.scope.store=this;var _a9c=function(_a9d){if(typeof this.onResponse==="function"){this.onResponse.call(this,_a9d);}};_a9b.success=_a9c;this.addToCache(_a9a,item);_a9b.success.call(_a9b.scope,item);},revert:function(){this.clearDirtyDataCache();this.onDataReset();},setValue:function(item,_a9e,_a9f){var _aa0=this.getValue(item,_a9e,"");_a7d.setValue(item,_a9e,_a9f);this.onSet(item,_a9e,_aa0,_a9f);return true;},setValues:function(item,_aa1,_aa2){alert("not implemented - setValues");},unsetAttribute:function(item,_aa3){alert("not implemented - unsetAttribute");},dataCacheToArray:function(){var _aa4=[];for(var item in this.dataCache){if(this.dataCache.hasOwnProperty(item)&&item!=="query"){_aa4.push(this.dataCache[item]);}}return _aa4;},onDataChange:function(){this.clearDirtyDataCache();var _aa5=dojo.query([".",this.dataCarrierId].join(""));if(_aa5[0]){this.entry.$resources=this.dataCacheToArray();_aa5[0].value=JSON.stringify(this.entry);}},onSet:function(item,_aa6,_aa7,_aa8){},onNew:function(_aa9,_aaa){},onDelete:function(_aab){},onDataReset:function(){},onDataSaved:function(){},onItemSaved:function(_aac,_aad){},onItemNotSaved:function(_aae,_aaf){}});return _a7f;});},"Sage/UI/Controls/SingleSelectPickList":function(){define(["dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/form/ComboBox","dojo/data/ItemFileReadStore","dojo/data/ObjectStore","dojo/store/Memory","Sage/UI/ComboBox","Sage/UI/Controls/PickList","dojo/text!./templates/SingleSelectPickList.html","dojo/string","dojo/_base/declare"],function(_ab0,_ab1,_ab2,_ab3,_ab4,_ab5,_ab6,_ab7,_ab8,_ab9,_aba,_abb){var _abc=_abb("Sage.UI.Controls.SingleSelectPickList",[_ab8,_ab0,_ab1,_ab2],{store:null,constructor:function(_abd){if(_abd.clientId){this.id=_abd.clientId+"-SingleSelectPickList";}this.inherited(arguments);},postCreate:function(){this._setupTooltips(this.comboBox._buttonNode,this.comboBox.textbox);this._setupRenderAsHyperlink();this._setupTooltips();this.inherited(arguments);var _abe=dojo.byId(this._textId);if(_abe&&_abe.value&&(this.comboBox.value!==_abe.value)){this.comboBox.set("value",_abe.value);}},_setupTooltips:function(){if(this.controlTooltip&&this.controlTooltip!==""){this.comboBox.set("title",this.controlTooltip);}if(this.buttonTooltip&&this.buttonTooltip!==""){if(this.comboBox._buttonNode){this.comboBox._buttonNode.title=this.buttonTooltip;}}},_setupRenderAsHyperlink:function(){if(!this.renderAsHyperlink){return;}dojo.addClass(this.comboBox.domNode,"comboAsHyperlink");dojo.connect(this.comboBox.domNode,"onclick",this,function(){this.comboBox.loadDropDown();});},_loadData:function(){var def=new dojo.Deferred();this.getPickListData(def);def.then(dojo.hitch(this,function(data){if(typeof data==="string"){this.comboBox.set("value",data);}var _abf=[];var _ac0;for(var i=0;i<data.items.$resources.length;i++){var item=data.items.$resources[i];_abf.push({id:item.$key,code:item.code,number:item.number,text:item.text});}this.storeData={identifier:"id",label:"text",items:_abf};this.store=new _ab4({data:this.storeData});this.comboBox.set("store",this.store);this.comboBox.set("searchAttr","text");this.store._forceLoad();var _ac1=dojo.byId(this._textId);var _ac2=dojo.byId(this._picklistId);var _ac3=dojo.byId(this._codeId);if(_ac1&&_ac1.value){this.lastValidValue=_ac1.value;this.initialValue=this.lastValidValue;this.comboBox.set("value",this.lastValidValue);}else{if(_ac2&&_ac2.value){_ac0=this.getStoreItemById(_ac2.value);if(_ac0){this.lastValidValue=this.store.getValue(_ac0,"text");this.initialValue=this.lastValidValue;this.comboBox.set("value",this.lastValidValue);}}else{if(_ac3&&_ac3.value){_ac0=this.getStoreItemByCode(_ac3.value);if(_ac0){this.lastValidValue=this.store.getValue(_ac0,"text");this.initialValue=this.lastValidValue;this.comboBox.set("value",this.lastValidValue);}}else{var val=this.comboBox.get("value");if(val||val===""){this.lastValidValue=val;}else{this.lastValidValue=_abf[0].text;this.comboBox.set("value",this.lastValidValue);}}}}}),function(e){console.error(e);});if(this.get("canEditText")===false){this.comboBox.textbox.disabled=true;}var len=this.get("maxLength");if(len>0){this.comboBox.set("maxLength",len);}},uninitialize:function(){this.inherited(arguments);},getStoreItemById:function(id){var _ac4=null,_ac5;if(this.store){if(this.storeData){dojo.forEach(this.storeData.items,function(item,_ac6,_ac7){if(item.id){_ac5=this.store.getValue(item,"id");if(_ac5===id){_ac4=item;return _ac4;}}},this);}}return _ac4;},getStoreItemByCode:function(code){var _ac8=null,_ac9;if(this.store){if(this.storeData){dojo.forEach(this.storeData.items,function(item,_aca,_acb){if(item.code){_ac9=this.store.getValue(item,"code");_ac9=_aba.trim(_ac9);_ac9=_ac9.toUpperCase();code=_aba.trim(code);code=code.toUpperCase();if(_ac9===code){_ac8=item;return _ac8;}}},this);}}return _ac8;},getStoreItemByValue:function(_acc){var _acd=null,text;if(_acc){if(this.store){dojo.forEach(this.storeData.items,function(item,_ace,_acf){if(item.text){text=this.store.getValue(item,"text");text=_aba.trim(text);text=text.toUpperCase();_acc=_aba.trim(_acc);_acc=_acc.toUpperCase();if(text===_acc){_acd=item;return _acd;}}},this);}}return _acd;},_onChange:function(_ad0){this.onChange(_ad0);},_setPickListNameAttr:function(_ad1){this.inherited(arguments);this._loadData();},_setValueAttr:function(_ad2){this.inherited(arguments);this.comboBox.set("value",_ad2);},_getValueAttr:function(){return this.comboBox.get("value");},_getCodeAttr:function(){var item,code,_ad3,_ad4;code="";_ad3=this._getValueAttr();item=this.getStoreItemByValue(_ad3);if(item){code=this.store.getValue(item,"code");}return code;},templateString:_ab9,widgetsInTemplate:true,storeData:null,lastValidValue:"",initialValue:"",disabled:false,_setDisabledAttr:function(_ad5){this.disabled=_ad5;this.comboBox.set("disabled",_ad5);},_getDisabledAttr:function(){this.disabled=this.comboBox.get("disabled");return this.disabled;},focus:function(){this.comboBox.focus();},onChange:function(_ad6){if(this.storeData){var val=this.comboBox.get("value");if(val!=this.initialValue){if(this.get("itemMustExist")){var _ad7=dojo.some(this.storeData.items,function(item){if(item.text==_ad6||_ad6==""){return true;}else{return false;}},this);if(_ad7){this.lastValidValue=_ad6;}if(!_ad7){if(this.lastValidValue!=="undefined"&&this.lastValidValue!==null){this.comboBox.set("value",this.lastValidValue);return;}}}if(this.comboBox.isValid()){var code="",id="";dojo.forEach(this.storeData.items,function(item,_ad8,_ad9){if(item.text==val){code=item.code;id=item.id;}},this);this.setASPNETInputs(val,code,id);}}}}});return _abc;});},"Sage/Extensions/UI/Columns/Radio":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(_ada,lang){var _adb=_ada("Sage.Extensions.UI.Columns.Radio",dojox.grid.cells.Bool,{formatEditing:function(_adc,_add){var _ade=this.radioType=="group"?"rdo_"+this.field:"rdo_"+this.field+"_"+_add;var _adf=_adc?"checked":"";return "<input type=\"radio\" "+_adf+" name=\""+_ade+"\"  style=\"width: auto\" />";},doclick:function(e){if(e.target.tagName=="INPUT"){this.resetRows(e.grid,e.rowIndex,this.field);this.applyStaticValue(e.rowIndex);}},resetRows:function(grid,_ae0,_ae1){this.currentRow=_ae0;var self=this;grid.store.fetch({onComplete:function(_ae2){dojo.forEach(_ae2,function(item,_ae3){if(_ae3!=self.currentRow){grid.store.setValue(item,_ae1,false);}});}});}});return _adb;});},"Sage/Extensions/UI/Columns/CheckBox":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/query"],function(_ae4,lang,_ae5){var _ae6=_ae4("Sage.Extensions.UI.Columns.CheckBox",dojox.grid.cells.Bool,{checkBoxIds:null,constructor:function(_ae7){this.checkBoxIds=[];},formatEditing:function(_ae8,_ae9){var _aea="chk_"+this.field+"_"+_ae9;if(!this.checkBoxIds[_aea]){this.checkBoxIds.push(_aea);}var key="";var _aeb=this.grid.getItem(_ae9);if(_aeb){key=_aeb.EntityId;}var _aec="chk_"+this.field+"_"+key;var _aed=(_ae8===true||_ae8===1)?"<input type=\"checkbox\" class=\"attendeeGridIsPrimary\" id=\""+_aec+"\" name=\""+_aea+"\" checked=\"checked\" />":"<input type=\"checkbox\" class=\"attendeeGridIsPrimary\" id=\""+_aec+"\" name=\""+_aea+"\" />";return _aed;},doclick:function(e){if(e.target.tagName=="INPUT"){var item=e.grid.getItem(e.rowIndex);if(e.target.checked){item.checked=true;}else{item.checked=false;}if(this.checkBoxClicked&&typeof this.checkBoxClicked==="function"){this.checkBoxClicked.call(this,item);}this.resetRows(e.grid,e.rowIndex,this.field,item);if(e.grid.mode=="insert"){this.applyStaticValue(e.rowIndex);}}},resetRows:function(grid,_aee,_aef,_af0){var _af1=grid.rowCount;var _af2;for(var i=0;i<_af1;i++){var item=grid.getItem(i);if(item&&item.EntityId!==_af0.EntityId){_af2="chk_"+this.field+"_"+item.EntityId;dojo.byId(_af2).checked=false;grid.store.setValue(item,_aef,false);}else{if(item&&item.EntityId===_af0.EntityId){_af2="chk_"+this.field+"_"+item.EntityId;if(grid.mode=="insert"){grid.store.setValue(item,_aef,true);}else{if(grid.mode!=="insert"&&item.IsPrimary){grid.store.setValue(item,_aef,false);}else{if(grid.mode!=="insert"&&!item.IsPrimary){grid.store.setValue(item,_aef,true);}}}}}}},resetCheckBoxes:function(_af3){for(var i=0;i<this.checkBoxIds.length;i++){if(_af3!=i){dojo.byId(this.checkBoxIds[i]).checked=false;}}_ae5(".attendeeGridIsPrimary").forEach(function(node,_af4,arr){});}});return _ae6;});},"Sage/Extensions/UI/Columns/PickListSelect":function(){define(["dojo/_base/declare","dojox/grid/cells/_base","Sage/UI/Controls/PickList"],function(_af5,_af6,_af7){var _af8=_af5("Sage.Extensions.UI.Columns.PickListSelect",dojox.grid.cells.Select,{storeData:null,pickList:null,storageMode:"id",displayMode:"AsText",constructor:function(args){this.inherited(arguments);if(this.storageMode==="id"&&this.displayMode==="AsText"){if(this.pickListName){this._loadPickList();}}},_loadPickList:function(){var _af9=new dojo.Deferred();var _afa={pickListName:this.pickListName,canEditText:false,itemMustExist:true,maxLength:-1,storeMode:this.storageMode,sort:false,displayMode:this.displayMode};this.pickList=new _af7(_afa);this.pickList.getPickListData(_af9);_af9.then(dojo.hitch(this,this._loadData),function(e){console.error(e);});},_loadData:function(data){var _afb=[];var _afc=[];for(var i=0;i<data.items.$resources.length;i++){var item=data.items.$resources[i];_afc.push(item.text);if(item.code){_afb.push(item.code);}else{_afb.push(item.text);}}this.options=_afc;this.values=_afb.length>0?_afb:_afc;}});return _af8;});},"Sage/MainView/ActivityMgr/AttendeeLookup/LookupService":function(){define(["Sage/MainView/ActivityMgr/AttendeeLookup/ContactLookupConfig","Sage/MainView/ActivityMgr/AttendeeLookup/LeadLookupConfig","dojo/_base/declare"],function(_afd,_afe,_aff){var _b00=_aff("Sage.MainView.ActivityMgr.AttendeeLookup.LookupService",null,{_lookupConfigs:null,constructor:function(){},_initLookupConfigs:function(){this._lookupConfigs=[{lookupName:"Contact",lookupDisplayName:"Contact",configProviderType:_afd,instance:false},{lookupName:"Lead",lookupDisplayName:"Lead Loookup",configProviderType:_afe,instance:false}];},getLookupConfigs:function(){if(this._lookupConfigs){return this._lookupConfigs;}this._initLookupConfigs();return this._lookupConfigs;},getLookupConfig:function(_b01){var _b02=this.getLookupConfigs();for(var i=0;i<_b02.length;i++){if(_b02[i].lookupName.toUpperCase()===_b01.toUpperCase()){return _b02[i];}}return null;},AddLookupConfig:function(_b03){var _b04=this.getLookupConfig(_b03.lookupName);if(_b04){_b04.configuration=_b03;}else{var _b05={lookupName:_b03.lookupName,lookupDisplayName:_b03.lookupDisplayName,configProviderType:_b03,instance:false};var _b06=this.getLookupConfigs();_b06.push(_b05);}},RemoveLookupConfig:function(_b07){},getLookupConfigInstance:function(_b08){var _b09=this.getLookupConfig(_b08);if(_b09){if(!_b09.instance){_b09.instance=new _b09.configProviderType();return _b09.instance;}else{_b09.instance.rebuild();return _b09.instance;}}},getLookupInstance:function(_b0a,uiid){var _b0b=this.getLookupConfigInstance(_b0a);var _b0c=null;if(_b0b){_b0c=_b0b.getLookupInstance(uiid);}return _b0c;}});if(!Sage.Services.hasService("LookupService")){Sage.Services.addService("LookupService",new _b00());}else{var srvc=Sage.Services.getService("LookupService");if(actSvc.declaredClass!=="Sage.MainView.ActivityMgr.AttendeeLookup.LookupService"){Sage.Services.removeService("LookupService");Sage.Services.addService("LookupService",new _b00()());}}return _b00();});},"Sage/MainView/ActivityMgr/AttendeeLookup/ContactLookupConfig":function(){define(["Sage/MainView/ActivityMgr/AttendeeLookup/BaseLookupConfig","Sage/UI/SDataLookup","dojo/i18n!./nls/ContactLookupConfig","dojo/_base/declare","dojo/_base/lang"],function(_b0d,_b0e,_b0f,_b10,lang){var _b11=_b10("Sage.MainView.ActivityMgr.AttendeeLookup.ContactLookupConfig",[_b0d],{constructor:function(){lang.mixin(this,_b0f);this.lookupType=_b0e;this._initConfig();},_initConfig:function(){this.id="_contactLookup",this.lookupName="Contact";this.lookupDisplayName="Contact Lookup";this.entityName="Contact";this.dialogTitle=this.dialogTitleText,this.cells=null;this.cells=this.getCells();this.defaultCell={"sortable":true,"width":"150px","editable":false,"propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"pickListName":null,"defaultValue":""};this.storeOptions={resourceKind:"contacts",select:["LastName","FirstName","Title","Type","Account/$key","Account/AccountName","ContactUser/Userid","Address/Timezone"],sort:[{attribute:"LastName"}]};this.preFilters=[];this.gridOptions={};this.query={};this.displayMode=5;this.isModal=true;this.initialLookup=false;this.seedValue="X";this.seedProperty="Account.Id";},getCells:function(){if(this.cells){return this.cells;}this.cells=[{name:this.colFirstName,field:"FirstName"},{name:this.colLastName,field:"LastName"},{name:this.colTitle,field:"Title"},{name:this.colAccount,field:"AccountName"},{name:this.colWorkPhone,field:"WorkPhone"},{name:this.colEmail,field:"Email"}];return this.cells;},doSelected:function(_b12){alert("overide the doSelect method");},getConfig:function(uiid){var _b13={id:this.id+"_base_"+uiid,btnToolTip:"",structure:[{defaultCell:this.defaultCell,cells:this.cells,}],gridOptions:this.gridOptions,displayMode:this.displayMode,storeOptions:this.storeOptions,isModal:this.isModal,initialLookup:this.initialLookup,preFilters:this.preFilters,query:this.query,seedValue:this.seedValue,seedProperty:this.seedProperty,overrideSeedValueOnSearch:true,dialogTitle:this.dialogTitle,dialogButtonText:this.dialogButtonText,doSelected:this.doSelected,cancelText:this.cancelText};return _b13;},getLookupInstance:function(uiid){var _b14=this.getConfig(uiid);var _b15=new this.lookupType(_b14);return _b15;}});return _b11;});},"Sage/MainView/ActivityMgr/AttendeeLookup/BaseLookupConfig":function(){define(["Sage/UI/Controls/Lookup","dojo/_base/declare"],function(_b16,_b17){var _b18=_b17("Sage.MainView.ActivityMgr.AttendeeLookup.BaseLookupConfig",null,{lookupName:"LookupName",lookupDisplayName:"Lookup Display Name",lookupType:_b16,entityName:"entityName",id:false,cells:[],defaultCell:{"sortable":true,"width":"150px","editable":false,"propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"picklistName":null,"defaultValue":""},gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"someEntity",sort:[{attribute:"SortField"}]},displayMode:0,isModal:true,seedProperty:"",seedValue:"",overrideSeedValueOnSearch:true,initialLookup:true,preFilters:[],query:{},dialogTitle:"Lookup",dialogButtonText:"Ok",allowClearingResult:true,readonly:true,showEntityInfoToolTip:false,_nlsResources:{},constructor:function(){},rebuild:function(){this._lookup=null;},getLookupInstance:function(uiid){var _b19=this.getConfig(uiid);var _b1a=new this.lookupType(_b19);return _b1a;},addCell:function(cell,_b1b){},removeCell:function(_b1c){},getCells:function(){return this.cells;},getConfig:function(uiid){var _b1d={id:this.id+"_base_"+uiid,structure:[{defaultCell:this.defaultCell,cells:this.cells,}],gridOptions:this.gridOptions,storeOptions:this.storeOptions,isModal:this.isModal,displayMode:this.displayMode,initialLookup:this.initialLookup,preFilters:this.preFilters,returnPrimaryKey:this.returnPrimaryKey,dialogTitle:this.dialogTitle,dialogButtonText:this.dialogButtonText,doSelected:function(){alert("overide the doSelect method");}};var _b1e={id:this.id+"_"+uiid,allowClearingResult:this.allowClearingResult,readonly:this.readonly,showEntityInfoToolTip:this.showEntityInfoToolTip,config:_b1d};return _b1e;}});return _b18;});},"Sage/MainView/ActivityMgr/AttendeeLookup/LeadLookupConfig":function(){define(["Sage/MainView/ActivityMgr/AttendeeLookup/BaseLookupConfig","Sage/UI/SDataLookup","dojo/i18n!./nls/LeadLookupConfig","dojo/_base/declare","dojo/_base/lang"],function(_b1f,_b20,_b21,_b22,lang){var _b23=_b22("Sage.MainView.ActivityMgr.AttendeeLookup.LeadLookupConfig",[_b1f],{constructor:function(){lang.mixin(this,_b21);this.lookupType=_b20;this._initConfig();},_initConfig:function(){this.id="_leadLookup",this.lookupName="Lead";this.lookupDisplayName="Lead Lookup";this.entityName="Lead";this.dialogTitle=this.dialogTitleText,this.cells=null;this.cells=this.getCells();this.defaultCell={"sortable":true,"width":"150px","editable":false,"propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"pickListName":null,"defaultValue":""};this.storeOptions={resourceKind:"leads",select:["LastName","FirstName","Title","Type","Company","Address/Timezone"],sort:[{attribute:"LastName"}]};this.preFilters=[];this.gridOptions={};this.query={};this.isModal=true;this.displayMode=5;this.initialLookup=false;},getCells:function(){if(this.cells){return this.cells;}this.cells=[{name:this.colFirstName,field:"FirstName"},{name:this.colLastName,field:"LastName"},{name:this.colTitle,field:"Title"},{name:this.colCompany,field:"Company"},{name:this.colWorkPhone,field:"WorkPhone"},{name:this.colEmail,field:"Email"}];return this.cells;},getConfig:function(uiid){var _b24={id:this.id+"_base_"+uiid,btnToolTip:"",structure:[{defaultCell:this.defaultCell,cells:this.cells,}],gridOptions:this.gridOptions,displayMode:this.displayMode,storeOptions:this.storeOptions,isModal:this.isModal,initialLookup:this.initialLookup,preFilters:this.preFilters,query:this.query,dialogTitle:this.dialogTitle,dialogButtonText:this.dialogButtonText,doSelected:function(){alert("overide the doSelect method");},cancelText:this.cancelText};return _b24;},getLookupInstance:function(uiid){var _b25=this.getConfig(uiid);var _b26=new this.lookupType(_b25);return _b26;}});return _b23;});},"Sage/Services/UserOptions":function(){define(["Sage/Data/SDataServiceRegistry","dojo/_base/declare"],function(_b27,_b28){var _b29=_b28("Sage.Services.UserOptions",null,{constructor:function(_b2a){this.inherited(arguments);dojo.mixin(this,_b2a);if(!_b2a||!_b2a.service){this.service=_b27.getSDataService("system",false,true,true);}},get:function(name,_b2b,_b2c,_b2d,_b2e,_b2f){var req=this._createRequest(name,_b2b);if(typeof _b2f==="undefined"){_b2f=true;}if(req){req.read({success:_b2c,failure:function(_b30){if(typeof _b2d==="function"){_b2d(_b30);}},scope:_b2e||this,async:_b2f});}else{}},set:function(name,_b31,_b32,_b33,_b34,_b35){var req=this._createRequest(name,_b31);_b34=_b34||function(_b36){};if(req){req.read({success:dojo.hitch(req,function(_b37){_b37.value=_b32;_b27._removeFromLocalStorage("userOptions");this.update(_b37,{success:_b33,scope:this});}),failure:_b34,scope:_b35||this});}},getByCategory:function(_b38,_b39,_b3a,_b3b){var req=new Sage.SData.Client.SDataResourceCollectionRequest(this.service);req.setResourceKind("userOptions");req.setQueryArg("where","category eq '"+_b38+"'");req.read({success:_b39,failure:function(_b3c){if(typeof _b3b==="function"){_b3b(_b3c);}},scope:_b3a||this});},getByCategories:function(_b3d,_b3e,_b3f){var req=new Sage.SData.Client.SDataResourceCollectionRequest(this.service);var _b40="";var _b41=",";for(var i=0;i<_b3d.length;i++){if(i==_b3d.length-1){_b41="";}_b40+="\""+_b3d[i]+"\""+_b41;}req.setResourceKind("userOptions");req.setQueryArg("where","category in ("+_b40+")");req.setQueryArg("count","500");req.read({success:_b3e,failure:function(_b42){},scope:_b3f||this});},_formatPredicate:function(n,c){return dojo.string.substitute("category eq '${0}' and name eq '${1}'",[c,n]);},_createRequest:function(n,c){var req=new Sage.SData.Client.SDataSingleResourceRequest(this.service);req.setResourceSelector(this._formatPredicate(n,c));req.setResourceKind("userOptions");return req;},_virtuald:function(){var _b43=/^\/([^\/]+)\//.exec(location.pathname);return _b43?_b43[1]:"";}});Sage.Services.addService("UserOptions",new Sage.Services.UserOptions());Sage.UserOptionsService={getCommonOption:function(name,_b44,_b45){if(typeof console!=="undefined"){}var _b46=_b45;var svc=Sage.Services.getService("UserOptions");if(svc){svc.get(name,_b44,function(_b47){var _b48={category:_b47.category,option:_b47.name,optionValue:_b47.value};if(_b46){_b46.call(window,_b48);}});}},setCommonOption:function(name,_b49,data,_b4a){if(typeof console!=="undefined"){}var svc=Sage.Services.getService("UserOptions");if(svc){svc.set(name,_b49,data,_b4a);}}};return _b29;});},"Sage/MainView/ActivityMgr/RecurringEditor":function(){define(["dijit/_Widget","Sage/_Templated","dojo/_base/declare","dojo/_base/lang","dojo/dom-class","Sage/Utility/Activity","dijit/form/RadioButton","Sage/UI/Controls/Numeric","dijit/layout/StackContainer","dijit/layout/ContentPane","Sage/UI/NumberTextBox","dijit/form/CheckBox","dijit/form/Select","Sage/UI/Controls/DateTimePicker","dojo/date","dojo/i18n!./nls/RecurringEditor","dojo/text!./templates/RecurringEditor.html"],function(_b4b,_b4c,_b4d,lang,_b4e,_b4f,_b50,_b51,_b52,_b53,_b54,_b55,_b56,_b57,_b58,_b59,_b5a){var _b5b=_b4d("Sage.MainView.ActivityMgr._RecurringCalculator",null,{startDate:new Date(),initialStartDate:new Date(),endDate:new Date(),interval:1,occurances:1,activityRecurPeriodCode:0,recurPeriod:false,editor:false,constructor:function(opts){lang.mixin(this,opts);},calculateEndDate:function(){if(!isNaN(this.interval)&&!isNaN(this.occurances)&&this.recurPeriod){this.endDate=_b58.add(this.startDate,this.recurPeriod,(this.interval*this.occurances)-this.interval);}return this.endDate||this.startDate;},calculateNumberOfOccurances:function(){var dif=_b58.difference(this.startDate,this.endDate,this.recurPeriod);var _b5c=(dif/this.interval)+1;_b5c=Math.floor(_b5c);return _b5c;},set:function(prop,val){switch(prop.toLowerCase()){case "enddate":this.endDate=val;this.endDate.setHours(0);this.endDate.setMinutes(0);break;case "interval":this.interval=val;break;case "occurances":this.occurances=val;break;case "startdate":this.startDate=val;this.startDate.setHours(0);this.startDate.setMinutes(0);break;case "initialstartdate":this.initialStartDate=val;this.initialStartDate.setHours(0);this.initialStartDate.setMinutes(0);break;case "editor":this.editor=val;break;case "activityrecurperiodcode":this.activityRecurPeriodCode=val;break;}},get:function(prop){switch(prop.toLowerCase()){case "enddate":return this.endDate;case "interval":return this.interval;case "occurances":return this.occurances;case "startdate":return this.startDate;case "editor":return this.editor;case "activityRecurPeriodCode":return this.activityRecurPeriodCode;}return false;},_getTempStartDate:function(){return new Date(this.startDate.getFullYear(),this.startDate.getMonth(),this.startDate.getDate());}});var _b5d=_b4d("Sage.MainView.ActivityMgr.DailyRecurringCalculator",_b5b,{recurPeriod:"day"});var _b5e=_b4d("Sage.MainView.ActivityMgr.WeeklyRecurringCalculator",_b5b,{recurPeriod:"week",_checkedCount:0,_checkedDays:{},calculateEndDate:function(){if(this.editor){var _b5f=this.editor.countCheckedDays();if(_b5f<2){if(!isNaN(this.interval)&&!isNaN(this.occurances)&&this.recurPeriod){this.endDate=_b58.add(this.startDate,this.recurPeriod,(this.interval*this.occurances)-this.interval);}return this.endDate||this.startDate;}var _b60=this.editor.getCheckedDays();var _b61=this._getTempStartDate();var _b62=this.occurances-1;while(_b62>0){_b61=_b58.add(_b61,"day",1);_b62=_b62-_b60[_b61.getDay()];}return _b61;}return this.endDate||this.startDate;},calculateNumberOfOccurances:function(){var _b63=this.inherited(arguments);var _b64=this.editor.countCheckedDays();if(_b64>1){var _b65=_b58.difference(this.startDate,this.endDate,"day");var _b66=_b58.difference(this.startDate,this.endDate,this.recurPeriod);var _b67=0;if((_b66*7)<=_b65){_b63=_b66*_b64;var r=(_b65%7)*-1;var _b68=_b58.add(this.endDate,"day",r);var _b69=this.editor.getCheckedDays();while(_b58.compare(this.endDate,_b68,"date")>=0){if(_b69[_b68.getDay()]){_b67++;}_b68=_b58.add(_b68,"day",1);}}_b63+=_b67;}return _b63;}});var _b6a=_b4d("Sage.MainView.ActivityMgr.MonthlyRecurringCalculator",_b5b,{recurPeriod:"month",calculateStartDate:function(){var _b6b=lang.clone(this.initialStartDate);var _b6c;var _b6d=parseInt(this.editor._datesSelect.get("value"),10);var _b6e=parseInt(this.editor._weekdaySelect.get("value"),10);var _b6f=parseInt(this.editor._weeksSelect.get("value"),10);if(this.editor._rdoMonthlyOn.get("checked")){_b6c=this.getNthDayOfMonth(this.initialStartDate,_b6d);_b6b=_b6c;}else{if(this.editor._rdoMonthlyOnThe.get("checked")){_b6c=_b4f.setDateToNthWeekDay(this.initialStartDate,_b6f,_b6e);_b6c.setHours(this.initialStartDate.getHours());_b6c.setMinutes(this.initialStartDate.getMinutes());var _b70=dojo.date.compare(this.initialStartDate,_b6c,"date");if(_b70!=0){if(_b70>0){_b6b=this.calculateFirstOccurrance(this.initialStartDate,_b6c,_b6f,_b6e);}else{_b6b=_b6c;}}}}return _b6b;},calculateEndDate:function(){var _b71=this.inherited(arguments);if(this.activityRecurPeriodCode===5){var week=_b4f.getNthWeekOfMonth(this.startDate);var day=this.startDate.getDay();_b71=_b4f.setDateToNthWeekDay(_b71,week,day);}return _b71;},getNthDayOfMonth:function(_b72,_b73){var _b74=lang.clone(_b72);var _b75=_b72.getDate();if(_b75>_b73){_b74=dojo.date.add(_b72,"month",1);}_b74.setDate(_b73);return _b74;},calculateFirstOccurrance:function(_b76,_b77,_b78,_b79){var _b7a=_b77;while(dojo.date.compare(this.initialStartDate,_b7a,"date")>0){_b7a=_b4f.setDateToNthWeekDay(dojo.date.add(_b7a,"month",1),_b78,_b79);}return _b7a;}});var _b7b=_b4d("Sage.MainView.ActivityMgr.YearlyRecurringCalculator",_b5b,{recurPeriod:"year",calculateEndDate:function(){var _b7c=this.inherited(arguments);if(this.activityRecurPeriodCode===8){var week=_b4f.getNthWeekOfMonth(this.startDate);var day=this.startDate.getDay();_b7c.setMonth(this.startDate.getMonth());_b7c=_b4f.setDateToNthWeekDay(_b7c,week,day);}return _b7c;}});var _b7d=_b4d("Sage.MainView.ActivityMgr.RecurringEditor",[_b4b,_b4c],{activity:{},id:"",labelWidth:"80",startDate:new Date(),initialStartDate:new Date(),startDateChangedFromParent:false,occurances:2,interval:1,activityRecurPeriodCode:0,recurringPeriods:{once:"once",daily:"daily",weekly:"weekly",monthly:"monthly",yearly:"yearly"},currentPeriod:"once",endCalculators:false,_applyingActivityData:false,widgetsInTemplate:true,widgetTemplate:new Simplate(eval(_b5a)),constructor:function(){lang.mixin(this,_b59);},postMixInProperties:function(){if(!this.endCalculators){this.endCalculators={};var _b7e={startDate:this.startDate,endDate:this.endDate,interval:1,occurances:1,editor:this};this.endCalculators[this.recurringPeriods.daily]=new _b5d(_b7e);this.endCalculators[this.recurringPeriods.weekly]=new _b5e(_b7e);this.endCalculators[this.recurringPeriods.monthly]=new _b6a(_b7e);this.endCalculators[this.recurringPeriods.yearly]=new _b7b(_b7e);}},_setStartDateAttr:function(_b7f){if(_b7f.getMonth()===this.startDate.getMonth()&&_b7f.getDate()===this.startDate.getDate()&&_b7f.getFullYear()===this.startDate.getFullYear()){return;}this.startDateChangedFromParent=true;this._applyingActivityData=true;this.startDate=_b7f;this.initialStartDate=_b7f;this.dtp_startRecur.set("value",_b7f);this._weeklySyncToStartDate();this._monthlySyncToStartDate();this._yearlySyncToStartDate();this._calculateEnd();this._applyingActivityData=false;this.startDateChangedFromParent=false;},_getStartDateAttr:function(){return this.startDate;},_setOccurancesAttr:function(occ){this.occurances=occ;this.num_Occurances.set("value",occ);},_getOccurancesAttr:function(){return this.occurances;},_setActivityAttr:function(_b80){this.activity=_b80;this._setUI();this._applyActivityData();},_getActivityAttr:function(){return this.activity;},onTabShow:function(){this._panelContainer.resize();},_setUI:function(){var opts=[];if(this._datesSelect.getOptions().length<1){for(var i=1;i<32;i++){opts.push({value:i.toString(),label:i.toString()});}this._datesSelect.addOption(opts);this._yearDatesSelect.addOption(opts);}if(this._monthNamesSelect.getOptions().length<1){opts=[{value:"1",label:this.janText},{value:"2",label:this.febText},{value:"3",label:this.marText},{value:"4",label:this.aprText},{value:"5",label:this.mayText},{value:"6",label:this.junText},{value:"7",label:this.julText},{value:"8",label:this.augText},{value:"9",label:this.sepText},{value:"10",label:this.octText},{value:"11",label:this.novText},{value:"12",label:this.decText}];this._monthNamesSelect.addOption(opts);this._yearMonthNamesSelect.addOption(opts);}if(this._weeksSelect.getOptions().length<1){opts=[{value:"1",label:this.firstText},{value:"2",label:this.secondText},{value:"3",label:this.thirdText},{value:"4",label:this.fourthText},{value:"5",label:this.lastText}];this._weeksSelect.addOption(opts);this._yearWeeksSelect.addOption(opts);}if(this._weekdaySelect.getOptions().length<1){opts=[{value:"1",label:this.monText},{value:"2",label:this.tueText},{value:"3",label:this.wedText},{value:"4",label:this.thurText},{value:"5",label:this.friText},{value:"6",label:this.satText},{value:"0",label:this.sunText}];this._weekdaySelect.addOption(opts);this._yearWeekdaySelect.addOption(opts);}},_onceChanged:function(_b81){this._setUI();if(_b81){this._panelContainer.selectChild(this._oncePanel);this.interval=1;this._updateRecurringPeriod(this.recurringPeriods.once);}},_dailyChanged:function(_b82){if(_b82){this._panelContainer.selectChild(this._dailyPanel);this._dailyUpdateInterval();this._updateRecurringPeriod(this.recurringPeriods.daily);this._toggleEndCalculatorVisibility(this._rdoDailyEvery.get("checked"));}},_dailyUpdateInterval:function(){this.interval=(this._rdoDailyEvery.get("checked"))?this._dailyEveryText.get("value"):this._dailyEveryAfterText.get("value");if(isNaN(this.interval)){this.interval=1;}},_weeklyChanged:function(_b83){if(_b83){this._panelContainer.selectChild(this._weeklyPanel);this._weeklyUpdateInterval();this._updateRecurringPeriod(this.recurringPeriods.weekly);this._toggleEndCalculatorVisibility(this._rdoWeeklyEvery.get("checked"));}},_weeklySyncToStartDate:function(){this._clearCheckedWeekdays();this._enforceWeekdayChecked();},_weeklyUpdateInterval:function(){this._enforceWeekdayChecked();this.interval=(this._rdoWeeklyEvery.get("checked"))?this._weeklyEveryText.get("value"):this._weeklyEveryAfterText.get("value");if(isNaN(this.interval)){this.interval=1;}},_monthlyChanged:function(_b84){if(_b84){this._panelContainer.selectChild(this._monthlyPanel);this._monthlyUpdateInterval();this._updateRecurringPeriod(this.recurringPeriods.monthly);this._toggleEndCalculatorVisibility(!this._rdoMonthlyAfter.get("checked"));}},_monthlyUpdateInterval:function(){this.interval=(this._rdoMonthlyOn.get("checked"))?this._monthlyEveryText.get("value"):(this._rdoMonthlyOnThe.get("checked"))?this._monthlyOnTheText.get("value"):this._monthlyAfterText.get("value");if(isNaN(this.interval)){this.interval=1;}},_monthlySyncToStartDate:function(){this._datesSelect.set("value",this.startDate.getDate().toString());this._weekdaySelect.set("value",this.startDate.getDay().toString());this._weeksSelect.set("value",_b4f.getNthWeekOfMonth(this.startDate).toString());},_yearlyChanged:function(_b85){if(_b85){this._panelContainer.selectChild(this._yearlyPanel);this._yearlyUpdateInterval();this._updateRecurringPeriod(this.recurringPeriods.yearly);this._toggleEndCalculatorVisibility(!this._rdoYearlyEveryAfter.get("checked"));}},_yearlyUpdateInterval:function(){this.interval=(this._rdoYearlyOn.get("checked"))?this._yearlyEveryText.get("value"):(this._rdoYearlyEveryAfter.get("checked"))?this._yearlyEveryAfterText.get("value"):1;},_yearlySyncToStartDate:function(){this._monthNamesSelect.set("value",(this.startDate.getMonth()+1).toString());this._yearDatesSelect.set("value",this.startDate.getDate().toString());this._yearWeeksSelect.set("value",_b4f.getNthWeekOfMonth(this.startDate).toString());this._yearWeekdaySelect.set("value",this.startDate.getDay().toString());this._yearMonthNamesSelect.set("value",(this.startDate.getMonth()+1).toString());},_updateRecurringPeriod:function(_b86){this._toggleEndCalculatorVisibility(_b86!==this.recurringPeriods.once);this.currentPeriod=_b86;this._calculateEnd();this.onRecurPeriodChanged(_b86);},_toggleEndCalculatorVisibility:function(_b87){if(_b87){_b4e.remove(this._startEndCalculator,"display-none");}else{_b4e.add(this._startEndCalculator,"display-none");}},_applyActivityData:function(){this._applyingActivityData=true;if(this.activity&&this.activity.hasOwnProperty("Recurring")){this.startDate=Sage.Utility.Convert.toDateFromString(this.activity.StartDate);this.initialStartDate=Sage.Utility.Convert.toDateFromString(this.activity.StartDate);if(this.activity.Timeless||_b4f.isDateFiveSecondRuleTimeless(this.startDate)){this.startDate=new Date(this.startDate.getUTCFullYear(),this.startDate.getUTCMonth(),this.startDate.getUTCDate(),0,0,5);}this.activityRecurPeriodCode=this.activity.RecurPeriod;this.dtp_startRecur.set("value",this.startDate);if(!this.activity.Recurring){this.rdo_Once.set("checked",true);this._toggleEndCalculatorVisibility(false);this._resetInterval();this._weeklySyncToStartDate();this._monthlySyncToStartDate();this._yearlySyncToStartDate();this._applyingActivityData=false;return;}this._toggleEndCalculatorVisibility(true);switch(this.activity.RecurPeriod){case 0:case 1:this._applyDailyRecurringValues();break;case 2:case 3:this._applyWeeklyRecurringValues();break;case 4:case 5:case 6:this._applyMonthlyRecurringValues();break;case 7:case 8:case 9:this._applyYearlyRecurringValues();break;default:this.rdo_Once.set("checked",true);}this._applyingActivityData=false;}},_applyEndCalculatorValues:function(){this.dtp_startRecur.set("value",this.startDate);this._rdoEndAfter.set("checked",true);this.num_Occurances.set("value",this.activity.RecurIterations);this._calculateEnd();},_applyDailyRecurringValues:function(){this.rdo_Daily.set("checked",true);this._toggleEndCalculatorVisibility(this.activity.RecurPeriod===0);this.interval=this.activity.RecurPeriodSpec;if(this.activity.RecurPeriod===0){this._rdoDailyEvery.set("checked",true);this._dailyEveryText.set("value",this.activity.RecurPeriodSpec);this._applyEndCalculatorValues();}else{if(this.activity.RecurPeriod===1){this._rdoDailyEveryAfter.set("checked",true);this._dailyEveryAfterText.set("value",this.activity.RecurPeriodSpec);}}},_weekDayValues:{sun:131072,mon:262144,tue:524288,wed:1048576,thu:2097152,fri:4194304,sat:8388608},_resetInterval:function(){this._rdoDailyEvery.set("checked",true);this._dailyEveryText.set("value","1");this._dailyEveryAfterText.set("value","1");this._rdoWeeklyEvery.set("checked",true);this._weeklyEveryText.set("value","1");this._weeklyEveryAfterText.set("value","1");this._rdoMonthlyOn.set("checked",true);this._monthlyEveryText.set("value","1");this._monthlyOnTheText.set("value","1");this._monthlyAfterText.set("value","1");this._rdoYearlyOn.set("checked",true);this._yearlyEveryText.set("value","1");this._yearlyEveryAfterText.set("value","1");this.num_Occurances.set("value","2");this.occurances=2;this._intervalChanged(2);},_clearCheckedWeekdays:function(){this._chkSaturday.set("checked",false);this._chkFriday.set("checked",false);this._chkThursday.set("checked",false);this._chkThursday.set("checked",false);this._chkWednesday.set("checked",false);this._chkTuesday.set("checked",false);this._chkMonday.set("checked",false);this._chkSunday.set("checked",false);},_applyWeeklyRecurringValues:function(){this.rdo_Weekly.set("checked",true);this._toggleEndCalculatorVisibility(this.activity.RecurPeriod===2);this._clearCheckedWeekdays();this.interval=this._evalRecurperiodspec(this.activity.RecurPeriodSpec,this.activity.RecurPeriod);if(this.activity.RecurPeriod===2){this._rdoWeeklyEvery.set("checked",true);this._weeklyEveryText.set("value",this.interval);this._enforceWeekdayChecked();this._applyEndCalculatorValues();}else{if(this.activity.RecurPeriod===3){this._rdoWeeklyEveryAfter.set("checked",true);this._weeklyEveryAfterText.set("value",this.interval);}}},_evalRecurperiodspec:function(_b88,_b89){if(_b88>this._weekDayValues["sat"]){_b88=_b88-this._weekDayValues["sat"];if(_b89===2){this._chkSaturday.set("checked",true);}}if(_b88>this._weekDayValues["fri"]){_b88=_b88-this._weekDayValues["fri"];if(_b89===2){this._chkFriday.set("checked",true);}}if(_b88>this._weekDayValues["thu"]){_b88=_b88-this._weekDayValues["thu"];if(_b89===2){this._chkThursday.set("checked",true);}}if(_b88>this._weekDayValues["wed"]){_b88=_b88-this._weekDayValues["wed"];if(_b89===2){this._chkWednesday.set("checked",true);}}if(_b88>this._weekDayValues["tue"]){_b88=_b88-this._weekDayValues["tue"];if(_b89===2){this._chkTuesday.set("checked",true);}}if(_b88>this._weekDayValues["mon"]){_b88=_b88-this._weekDayValues["mon"];if(_b89===2){this._chkMonday.set("checked",true);}}if(_b88>this._weekDayValues["sun"]){_b88=_b88-this._weekDayValues["sun"];if(_b89===2){this._chkSunday.set("checked",true);}}return _b88;},_applyMonthlyRecurringValues:function(){this.rdo_Monthly.set("checked",true);var _b8a=this.activity.RecurPeriodSpec;if(this.activity.RecurPeriod===4){this._rdoMonthlyOn.set("checked",true);_b8a=this._evalRecurperiodspec(_b8a,this.activity.RecurPeriod);if(_b8a>65000){_b8a=_b8a%65536;}this._monthlyEveryText.set("value",_b8a);this._datesSelect.set("value",this.startDate.getDate().toString());this._applyEndCalculatorValues();}else{if(this.activity.RecurPeriod===5){this._rdoMonthlyOnThe.set("checked",true);var wDay=Math.floor(_b8a/524288)-1;_b8a=_b8a%524288;var _b8b=Math.floor(_b8a/65536);_b8a=_b8a%65536;_b8b++;this._weeksSelect.set("value",(_b8b).toString());this._weekdaySelect.set("value",wDay.toString());this._monthlyOnTheText.set("value",_b8a);this._applyEndCalculatorValues();}else{if(this.activity.RecurPeriod===6){this._rdoMonthlyAfter.set("checked",true);if(_b8a>1048576){_b8a=_b8a-1048576;if(_b8a>1000){_b8a=_b8a%65536;}}this._monthlyAfterText.set("value",_b8a);}}}this.interval=_b8a;this._toggleEndCalculatorVisibility(this.activity.RecurPeriod!==6);},_applyYearlyRecurringValues:function(){var mon;this.rdo_Yearly.set("checked",true);var _b8c=this.activity.RecurPeriodSpec;if(this.activity.RecurPeriod===7){this._rdoYearlyOn.set("checked",true);if(_b8c>38797312){_b8c=eval(_b8c)-38797312;}else{_b8c=eval(_b8c)-17825792;}if(_b8c>1000){_b8c=this._evalRecurperiodspec(_b8c,this.activity.RecurPeriod);_b8c=_b8c%65536;}this._yearlyEveryText.set("value",_b8c);mon=this.startDate.getMonth();mon++;this._monthNamesSelect.set("value",mon.toString());var d=this.startDate.getDate();this._yearDatesSelect.set("value",d.toString());this._applyEndCalculatorValues();}else{if(this.activity.RecurPeriod===8){this._rdoYearlyOnThe.set("checked",true);mon=Math.floor(_b8c/4194304);_b8c=_b8c%4194304;var wDay=Math.floor(_b8c/524288)-1;_b8c=_b8c%524288;var _b8d=Math.floor(_b8c/65536);_b8d++;_b8c=_b8c%65536;this._yearWeeksSelect.set("value",_b8d.toString());this._yearWeekdaySelect.set("value",wDay.toString());this._yearMonthNamesSelect.set("value",mon.toString());this._applyEndCalculatorValues();}else{if(this.activity.RecurPeriod===9){this._rdoYearlyEveryAfter.set("checked",true);if(_b8c>38797312){_b8c=_b8c-38797312;if(_b8c>1000){_b8c=this._evalRecurperiodspec(_b8c,this.activity.RecurPeriod);_b8c=_b8c%65536;}}this._yearlyEveryAfterText.set("value",_b8c);}}}this.interval=_b8c;this._toggleEndCalculatorVisibility(this.activity.RecurPeriod!==9);},_dailyEveryChanged:function(){this._setDailyUI();this._applyChangesToActivity();},_setDailyUI:function(){var _b8e=this._rdoDailyEvery.get("checked");this._dailyEveryText.set("disabled",!_b8e);this._dailyEveryAfterText.set("disabled",_b8e);this._dailyUpdateInterval();this.activityRecurPeriodCode=this._rdoDailyEvery.get("checked")?0:1;this._toggleEndCalculatorVisibility(_b8e);},_weeklyEveryChanged:function(){this._setWeeklyUI();this._applyChangesToActivity();},_setWeeklyUI:function(){var _b8f=!this._rdoWeeklyEvery.get("checked");this._weeklyEveryText.set("disabled",_b8f);this._chkMonday.set("disabled",_b8f);this._chkTuesday.set("disabled",_b8f);this._chkWednesday.set("disabled",_b8f);this._chkThursday.set("disabled",_b8f);this._chkFriday.set("disabled",_b8f);this._chkSaturday.set("disabled",_b8f);this._chkSunday.set("disabled",_b8f);this._weeklyEveryAfterText.set("disabled",!this._rdoWeeklyEveryAfter.get("checked"));this._enforceWeekdayChecked();this._weeklyUpdateInterval();this.activityRecurPeriodCode=this._rdoWeeklyEvery.get("checked")?2:3;this._toggleEndCalculatorVisibility(this._rdoWeeklyEvery.get("checked"));},_dayChecked:function(){this._enforceWeekdayChecked();this._calculateEnd();},_enforceWeekdayChecked:function(){var _b90=this.countCheckedDays();if(_b90<1){var d=this.startDate.getDay();switch(d){case 0:this._chkSunday.set("checked",true);break;case 1:this._chkMonday.set("checked",true);break;case 2:this._chkTuesday.set("checked",true);break;case 3:this._chkWednesday.set("checked",true);break;case 4:this._chkThursday.set("checked",true);break;case 5:this._chkFriday.set("checked",true);break;case 6:this._chkSaturday.set("checked",true);break;}}if(_b90>this.occurances){this._setOccurancesAttr(_b90);}},getCheckedDays:function(){return [this._chkSunday.get("checked")?1:0,this._chkMonday.get("checked")?1:0,this._chkTuesday.get("checked")?1:0,this._chkWednesday.get("checked")?1:0,this._chkThursday.get("checked")?1:0,this._chkFriday.get("checked")?1:0,this._chkSaturday.get("checked")?1:0];},countCheckedDays:function(){var _b91=0;var _b92=this.getCheckedDays();for(var i=0;i<_b92.length;i++){_b91+=Number(_b92[i]);}return _b91;},_monthlyOnChanged:function(){this._setMonthlyUI();if(this._rdoMonthlyAfter.get("checked")){this._applyChangesToActivity();}},_setMonthlyUI:function(){var _b93=!this._rdoMonthlyOn.get("checked");this._monthlyEveryText.set("disabled",_b93);this._datesSelect.set("disabled",_b93);_b93=!this._rdoMonthlyOnThe.get("checked");this._monthlyOnTheText.set("disabled",_b93);this._weeksSelect.set("disabled",_b93);this._weekdaySelect.set("disabled",_b93);this._monthlyAfterText.set("disabled",!this._rdoMonthlyAfter.get("checked"));this._monthlyUpdateInterval();this.activityRecurPeriodCode=this._rdoMonthlyOn.get("checked")?4:this._rdoMonthlyOnThe.get("checked")?5:6;this._toggleEndCalculatorVisibility(!this._rdoMonthlyAfter.get("checked"));if(this.activityRecurPeriodCode<6){this._calculateEnd();}},_monthlyValidateEndDate:function(){if(this.rdo_Monthly.get("checked")){var _b94=this.dtp_endRecur.get("value");if(this._rdoMonthlyOn.get("checked")){var _b95=parseInt(this._datesSelect.get("value"),10);if(_b94.getDate()!==_b95){_b94.setDate(_b95);this.dtp_endRecur.set("value",_b94);return false;}}else{if(this._rdoMonthlyOnThe.get("checked")){var _b96=parseInt(this._weekdaySelect.get("value"),10);var _b97=parseInt(this._weeksSelect.get("value"),10);if(_b4f.getNthWeekOfMonth(_b94)!==_b97||_b94.getDay()!==_b96){_b94=_b4f.setDateToNthWeekDay(_b94,_b97,_b96);this.dtp_endRecur.set("value",_b94);return false;}}}}return true;},_yearlyOnChanged:function(){this._setYearlyUI();this._applyChangesToActivity();},_setYearlyUI:function(){var _b98=!this._rdoYearlyOn.get("checked");this._yearlyEveryText.set("disabled",_b98);this._monthNamesSelect.set("disabled",_b98);this._yearDatesSelect.set("disabled",_b98);_b98=!this._rdoYearlyOnThe.get("checked");this._yearWeeksSelect.set("disabled",_b98);this._yearWeekdaySelect.set("disabled",_b98);this._yearMonthNamesSelect.set("disabled",_b98);this._yearlyEveryAfterText.set("disabled",!this._rdoYearlyEveryAfter.get("checked"));this._yearlyUpdateInterval();this.activityRecurPeriodCode=this._rdoYearlyOn.get("checked")?7:this._rdoYearlyOnThe.get("checked")?8:9;this._toggleEndCalculatorVisibility(!this._rdoYearlyEveryAfter.get("checked"));},_yearlyValidateEndDate:function(){var _b99=true;if(this.rdo_Yearly.get("checked")){var _b9a=this.dtp_endRecur.get("value");var mon=this.startDate.getMonth();if(_b9a.getMonth()!==mon){_b99=false;_b9a.setMonth(mon);}if(this._rdoYearlyOn.get("checked")){var dt=this.startDate.getDate();if(_b9a.getDate!==dt){_b99=false;_b9a.setDate(dt);}}else{if(this._rdoYearlyOnThe.get("checked")){var _b9b=parseInt(this._yearWeekdaySelect.get("value"),10);var _b9c=parseInt(this._yearWeeksSelect.get("value"),10);if(_b4f.getNthWeekOfMonth(_b9a)!==_b9c||_b9a.getDay()!==_b9b){_b99=false;_b9a=_b4f.setDateToNthWeekDay(_b9a,_b9c,_b9b);}}}if(!_b99){this.dtp_endRecur.set("value",_b9a);}}return _b99;},_yearlyRecurDateChanged:function(){if(this._applyingActivityData){return;}var _b9d,_b9e=false;var _b9f=new Date(this.startDate.getFullYear(),this.startDate.getMonth(),this.startDate.getDate());if(this._rdoYearlyOn.get("checked")){_b9d=parseInt(this._monthNamesSelect.get("value"),10)-1;var dt=parseInt(this._yearDatesSelect.get("value"),10);if(_b9f.getMonth()!==_b9d){_b9f.setMonth(_b9d);_b9e=true;}if(_b9f.getDate()!==dt){_b9f.setDate(dt);_b9e=true;}}else{if(this._rdoYearlyOnThe.get("checked")){_b9d=parseInt(this._yearMonthNamesSelect.get("value"),10)-1;if(_b9f.getMonth()!==_b9d){_b9f.setMonth(_b9d);_b9e=true;}var dy=parseInt(this._weekdaySelect.get("value"),10);var wk=parseInt(this._weeksSelect.get("value"),10);var _ba0=_b4f.setDateToNthWeekDay(_b9f,wk,dy);if(_b9f.getDate()!==_ba0.getDate()){if(_ba0<new Date()){_ba0=_b58.add(_ba0,"year",1);_ba0=_b4f.setDateToNthWeekDay(_ba0,wk,dy);}_b9f=_ba0;_b9e=true;}}}if(_b9e){if(_b9f<new Date()){_b9f=_b58.add(_b9f,"year",1);}if(!this.startDateChangedFromParent){this.onStartDateChanged(_b9f);}}},_intervalChanged:function(_ba1){this.interval=_ba1;this._calculateEnd();},_recurringStartDateChanged:function(_ba2){if(!this.startDateChangedFromParent){this.onStartDateChanged(_ba2);}},_endCalcModeChanged:function(){},_numOccurancesChanged:function(_ba3){this.occurances=_ba3;this._calculateEndDate();},_endRecurChanged:function(_ba4){if(this._rdoEndOn.get("checked")){if(this._monthlyValidateEndDate()&&this._yearlyValidateEndDate()){this._calculateOccurances();}}},_calculateEnd:function(){if(this.currentPeriod==="once"){this._applyChangesToActivity();return;}if(this._rdoEndAfter.get("checked")){if(this.rdo_Monthly.get("checked")&&!this.startDateChangedFromParent){this._calculateStartDate();}this._calculateEndDate();}else{this._calculateOccurances();}},_calculateStartDate:function(){var _ba5=this.endCalculators[this.currentPeriod];if(_ba5&&this._rdoEndAfter.get("checked")){this._applyCurrentValuesToCalculator(_ba5);_ba5.set("occurances",this.occurances);var _ba6=_ba5.calculateStartDate();this.startDate=_ba6;this.dtp_startRecur.set("value",_ba6);if(!this.startDateChangedFromParent){this.onStartDateChanged(_ba6);}}},_calculateEndDate:function(){var _ba7=this.endCalculators[this.currentPeriod];if(_ba7&&this._rdoEndAfter.get("checked")){this._applyCurrentValuesToCalculator(_ba7);_ba7.set("occurances",this.occurances);var _ba8=_ba7.calculateEndDate();this.dtp_endRecur.set("value",_ba8);this._applyChangesToActivity();}},_applyCurrentValuesToCalculator:function(_ba9){_ba9.set("startDate",this.startDate);_ba9.set("initialStartDate",this.initialStartDate);_ba9.set("interval",this.interval);_ba9.set("activityRecurPeriodCode",this.activityRecurPeriodCode);},_calculateOccurances:function(){var _baa=this.endCalculators[this.currentPeriod];if(_baa&&this._rdoEndOn.get("checked")){this._applyCurrentValuesToCalculator(_baa);_baa.set("endDate",this.dtp_endRecur.get("value"));var occ=1;if(_baa.endDate<_baa.startDate){this.dtp_endRecur.set("value",this.startDate);}else{occ=_baa.calculateNumberOfOccurances();}this.occurances=occ;this.num_Occurances.set("value",occ);this._applyChangesToActivity();}},_applyChangesToActivity:function(){if(this._applyingActivityData){return;}if(this.rdo_Once.get("checked")){this.activity.RecurIterations=0;this.activity.RecurPeriod=0;this.activity.RecurPeriodSpec=0;this.activity.Recurring=false;return;}var _bab=this._getCurrentRecperiod();this.activity.RecurPeriod=_bab;var _bac=0;var _bad=this.num_Occurances.get("value");switch(_bab){case 0:case 1:this._dailyUpdateInterval();if(_bab===1){_bad=-1;}break;case 2:_bac=this._sumWeekDays();this._weeklyUpdateInterval();break;case 3:_bac=1048576;this._weeklyUpdateInterval();_bad=-1;break;case 4:_bac=1048576;this._monthlyUpdateInterval();break;case 5:_bac=this._sumMonthly();this._monthlyUpdateInterval();break;case 6:_bac=1048576;this._monthlyUpdateInterval();_bad=-1;break;case 7:_bac=38797312;this._yearlyUpdateInterval();break;case 8:_bac=this._sumYearly();this.interval=1;break;case 9:_bac=38797312;this._yearlyUpdateInterval();_bad=-1;break;}this.activity.RecurIterations=_bad;this.activity.RecurPeriodSpec=_bac+this.interval;this.activity.Recurring=true;},_getCurrentRecperiod:function(){if(this.rdo_Daily.get("checked")){return (this._rdoDailyEvery.get("checked"))?0:1;}if(this.rdo_Weekly.get("checked")){return (this._rdoWeeklyEvery.get("checked"))?2:3;}if(this.rdo_Monthly.get("checked")){return (this._rdoMonthlyOn.get("checked"))?4:(this._rdoMonthlyOnThe.get("checked"))?5:6;}if(this.rdo_Yearly.get("checked")){return (this._rdoYearlyOn.get("checked"))?7:(this._rdoYearlyOnThe.get("checked"))?8:9;}return 0;},_sumWeekDays:function(){var _bae=0;if(this._chkSaturday.get("checked")){_bae+=this._weekDayValues["sat"];}if(this._chkFriday.get("checked")){_bae+=this._weekDayValues["fri"];}if(this._chkThursday.get("checked")){_bae+=this._weekDayValues["thu"];}if(this._chkWednesday.get("checked")){_bae+=this._weekDayValues["wed"];}if(this._chkTuesday.get("checked")){_bae+=this._weekDayValues["tue"];}if(this._chkMonday.get("checked")){_bae+=this._weekDayValues["mon"];}if(this._chkSunday.get("checked")){_bae+=this._weekDayValues["sun"];}return _bae;},_getNthOccurenceOfWeekDay:function(){var _baf=parseInt(this._weekdaySelect.get("value"),10);var _bb0=parseInt(this._weeksSelect.get("value"),10);var _bb1=new Date();for(var i=0;i<7;i++){var d=new Date(_bb1.getFullYear(),_bb1.getMonth(),i+1);if(d.getDay()==_baf){return dojo.date.add(d,"day",((_bb0-1)*7));}}},_sumMonthly:function(){var _bb2=parseInt(this._weekdaySelect.get("value"),10)+1;var _bb3=parseInt(this._weeksSelect.get("value"),10);return ((_bb2*524288)+((_bb3-1)*65536));},_sumYearly:function(){var _bb4=parseInt(this._yearWeekdaySelect.get("value"),10)+1;var _bb5=parseInt(this._yearMonthNamesSelect.get("value"),10);var _bb6=parseInt(this._yearWeeksSelect.get("value"),10);return ((_bb5*4194304)+(_bb4*524288)+((_bb6-1)*65536));},_setReadOnly:function(_bb7){var _bb8=["rdo_Once","rdo_Daily","rdo_Weekly","rdo_Monthly","rdo_Yearly","_rdoDailyEvery","_dailyEveryText","_rdoDailyEveryAfter","_dailyEveryAfterText","_rdoWeeklyEvery","_weeklyEveryText","_chkMonday","_chkTuesday","_chkWednesday","_chkThursday","_chkFriday","_chkSaturday","_chkSunday","_rdoWeeklyEveryAfter","_weeklyEveryAfterText","_rdoMonthlyOn","_monthlyEveryText","_datesSelect","_rdoMonthlyOnThe","_monthlyOnTheText","_weeksSelect","_weekdaySelect","_rdoMonthlyAfter","_monthlyAfterText","_rdoYearlyOn","_yearlyEveryText","_monthNamesSelect","_yearDatesSelect","_rdoYearlyOnThe","_yearWeeksSelect","_yearWeekdaySelect","_yearMonthNamesSelect","_rdoYearlyEveryAfter","_yearlyEveryAfterText","dtp_startRecur","_rdoEndAfter","num_Occurances","_rdoEndOn","dtp_endRecur"];if(_bb7){this._bulkSetProperty(this,_bb8,"disabled",true);}else{this._bulkSetProperty(this,_bb8,"disabled",false);this._setUI();this._applyActivityData();}},_bulkSetProperty:function(ui,_bb9,prop,val){for(var i=0;i<_bb9.length;i++){var ctrl=ui[_bb9[i]];if(ctrl){ctrl.set(prop,val);}}},onStartDateChanged:function(_bba){},onRecurPeriodChanged:function(_bbb){}});return _b7d;});},"Sage/UI/Controls/Numeric":function(){define(["dojo/_base/html","dijit/_Widget","Sage/_Templated","Sage/UI/NumberTextBox","dojo/currency","dojo/_base/declare","dojo/_base/sniff","dojo/has"],function(html,_bbc,_bbd,_bbe,_bbf,_bc0,_bc1,has){dojo.mixin(dijit.form.ValidationTextBox.prototype.attributeMap,{slxchangehook:"focusNode"});var _bc2=_bc0("Sage.UI.Controls.Numeric",[_bbc,_bbd],{displayModes:{"AsHyperlink":0,"AsControl":1,"AsText":2},modeTemplates:{"AsHyperlink":new Simplate(["<div data-dojo-type=\"dijit.form.Button\" showLabel=\"true\">ONE</div>"]),"AsControl":new Simplate(["<input  data-dojo-type=\"Sage.UI.NumberTextBox\" ","dojoAttachEvent=\"onChange:onChanged\" ","constraints=\"{ {%= $.constraintsToString() %} }\" ","formatType=\"{%= $.formatType %}\" ","ignorechange=\"true\" ","required=\"{%= $.required %}\" ","id=\"{%= $.id %}_NumberTextBox\" ","style=\"width:inherit;\" ","textAlign=\"{%= $.textAlign %}\" ","hotKey=\"{%= $.hotKey %}\" ","{% if($.disabled === \"disabled\") { %} ","disabled=\"disabled\" ","{% } %}","{% if($.readonly === \"readonly\") { %} ","readonly=\"readonly\" ","{% } %}","name=\"{%= $.name %}\" type=\"text\" ","value=\"{%= $.value %}\" required=\"{%= $.required %}\" dojoAttachPoint=\"focusNode\" ","maxLength=\"{%= $.maxLength %}\">"]),"AsText":new Simplate(["<div data-dojo-type=\"dijit.form.Button\" showLabel=\"true\">{%= $.formattedText() %}</div>"])},postMixInProperties:function(){this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(this.domNode.parentNode&&this.domNode.parentNode.tagName=="SPAN"){this.domNode.parentNode.tabIndex=-1;}},constructor:function(_bc3){this.constraints={};this.inherited(arguments);},widgetTemplate:new Simplate(["<div style=\"width:inherit;\" slxcompositecontrol=\"true\" id=\"{%= $.id %}\" >","{%= $.modeTemplates[$.displayMode].apply($) %}","</div>"]),value:0,autoPostBack:false,width:15,maxLength:128,style:"",enabled:true,visible:true,readonly:"",disabled:"",hotKey:"",tabIndex:0,required:false,displayMode:"AsControl",widgetsInTemplate:true,styles:"text-align: right;",constraints:null,name:"",formattedText:function(){return this.value;},formatType:"",constraintsToString:function(){var tmp=[];var prop;for(prop in this.constraints){if(this.constraints.hasOwnProperty(prop)){var _bc4=this.constraints[prop];if(typeof _bc4==="string"){_bc4="'"+_bc4+"'";}tmp.push(prop+":"+_bc4);}}var _bc5=tmp.join(",");return _bc5;},onChanged:function(e){if(this.autoPostBack&&!has("ie")){if(Sys){Sys.WebForms.PageRequestManager.getInstance()._doPostBack(this.id,null);}}}});return _bc2;});},"Sage/UI/NumberTextBox":function(){define(["dijit/form/NumberTextBox","dijit/form/ValidationTextBox","dojo/number","Sage/Utility","dojo/_base/declare"],function(_bc6,_bc7,_bc8,_bc9,_bca){var _bcb=_bca("Sage.UI.NumberTextBox",_bc6,{shouldPublishMarkDirty:true,autoPostBack:false,hotKey:"",maxLength:"",formatType:"",attributeMap:{hotKey:{node:"textbox",type:"attribute",attribute:"accessKey"},maxLength:{node:"textbox",type:"attribute",attribute:"maxLength"}},textAlign:"",_getValueAttr:function(){var _bcc=this.inherited(arguments);if((typeof _bcc==="undefined"||isNaN(_bcc))&&this.textbox.value!==""){_bcc=this.getTextBoxValue();}return _bcc;},_setValueAttr:function(v){this.constraints["locale"]=Sys.CultureInfo.CurrentCulture.name;this.inherited(arguments);},_onFocus:function(){this.onFocusFiring=true;this.inherited(arguments);if(this.constraints.type==="percent"){var _bcd=((this.value*10000)/100);this.textbox.value=_bc8.format(_bcd,{places:this.constraints.places,locale:Sys.CultureInfo.CurrentCulture.name});}this.onFocusFiring=false;},_onBlur:function(){this.onBlurFiring=true;if(this.formatType==="Percent"||this.constraints.type==="percent"){if(this.textbox.value.indexOf(Sys.CultureInfo.CurrentCulture.numberFormat.PercentSymbol)===-1){var _bce=this.getTextBoxValue();var _bcf=_bce/100;if(typeof (this.constraints.places)==="number"){this.set("displayedValue",_bc8.format(_bcf,{places:this.constraints.places+2,locale:Sys.CultureInfo.CurrentCulture.name}));}else{if(typeof (this.constraints.places)==="string"&&this.constraints.places.indexOf(",")>0&&this.constraints.places[2]){this.set("displayedValue",_bc8.format(_bcf,{places:Math.floor(this.constraints.places[2])+2,locale:Sys.CultureInfo.CurrentCulture.name}));}else{this.set("displayedValue",_bc8.format(_bcf,{locale:Sys.CultureInfo.CurrentCulture.name}));}}}}this.onBlurFiring=false;this.inherited(arguments);},_sageUINumberTextBox_IsValid:function(){if(this.formatType!=="Percent"||this.constraints.type!=="percent"){if(dojo.isIE){if(this.oldValue!==this.textbox.value){var trim=this._restrictDD();if(trim!==this.textbox.value){this.textbox.value=trim;}}this.oldValue=this.textbox.value;}else{this.textbox.value=this._restrictDD();}}this.inherited(arguments);},_restrictDD:function(){var _bd0=this.textbox.value;if(this.onBlurFiring||this.onFocusFiring){return _bd0;}if(this.constraints.places){_bd0=_bc9.restrictDecimalDigit(this.textbox.value,this.constraints.places);}return _bd0;},_sageUINumberTextBox_KeyPress:function(e){var type=this.constraints.type;if(!_bc9.restrictToNumberOnKeyPress(e,type)){dojo.stopEvent(e);}},_sageUINumberTextBox_OnFocus:function(e){dojo.setSelectable(this.domNode,true);},startup:function(){this.inherited(arguments);var self=this;dojo.style(self.focusNode,"textAlign",self.textAlign);self.value=self.value||0;self.onBlurFiring=false;self.onFocusFiring=false;this.connect(self,"isValid",self._sageUINumberTextBox_IsValid);this.connect(self,"onKeyPress",self._sageUINumberTextBox_KeyPress,true);this.connect(self,"onFocus",self._sageUINumberTextBox_OnFocus,true);if(!this.ignorechange){this.connect(self,"onChange",self.valueChanged);}},valueChanged:function(e){if(this.shouldPublishMarkDirty){dojo.publish("Sage/events/markDirty");}if(this.autoPostBack){if(Sys){Sys.WebForms.PageRequestManager.getInstance()._doPostBack(this.id,null);}}},getTextBoxValue:function(){var _bd1=0;var _bd2=this.textbox.value;if(_bd2===""||_bd2===null){_bd2="0";}if(_bd2.lastIndexOf(Sys.CultureInfo.CurrentCulture.numberFormat.NumberDecimalSeparator)===_bd2.length-1){_bd2=_bd2.slice(0,_bd2.length-1);}_bd1=_bc8.parse(_bd2,{locale:Sys.CultureInfo.CurrentCulture.name});if(isNaN(_bd1)){_bd1=this.value;}return _bd1;}});return _bcb;});},"Sage/UI/Controls/DurationSelect":function(){define(["Sage/UI/Controls/_customSelectMixin","Sage/Utility/Activity","dojo/date","dojo/date/locale","dojo/data/ItemFileReadStore","dojo/i18n!./nls/DurationSelect","dojo/_base/declare"],function(_bd3,_bd4,_bd5,_bd6,_bd7,_bd8,_bd9){var _bda=_bd9("Sage.UI.Controls.DurationSelect",_bd3,{id:"",startTime:new Date(),timeValue:new Date(),valuesAreAfterStart:true,_store:null,_storeData:{},labelFmt:"${amount} ${interval} (${endTime})",splitAmoutLabelFmt:"${amount1} ${interval1}, ${amount2} ${interval2} (${endTime})",minuteText:"minute",minutesText:"minutes",hourText:"hour",hoursText:"hours",dayText:"day",daysText:"days",timeIncrements:[0,5,10,15,30,60,120,240],items:[],itemsByDur:{},constructor:function(){dojo.mixin(this,_bd8);},resetItems:function(){this.items=[];this.itemsByDur={};},_fillSelect:function(){if(this._select){this.resetItems();var _bdb=false;for(var i=0;i<this.timeIncrements.length;i++){var inc=this.timeIncrements[i];this.items.push(this._createItem(inc));_bdb=_bdb||(this.value===inc);}if(!_bdb&&(this.value)){this.items.push(this._createItem(this.value));}this._storeData={identifier:"value",label:"label",items:this.items};this._store=new _bd7({data:this._storeData});this._select.set("store",this._store);this._select.set("searchAttr","label");if(this.value||this.value===0){this.set("value",this.value);}}},_createItem:function(inc){var st=this.startTime;if(st.getHours()===0&&st.getMinutes===0&&st.getSeconds()===5){st=new Date(st.getUTCFullYear(),st.getUTCMonth(),st.getUTCDate(),0,0,0);}var newD;newD=_bd5.add(st,"minute",(this.valuesAreAfterStart)?inc:inc*-1);var obj={"value":inc,"dateValue":newD,"label":this._formatLabel(inc,newD)};this.itemsByDur[inc]=obj;return obj;},_formatLabel:function(inc,_bdc){var _bdd;var _bde={amount:inc,interval:(inc===1)?this.minuteText:this.minutesText,endTime:_bd6.format(_bdc,{selector:"time"})};var _bdf=this.labelFmt;if(inc>59){var mod=inc%60;_bdd=Math.floor(inc/60);if(mod===0){_bde["amount"]=_bdd;_bde["interval"]=(_bdd===1)?this.hourText:this.hoursText;}else{_bde["amount1"]=_bdd;_bde["interval1"]=(_bdd===1)?this.hourText:this.hoursText;_bde["amount2"]=mod;_bde["interval2"]=(mod===1)?this.minuteText:this.minutesText;_bdf=this.splitAmoutLabelFmt;}if(_bdd>23){var _be0=Math.round(_bdd/24);_bde["amount"]=_be0;_bde["interval"]=(_be0===1)?this.dayText:this.daysText;_bde["endTime"]=_bd6.format(_bdc,{selector:"datetime"});}}return dojo.string.substitute(_bdf,_bde);},_handleValueNotInStore:function(_be1){var _be2=this.text;var _be3=/\(([\s\S]*)\)/;var _be4=_be3.exec(_be1);var _be5=_be3.exec(_be2);if((_be4)&&(_be5)){if(_be4[1]===_be5[1]){_be1=_be1.replace(_be4[0],"");}else{var _be6=_bd6.parse(_be4[1],{selector:"time"});if(_be6){_be6.setFullYear(this.startTime.getFullYear());_be6.setMonth(this.startTime.getMonth());_be6.setDate(this.startTime.getDate());this._setTimeValueAttr(_be6);return this.value;}}}var dur=0;if(typeof _be1==="number"){dur=_be1;}else{if(_be1.indexOf(",")>0){var _be7=_be1.split(",");for(var i=0;i<_be7.length;i++){var _be8=this._getMinutesFromStringPart(_be7[i]);if(_be8){dur+=_be8;}}}else{dur=this._getMinutesFromStringPart(_be1);}}if(!dur){this._select.set("value",this.text);return this.value;}var _be9=this._createItem(dur);this.value=_be9.value;this.text=_be9.label;this._select.set("displayedValue",_be9.label);return _be9.value;},_setValueAttr:function(_bea){this._removeOldValueFromStore();this.text=_bea;this.value=_bea;if(this._store){this._store.fetchItemByIdentity({identity:_bea,onItem:function(item){if(item){this._select.set("value",this._store.getValue(item,this._storeData.label));this.value=this._store.getValue(item,this._storeData.identifier);this.text=this._store.getValue(item,this._storeData.label);}else{this._handleValueNotInStore(_bea);}},onError:function(){},scope:this});}},_removeOldValueFromStore:function(){for(var i=0;i<this.timeIncrements.length;i++){if(this.value===this.timeIncrements[i]){return;}}delete (this.itemsByDur[this.value]);var l=this.items.length;for(i=0;i<l;i++){if(this.items[i].value===this.value||this.items[i].value[0]===this.value){this.items.splice(i,1);return;}}},_getMinutesFromStringPart:function(str){var _beb=str.trim().split(" ");var num=parseInt(_beb[0],10);if(isNaN(num)){return false;}if(_beb.length>1){if(this.hoursText.indexOf(_beb[1])>-1){num=num*60;}}return num;},_setStartTimeAttr:function(_bec){if(_bd5.compare(this.startTime,_bec,"datetime")!==0){this.startTime=_bec;this._fillSelect();}},_setValuesAreAfterStartAttr:function(_bed){if(this.valuesAreAfterStart!==_bed){this.valuesAreAfterStart=_bed;this._fillSelect();}},_getTimeValueAttr:function(){if(this.itemsByDur.hasOwnProperty(this.value)){var dVal=this.itemsByDur[this.value].dateValue;return (dojo.isArray(dVal))?dVal[0]:dVal;}else{if(this.value&&this.startTime){var d=_bd5.add(this.startTime,"minute",(this.valuesAreAfterStart)?this.value:this.value*-1);this.dateValue=d;return this.dateValue;}return null;}},_setTimeValueAttr:function(time){if(!time){return;}if(this.items.length<1){this._fillSelect();}var d=this.startTime;if(d.getHours()===0&&d.getMinutes===0&&d.getSeconds()===5){time=new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds());}for(var obj in this.itemsByDur){if(obj&&this.itemsByDur[obj].dateValue){var _bee=dojo.isArray(this.itemsByDur[obj].dateValue)?this.itemsByDur[obj].dateValue[0]:this.itemsByDur[obj].dateValue;if(_bd5.compare(_bee,time,"datetime")===0){this.set("value",this.itemsByDur[obj].value);this.text=this.itemsByDur[obj].label;this._select.set("displayedValue",this.itemsByDur[obj].label);return;}}}var dur=_bd5.difference(this.startTime,time,"minute");if(dur<0){dur=dur*-1;}var o={"value":dur,"dateValue":time,"label":this._formatLabel(dur,time)};this.set("value",dur);this.text=o.label;this.itemsByDur[dur]=o;this._select.set("displayedValue",o.label);},_setTimeIncrementsAttr:function(_bef){if(this.timeIncrements===_bef){return;}this.timeIncrements=_bef;this._fillSelect();}});return _bda;});},"Sage/UI/Controls/_customSelectMixin":function(){define(["dijit/_Widget","Sage/_Templated","dijit/form/ComboBox","dojo/_base/declare"],function(_bf0,_bf1,_bf2,_bf3){var _bf4=_bf3("Sage.UI.Controls._customSelectMixin",[_bf0,_bf1],{widgetsInTemplate:true,disabled:false,value:"",text:"",widgetTemplate:new Simplate(["<div>","<select dojoType=\"dijit.form.ComboBox\" id=\"{%= $.id %}_select\" labelAttr=\"label\" dojoAttachPoint=\"_select\" dojoAttachEvent=\"onChange:_onChange\"></select>","</div>"]),postCreate:function(){this.inherited(arguments);this._fillSelect();},_fillSelect:function(){},_setValueAttr:function(_bf5){this.text=_bf5;this.value=_bf5;if(this._store){this._store.fetchItemByIdentity({identity:_bf5,onItem:function(item){if(item){this._select.set("value",this._store.getValue(item,this._storeData.label));this.value=this._store.getValue(item,this._storeData.identifier);this.text=this._store.getValue(item,this._storeData.label);}else{this._handleValueNotInStore(_bf5);}},onError:function(){},scope:this});}},_getValueAttr:function(){if(this._select.item&&this._store){this.value=this._store.getValue(this._select.item,this._storeData.identifier);}return this.value;},_onChange:function(_bf6){if((this.value===_bf6)||(this.text===_bf6)){return;}if(this._select.item){var item=this._select.item;this.value=this._store.getValue(item,this._storeData.identifier);this.text=this._store.getValue(item,this._storeData.label);}else{this.value=this._handleValueNotInStore(_bf6);}this.onChange(this.value);},_handleValueNotInStore:function(_bf7){this.text=_bf7;this.value=_bf7;return _bf7;},_getTextAttr:function(){return this.text;},_setTextAttr:function(text){this.text=text;this._select.set("displayedValue",text);},_setDisabledAttr:function(_bf8){this.disabled=_bf8;this._select.set("disabled",_bf8);},_getDisabledAttr:function(){this.disabled=this._select.get("disabled");return this.disabled;},onChange:function(){}});return _bf4;});},"Sage/Services/CalendarSecurityService":function(){define(["Sage/Data/SDataServiceRegistry","Sage/Utility","dojo/_base/declare"],function(_bf9,_bfa,_bfb){var _bfc=_bfb("Sage.Services.CalendarSecurityService",null,{_rawList:[],_accessList:{},_dataAvailable:false,constructor:function(opts){this._dataAvailable=false;this._loading=false;},_waiting:[],hasAccess:function(_bfd,_bfe,_bff,_c00){if(this._dataAvailable){var item=this._accessList[_bfd];var _c01=false;if(item){_c01=item[_bfe];}if(_bff){_bff.call(_c00||this,_c01);}}else{this._waiting.push(dojo.connect(this,"onDataAvailable",this,function(){this.hasAccess(_bfd,_bfe,_bff,_c00);}));if(!this._loading){this._loadData();}}},getListByAccessLevel:function(_c02,_c03,_c04,_c05,_c06){var _c07=_c05||"userid";var _c08=_c06||"name";if(this._dataAvailable){var list=[];for(var i=0;i<this._rawList.length;i++){var item=this._rawList[i];if(_c02==="view"||item[_c02]){var obj={};obj[_c07]=item["accessUserId"];obj[_c08]=item["accessUserName"];list.push(obj);}}_c03.call(_c04||this,list);}else{this._waiting.push(dojo.connect(this,"onDataAvailable",this,function(){this.getListByAccessLevel(_c02,_c03,_c04,_c05,_c06);}));if(!this._loading){this._loadData();}}},_loadData:function(_c09,_c0a,_c0b){this._loading=true;var svc=_bf9.getSDataService("mashups",false,true,true);var uid=_bfa.getClientContextByKey("userID")||"";_c0a=_c0a||100;_c09=_c09||1;var self=this;var _c0c=new Sage.SData.Client.SDataNamedQueryRequest(svc);_c0c.setApplicationName("$app");_c0c.setResourceKind("mashups");_c0c.uri.setCollectionPredicate("'UserCalendarQueries'");_c0c.setQueryName("execute");_c0c.setQueryArg("_resultName","UserHasAccessToTheseCalendars");_c0c.setQueryArg("_userId",uid);_c0c.setQueryArg("startIndex",_c09);_c0c.setQueryArg("count",_c0a);_c0c.read({success:function(data){var _c0d=data.$totalResults;if(_c0d>100&&_c0d>(_c09+_c0a)){_c09=_c09==1?(_c09+_c0a)-1:_c09+_c0a;self._loadData(_c09,(_c0d-_c09),data["$resources"]);}else{if(_c0b){_c0b.push.apply(_c0b,data["$resources"]);self._dataReceived(_c0b);}else{self._dataReceived(data["$resources"]);}}},failure:function(){},scope:this});},_dataReceived:function(data){this._rawList=data;var i;for(i=0;i<this._rawList.length;i++){var item=this._rawList[i];this._accessList[item["accessUserId"]]={"name":item["accessUserName"],"userid":item["accessUserId"],"allowAdd":item["allowAdd"],"allowDelete":item["allowDelete"],"allowEdit":item["allowEdit"],"allowSync":item["allowSync"]};}this._dataAvailable=true;this._loading=false;this.onDataAvailable();for(i=0;i<this._waiting.length;i++){dojo.disconnect(this._waiting[i]);}this._waiting=[];},onDataAvailable:function(){}});Sage.Services.addService("CalendarSecurityService",new _bfc());});},"Sage/MainView/ActivityMgr/EditEventEditor":function(){define(["dijit/_Widget","Sage/_Templated","dijit/Toolbar","dijit/layout/TabContainer","dijit/layout/ContentPane","dijit/form/Textarea","dijit/form/ComboBox","Sage/UI/TextBox","Sage/UI/Controls/DateTimePicker","Sage/UI/SDataLookup","dojox/layout/TableContainer","Sage/Data/SingleEntrySDataStore","Sage/MainView/BindingsManager","dijit/Dialog","Sage/UI/Dialogs","Sage/Utility","Sage/Data/SDataServiceRegistry","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dojo/_base/declare","dojo/i18n!./nls/EditEventEditor","dijit/focus","dojo/_base/lang"],function(_c0e,_c0f,_c10,_c11,_c12,_c13,_c14,_c15,_c16,_c17,_c18,_c19,_c1a,_c1b,_c1c,_c1d,_c1e,_c1f,_c20,_c21,_c22,_c23,lang){var _c24=_c21("Sage.MainView.ActivityMgr.EditEventEditor",[_c0e,_c0f],{eventId:null,mode:false,_dialog:false,_currentUserId:null,_eventService:false,_eventData:false,_eventStore:false,_bindingMgr:false,_eventChangeConnection:false,lup_User:false,eventDefaultValues:{},eventConnections:[],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div>","<div data-dojo-type=\"dijit.Dialog\" id=\"eventDialog\" title=\"\" dojoAttachPoint=\"_dialog\" >","<div class=\"event-dialog\">","<div data-dojo-type=\"dijit.layout.ContentPane\" id=\"{%= $.id%}_cp_event\" title=\"\" dojoAttachPoint=\"cp_Event\" class=\"tabContent\">","<div data-dojo-type=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"140\">","<div data-dojo-type=\"Sage.UI.Controls.DateTimePicker\" shouldPublishMarkDirty=\"false\" label=\"{%= $.lblStartDateText %}\" id=\"{%= $.id%}_tb_StartDate\" name=\"tb_StartDateName\" dojoAttachPoint=\"tb_StartDate\" displayDate=\"true\" displayTime=\"false\"  ></div>","<div data-dojo-type=\"Sage.UI.Controls.DateTimePicker\" shouldPublishMarkDirty=\"false\" label=\"{%= $.lblEndDateText %}\" id=\"{%= $.id%}_tb_EndDate\" name=\"tb_EndDateName\" dojoAttachPoint=\"tb_EndDate\" displayDate=\"true\" displayTime=\"false\" ></div>","<select  dojoAttachPoint=\"tb_DayType\" data-dojo-type=\"dijit.form.ComboBox\" required=\"false\" name=\"tb_DayType\"  label=\"{%= $.lblDayTypeText %}\" id=\"{%= $.id%}_tb_DayType\" >","<option value=\"Active\" >{%=$.eventTypeActiveText %}</option>","<option value=\"Business Trip\" >{%=$.eventTypeBusinessTripText %}</option>","<option value=\"Conference\" >{%=$.eventTypeConferenceText%}</option>","<option value=\"Holiday\" selected=\"selected\" >{%=$.eventTypeHolidayText%}</option>","<option value=\"Off\" >{%=$.eventTypeOffText%}</option>","<option value=\"Trade Show\" >{%=$.eventTypeTradeShowText%}</option>","<option value=\"Unavailable\" >{%=$.eventTypeUnavailableText%}</option>","<option value=\"Vacation\" >{%=$.eventTypeVacationText%}</option>","</select>","<input data-dojo-type=\"dijit.form.TextBox\" id=\"{%= $.id %}_tb_Location\" label=\"{%= $.lblLocationText %}\" dojoAttachPoint=\"tb_Location\" maxLength=\"255\" />","<textarea data-dojo-type=\"dijit.form.SimpleTextarea\" label=\"{%= $.lblDescriptionText %}\" id=\"{%= $.id%}_tb_Description\" name=\"tb_Description\" dojoAttachPoint=\"tb_Description\" rows=\"4\" cols=\"1\"  maxLength=\"128\"  ></textarea>","<div class=\"event-dialog remove-padding\">","<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.lblUserText %}\" dojoAttachPoint=\"container_UserLup\" class=\"remove-padding lookup-container\"></div>","</div>","</div>","</div>","<div class=\"button-bar alignright\">","<div data-dojo-type=\"dijit.form.Button\"  id=\"{%= $.id%}_btn_OK\" name=\"btn_OK\" dojoAttachPoint=\"btn_OK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.btnOkayText %}</div>","<div data-dojo-type=\"dijit.form.Button\"  id=\"{%= $.id%}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $. btnCancelText %}</div>","</div>","</div>","</div>","</div>"]),constructor:function(){dojo.mixin(this,_c22);this._eventService=_c1e.getSDataService("dynamic");this._setEventStore();this._currentUserId=_c1d.getClientContextByKey("userID")||"";},destroy:function(){if(this._eventChangeConnection){dojo.disconnect(this._eventChangeConnection);this._eventChangeConnection=false;}if(this._bindingMgr){this._bindingMgr.destroy();}if(this.lup_User){this.lup_User.destroy();}this.inherited(arguments);},show:function(_c25){if(!this.lup_User){this._createUserLookup();}if(this.mode==="New"){this._dialog.set("title",this.titleScheduleText);}else{this._dialog.set("title",this.titleEditText);}this.eventDefaultValues=_c25||{};this._loadData();this._dialog.set("refocus",false);this._dialog.show();if(!this._dialog.helpIcon){_c20.mixin(this._dialog,new _c1f());this._dialog.createHelpIconByTopic("addevent");}},hide:function(){this._dialog.hide();},resize:function(){},_setModeAttr:function(mode){this.mode=mode;if(mode.indexOf("New")===0){this.mode="New";this._eventData=false;}},_setEventIdAttr:function(_c26){if(this.eventId!==_c26){this.eventId=_c26;this._eventData=false;}},_getEventIdAttr:function(){return this.eventId;},_setEventStore:function(){if(!this._eventStore){this._eventStore=new _c19({include:[],select:["StartDate","EndDate","Description","Type","Location","UserId"],resourceKind:"events",service:this._eventService});}},onChange:function(_c27,_c28,_c29,_c2a){},setMode:function(mode){this._mode=mode;},_loadData:function(){this._eventData=false;if(this._eventStore){if(this.mode!=="New"){this._eventStore.fetch({predicate:"'"+this.eventId+"'",onComplete:this._receivedEvent,onError:this._requestFailure,scope:this});}else{this._eventStore.newItem({onComplete:function(_c2b){_c1d.setValue(_c2b,"UserId",this._currentUserId);this._receivedEvent(_c2b);},scope:this});}}},_receivedEvent:function(_c2c){if(this.mode==="New"){this._eventData=(dojo.mixin(_c2c,this.eventDefaultValues));}else{this._eventData=_c2c;}this._bind();},_requestFailure:function(msg,_c2d,opts){},_bind:function(){if(this._eventData){if(!this._bindingMgr){this._bindingMgr=new _c1a({defaultBinding:{boundEntity:this._eventData},items:[{boundWidget:this.tb_StartDate,entityProperty:"StartDate",dataType:"date"},{boundWidget:this.tb_EndDate,entityProperty:"EndDate",dataType:"date"},{boundWidget:this.tb_DayType,entityProperty:"Type"},{boundWidget:this.tb_Description,entityProperty:"Description"},{boundWidget:this.tb_Location,entityProperty:"Location"}]});this._eventChangeConnection=dojo.connect(this._bindingMgr,"onChange",this,"onChange");}else{if(!this._bindingMgr.boundEntity||(this._eventData["$key"]!==this._bindingMgr.boundEntity["$key"])){this._bindingMgr.setBoundEntity(this._eventData);}else{this._bindingMgr.bind();}}this._bindUserLookup();}},_bindUserLookup:function(){if(this._eventData.UserId){if(this._eventData.UserId===this._currentUserId){var _c2e={"$key":this._currentUserId,"$descriptor":_c1d.getClientContextByKey("userPrettyName")};this.lup_User.set("selectedObject",_c2e);}else{this._getUserInfoFor(this._eventData.UserId,function(user){this.lup_User.set("selectedObject",user);});}}else{this.lup_User.set("selectedObject",null);}},_getUserInfoFor:function(_c2f,_c30){var _c31=new Sage.SData.Client.SDataSingleResourceRequest(_c1e.getSDataService("dynamic",false,true,true));_c31.setResourceKind("userInfo");_c31.setResourceSelector("'"+_c2f+"'");_c31.setQueryArg("precedence","0");_c31.read({success:_c30,scope:this,failure:function(){}});},_createUserLookup:function(){var _c32={id:"_eventUser",structure:[{cells:[{name:this.nameText,field:"Name",sortable:true,width:"400px",editable:false,propertyType:"System.String",excludeFromFilters:false,defaultValue:""}]}],gridOptions:{contextualCondition:function(){return "AllowAdd AND (AccessId eq '"+_c1d.getClientContextByKey("userID")+"' OR AccessId eq 'EVERYONE') AND Type eq 'User'";},contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"activityresourceviews",sort:[{attribute:"Name"}]},isModal:true,preFilters:[],returnPrimaryKey:true,dialogTitle:this.lookupUserText,dialogButtonText:this.btnOkayText};this.lup_User=new Sage.UI.Controls.Lookup({id:"event_lu_user",config:_c32});this.eventConnections.push(dojo.connect(this.lup_User,"onChange",this,"_userChanged"));dojo.place(this.lup_User.domNode,this.container_UserLup.domNode,"only");},_userChanged:function(_c33){_c1d.setValue(this._eventData,"UserId",(_c33)?_c33["$key"].substr(0,12):"");},datesValid:function(){var _c34=this.tb_StartDate.value;var _c35=this.tb_EndDate.value;_c35=new Date(_c35.getFullYear(),_c35.getMonth(),_c35.getDate(),0,0);this._eventData.EndDate=new Date(_c35.getFullYear(),_c35.getMonth(),_c35.getDate(),new Date().getHours(),new Date().getMinutes(),new Date().getSeconds());this._eventData.StartDate=new Date(_c34.getFullYear(),_c34.getMonth(),_c34.getDate(),new Date().getHours(),new Date().getMinutes(),new Date().getSeconds());_c34=new Date(_c34.getFullYear(),_c34.getMonth(),_c34.getDate(),0,0);if(_c34>_c35){_c1c.showError(this.invaildDatesText);return false;}return true;},_okClick:function(){var _c36=_c23.curNode;if(_c36){_c36.blur();}setTimeout(lang.hitch(this,function(){if(!this.datesValid()){return;}if(this.mode==="New"){this._eventStore.saveNewEntity(this._eventData,this._successEventCreated,this._failedEventCreated,this);}else{this._eventStore.save({scope:this,success:this._successEventUpdated,failure:this._failedEventUpdated});}}),1);},_cancelClick:function(){this.hide();},_successEventCreated:function(_c37){dojo.publish("/entity/event/create",[_c37,this]);this.hide();},_failedEventCreated:function(_c38){_c1c.showError(this.errorText);},_successEventUpdated:function(_c39){dojo.publish("/entity/event/change",[_c39,this]);this.hide();},_failedEventUpdated:function(_c3a){_c1c.showError(this.errorText);}});return _c24;});},"Sage/UI/TextBox":function(){define(["dijit/form/TextBox","dojo/_base/declare"],function(_c3b,_c3c){var _c3d=_c3c("Sage.UI.TextBox",_c3b,{postCreate:function(){this.inherited(arguments);this._val=this.get("value");if(this.get("value")===""&&this._val){this.set("value",this._val);}this.set("class","txt-ss-watermark");},onFocus:function(){this.set("value","");this.set("class","txt-ss");},forceFocus:function(val){this.set("value",val);this.set("class","txt-ss-watermark");},onBlur:function(){if(this.get("value")===""){this.set("class","txt-ss-watermark");this.set("value",this._val);}}});return _c3d;});},"Sage/MainView/ActivityMgr/QuickCompleteEditor":function(){define(["dijit/_Widget","Sage/_Templated","dijit/layout/ContentPane","dijit/form/Textarea","Sage/UI/TextBox","Sage/UI/Controls/DateTimePicker","dijit/form/FilteringSelect","Sage/UI/SDataLookup","dojox/layout/TableContainer","Sage/UI/Controls/SingleSelectPickList","dijit/Dialog","dojo/_base/declare","dojo/i18n!./nls/QuickCompleteEditor"],function(_c3e,_c3f,_c40,_c41,_c42,_c43,_c44,_c45,_c46,_c47,_c48,_c49,_c4a){var _c4b=_c49("Sage.MainView.ActivityMgr.QuickCompleteEditor",[_c3e,_c3f],{_currentUserId:null,_individuallyHandler:false,_nowHandler:false,_asScheduledHandler:false,_selectionContext:false,lblcmdMessageText:"",lblInfoMessageText:"",lblResultText:"Result:",lblNoteText:"Note (append to all items):",btnCompleteIndividuallyText:"Individually",btnAsScheduledText:"As Scheduled",btnCompleteNowText:"Now",btnCancelText:"Cancel",btnCloseText:"Close",btnHelpText:"Help",resultCompletedText:"Complete",titleText:"Quick Complete",widgetsInTemplate:true,selectionContext:null,widgetTemplate:new Simplate(["<div>","<div data-dojo-type=\"dijit.Dialog\" id=\"{%= $.id%}_qucikCompleteDialog\" title=\"Quick Complete\" dojoAttachPoint=\"_dialog\" >","<div class=\"quickComplete-dialog\">","<div data-dojo-type=\"dijit.layout.ContentPane\" id=\"{%= $.id%}_cp_General\" title=\"\" dojoAttachPoint=\"cp_General\">","<div data-dojo-type=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" class=\"controlPropForm\" labelWidth=\"140\">","<div id=\"{%= $.id%}_div_actionMessage\"  name=\"div_actionMessage\" dojoAttachPoint=\"div_actionMessage\"></div>","<br>","<select label=\"{%= $. lblResultText %}\" id=\"{%= $.id%}_pk_Result\" data-dojo-type=\"Sage.UI.Controls.SingleSelectPickList\" dojoAttachPoint=\"pk_Result\" canEditText=\"true\" itemMustExist=\"false\" pickListName=\"To Do Result Codes\" ></select>","<div data-dojo-type=\"dijit.form.SimpleTextarea\"\" label=\"{%= $.lblNoteText %}\" id=\"{%= $.id%}_ta_Note\" name=\"tb_Note\" dojoAttachPoint=\"ta_Note\"></div>","</div>","<br>","<div id=\"{%= $.id%}_div_cmdMessage\"  name=\"div_cmdMessage\" dojoAttachPoint=\"div_cmdMessage\" style=\"font-weight:bold\"></div>","<br>","<div class=\"button-bar alignright\">","<div data-dojo-type=\"dijit.form.Button\"  id=\"{%= $.id%}_btn_CompleteIndividually\" name=\"btn_CompleteIndividually\" dojoAttachPoint=\"btn_CompleteIndividually\" dojoAttachEvent=\"onClick:_onCompleteIndividually\" style=\"align:left\" >{%= $.btnCompleteIndividuallyText %}</div>","<div data-dojo-type=\"dijit.form.Button\"  id=\"{%= $.id%}_btn_btnAsScheduled\" name=\"btn_AsScheduled\" dojoAttachPoint=\"btn_AsScheduled\" dojoAttachEvent=\"onClick:_onAsScheduled\">{%= $.btnAsScheduledText %}</div>","<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id%}_btn_CompleteNow\" name=\"btn_CompleteNow\" dojoAttachPoint=\"btn_CompleteNow\" dojoAttachEvent=\"onClick:_onCompleteNow\">{%= $.btnCompleteNowText %}</div>","<div data-dojo-type=\"dijit.form.Button\"  id=\"{%= $.id%}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $. btnCancelText %}</div>","</div>","</div>","<div data-dojo-type=\"dijit.layout.ContentPane\" id=\"{%= $.id%}_cp_processing\" title=\"\" dojoAttachPoint=\"cp_processing\">","<div id=\"{%= $.id%}_div_processingMessage\"  name=\"div_processingMessage\" dojoAttachPoint=\"div_processingMessage\"></div>","<div class=\"button-bar alignright\">","<div data-dojo-type=\"dijit.form.Button\"  id=\"{%= $.id%}_btn_Close\" name=\"btn_Close\" dojoAttachPoint=\"btn_Close\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $. btnCloseText %}</div>","</div>","</div>","</div>","</div>","</div>"]),constructor:function(_c4c){dojo.mixin(this,_c4a);this._currentUserId=Sage.Utility.getClientContextByKey("userID")||"";},destroy:function(){this._dialog.destroyRecursive();this.destroyRecursive();},show:function(){if(this.selectionContext){this.div_actionMessage.innerHTML=this.actionMessage;this.div_cmdMessage.innerHTML=String.format(this.completeMessage,this.selectionContext.count);this._dialog.set("title",this.titleText);}dojo.style(this.cp_processing.domNode,"display","none");this._dialog.show();},hide:function(){this.destroy();},resize:function(){},_showProcessing:function(){dojo.style(this.cp_General.domNode,"display","none");dojo.style(this.cp_processing.domNode,"display","block");this.div_processingMessage.innerHTML=String.format(this.processingMessage,this._selectionContext.count);},_onCompleteIndividually:function(){this.onCompleteIndividually();this._dialog.hide();},_onCompleteNow:function(){this._showProcessing();var _c4d={selectionContext:this.selectionContext,note:this.ta_Note.value,result:this.pk_Result.get("value"),resultCode:""};this.onCompleteNow(_c4d);this._dialog.hide();},_onAsScheduled:function(){this._showProcessing();var _c4e={selectionContext:this.selectionContext,note:this.ta_Note.value,result:this.pk_Result.get("value"),resultCode:""};this.onCompleteAsScheduled(_c4e);this._dialog.hide();},_cancelClick:function(){this.onCancel();this._dialog.hide();},onCompleteIndividually:function(){},onCompleteNow:function(args){},onCompleteAsScheduled:function(args){},onCancel:function(){}});return _c4b;});},"Sage/Services/ActivityActionProcessor":function(){define(["dojo/i18n","Sage/UI/Dialogs","dijit/_Widget","Sage/_Templated","dojo/i18n!./nls/ActivityActionProcessor","dojo/_base/declare"],function(i18n,_c4f,_c50,_c51,_c52,_c53){var _c54=_c53("Sage.Services.ActivityActionProcessor",[_c50,_c51],{_dialog:false,_currentUserId:null,_action:false,_processing:false,_selectionContext:false,btnOkayText:"OK",btnCancelText:"Cancel",btnCloseText:"Close",btnHelpText:"Help",processingText:"Processing request please wait...",failureText:"I'm sorry, the action was not successful an error occurred.",titleText:"Process",widgetsInTemplate:true,widgetTemplate:new Simplate(["<div>","<div data-dojo-type=\"dijit.Dialog\" id=\"activityProcessActionDialog\" title=\"{%= $.titleText%}\" dojoAttachPoint=\"_dialog\" style=\"width:400px\">","<div class=\"activityProcess-dialog\">","<div data-dojo-type=\"dijit.layout.ContentPane\" id=\"{%= $.id%}_cp_envet_General\" title=\"\" dojoAttachPoint=\"cp_General\">","<div data-dojo-type=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" class=\"controlPropForm\" labelWidth=\"140\">","<div id=\"{%= $.id%}_div_actionMessage\"  name=\"div_actionMessage\" dojoAttachPoint=\"div_actionMessage\"></div>","</div>","</div>","<table class=\"button-bar\"><tr><td class=\"alignright valignbottom\">","<div data-dojo-type=\"dijit.form.Button\"  id=\"{%= $.id%}_btn_OK\" name=\"btn_OK\" dojoAttachPoint=\"btn_OK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.btnOkayText %}</div>","<div data-dojo-type=\"dijit.form.Button\"  id=\"{%= $.id%}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $. btnCancelText %}</div>","<div data-dojo-type=\"dijit.form.Button\"  id=\"{%= $.id%}_btn_Close\" name=\"btn_Close\" dojoAttachPoint=\"btn_Close\" dojoAttachEvent=\"onClick:_closeClick\">{%= $. btnCloseText %}</div>","</td><tr></table>","</div>","</div>","</div>"]),constructor:function(){this._currentUserId=Sage.Utility.getClientContextByKey("userID")||"";dojo.mixin(this,_c52);},destroy:function(){this.inherited(arguments);},start:function(_c55){this._processing=false;if(this._selectionContext.count<1){return;}if(!_c55){this._setDisplay();this.show();}else{this._execute();}},show:function(){this._dialog.show();},hide:function(){this._action=null;this._dialog.hide();},resize:function(){},_setDisplay:function(){dojo.style(this.btn_Close.domNode,"visibility","hidden");dojo.style(this.btn_OK.domNode,"visibility","visible");dojo.style(this.btn_Cancel.domNode,"visibility","visible");if(this._selectionContext){this.div_actionMessage.innerHTML=this._action.message;this._dialog.set("title",this._action.description);}},_setActionAttr:function(_c56){this._action=_c56;},_getActionAttr:function(){return this._action;},_setSelectionContextAttr:function(_c57){this._selectionContext=_c57;},_getSelectionContextAttr:function(){return this._selectionContextInfo;},_execute:function(){if(this._processing){return;}var me=this;this.div_actionMessage.innerHTML=this.processingText;this._processing=true;dojo.style(this.btn_Close.domNode,"visibility","visible");dojo.style(this.btn_OK.domNode,"visibility","hidden");dojo.style(this.btn_Cancel.domNode,"visibility","hidden");if(this._action){this._action.execute({scope:this,success:function(_c58,_c59){_c59.hide();_c59.onActionComplete(_c58);},failure:function(_c5a,_c5b){_c5b.onActionComplete(_c5a);Sage.UI.Dialogs.showError(me.failureText);}});}},_okClick:function(){this._execute();},_cancelClick:function(){this.hide();},_closeClick:function(){this.hide();},onActionComplete:function(_c5c){}});return _c54;});},"Sage/Services/ActivityAction":function(){define(["dojo/i18n","Sage/UI/Dialogs","dijit/_Widget","dojo/_base/declare"],function(i18n,_c5d,_c5e,_c5f){var _c60=_c5f("Sage.Services.ActivityAction",[_c5e],{_service:false,_contract:"activities",_resourceKind:"service",_operationName:false,_payLoad:false,_selectionContext:false,_publishMap:false,_publishMapWithId:false,_activityId:false,_configuration:false,_args:{},message:"Are you sure you want to continue?",description:"",constructor:function(){},execute:function(_c61){var map=this._publishMap;var _c62=this._publishMapWithId;var _c63=this._activityId;var _c64=String.format("slxdata.ashx/slx/crm/-/{0}/{1}/{2}",this._contract,this._resourceKind,this._operationName);$.ajax({type:"POST",url:_c64,contentType:"application/json",data:dojo.toJson(this._args),processData:false,success:function(_c65){if(map){dojo.publish(map,[_c65,this]);}if(_c62){if(_c63){dojo.publish(_c62,[_c63,this]);}}if(_c61){_c61.success(_c65,_c61.scope);}},failure:function(_c66){if(_c61){_c61.failure(_c66,_c61.scope);}}});},_setConfigurationAttr:function(_c67){this._configuration=_c67;},_getConfigurationAttr:function(){return this._configuration;},_setServiceAttr:function(_c68){this._service=_c68;},_getServiceAttr:function(){return this._service;},_setSelectionInfoAttr:function(_c69){this._selectionInfo=_c69;},_getSelectionInfoAttr:function(){return this._selectionInfo;},_setOperationNameAttr:function(_c6a){this._operationName=_c6a;},_getOperationNameAttr:function(){return this._operationName;},_setResourceKindAttr:function(_c6b){this._resourceKind=_c6b;},_getResourceKindAttr:function(){return this._resourceKind;},_setArgsAttr:function(args){this._args=args;},_getArgsAttr:function(){return this._args;},_setActionDescriptionAttr:function(_c6c){this.description=_c6c;},_getActionDescriptionAttr:function(){return this.description;},_setActionMessageAttr:function(_c6d){this.message=_c6d;},_getActionMessageAttr:function(){return this.message;},_setPublishMapAttr:function(_c6e){this._publishMap=_c6e;},_setPublishMapWithIdAttr:function(_c6f){this._publishMapWithId=_c6f;},_setActivityIdAttr:function(_c70){this._activityId=_c70;}});return _c60;});},"Sage/MainView/ActivityMgr/HistoryEditor":function(){define(["dijit/_Widget","Sage/_Templated","Sage/Data/SingleEntrySDataStore","Sage/MainView/BindingsManager","Sage/Utility","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","Sage/UI/_DialogLoadingMixin","Sage/UI/AttachmentList","Sage/Data/SDataServiceRegistry","Sage/UI/Dialogs","dojo/string","dojo/date/locale","Sage/Utility/Activity","Sage/Utility/File","dojo/_base/declare","dojo/i18n!./nls/HistoryEditor","dojo/text!./templates/HistoryEditor.html","dojo/dom-class","Sage/MainView/ActivityMgr/HistoryEditorAttendeesTab","dijit/layout/ContentPane","dojo/dom-style","dojo/on","dojo/dom-geometry","dijit/Toolbar","dijit/layout/TabContainer","dijit/form/Textarea","dojox/layout/TableContainer","Sage/Services/UserOptions","Sage/UI/Controls/SingleSelectPickList","Sage/UI/Controls/DateTimePicker","Sage/UI/Controls/Lookup","dijit/Dialog","Sage/UI/Controls/DurationSelect","Sage/Services/CalendarSecurityService"],function(_c71,_c72,_c73,_c74,_c75,_c76,_c77,_c78,_c79,_c7a,_c7b,_c7c,_c7d,_c7e,_c7f,_c80,_c81,_c82,_c83,_c84,_c85,_c86,on,_c87){dojo.requireLocalization("Sage.MainView.ActivityMgr","HistoryEditor");var _c88=_c80("Sage.MainView.ActivityMgr.HistoryEditor",[_c71,_c72],{historyId:"",mode:"",id:"",activityType:"",_dialog:false,_currentUserId:null,_activityService:false,_historyData:false,_historyStore:false,_bindingMgr:false,lup_Account:false,lup_Contact:false,lup_Opportunity:false,lup_Ticket:false,lup_Lead:false,lup_Leader:false,accountLookupConfig:{},contactLookupConfig:{},opportunityLookupConfig:{},ticketLookupConfig:{},leadLookupConfig:{},_isBinding:false,_historySaved:false,notnullfields:["ContactId","AccountId","OpportunityId","TicketId","LeadId"],historyDefaultValues:{},_doingFollowup:false,_attachmentsSaved:false,_attachmentList:false,_tempIdForAttachments:false,_hasAccess:true,eventConnections:[],widgetsInTemplate:true,widgetTemplate:new Simplate(eval(_c82)),constructor:function(){dojo.mixin(this,_c81);this._historyService=Sage.Data.SDataServiceRegistry.getSDataService("dynamic");this._setupStore();this._currentUserId=Sage.Utility.getClientContextByKey("userID")||"";dojo.subscribe("/entity/attachment/create",this,this._updateHistoryETag);dojo.subscribe("/entity/attachment/update",this,this._updateHistoryETag);dojo.subscribe("/entity/attachment/delete",this,this._updateHistoryETag);},destroy:function(){if(this._historyChangeConnection){dojo.disconnect(this._historyChangeConnection);this._historyChangeConnection=false;}if(this._bindingMgr){this._bindingMgr.destroy();}for(var i=0;i<this.eventConnections.length;i++){dojo.disconnect(this.eventConnections[i]);}this.lup_Account.destroy();this.lup_Contact.destroy();this.lup_Opportunity.destroy();this.lup_Ticket.destroy();this.lup_Lead.destroy();this.lup_Leader.destroy();this.eventConnections=[];this.inherited(arguments);},isFirstOpen:true,show:function(_c89){this._dialog.set("refocus",false);if(this.isFirstOpen){this.isFirstOpen=false;this.connect(this._dialog,"onHide",this._cleanOnClose);}if(!this.lup_Account){this.createAccountLookup();this.createContactLookup();this.createOpportunityLookup();this.createTicketLookup();this.createLeadLookup();this.createLeaderLookup();}this.historyDefaultValues={};if(this.mode==="New"){this.historyDefaultValues=_c89||{};this._loadData();}if(this.mode==="Complete"){}if(this.mode==="Complete"){_c83.add(this.btn_Delete.domNode,"display-none");}else{_c83.remove(this.btn_Delete.domNode,"display-none");}if((this.activityType==="atNote")&&(this.mode==="New")){dojo.addClass(this.result_Section.domNode,"display-none");}else{dojo.removeClass(this.result_Section.domNode,"display-none");}this._dialog.show();if(!this._dialog._standby){_c77.mixin(this._dialog,new _c78());if(!this._historyData){this._dialog.showLoading();}}if(!this._dialog.helpIcon){_c77.mixin(this._dialog,new _c76());this._dialog.createHelpIconByTopic("View_Edit_Details_of_a_History_Item");}if(this.activityType==="atNote"){this._dialog.set("helpTopic","addnote");}else{this._dialog.set("helpTopic","View_Edit_Details_of_a_History_Item");}this.tc_EditHistory.selectChild(this.cp_General);this._doingFollowup=false;},hide:function(e){this._dialog.hide(e);this.set("historyId","");},onHide:function(){},_onDlgHide:function(){this.onHide();},_cleanOnClose:function(){var svc=Sage.Services.getService("ClientEntityContext");svc.clearTemporaryContext();this.set("historyId","");this._hideLookupTooltip(this.lup_Account);this._hideLookupTooltip(this.lup_Contact);this._hideLookupTooltip(this.lup_Opportunity);this._hideLookupTooltip(this.lup_Ticket);this._hideLookupTooltip(this.lup_Lead);this._hideLookupTooltip(this.lup_Leader);},_hideLookupTooltip:function(_c8a){if(_c8a){_c8a.hideTooltip();}},_showAttachmentsTab:function(){var self=this;window.setTimeout(function(){self._ensureAttachmentList();},100);},_ensureAttachmentList:function(){if(!this._attachmentList){this._attachmentList=new _c79({workspace:"",tabId:"",placeHolder:this.id+"_attachmentsGridPlaceholder",parentRelationshipName:"historyId"});var self=this;this._attachmentList.startup(function(){if(self.cp_Attachments){self.cp_Attachments.resize();}});}else{this._attachmentList.resetEntityContext();}},_updateHistoryETag:function(_c8b){if(this._dialog.open&&this.historyId){var req=new Sage.SData.Client.SDataSingleResourceRequest(_c7a.getSDataService("dynamic"));req.setResourceKind("history");req.setResourceSelector("\""+this.historyId+"\"");req.setQueryArg("precedence","0");req.read({success:function(_c8c){this._historyData["$etag"]=_c8c["$etag"];},scope:this});}},_setModeAttr:function(mode){this.mode=mode;var idx=this.tc_EditHistory.getIndexOfChild(dijit.byId("histAttendeesTabPane"));if(mode.indexOf("New")===0){this._historyData=false;if(idx>0){this.tc_EditHistory.removeChild(dijit.byId("histAttendeesTabPane"));dijit.byId("histAttendeesTabPane").destroy();var self=this;window.setTimeout(function(){self._dialog.resize();},100);}}else{if(idx<0){this._addAttendeesTab();var self=this;window.setTimeout(function(){self._dialog.resize();},100);}}},_setActivityTypeAttr:function(type){switch(type){case "PhoneCall":case "atPhoneCall":this.activityType="atPhoneCall";break;case "Meeting":case "atAppointment":this.activityType="atAppointment";break;case "ToDo":case "atToDo":this.activityType="atToDo";break;case "PersonalActivity":case "atPersonal":case "Personal":this.activityType="atPersonal";break;case "atNote":case "Note":this.activityType="atNote";break;default:this.activityType="atNote";break;}},_setHistoryIdAttr:function(_c8d){if(this.historyId!==_c8d){this.historyId=_c8d;this._historyData=false;if(_c8d!==""){this._loadData();}}},_getHistoryIdAttr:function(){return this.historyId;},_setupStore:function(){if(!this._historyStore){this._historyStore=new _c73({include:[],resourceKind:"history",service:this._historyService});}},_loadData:function(){if(this._dialog._standby){this._dialog.showLoading();}this._historyData=false;this._historySaved=false;if(this._historyStore){if(this.mode!=="New"){this._historyStore.fetch({predicate:"\""+this.historyId+"\"",onComplete:this._receivedHistory,onError:this._requestFailure,scope:this});}else{this._historyStore.newItem({onComplete:function(data){Sage.Utility.setValue(data,"Type",this.activityType);this._receivedHistory(dojo.mixin(data,this.historyDefaultValues));},scope:this});}}},_receivedHistory:function(data){this._historyData=data;this._tempIdForAttachments=false;var _c8e=Sage.Services.getService("ClientEntityContext");var _c8f={"EntityId":this._historyData.$key||"","EntityType":"Sage.Entity.Interfaces.IHistory","Description":this._historyData.$descriptor,"EntityTableName":"HISTORY"};_c8e.setTemporaryContext(_c8f);this._ensureIdsNotNull();if(this.mode!=="New"){this.activityType=data.Type;}else{this._applyUserOptionsForNewHistory();}this._setUIForActivityType(data.Type);this._bind();if(((this.activityType==="atNote")&&(this.mode==="New"))||(data["UserId"]!==this._currentUserId&&this._currentUserId.trim()!=="ADMIN")){dojo.addClass(this.btn_Delete.domNode,"display-none");}else{dojo.removeClass(this.btn_Delete.domNode,"display-none");}if(this._dialog._standby){this._dialog.hideLoading();}},_ensureIdsNotNull:function(){for(var i=0;i<this.notnullfields.length;i++){if(this._historyData[this.notnullfields[i]]===null){this._historyData[this.notnullfields[i]]="";}}},_applyUserOptionsForNewHistory:function(){var _c90=new Date();_c90.setSeconds(5);_c90.setMinutes(0);_c90.setHours(0);Sage.Utility.setValue(this._historyData,"Timeless",true);Sage.Utility.setValue(this._historyData,"StartDate",Sage.Utility.Convert.toIsoStringFromDate(_c90));Sage.Utility.setValue(this._historyData,"Duration","60");},_requestFailure:function(msg,_c91,opts){},_createBindings:function(){if(this._bindingMgr){this._bindingMgr.destroy();this._bindingMgr=false;}this._bindingMgr=new _c74({defaultBinding:{boundEntity:this._historyData},items:[{boundWidget:this.tb_Location,entityProperty:"Location"},{boundWidget:this.pk_Regarding,entityProperty:"Description",onChange:dojo.hitch(this,"_descriptionChanged")},{boundWidget:this.pk_Result,entityProperty:"Result"},{boundWidget:this.pk_Category,entityProperty:"Category"},{boundWidget:this.pk_Priority,entityProperty:"Priority"},{boundWidget:this.dtp_startDate,dataType:"date",entityProperty:"StartDate",onChange:dojo.hitch(this,"_startDateChanged")},{boundWidget:this.dtp_completedDate,dataType:"date",entityProperty:"CompletedDate"},{boundWidget:this.sel_Duration,entityProperty:"Duration"},{boundWidget:this.sel_Duration,entityProperty:"StartDate",widgetProperty:"startTime",dataType:"date",twoWay:false},{boundWidget:this.cb_Timeless,entityProperty:"Timeless",widgetProperty:"checked",onChange:dojo.hitch(this,"_timelessChange")},{boundWidget:this.ta_Notes,entityProperty:"LongNotes"}]});},_bind:function(){if(this._historyData){if(!this._bindingMgr){this._createBindings();}else{if(!this._bindingMgr.boundEntity||(this._historyData.HistoryId!==this._bindingMgr.boundEntity.HistoryId)){this._bindingMgr.setBoundEntity(this._historyData);}else{this._bindingMgr.bind();}}this._manualBind();this._setUI();}},_manualBind:function(){if(this._historyData){this._isBinding=true;var his=this._historyData;var _c92=(his.AccountId.trim()==="")?null:{"$key":his.AccountId,"$descriptor":his.AccountName};this.lup_Account.set("selectedObject",_c92);var _c93=(his.ContactId.trim()==="")?null:{"$key":his.ContactId,"$descriptor":his.ContactName};this.lup_Contact.set("selectedObject",_c93);var _c94=(his.OpportunityId.trim()==="")?null:{"$key":his.OpportutunityId,"$descriptor":his.OpportunityName};this.lup_Opportunity.set("selectedObject",_c94);var _c95=(his.TicketId.trim()==="")?null:{"$key":his.TicketId,"$descriptor":his.TicketNumber};this.lup_Ticket.set("selectedObject",_c95);var _c96=(his.LeadId.trim()==="")?null:{"$key":his.LeadId,"$descriptor":his.LeadName};var _c97=(his.UserId.trim()==="")?null:{"$key":his.UserId,"$descriptor":his.UserName};this.lup_Leader.set("selectedObject",_c97);this.lup_Lead.set("selectedObject",_c96);this.tb_LeadCompanyName.set("value",(his.LeadId.trim()==="")?"":his.AccountName);this._updateLookupSeedValues(his.AccountId);this._isBinding=false;}},_accountChanged:function(_c98){if(this._isBinding){return;}var _c99=(_c98)?_c98["$key"]:"";var _c9a=(_c98)?_c98["$descriptor"]:"";var his=this._historyData;var _c9b=(his.ContactId==="");his.AccountId=_c99;his.AccountName=_c9a;his.ContactId="";his.ContactName="";his.PhoneNumber="";his.OpportunityId="";his.OpportunityName="";his.TicketId="";his.TicketNumber="";his.LeadId="";his.LeadName="";this._isBinding=true;this.lup_Contact.set("selectedObject",null);this.lup_Opportunity.set("selectedObject",null);this.lup_Ticket.set("selectedObject",null);this.lup_Lead.set("selectedObject",null);this.tb_LeadCompanyName.set("value","");this._updateLookupSeedValues(_c99);this.lup_Lead.set("selectedObject",null);this.tb_LeadCompanyName.set("value","");if(_c9b){this._setContactToCurrentAccountPrimary();}this._isBinding=false;},_contactChanged:function(_c9c){if(this._isBinding){return;}var his=this._historyData;if(!_c9c){his.ContactId="";his.ContactName="";his.PhoneNumber="";return;}his.ContactId=_c9c["$key"];his.ContactName=_c9c["$descriptor"];his.PhoneNumber=Sage.Utility.getValue(_c9c,"WorkPhone");his.LeadId="";his.LeadName="";his.AccountId=_c9c.Account["$key"];his.AccountName=_c9c.Account.AccountName;this._updateLookupSeedValues(_c9c.Account["$key"]);this._isBinding=true;this.lup_Account.set("selectedObject",{"$key":_c9c.Account["$key"],"$descriptor":_c9c.Account.AccountName});this.lup_Lead.set("selectedObject",null);this.tb_LeadCompanyName.set("value","");this._isBinding=false;},_opportunityChanged:function(_c9d){if(this._isBinding){return;}var his=this._historyData;if(!_c9d){his.OpportunityId="";his.OpportunityName="";return;}his.OpportunityId=_c9d["$key"];his.OpportunityName=_c9d["$descriptor"];if(his.AccountId.trim()===""||his.AccountId!==_c9d.Account["$key"]){his.AccountId=_c9d.Account["$key"];his.AccountName=_c9d.Account.AccountName;his.LeadId="";his.LeadName="";this._updateLookupSeedValues(_c9d.Account["$key"]);this._isBinding=true;this.lup_Account.set("selectedObject",{"$key":_c9d.Account["$key"],"$descriptor":_c9d.Account.AccountName});this.lup_Contact.set("selectedObject",null);this.lup_Lead.set("selectedObject",null);this.tb_LeadCompanyName.set("value","");this._isBinding=false;this._setContactBasedOnOpportunity();}},_ticketChanged:function(_c9e){if(this._isBinding){return;}var his=this._historyData;if(!_c9e){his.TicketId="";his.TicketNumber="";return;}his.TicketId=_c9e["$key"];his.TicketNumber=_c9e["$descriptor"];if(his.AccountId.trim()===""||his.AccountId!==_c9e.Account["$key"]){his.AccountId=_c9e.Account["$key"];his.AccountName=_c9e.Account["AccountName"];his.LeadId="";his.LeadName="";this._updateLookupSeedValues();his.ContactId=Sage.Utility.getValue(_c9e,"Contact.$key");his.ContactName=Sage.Utility.getValue(_c9e,"Contact.NameLF");his.PhoneNumber=Sage.Utility.getValue(_c9e,"Contact.WorkPhone");this._isBinding=true;this.lup_Account.set("selectedObject",{"$key":_c9e.Account["$key"],"$descriptor":_c9e.Account["AccountName"]});this.lup_Contact.set("selectedObject",{"$key":_c9e.Contact["$key"],"$descriptor":_c9e.Contact["NameLF"]});this.lup_Lead.set("selectedObject",null);this.tb_LeadCompanyName.set("value","");this._isBinding=false;}},_leadChanged:function(_c9f){if(this._isBinding){return;}var his=this._historyData;if(!_c9f){his.LeadId="";his.LeadName="";his.PhoneNumber="";this.tb_LeadCompanyName.set("value","");return;}his.LeadId=_c9f["$key"];his.LeadName=_c9f["$descriptor"];his.AccountName=_c9f["Company"];his.PhoneNumber=_c9f["WorkPhone"];this.tb_LeadCompanyName.set("value",_c9f["Company"]);his.ContactId="";his.ContactName="";his.AccountId="";his.AccountName="";his.TicketId="";his.TicketNumber="";his.OpportunityId="";his.OpportunityName="";this._updateLookupSeedValues();this._isBinding=true;this.lup_Contact.set("selectedObject",null);this.lup_Account.set("selectedObject",null);this.lup_Opportunity.set("selectedObject",null);this.lup_Ticket.set("selectedObject",null);this._isBinding=false;},_leaderChanged:function(_ca0){if(this._isBinding){return;}this._historyData.UserId=_ca0["$key"].substr(0,12);this._historyData.UserName=_ca0["$descriptor"];},_setContactBasedOnOpportunity:function(){var req=new Sage.SData.Client.SDataResourceCollectionRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));req.setResourceKind("opportunities");var _ca1=req.uri.pathSegments.length-1;var _ca2=req.uri.getPathSegment(_ca1);_ca2["predicate"]="\""+this._historyData.OpportunityId+"\"";req.uri.setPathSegment(_ca1+1,"Contacts");req.setQueryArg("select","IsPrimary,Contact/NameLF,Contact/IsPrimary,Contact/WorkPhone");req.setQueryArg("orderby","IsPrimary desc");req.read({success:function(data){var _ca3=data["$resources"];if(_ca3.length<1){this._setContactToCurrentAccountPrimary();return;}var _ca4=false,_ca5=false,_ca6=_ca3[0],_ca7;for(var i=0;i<_ca3.length;i++){if(_ca3[i].IsPrimary){if(!_ca4||_ca3[i].Contact.IsPrimary){_ca4=_ca3[i];}}if(!_ca5&&_ca3[i].Contact.IsPrimary){_ca5=_ca3[i];}}_ca7=_ca4||_ca5||_ca6;if(_ca7){this._historyData.ContactId=Sage.Utility.getValue(_ca7,"Contact.$key");this._historyData.ContactName=Sage.Utility.getValue(_ca7,"Contact.NameLF");this._historyData.PhoneNumber=Sage.Utility.getValue(_ca7,"Contact.WorkPhone");this._rebindToCurrentContact();}},failure:function(){this._rebindToCurrentContact();},scope:this});},_setContactToCurrentAccountPrimary:function(){var req=new Sage.SData.Client.SDataResourceCollectionRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));req.setResourceKind("accounts");var _ca8=req.uri.pathSegments.length-1;var _ca9=req.uri.getPathSegment(_ca8);_ca9["predicate"]="\""+this._historyData.AccountId+"\"";req.uri.setPathSegment(_ca8+1,"Contacts");req.setQueryArg("select","NameLF,IsPrimary,WorkPhone");req.setQueryArg("orderby","IsPrimary desc");req.setQueryArg("count","1");req.read({success:function(data){var _caa=data["$resources"];if(_caa.length<1){this._rebindToCurrentContact();return;}var _cab=_caa[0];this._historyData.ContactId=Sage.Utility.getValue(_cab,"$key");this._historyData.ContactName=Sage.Utility.getValue(_cab,"NameLF");this._historyData.PhoneNumber=Sage.Utility.getValue(_cab,"WorkPhone");this._isBinding=true;this.lup_Contact.set("selectedObject",_cab);this._isBinding=false;},failure:function(){this._rebindToCurrentContact();},scope:this});},_rebindToCurrentContact:function(){this._isBinding=true;this.lup_Contact.set("selectedObject",{"$key":this._historyData.ContactId,"$descriptor":this._historyData.ContactName});this._isBinding=false;},_updateLookupSeedValues:function(_cac){var _cad=_cac||this._historyData.AccountId;this.contactLookupConfig.seedValue=_cad;this.opportunityLookupConfig.seedValue=_cad;this.ticketLookupConfig.seedValue=_cad;},_setUI:function(){this._formatHeader();this._setDisabledByTimlessValue();if(this._historyData.LeadId.trim()===""){this.rdo_Contact.set("checked",true);}else{this.rdo_Lead.set("checked",true);}this._setContactLeadVisibility();this._setScheduledByLabel();this._applySecurity();},_applySecurity:function(){if(this.mode==="New"){this._setAccessToUI(true);}else{if(this.mode==="Complete"){this._setAccessToUI(true);}else{var svc=Sage.Services.getService("CalendarSecurityService");if(svc){var _cae=_c75.getClientContextByKey("userID").trim();var _caf=this._historyData.UserId||_cae;if(_cae!==_caf){svc.hasAccess(_caf,"allowEdit",function(_cb0){this._setAccessToUI(_cb0);},this);}else{this._setAccessToUI(true);}}}}},_setAccessToUI:function(_cb1){this._hasAccess=_cb1;if((this.mode==="New")||((this.mode==="Complete"))){this.rdo_Lead.set("disabled",!_cb1);this.tb_Location.set("disabled",!_cb1);this.pk_Regarding.set("disabled",!_cb1);this.pk_Category.set("disabled",!_cb1);this.pk_Priority.set("disabled",!_cb1);this.dtp_startDate.set("disabled",!_cb1);this.dtp_completedDate.set("disabled",!_cb1);if(!_cb1){this.sel_Duration.set("disabled",true);}this.cb_Timeless.set("disabled",!_cb1);this.ta_Notes.set("disabled",!_cb1);this.lup_Leader.set("disabled",!_cb1);this.lup_Account.set("disabled",!_cb1);this.lup_Contact.set("disabled",!_cb1);this.lup_Lead.set("disabled",!_cb1);this.lup_Ticket.set("disabled",!_cb1);this.lup_Opportunity.set("disabled",!_cb1);this.tb_LeadCompanyName.set("disabled",!_cb1);this.btn_OK.set("disabled",!_cb1);}else{this.rdo_Lead.set("disabled",true);this.tb_Location.set("disabled",!_cb1);this.pk_Regarding.set("disabled",!_cb1);this.pk_Category.set("disabled",!_cb1);this.pk_Priority.set("disabled",true);this.dtp_startDate.set("disabled",true);this.dtp_completedDate.set("disabled",true);this.sel_Duration.set("disabled",true);this.cb_Timeless.set("disabled",true);this.ta_Notes.set("disabled",!_cb1);this.lup_Leader.set("disabled",true);this.lup_Account.set("disabled",true);this.lup_Contact.set("disabled",true);this.lup_Lead.set("disabled",true);this.lup_Ticket.set("disabled",true);this.lup_Opportunity.set("disabled",true);this.tb_LeadCompanyName.set("disabled",true);this.btn_OK.set("disabled",!_cb1);}},_setUIForActivityType:function(_cb2){this.pk_Regarding.set("pickListName",Sage.Utility.Activity.getActivityPicklistName("Regarding",_cb2));this.pk_Category.set("pickListName",Sage.Utility.Activity.getActivityPicklistName("Category",_cb2));this.pk_Result.set("pickListName",Sage.Utility.Activity.getActivityPicklistName("Result",_cb2));var svc=Sage.Services.getService("CalendarSecurityService");this.btn_OK.set("disabled",false);if(svc&&this.mode!=="New"){var _cb3=_c75.getClientContextByKey("userID").trim();var _cb4=this._historyData.UserId||_cb3;if(_cb3!==_cb4){svc.hasAccess(_cb4,"allowEdit",function(_cb5){this.btn_OK.set("disabled",!_cb5);},this);}}},_setDisabledByTimlessValue:function(){if(!this._historyData){return;}var _cb6=this._historyData["Timeless"];this.dtp_startDate.set("displayTime",!_cb6);this.sel_Duration.set("disabled",_cb6||!this._hasAccess);},_timelessChange:function(){this._setDisabledByTimlessValue();},_descriptionChanged:function(){this._formatHeader();},_startDateChanged:function(){var _cb7=this.dtp_startDate.get("value");this.sel_Duration.set("startTime",_cb7);},_setContactLeadVisibility:function(){var _cb8=this.rdo_Contact.get("checked");dojo.removeClass((_cb8)?this.contactContainer.domNode:this.leadContainer.domNode,"display-none");dojo.addClass((_cb8)?this.leadContainer.domNode:this.contactContainer.domNode,"display-none");},_formatHeader:function(){var _cb9;var _cba;var _cbb;var _cbc;_cba=Sage.Utility.Activity.getActivityImageClass(this._historyData["Type"]||"atAppointment","small");_cb9=Sage.Utility.Activity.getActivityTypeName(this._historyData["Type"]||"atAppointment");_cbb=(this.mode==="New")?this.insertText:"";_cbc=this._historyData["Description"]||"";if(_cbc!==""){_cbc=" - "+_cbc;}this._dialog.set("title",dojo.string.substitute("<div class=\"Global_Images icon16x16 ${0}\" > </div>&nbsp;<span class=\"activity-dialog-title\" style=\"max-width: 975px; text-overflow: ellipsis;\">${1} ${2} ${3}</span>",[_cba,_cbb,_cb9,_cbc]));},_setScheduledByLabel:function(){var _cbd=Sage.Utility.Convert.toDateFromString(Sage.Utility.getValue(this._historyData,"CreateDate"));if(_cbd.getFullYear()<1000){_cbd=new Date();}var _cbe=Sage.Utility.getValue(this._historyData,"CreateUser").trim();if(!_cbe||_c75.getClientContextByKey("userID")===_cbe){_cbe=_c75.getClientContextByKey("userPrettyName");}else{if(_cbe==="PROCESS"||_cbe==="ADMIN"){_cbe="Administrator";}else{this._getUserInfoFor(_cbe,function(user){dojo.html.set(this.lbl_ScheduledBy,_c7c.substitute(this.scheduledByFormatText,{user:user["$descriptor"],date:_c7d.format(_cbd,{selector:"date",fullYear:true})}));});return;}}var lbl=_c7c.substitute(this.scheduledByFormatText,{user:_cbe,date:_c7d.format(_cbd,{selector:"date",fullYear:true})});dojo.html.set(this.lbl_ScheduledBy,lbl);},_getUserInfoFor:function(_cbf,_cc0){var _cc1=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic",false,true,true));_cc1.setResourceKind("userInfo");_cc1.setResourceSelector("'"+_cbf+"'");_cc1.setQueryArg("precedence","0");_cc1.read({success:_cc0,scope:this,failure:function(){}});},_okClick:function(){delete this._historyData["Notes"];delete this._historyData["UserName"];if(this.rdo_Lead.checked){delete this._historyData["ContactId"];delete this._historyData["ContactName"];delete this._historyData["AccountId"];delete this._historyData["AccountName"];delete this._historyData["LeadName"];}else{delete this._historyData["LeadId"];}if(this.mode==="New"){this._currentUserActivitySaved=true;this._historyStore.saveNewEntity(this._historyData,this._successfulHistorySave,this._failedHistorySave,this);}else{this._historyStore.save({scope:this,success:this._successfulHistorySave,failure:this._failedAHistorySave});}},_successfulHistorySave:function(_cc2){this._historyData=_cc2;this.historyId=_cc2["$key"];var svc=Sage.Services.getService("ClientEntityContext");svc.clearTemporaryContext();this._attachmentsSaved=true;if(this._attachmentList){var _cc3=this._attachmentList.getNewAttachments();if(_cc3.length>0&&this.mode==="New"){this._saveAttachments(_cc3);this._attachmentsSaved=false;}}if(this.mode==="New"){this.attendeesTab._addHistoryAttendee(_cc2);}dojo.publish("/entity/history/change",[_cc2,this]);this._historySaved=true;this._hideIfComplete();},_failedHistorySave:function(_cc4){Sage.UI.Dialogs.showError(this.couldNotSaveErrorText);},_cancelClick:function(){if(this.mode==="Complete"){this._deleteClick();}else{this.hide();}},_hideIfComplete:function(){if(this._historySaved){if(this._mode!=="New"){this._doFollowup();}else{this.hide();}}},_deleteClick:function(){if(this._historyData&&this._historyStore){Sage.UI.Dialogs.raiseQueryDialogExt({title:this.deleteTitle,query:this.deleteMessage,callbackFn:function(_cc5){if(_cc5){this._historyStore.deleteEntity(this._historyData,this._successfulHistoryDelete,this._failedHistoryDelete,this);}},yesText:this.okText,noText:this.cancelText,icon:"questionIcon",scope:this});}},_successfulHistoryDelete:function(){var svc=Sage.Services.getService("ClientEntityContext");svc.clearTemporaryContext();dojo.publish("/entity/history/delete",[this._historyData["$key"],this]);this.hide();},_failedHistoryDelete:function(_cc6){var msg=_c7e.findFailedRequestMessage(_cc6,this.couldNotDeleteErrorText);_c7b.showError(msg);},_saveAttachments:function(_cc7){this._attachmentRequests=_cc7.length;for(var i=0;i<_cc7.length;i++){var att=_cc7[i];var req=new Sage.SData.Client.SDataSingleResourceRequest(_c7a.getSDataService("system"));req.setResourceKind("attachments");req.setResourceSelector("'"+att.$key+"'");att.historyId=this.historyId;for(var p in this._historyData){if(p.substring(p.length-2)==="Id"&&p!=="UserId"){var _cc8=p.substring(0,1).toLowerCase()+p.substring(1);att[_cc8]=this._historyData[p];}}req.update(att,{success:this._successfulAttachmentSave,failure:this._failedAttachmentSave,scope:this});}},_removeAttachments:function(){if(!this._attachmentList){return;}var _cc9=this._attachmentList.getNewAttachments();for(var i=0;i<_cc9.length;i++){var att=_cc9[i];var req=new Sage.SData.Client.SDataSingleResourceRequest(_c7a.getSDataService("system"));req.setResourceKind("attachments");req.setResourceSelector("'"+att.$key+"'");req["delete"](att,{success:function(){},failure:function(){},scope:this});}},getRelationshipsForAttachments:function(){var obj={};for(var p in this._activityData){if(p.substring(p.length-2)==="Id"&&p!=="UserId"){var _cca=p.substring(0,1).toLowerCase()+p.substring(1);obj[_cca]=this._activityData[p];}}if(this.mode==="New"&&!_c7f.supportsHTML5File&&!slx.desktop){this._tempIdForAttachments=this._makeTempID();obj["historyId"]=this._tempIdForAttachments;}return obj;},_makeTempID:function(){if(!this._tempIdForAttachments){var uid=this._currentUserId;var dstr=_c75.Convert.toIsoStringFromDate(this.dtp_completedDate.get("value"));dstr=dstr.replace(/[T:-]/g,"").substr(6,6);this._tempIdForAttachments="NE"+uid.substr(uid.length-4,4)+dstr;}return this._tempIdForAttachments;},_attachmentRequests:0,_successfulAttachmentSave:function(_ccb){this._attachmentRequests--;if(this._attachmentRequests<1){this._attachmentsSaved=true;}},_failedAttachmentSave:function(){this._attachmentRequests--;if(this._attachmentRequests<1){this._attachmentsSaved=true;}},_doFollowup:function(){var _ccc=this.sel_Followup.get("value");switch(_ccc){case this.noneText:this.hide();return;case _c7e.getActivityTypeName("atPhoneCall"):_ccc="atPhoneCall";break;case _c7e.getActivityTypeName("atAppointment"):_ccc="atAppointment";break;case _c7e.getActivityTypeName("atToDo"):_ccc="atToDo";break;}var _ccd=this._getFollowUpActivityData();this._doingFollowup=true;this.hide("followup");window.setTimeout(function(){var svc=Sage.Services.getService("ActivityService");if(svc){svc.scheduleActivity({"type":_ccc,"preConfigured":_ccd});}},250);},_getFollowUpActivityData:function(){var his=this._historyData;var ret={AccountId:his.AccountId,AccountName:his.AccountName,ContactId:his.ContactId,ContactName:his.ContactName,Description:his.Description,LeadId:his.LeadId,LeadName:his.LeadName,OpportunityId:his.OpportunityId,OpportunityName:his.OpportunityName,TicketId:his.TicketId,TicketNumber:his.TicketNumber};if(this.ck_coNotes.get("checked")){ret["LongNotes"]=his.LongNotes;ret["Notes"]=his.Notes;}if(this.ck_coAttachments.get("checked")){}return ret;},createAccountLookup:function(){this.accountLookupConfig={id:"_historyAcc",structure:[{"cells":[{"name":this.accountText,"field":"AccountName"},{"name":this.cityText,"field":"Address.City"},{"name":this.stateText,"field":"Address.State"},{"name":this.mainPhoneText,"field":"MainPhone"},{"name":this.typeText,"field":"Type"},{"name":this.subTypeText,"field":"SubType"},{"name":this.statusText,"field":"Status"},{"name":this.acctMgrText,"field":"AccountManager.UserInfo.UserName"},{"name":this.ownerText,"field":"Owner.OwnerDescription"}],"defaultCell":{"sortable":true,"width":"150px","editable":false,"styles":"text-align: left;","propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"pickListName":null,"defaultValue":""}}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"accounts",sort:[{attribute:"AccountName"}]},isModal:true,seedProperty:"",seedValue:"",overrideSeedValueOnSearch:false,initializeLookup:false,preFilters:[],returnPrimaryKey:true,dialogTitle:this.lookupActText,dialogButtonText:this.okText},this.lup_Account=new Sage.UI.Controls.Lookup({id:"history_lu_account",allowClearingResult:true,config:this.accountLookupConfig,readonly:true,});this.eventConnections.push(dojo.connect(this.lup_Account,"onChange",this,"_accountChanged"));dojo.place(this.lup_Account.domNode,this.container_AccountLup.domNode,"only");},createContactLookup:function(){this.contactLookupConfig={id:"_histoyContact",structure:[{defaultCell:{"sortable":true,"width":"150px","editable":false,"styles":"text-align: left;","propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"pickListName":null,"defaultValue":""},cells:[{name:this.nameText,field:"NameLF"},{name:this.accountText,field:"Account.AccountName"},{name:this.cityText,field:"Address.City"},{name:this.stateText,field:"Address.State"},{name:this.workphoneText,field:"WorkPhone"},{name:this.emailText,field:"Email"}]}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"contacts",sort:[{attribute:"NameLF"}]},isModal:true,seedProperty:"Account.Id",seedValue:"",overrideSeedValueOnSearch:true,initialLookup:true,preFilters:[],returnPrimaryKey:true,dialogTitle:this.lookupContactText,dialogButtonText:this.okText};this.lup_Contact=new Sage.UI.Controls.Lookup({id:"history_lu_contact",allowClearingResult:true,readonly:true,config:this.contactLookupConfig,showEntityInfoToolTip:true});this.eventConnections.push(dojo.connect(this.lup_Contact,"onChange",this,"_contactChanged"));dojo.place(this.lup_Contact.domNode,this.container_ContactLup.domNode,"only");},createOpportunityLookup:function(){this.opportunityLookupConfig={id:"_historyOpp",structure:[{defaultCell:{"sortable":true,"width":"150px","editable":false,"styles":"text-align: left;","propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"pickListName":null,"defaultValue":""},cells:[{name:this.descriptionText,field:"Description"},{name:this.acctMgrText,field:"AccountManager.UserInfo.UserName"},{name:this.accountText,field:"Account.AccountName"},{name:this.stageText,field:"Stage"},{name:this.statusText,field:"Status"},{name:this.ownerText,field:"Owner.OwnerDescription"}]}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"opportunities",sort:[{attribute:"Description"}]},isModal:true,seedProperty:"Account.Id",seedValue:"",overrideSeedValueOnSearch:true,initialLookup:true,preFilters:[],returnPrimaryKey:true,dialogTitle:this.lookupOpportunityText,dialogButtonText:this.okText};this.lup_Opportunity=new Sage.UI.Controls.Lookup({id:"history_lu_opportunity",allowClearingResult:true,readonly:true,config:this.opportunityLookupConfig,showEntityInfoToolTip:true});this.eventConnections.push(dojo.connect(this.lup_Opportunity,"onChange",this,"_opportunityChanged"));dojo.place(this.lup_Opportunity.domNode,this.container_OppLup.domNode,"only");},createTicketLookup:function(){this.ticketLookupConfig={id:"_historyTicket",structure:[{defaultCell:{"sortable":true,"width":"150px","editable":false,"styles":"text-align: left;","propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"pickListName":null,"defaultValue":""},cells:[{name:this.ticketNumberText,field:"TicketNumber"},{name:this.accountText,field:"Account.AccountName"},{name:this.nameText,field:"Contact.NameLF"},{name:this.phoneText,field:"Contact.WorkPhone"},{name:this.statusText,field:"StatusCode",pickListName:"",propertyType:"SalesLogix.PickList"},{name:this.urgencyText,field:"Urgency.Description"},{name:this.areaText,field:"Area"}]}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"tickets",sort:[{attribute:"TicketNumber"}]},isModal:true,seedProperty:"Account.Id",seedValue:"",overrideSeedValueOnSearch:true,initialLookup:true,preFilters:[],returnPrimaryKey:true,dialogTitle:this.lookupTicketText,dialogButtonText:this.okText};this.lup_Ticket=new Sage.UI.Controls.Lookup({id:"history_lu_ticket",allowClearingResult:true,readonly:true,config:this.ticketLookupConfig,showEntityInfoToolTip:true});this.eventConnections.push(dojo.connect(this.lup_Ticket,"onChange",this,"_ticketChanged"));dojo.place(this.lup_Ticket.domNode,this.container_TicketLup.domNode,"only");},createLeadLookup:function(){this.leadLookupConfig={id:"_historyLead",structure:[{defaultCell:{"sortable":true,"width":"150px","editable":false,"propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"pickListName":null,"defaultValue":""},cells:[{name:this.nameText,field:"LeadFullName"},{name:this.companyText,field:"Company"},{name:this.cityText,field:"Address.City"},{name:this.stateText,field:"Address.State"},{name:this.postalText,field:"Address.PostalCode"},{name:this.statusText,field:"Status"},{name:this.workphoneText,field:"WorkPhone"},{name:this.ownerText,field:"Owner.OwnerDescription"}]}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"leads",sort:[{attribute:"LeadFullName"}]},isModal:true,initialLookup:false,preFilters:[],returnPrimaryKey:true,dialogTitle:this.lookupLeadText,dialogButtonText:this.okText};this.lup_Lead=new Sage.UI.Controls.Lookup({id:"history_lu_lead",allowClearingResult:true,readonly:true,config:this.leadLookupConfig,showEntityInfoToolTip:true});this.eventConnections.push(dojo.connect(this.lup_Lead,"onChange",this,"_leadChanged"));dojo.place(this.lup_Lead.domNode,this.container_LeadLup.domNode,"only");},createLeaderLookup:function(){var _cce={id:"_historyLeader",structure:[{cells:[{name:this.nameText,field:"Name",sortable:true,width:"400px",editable:false,propertyType:"System.String",excludeFromFilters:false,defaultValue:""}]}],gridOptions:{contextualCondition:function(){return "AllowAdd AND (AccessId eq '"+_c75.getClientContextByKey("userID")+"' OR AccessId eq 'EVERYONE') AND Type eq 'User'";},contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"activityresourceviews",sort:[{attribute:"Name"}]},isModal:true,preFilters:[],returnPrimaryKey:true,dialogTitle:this.lookupLeaderText,dialogButtonText:this.okText};this.lup_Leader=new Sage.UI.Controls.Lookup({id:"history_lu_leader",readonly:true,config:_cce});this.eventConnections.push(dojo.connect(this.lup_Leader,"onChange",this,"_leaderChanged"));dojo.place(this.lup_Leader.domNode,this.container_LeaderLup.domNode,"only");},_updateLocation:function(_ccf,_cd0){var _cd1=this._historyData.Location;if(!_cd1||_cd1===""){if(_cd0){_cd1=_ccf;}}else{var _cd2=_cd1.split("; ");var _cd3=[];var _cd4=false;for(var i=0;i<_cd2.length;i++){if(_cd2[i]===_ccf){if(_cd0){_cd4=true;}else{continue;}}_cd3.push(_cd2[i]);}if(!_cd4&&_cd0){_cd3.push(_ccf);}_cd1=_cd3.join("; ");}Sage.Utility.setValue(this._historyData,"Location",_cd1);this.tb_Location.set("value",_cd1);},_formatDateForQuery:function(d){return ["'",d.getUTCFullYear(),"-",d.getUTCMonth()+1,"-",d.getUTCDate(),"'"].join("");},postCreate:function(){this.inherited(arguments);this._addAttendeesTab();},_addAttendeesTab:function(){var _cd5=this.attendeesTab=new _c84();var cp=new _c85({id:"histAttendeesTabPane",title:this.tabNameParticipants,"class":"tabContent remove-padding"},_cd5.domNode);this.tc_EditHistory.addChild(cp);_cd5.histEditor=this;_cd5.startup();on(cp,"show",function(){_cd5._tabShow();});},_successfulComplete:function(_cd6){var self=this;var _cd7=arguments;var _cd8=this.attendeesTab._historySaved(_cd6);_cd8.then(function(_cd9){self.inherited(_cd7);});},});return _c88;});},"Sage/MainView/ActivityMgr/HistoryEditorAttendeesTab":function(){define("Sage/MainView/ActivityMgr/HistoryEditorAttendeesTab",["dojo","dijit/_Widget","Sage/_Templated","dojo/_base/declare","Sage/Data/SDataServiceRegistry","Sage/Utility","Sage/Utility/Activity","Sage/UI/SLXPreviewGrid","Sage/UI/EditableGrid","Sage/UI/Columns/CheckBox","dijit/layout/ContentPane","dojo/_base/array","dojo/_base/lang","dojo/i18n!./nls/HistoryEditorAttendeesTab"],function(dojo,_cda,_cdb,_cdc,_cdd,_cde,_cdf,_ce0,_ce1,_ce2,_ce3,_ce4,lang,_ce5){var _ce6=_cdc("Sage.MainView.ActivityMgr.HistoryEditorAttendeesTab",[_cda,_cdb],{histEditor:null,lup_Contact:null,lup_ContactConfig:null,lup_Lead:null,lup_LeadConfig:null,widgetsInTemplate:true,_timeZones:[],constructor:function(){lang.mixin(this,_ce5);var self=this;if(this._timeZones.length==0){Sage.Utility.getTimeZones(function(_ce7){self._timeZones=_ce7;});}},widgetTemplate:new Simplate(["<div>","<div id=\"{%= $.id %}_hisAttendeesGridPlaceholder\" dojoAttachPoint=\"_histAttendeesGridPlaceholder\" style=\"width:100%;height:100%\"></div>","</div>"]),_newItems:[],startup:function(){this._newItems=[];if(!this.histEditor){return;}this._buildGrid();dojo.connect(this.histEditor,"onHide",this,this._dialogHide);dojo.subscribe("/entity/history/create",this,this._historySaved);dojo.subscribe("/entity/history/change",this,this._historySaved);},_getTimeZoneDisplayName:function(_ce8){var _ce9=_ce8;if(this._timeZones&&this._timeZones.length>0){var obj=this._timeZones.filter(function(val){return val.Keyname===_ce8;});if(obj&&obj[0]){_ce9=obj[0].Displayname;}}return _ce9;},_buildGrid:function(){var self=this;_cdc("Sage.Extensions.Activity.primaryContactCheckBox",dojox.grid.cells.Bool,{format:function(_cea,_ceb){var _cec=Sage.Utility.getValue(_ceb,"IsPrimary");var _ced="<input type=\"checkbox\" disabled=\"disabled\" />";if(_cec){_ced="<input type=\"checkbox\" checked=\"checked\" disabled=\"disabled\" />";}return _ced;}});_cdc("Sage.Extensions.Activity.isAttendeeCheckBox",dojox.grid.cells.Bool,{format:function(_cee,_cef){var _cf0=Sage.Utility.getValue(_cef,"IsAttendee");var _cf1="<input type=\"checkbox\" disabled=\"disabled\" />";if(_cf0){_cf1="<input type=\"checkbox\" checked=\"checked\" disabled=\"disabled\" />";}return _cf1;}});_cdc("Sage.Extensions.Activity.AttendeeStatus",dojox.grid.cells.Select,{format:function(_cf2,_cf3){var _cf4=Sage.Utility.getValue(_cf3,"IsAttendee");if(_cf4){return this.inherited(arguments);}else{return "";}}});var _cf5=function(data,_cf6){_ce4.forEach(data,function(item,i){if(item["TimeZone"]){item["TimeZone"]=self._getTimeZoneDisplayName(item["TimeZone"]);}});};var _cf7=[{field:"Name",name:this.header_Name,width:"180px"},{field:"AccountName",name:this.header_AccountName,width:"180px"},{field:"EntityType",name:this.header_Type,width:"60px"},{field:"IsPrimary",name:this.header_Primary,width:"40px",type:Sage.Extensions.Activity.primaryContactCheckBox},{field:"IsAttendee",name:this.header_Attendee,width:"40px",type:Sage.Extensions.Activity.isAttendeeCheckBox},{field:"Status",name:this.header_Status,width:"100px",type:Sage.Extensions.Activity.AttendeeStatus,options:["Attended","Not Attended","Declined"],values:["T","F","D"],editable:true},{field:"RoleName",name:this.header_RoleName},{field:"PhoneNumber",name:this.header_Phone,width:"80px"},{field:"Email",name:this.header_Email,width:"150px"},{field:"TimeZone",name:this.header_TimeZone,width:"150px"}];var _cf8={columns:_cf7,storeOptions:{service:_cdd.getSDataService("dynamic"),resourceKind:"historyAttendees",select:["EntityType","EntityId","IsPrimary","IsAttendee","Name","Description","Notes","Status"],sort:[{attribute:"Name"}],newItemParentReferenceProperty:"History",onComplete:_cf5},slxContext:{"workspace":"",tabId:""},contextualCondition:function(){return "HistoryId eq '"+_cde.getCurrentEntityId()+"' and ((SLXUserAssociationId in ('',null) and EntityType eq 'User') or (EntityType in ('Contact','Lead')))";},id:this.id+"_histAttendees",rowsPerPage:40};var _cf9=_cde.getCurrentEntityId();if(!_cf9){_cf8.storeOptions["isInsertMode"]=true;}var grid=new _ce0.Grid(_cf8,this._histAttendeesGridPlaceholder);grid.setSortColumn("Name");this._grid=grid._grid;dojo.connect(this._grid,"markDirty",function(){var _cfa=dojo.byId(this.dirtyDataMsgID);if(_cfa){dojo.style(dojo.byId(this.dirtyDataMsgID),"display","none");}var _cfb=Sage.Services.getService("ClientBindingManagerService");if(_cfb){_cfb.clearDirtyAjaxItem(this.id);}});grid.startup();},_dialogHide:function(){this._newItems=[];this._grid.store.clearCache();},_tabfShow:function(){if(this._grid&&!this.gridRefreshed){this._grid.refresh();this.gridRefreshed=true;}},_tabShowdd:function(){if(this._grid&&!this.gridRefreshed){var _cfc=this._grid.get("mode");var _cfd=_cde.getCurrentEntityId();if((!_cfd&&_cfc!=="insert")||(_cfd&&_cfc==="insert")){this._grid.set("mode",(!_cfd)?"insert":"");}this._grid.refresh();this.gridRefreshed=true;}},_tabShow:function(){if(this._grid){var _cfe=this._grid.get("mode");var _cff=_cde.getCurrentEntityId();if((!_cff&&_cfe!=="insert")||(_cff&&_cfe==="insert")){this._grid.set("mode",(!_cff)?"insert":"");}this._grid.refresh();}},_historySaved:function(_d00){this._grid.saveChanges();},_addHistoryAttendee:function(_d01){if(!_d01.ContactId&&!_d01.LeadId){return;}var _d02=null;if(_d01.ContactId){_cdf._getContactData(_d01.ContactId,function(data){if(data){_d02=this._setHistoryAttendeeEntityFromContactLead("Contact",data);_d02.History={"$key":_d01.$key};this._saveHistoryAttendee(_d02);}},this);}else{if(_d01.LeadId){_cdf._getLeadData(_d01.LeadId,function(data){if(data){_d02=this._setHistoryAttendeeEntityFromContactLead("Lead",data);_d02.History={"$key":_d01.$key};this._saveHistoryAttendee(_d02);}},this);}}},_saveHistoryAttendee:function(_d03){var req=new Sage.SData.Client.SDataSingleResourceRequest(_cdd.getSDataService("dynamic")).setResourceKind("historyAttendees").create(_d03,{success:function(){},failure:function(){},scope:this});},_setHistoryAttendeeEntityFromContactLead:function(type,_d04){var _d05=false;if(_d04&&_d04.$key){_d05={};_d05.EntityType=type;_d05.EntityId=_d04.$key;_d05.$key=_d04.$key;_d05.IsPrimary=true;_d05.Name=_d04.$descriptor;_d05.$descriptor=_d04.$descriptor;_d05.Account=null;_d05.AccountName=_d04.AccountName||_d04.Company;if(type=="Lead"){_d05.Company=_d04.Company;_d05.LeadFullName=_d04.$descriptor;}_d05.Company=_d04.Company;_d05.Email=_d04.Email;_d05.Description="";_d05.Notes="";if(_d04.Address){_d05.TimeZone=_d04.Address.TimeZone;}_d05.PhoneNumber=_d04.WorkPhone;_d05.RoleName="";_d05.general=false;}return _d05;}});return _ce6;});},"Sage/UI/Columns/CheckBox":function(){define(["dojo/_base/declare"],function(_d06){var _d07=_d06("Sage.UI.Columns.CheckBox",dojox.grid.cells.Bool,{formatter:function(_d08,_d09,cel){var _d0a=(_d08===true||_d08===1)?"<input type=\"checkbox\" checked=\"checked\" disabled=\"disabled\" />":"<input type=\"checkbox\" disabled=\"disabled\" />";return _d0a;}});return _d07;});},"Sage/MainView/ActivityMgr/OccurrenceOrSeriesQueryDlg":function(){define(["dijit/_Widget","Sage/_Templated","dojo/string","dijit/Dialog","Sage/UI/_DialogLoadingMixin","dojo/_base/lang","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/MainView/BindingsManager","Sage/Utility","Sage/Utility/Activity","Sage/UI/Dialogs","dijit/form/RadioButton","dojo/_base/declare","dojo/i18n!./nls/OccurrenceOrSeriesQueryDlg"],function(_d0b,_d0c,_d0d,_d0e,_d0f,_d10,_d11,_d12,_d13,_d14,_d15,_d16,_d17,_d18,_d19){var _d1a=_d18("Sage.MainView.ActivityMgr.OccurrenceOrSeriesQueryDlg",[_d0b,_d0c],{activityId:"",activityMemberId:"",activity:false,store:false,mode:"edit",widgetsInTemplate:true,disableSeriesOption:"",widgetTemplate:new Simplate(["<div>","<div dojoType=\"dijit.Dialog\" title=\"\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onHide:_onDlgHide\">","<div class=\"recur-activity-dialog\">","<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"160\" >","<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.actDateText %}\" dojoAttachPoint=\"container_actDate\"></div>","<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.accountText %}\" dojoAttachPoint=\"container_account\"></div>","<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.contactText %}\" dojoAttachPoint=\"container_contact\"></div>","<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.opportunityText %}\" dojoAttachPoint=\"container_opportunity\"></div>","</div>","<div class=\"dijitContentPane\">&nbsp;</div>","<div class=\"dijitContentPane\">","<input type=\"radio\" dojoType=\"dijit.form.RadioButton\" name=\"editType\" id=\"{%= $.id %}_thisOccurrence\" checked=\"true\" dojoAttachPoint=\"_thisOccurRadio\" />&nbsp;","<label for=\"{%= $.id %}_thisOccurrence\">{%= ($.mode === \"edit\") ? $.editOneText : (($.mode === \"delete\")? $.deleteOneText : $.completeOneText) %}</label>","</div><div class=\"dijitContentPane\">","<input type=\"radio\" dojoType=\"dijit.form.RadioButton\" name=\"editType\" id=\"{%= $.id %}_Series\" dojoAttachPoint=\"_seriesRadio\" {%=$.disableSeriesOption%} />&nbsp;","<label for=\"{%= $.id %}_Series\">{%= ($.mode === \"edit\") ? $.editAllText : (($.mode === \"delete\")? $.deleteAllText : $.completeAllText) %}</label>","</div>","<div class=\"general-dialog-actions\">","<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btnContinue\" name=\"_btnContinue\" dojoAttachPoint=\"_btnContinue\" dojoAttachEvent=\"onClick:_continueClick\" >{%= $.continueText %}</div>","</div>","</div>","</div>","</div>"]),constructor:function(){_d10.mixin(this,_d19);},show:function(){this._dialog.show();if(!this._dialog._standby){_d10.mixin(this._dialog,new _d0f());if(!this.activity){this._dialog.showLoading();}}this._thisOccurRadio.set("checked",true);},_setModeAttr:function(mode){this.mode=mode;},_getModeAttr:function(){return this.mode;},hide:function(){this._dialog.hide();},_onDlgHide:function(){this.activity=false;this.activityId="";},_setActivityIdAttr:function(_d1b){this.activityId=_d1b;if(this.activityId&&this.activityId!==""){this._loadData();}},_getActivityIdAttr:function(){return this.activityId;},_setActivityMemebrIdAttr:function(_d1c){this.activityMemberId=_d1c;},_getActivityMemberIdAttr:function(){return this.activityMemberId;},_loadData:function(){if(this._dialog._standby){this._dialog.showLoading();}var _d1d=["Description","AccountName","ContactName","OpportunityName","StartDate","Type","Timeless","Recurring","RecurrenceState"];if(!this.store){this.store=new _d11({include:[],select:_d1d,resourceKind:"activities",service:_d12.getSDataService("system")});}if(this.activityId!==""){this.store.fetch({predicate:"\""+this.activityId+"\"",onComplete:this._receiveActivity,onError:this._failLoad,scope:this});}},_receiveActivity:function(_d1e){if(this._dialog._standby){this._dialog.hideLoading();}this.activity=_d1e;this._bind();},_receiveActivities:function(data){if(this._dialog._standby){this._dialog.hideLoading();}var _d1f=data["$resources"];if(_d1f.length<1){this._failLoad();}this.activity=_d1f[0];this.activityId=this.activity["$key"];this._bind();},_bind:function(){var act=this.activity;var d=act.Description;if(!d){d="";}if(d.length>30){d=d.substring(0,26)+"...";}this._dialog.set("title",_d0d.substitute(this.titleFmt,{type:_d15.getActivityTypeName(act.Type),description:d}));this.container_actDate.set("content",_d15.formatActivityStartDate(_d14.Convert.toDateFromString(act.StartDate,act.Timeless)));this.container_account.set("content",act.AccountName||"&nbsp;");this.container_contact.set("content",act.ContactName||"&nbsp;");this.container_opportunity.set("content",act.OpportunityName||"&nbsp;");},_failLoad:function(){if(this._dialog._standby){this._dialog.hideLoading();}_d16.showWarning(this.failedToLoadMsg);this._dialog.hide();},_continueClick:function(e){this.hide();if(this._thisOccurRadio.get("checked")){if(this.activityId.length<=12){var _d20=(_d14.Convert.toDateFromString(this.activity.StartDate).getTime()/1000)+62135596800;this.activityId=this.activityId+";"+_d20;}this.onSelectOccurrence(this.activityId,_d14.Convert.toDateFromString(this.activity.StartDate),this.activityMemberId);}else{this.onSelectSeries(this.activityId,this.activityMemberId);}},onSelectSeries:function(id){},onSelectOccurrence:function(id,_d21){}});return _d1a;});},"Sage/Array":function(){define([],function(){if(typeof Array.prototype.swap==="undefined"){Array.prototype.swap=function(d,s){if(d>this.length||s>this.length){return;}var tmp=this[d];this[d]=this[s];this[s]=tmp;return this;};}if(typeof Array.prototype.getIndexByProp==="undefined"){Array.prototype.getIndexByProp=function(str,prop){for(var i=0,len=this.length;i<len;i++){if(prop&&prop==="key"){if(str in this[i]){return i;}}else{if(prop&&prop==="value"){for(var p in this[i]){if(this[i].hasOwnProperty(p)){if(this[i][p]===str){return i;}}}}}}};}if(typeof Array.prototype.placeByAttr==="undefined"){Array.prototype.placeByAttr=function(obj,attr){var _d22=false;if(!this.length){this.push(obj);return;}for(var i=0,len=this.length;i<len;i++){if(this[i][attr]>=obj[attr]){_d22=true;this.splice(i,0,obj);break;}}if(!_d22){this.push(obj);}};}if(typeof Array.prototype.removeByAttr==="undefined"){Array.prototype.removeByAttr=function(attr,arg){if(!this.length){return;}for(var i=0,len=this.length;i<len;i++){if(this[i][attr]===arg){this.splice(i,1);break;}}};}if(typeof Array.prototype.filter==="undefined"){Array.prototype.filter=function(fun){"use strict";if(this===null){throw new TypeError();}var t=Object(this);var len=t.length>>>0;if(typeof fun!="function"){throw new TypeError();}var res=[];var _d23=arguments[1];for(var i=0;i<len;i++){if(i in t){var val=t[i];if(fun.call(_d23,val,i,t)){res.push(val);}}}return res;};}return Array;});},"Sage/_ConfigurationProvider":function(){define(["dojo/_base/declare"],function(_d24){var _d25=_d24("Sage._ConfigurationProvider",null,{_connects:null,_subscribes:null,constructor:function(_d26){dojo.mixin(this,_d26);this._connects=[];this._subscribes=[];},"set":function(name,_d27){this["_"+name]=_d27;},"get":function(name){return this["_"+name];},requestConfiguration:function(_d28){},onConfigurationChange:function(){},destroy:function(){dojo.forEach(this._connects,function(_d29){dojo.disconnect(_d29);});dojo.forEach(this._subscribes,function(_d2a){dojo.unsubscribe(_d2a);});this.uninitialize();},uninitialize:function(){}});var _d2b=_d24("Sage.StaticConfigurationProvider",[_d25],{createConfiguration:function(){var _d2c={};for(var name in this){if(this.hasOwnProperty(name)&&!/^_/.test(name)){_d2c[name]=this[name];}}return _d2c;},requestConfiguration:function(_d2d){if(_d2d.success){_d2d.success.call(_d2d.scope||this,this.createConfiguration(_d2d),_d2d,this);}}});return _d25;});},"Sage/Data/main":function(){define(["Sage/Data/BaseSDataStore","Sage/Data/GroupLayoutSingleton","Sage/Data/WritableStore","Sage/Data/ProxySDataStore","Sage/Data/QBTreeStoreModel","Sage/Data/SDataServiceRegistry","Sage/Data/SDataStore","Sage/Data/SingleEntryPropertySDataStore","Sage/Data/SingleEntrySDataStore","Sage/Data/SummaryViewDataManager","Sage/Data/WritableSDataStore"],function(){});},"Sage/Data/GroupLayoutSingleton":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/Data/SDataServiceRegistry","dojo/ready","dojo/json"],function(_d2e,_d2f,lang,_d30,_d31,json){var m=_d2e("Sage.Data.GroupLayoutSingleton",null,{data:{},_fetchCache:{},_registeredOnSuccess:{},_registeredOnFailure:{},_baseCacheKey:"GROUPLAYOUT_",constructor:function(){},getGroupLayout:function(_d32,_d33,_d34,_d35){var _d36=_d30.getSDataService("system"),_d37=new Sage.SData.Client.SDataSingleResourceRequest(_d36),_d38=this._registeredOnSuccess[_d35],_d39=this._registeredOnFailure[_d35],_d3a=this._baseCacheKey+_d35,_d3b=null;if(_d35!=="LOOKUPRESULTS"){_d3b=sessionStorage.getItem(_d3a);}if(_d3b){this.data[_d35]=json.parse(_d3b);}if(this.data[_d35]){if(typeof _d33==="function"){_d33(this.data[_d35]);}return;}if(!_d38){this._registeredOnSuccess[_d35]=[];_d38=this._registeredOnSuccess[_d35];}if(!_d39){this._registeredOnFailure[_d35]=[];_d39=this._registeredOnFailure[_d35];}_d38.push(_d33);_d39.push(_d34);if(this._fetchCache[_d35]){return;}else{this._fetchCache[_d35]=true;}_d37.setResourceKind("groups");_d37.setResourceSelector(_d32);_d37.setQueryArg("include","layout,layout/dateTimeType,tableAliases");_d37.read({success:lang.hitch(this,this._onSuccess,_d35),failure:lang.hitch(this,this._onFailure,_d35)});},_onSuccess:function(_d3c,data){var _d3d=this._registeredOnSuccess[_d3c];if(_d3d){_d2f.forEach(_d3d,function(cb){if(typeof cb==="function"){cb(data);}});}if(_d3c!=="LOOKUPRESULTS"){this.data[_d3c]=data;}sessionStorage.setItem(this._baseCacheKey+_d3c,json.stringify(data));this._doneFetching(_d3c);},_onFailure:function(_d3e,err){var _d3f=this._registeredOnFailure[_d3e];if(_d3f){_d2f.forEach(_d3f,function(cb){if(typeof cb==="function"){cb(err);}});}this._doneFetching(_d3e);},_doneFetching:function(_d40){this._registeredOnSuccess[_d40]=[];this._registeredOnFailure[_d40]=[];this._fetchCache[_d40]=false;}});return m;});},"Sage/Data/ProxySDataStore":function(){define(["Sage/Data/BaseSDataStore","Sage/Data/SDataServiceRegistry","dojo/_base/declare"],function(_d41,_d42,_d43){var _d44=_d43("Sage.Data.ProxySDataStore",_d41,{constructor:function(o){this.singleResource=null;this._request=null;this._hasValidService=(typeof this.service!=="undefined");},getCollectionRequestObj:function(_d45){if(!this._hasValidService){return false;}var _d46=this.inherited(arguments);if(typeof this.getResourcePredicate==="function"){var idx=(_d46.uri.getPathSegment(Sage.SData.Client.SDataUri.ResourcePropertyIndex))?Sage.SData.Client.SDataUri.ResourcePropertyIndex:_d46.uri.pathSegments.length-1;var _d47=_d46.uri.getPathSegment(idx);var pred=this.getResourcePredicate.call(this);if(typeof pred!=="undefined"&&pred!==""){if((pred.indexOf(" ")<0)&&((pred.replace(/[\"\']/,"")===pred))){pred="'"+pred+"'";}_d47["predicate"]=pred;_d46.uri.setPathSegment(idx,_d47);}else{if(typeof console!=="undefined"){return false;}}}if(this.pathSegments&&this.pathSegments.length>0){var _d48=_d46.uri.pathSegments.length;for(var i=0;i<this.pathSegments.length;i++){_d46.uri.setPathSegment(_d48,this.evaluatePathSegment(this.pathSegments[i]));_d48++;}}return _d46;},fetch:function(_d49){if(_d49.queryOptions&&_d49.queryOptions.singleResourceRequest){return this.returnCollectionProperty(_d49,_d49.queryOptions.property);}return this.inherited(arguments);},verifyService:function(){if(!this.service){this.service=_d42.getSDataService("proxy",true);}this._hasValidService=true;if(typeof this.getAppId==="function"){var _d4a=this.getAppId();if(typeof _d4a!=="undefined"&&_d4a!==""){this.service.setDataSet(_d4a);}else{if(typeof console!=="undefined"){this._hasValidService=false;}}}},returnCollectionProperty:function(_d4b,_d4c){if(this._entity.hasOwnProperty(_d4c)&&this._entity[_d4c]!==null){var list=this._entity[_d4c].$resources;if(typeof list!=="unknown"){if(_d4b.onBegin){_d4b.onBegin.call(_d4b.scope||this,list.length,_d4b);}if(_d4b.onComplete){_d4b.onComplete.call(_d4b.scope||this,list,_d4b);}}}if(_d4b.onError){_d4b.onError.call(_d4b.scope||this,"Invalid data url",_d4b);}},evaluatePathSegment:function(_d4d){if(typeof _d4d==="string"){return {"text":_d4d};}if(typeof _d4d.getPredicate==="function"){return {"text":_d4d.text,"predicate":_d4d.getPredicate()};}if(typeof _d4d.getPredicate==="string"){return {"text":_d4d.text,"predicate":_d4d.getPredicate};}return _d4d;},receiveSingleResource:function(data){this.onGetSingleResource(data);},_getRequest:function(){this.verifyService();if(this._request===null){var _d4e=new Sage.SData.Client.SDataSingleResourceRequest(this.service);_d4e.setResourceKind(this.resourceKind);if(typeof this.getResourcePredicate==="function"){var idx=_d4e.uri.getPathSegment(Sage.SData.Client.SDataUri.ResourcePropertyIndex)||_d4e.uri.pathSegments.length-1;var _d4f=_d4e.uri.getPathSegment(idx);var pred=this.getResourcePredicate.call(this);if(typeof pred!=="undefined"&&pred!==""){if((pred.indexOf(" ")<0)&&((pred.replace(/[\"\']/,"")===pred))){pred="'"+pred+"'";}_d4f["predicate"]=pred;_d4e.uri.setPathSegment(idx,_d4f);}else{if(typeof console!=="undefined"){return false;}}}if(this.pathSegments&&this.pathSegments.length>0){var _d50=_d4e.uri.pathSegments.length;for(var i=0;i<this.pathSegments.length;i++){_d4e.uri.setPathSegment(_d50,this.evaluatePathSegment(this.pathSegments[i]));_d50++;}}_d4e.setQueryArgs({"select":this.select.join(","),"include":this.include.join(",")});if(this.includeContent&&this.includeContent===true){_d4e.setQueryArg({"_includeContent":true});}this._request=_d4e;}return this._request;},getSingleResource:function(){var _d51=this._getRequest();_d51.read({success:dojo.hitch(this,this.onSuccessLoad),failure:dojo.hitch(this,this.onFailure)});},onSuccessLoad:function(data){if(data){if(typeof console!=="undefined"){}this._entity=data;this.onGetSingleResource(data);}else{if(typeof console!=="undefined"){}var _d52={$resources:[]};this._entity=_d52;this.onGetSingleResource(_d52);}},onGetSingleResource:function(data){}});return _d44;});},"Sage/Data/QBTreeStoreModel":function(){define(["dijit/tree/ForestStoreModel","Sage/Data/SDataServiceRegistry","dojo/string","dojo/_base/array","dojo/_base/declare","dojo/_base/lang"],function(_d53,_d54,_d55,_d56,_d57,lang){return _d57("Sage.Data.QBTreeStoreModel",_d53,{insertedChildren:null,constructor:function(){this.insertedChildren=[];},convertDescriptionToFilter:function(_d58){if(_d58.$descriptor){var _d59=_d58.$descriptor;_d59=_d59.replace(this.rootId+":","");return _d59;}return _d58.id;},getChildren:function(_d5a,_d5b,_d5c){this.store.fetch({queryArgs:{"_pathFilter":this.convertDescriptionToFilter(_d5a)},resourcePredicate:_d5a.root?undefined:"",onComplete:lang.hitch(this,function(data,obj){var _d5d=_d54.getSDataService("metadata",false,true,false),_d5e,_d5f,i,temp,_d60=[],_d61,_d62;_d5f=_d5a.id||_d5a.toTable;_d56.forEach(this.insertedChildren,lang.hitch(this,function(_d63){if(_d63.parentItem===_d5a){data.push(_d63);}}));_d61=[function(item){if(item.toTable===_d5f){item.toTable=item.fromTable;temp=item.toField;item.toField=item.fromField;item.fromTable=_d5f;item.fromField=temp;}},function(item){var _d64=item.joinType,_d65={"Left":"[left]",">":"[left]","Inner":"[inner]","=":"[inner]","Right":"[right]","<":"[right]"},_d66=_d65[_d64];if(item.toTable){item.label=_d55.substitute("${2} (${1} -> ${3})${4}",[item.fromTable,item.fromField,item.toTableDisplayName,item.toField,_d66]);}},function(item){item.parentItem=_d5a;},function(item){item.children=[];},function(item){var _d67=item.joinType,_d68={"Left":">","Inner":"=","Right":"<",},_d69=_d68[_d67]||item.joinType;item.dataPathSegment=_d55.substitute("${0}${1}${2}.${3}",[item.fromField,_d69,item.toField,item.toTable]);},function(item){item.displayPathSegment=_d55.substitute("${0}",[item.toTable]);},function(item){var _d6a;function _d6b(path,_d6c){if(_d6c.root){if(path&&path.length>0){if(path.startsWith("!")){path=path.substring(1,path.length);}}return _d6c.id+":"+path;}return _d6b(_d55.substitute("!${0}",[_d6c.dataPathSegment])+path,_d6c.parentItem);};_d6a=_d6b("!",item);item.dataPath=_d6a;item["$descriptor"]=item["$descriptor"]||_d6a;},function(item){var _d6d;function _d6e(path,_d6f){if(_d6f.root){return _d6f.id+path;}return _d6e(_d55.substitute(".${0}${1}",[_d6f.displayPathSegment,path]),_d6f.parentItem);};_d6d=_d6e("",item);item.displayPath=_d6d;}];_d62=function(item){return function(func){func(item);};};for(i=0;i<data.length;i++){_d56.forEach(_d61,lang.hitch(this,_d62(data[i])));}data=_d56.filter(data,lang.hitch(this,function(item){var _d70=item.parentItem;while(!_d70.root){if(item.toTable===_d70.toTable){return false;}_d70=_d70.parentItem;}if(item.toTable===_d70.id){return false;}return true;}));data.sort(function(a,b){if(a.toTable<b.toTable){return -1;}if(a.toTable>b.toTable){return 1;}return 0;});_d5a.children=data;_d5b(data,obj);}),onError:_d5c});},getIdentity:function(item){return item.$descriptor;},mayHaveChildren:function(item){return item.root||true;},newItem:function(args,_d71){var _d72={"$descriptor":args.fromtable,"$etag":"","$httpStatus":200,"fromTable":args.fromtable,"fromField":args.fromfield,"toTable":args.totable,"toTableDisplayName":args.fromtable,"toField":args.tofield,"cascadeType":args.cascadetype,"joinType":args.jointype,"parentItem":_d71.item,"children":[]};this.insertedChildren.push(_d72);this.addItemToStore(_d72,_d71.item);},addItemToStore:function(_d73,_d74){var _d75=this.store,_d76=this.childrenAttrs[0],_d77=_d75.getValue(_d74,_d76),_d78;if(_d74){if(_d77){_d78=_d77.slice(0);_d78.push(_d73);_d75.setValue(_d74,_d76,_d78);}}}});});},"Sage/Data/SDataStore":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(_d79,lang){var _d7a=_d79("Sage.Data.SDataStore",null,{executeReadWith:"read",sort:null,where:null,select:null,include:null,request:null,queryName:null,resourceKind:null,resourcePredicate:null,collection:"$resources",expandRecurrences:null,constructor:function(o){lang.mixin(this,o);this.features={"dojo.data.api.Read":true};},_expandExpression:function(_d7b){if(typeof _d7b==="function"){return _d7b.apply(this,Array.prototype.slice.call(arguments,1));}else{return _d7b;}},_createRequest:function(_d7c){var _d7d="",sort=(_d7c.sort?this._expandExpression(_d7c.sort):this.sort),_d7e=this._expandExpression(_d7c.select||this.select),_d7f=this._expandExpression(_d7c.include||this.include),_d80=this._expandExpression(_d7c.request||this.request);if(_d7c.query){if(this.where){_d7d=this._expandExpression(this.where+" and ("+_d7c.query+" )");}else{_d7d=this._expandExpression(_d7c.query);}}else{_d7d=this._expandExpression(this.where);}if(_d80){_d80=_d80.clone();}else{var _d81=this._expandExpression(_d7c.queryName||this.queryName),_d82=this._expandExpression(_d7c.resourceKind||this.resourceKind),_d83=this._expandExpression(_d7c.resourcePredicate||this.resourcePredicate);_d80=_d81?new Sage.SData.Client.SDataNamedQueryRequest(this.service).setQueryName(_d81):new Sage.SData.Client.SDataResourceCollectionRequest(this.service);if(_d82){_d80.setResourceKind(_d82);}if(_d83){_d80.getUri().setCollectionPredicate(_d83);}}if(_d7e&&_d7e.length>0){_d80.setQueryArg("select",_d7e.join(","));}if(_d7f&&_d7f.length>0){_d80.setQueryArg("include",_d7f.join(","));}if(_d7d){_d80.setQueryArg("where",_d7d);}if(sort&&sort.length>0){var _d84=[];dojo.forEach(sort,function(v){if(v.descending){this.push(v.attribute+" desc");}else{this.push(v.attribute);}},_d84);_d80.setQueryArg("orderby",_d84.join(","));}if(typeof _d7c.start!=="undefined"){_d80.setQueryArg(Sage.SData.Client.SDataUri.QueryArgNames.StartIndex,_d7c.start+1);}if(typeof _d7c.count!=="undefined"){_d80.setQueryArg(Sage.SData.Client.SDataUri.QueryArgNames.Count,_d7c.count);}if(this.expandRecurrences!==null){_d80.uri.queryArgs["_expandRecurrences"]=this.expandRecurrences;}return _d80;},fetch:function(_d85){var _d86=this._createRequest(_d85),_d87=lang.mixin({},_d85);var _d88=_d86[this.executeReadWith]({success:lang.hitch(this,this._onFetchSuccess,_d85,_d87),failure:lang.hitch(this,this._onFetchFailure,_d85,_d87),httpMethodOverride:_d85.queryOptions&&_d85.queryOptions["httpMethodOverride"]});_d87["abort"]=lang.hitch(this,this._abortRequest,_d88);return _d87;},_abortRequest:function(_d89){this.service.abortRequest(_d89);},_onFetchSuccess:function(_d8a,_d8b,_d8c){if(_d8c){if(_d8c["$resources"]){_d8b["feed"]=_d8c["$resources"];}else{_d8b["entry"]=_d8c;}var _d8d=lang.getObject(this.collection,false,_d8c)||[_d8c],size=_d8c["$resources"]?_d8c["$totalResults"]||-1:1;if(_d8a.onBegin){_d8a.onBegin.call(_d8a.scope||this,size,_d8b);}if(_d8a.onItem){for(var i=0;i<_d8d.length;i++){_d8a.onItem.call(_d8a.scope||this,_d8d[i],_d8b);}}if(_d8a.onComplete){_d8a.onComplete.call(_d8a.scope||this,_d8a.onItem?null:_d8d,_d8b);}}else{if(_d8a.onError){_d8a.onError.call(_d8a.scope||this,"invalid feed",_d8a);}}},_onFetchFailure:function(_d8e,_d8f,_d90,_d91){if(_d8e.onError){_d8e.onError.call(_d8e.scope||this,_d90.responseText,_d8e);}},getValue:function(item,_d92,_d93){var _d94=lang.getObject(_d92,false,item);return typeof _d94==="undefined"?_d93:_d94;},getFeatures:function(){return this.features;}});return _d7a;});},"Sage/Data/SingleEntryPropertySDataStore":function(){define(["Sage/Data/SingleEntrySDataStore","dojo/_base/declare"],function(_d95,_d96){var _d97=_d96("Sage.Data.SingleEntryPropertySDataStore",_d95,{propertyName:null,fetch:function(_d98){var _d99=this._getRequest(_d98),key;if(this.sort){_d99.setQueryArg("orderby",this.sort);}this.verifyService();if(_d98.predicate){if(this._entity&&(_d98.predicate===this._entity.$key)&&this._okToCache){if(_d98.onComplete){_d98.onComplete.call(_d98.scope||this,this._entity,_d98);return;}}_d99.setResourceSelector(_d98.predicate);}if(this.select&&this.select.length>0){_d99.setQueryArg("select",this.select.join(","));}if(this.include&&this.include.length>0){_d99.setQueryArg("include",this.include.join(","));}if(this.predicate&&this.predicate.length>0){_d99.setResourceSelector(this.predicate);}if(_d98.beforeRequest){_d98.beforeRequest.call(_d98.scope||this,_d99);}_d99.setQueryArg("startIndex",_d98.start+1);_d99.setQueryArg("count",_d98.count||100);key=_d99.readFeed({success:dojo.hitch(this,this.onSuccess,_d98),failure:dojo.hitch(this,this.onFailure,_d98)});return {abort:dojo.hitch(this,this.abortRequest,key)};},abortRequest:function(key){this.service.abortRequest(key);},onSuccess:function(_d9a,feed){if(_d9a.onBegin){_d9a.onBegin.call(_d9a.scope||this,feed.$totalResults,_d9a);}if(_d9a.onComplete){_d9a.onComplete.call(_d9a.scope||this,feed.$resources,_d9a);}},_getRequest:function(_d9b){if(!this._request){var req=new Sage.SData.Client.SDataResourcePropertyRequest(this.service);req.setResourceKind(this.resourceKind);req.setResourceProperty(this.propertyName);this._request=req;}return this._request;},});return _d97;});},"Sage/Data/SummaryViewDataManager":function(){define(["Sage/Data/SDataServiceRegistry","dojo/_base/array","dojo/_base/declare","dojo/_base/lang"],function(_d9c,_d9d,_d9e,lang){var _d9f=_d9e("Sage.Data.SummaryRequestQueue",null,{mashupName:"",queryName:"",fetching:false,service:null,unfetchedIds:null,constructor:function(_da0){lang.mixin(this,_da0);this.requestHash={};this.fetching=false;this.unfetchedIds=[];this.allFetched=[];this.service=_d9c.getSDataService("mashups");},add:function(id,_da1){this.requestHash[id]=_da1;this.allFetched.push({id:id,context:_da1});this.unfetchedIds.push(id);},send:function(_da2,_da3){this.fetching=true;var _da4=[],id,_da5;for(id in this.requestHash){_da4.push("'"+id+"'");_da5=_d9d.indexOf(this.unfetchedIds,id);if(_da5>-1){this.unfetchedIds.splice(_da5,1);}}var _da6=new Sage.SData.Client.SDataNamedQueryRequest(this.service);_da6.setApplicationName("$app");_da6.setResourceKind("mashups");var _da7=this.mashupName||"SummaryViewQueries";_da6.uri.setCollectionPredicate("'"+_da7+"'");_da6.setQueryName("execute");_da6.setQueryArg("_resultName",this.queryName);_da6.setQueryArg("_ids",_da4.join(","));var _da8=this;_da6.read({success:lang.hitch(_da3,_da2,_da8),failure:lang.hitch(this,this.requestFailed,_da8)});},requestFailed:function(a,b,c){}});var _da9=_d9e("Sage.Data.SummaryViewDataManager",null,{oldQueue:null,queue:null,maxQueueLength:100,constructor:function(){this.oldQueue={};this._createNewQueue();},_createNewQueue:function(){this.queue=new _d9f({});this.requestTimeout=false;},requestData:function(_daa,_dab,_dac){if(this.queue.fetching){this.oldQueue=this.queue;this._createNewQueue();}this.queue.mashupName=_dac.mashupName;this.queue.queryName=_dac.queryName;this.queue.add(_daa,_dab);if(this.requestTimeout){window.clearTimeout(this.requestTimeout);}var q=this.queue;var self=this;if(q.unfetchedIds.length>=this.maxQueueLength){q.send(self.receiveData,self);}this.requestTimeout=window.setTimeout(function(){q.send(self.receiveData,self);},250);},requestDataNoWait:function(_dad,_dae,_daf){var _db0=new _d9f({mashupName:_daf.mashupName,queryName:_daf.queryName});_db0.add(_dad,_dae);_db0.send(this.receiveData,this);},receiveData:function(_db1,data){for(var i=0;i<data.$resources.length;i++){var _db2=data.$resources[i];var id=_db2.id;if(!id){id=_db2.$key;_db2.id=_db2.$key;}(function(_db3){_d9d.forEach(_db1.allFetched,function(item){try{if(_db3.id===item.id){item.context.set("entity",_db3);}}catch(err){}});})(_db2);}}});Sage.Services.addService("SummaryViewDataManager",new _da9());return _da9;});},"Sage/Store/main":function(){define(["Sage/Store/SData"],function(){});},"Sage/Store/SData":function(){define("Sage/Store/SData",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/store/util/QueryResults","dojo/string","dojo/json","../Utility"],function(_db4,lang,_db5,_db6,_db7,_db8,json,_db9){return _db4("Sage.Store.SData",null,{doDateConversion:false,where:null,select:null,include:null,orderBy:null,service:null,request:null,queryName:null,entityName:null,contractName:null,resourceKind:null,resourceProperty:null,resourcePredicate:null,executeQueryAs:null,executeGetAs:null,itemsProperty:"$resources",idProperty:"$key",labelProperty:"$descriptor",entityProperty:"$name",versionProperty:"$etag",constructor:function(_dba){lang.mixin(this,_dba);},_createEntryRequest:function(id,_dbb){var _dbc=_db9.expand(this,_dbb.request||this.request);if(_dbc){_dbc=_dbc.clone();}else{var _dbd=_db9.expand(this,_dbb.contractName||this.contractName),_dbe=_db9.expand(this,_dbb.resourceKind||this.resourceKind),_dbf=_db9.expand(this,_dbb.resourceProperty||this.resourceProperty),_dc0=id?/(\s+)/.test(id)?id:_db8.substitute("'${0}'",[id]):_db9.expand(this,_dbb.resourcePredicate||this.resourcePredicate);if(_dbf){_dbc=new Sage.SData.Client.SDataResourcePropertyRequest(this.service).setResourceProperty(_dbf).setResourceSelector(_dc0);}else{_dbc=new Sage.SData.Client.SDataSingleResourceRequest(this.service).setResourceSelector(_dc0);}if(_dbd){_dbc.setContractName(_dbd);}if(_dbe){_dbc.setResourceKind(_dbe);}}var _dc1=_db9.expand(this,_dbb.select||this.select),_dc2=_db9.expand(this,_dbb.include||this.include);if(_dc1&&_dc1.length>0){_dbc.setQueryArg("select",_dc1.join(","));}if(_dc2&&_dc2.length>0){_dbc.setQueryArg("include",_dc2.join(","));}return _dbc;},_createFeedRequest:function(_dc3,_dc4){var _dc5=_db9.expand(this,_dc4.request||this.request);if(_dc5){_dc5=_dc5.clone();}else{var _dc6=_db9.expand(this,_dc4.queryName||this.queryName),_dc7=_db9.expand(this,_dc4.contractName||this.contractName),_dc8=_db9.expand(this,_dc4.resourceKind||this.resourceKind),_dc9=_db9.expand(this,_dc4.resourceProperty||this.resourceProperty),_dca=_db9.expand(this,_dc4.resourcePredicate||this.resourcePredicate);if(_dc6){_dc5=new Sage.SData.Client.SDataNamedQueryRequest(this.service).setQueryName(_dc6);if(_dca){_dc5.getUri().setCollectionPredicate(_dca);}}else{if(_dc9){_dc5=new Sage.SData.Client.SDataResourcePropertyRequest(this.service).setResourceProperty(_dc9).setResourceSelector(_dca);}else{_dc5=new Sage.SData.Client.SDataResourceCollectionRequest(this.service);}}if(_dc7){_dc5.setContractName(_dc7);}if(_dc8){_dc5.setResourceKind(_dc8);}}var _dcb=_db9.expand(this,_dc4.select||this.select),_dcc=_db9.expand(this,_dc4.include||this.include),_dcd=_db9.expand(this,_dc4.sort||this.orderBy);if(_dcb&&_dcb.length>0){_dc5.setQueryArg("select",_dcb.join(","));}if(_dcc&&_dcc.length>0){_dc5.setQueryArg("include",_dcc.join(","));}if(_dcd){if(typeof _dcd==="string"){_dc5.setQueryArg("orderby",_dcd);}else{if(_dcd.length>0){var _dce=[];_db5.forEach(_dcd,function(v){if(v.descending){this.push(v.attribute+" desc");}else{this.push(v.attribute);}},_dce);_dc5.setQueryArg("orderby",_dce.join(","));}}}var _dcf=_db9.expand(this,this.where),_dd0=[];_dc3=_db9.expand(this,_dc3);if(_dcf){_dd0.push(_dcf);}if(_dc3){_dd0.push(_dc3);}if(_dd0.length>0){_dc5.setQueryArg("where","("+_dd0.join(") and (")+")");}if(typeof _dc4.start!=="undefined"){_dc5.setQueryArg(Sage.SData.Client.SDataUri.QueryArgNames.StartIndex,_dc4.start+1);}if(typeof _dc4.count!=="undefined"){_dc5.setQueryArg(Sage.SData.Client.SDataUri.QueryArgNames.Count,_dc4.count);}return _dc5;},_onRequestFeedSuccess:function(_dd1,feed){if(feed){var _dd2=lang.getObject(this.itemsProperty,false,feed),_dd3=typeof feed["$totalResults"]==="number"?feed["$totalResults"]:-1;_dd1.total=_dd3;_dd1.resolve(_dd2);}else{var _dd4=new Error("The feed result is invalid.");_dd1.reject(_dd4);}},_onRequestEntrySuccess:function(_dd5,_dd6){if(_dd6){_dd5.resolve(this.doDateConversion?this._handleDateConversion(_dd6):_dd6);}else{var _dd7=new Error("The entry result is invalid.");_dd5.reject(_dd7);}},_onRequestFailure:function(_dd8,xhr,_dd9){var _dda=new Error("An error occurred requesting: "+_dd9.url);_dda.xhr=xhr;_dda.status=xhr.status;_dda.responseText=xhr.responseText;_dda.aborted=false;_dd8.reject(_dda);},_onRequestAbort:function(_ddb,xhr,_ddc){var _ddd=new Error("An error occurred requesting: "+_ddc.url);_ddd.xhr=xhr;_ddd.status=0;_ddd.responseText=null;_ddd.aborted=true;_ddb.reject(_ddd);},_onCancel:function(_dde){this.store.abort(_dde.value);},_handleDateConversion:function(_ddf){for(var prop in _ddf){if(_db9.Convert.isDateString(_ddf[prop])){_ddf[prop]=_db9.Convert.toDateFromString(_ddf[prop]);}}return _ddf;},get:function(id,_de0){var _de1={},_de2=new _db6(lang.hitch(this,this._onCancel,_de1)),_de3=this._createEntryRequest(id,_de0||{});var _de4=this.executeGetAs?_de3[this.executeGetAs]:_de3.read;_de1.value=_de4.call(_de3,{success:lang.hitch(this,this._onRequestEntrySuccess,_de2),failure:lang.hitch(this,this._onRequestFailure,_de2),abort:lang.hitch(this,this._onRequestAbort,_de2)});return _de2;},getIdentity:function(_de5){return lang.getObject(this.idProperty,false,_de5);},getLabel:function(_de6){return lang.getObject(this.labelProperty,false,_de6);},getEntity:function(_de7){return lang.getObject(this.entityProperty,false,_de7);},getVersion:function(_de8){return lang.getObject(this.versionProperty,false,_de8);},put:function(_de9,_dea){_dea=_dea||{};var id=_dea.id||this.getIdentity(_de9),_deb=_dea.entity||this.entityName,_dec=_dea.version||this.getVersion(_de9),atom=!this.service.isJsonEnabled();if(id){_de9["$key"]=id;}if(_deb&&atom){_de9["$name"]=_deb;}if(_dec){_de9["$etag"]=_dec;}var _ded={},_dee=new _db6(lang.hitch(this,this._onCancel,_ded)),_def=this._createEntryRequest(id,_dea);var _df0=_dea.overwrite?_def.update:_def.create;_ded.value=_df0.call(_def,_de9,{success:lang.hitch(this,this._onTransmitEntrySuccess,_dee),failure:lang.hitch(this,this._onRequestFailure,_dee),abort:lang.hitch(this,this._onRequestAbort,_dee)});return _dee;},_onTransmitEntrySuccess:function(_df1,_df2){_df1.resolve(this.doDateConversion?this._handleDateConversion(_df2):_df2);},add:function(_df3,_df4){_df4=_df4||{};_df4.overwrite=false;return this.put(_df3,_df4);},remove:function(id){},query:function(_df5,_df6){var _df7={},_df8=new _db6(lang.hitch(this,this._onCancel,_df7)),_df9=this._createFeedRequest(_df5,_df6||{});_df8.total=-1;var _dfa=this.executeQueryAs?_df9[this.executeQueryAs]:_df9 instanceof Sage.SData.Client.SDataResourcePropertyRequest?_df9.readFeed:_df9.read;_df7.value=_dfa.call(_df9,{success:lang.hitch(this,this._onRequestFeedSuccess,_df8),failure:lang.hitch(this,this._onRequestFailure,_df8),abort:lang.hitch(this,this._onRequestAbort,_df8),httpMethodOverride:_df6&&_df6["httpMethodOverride"]});return _db7(_df8);},transaction:function(){},getChildren:function(_dfb,_dfc){},getMetadata:function(_dfd){if(_dfd){return {id:this.getIdentity(_dfd),label:this.getLabel(_dfd),entity:this.getEntity(_dfd),version:this.getVersion(_dfd)};}return null;}});});},"Sage/Groups/main":function(){define(["Sage/Groups/GroupNavigator","Sage/Groups/GroupContextService","Sage/Groups/GroupLookup","Sage/Groups/GroupManager"],function(){});},"Sage/Groups/GroupNavigator":function(){define(["Sage/_Templated","dijit/_Widget","Sage/UI/ToolBarLabel","Sage/UI/ImageButton","Sage/Groups/GroupContextService","Sage/Services/ClientEntityContext","dojo/i18n!./nls/GroupNavigator","dojo/_base/lang","dojo/_base/declare","dojo/topic"],function(_dfe,_dff,_e00,_e01,_e02,_e03,nls,lang,_e04,_e05){var _e06=_e04("Sage.Groups.GroupNavigator",[_dff,_dfe],{widgetsInTemplate:true,firstText:"Move First",previousText:"Move Previous",nextText:"Move Next",lastText:"Move Last",listText:"List View",labelFmtText:"${0} of ${1}",noRecordsText:"No Records",id:"groupNavigator",_entityContextService:false,_groupContextService:false,_entityChangedHandle:false,_groupChangedHandle:false,widgetTemplate:new Simplate(["<span class=\"list-panel-tbar\">","<div id=\"{%= $.id %}-Start\" data-dojo-type=\"Sage.UI.ImageButton\" imageClass=\"icon_Start_16x16\" tooltip=\"{%= $.firstText %}\" alt=\"{%= $.firstText %}\" dojoAttachPoint=\"_firstButton\" dojoAttachEvent=\"onClick:_moveFirst\"></div>","<div id=\"{%= $.id %}-Previous\"  data-dojo-type=\"Sage.UI.ImageButton\" imageClass=\"icon_Browse_Previous_16x16\" tooltip=\"{%= $.previousText %}\" alt=\"{%= $.previousText %}\" dojoAttachPoint=\"_previousButton\" dojoAttachEvent=\"onClick:_movePrevious\"></div>","<div id=\"{%= $.id %}-Label\"  data-dojo-type=\"Sage.UI.ToolBarLabel\" label=\"\" dojoAttachPoint=\"_groupNavLabel\"></div>","<div id=\"{%= $.id %}-Next\"  data-dojo-type=\"Sage.UI.ImageButton\" imageClass=\"icon_Browse_Next_16x16\" tooltip=\"{%= $.nextText %}\" alt=\"{%= $.nextText %}\" dojoAttachPoint=\"_nextButton\" dojoAttachEvent=\"onClick:_moveNext\"></div>","<div id=\"{%= $.id %}-End\"  data-dojo-type=\"Sage.UI.ImageButton\" imageClass=\"icon_End_16x16\" tooltip=\"{%= $.lastText %}\" alt=\"{%= $.lastText %}\" dojoAttachPoint=\"_lastButton\" dojoAttachEvent=\"onClick:_moveLast\"></div>","<div id=\"{%= $.id %}-Switcher\"  data-dojo-type=\"Sage.UI.ImageButton\" imageClass=\"icon_Switch_to_List_View_16x16\" tooltip=\"{%= $.listText %}\" alt=\"{%= $.listText %}\" dojoAttachPoint=\"_listButton\" dojoAttachEvent=\"onClick:_moveToList\"></div>","</span>"]),startup:function(){this._setLabel();},destroy:function(){if(this._groupChangedHandle){dojo.disconnect(this._groupChangedHandle);this._groupChangedHandle=false;}this.inherited(arguments);},postMixInProperties:function(){this._entityContextService=Sage.Services.getService("ClientEntityContext");this._groupContextService=Sage.Services.getService("ClientGroupContext");lang.mixin(this,nls);},_setLabel:function(args){var _e07=this._getGroupContext(),_e08=_e07.CurrentEntityPosition,_e09=_e07.CurrentGroupCount,eCtx=this._entityContextService.getContext();this._enableButtons();if(this._groupNavLabel&&_e07){if(_e09===0){_e08=0;}var lbl=dojo.string.substitute(this.labelFmtText,[_e08,_e09]);this._groupNavLabel.set("label",lbl);if(_e08===0||_e08===1){this._previousButton.set("disabled",true);this._firstButton.set("disabled",true);}if(_e08===_e07.CurrentGroupCount||_e08===0){this._nextButton.set("disabled",true);this._lastButton.set("disabled",true);}}},_enableButtons:function(){this._nextButton.set("disabled",false);this._lastButton.set("disabled",false);this._previousButton.set("disabled",false);this._firstButton.set("disabled",false);},_moveFirst:function(){var _e0a=this._getGroupContext();var eCtx=this._entityContextService.getContext();if(_e0a.FirstEntityID!==""&&_e0a.FirstEntityID!=eCtx.EntityId){this._publishTopic("/group/nav/first",_e0a.FirstEntityID,eCtx.EntityId,_e0a.CurrentEntityPosition,_e0a.CurrentGroupCount);this._entityContextService.navigateSLXGroupEntity(_e0a.FirstEntityID,eCtx.EntityId);}},_movePrevious:function(){var _e0b=this._getGroupContext();var eCtx=this._entityContextService.getContext();if(_e0b.PreviousEntityID!==""&&_e0b.PreviousEntityID!=eCtx.EntityId){this._publishTopic("/group/nav/previous",_e0b.PreviousEntityID,eCtx.EntityId,_e0b.CurrentEntityPosition,_e0b.CurrentGroupCount);this._entityContextService.navigateSLXGroupEntity(_e0b.PreviousEntityID,eCtx.EntityId);}},_moveNext:function(){var _e0c=this._getGroupContext();var eCtx=this._entityContextService.getContext();if(_e0c.NextEntityID!==""&&_e0c.NextEntityID!=eCtx.EntityId){this._publishTopic("/group/nav/next",_e0c.NextEntityID,eCtx.EntityId,_e0c.CurrentEntityPosition,_e0c.CurrentGroupCount);this._entityContextService.navigateSLXGroupEntity(_e0c.NextEntityID,eCtx.EntityId);}},_moveLast:function(){var _e0d=this._getGroupContext();var eCtx=this._entityContextService.getContext();if(_e0d.LastEntityID!==""&&_e0d.LastEntityID!=eCtx.EntityId){this._publishTopic("/group/nav/last",_e0d.LastEntityID,eCtx.EntityId,_e0d.CurrentEntityPosition,_e0d.CurrentGroupCount);this._entityContextService.navigateSLXGroupEntity(_e0d.LastEntityID,eCtx.EntityId);}},_moveToList:function(){Sage.Link.toListView();},_getGroupContext:function(){return this._groupContextService.getContext();},_publishTopic:function(key,_e0e,_e0f,_e10,_e11){_e05.publish(key,{"toEntityId":_e0e,"fromEntityId":_e0f,"position":_e10,"count":_e11});}});return _e06;});},"Sage/Groups/GroupContextService":function(){define(["Sage/Utility","dojo/string","Sage/Data/SDataServiceRegistry","dojo/ready","dojo/_base/lang","dojo/_base/declare","dojo/_base/array"],function(_e12,_e13,_e14,_e15,lang,_e16,_e17){var _e18=_e16("Sage.Groups.GroupContextService",null,{_adHocGroupList:null,_connects:null,_subscribes:null,_emptyContext:null,_currentRequestHandle:null,_isAdHocGroupListRetrieved:false,constructor:function(){this._connects=[];this._subscribes=[];this._adHocGroupList=[];this._emptyContext={DefaultGroupID:null,CurrentGroupID:null,CurrentTable:null,CurrentName:null,CurrentEntity:null,CurrentFamily:null};this._isAdHocGroupListRetrieved=false;this._subscribes.push(dojo.subscribe(_e13.substitute("/ui/filters/default/refresh"),this,this._onDefaultFilterRefresh));_e15(lang.hitch(this,function(){if(!this.isContextRequired()){var _e19=_e12.getValue(window,"Sage.Groups._groupContext"),_e1a=_e12.getValue(window,"Sage.UI.DataStore.Filters");if(_e1a){if(_e19["AppliedFilterInfo"]){_e1a["default"]=this.createFilterExtendedSet(_e19["AppliedFilterInfo"]);}}}if(this.isContextRequired()){this.requestContext();}}));},createFilterExtendedSet:function(_e1b){var _e1c=_e1b["definitionSet"]||[],_e1d=_e1b["applied"]||[],_e1e={},_e1f={},_e20,_e21,i,j,_e22;for(i=0;i<_e1c.length;i++){_e20=_e1c[i];_e21={"$key":_e20["id"],"$partial":true,"filterName":_e20["filterName"],"displayName":_e20["displayName"],"propertyName":_e20["propertyName"],"propertyDataTypeId":_e20["propertyDataTypeId"],"details":{}};if(_e20["filterType"]=="rangeFilter"){_e21["details"]["rangeFilter"]={"characters":_e20["characters"]};}if(_e20["filterType"]=="lookupFilter"){_e21["details"]["lookupFilter"]={};}else{_e21["details"]["distinctFilter"]={};}_e1e[_e20["id"]]=_e21;}for(i=0;i<_e1d.length;i++){_e20=_e1d[i];_e21={};for(j=0;j<_e20["rangeValues"].length;j++){_e22=_e20["rangeValues"][j];_e21[_e22["rangeName"]]=lang.mixin({},_e22);}for(j=0;j<_e20["distinctValues"].length;j++){_e22=_e20["distinctValues"][j];if(typeof _e22==="string"){_e21[_e22]=_e22;}}for(j=0;j<_e20["lookupValues"].length;j++){var _e23=_e20["lookupValues"][j];_e21["value"]=_e23;}_e1f[_e20["id"]]=_e21;}return {"definitionSet":_e1e,"applied":_e1f};},destroy:function(){_e17.forEach(this._connects,function(_e24){dojo.disconnect(_e24);});this.unsubscribeConnects();this.uninitialize();},unsubscribeConnects:function(){_e17.forEach(this._subscribes,function(_e25){dojo.unsubscribe(_e25);});},uninitialize:function(){},isContextRequired:function(){var _e26=!(Sage&&Sage.Groups&&Sage.Groups._groupContext);return _e26;},createCompatibleContext:function(_e27){if(_e27["currentGroupId"]=="LOOKUPRESULTS"){_e27["currentName"]="Lookup Results";}var _e28={"AppliedFilterInfo":_e27["appliedFilterInfo"],"ContainsPositionState":_e27["containsPositionState"],"CurrentDisplayName":_e27["currentDisplayName"],"CurrentEntity":_e27["currentEntity"],"CurrentEntityID":_e27["currentEntityId"],"CurrentEntityPosition":_e27["currentEntityPosition"],"CurrentFamily":_e27["currentFamily"],"CurrentGroupCount":_e27["currentGroupCount"],"CurrentGroupID":_e27["currentGroupId"],"CurrentName":_e27["currentName"],"CurrentTable":_e27["currentTable"],"CurrentTableKeyField":_e27["currentTableKeyField"],"DefaultGroupID":_e27["defaultGroupId"],"FirstEntityID":_e27["firstEntityId"],"LastEntityID":_e27["lastEntityId"],"LookupLayoutGroupName":_e27["lookupLayoutGroupName"],"NextEntityID":_e27["nextEntityId"],"PreviousEntityID":_e27["previousEntityId"],"RetrievedOn":_e27["retrievedOn"],"isAdhoc":_e27["isAdHoc"]};if(!_e27["appliedFilterInfo"]){delete _e28.AppliedFilterInfo;}return _e28;},_onDefaultFilterRefresh:function(_e29,_e2a,_e2b){var _e2c=this.getContext(),_e2d=_e14.getSDataService("system"),_e2e={"$name":"applyFilterToGroup","request":{"groupId":_e2c["CurrentGroupID"],"filter":dojo.toJson(_e2b.createValueSet())}};if((_e2c["CurrentGroupID"]===null)||(_e2c["CurrentGroupID"]==="")){return;}var _e2f=new Sage.SData.Client.SDataServiceOperationRequest(_e2d).setOperationName("applyFilterToGroup");_e2f.execute(_e2e,{});},getContext:function(){var _e30=Sage&&Sage.Groups&&Sage.Groups._groupContext;if(_e30){return _e30;}if(this.isContextRequired()){this.requestContext();}return this._emptyContext;},requestContext:function(_e31){if(this._currentRequestHandle){return;}var _e32=_e14.getSDataService("system"),_e33=new Sage.SData.Client.SDataServiceOperationRequest(_e32).setOperationName("getGroupContext");this._currentRequestHandle=_e33.execute({},{success:this._onRequestContextSuccess,failure:this._onRequestContextFailure,scope:this});},_onRequestContextSuccess:function(_e34){var _e35=_e34&&_e34["response"];if(_e35){this.setContext(this.createCompatibleContext(_e35));}this._currentRequestHandle=null;},_onRequestContextFailure:function(_e36,o){this._currentRequestHandle=null;},setContext:function(_e37){var _e38=Sage&&Sage.Groups;if(_e38&&_e37){lang.mixin(_e38._groupContext,_e37);this.onContextSet(_e38._groupContext);}},setCurrentGroup:function(_e39,_e3a){var _e3b=this.getContext();if(_e3b&&(_e3b["CurrentGroupID"]===_e39)){if(_e39==="LOOKUPRESULTS"){_e3b["currentName"]="Lookup Results";}if(_e39!=="LOOKUPRESULTS"){this.doNotFireGroupChangedEvent=true;}}if(_e39.length===12||_e39==="LOOKUPRESULTS"){var _e3c=_e14.getSDataService("system"),_e3d=new Sage.SData.Client.SDataServiceOperationRequest(_e3c).setOperationName("setGroupContext"),_e3e={request:{"currentGroupId":_e39,"currentName":"","currentFamily":""}};_e3d.execute(_e3e,{success:this._onSetContextRequestSuccess,failure:this._onSetContextRequestFailure,scope:this});}},_onSetContextRequestSuccess:function(_e3f){var _e40=_e3f&&_e3f["response"],_e41=_e40&&this.createCompatibleContext(_e40);if(_e41){this.setContext(_e41);}if(!this.doNotFireGroupChangedEvent){this.onCurrentGroupChanged({current:_e41});}this.doNotFireGroupChangedEvent=false;},_onSetContextRequestFailure:function(_e42,o){},onSuccessfulGroupChanged:function(data){var _e43=this.getContext();this.setContext(data);this.onCurrentGroupChanged({current:data,previous:_e43});},onCurrentGroupChanged:function(_e44){dojo.publish("/group/context/changed",[_e44,this]);if(_e44["current"]["AppliedFilterInfo"]){this.publishFiltersApplied(_e44["current"]["AppliedFilterInfo"]);}},publishFiltersApplied:function(_e45){if(_e45){_e15(lang.hitch(this,function(){var _e46=this.createFilterExtendedSet(_e45),_e47=_e12.getValue(window,"Sage.UI.DataStore.Filters");_e47["default"]=_e46;dojo.publish("/ui/filters/default/apply",[_e46["applied"],_e46["definitionSet"],this]);}));}},onContextSet:function(_e48){if(_e48&&_e48["AppliedFilterInfo"]){this.publishFiltersApplied(_e48["AppliedFilterInfo"]);}},getAdHocGroupList:function(_e49,_e4a){if(this._isAdHocGroupListRetrieved){_e49.call(_e4a||this,this._adHocGroupList);return;}var _e4b=new Sage.Data.BaseSDataStore({service:_e14.getSDataService("system"),resourceKind:"groups",include:[],select:["name","family","isHidden","isAdHoc","mainTable","keyField","entityName"]});Sage.Groups._groupContext.CurrentFamily=Sage.Groups._groupContext.CurrentFamily.toUpperCase();_e4b.fetch({query:dojo.string.substitute("upper(family) eq '${CurrentFamily}' and isAdHoc",Sage.Groups._groupContext),count:1000,sort:[{attribute:"name"}],start:0,onComplete:function(data){this._adHocGroupList=data;_e49.call(_e4a||this,this._adHocGroupList);this._isAdHocGroupListRetrieved=true;},scope:this});}});Sage.Services.addService("ClientGroupContext",new _e18());return _e18;});},"Sage/Services/ClientEntityContext":function(){define(["dojo/_base/declare"],function(_e4c){var _e4d=_e4c("Sage.Services.ClientEntityContext",null,{hasClearListener:false,tempContext:false,constructor:function(_e4e){this.inherited(arguments);dojo.mixin(this,_e4e);this.emptyContext={"EntityId":"","EntityType":"","Description":"","EntityTableName":""};},getContext:function(){if(this.tempContext){return this.tempContext;}if((Sage.Data)&&(Sage.Data.EntityContextStore)){return Sage.Data.EntityContextStore;}return this.emptyContext;},setContext:function(obj){Sage.Data.EntityContextStore=dojo.mixin(this.emptyContext,obj);this.onEntityContextChanged(Sage.Data.EntityContextStore);},setTemporaryContext:function(obj){this.tempContext=obj;},clearTemporaryContext:function(){this.tempContext=false;},navigateSLXGroupEntity:function(_e4f,_e50,_e51){if(Sage.Services){var mgr=Sage.Services.getService("ClientBindingManagerService");if((mgr)&&(!mgr.canChangeEntityContext())){return false;}var _e52=Sage.Services.getService("ClientContextService");if(_e52.containsKey("ClientEntityId")){_e52.setValue("ClientEntityId",_e4f);}else{_e52.add("ClientEntityId",_e4f);}_e50=(_e50)?_e50:Sage.Data.EntityContextStore.EntityId;if(_e52.containsKey("PreviousEntityId")){_e52.setValue("PreviousEntityId",_e50);}else{_e52.add("PreviousEntityId",_e50);}if(_e51){if(_e52.containsKey("ClientEntityPosition")){_e52.setValue("ClientEntityPosition",_e51);}else{_e52.add("ClientEntityPosition",_e51);}}if(!this.hasClearListener){Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(function(){if(Sage.Services){var _e53=Sage.Services.getService("ClientContextService");if(_e53.containsKey("PreviousEntityId")){_e53.remove("PreviousEntityId");}}});this.hasClearListener=true;}Sage.Data.EntityContextStore.EntityId=_e4f;Sage.Data.EntityContextStore.Description="";}if(window.TabControl){var _e54=TabControl.getState();if(_e54){_e54.clearUpdatedTabs();TabControl.updateStateProxy();}}__doPostBack("MainContent","");return true;},onEntityContextChanged:function(_e55){}});if(!Sage.Services.hasService("ClientEntityContext")){Sage.Services.addService("ClientEntityContext",new Sage.Services.ClientEntityContext());}return _e4d;});},"Sage/Groups/GroupLookup":function(){define(["dijit/_Widget","Sage/_Templated","dijit/Dialog","Sage/UI/ConditionManager","Sage/Data/SDataServiceRegistry","Sage/Groups/GroupContextService","dojo/_base/lang","dojo/_base/declare","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/array","dojo/topic","dojo/aspect","Sage/Data/GroupLayoutSingleton","Sage/Utility","dojo/_base/xhr","Sage/UI/Dialogs","dojo/i18n!./nls/GroupLookup"],function(_e56,_e57,_e58,_e59,_e5a,_e5b,lang,_e5c,_e5d,_e5e,_e5f,_e60,_e61,_e62,_e63,_e64,_e65){var _e66=_e5c("Sage.Groups.GroupLookupDialog",[_e56,_e57],{widgetsInTemplate:true,conditionMgr:false,title:"",widgetTemplate:new Simplate(["<div>","<div data-dojo-type=\"dijit.Dialog\" id=\"groupLookupDialog\" title=\"&nbsp;\" dojoAttachPoint=\"dlg\" >","</div>","</div>"]),constructor:function(o){},show:function(){if(this.conditionMgr){var _e67=Sage.Services.getService("UserOptions");if(_e67){_e67.get("defaultLookupCondition","DefaultLookupCondition",lang.hitch(this,function(_e68){this.conditionMgr.setFirstConditionValue("",_e68.value,"");}));}lang.mixin(this.dlg,new _e5d());this.dlg.createHelpIconByTopic("lookup");this.dlg.show();}},hide:function(){this.dlg.hide();},_setConditionMgrAttr:function(_e69){this.conditionMgr=_e69;dojo.place(this.conditionMgr.domNode,this.dlg.containerNode,"only");},_setTitleAttr:function(_e6a){this.title=_e6a;this.dlg.set("title",_e6a);}});var _e6b=_e5c("Sage.Groups.GroupLookup",null,{conditions:[],_layouts:{},_currentLayoutFamily:false,service:false,_dlgWindow:false,_conditionMgr:false,_doSearchConnection:false,_onSearchNavTo:false,_stayInDetailView:false,id:"GroupLookup",constructor:function(){this.isInitialized=false;this._loadUserOptions();_e5f.subscribe("userOptions/changed",lang.hitch(this,this._onUserOptionsChanged));},showLookup:function(opts){if(typeof opts==="undefined"){var cSvc=Sage.Services.getService("ClientGroupContext");this._currentLayoutFamily=cSvc.getContext().CurrentFamily;opts={family:this._currentLayoutFamily};}this._onSearchNavTo=(opts.returnTo)?opts.returnTo:false;if(!this._layouts.hasOwnProperty(opts.family)){this._currentLayoutFamily=opts.family;this._requestLayout({family:opts.family,success:this._showInitializedLookup});return;}if(this._currentLayoutFamily!==opts.family){this._currentLayoutFamily=opts.family;}this._resetConditionManager();this._showInitializedLookup();},_showInitializedLookup:function(){var svc=Sage.Services.getService("ClientEntityContext"),_e6c=svc&&svc.getContext(),_e6d=_e6c&&_e6c.DisplayName,_e6e=_e6c&&_e6c.EntityTableName,_e6f=this._layouts[this._currentLayoutFamily]["mainTable"],_e70=this._layouts[this._currentLayoutFamily]["entityName"];if(!this._dlgWindow){this._dlgWindow=new _e66({conditionMgr:this._conditionMgr});}if(!this._dlgWindow.conditionMgr){this._dlgWindow.set("conditionMgr",this._conditionMgr);}if(_e6e!==_e6f){_e6d=_e70;}this._dlgWindow.set("title",_e6d);this._dlgWindow.show();},doLookup:function(args){var _e71=Sage.Services.getService("ClientGroupContext");var _e72=_e71.getContext();var _e73=dijit.byId("GroupList");if(_e73){_e73.previousGroupId=_e72.CurrentGroupID;}this._ensureService();this._dlgWindow.hide();var _e74=new Sage.SData.Client.SDataServiceOperationRequest(this.service);_e74.setOperationName("setGroupLookupConditions");_e74.execute({request:{family:this._currentLayoutFamily,conditions:this.getConditionsString(),includeConditionsFrom:""}},{success:function(_e75){var _e76=this._shouldStayInDetailView();var _e77=_e62.getModeId();if(this._getGroupCount()===0){_e64.showInfo(_e65.txtNoRecordsFound);return;}var _e78=this._onSearchNavTo+"?modeid=list&gid=LOOKUPRESULTS",path=document.location.toString().toLowerCase(),comp=this._onSearchNavTo&&this._onSearchNavTo.toLowerCase();if(_e72.CurrentFamily&&this._currentLayoutFamily&&_e72.CurrentFamily.toUpperCase()===this._currentLayoutFamily.toUpperCase()){_e60.after(_e71,"onCurrentGroupChanged",lang.hitch(this,function(){_e5f.publish("/group/lookup/success",{"conditions":this.getConditionsString()});if(!_e76&&_e77==="detail"){Sage.Link.toListView();}}));if(_e73&&!_e76){_e73.shouldNotUpdate=true;}if(_e73){_e73.performingLookup=true;}_e71.setCurrentGroup("LOOKUPRESULTS");}if(this._onSearchNavTo){if(path.indexOf(comp)===-1){document.location=_e78;return;}}},scope:this});},resetLookup:function(data){},getConditionsString:function(){return this._conditionMgr.getConditionsJSON();},_ensureService:function(){if(!this.service){this.service=_e5a.getSDataService("system");}},_requestLayout:function(_e79){this._ensureService();if(!_e79.family){var _e7a=Sage.Services.getService("ClientGroupContext");_e79.family=_e7a.getContext().CurrentFamily||"ACCOUNT";}var _e7b=dojo.string.substitute("name eq 'Lookup Results' and upper(family) eq '${0}'",[_e79.family.toUpperCase()]),_e7c=lang.hitch(this,this._onReadSuccess,_e79),_e7d=new _e61();_e7d.getGroupLayout(_e7b,_e7c,null,"LOOKUPRESULTS");},_onReadSuccess:function(_e7e,data){this._layouts[_e7e.family]=data;this._currentLayoutFamily=_e7e.family;this._resetConditionManager();if(typeof _e7e.success==="function"){_e7e.success.call(_e7e.scope||this,data);}},_resetConditionManager:function(){if(!this._currentLayoutFamily){return;}if(this._conditionMgr){this._conditionMgr.destroy(false);this._conditionMgr=null;}var _e7f=_e5e.filter(this._layouts[this._currentLayoutFamily]["layout"],function(_e80){return _e80.caption&&_e80.caption!==""&&_e80.visible;});_e7f=_e5e.map(_e7f,function(_e81){if(_e81.format&&_e81.format==="None"){_e81.format=_e81.fieldType;}return _e81;});this._conditionMgr=new _e59({fields:_e7f,fieldNameProperty:"alias",fieldDisplayNameProperty:"caption",fieldTypeProperty:"format",id:this.id+"-ConditionManager"});if(this._dlgWindow){this._dlgWindow.set("conditionMgr",this._conditionMgr);}this._doSearchConnection=dojo.connect(this._conditionMgr,"onDoSearch",this,"doLookup");},destroy:function(){if(this._doSearchConnection){dojo.disconnect(this._doSearchConnection);this._doSearchConnection=false;}this.inherited(arguments);},_onUserOptionsChanged:function(_e82){this._stayInDetailView=_e82.groupLookup.stayInDetailView;},_loadUserOptions:function(){var svc=Sage.Services.getService("UserOptions");if(svc){svc.get("StayInDetailView","GroupLookup",lang.hitch(this,function(_e83){if(_e83&&_e83.value){this._stayInDetailView=(_e83.value==="T")?true:false;}}),null,null,true);}},_shouldStayInDetailView:function(){var _e84=_e62.getModeId();return (_e84==="detail"&&this._stayInDetailView);},_getGroupCount:function(){var _e85=this._currentLayoutFamily;var _e86=0;if(_e85){var url="slxdata.ashx/slx/system/-/groups(name eq 'Lookup Results' and upper(family) eq '"+_e85+"')/$queries/execute?count=0&format=json";_e63("GET",{url:url,handleAs:"json",sync:true,preventCache:true}).then(function(data){_e86=data.$totalResults;});}return _e86;}});Sage.Services.addService("GroupLookupManager",new Sage.Groups.GroupLookup());return _e6b;});},"Sage/Groups/GroupManager":function(){define(["Sage/UI/Dialogs","Sage/Utility/Email","dojo/string","Sage/Groups/GroupContextService","dojox/storage/LocalStorageProvider","dojo/_base/array","dojo/_base/lang","dojo/i18n","dojo/i18n!./nls/GroupManager","Sage/Data/SDataServiceRegistry","dojo/_base/xhr","dojo/topic","dojo/aspect"],function(_e87,_e88,_e89,_e8a,_e8b,_e8c,lang,i18n,nls,_e8d,xhr,_e8e,_e8f){Sage.namespace("Sage.Groups.GroupManager");Sage.Groups.GroupManager={CurrentUserID:"",SortCol:-1,SortDir:"ASC",GMUrl:"SLXGroupBuilder.aspx?method=",GroupXML:"",resources:nls,LOCALSTORE_NAMESPACE:"SageGroups",QB_WIDTH:840,QB_HEIGHT:710,GetFromServer:function(url,_e90,_e91,_e92,sync){var args={url:url,sync:sync||false,handleAs:_e90||"text",headers:{"Content-Type":"application/xml"},preventCache:true,load:_e91,error:_e92};return dojo.xhrGet(args);},ClearLocalStorage:function(){var _e93=new _e8b();_e93.initialize();_e93.clear(Sage.Groups.GroupManager.resources.LOCALSTORE_NAMESPACE);window.location.reload(true);},ClearLocalStorageForGroup:function(_e94){var _e95=new _e8b();_e95.initialize();_e8c.forEach(_e95.getNamespaces(),function(item){if(item.indexOf(_e94)>-1){_e95.clear(item);}});sessionStorage.removeItem("GROUPLAYOUT_"+_e94);sessionStorage.removeItem("hidden_filters_"+_e94);sessionStorage.removeItem("METADATA_FILTERS_"+_e94);window.location.reload(true);},PostToServer:function(url,data,_e96,_e97){var args={url:url,postData:data,handleAs:"text",headers:{"Content-Type":"application/xml"},load:function(data){if(typeof _e96==="function"){_e96(data);}},error:function(err){if(typeof _e97==="function"){_e97(err);}}};return dojo.xhrPost(args);},GetCurrentGroupInfo:function(){var _e98=Sage.Services.getService("ClientGroupContext");if(_e98){var _e99=_e98.getContext();return {"Name":_e99.CurrentName,"Family":_e99.CurrentFamily,"Id":_e99.CurrentGroupID,"isAdhoc":_e99.isAdhoc,"Entity":_e99.CurrentEntity};}return "";},CreateGroup:function(mode){if(typeof mode==="undefined"||mode===""){mode=Sage.Groups.GroupManager.GetCurrentGroupInfo().Family;}var vURL="QueryBuilderMain.aspx?mode="+mode,_e9a=Sage.Groups.GroupManager.QB_WIDTH,_e9b=Sage.Groups.GroupManager.QB_HEIGHT;window.open(vURL,"GroupViewer",_e89.substitute("resizable=yes,centerscreen=yes,width=${width},height=${height},status=no,toolbar=no,scrollbars=yes",{width:_e9a,height:_e9b}));},DeleteGroup:function(_e9c,_e9d){if(typeof _e9c==="undefined"||_e9c===""){_e9c=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id;}var msg=(_e9d)?_e89.substitute(Sage.Groups.GroupManager.resources.ConfirmDeleteFmtMessage,[_e9d]):Sage.Groups.GroupManager.resources.ConfirmDeleteMessage;_e87.raiseQueryDialog("",msg,function(_e9e){if(_e9e===true){Sage.Groups.GroupManager.GetFromServer(Sage.Groups.GroupManager.GMUrl+"DeleteGroup&gid="+_e9c,"text",function(){var url=document.location.href.replace("#","");if(url.indexOf("?")>-1){var _e9f=url.split("?");url=_e9f[0];}document.location=url;},function(req){});}},Sage.Groups.GroupManager.resources.yesCaption,Sage.Groups.GroupManager.resources.noCaption);},EditGroup:function(_ea0){var _ea1=Sage.Groups.GroupManager.GetCurrentGroupInfo();if(typeof _ea0==="undefined"||_ea0===""){_ea0=_ea1.Id;}var url=_e89.substitute("QueryBuilderMain.aspx?gid=${groupid}&mode=${md}",{groupid:_ea0,md:_ea1.Family}),_ea2=Sage.Groups.GroupManager.QB_WIDTH,_ea3=Sage.Groups.GroupManager.QB_HEIGHT;window.open(url,"EditGroup",_e89.substitute("resizable=yes,centerscreen=yes,width=${width},height=${height},status=no,toolbar=no,scrollbars=yes",{width:_ea2,height:_ea3}));},CopyGroup:function(_ea4){var _ea5=Sage.Groups.GroupManager.GetCurrentGroupInfo();if(typeof _ea4==="undefined"||_ea4===""){_ea4=_ea5.Id;}var vURL=["QueryBuilderMain.aspx?gid=",_ea4,"&action=copy","&mode=",_ea5.Family].join(""),_ea6=Sage.Groups.GroupManager.QB_WIDTH,_ea7=Sage.Groups.GroupManager.QB_HEIGHT;window.open(vURL,"EditGroup",_e89.substitute("resizable=yes,centerscreen=yes,width=${width},height=${height},status=no,toolbar=no,scrollbars=yes",{width:_ea6,height:_ea7}));},ListGroupsAsSelect:function(_ea8){var _ea9=_ea8;if(!dojo.isString(_ea9)||_ea9.length===0){_ea9=Sage.Groups.GroupManager.GetCurrentGroupInfo().Family;if(!dojo.isString(_ea9)||_ea9.length===0){return "";}}var sUrl=Sage.Groups.GroupManager.GMUrl+"GetGroupList&entity="+_ea9;var _eaa="";Sage.Groups.GroupManager.GetFromServer(sUrl,"text",function(data){_eaa=data;},function(err){if(typeof console!=="undefined"){console.error(err);}},true);var _eab=getXMLDoc(_eaa);if(_eab){var _eac=_eab.getElementsByTagName("GroupInfo");if(!_eac){return "";}var _ead="";for(var i=0;i<_eac.length;i++){_ead+="<option value = '"+_eac[i].getElementsByTagName("GroupID")[0].firstChild.nodeValue+"'>"+_eac[i].getElementsByTagName("DisplayName")[0].firstChild.nodeValue+"</option>";}return _ead;}return "";},GetGroupId:function(name){var _eae="";Sage.Groups.GroupManager.GetFromServer(Sage.Groups.GroupManager.GMUrl+"GetGroupId&name="+encodeURIComponent(name),"text",function(data){_eae=data;},function(err){console.error(err);},true);return _eae;},HideGroup:function(_eaf,_eb0){if(typeof _eaf==="undefined"||_eaf===""){_eaf=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id;}Sage.Groups.GroupManager.PostToServer(Sage.Groups.GroupManager.GMUrl+"HideGroup&gid="+_eaf,"",lang.hitch(this,Sage.Groups.GroupManager._HideOrShowComplete,_eb0,_eaf));},_HideOrShowComplete:function(_eb1,_eb2){var _eb3,_eb4,_eb5,_eb6;if(_eb1){return;}_eb5=function(){if(_eb6&&_eb6.remove){_eb6.remove();}var _eb7=dijit.byId("titlePane");if(_eb7){_eb7.resetConfiguration();}};_eb3=Sage.Services.getService("ClientGroupContext");_eb4=_eb3&&_eb3.getContext();_eb6=_e8f.after(_eb3,"onCurrentGroupChanged",_eb5);if(!Sage.Groups.GroupManager._isDefaultGroup(_eb2)&&_eb4.CurrentGroupID===_eb2){_eb3.setCurrentGroup(_eb4.DefaultGroupID);}else{if(Sage.Groups.GroupManager._isDefaultGroup(_eb2)&&_eb4.CurrentGroupID===_eb2){_eb3.setCurrentGroup("LOOKUPRESULTS");}else{_eb5.call();}}},_isDefaultGroup:function(_eb8){var _eb9,_eba,_ebb;_ebb=false;_eb9=Sage.Services.getService("ClientGroupContext");if(_eb9){_eba=_eb9.getContext();if(_eba){_ebb=_eba.DefaultGroupID===_eb8;}}return _ebb;},UnHideGroup:function groupmanager_(_ebc,_ebd){if(typeof _ebc==="undefined"||_ebc===""){_ebc=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id;}Sage.Groups.GroupManager.GetFromServer(Sage.Groups.GroupManager.GMUrl+"UnHideGroup&gid="+_ebc,"",lang.hitch(this,Sage.Groups.GroupManager._HideOrShowComplete,_ebd,_ebc));},ShowGroups:function(_ebe){if(typeof _ebe==="undefined"||_ebe===""){_ebe=Sage.Groups.GroupManager.GetCurrentGroupInfo().Family;}var vURL="ShowGroups.aspx?tablename="+_ebe;window.open(vURL,"ShowGroups","resizable=yes,centerscreen=yes,width=800,height=646,status=no,toolbar=no,scrollbars=yes");},CreateAdHocGroup:function(_ebf,_ec0,_ec1,_ec2){var vURL=[Sage.Groups.GroupManager.GMUrl,"CreateAdHocGroup","&name=",encodeURIComponent(_ec0),"&family=",_ec1,"&layoutid=",encodeURIComponent(_ec2)].join();return Sage.Groups.GroupManager.PostToServer(vURL,_ebf);},EditAdHocGroupAddMember:function(_ec3,_ec4){if(typeof _ec3==="undefined"||_ec3===""){_ec3=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id;}var x=Sage.Groups.GroupManager.GetFromServer(Sage.Groups.GroupManager.GMUrl+"EditAdHocGroupAddMember&groupid="+_ec3+"&entityid="+_ec4);},EditAdHocGroupDeleteMember:function(_ec5,_ec6){if(typeof _ec5==="undefined"||_ec5===""){_ec5=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id;}var x=Sage.Groups.GroupManager.GetFromServer(Sage.Groups.GroupManager.GMUrl+"EditAdHocGroupDeleteMember&groupid="+_ec5+"&entityid="+_ec6);},SetDefault:function(_ec7,name,_ec8){Sage.Groups.GroupManager._saveGroupUserOptions(name,_ec8,"DEFAULTGROUP");},SetLookupLayout:function(_ec9,name,_eca){Sage.Groups.GroupManager._saveGroupUserOptions(name,_eca,"LOOKUPLAYOUTGROUP");},_saveGroupUserOptions:function(name,_ecb,_ecc){var _ecd=Sage.Groups.GroupManager.GetCurrentGroupInfo(),_ece=_ecd.Name,_ecf=_ecd.Family,_ed0=name||_ece,_ed1=_ecb;var svc=Sage.Services.getService("UserOptions");if(svc){svc.set(_ecb,_ecc,_e89.substitute("${0}:${1}",[_ed1,_ed0]));}},IsAdHoc:function(_ed2){alert("not implemented in this object yet...");},ExportGroup:function(_ed3,_ed4){_e87.showInfo(Sage.Groups.GroupManager.resources.exportToExcel);},ShareGroup:function(_ed5){if(typeof _ed5==="undefined"||_ed5===""){_ed5=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id;}var vURL="ShareGroup.aspx?gid="+_ed5;window.open(vURL,"ShareGroup","resizable=yes,centerscreen=yes,width=500,height=450,status=no,toolbar=no,scrollbars=yes");},GetGroupSQL:function(_ed6,_ed7,_ed8,_ed9){var _eda=_ed6;if(!dojo.isString(_eda)||_eda.length===0){_eda=Sage.Groups.GroupManager.GetCurrentGroupInfo().Id;if(!dojo.isString(_eda)||_eda.length===0){return "";}}var sUrl=Sage.Groups.GroupManager.GMUrl+"GetGroupSQL&gid="+_eda;if(typeof _ed7!=="undefined"){if(dojo.isString(_ed7)){if((_ed7==="true")||(_ed7==="false")){sUrl+="&UseAliases="+_ed7;}}else{if(typeof _ed7==="boolean"){sUrl+="&UseAliases="+_ed7.toString();}}}if(dojo.isString(_ed8)&&_ed8.length>0){sUrl+="&parts="+_ed8;}if(typeof _ed9!=="undefined"){if(dojo.isString(_ed9)){if((_ed9==="true")||(_ed9==="false")){sUrl+="&ApplyFilters="+_ed9;}}else{if(typeof _ed9==="boolean"){sUrl+="&ApplyFilters="+_ed9.toString();}}}var _edb="";Sage.Groups.GroupManager.GetFromServer(sUrl,"text",function(data){_edb=data;},function(err){if(typeof console!=="undefined"){console.error(err);}},true);return _edb;},GetGroupSQLFromXML:function(_edc,_edd,_ede){Sage.Groups.GroupManager.PostToServer(Sage.Groups.GroupManager.GMUrl+"GetGroupSQL",_edc,_edd,_ede);},GetGroupSQLById:function(_edf,_ee0,_ee1){var url=Sage.Groups.GroupManager.GMUrl+"GetGroupSQL&gid="+_edf;Sage.Groups.GroupManager.GetFromServer(url,"json",_ee0,_ee1);},saveSelectionsAsNewGroup:function(){var _ee2=Sage.Utility.getSelectionInfo();if(!_ee2||_ee2.selectionCount===0){if(_ee2.recordCount<1){_e87.showInfo(Sage.Groups.GroupManager.resources.noRecordsInGroup,Sage.Groups.GroupManager.resources.noneSelectedTitle);}else{var _ee3=_e89.substitute(Sage.Groups.GroupManager.resources.noneSelectedPromptFmt,[_ee2.recordCount]);_e87.raiseQueryDialog(Sage.Groups.GroupManager.resources.noneSelectedTitle,_ee3,function(_ee4){if(_ee4===true){Sage.Groups.GroupManager.promptForName("");}},Sage.Groups.GroupManager.resources.yesCaption,Sage.Groups.GroupManager.resources.noCaption);}}else{Sage.Groups.GroupManager.promptForName("");}},promptForName:function(_ee5,_ee6){var _ee7=Sage.Utility.getSelectionInfo();var _ee8=(_ee7.selectionCount===0)?_ee7.recordCount:_ee7.selectionCount;var _ee9=_e89.substitute(Sage.Groups.GroupManager.resources.newGroupNamePrompt,[_ee8,_ee5||""]);_e87.raiseInputDialogExt({title:Sage.Groups.GroupManager.resources.newGroupTitle,query:_ee9,callbackFn:function(_eea,name){if(_eea===true){if(name===""){window.setTimeout(function(){Sage.Groups.GroupManager.promptForName(Sage.Groups.GroupManager.resources.newGroupRePrompt,name);},100);}else{if(name.match(/[\/\\:\*\?"<\>|\.'\r\n]/)!==null){window.setTimeout(function(){Sage.Groups.GroupManager.promptForName(Sage.Groups.GroupManager.resources.invalidCharMsg,name);},100);}else{Sage.Groups.GroupManager.saveNewGroupPost(name);}}}},yesText:Sage.Groups.GroupManager.resources.okCaption,noText:Sage.Groups.GroupManager.resources.cancelCaption,defaultValue:_ee6||"",closable:true});},saveNewGroupPost:function(name,_eeb){var _eec=Sage.Utility.getSelectionInfo(),_eed=_e8d.getSDataService("system"),_eee=new Sage.SData.Client.SDataSingleResourceRequest(_eed),_eef=Sage.Services.getService("ClientGroupContext").getContext(),_ef0=_eef.CurrentFamily,_ef1=_eef.CurrentGroupID,_ef2={},copy=false;_eee.setResourceKind("groups");if(_eec.selectionCount===0){copy=true;}_ef2={family:_ef0,name:name,adHocIds:_eec.selectedIds};_eee.create(_ef2,{success:function(_ef3){if(copy){Sage.Groups.GroupManager.copyFromGroup(_ef1,_ef3.$key);}else{Sage.Groups.GroupManager.newGroupCreated();}},failure:function(){},scope:this});},removeSelectionsFromGroup:function(){var _ef4=Sage.Utility.getSelectionInfo();if(_ef4.selectionCount===0){if(_ef4.recordCount<1){_e87.showInfo(Sage.Groups.GroupManager.resources.noRecordsInGroup,Sage.Groups.GroupManager.resources.noneSelectedTitle);}else{var _ef5=_e89.substitute(Sage.Groups.GroupManager.resources.noneSelectedRemovePromptFmt,[_ef4.recordCount]);_e87.raiseQueryDialog(Sage.Groups.GroupManager.resources.noneSelectedTitle,_ef5,function(_ef6){if(_ef6===true){Sage.Groups.GroupManager.removeConfirmed();}},Sage.Groups.GroupManager.resources.yesCaption,Sage.Groups.GroupManager.resources.noCaption);}}else{Sage.Groups.GroupManager.removeConfirmed();}},removeConfirmed:function(){var _ef7=Sage.Utility.getSelectionInfo(),_ef8=Sage.Services.getService("ClientGroupContext").getContext(),_ef9=_ef8.CurrentFamily,name=_ef8.CurrentName,_efa=_ef8.CurrentGroupID;Sage.Groups.GroupManager.removeIds(_efa,name,_ef9,_ef7.selectedIds,function(){Sage.Groups.GroupManager.refreshListView();},function(err){console.error(err);},this);},removeIds:function(_efb,_efc,_efd,ids,_efe,_eff,_f00){var _f01=_e8d.getSDataService("system"),_f02=new Sage.SData.Client.SDataServiceOperationRequest(_f01),_f03,_f04,_f05=[];_f02.setResourceKind("groups");if(ids&&ids.length>0){_f02.setOperationName("removeAdHocIds");_f05=ids;}else{_f02.setOperationName("removeAllAdHocIds");_f05.push(ids);}_f03={"$name":"removeAdHocIds",request:{groupId:_efb,groupName:_efc,family:_efd,adHocIds:ids}};_f04=lang.hitch(this,function(){_e8e.publish("/group/adhoc/removed",{"groupId":_efb,"groupName":_efc,"family":_efd,"ids":_f05});if(_efe){_efe.call(arguments);}});_f02.execute(_f03,{success:_f04,failure:_eff,scope:_f00||this});},addSelectionsToGroup:function(_f06){var _f07=Sage.Utility.getCurrentEntityId();if(_f07!==""){Sage.Groups.GroupManager.postAddToGroup(_f06,{selectedIds:[_f07],selectionCount:1});}else{var _f08=Sage.Utility.getSelectionInfo();if(_f08.selectionCount===0){if(_f08.recordCount<1){_e87.showInfo(Sage.Groups.GroupManager.resources.noRecordsInGroup,Sage.Groups.GroupManager.resources.noneSelectedTitle);}else{var _f09=_e89.substitute(Sage.Groups.GroupManager.resources.noneSelectedPromptFmt,[_f08.recordCount]);_e87.raiseQueryDialog(Sage.Groups.GroupManager.resources.noneSelectedTitle,_f09,function(_f0a){if(_f0a===true){Sage.Groups.GroupManager.addConfirmed(_f06);}},Sage.Groups.GroupManager.resources.yesCaption,Sage.Groups.GroupManager.resources.noCaption);}}else{Sage.Groups.GroupManager.addConfirmed(_f06);}}},copyFromGroup:function(_f0b,_f0c){var _f0d=Sage.Utility.getSelectionInfo(),_f0e=_e8d.getSDataService("system"),_f0f=new Sage.SData.Client.SDataServiceOperationRequest(_f0e),_f10=Sage.Services.getService("ClientGroupContext").getContext(),_f11=_f10.CurrentFamily,name=_f10.CurrentName,_f12;_f0f.setResourceKind("groups");_f0f.setOperationName("addAdHocIdsFrom");_f12={"$name":"addAdHocIdsFrom",request:{groupId:_f0c,groupName:name,family:_f11,fromGroupId:_f0b}};_f0f.execute(_f12,{success:function(){var _f13=Sage.Services.getService("ClientGroupContext");if(_f13){var _f14=dijit.byId("titlePane");if(_f14){_f14.resetConfiguration();}_f13.setCurrentGroup(_f0c);}},failure:function(){},scope:this});},addConfirmed:function(_f15){var _f16=Sage.Utility.getSelectionInfo();Sage.Groups.GroupManager.postAddToGroup(_f15,_f16);},postAddToGroup:function(_f17,_f18){var _f19=_e8d.getSDataService("system"),_f1a=new Sage.SData.Client.SDataServiceOperationRequest(_f19),_f1b=Sage.Services.getService("ClientGroupContext").getContext(),_f1c=_f1b.CurrentFamily,_f1d=_f1b.CurrentGroupID,_f1e,_f1f="addAdHocIds";if(_f18.selectionCount===0){Sage.Groups.GroupManager.copyFromGroup(_f1d,_f17);return;}_f1a.setResourceKind("groups");_f1a.setOperationName(_f1f);_f1e={"$name":_f1f,request:{groupId:_f17,family:_f1c,adHocIds:_f18.selectedIds}};_f1a.execute(_f1e,{success:function(){},failure:function(){},scope:this});},saveLookupAsGroup:function(obj,e,msg){if(typeof (msg)==="undefined"){msg=Sage.Groups.GroupManager.resources.groupNameText;}_e87.raiseInputDialogExt({title:Sage.Groups.GroupManager.resources.saveLookupDlgTitle,query:msg,callbackFn:function(_f20,name){if(_f20===true){if(name===""){window.setTimeout(function(){Sage.Groups.GroupManager.saveLookupAsGroup(Sage.Groups.GroupManager.resources.newGroupRePrompt);},100);}else{if(name.match(/\'|\"|\/|\\|\*|\:|\?|<|\>/)!==null){window.setTimeout(function(){Sage.Groups.GroupManager.promptForName(Sage.Groups.GroupManager.resources.invalidCharMsg);},100);}else{var _f21="slxdata.ashx/slx/crm/-/groups/adhoc?action=SaveLookupAsGroup&name="+encodeURIComponent(name);xhr.post({url:_f21,handleAs:"text",content:{},load:Sage.Groups.GroupManager.newGroupCreated,error:Sage.Groups.GroupManager.handleAjaxError});}}}},yesText:Sage.Groups.GroupManager.resources.okCaption,noText:Sage.Groups.GroupManager.resources.cancelCaption,defaultValue:"",closable:true});},handleAjaxError:function(_f22){if(typeof _f22!="undefined"){if(_f22.responseXML){var _f23=_f22.responseXML.getElementsByTagName("sdata:message");if(_f23.length>0){_e87.showError(_f23[0].text||_f23[0].textContent,"");}}else{_e87.alert("an unidentified exception has occured");}}},newGroupCreated:function(){Sage.Link.toListView();},refreshListView:function(){var _f24=dijit.byId("list");if(_f24){_f24.refreshList();}},emailSelectionsFromGroup:function(){var _f25,body,_f26,_f27;_f25="";body="";_f26=0;_f27="Email";_e88.writeEmailToGroupSelection(_f25,body,_f26,_f27);}};window.groupManager=Sage.Groups.GroupManager;return window.groupManager;});},"Sage/Utility/Email":function(){define(["Sage/Utility","Sage/Data/SDataServiceRegistry","Sage/UI/Dialogs","dojo/parser","dojox/validate/regexp","dojo/i18n!./nls/Email","dojo/has"],function(_f28,_f29,_f2a,_f2b,_f2c,nls,has){Sage.namespace("Utility.Email");dojo.mixin(Sage.Utility.Email,{resources:nls,writeEmail:function(_f2d,_f2e,body,_f2f,_f30){if(dojo.isString(_f2d)&&(_f2d.length>0)){if((_f2d.indexOf("{",0)===0)&&(_f2d.lastIndexOf("}")==_f2d.length-1)){try{var _f31=dojo.fromJson(_f2d);if(dojo.isObject(_f31)){_f2d=_f31;}}catch(e){_f2a.showError(dojo.substitute(_f28.Email.resources.RecipientInfoError,[e.message]));if(typeof console!=="undefined"){console.error("There was an error attempting to parse the recipient data as JSON: %o",e);console.error("recipient parameter: %o",_f2d);}return;}}else{if((_f2d.indexOf("[",0)===0)&&(_f2d.lastIndexOf("]")===_f2d.length-1)){_f2d=eval(_f2d);}}}var self=this;require(["Sage/MailMerge/Helper","Sage/MailMerge/Service"],function(_f32,_f33){var _f34=0;if(typeof _f30!=="undefined"){if(!isNaN(_f30)){if(Number(_f30)==1){_f34=1;}}}var _f35=3,olCC=2,olTo=1;var _f36=["to","cc","bcc"];var _f37=0;var _f38=(dojo.isArray(_f2d))?"array":typeof _f2d;var _f39=(_f38!=="undefined")&&(_f2d!==null);var _f3a={"to":[],"cc":[],"bcc":[]};var _f3b=function(type,_f3c,_f3d,_f3e){if(self.isValidEmailAddress(_f3e||"")){var _f3f=function(_f40){_f40.push({"firstName":_f3c||"","lastName":_f3d||"","emailAddress":_f3e||""});};switch(type){case olCC:_f3f(_f3a.cc);break;case _f35:_f3f(_f3a.bcc);break;default:_f3f(_f3a.to);break;}}else{if(typeof console!=="undefined"){}}};if(_f39){var _f41=function(type,_f42){if(dojo.isObject(_f42)){_f3b(type,_f42.firstName||"",_f42.lastName||"",_f42.emailAddress||"");}};switch(_f38){case "string":if(_f2d!==""){_f3b(olTo,"","",_f2d);}break;case "array":dojo.forEach(_f2d,function(_f43){if(dojo.isString(_f43)){_f3b(olTo,"","",_f43);}else{if(dojo.isObject(_f43)){_f41(olTo,_f43);}}});break;case "object":_f37=0;dojo.forEach(_f36,function(prop){_f37++;if(_f2d.hasOwnProperty(prop)){switch((dojo.isArray(_f2d[prop]))?"array":typeof _f2d[prop]){case "string":_f3b(_f37,"","",_f2d[prop]);break;case "array":dojo.forEach(_f2d[prop],function(obj){if(dojo.isString(obj)){_f3b(_f37,"","",obj);}else{if(dojo.isObject(obj)){_f41(_f37,obj);}}});break;case "object":_f41(_f37,_f2d[prop]);break;}}});break;}}_f2d=undefined;var _f44=function(obj1,obj2){var _f45;switch(_f34){case 1:_f45=(obj1.lastName||"").toLocaleUpperCase().localeCompare((obj2.lastName||"").toLocaleUpperCase());if(_f45===0){_f45=(obj1.firstName||"").toLocaleUpperCase().localeCompare((obj2.firstName||"").toLocaleUpperCase());}break;default:_f45=(obj1.firstName||"").toLocaleUpperCase().localeCompare((obj2.firstName||"").toLocaleUpperCase());if(_f45===0){_f45=(obj1.lastName||"").toLocaleUpperCase().localeCompare((obj2.lastName||"").toLocaleUpperCase());}}return _f45;};var _f46=(dojo.isString(_f2e))?_f2e:"";var _f47=(dojo.isString(body))?body:"";var _f48=_f3a.to.length+_f3a.cc.length+_f3a.bcc.length;_f39=(_f48>0);var _f49=_f32.GetDesktopService(false);if(_f49){if(typeof _f49.MailMergeGUI!=="undefined"){if(typeof _f49.MailMergeGUI().OutlookIsAvailable!=="undefined"&&_f49.MailMergeGUI().OutlookIsAvailable){var _f4a=_f49.NewActiveXObject("SLXMMGUIW.MultidimensionalArray");var _f4b=4;_f4a.Resize(0,_f4b);if(_f39){_f4a.Resize(_f48,_f4b);_f37=0;var iRow=0;dojo.forEach(_f36,function(prop){_f37++;var _f4c=_f3a[prop];if(dojo.isArray(_f4c)&&_f4c.length>0){_f4c.sort(_f44);dojo.forEach(_f4c,function(obj){_f4a.SetValue(iRow,0,obj.firstName||"");_f4a.SetValue(iRow,1,obj.lastName||"");_f4a.SetValue(iRow,2,obj.emailAddress||"");_f4a.SetValue(iRow,3,_f37);iRow++;});}});}_f49.MailMergeGUI().WriteEmailEx(_f4a,_f46,_f47,_f34);return;}else{if(typeof console!=="undefined"){if(typeof _f49.MailMergeGUI().OutlookIsAvailable==="undefined"){console.error("The request to e-mail could not be processed by Desktop Integration. An older version of SLXMMGUIW.DLL appears to be installed.");}else{}}}}}var _f4d=function(_f4e,_f4f,_f50){var _f51="";var _f52=_f4e||"";var _f53=_f4f||"";var _f54=_f50||"";if(_f52!==""&&_f53!==""){switch(_f34){case 1:_f51=_f53+", "+_f52;break;default:_f51=_f52+" "+_f53;break;}}else{if(_f53===""&&_f52!==""){_f51=_f52;}else{if(_f53!==""&&_f52===""){_f51=_f53;}}}if(_f51===""){return _f54;}_f51=dojo.string.substitute("${0} <${1}>",[_f51,_f54]);return _f51;};if(has("trident")||typeof ActiveXObject!=="undefined"){try{var _f55=new ActiveXObject("Outlook.Application");var _f56=_f55.CreateItem(0);if(_f46!==""){_f56.Subject=_f46;}if(_f47!==""){if(_f2f){_f56.HTMLBody=_f47;}else{_f56.Body=_f47;}}_f37=0;dojo.forEach(_f36,function(prop){_f37++;var _f57=_f3a[prop];if(dojo.isArray(_f57)&&_f57.length>0){_f57.sort(_f44);dojo.forEach(_f57,function(obj){var _f58=_f4d(obj.firstName,obj.lastName,obj.emailAddress);var _f59=_f56.Recipients.Add(_f58);_f59.Type=_f37;});}});_f56.Display();return;}catch(e){if(typeof console!=="undefined"){}}}if(typeof console!=="undefined"){}var _f5a=function(str,_f5b,_f5c,_f5d,_f5e,_f5f){if(typeof _f5b=="string"){_f5b=[_f5b];}var _f60;if(_f5e===false){_f60=function(x){return x;};}else{_f60=function(x){return encodeURIComponent(x);};}for(var i=0;i<_f5b.length&&str.length<_f5c;i++){var left=_f5c-str.length;var part=_f5b[i];if(i>0&&_f5d){left--;}if(left===0||(_f5f===false&&left<part.length)){continue;}part=part.substr(0,left);var ns=_f60(part);if(str.length+ns.length>_f5c){if(_f5f===false){continue;}var _f61=0;var _f62=ns.length-left;while(_f62>0){_f61++;_f62-=_f60(part.charAt(part.length-_f61)).length;}if(_f61>=part.length){continue;}ns=_f60(part.substr(0,part.length-_f61));}if(i>0&&_f5d){str+=_f5d;}str+=ns;}return str;};var _f63=function(type){var _f64=[];var _f65;switch(type){case olCC:_f65=_f3a.cc;break;case _f35:_f65=_f3a.bcc;break;default:_f65=_f3a.to;break;}if(dojo.isArray(_f65)&&_f65.length>0){_f65.sort(_f44);dojo.forEach(_f65,function(obj){var _f66=_f4d(obj.firstName||"",obj.lastName||"",obj.emailAddress||"");_f64.push(_f66);});}return _f64;};var _f67=(_f2e||body)?1500:2040;var _f68=_f63(olTo);var url=_f5a("mailto:",(dojo.isArray(_f68)?_f68:[]),_f67,";",false,false);var _f69=false;var _f6a=function(_f6b){var _f6c=(_f69)?"&":"?";_f6c+=_f6b+"=";_f69=true;return _f6c;};if(dojo.isString(_f2e)&&_f2e!==""){url+=_f6a("subject");url=_f5a(url,_f2e,1700);}var _f6d=_f63(olCC);if(dojo.isArray(_f6d)&&_f6d.length>0){url+=_f6a("cc");url=_f5a(url,_f6d,_f67,";",false,false);}var _f6e=_f63(_f35);if(dojo.isArray(_f6e)&&_f6e.length>0){url+=_f6a("bcc");url=_f5a(url,_f6e,_f67,";",false,false);}if(dojo.isString(body)&&body!==""){url+=_f6a("body");url=_f5a(url,body,2000);}if(typeof console!=="undefined"){}try{location.href=url;}catch(e){_f2a.showError(dojo.string.substitute(_f28.Email.resources.MailToProtocolError,[url.length,(typeof e.toMessage=="function")?e.toMessage():e.message]));}});},isWriteEmailToIdsSupported:function(_f6f){if(!dojo.isString(_f6f)||_f6f===""){if(typeof console!=="undefined"){console.error("The maintable argument is invalid in isWriteEmailToIdsSupported(maintable).");}}var _f70=(dojo.isString(_f6f))?_f6f.toUpperCase():"";return (_f70=="CONTACT"||_f70=="LEAD");},__emailValidationRegEx:null,isValidEmailAddress:function(_f71){if(this.__emailValidationRegEx===null){this.__emailValidationRegEx=new RegExp(dojox.validate.regexp.emailAddress());}if(dojo.isString(_f71)){return this.__emailValidationRegEx.test(_f71);}return false;},writeEmailToIds:function(_f72,_f73,_f74,body,_f75,_f76){if(!this.isWriteEmailToIdsSupported(_f73)){_f2a.showError(_f28.Email.resources.InvalidContextError);return;}if(!dojo.isArray(_f72)){_f2a.showError(_f28.Email.resources.InvalidArgumentError);return;}var self=this;require(["Sage/MailMerge/Helper","Sage/MailMerge/Service"],function(_f77,_f78){var _f79=_f73.toUpperCase();var _f7a=0;_f72.sort();var _f7b=[];dojo.forEach(_f72,function(id){if(dojo.indexOf(_f7b,id)==-1){_f7b.push(id);}else{_f7a++;if(typeof console!=="undefined"){}}});_f72=_f7b;dojo.forEach(_f72,function(id,idx){_f72[idx]="'"+id+"'";});var _f7c=1;if(_f72.length>100){_f7c=Math.floor(_f72.length/100);if((_f72.length%100)!==0){_f7c++;}}var _f7d=0;if(typeof _f75!=="undefined"){if(!isNaN(_f75)){if(Number(_f75)==1){_f7d=1;}}}var _f7e=(_f79=="CONTACT");var _f7f="Email";if(dojo.isString(_f76)&&_f76!==""&&_f7e){var _f80=_f76.toUpperCase();switch(_f80){case "SECONDARYEMAIL":_f7f="SecondaryEmail";if(typeof console!=="undefined"){}break;case "EMAIL3":_f7f="Email3";if(typeof console!=="undefined"){}break;default:if(_f80!="EMAIL"){if(typeof console!=="undefined"){}}if(typeof console!=="undefined"){}break;}}var _f81=0;var _f82=0;var _f83;var _f84=0;var _f85={"data":[]};var _f86=function(key,_f87,_f88,_f89){_f85.data.push({"key":key||"","firstName":_f87||"","lastName":_f88||"","emailAddress":_f89||""});};var _f8a=_f77.GetDesktopService(false);for(_f83=0;_f83<_f7c;_f83++){var _f8b=function(){var _f8c=100;if(_f72.length<100){_f8c=_f72.length;}var _f8d=new Array(_f8c);var _f8e;for(_f8e=0;_f8e<_f8c;_f8e++){_f8d[_f8e]=_f72.shift();}var _f8f=(_f8d.length>1)?"Id in (${0})":"Id eq ${0}";var _f90=dojo.string.substitute(_f8f,[_f8d.join(",")]);var _f91=Sage.Data.SDataServiceRegistry.getSDataService("dynamic");var _f92=new Sage.SData.Client.SDataResourceCollectionRequest(_f91);_f92.setResourceKind((_f79=="LEAD")?"leads":"contacts");var _f93="FirstName,LastName,DoNotSolicit,DoNotEmail,"+_f7f;_f92.setQueryArg("select",_f93);_f92.setQueryArg("where",_f90);_f92.read({httpMethodOverride:true,success:function(data){_f84++;var _f94=(typeof data!=="undefined"&&data!==null)?data["$resources"]:null;if(dojo.isArray(_f94)&&_f94.length>0){var _f95;for(_f95=0;_f95<_f94.length;_f95++){var _f96=_f94[_f95].$key||"";var _f97;switch(_f7f){case "SecondaryEmail":_f97=_f94[_f95].SecondaryEmail||"";break;case "Email3":_f97=_f94[_f95].Email3||"";break;default:_f97=_f94[_f95].Email||"";break;}var _f98=_f94[_f95].FirstName||"";var _f99=_f94[_f95].LastName||"";var _f9a=_f94[_f95].DoNotEmail||false;var _f9b=_f94[_f95].DoNotSolicit||false;if(_f97!==""&&self.isValidEmailAddress(_f97)&&!_f9a&&!_f9b){_f86(_f96,_f98,_f99,_f97);}else{if(_f9a||_f9b){_f82++;if(typeof console!=="undefined"){}}else{_f81++;if(typeof console!=="undefined"){}}}}}if(_f84==_f7c){var _f9c=null;if(_f82>0||_f81>0||_f7a>0){_f9c=dojo.string.substitute(_f28.Email.resources.FilteredOutMsg,[_f82,_f81,_f7a]);}var _f9d={rtTo:0,rtCC:1,rtBCC:2};var _f9e={"to":[],"cc":[],"bcc":[]};var _f9f=function(type,_fa0,_fa1,_fa2){var _fa3=function(_fa4){_fa4.push({"firstName":_fa0||"","lastName":_fa1||"","emailAddress":_fa2||""});};switch(type){case _f9d.rtCC:_fa3(_f9e.cc);break;case _f9d.rtBCC:_fa3(_f9e.bcc);break;default:_fa3(_f9e.to);break;}};var _fa5;if(_f85.data.length>1){if(_f81>0){if(typeof console!=="undefined"){}}if(_f82>0){if(typeof console!=="undefined"){}}if(_f7a>0){if(typeof console!=="undefined"){}}var i;if(_f8a){var _fa6=new Sage.SelectEmailInfo();dojo.forEach(_f85.data,function(_fa7){_fa6.AddInfo("","",_fa7.key,_fa7.emailAddress,_fa7.firstName,_fa7.lastName,"","",false);});var _fa8=(dojo.isString(_f9c))?_f9c:"";var _fa9=_f8a.SelectEmailNames(_fa6,MaxTo.maxNoMax,_fa8);if(_fa9!==null&&_fa9.Recipients.length>0){for(i=0;i<_fa9.Recipients.length;i++){_fa5=_fa9.Recipients[i];_f9f(_fa5.Type,_fa5.FirstName,_fa5.LastName,_fa5.EmailAddress);}}else{return;}}else{dojo.forEach(_f85.data,function(_faa){_f9f(_f9d.rtTo,_faa.firstName,_faa.lastName,_faa.emailAddress);});}}else{if(_f85.data.length==1){_fa5=_f85.data[0];_f9f(_f9d.rtTo,_fa5.firstName,_fa5.lastName,_fa5.emailAddress);}else{var _fab=_f28.Email.resources.AllInvalidEmailError;if(_f7e&&_f7f!="Email"){_fab+=dojo.string.substitute(" "+_f28.Email.resources.EmailFieldQueried,["Contact."+_f7f]);}_f2a.showInfo(_fab);return;}}var _fac=(dojo.isString(_f74))?_f74:"";var _fad=(dojo.isString(body))?body:"";var _fae=(_fad.length>13)?(_fad.indexOf("<HTML",_fad.substring(0,4).toUpperCase())===0):false;self.writeEmail(_f9e,_fac,_fad,_fae,_f7d);}},failure:function(xhr,_faf){var _fb0={message:_f28.Email.resources.EntityInfoError};_f28.ErrorHandler.handleHttpError(xhr,_faf,_fb0);},scope:this});};_f8b();}});},writeEmailToGroupSelection:function(_fb1,body,_fb2,_fb3){if(_f28.getModeId()!="list"){_f2a.showInfo(_f28.Email.resources.CapabilityModeError);return;}var _fb4=Sage.Services.getService("ClientGroupContext");if(!dojo.isObject(_fb4)){return;}var _fb5=_fb4.getContext().CurrentTable;if(!this.isWriteEmailToIdsSupported(_fb5)){_f2a.showError(_f28.Email.resources.CapabilityEntityError);return;}var _fb6=dijit.byId("list");if(!dojo.isObject(_fb6)){return;}var _fb7=_fb6.getSelectionInfo();if(!dojo.isObject(_fb7)||!_fb7.hasOwnProperty("selectionCount")||_fb7.selectionCount<=0){_f2a.showInfo(_f28.Email.resources.NoRowsSelectedError);return;}var _fb8=new Array(_fb7.selections.length);dojo.forEach(_fb7.selections,function(item,idx){_fb8[idx]=item.id;});this.writeEmailToIds(_fb8,_fb5,_fb1,body,_fb2,_fb3);}});return Sage.Utility.Email;});},"Sage/Layout/main":function(){define(["Sage/Layout/ContentPane","Sage/Layout/TabContainer","Sage/Layout/MainContentDetailsPane","Sage/Layout/_SplitterEnhancedMixin"],function(){});},"Sage/Layout/ContentPane":function(){define(["dojo/_base/declare","dijit/layout/ContentPane","Sage/Layout/_SplitterEnhancedMixin"],function(_fb9,_fba,_fbb){var _fbc=_fb9("Sage.Layout.ContentPane",[_fba,_fbb],{});return _fbc;});},"Sage/Layout/_SplitterEnhancedMixin":function(){define(["dojo/_base/declare","dojo/_base/connect","dojox/storage/LocalStorageProvider","dojo/dom-style","dojo/_base/sniff"],function(_fbd,_fbe,_fbf,_fc0,has){return _fbd("Sage.Layout._SplitterEnhancedMixin",null,{postCreate:function(){this.inherited(arguments);this.storageId=this.id;},startup:function(){this.inherited(arguments);if(has("ie")){this._widthPadding=19;}if(this.splitter===true){this._addEventHandlers();this._addEventSubscribers();var dim=this._getFromLocalStorage(this.storageId);if(dim===null){dim={h:this.domNode.scrollHeight+5,w:this.domNode.scrollWidth};}this._setupStyle(dim);this.resize(dim);this._setDefaults(dim);}},splitterDblClick:null,splitterStopDrag:null,storageId:null,_defaultHeight:310,_defaultWidth:180,_widthPadding:2,_setDefaults:function(dim){if((this.region==="top"||this.region==="bottom")&&dim.h!==this.minSize){this._defaultHeight=dim.h;}if((this.region==="right"||this.region==="left")&&dim.w>this.minSize+this._widthPadding){this._defaultWidth=dim.w;}},_addEventHandlers:function(){var _fc1=dijit.byId([this.id,"_splitter"].join(""));if(typeof _fc1!=="undefined"){if(this.splitterStopDrag===null){this.splitterStopDrag=this.connect(_fc1,"_stopDrag",function(){if(this.region==="top"){if(this.h===this.minSize){_fbe.publish(["Sage/events/",this.id,"/splitterMinSize"].join(""),this);}else{_fbe.publish(["Sage/events/",this.id,"/splitterMovedNotMin"].join(""),this);}}this._setDefaults({h:this.h,w:this.w});this._saveToLocalStorage(this.storageId,{h:this.h,w:this.w});});}if(this.splitterDblClick===null){this.splitterDblClick=this.connect(_fc1,"onDblClick",function(){this.toggleSplitter();_fbe.publish(["Sage/events/",this.id,"/splitterToggled"].join(""),this);});}}},_addEventSubscribers:function(){_fbe.subscribe(["Sage/events/",this.id,"/toggleSplitter"].join(""),this,"toggleSplitter");},toggleSplitter:function(){var dim={},_fc2=dijit.byId([this.id,"_splitter"].join("")),_fc3=dijit.byId("Viewport");if(typeof _fc2!=="undefined"&&_fc2!==null){if(this.region==="top"||this.region==="bottom"){dim=(this.h===this.minSize)?{h:this._defaultHeight,w:this.w}:{h:this.minSize,w:this.w};}if(this.region==="right"||this.region==="left"){dim=(this.w<this.minSize+this._widthPadding)?{h:this.h,w:this._defaultWidth}:{h:this.h,w:this.minSize};}if(dim.w===19){dim.w=this._defaultWidth;}this._setupStyle(dim);this.resize(dim);_fc3.resize();this._saveToLocalStorage(this.storageId,dim);}},_setupStyle:function(dim){if(!this.domNode){return;}var _fc4=false;if(this.region==="top"||this.region==="bottom"){_fc4=(dim.h===this.minSize);}if(this.region==="right"||this.region==="left"){_fc4=(dim.w<this.minSize+this._widthPadding);}if(_fc4){_fc0.set(this.domNode,"overflow","hidden");}else{_fc0.set(this.domNode,"overflow","auto");}},_saveToLocalStorage:function(key,_fc5){var _fc6=new _fbf();_fc6.initialize();_fc6.put(key,_fc5,function(_fc7,key,_fc8){if(_fc7===_fc6.FAILED){console.error("Failed writing key: "+key+" in local storage. Message: "+_fc8);}});},_getFromLocalStorage:function(key,_fc9){var _fca=new _fbf();_fca.initialize();return _fca.get(key,_fc9);}});});},"Sage/Layout/TabContainer":function(){define(["dojo/_base/declare","dojo/ready","dojo/aspect","dijit/layout/TabContainer","Sage/Utility/Workspace"],function(_fcb,_fcc,_fcd,_fce,_fcf){var _fd0=_fcb("Sage.Layout.TabContainer",[_fce],{region:"center",destroyRecursive:function(){if(this.tablist){this.tablist.destroy();}this.inherited(arguments);},postCreate:function(){_fcd.after(this,"startup",function(){var _fd1=_fcf.getDetailTabWorkspaceContainer();_fd1.resize();_fd1.resize();});}});return _fd0;});},"Sage/Layout/MainContentDetailsPane":function(){define(["dojo/_base/declare","dojo/dom-style","Sage/Layout/ContentPane"],function(_fd2,_fd3,_fd4){var _fd5=_fd2("Sage.Layout.MainContentDetailsPane",[_fd4],{postCreate:function(){this.inherited(arguments);var _fd6=Sage.Services.getService("ClientEntityContext");if(_fd6){var _fd7=_fd6.getContext();this.storageId=[_fd7.EntityType.replace(/\./g,"_"),"_",this.id].join("");}this.connect(this,"startup",this.noContentResize);},mainPaneChildrenExist:true,tabPaneChildrenExist:true,tabContentDivExists:true,noContentResize:function(){var dim={h:this.domNode.scrollHeight,w:this.domNode.scrollWidth},self=this;var _fd8=function(){self.resize(dim);if(self._splitterWidget){_fd3.set(self._splitterWidget.domNode,"display","none");}};if(!this.tabPaneChildrenExist){var _fd9=dijit.byId("centerContent");dim={h:_fd9.domNode.scrollHeight,w:this.domNode.scrollWidth};_fd8();}if(!this.mainPaneChildrenExist){dim={h:1,w:this.domNode.scrollWidth};_fd8();}if(!this.tabContentDivExists){_fd3.set("mainContentDetails","height","100%");}},startup:function(){var _fda=dijit.byId("Viewport");var _fdb=dijit.byId("tabContent");this.tabContentDivExists=(typeof (_fdb)!=="undefined");var _fdc=dojo.query("[id$=_inner]",dojo.query(".mainContentContent")[0])[0];if(_fdc){this.mainPaneChildrenExist=(_fdc.children.length>1||dojo.query("#MainContent .formtable").length>0||_fdc.id==="GeneralExceptioncontents_inner");}else{this.mainPaneChildrenExist=false;}this.tabPaneChildrenExist=(this.tabContentDivExists)?(_fdb.domNode.children.length>0):false;if(!this.tabPaneChildrenExist||!this.mainPaneChildrenExist){this.set("splitter",false);}if(this.splitter){var _fdd=dojo.query("[class$=SecondaryToggle]");if(_fdd){for(var i=0;i<_fdd.length;i++){dojo.style(_fdd[i],"display","none");}}}if(_fda){_fda.resize();}this.inherited(arguments);}});return _fd5;});},"Sage/Library/main":function(){define(["Sage/Library/DocumentProperties","Sage/Library/FileHandler","Sage/Library/FolderHandler","Sage/Library/Manager"],function(){});},"Sage/Library/DocumentProperties":function(){define(["Sage/_Templated","dijit/_Widget","dojo/i18n","Sage/Utility","dijit/Dialog","dijit/form/CheckBox","dijit/form/DateTextBox","dijit/form/Form","dijit/form/Textarea","dijit/form/TextBox","dijit/form/ValidationTextBox","dijit/layout/LayoutContainer","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dojo/dom-construct","dojo/i18n!./nls/DocumentProperties","dojo/text!./templates/DocumentProperties.html","dojo/_base/declare"],function(_fde,_fdf,i18n,_fe0,_fe1,_fe2,_fe3,Form,_fe4,_fe5,_fe6,_fe7,_fe8,_fe9,_fea,nls,_feb,_fec){var _fed=_fec("Sage.Library.DocumentProperties",[_fdf,_fde],{_cancelClick:function(){this.hide();},_dialog:false,_doNotExpireChange:function(_fee){if(this._ready){if(_fee===true){this._updateExpires(false,null);}else{var _fef=dijit.byId("expireDate$originalValue").get("value");var _ff0=new Date();if(_fef&&dojo.isString(_fef)&&_fe0.Convert.isDateString(_fef)){_ff0=_fe0.Convert.toDateFromString(_fef);_ff0=new Date(_ff0.getUTCFullYear(),_ff0.getUTCMonth(),_ff0.getUTCDate());}this._updateExpires(true,_ff0);}}},_neverExpireDate:new Date(2099,0,1),_ready:false,_submitClick:function(){this.hide();Sage.Library.FileHandler.validateProperties(this.getData());},_updateExpires:function(_ff1,_ff2){if(_ff1===false){var _ff3=dijit.byId("neverExpireControl");if(!_ff3){_ff3=new _fe5({},"neverExpireControl");_ff3.set("disabled","disabled");}_ff3.set("value",this.resources.Never);dijit.byId("expireDate").set("value",this._neverExpireDate);dojo.place(_ff3.domNode,"expiresRoot","only");}else{var _ff4=dijit.byId("expireDateControl");if(!_ff4){_ff4=new _fe3({},"expireDateControl");_ff4.set("onChange",function(_ff5){dijit.byId("expireDate").set("value",_ff5);});}_ff4.set("value",_ff2);dojo.place(_ff4.domNode,"expiresRoot","only");}},resources:{},constructor:function(){this.inherited(arguments);this.resources={};},postMixInProperties:function(){_fe9.mixin(this.resources,nls);this.inherited(arguments);},postCreate:function(){this.inherited(arguments);var _ff6=dijit.byId("fileName");if(_ff6){_ff6.regExp="[^\\\\/:\"*?<>|\r\n]+";_ff6.invalidMessage=this.resources.InvalidFileName;}_fe9.mixin(this._dialog,new _fe8());this._dialog.createHelpIconByTopic("libraryfileproperties");},getData:function(){var form=dijit.byId("propertiesForm");if(form){return form.get("value");}return false;},hide:function(){this._dialog.hide();},show:function(_ff7,_ff8){this._ready=false;var self=this;var form=dijit.byId("propertiesForm");if(!this._dialog.onFocusEvent){this._dialog.onFocusEvent=dojo.connect(this._dialog,"onFocus",function(){if(form){self._updateExpires(_ff7.expires,_ff7["expireDate"]);form.set("value",_ff7);}self._ready=true;});}if(!this._dialog.onHideEvent){this._dialog.onHideEvent=dojo.connect(this._dialog,"onHide",function(){dojo.disconnect(self._dialog.onFocusEvent);dojo.disconnect(self._dialog.onHideEvent);self._dialog.onFocusEvent=null;self._dialog.onHideEvent=null;self._ready=false;});}dijit.byId("doNotExpire").set("checked",(_ff7.expires===false));dijit.byId("forceDistribution").set("checked",(_ff7.flags===1));dijit.byId("directory.fullPath").set("readOnly",true);dijit.byId("status").set("readOnly",true);dijit.byId("fileSize").set("readOnly",true);if(_ff8){dijit.byId("doNotExpire").set("disabled","disabled");dijit.byId("forceDistribution").set("disabled","disabled");dijit.byId("fileName").set("readOnly",true);dijit.byId("revisionDate").set("disabled","disabled");dijit.byId("description").set("readOnly",true);dijit.byId("abstract").set("readOnly",true);dijit.byId("okButton").set("disabled","disabled");}this._dialog.show();},widgetsInTemplate:true,widgetTemplate:new Simplate(eval(_feb))});return _fed;});},"Sage/Library/FileHandler":function(){define(["Sage/Data/SDataServiceRegistry","Sage/Services/RoleSecurityService","Sage/Services/SystemOptions","Sage/Utility/File","Sage/Utility/File/Attachment","Sage/Utility/File/DragDropWatcher","Sage/Utility/File/DefaultDropHandler","Sage/Utility/File/FallbackFilePicker","Sage/Utility/File/LibraryDocument","Sage/Library/DocumentProperties","Sage/UI/Dialogs","Sage/Utility","dijit/ProgressBar","dojo/i18n","dojo/parser","dojo/string","dojo/dom-construct","dojo/dom-attr","dojo/_base/lang","dojo/_base/window","dojo/i18n!./nls/FileHandler"],function(_ff9,_ffa,_ffb,File,_ffc,_ffd,_ffe,_fff,_1000,_1001,_1002,_1003,_1004,i18n,_1005,_1006,_1007,_1008,dLang,_1009,nls){Sage.namespace("Library.FileHandler");dojo.mixin(Sage.Library.FileHandler,{_docPropsDlg:false,_fileInputBtn:false,_createFileInputBtn:function(){var self=this;this._fileInputBtn=_1009.doc.createElement("INPUT");_1008.set(this._fileInputBtn,{"type":"file","multiple":"true","accept":"*/*","class":"display-none",onchange:function(e){self.handleHTML5Files(e);},});_1007.place(this._fileInputBtn,"filePicker");},_getNewRequest:function(){var _100a=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Library.FileHandler._system);_100a.setResourceKind("libraryDocuments");_100a.setQueryArg("format","json");return _100a;},_initSecurity:function(){this.can.add=this._roles.hasAccess("Entities/LibraryDocs/Add");this.can.edit=this._roles.hasAccess("Entities/LibraryDocs/Edit");this.can["delete"]=this._roles.hasAccess("Entities/LibraryDocs/Delete");this.can.manage=(this._roles.hasAccess("Administration/Manage/Library")||this._roles.hasAccess("Administration/View"));},_remote:false,_roles:null,_system:null,can:{add:false,edit:false,"delete":false,manage:false},resources:{},init:function(){var _100b=Sage.Services.getService("SystemOptions");if(_100b){_100b.get("DbType",function(val){this._remote=(val&&val==2);},function(){if(typeof console!=="undefined"){console.error("Unable to determine SystemOptions.DbType.");}},this);}else{if(typeof console!=="undefined"){console.error("Unable to load the SystemOptions service.");}}Sage.Library.FileHandler._roles=Sage.Services.getService("RoleSecurityService");Sage.Library.FileHandler._initSecurity();Sage.Library.FileHandler._system=_ff9.getSDataService("system");dLang.mixin(Sage.Library.FileHandler.resources,nls);if(Sage.Library.FileHandler.can.add||Sage.Library.FileHandler.can.manage){dojo.connect(_ffd,"onFilesDropped",this,"onFilesDropped");}this._createFileInputBtn();Sage.Utility.File.DefaultDropHandler.fileType=Sage.Utility.File.fileType.ftLibraryDocs;},addFiles:function(){if(!(Sage.Library.FileHandler.can.add||Sage.Library.FileHandler.can.manage)){Sage.Library.FileHandler.showAccessError();return;}if(File.supportsHTML5File){Sage.Library.FileHandler._fileInputBtn.click();}else{var fbfp=dijit.byId("fallbackFilePicker");if(!fbfp){fbfp=new _fff({id:"fallbackFilePicker",fileType:Sage.Utility.File.fileType.ftLibraryDocs});}fbfp.show();}},deleteFile:function(_100c,_100d,_100e){if(!(Sage.Library.FileHandler.can["delete"]||Sage.Library.FileHandler.can.manage)){Sage.Library.FileHandler.showAccessError();return;}var _100f=Sage.Library.FileHandler._getNewRequest();_100f.setResourceSelector("'"+_100c+"'");_100f["delete"]({},{scope:this,ignoreETag:true,success:function(){if(_100d&&typeof _100d==="function"){_100d();}},failure:function(xhr,sdata){if(_100e&&typeof _100e==="function"){_100e(xhr,sdata);}else{_1003.ErrorHandler.handleHttpError(xhr,sdata,{message:Sage.Library.FileHandler.resources.FileDeleteError});}}});},updateProperties:function(_1010,data,_1011,_1012){if(!(Sage.Library.FileHandler.can.edit||Sage.Library.FileHandler.can.manage)){Sage.Library.FileHandler.showAccessError();return;}var _1013=Sage.Library.FileHandler._getNewRequest();_1013.setResourceSelector("'"+_1010+"'");_1013.setQueryArg("_includeFile","false");_1013.update(data,{scope:this,success:function(entry){if(_1011&&typeof _1011==="function"){_1011(entry);}},failure:function(xhr,sdata){if(_1012&&typeof _1012==="function"){_1012(xhr,sdata);}else{if(xhr.readyState==4&&xhr.status==412){Sage.UI.Dialogs.showError(Sage.Library.FileHandler.resources.DocumentUpdateConflictError);}else{_1003.ErrorHandler.handleHttpError(xhr,sdata,{message:Sage.Library.FileHandler.resources.DocumentPropertiesUpdateError});}}}});},onFilesDropped:function(files,_1014){Sage.Utility.File.DefaultDropHandler.fileType=Sage.Utility.File.fileType.ftLibraryDocs;},documentProperties:function(){if(Sage.Library.FileHandler._docPropsDlg===false){Sage.Library.FileHandler._docPropsDlg=new _1001();}return Sage.Library.FileHandler._docPropsDlg;},getSelectedRow:function(_1015){try{if(!_1015){_1015="$key";}var grid=dijit.byId("libraryGrid");if(grid){var _1016=grid.selection.getSelected();if(_1016&&_1016.length>0){return _1016[0][_1015][0];}}return false;}catch(e){console.error(e);return false;}},handleHTML5Files:function(e){if(this._fileInputBtn.files.length>0){_1000.createDocuments(this._fileInputBtn.files);}_1007.destroy(Sage.Library.FileHandler._fileInputBtn);this._createFileInputBtn();},handleAddButtonClicked:function(event){Sage.Library.FileHandler.addFiles();},findDirectoryId:function(_1017){if(!_1017){if(Sage.Library.Manager){return Sage.Library.Manager.getOpenFolderId();}else{return "";}}try{var _1018=dijit.getEnclosingWidget(_1017);if(_1018&&typeof _1018==="object"&&_1018.isTreeNode){if(_1018.item){if(_1018.item.root!==true){if(_1018.item.id&&dojo.isArray(_1018.item.id)&&_1018.item.id.length==1){return _1018.item.id[0];}else{return "";}}else{return _1018.item.id;}}}}catch(e){if(typeof console!=="undefined"){console.error(e);}}if(Sage.Library.Manager){return Sage.Library.Manager.getOpenFolderId();}return "";},editLibraryFileProps:function(){var row=Sage.Library.FileHandler.getSelectedRow();if(row){var _1019=!(Sage.Library.FileHandler.can.edit||Sage.Library.FileHandler.can.manage);Sage.Library.FileHandler.showPropertiesDialog(row,_1019);}else{Sage.UI.Dialogs.showInfo(Sage.Library.FileHandler.resources.PleaseSelectFile);}},validateProperties:function(_101a){if(!(Sage.Library.FileHandler.can.edit||Sage.Library.FileHandler.can.manage)){return;}if(!_101a){return;}if(typeof console!=="undefined"){try{var _101b=dojo.clone(_101a);}catch(e){console.error(e);}}var _101c=["abstract","createDate","description","expireDate","expires","fileName","flags","revisionDate","doNotExpire","forceDistribution","status","fileSize","directory"];dojo.forEach(_101c,function(prop){if(_101a.hasOwnProperty(prop)){var value=_101a[prop];var _101d;var _101e;switch(prop){case "expireDate":case "revisionDate":_101d=_101a[prop+"$originalValue"];if(_101d&&dojo.isString(_101d)&&_1003.Convert.isDateString(_101d)){var _101f=_1003.Convert.toDateFromString(_101d);_101f=new Date(_101f.getUTCFullYear(),_101f.getUTCMonth(),_101f.getUTCDate());if(value&&value.toString()===_101f.toString()){delete _101a[prop];}}break;case "doNotExpire":if(value){if(_101a.hasOwnProperty("expires")){_101e=dojo.isArray(value)&&value.length>0&&value[0]==="on";var _1020=_101a["expires"];if(_1020===null){_1020="false";}if((!_101e&&_1020=="true")||(_101e&&_1020=="false")){delete _101a["expires"];}else{_101a["expires"]=(_101e)?false:true;}}}delete _101a[prop];break;case "forceDistribution":if(value){if(_101a.hasOwnProperty("flags")){_101e=dojo.isArray(value)&&value.length>0&&value[0]==="on";var flags=_101a["flags"];if(flags===null){flags="0";}if((!_101e&&flags==="0")||(_101e&&flags==="1")){delete _101a["flags"];}else{_101a["flags"]=(_101e)?1:0;}}}delete _101a[prop];break;case "expires":case "flags":break;case "status":case "createDate":case "fileSize":case "directory":delete _101a[prop];break;default:_101d=_101a[prop+"$originalValue"];if(value===null&&_101d===null){delete _101a[prop];}else{if(value!==null&&_101d===null){}else{if(value===null&&_101d!==null){}else{if(dojo.isString(value)&&dojo.isString(_101d)){if(value==_101d){delete _101a[prop];}}}}}break;}}if(_101a.hasOwnProperty(prop+"$originalValue")){delete _101a[prop+"$originalValue"];}});if(typeof console!=="undefined"){}var _1021=false;dojo.some(_101c,function(prop){if(_101a.hasOwnProperty(prop)){_1021=true;return true;}else{return false;}});if(_1021){var sKey=_101a.$key;delete _101a.$key;Sage.Library.FileHandler.updateProperties(sKey,_101a,function(entry){if(typeof console!=="undefined"){}dojo.publish("/sage/library/manager/libraryDocuments/refresh",null);});}},closePropertiesDialog:function(){Sage.Library.FileHandler.documentProperties().hide();},showPropertiesDialog:function(_1022,_1023,_1024){if(_1022){var _1025=Sage.Library.FileHandler._getNewRequest();_1025.setResourceSelector("'"+_1022+"'");_1025.setQueryArg("_includeFile","false");_1025.setQueryArg("include","directory/fullPath");_1025.read({scope:this,success:function(entry){var _1026=["abstract","createDate","description","expireDate","expires","fileName","flags","revisionDate","status"];dojo.forEach(_1026,function(prop){var value=entry[prop];if(prop!="createDate"){entry[prop+"$originalValue"]=value;}switch(prop){case "createDate":case "expireDate":case "revisionDate":if(value&&dojo.isString(value)&&_1003.Convert.isDateString(value)){var date=_1003.Convert.toDateFromString(value);entry[prop]=new Date(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate());}break;case "expires":if(value===null){entry[prop]="false";}break;case "flags":if(value===null){entry[prop]=0;}break;case "abstract":case "description":case "fileName":if(value===null){entry[prop]="";}break;case "status":entry[prop]=Sage.Library.FileHandler.translateStatus(value);break;}});Sage.Library.FileHandler.documentProperties().show(entry,_1023);},failure:function(xhr,sdata){if(_1024&&typeof _1024==="function"){_1024(xhr,sdata);}else{_1003.ErrorHandler.handleHttpError(xhr,sdata,{message:Sage.Library.FileHandler.resources.DocumentPropertiesError});}}});}},handleDeleteButtonClicked:function(_1027,event){var name=Sage.Library.FileHandler.getSelectedRow("fileName");if(name){var msg=_1006.substitute(Sage.Library.FileHandler.resources.DeleteFileCnfmFmt,[name]);Sage.UI.Dialogs.raiseQueryDialog(Sage.Library.FileHandler.resources.Confirm,msg,Sage.Library.FileHandler.handleDeleteConfirmed,Sage.Library.FileHandler.resources.Yes,Sage.Library.FileHandler.resources.No,"questionIcon");}else{Sage.UI.Dialogs.showInfo(Sage.Library.FileHandler.resources.PleaseSelectFile);}},handleDeleteConfirmed:function(ok){if(ok){var id=Sage.Library.FileHandler.getSelectedRow();if(id){Sage.Library.FileHandler.deleteFile(id,function(){dojo.publish("/sage/library/manager/libraryDocuments/refresh",null);});}}},logRemoteDocRequest:function(_1028){if(!this._remote){return;}var _1029=new Sage.SData.Client.SDataServiceOperationRequest(this._system);_1029.setResourceKind("libraryDocuments");_1029.setQueryArg("format","json");_1029.setOperationName("RequestLibraryDocument");var _102a={"$name":"RequestLibraryDocument","request":{"entity":{$key:_1028},"LibraryDocumentId":_1028}};_1029.execute(_102a,{scope:this,success:function(entry){var _102b=false;if(dojo.isObject(entry)){var _102c=entry.response||null;if(_102c!==null){_102b=_102c.Result||false;}}if(_102b===false){_1002.showError(Sage.Library.FileHandler.resources.LogRequestError);}},failure:function(xhr,sdata){_1003.ErrorHandler.handleHttpError(xhr,sdata,{message:Sage.Library.FileHandler.resources.LogRequestError});}});},showAccessError:function(){Sage.UI.Dialogs.showError(Sage.Library.FileHandler.resources.AccessError);},translateStatus:function(_102d){if(!dojo.isString(_102d)){return Sage.Library.FileHandler.resources.Unknown;}switch(_102d){case "Available":return Sage.Library.FileHandler.resources.Available;case "Ordered":return Sage.Library.FileHandler.resources.Ordered;case "Delivered":return Sage.Library.FileHandler.resources.Delivered;case "Revised":return Sage.Library.FileHandler.resources.Revised;case "RevisionOrdered":return Sage.Library.FileHandler.resources.RevisionOrdered;case "DeliveredRead":return Sage.Library.FileHandler.resources.DeliveredRead;default:return Sage.Library.FileHandler.resources.Unknown;}},updateRemoteStatus:function(_102e,_102f,_1030,_1031){if(!this._remote){return;}var _1032=Sage.Library.FileHandler._getNewRequest();_1032.setResourceSelector("'"+_102e+"'");_1032.setQueryArg("_includeFile","false");_1032.update({status:_102f},{scope:this,success:function(entry){if(_1030&&typeof _1030==="function"){_1030(entry);}},failure:function(xhr,sdata){if(_1031&&typeof _1031==="function"){_1031(xhr,sdata);}else{_1003.ErrorHandler.handleHttpError(xhr,sdata,{message:Sage.Library.FileHandler.resources.FileStatusError});}}});}});Sage.Library.FileHandler.init();return Sage.Library.FileHandler;});},"Sage/Services/RoleSecurityService":function(){define(["dijit/_Widget","Sage/Data/SDataServiceRegistry","Sage/Utility/_LocalStorageMixin","dojo/_base/declare"],function(_1033,_1034,_1035,_1036){var _1037=_1036("Sage.Services.RoleSecurityService",[_1033,_1035],{_currentUserId:"",_accessListCache:false,_enabled:true,_nameSpace:"Sage_SalesLogix_RoleSecurityService",_clearCache:false,constructor:function(_1038){this.inherited(arguments);dojo.mixin(this,_1038);this._currentUserId=this._getCurrentUserId();},postCreate:function(_1039){this._getFromCache();},_getCurrentUserId:function(){if(!this._currentUserId){var _103a=Sage.Services.getService("ClientContextService");if(_103a){if(_103a.containsKey("userID")){this._currentUserId=_103a.getValue("userID");}}}return this._currentUserId;},_virtuald:function(){var match=/^\/([^\/]+)\//.exec(location.pathname);return match?match[1]:"";},hasAccess:function(_103b,_103c){var _103d=this._internalHasAccess(_103b);if(_103c){_103c(_103d);}return _103d;},_internalHasAccess:function(_103e){if(!this._enabled){return true;}if(!_103e){return true;}if(_103e.trim()===""){return true;}if(this._getCurrentUserId().trim()==="ADMIN"){return true;}var _103f=this._getAccessList();if(_103f){for(var i=0;i<_103f.length;i++){if(_103f[i]===_103e){return true;}}}return false;},_getAccessList:function(){if(this._accessListCache){return this._accessListCache.securedActions;}else{var _1040=this._getFromCache();if(_1040){return _1040.securedActions;}}return false;},_getFromCache:function(){var me=this;var _1041=this._getCurrentUserId();var _1042=this.getFromLocalStorage(this._nameSpace,this._nameSpace);if(_1042){for(var i=0;i<_1042.length;i++){if(_1042[i].userId===_1041){if(this._clearCache){this._clearCache=false;_1042.splice(i,1);}else{this._accessListCache=_1042[i];return _1042[i];}}}}this._loadUserAccessList(function(_1043){if(!_1042){_1042=[];}me._accessListCache=_1043;_1042.push(_1043);me.saveToLocalStorage(me._nameSpace,_1042,me._nameSpace);});return false;},_loadUserAccessList:function(_1044){var _1045=new Sage.SData.Client.SDataServiceOperationRequest(Sage.Data.SDataServiceRegistry.getSDataService("system")).setContractName("system").setOperationName("getCurrentUser");_1045.execute({},{success:function(data){if(_1044){_1044(data.response);}},failure:function(data){},scope:this});}});if(!Sage.Services.hasService("RoleSecurityService")){Sage.Services.addService("RoleSecurityService",new Sage.Services.RoleSecurityService());}return _1037;});},"Sage/Services/SystemOptions":function(){define(["Sage/Data/SDataServiceRegistry","dojo/_base/declare"],function(_1046,_1047){var svc=_1047("Sage.Services.SystemOptions",null,{_systemOptions:false,_systemOptionsByName:false,notFoundrrorMsg:"A system option was requested that cannot be found.",requestFailedErrorMsg:"A request for system options has failed to return results.",get:function(_1048,_1049,_104a,scope){if(!this._systemOptions){var req=new Sage.SData.Client.SDataResourceCollectionRequest(_1046.getSDataService("system",false,true,true));req.setResourceKind("systemoptions");req.read({success:function(_104b){this._buildHash(_104b);this._returnOption(_1048,_1049,_104a,scope);},failure:function(_104c){_104a.call(scope||this,this.requestFailedErrorMsg);},scope:this});}else{this._returnOption(_1048,_1049,_104a,scope);}},_buildHash:function(_104d){var items=_104d.$resources;this._systemOptionsByName={};dojo.forEach(items,function(item){this._systemOptionsByName[item.name]=item;},this);this._systemOptions=_104d.$resources;},_returnOption:function(_104e,_104f,_1050,scope){if(this._systemOptionsByName[_104e]){_104f.call(scope||this,this._systemOptionsByName[_104e].value);}else{_1050.call(scope||this,this.notFoundrrorMsg);}}});Sage.Services.addService("SystemOptions",new Sage.Services.SystemOptions());return svc;});},"Sage/Utility/File/DragDropWatcher":function(){define("Sage/Utility/File/DragDropWatcher",["Sage/UI/Dialogs","Sage/Utility/File","dojo/string","dojo/i18n!./nls/DragDropWatcher","dojo/has","dojo/_base/sniff"],function(_1051,_1052,_1053,_1054,has,_1055){Sage.namespace("Utility.File.DragDropWatcher");Sage.Utility.File.DragDropWatcher={gearsDesktop:false,allowdDetailDrop:false,allowdListDrop:false,init:function(_1056){Sage.Utility.File.DragDropWatcher.allowdDetailDrop=_1056.allowDetailDragDrop;Sage.Utility.File.DragDropWatcher.allowdListDrop=_1056.allowListDragDrop;if(_1052.supportsHTML5File){dojo.connect(dojo.body(),"dragenter",this.handleDragEnter);dojo.connect(dojo.body(),"dragover",this.handleDragOver);dojo.connect(dojo.body(),"dragleave",this.handleDragLeave);dojo.connect(dojo.body(),"drop",this.handleFileDrop);}else{if(has("ie")<11){dojo.connect(dojo.body(),"ondragenter",this.handleGearsDragEnter);dojo.connect(dojo.body(),"ondragover",this.handleGearsDragOver);dojo.connect(dojo.body(),"ondragleave",this.handleGearsDragLeave);if(has("ie")<9){dojo.connect(dojo.body(),"ondrop",this.handleFileDropNotSupported);}else{dojo.body().attachEvent("ondrop",this.handleFileDropNotSupported);}}else{dojo.connect(dojo.body(),"dragenter",this.handleDragEnter);dojo.connect(dojo.body(),"dragover",this.handleDragOver);dojo.connect(dojo.body(),"dragleave",this.handleDragLeave);dojo.connect(dojo.body(),"drop",this.handleFileDropNotSupported);}}},handleDragEnter:function(e){Sage.Utility.File.DragDropWatcher.finishDrag(e,false);},handleDragLeave:function(e){Sage.Utility.File.DragDropWatcher.finishDrag(e,false);},handleDragOver:function(e){Sage.Utility.File.DragDropWatcher.finishDrag(e,false);},handleFileDrop:function(e){Sage.Utility.File.DragDropWatcher.finishDrag(e,true);var allow=Sage.Utility.File.DragDropWatcher._AllowDragDrop();if(!allow){return;}var files=e.dataTransfer.files;if(files&&files.length>0){if(_1052.isFileSizeAllowed(files)){Sage.Utility.File.DragDropWatcher.onFilesDropped(files,e.target);Sage.Utility.File.DragDropWatcher.finishDrag(e,false);}}else{if(typeof slx!=="undefined"&&slx&&slx.desktop){var _1057=slx.desktop;var data=_1057.getDragData();files=data&&data.files;if(files&&files.length>0){if(_1052.isFileSizeAllowed(files)){Sage.Utility.File.DragDropWatcher.onFilesDropped(files,e.target);Sage.Utility.File.DragDropWatcher.finishDrag(e,false);}}}}},finishDrag:function(e,_1058){var evt=e||window.event;if(!evt||typeof evt==="undefined"){return;}if(typeof (this.desktop)!=="undefined"){this.desktop.setDropEffect(evt,"copy");}if(dojo.isFF){if(_1058||_1052.supportsHTML5File){evt.stopPropagation();evt.preventDefault();}}else{if(Sage.Utility.isIE||dojo.isSafari||dojo.isChrome){if(!_1058){if(typeof evt.stopPropagation==="function"){evt.stopPropagation();}if(typeof evt.preventDefault==="function"){evt.preventDefault();}else{evt.returnValue=false;}}}}},handleGearsDragEnter:function(e){Sage.Utility.File.DragDropWatcher.finishDrag(e,false);},handleGearsDragLeave:function(e){Sage.Utility.File.DragDropWatcher.finishDrag(e,false);},handleGearsDragOver:function(e){Sage.Utility.File.DragDropWatcher.finishDrag(e,false);},handleGearsFileDrop:function(e){if(typeof slx!=="undefined"&&slx&&slx.desktop){Sage.Utility.File.DragDropWatcher.finishDrag(e,true);var allow=Sage.Utility.File.DragDropWatcher._AllowDragDrop();if(!allow){return;}var data=slx.desktop.getDragData();var _1059=e.target;if(!_1059){_1059=e.srcElement;}var files=data&&data.files;if(files&&files.length>0){if(Sage.Utility.File.isFileSizeAllowed(files)){Sage.Utility.File.DragDropWatcher.onFilesDropped(files,_1059);}}}},onFilesDropped:function(files,_105a){},_AllowDragDrop:function(){var _105b=Sage.Utility.getPageName();var _105c=Sage.Utility.getModeId();if(_105c!=="detail"){var _105d=Sage.Services.getService("ClientEntityContext");if(_105d){var _105e=_105d.getContext();if(_105e){if(_105e.EntityType==="Sage.Entity.Interfaces.IActivity"){return true;}if(_105e.EntityType==="Sage.Entity.Interfaces.IHistory"){return true;}}}_105b=_105b.substring(0,_105b.indexOf("."));if(_105b==="Library"){return true;}if(Sage.Utility.File.DragDropWatcher.allowdListDrop){return true;}return false;}else{if(Sage.Utility.File.DragDropWatcher.allowdDetailDrop){return true;}return false;}},handleFileDropNotSupported:function(e){var _105f=_1054.query0||"The feature you are requesting requires the Saleslogix Desktop <br> Integration Module.";var _1060=_1054.query1||"Find out more...";var _1061=_1054.query2||"Would you like to install this feature now?";var _1062=_1054.query3||"Note: This module can be installed at any time from the logon or options pages.";var url=Sage.Link.getHelpUrl("desktopintegration");var html=_1053.substitute("<table><tr><td><span> ${0} <a href=\"${1}\">${2}</a><br><br>${3}<br><br><font style=\"font-style:italic\">${4}<font></span></td></tr></table>",[_105f,url,_1060,_1061,_1062]);var _1063={title:"Infor CRM",query:html,callbackFn:function(_1064){if(_1064){slx_installDesktopFeatures();}},yesText:null,noText:null,icon:"infoIcon",showNoButton:true};_1051.raiseQueryDialogExt(_1063);}};return Sage.Utility.File.DragDropWatcher;});},"Sage/Utility/File/DefaultDropHandler":function(){define(["Sage/Utility/File/DragDropWatcher","Sage/Utility/File/Attachment","Sage/Utility/File/LibraryDocument","Sage/UI/Dialogs","dojo/string","Sage/Utility","Sage/Utility/EntityRelationships","dojo/_base/lang","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","dijit/_Widget","Sage/Services/ActivityService","dojo/i18n","dojo/i18n!./nls/DefaultDropHandler","dojo/_base/declare"],function(_1065,_1066,_1067,_1068,_1069,_106a,_106b,dLang,_106c,_106d,_106e,_106f,i18n,_1070,_1071){var _1072=_1071("Sage.Utility.File.EmailFileHandler",null,{file:null,histRelIdProperty:"",histRelNameProperty:"",histRelId:"",histRelName:"",extendRelationships:null,entityContext:null,fileMetaData:null,newHistory:null,saveAsMsg:false,doNotPromptHistory:false,saveAttachments:false,emailDroppedText:"Dropped Email",attachmentTitleText:"Save Attachements",attachmentQuestionText:"Would you like to keep a copy of these attachment(s) in Infor CRM? <br />The attachments will be stored under the Attachments tab for relevant entities.",constructor:function(opts){dLang.mixin(this,opts);},handleFile:function(){if(!this.file){return;}_106b.getRelationships(this.entityContext,function(_1073){var store=new _106c({resourceKind:"history",service:_106d.getSDataService("dynamic")});store.newItem({onComplete:function(_1074){var hist={};hist[this.histRelIdProperty]=this.histRelId;hist[this.histRelNameProperty]=this.histRelName;hist["Type"]="atEmail";hist["Duration"]=1;hist["Timeless"]=false;hist["Category"]=this.emailDroppedText;var d=(this.fileMetaData.sentOn)?this.fileMetaData.sentOn:this.fileMetaData.receivedTime;if(!d){d=new Date();}var _1075=_106a.Convert.toIsoStringFromDate(d);hist["StartDate"]=_1075;hist["CompletedDate"]=_1075;hist["OriginalDate"]=_1075;if(this.fileMetaData["subject"]){hist["Description"]=this.fileMetaData.subject.substring(0,64);}if(this.fileMetaData["body"]){hist["LongNotes"]=this.fileMetaData.body;}if(this.fileMetaData["senderName"]){hist["UserDef2"]=this.fileMetaData.senderName;}_1074=dLang.mixin(_1074,hist);if(_1073){_1074=dLang.mixin(_1074,_1073);}store.saveNewEntity(_1074,this._historySaved,this._historyFailed,this,false);},scope:this});},this);},_getAttachmentMixin:function(_1076,_1077){var mixin={};for(var p in _1077){mixin[p]=_1077[p];}mixin["description"]=_1076.filename;return mixin;},_historySaved:function(hist){this.newHistory=hist;var mixin={};mixin["HistoryId"]=hist["$key"];mixin["historyId"]=hist["$key"];for(var p in hist){var _1078=p.substring(p.length-2);if(_1078.toUpperCase()==="ID"&&hist[p]){mixin[p]=hist[p];}}if(this.saveAsMsg){this.file.name=hist["$key"]+".msg";this.file.filename=hist["$key"]+".msg";var _1079=this._getAttachmentMixin(this.file,mixin);_1079.description=hist["Description"];_1066.createAttachmentSilent(this.file,_1079);}if(this.fileMetaData.attachments.length>0){if(this.saveAttachments){for(var i=0;i<this.fileMetaData.attachments.length;i++){var _107a=this.fileMetaData.attachments[i];var _107b=this._getAttachmentMixin(_107a,mixin);if((!_107a.name)&&(_107a.filename)){_107a["name"]=_107a.filename;}_1066.createAttachmentSilent(_107a,_107b);}}}this.onHistorySaved(hist["$key"]);},_historyFailed:function(req){},onHistoryFailed:function(){},onHistorySaved:function(_107c){}});Sage.namespace("Utility.File.DefaultDropHandler");Sage.Utility.File.DefaultDropHandler={attachmentTitleText:"Save Attachements",attachmentQuestionText:"Would you like to keep a copy of these attachment(s) in Infor CRM? <br />The attachments will be stored under the Attachments tab for relevant entities.",emailDroppedText:"Dropped Email",promptForAttachments:true,saveAttachments:false,hasAttachments:false,options:{},historyQueue:[],historyHandlers:[],fileType:Sage.Utility.File.fileType.ftAttachment,init:function(_107d){dojo.connect(_1065,"onFilesDropped",this,"onFilesDropped");Sage.Utility.File.DefaultDropHandler.options["SAVEMSGFILES"]=_107d.saveMSGFiles;var _107e=Sage.Services.getService("UserOptions");if(_107e){_107e.get("DoNotPromptHistory","Email",function(opt){Sage.Utility.File.DefaultDropHandler.options["DoNotPromptHistory"]=(opt["value"]==="T");});}},onFilesDropped:function(files,_107f){if(this.shouldForceAttachments(_107f)){if(this.fileType!==Sage.Utility.File.fileType.ftLibraryDocs){_1066.createAttachments(files);}else{_1067.createDocuments(files,_107f);}return;}var _1080=[];var _1081=[];for(var i=0;i<files.length;i++){var file=files[i];if(this.isOutlookEmailFile(file)){_1080.push(file);}else{_1081.push(file);}}if(_1080.length>0){this.handleEmailFiles(_1080,_107f);}if(_1081.length>0){if(this.fileType!==Sage.Utility.File.fileType.ftLibraryDocs){_1066.createAttachments(_1081);}else{_1067.createDocuments(files,_107f);}}},shouldForceAttachments:function(_1082){if(typeof slx!=="undefined"&&slx&&slx.desktop){var _1083=false;if(_1082){_1083=Sage.Utility.File.DefaultDropHandler.isTargetAttachmentTab(_1082.parentElement);}if(_1083){return true;}else{return false;}}else{return true;}},isOutlookEmailFile:function(file){var re=/\.(\w+)$/;var _1084=file.name.match(re);if(_1084.length>1){return _1084[1].toLowerCase()==="msg";}return false;},isTargetAttachmentTab:function(_1085){if(!_1085){return false;}if(_1085.id.indexOf("tabContent.dijitContentPane")!=-1){return false;}if(_1085.id.indexOf("AttachmentList")!=-1){return true;}return Sage.Utility.File.DefaultDropHandler.isTargetAttachmentTab(_1085.parentElement);},handleEmailFiles:function(files,_1086){if(!(typeof slx!=="undefined"&&slx&&slx.desktop)||(this.fileType===Sage.Utility.File.fileType.ftLibraryDocs)){if(this.fileType!==Sage.Utility.File.fileType.ftLibraryDocs){_1066.createAttachments(files);}else{_1067.createDocuments(files,_1086);}return;}if(files.length<1){return;}this.hasAttachments=false;this._buildEmailQueue(files);if(this.hasAttachments){var self=this;var _1087={title:this.attachmentTitleText,query:this.attachmentQuestionText,callbackFn:function(_1088){if(_1088){self.saveAttachments=true;}else{self.saveAttachments=false;}self._processNextHistoryHandler();},yesText:null,noText:null,showNoButton:true};_1068.raiseQueryDialogExt(_1087);}else{this.saveAttachments=false;this._processNextHistoryHandler();}},_buildEmailQueue:function(files){if(typeof slx!=="undefined"&&slx&&slx.desktop){var _1089=this.getEntityInfo();var table=_1089.EntityTableName.toUpperCase().substring(0,1)+_1089.EntityTableName.toLowerCase().substring(1);var _108a=slx.desktop;this.historyHandlers=[];this.historyQueue=[];files=slx.desktop.getDragData().files;for(var i=0;i<files.length;i++){var blob=null;if(files[i].blob){blob=files[i].blob;}else{blob=files[i];}var md=_108a.extractMetaData(blob);if(md.attachments.length>0){this.hasAttachments=true;}this.historyHandlers.push(new _1072({file:files[i],histRelIdProperty:table+"Id",histRelNameProperty:table+"Name",histRelId:_1089.EntityId,histRelName:_1089.Description,entityContext:_1089,emailDroppedText:Sage.Utility.File.DefaultDropHandler.emailDroppedText,fileMetaData:md,saveAttachments:false,saveAsMsg:Sage.Utility.File.DefaultDropHandler.options.SAVEMSGFILES,doNotPromptHistory:Sage.Utility.File.DefaultDropHandler.options.DoNotPromptHistory,onHistorySaved:dojo.hitch(this,"_onHistoryHandlerSuccsess"),onHistoryFailed:dojo.hitch(this,"_onHistoryHandlerFailed")}));}}},_processNextHistoryHandler:function(){if(this.historyHandlers.length>0){var _108b=this.historyHandlers.pop();if(_108b){_108b.saveAttachments=this.saveAttachments;_108b.handleFile();}}else{this.saveAttachments=false;this._hasAttachmnets=false;this._checkContinueToComplete();}},_onHistoryHandlerSuccsess:function(_108c){this.historyQueue.push(_108c);this._processNextHistoryHandler();},_onHistoryHandlerFailed:function(){this._processNextHistoryHandler();},_checkContinueToComplete:function(){if(!this.options.DoNotPromptHistory){this._showCompleteDlg();}else{dojo.publish("/entity/history/change",null);this.historyQueue=[];}},_showCompleteDlg:function(){var _108d=Sage.Services.getService("ActivityService");_108d.completeHistoriesInList(this.historyQueue);},getEntityInfo:function(){if(Sage.Services.hasService("ClientEntityContext")){var _108e=Sage.Services.getService("ClientEntityContext");var _108f=_108e.getContext();if(_108f.EntityId!==""){return _108f;}else{return null;}}}};Sage.Utility.File.DefaultDropHandler=dojo.mixin(Sage.Utility.File.DefaultDropHandler,i18n.getLocalization("Sage.Utility.File","DefaultDropHandler"));return Sage.Utility.File.DefaultDropHandler;});},"Sage/Utility/File/LibraryDocument":function(){define(["Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/Utility/File","Sage/UI/Dialogs","dojo/_base/lang","dojo/string","Sage/Utility","Sage/Utility/ErrorHandler","Sage/Utility/File/DescriptionsForm","dojo/i18n!./nls/LibraryDocument"],function(_1090,_1091,_1092,_1093,dLang,_1094,_1095,_1096,_1097,nls){Sage.namespace("Utility.File.LibraryDocument");Sage.Utility.File.LibraryDocument={_stateInfo:{total:0,processed:0,successCount:0,failedCount:0},_errors:[],_store:false,_target:false,_totalProgress:0,_attachmentTemplate:false,_files:[],_fileCount:0,_uploadAttemptCount:0,_isUploading:false,_descriptionsForm:false,_uploadUrlFmt:"slxdata.ashx/slx/system/-/libraryDirectories('${0}')/documents/file",_uploadUrl:false,createDocuments:function(files,_1098){this._target=(_1098&&typeof _1098!=="undefined")?_1098:false;var _1099="Library Document";this._ensureDescriptionsForm();this._descriptionsForm.set("entityDesc",_1099);this._descriptionsForm.set("files",files);this._descriptionsForm.show();},handleDescriptions:function(files,_109a){var _109b="";var id="";var i;for(i=0;i<_109a.length;i++){_109a[i][_109b]=id;}for(i=0;i<files.length;i++){this._files.push(files[i]);}this.uploadFiles();},_checkState:function(){if(this._stateInfo.processed==this._stateInfo.total){_1093.closeProgressBar();if(this._errors.length>0){var crlf="<br>";var _109c=[];_109c.push(_1094.substitute(this.uploadError,[this._stateInfo.failedCount,this._stateInfo.successCount]));_109c.push(crlf);var self=this;dojo.forEach(this._errors,function(err,idx){if(err&&typeof err==="object"&&err.hasOwnProperty("message")){_109c.push(_1094.substitute(self.failureNumber,[(idx+1)])+err.message);if(idx!==(self._errors.length-1)){_109c.push(crlf);}}});this._errors=[];Sage.UI.Dialogs.showError(_109c.join(crlf));}dojo.publish("/sage/library/manager/libraryDocuments/refresh",null);this._resetCounts();}},_resetCounts:function(){this._fileCount=0;this._uploadAttemptCount=0;this._isUploading=false;this._totalProgress=0;this._stateInfo.processed=0;this._stateInfo.total=0;this._stateInfo.failedCount=0;this._stateInfo.successCount=0;},_failAdd:function(xhr){var _109d={url:this._uploadUrl};var _109e=_1096.getHttpStatusInfo(xhr,_109d);if(_109e&&typeof _109e==="object"){this._errors.push(_109e);}else{this._errors.push({message:this.unknownError});}this._uploadAttemptCount=this._uploadAttemptCount+1;this._updateProgress((this._fileCount<1)?100:(this._uploadAttemptCount/this._fileCount)*100);this._stateInfo.processed++;this._stateInfo.failedCount++;this._checkState();},_ensureDescriptionsForm:function(){if(!this._descriptionsForm){this._descriptionsForm=new _1097({entityDesc:"",fileType:Sage.Utility.File.fileType.ftLibraryDocs,files:this._files||[]});dojo.connect(this._descriptionsForm,"onDescriptionsEntered",this,"handleDescriptions");}},_successUpload:function(_109f){this._uploadAttemptCount=this._uploadAttemptCount+1;this._updateProgress((this._fileCount<1)?100:(this._uploadAttemptCount/this._fileCount)*100);this._stateInfo.processed++;this._stateInfo.successCount++;this._checkState();},_updateProgress:function(_10a0){var pct=this._totalProgress;if(_10a0&&_10a0.lengthComputable){var _10a1=(_10a0.loaded/_10a0.total)*100;pct+=Math.round(_10a1/this._fileCount);}else{if(_10a0){pct=_10a0;}}this._totalProgress=pct;if(pct<99){_1093.showProgressBar({pct:pct,title:this.percentComplete});}},uploadFiles:function(_10a2){this._isUploading=true;this._fileCount=this._files.length;if(_10a2&&!this._attachmentTemplate){this._attachmentTemplate=_10a2;}var _10a3="";if(Sage.Library&&Sage.Library.FileHandler){_10a3=Sage.Library.FileHandler.findDirectoryId(this._target);}var sUrl=_1094.substitute(this._uploadUrlFmt,[_10a3]);this._uploadUrl=sUrl;this._stateInfo.processed=0;this._stateInfo.total=this._files.length;while(this._files.length>0){var file=this._files.pop();Sage.Utility.File.uploadFile(file,this._uploadUrl,this._updateProgress,this._successUpload,this._failAdd,this);}}};dLang.mixin(Sage.Utility.File.LibraryDocument,nls);return Sage.Utility.File.LibraryDocument;});},"Sage/Utility/EntityRelationships":function(){define(["Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/UI/Dialogs","dojo/_base/lang","dojo/string","Sage/Utility"],function(_10a4,_10a5,_10a6,dLang,_10a7,_10a8){Sage.namespace("Utility.EntityRelationships");Sage.Utility.EntityRelationships={_store:false,getRelationships:function(_10a9,_10aa,scope){var _10ab={};if(_10a9.EntityId!==""){var id=_10a9.EntityId;var parts=_10a9.EntityType.split(".");var _10ac=parts[parts.length-1];switch(_10ac){case "IAccount":this._getAccountRelationships(id,_10aa,scope);return;case "IContact":this._getContactRelationships(id,_10aa,scope);return;case "IOpportunity":this._getOpportunityRelationships(id,_10aa,scope);return;case "ITicket":this._getTicketRelationships(id,_10aa,scope);return;case "ISalesOrder":this._getSalesOrderRelationships(id,_10aa,scope);return;case "IActivity":this._getActivityRelationships(id,_10aa,scope);return;case "IHistory":this._getHistoryRelationships(id,_10aa,scope);return;case "IContract":this._getContractRelationships(id,_10aa,scope);return;case "IReturn":this._getReturnRelationships(id,_10aa,scope);return;}var _10ad=_10a9.EntityTableName.toLowerCase()+"Id";_10ab[_10ad]=id;_10aa.call(scope||this,_10ab);return;}_10aa.call(scope||this,{});},_getRequest:function(_10ae,id){var req=new Sage.SData.Client.SDataSingleResourceRequest(_10a5.getSDataService("dynamic"));req.setResourceKind(_10ae);req.setResourceSelector("\""+id+"\"");req.setQueryArg("precedence","0");return req;},_getAccountRelationships:function(id,_10af,scope){var req=this._getRequest("accounts",id);req.setQueryArg("include","Contacts,$descriptors");req.setQueryArg("select","Contacts/IsPrimary");req.read({success:function(acc){var obj={AccountId:_10a8.getValue(acc,"$key"),AccountName:_10a8.getValue(acc,"$descriptor")};var _10b0="";var _10b1="";var _10b2=acc.Contacts.$resources;if(_10b2.length>0){_10b0=_10b2[0].$key;}for(var i=0;i<_10b2.length;i++){if(_10b2[i].IsPrimary){_10b0=_10b2[i].$key;_10b1=_10a8.getValue(_10b2[i],"$descriptor");}}obj["ContactId"]=_10b0;obj["ContactName"]=_10b1;_10af.call(scope||this,obj);},failure:function(){_10af.call(scope||this,{"AccountId":id});},scope:this});},_getContactRelationships:function(id,_10b3,scope){var req=this._getRequest("contacts",id);req.setQueryArg("include","Account,$descriptors");req.setQueryArg("select","Account");req.read({success:function(_10b4){var obj={AccountId:_10a8.getValue(_10b4,"Account.$key"),AccountName:_10a8.getValue(_10b4,"Account.$descriptor"),ContactId:_10b4.$key,ContactName:_10a8.getValue(_10b4,"$descriptor")};_10b3.call(scope||this,obj);},failure:function(){_10b3.call(scope||this,{"ContactId":id});},scope:this});},_getOpportunityRelationships:function(id,_10b5,scope){var req=this._getRequest("opportunities",id);req.setQueryArg("include","Account,Contacts,$descriptors");req.setQueryArg("select","Account,Contacts/IsPrimary,Contacts/Contact/Id");req.read({success:function(opp){var obj={AccountId:_10a8.getValue(opp,"Account.$key"),AccountName:_10a8.getValue(opp,"Account.$descriptor"),OpportunityId:opp.$key,OpportunityName:_10a8.getValue(opp,"$descriptor")};var _10b6="";var _10b7="";var _10b8=opp.Contacts.$resources;if(_10b8.length>0){_10b6=_10b8[0].Contact.$key;}for(var i=0;i<_10b8.length;i++){if(_10b8[i].IsPrimary){_10b6=_10b8[i].Contact.$key;_10b7=_10a8.getValue(_10b8[i].Contact,"$descriptor");}}obj["ContactId"]=_10b6;obj["ContactName"]=_10b7;_10b5.call(scope||this,obj);},failure:function(){_10b5.call(scope||this,{"OpportunityId":id});},scope:this});},_getSalesOrderRelationships:function(id,_10b9,scope){var req=this._getRequest("salesorders",id);req.setQueryArg("include","Account,$descriptors");req.read({success:function(so){var obj={AccountId:_10a8.getValue(so,"Account.$key"),SalesOrderId:so.$key};_10b9.call(scope||this,obj);},failure:function(){_10b9.call(scope||this,{"SalesOrderId":id});},scope:this});},_getTicketRelationships:function(id,_10ba,scope){var req=this._getRequest("tickets",id);req.setQueryArg("include","Account,Contact,$descriptors");req.read({success:function(_10bb){var obj={AccountId:_10a8.getValue(_10bb,"Account.$key"),AccountName:_10a8.getValue(_10bb,"Account.$descriptor"),ContactId:_10a8.getValue(_10bb,"Contact.$key"),ContactName:_10a8.getValue(_10bb,"Contact.$descriptor"),TicketId:_10bb.$key,TicketNumber:_10a8.getValue(_10bb,"$descriptor")};_10ba.call(scope||this,obj);},failure:function(){_10ba.call(scope||this,{"ticketId":id});},scope:this});},_getReturnRelationships:function(id,_10bc,scope){var req=this._getRequest("returns",id);req.setQueryArg("include","Account,ReturnedBy,Ticket,$descriptors");req.read({success:function(rma){var obj={ReturnId:rma.$key,ReturnNumber:_10a8.getValue(rma,"$descriptor"),AccountId:_10a8.getValue(rma,"Account.$key"),AccountName:_10a8.getValue(rma,"Account.$descriptor"),TicketId:_10a8.getValue(rma,"Ticket.$key"),TicketNumber:_10a8.getValue(rma,"Ticket.$descriptor"),ContactId:_10a8.getValue(rma,"ReturnedBy.$key"),ContactName:_10a8.getValue(rma,"ReturnedBy.$descriptor")};_10bc.call(scope||this,obj);},failure:function(){_10bc.call(scope||this,{returnId:id});},scope:this});},_getActivityRelationships:function(id,_10bd,scope){var req=this._getRequest("activities",id);req.setQueryArg("select","AccountId,ContactId,LeadId,OpportunityId,TicketId");req.read({success:function(_10be){var obj={AccountId:_10a8.getValue(_10be,"AccountId"),ActivityId:_10be.$key,ContactId:_10a8.getValue(_10be,"ContactId"),LeadId:_10a8.getValue(_10be,"LeadId"),OpportunityId:_10a8.getValue(_10be,"OpportunityId"),TicketId:_10a8.getValue(_10be,"TicketId")};_10bd.call(scope||this,obj);},failure:function(){_10bd.call(scope||this,{"ActivityId":id});},scope:this});},_getHistoryRelationships:function(id,_10bf,scope){var req=this._getRequest("history",id);req.setQueryArg("select","AccountId,ContactId,LeadId,OpportunityId,TicketId");req.read({success:function(_10c0){var obj={AccountId:_10a8.getValue(_10c0,"AccountId"),HistoryId:_10c0.$key,ContactId:_10a8.getValue(_10c0,"ContactId"),LeadId:_10a8.getValue(_10c0,"LeadId"),OpportunityId:_10a8.getValue(_10c0,"OpportunityId"),TicketId:_10a8.getValue(_10c0,"TicketId")};_10bf.call(scope||this,obj);},failure:function(){_10bf.call(scope||this,{"HistoryId":id});},scope:this});},_getContractRelationships:function(id,_10c1,scope){var req=this._getRequest("contracts",id);req.setQueryArg("include","Account,Contact,$descriptors");req.read({success:function(_10c2){var obj={AccountId:_10a8.getValue(_10c2,"Account.$key"),AccountName:_10a8.getValue(_10c2,"Account.$descriptor"),ContractId:_10c2.$key,ContractNumber:_10a8.getValue(_10c2,".$descriptor"),ContactId:_10a8.getValue(_10c2,"Contact.$key"),ContactName:_10a8.getValue(_10c2,"Contact.$descriptor")};_10c1.call(scope||this,obj);},failure:function(){_10c1.call(scope||this,{"ContractId":id});},scope:this});}};return Sage.Utility.EntityRelationships;});},"Sage/Library/FolderHandler":function(){define(["Sage/Data/SDataServiceRegistry","Sage/Services/RoleSecurityService","Sage/UI/Dialogs","Sage/Utility","dijit/ProgressBar","dojo/i18n","dojo/parser","dojo/string","dojo/_base/lang","dojo/i18n!./nls/FolderHandler"],function(_10c3,_10c4,_10c5,_10c6,_10c7,i18n,_10c8,_10c9,dLang,nls){Sage.namespace("Library.FolderHandler");dojo.mixin(Sage.Library.FolderHandler,{_getNewRequest:function(){var _10ca=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Library.FolderHandler._system);_10ca.setResourceKind("libraryDirectories");_10ca.setQueryArg("format","json");return _10ca;},_initSecurity:function(){this.can.add=this._roles.hasAccess("Entities/LibraryDirs/Add");this.can.edit=this._roles.hasAccess("Entities/LibraryDirs/Edit");this.can["delete"]=this._roles.hasAccess("Entities/LibraryDirs/Delete");this.can.manage=(this._roles.hasAccess("Administration/Manage/Library")||this._roles.hasAccess("Administration/View"));},_roles:null,_system:null,can:{add:false,edit:false,"delete":false,manage:false},resources:{},init:function(){Sage.Library.FolderHandler._roles=Sage.Services.getService("RoleSecurityService");Sage.Library.FolderHandler._initSecurity();Sage.Library.FolderHandler._system=_10c3.getSDataService("system");dLang.mixin(Sage.Library.FolderHandler.resources,nls);},addFolder:function(_10cb,_10cc,_10cd,_10ce){if(!(Sage.Library.FolderHandler.can.add||Sage.Library.FolderHandler.can.manage)){Sage.Library.FolderHandler.showAccessError();return;}var _10cf=Sage.Library.FolderHandler._getNewRequest();_10cf.create({parentId:_10cb,directoryName:_10cc},{scope:this,success:function(entry){if(_10cd&&typeof _10cd==="function"){_10cd(entry);}},failure:function(xhr,sdata){if(_10ce&&typeof _10ce==="function"){_10ce(xhr,sdata);}else{_10c6.ErrorHandler.handleHttpError(xhr,sdata,{message:Sage.Library.FolderHandler.resources.AddFolderError});}}});},deleteFolder:function(_10d0,_10d1,_10d2){if(!(Sage.Library.FolderHandler.can["delete"]||Sage.Library.FolderHandler.can.manage)){Sage.Library.FolderHandler.showAccessError();return;}var _10d3=Sage.Library.FolderHandler._getNewRequest();_10d3.setResourceSelector("'"+_10d0+"'");_10d3["delete"]({},{scope:this,ignoreETag:true,success:function(){if(_10d1&&typeof _10d1==="function"){_10d1();}},failure:function(xhr,sdata){if(_10d2&&typeof _10d2==="function"){_10d2(xhr,sdata);}else{_10c6.ErrorHandler.handleHttpError(xhr,sdata,{message:Sage.Library.FolderHandler.resources.DeleteFolderError});}}});},getOpenFolderEtag:function(item){if(item){return item.$etag;}var _10d4=dijit.byId("libraryTree");var etag=(!(_10d4.selectedNode)||_10d4.selectedNode.item.root)?_10d4.selectedNode.item.root.$etag[0]:_10d4.selectedNode.item.$etag[0];return etag;},getOpenFolderName:function(){var _10d5=dijit.byId("libraryTree");return _10d5.selectedNode.label;},handleDeleteFolderClicked:function(_10d6,event){if(Sage.Library.Manager.getOpenFolderId()==Sage.Library.Manager.getRootId()){Sage.UI.Dialogs.showWarning(Sage.Library.FolderHandler.resources.DontDeleteRoot);return;}var _10d7=Sage.Library.FolderHandler.getOpenFolderName();if(_10d7!==""){var msg=_10c9.substitute(Sage.Library.FolderHandler.resources.DeleteFolderCnfmFmt,[_10d7]);Sage.UI.Dialogs.raiseQueryDialog(Sage.Library.FolderHandler.resources.Confirm,msg,Sage.Library.FolderHandler.handleDeletefolderConfirmed,Sage.Library.FolderHandler.resources.Yes,Sage.Library.FolderHandler.resources.No,"questionIcon");}else{Sage.UI.Dialogs.showInfo(Sage.Library.FolderHandler.resources.PleaseSelectFolder);}},handleDeletefolderConfirmed:function(ok){if(ok){Sage.Library.FolderHandler.deleteFolder(Sage.Library.Manager.getOpenFolderId(),function(){dojo.publish("/sage/library/manager/libraryDirs/refresh","");});}},handleAddFolder:function(_10d8,event){Sage.UI.Dialogs.raiseInputDialog(Sage.Library.FolderHandler.resources.NewFolder,Sage.Library.FolderHandler.resources.EnterFolderName,Sage.Library.FolderHandler.handleAddFolderCallback,Sage.Library.FolderHandler.resources.OK,Sage.Library.FolderHandler.resources.Cancel);},handleAddFolderCallback:function(ok,text){if(ok){var dirid=Sage.Library.Manager.getOpenFolderId();Sage.Library.FolderHandler.addFolder(dirid,text,function(entry){if(typeof console!=="undefined"){}dojo.publish("/sage/library/manager/libraryDirs/refresh","");});}},handleEditFolderName:function(_10d9,event){if(Sage.Library.Manager.getOpenFolderId()==Sage.Library.Manager.getRootId()){Sage.UI.Dialogs.showWarning(Sage.Library.FolderHandler.resources.DontEditRoot);return;}var _10da=Sage.Library.FolderHandler.getOpenFolderName();Sage.UI.Dialogs.raiseInputDialog(Sage.Library.FolderHandler.resources.NewFolder,Sage.Library.FolderHandler.resources.EnterNewFolderName,Sage.Library.FolderHandler.handleEditFolderNameCallback,Sage.Library.FolderHandler.resources.OK,Sage.Library.FolderHandler.resources.Cancel,_10da,"[^\\\\/:\"*?<>|\r\n]+",Sage.Library.FolderHandler.resources.InvalidFolderName);},handleEditFolderNameCallback:function(ok,text){if(ok){var dirid=Sage.Library.Manager.getOpenFolderId();var etag=Sage.Library.FolderHandler.getOpenFolderEtag();Sage.Library.FolderHandler.renameFolder(dirid,text,etag,function(entry){if(typeof console!=="undefined"){}dojo.publish("/sage/library/manager/libraryDirs/refresh","");});}},handleFolderClicked:function(item,node){var _10db=dijit.byId("btnDeleteFolder");var _10dc=dijit.byId("btnEditFolder");if((typeof _10db!=="undefined")&&(_10db!==null)&&(_10dc!==null)){if(item.root){_10db.set("disabled",true);_10dc.set("disabled",true);}else{_10db.set("disabled",false);_10dc.set("disabled",false);}}dojo.publish("/sage/library/manager/libraryDocuments/refresh",item);},renameFolder:function(_10dd,_10de,etag,_10df,_10e0){if(!(Sage.Library.FolderHandler.can.edit||Sage.Library.FolderHandler.can.manage)){Sage.Library.FolderHandler.showAccessError();return;}var _10e1=Sage.Library.FolderHandler._getNewRequest();_10e1.setResourceSelector("'"+_10dd+"'");_10e1.update({$etag:etag,directoryId:_10dd,directoryName:_10de},{scope:this,success:function(entry){if(_10df&&typeof _10df==="function"){_10df(entry);}},failure:function(xhr,sdata){if(_10e0&&typeof _10e0==="function"){_10e0(xhr,sdata);}else{if(xhr.readyState==4&&xhr.status==412){Sage.UI.Dialogs.showError(Sage.Library.FolderHandler.resources.FolderUpdateConflictError);}else{_10c6.ErrorHandler.handleHttpError(xhr,sdata,{message:Sage.Library.FolderHandler.resources.RenameFolderError});}}}});},showAccessError:function(){Sage.UI.Dialogs.showError(Sage.Library.FolderHandler.resources.AccessError);}});Sage.Library.FolderHandler.init();return Sage.Library.FolderHandler;});},"Sage/Library/Manager":function(){define(["Sage/Data/SDataServiceRegistry","Sage/Library/FileHandler","Sage/Library/FolderHandler","Sage/Services/RoleSecurityService","Sage/Services/SystemOptions","Sage/UI/Dialogs","Sage/Utility","dojox/grid/DataGrid","Sage/UI/ImageButton","dijit/Toolbar","dijit/Tree","dijit/tree/ForestStoreModel","dojo/data/ItemFileWriteStore","dojo/i18n","dojo/string","dojo/_base/array","dojo/date/locale","dojo/dom-construct","dojo/_base/lang","dojo/i18n!./nls/Manager","dojox/widget/Standby"],function(_10e2,_10e3,_10e4,_10e5,_10e6,_10e7,_10e8,_10e9,_10ea,_10eb,Tree,_10ec,_10ed,i18n,_10ee,_10ef,_10f0,_10f1,dLang,nls,_10f2){Sage.namespace("Library.Manager");dojo.mixin(Sage.Library.Manager,{_convert:_10e8.Convert,_grid:null,_remote:false,_roles:null,_rootId:null,_standby:false,_system:null,_tree:null,_addButtonToToolbar:function(btn,_10f3){_10f3.addChild(new _10ea({label:btn.label,showLabel:false,iconClass:btn.icon,id:btn.id,layoutAlign:"right",onClick:function(){btn.clickHandler();}}));},_createGrid:function(){var self=this;this._grid=new _10e9({store:new _10ed({data:{items:[]}}),id:"libraryGrid",structure:[{field:"_item",name:self.resources.File,formatter:self._renderFileName,width:"160px",sortField:"fileName"},{field:"fileSize",name:self.resources.Size,formatter:self._renderSize,width:"50px"},{field:"createDate",name:self.resources.Created,formatter:self._renderDate,width:"60px"},{field:"revisionDate",name:self.resources.Revised,formatter:self._renderDate,width:"60px"},{field:"_item",name:self.resources.Expires,formatter:self._renderExpires,width:"60px",sortField:"expireDate"},{field:"description",name:self.resources.Description,width:"150px"}]});if(this._remote){var _10f4={field:"status",name:"Status",formatter:self._renderStatus,width:"150px"};this._grid.structure.splice(1,0,_10f4);this._grid.setStructure(this._grid.structure);}var _10f5=this._grid.getSortProps;this._grid.getSortProps=function(){var info=dojo.hitch(self._grid,_10f5)();if(info&&typeof info!=="undefined"){if(info[0]&&info[0]["attribute"]==="_item"){var cell=self._grid.getCell(self._grid.getSortIndex());if(cell&&typeof cell!=="undefined"&&cell.hasOwnProperty("sortField")){info[0]["attribute"]=cell.sortField;}}return info;}return null;};dojo.byId("libraryGridPlaceHolder").appendChild(this._grid.domNode);this._grid.startup();},_createGridToolbar:function(){var _10f6=new _10eb({},"gridToolbar");var btns=[];if(Sage.Library.FileHandler.can.add||Sage.Library.FileHandler.can.manage){btns.push({label:this.resources.AddFiles,id:"btnAddFiles",clickHandler:Sage.Library.FileHandler.handleAddButtonClicked,icon:"libraryIcon addFileIcon"});}btns.push({label:this.resources.FileProperties,id:"btnEditFile",clickHandler:Sage.Library.FileHandler.editLibraryFileProps,icon:"libraryIcon editFileIcon"});if(Sage.Library.FileHandler.can["delete"]||Sage.Library.FileHandler.can.manage){btns.push({label:this.resources.DeleteSelectedFile,id:"btnDeleteFile",clickHandler:Sage.Library.FileHandler.handleDeleteButtonClicked,icon:"libraryIcon deleteFileIcon"});}btns.push({label:this.resources.Help,id:"btnHelp",clickHandler:function(){window.open(Link.getHelpUrl("library"),Link.getHelpUrlTarget());},icon:"libraryIcon helpFileIcon"});for(var i=0;i<btns.length;i++){this._addButtonToToolbar(btns[i],_10f6);}},_createTreeView:function(){this.refreshDirs();},_createTreeViewToolbar:function(){var _10f7=new _10eb({},"treeToolbar");var btns=[];if(Sage.Library.FolderHandler.can.add||Sage.Library.FolderHandler.can.manage){btns.push({label:this.resources.AddFolder,id:"btnAddFolder",clickHandler:Sage.Library.FolderHandler.handleAddFolder,icon:"libraryIcon addFolderIcon"});}if(Sage.Library.FolderHandler.can.edit||Sage.Library.FolderHandler.can.manage){btns.push({label:this.resources.EditFolder,id:"btnEditFolder",clickHandler:Sage.Library.FolderHandler.handleEditFolderName,icon:"libraryIcon editFolderIcon"});}if(Sage.Library.FolderHandler.can["delete"]||Sage.Library.FolderHandler.can.manage){btns.push({label:this.resources.DeleteFolder,id:"btnDeleteFolder",clickHandler:Sage.Library.FolderHandler.handleDeleteFolderClicked,icon:"libraryIcon deleteFolderIcon"});}if(btns.length>0){for(var i=0;i<btns.length;i++){this._addButtonToToolbar(btns[i],_10f7);}}},_createView:function(){this._createTreeViewToolbar();this._createTreeView();this._createGridToolbar();this._createGrid();},_handleDeliveredDocRequest:function(_10f8){Sage.Library.FileHandler.updateRemoteStatus(_10f8,"DeliveredRead",function(){Sage.Library.Manager.refreshGrid();var sUrl=_10ee.substitute("slxdata.ashx/slx/system/-/libraryDocuments('${0}')/file",[_10f8]);window.open(sUrl,"FileWin");});},_handleOrderDocRequest:function(_10f9,_10fa){_10e7.raiseQueryDialog(Sage.Library.Manager.resources.Confirm,Sage.Library.Manager.resources.ConfirmDownload,function(_10fb){if(_10fb){Sage.Library.FileHandler.updateRemoteStatus(_10f9,_10fa,function(entry){Sage.Library.FileHandler.logRemoteDocRequest(_10f9);Sage.Library.Manager.refreshGrid();});}},Sage.Library.Manager.resources.Yes,Sage.Library.Manager.resources.No,"questionIcon");},_handleReorderDocRequest:function(_10fc){_10e7.raiseQueryDialog(Sage.Library.Manager.resources.Confirm,Sage.Library.Manager.resources.ConfirmDownloadReorder,function(_10fd){if(_10fd){Sage.Library.FileHandler.logRemoteDocRequest(_10fc);}},Sage.Library.Manager.resources.Yes,Sage.Library.Manager.resources.No,"questionIcon");},_renderDate:function(value){try{if(!value){return "";}if(dojo.isString(value)&&Sage.Library.Manager._convert.isDateString(value)){var date=Sage.Library.Manager._convert.toDateFromString(value);date=new Date(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate());return dojo.date.locale.format(date,{selector:"date"});}return "";}catch(e){if(typeof console!=="undefined"){console.error("_renderDate: %o",e);}return "";}},_renderExpires:function(item,meta,_10fe){try{if(item.expires[0]!==true){return Sage.Library.Manager.resources.Never;}return Sage.Library.Manager._renderDate(item.expireDate[0]);}catch(e){if(typeof console!=="undefined"){console.error("_renderExpires: %o",e);}return "";}},_renderFileName:function(item,index,_10ff){try{if(!Sage.Library.Manager._remote){return _10ee.substitute("<a id=\"document_${0}\" href=\"slxdata.ashx/slx/system/-/libraryDocuments('${0}')/file\" target=\"FileWin\">${1}</a>",[item.$key[0],item.fileName[0]||""]);}else{switch(item.status[0]){case "Available":return _10ee.substitute("<a id=\"document_${0}\" href=\"javascript:Sage.Library.Manager._handleOrderDocRequest('${0}', 'Ordered');\">${1}</a>",[item.$key[0],item.fileName[0]||""]);case "Revised":return _10ee.substitute("<a id=\"document_${0}\" href=\"javascript:Sage.Library.Manager._handleOrderDocRequest('${0}', 'RevisionOrdered');\">${1}</a>",[item.$key[0],item.fileName[0]||""]);case "Ordered":case "RevisionOrdered":return _10ee.substitute("<a id=\"document_${0}\" href=\"javascript:Sage.Library.Manager._handleReorderDocRequest('${0}');\">${1}</a>",[item.$key[0],item.fileName[0]||""]);case "Delivered":return _10ee.substitute("<a id=\"document_${0}\" href=\"javascript:Sage.Library.Manager._handleDeliveredDocRequest('${0}');\">${1}</a>",[item.$key[0],item.fileName[0]||""]);case "DeliveredRead":return _10ee.substitute("<a id=\"document_${0}\" href=\"slxdata.ashx/slx/system/-/libraryDocuments('${0}')/file\" target=\"FileWin\">${1}</a>",[item.$key[0],item.fileName[0]||""]);default:return item.fileName[0]||"";}}}catch(e){if(typeof console!=="undefined"){console.error("_renderFileName: %o",e);}return "";}},_renderFixed:function(n,d){try{if(typeof d!=="number"){d=2;}var m=Math.pow(10,d);var v=Math.floor(parseFloat(n)*m)/m;return v;}catch(e){if(typeof console!=="undefined"){console.error("_renderFixed: %o",e);}return "";}},_renderSize:function(value){try{if(value/(1024*1024)>0.5){return Sage.Library.Manager._renderFixed(value/(1024*1024),1)+" MB";}if(value/(1024)>0.05){return Sage.Library.Manager._renderFixed(value/(1024),1)+" KB";}return value+" B";}catch(e){if(typeof console!=="undefined"){console.error("_renderSize: %o",e);}return "";}},_renderStatus:function(value){return Sage.Library.FileHandler.translateStatus(value);},_showLoading:function(){if(this._standby===false&&this._grid.domNode){var _1100=this._grid.domNode;this._standby=new _10f2({target:_1100,color:"white",image:"images/loader_lg.gif"});document.body.appendChild(this._standby.domNode);this._standby.startup();}var self=this;window.setTimeout(function(){self._standby.show();},0);},_hideLoading:function(){var self=this;window.setTimeout(function(){if(self._standby){self._standby.hide();self._standby=false;}},1);},resources:{},init:function(){Sage.Library.Manager._roles=Sage.Services.getService("RoleSecurityService");Sage.Library.Manager._system=_10e2.getSDataService("system");dLang.mixin(Sage.Library.Manager.resources,nls);dojo.subscribe("/sage/library/manager/libraryDirs/refresh",function(){Sage.Library.Manager.refreshDirs();});dojo.subscribe("/sage/library/manager/libraryDocuments/refresh",function(item){Sage.Library.Manager.refreshGrid(item);});},createView:function(){var _1101=Sage.Services.getService("SystemOptions");if(_1101){_1101.get("DbType",function(val){this._remote=(val&&val==2);this._createView();},function(){this._createView();if(typeof console!=="undefined"){console.error("Unable to determine SystemOptions.DbType.");}},this);}else{this._createView();if(typeof console!=="undefined"){console.error("Unable to load the SystemOptions service.");}}},getDirs:function(_1102){var self=this;var _1103=new Sage.SData.Client.SDataResourceCollectionRequest(this._system);_1103.setResourceKind("libraryDirectories");_1103.setQueryArg("orderBy","fullPath");_1103.setQueryArg("format","json");_1103.setQueryArg("count",200);_1103.read({success:function(feed){var _1104=feed["$resources"];if(_1104&&dojo.isArray(_1104)&&_1104.length>0){var _1105,oData,_1106=0,_1107=false;try{var _1108=function(dir){var _1109=dojo.filter(_1105[(dir.depth-2)].items,function(item){return (item.$key==dir.parentId);});if(_1109.length==1){return _1109[0];}return null;};for(var i=_1104.length-1;i>=0;i--){if(this._remote===false&&_1104[i].directoryExists===false){_1104.splice(i,1);}}dojo.some(_1104,function(dir){if(dir.parentId.trim()=="0"){dir.parentId="0";dir.fullPath="";dir.root=true;self._rootId=dir.$key;return true;}else{return false;}});dojo.forEach(_1104,function(dir){if(dir.root!==true&&dir.fullPath.indexOf("\\")!==0){dir.fullPath="\\"+dir.fullPath;_1107=true;if(typeof console!=="undefined"){}}dir.depth=dir.fullPath.split("\\").length;if(dir.depth>_1106){_1106=dir.depth;}});if(_1107){_1104.sort(function(dir1,dir2){return (dir1.fullPath.toLocaleUpperCase().localeCompare(dir2.fullPath.toLocaleUpperCase()));});}_1104.sort(function(dir1,dir2){return dir1.depth-dir2.depth;});_1105=new Array(_1106);dojo.forEach(_1105,function(item,idx){_1105[idx]={items:[]};});dojo.forEach(_1104,function(dir){_1105[dir.depth-1].items.push(dir);});dojo.forEach(_1104,function(dir,idx){if(idx===0){if(dir.root!==true){throw new Error(_10ee.substitute(self.resources.InvalidRoot,[dir.directoryName,dir.$key]));}dir.id=dir.$key;dir.items=[];oData=dir;}else{if(dir.depth>1){switch(dir.depth){case 2:dir.id=dir.$key;dir.children=[];oData.items.push(dir);break;default:var _110a=_1108(dir);if(_110a!==null){dir.id=dir.$key;dir.children=[];if(!_110a.children){_110a.children=[];}_110a.children.push(dir);}else{if(typeof console!=="undefined"){}}break;}}}});if(typeof _1102==="function"){_1102(oData);}}catch(e){Sage.UI.Dialogs.showError(self.resources.LibraryDataError+" "+e);}}},failure:function(xhr,sdata){_10e8.ErrorHandler.handleHttpError(xhr,sdata,{message:self.resources.DirectoryInformationError});}});return true;},getOpenFolderId:function(item){var id=this.getRootId();if(item&&item.id&&item.root!==true){id=item.id;if(dojo.isArray(id)){id=id[0];}if(typeof console!=="undefined"){}}else{if(this._tree.attr("selectedItem")){id=this._tree.attr("selectedItem").id;if(dojo.isArray(id)){id=id[0];}if(typeof console!=="undefined"){}}else{if(typeof console!=="undefined"){}}}return id;},getRootId:function(){return this._rootId;},refreshDirs:function(){var self=this;this.getDirs(function(data){if(self._tree){self._tree.destroyRecursive();}var _110b=new _10ed({data:data});var _110c=new _10ec({store:_110b,rootId:data.$key,rootLabel:Sage.Library.Manager.resources.Library,labelAttr:"directoryName",childrenAttrs:["children"]});var _110d=new dojo.create("div",{id:"libraryTree"});self._tree=new dijit.Tree({model:_110c,onClick:Sage.Library.FolderHandler.handleFolderClicked,persist:false,_createTreeNode:function(args){args.id="dijit__TreeNode_"+args.item.id;return new dijit._TreeNode(args);},rootId:data.$key},_110d);var _110e=dojo.connect(self._tree,"onLoad",function(){dojo.disconnect(_110e);self.refreshGrid();});dojo.place(self._tree.domNode,"libraryTreeRoot","after");});},refreshGrid:function(item,start,count){var self=this;var id=this.getOpenFolderId(item);var _110f=100;count=count||_110f;start=start||1;if(start==1&&item){this._grid.setStore(new _10ed({data:{items:[]}}));}var _1110=new Sage.SData.Client.SDataResourceCollectionRequest(this._system);_1110.setResourceKind("libraryDocuments");_1110.setQueryArg("where",_10ee.substitute("directory.Id eq '${0}'",[id]));_1110.setQueryArg("orderBy","fileName");_1110.setQueryArg("format","json");_1110.setQueryArg("startIndex",start);_1110.setQueryArg("count",count);this._showLoading();_1110.read({success:function(feed){var _1111=0;try{_1111=feed.$totalResults;var files={items:feed["$resources"]||[]};for(var i=0;i<=files.items.length-1;i++){if(files.items[i].fileExists===false){if(!self._remote){files.items.splice(i,1);}else{if(files.items[i].status==="Delivered"||files.items[i].status==="DeliveredRead"){files.items[i].status="Available";Sage.Library.FileHandler.updateRemoteStatus(files.items[i].$key,"Available");}}}if(files.items[i].$key){self._grid.store.newItem(files.items[i]);}}}finally{self._hideLoading();}if(_1111>_110f&&_1111>=(start+count)){start=start+count;self.refreshGrid(item,start,count);}},failure:function(xhr,sdata){self._hideLoading();_10e8.ErrorHandler.handleHttpError(xhr,sdata,{message:self.resources.DocumentInformationError});}});}});Sage.Library.Manager.init();return Sage.Library.Manager;});},"Sage/MailMerge/main":function(){define(["Sage/MailMerge/Loader","Sage/MailMerge/Helper","Sage/MailMerge/MenuHelper"],function(){});},"Sage/MailMerge/Loader":function(){define(["Sage/Utility/ErrorHandler","Sage/MailMerge/Helper","Sage/MailMerge/MenuHelper","Sage/UI/Dialogs","dijit/_Widget","dojo/i18n","dojo/string","dojox/json/ref","dojo/_base/lang","dojo/i18n!./nls/Loader","dojo/_base/declare"],function(_1112,_1113,_1114,_1115,_1116,i18n,_1117,ref,dLang,nls,_1118){var _1119=_1118("Sage.MailMerge.Loader",[_1116],{constructor:function(){this.inherited(arguments);},postMixInProperties:function(){dLang.mixin(this,nls);this.inherited(arguments);},DecodeMailMergeJsonFromUrl:function(url){var _111a=null;dojo.xhrGet({url:url,preventCache:true,handleAs:"text",sync:true,load:function(data){if(data&&dojo.isString(data)&&data!==""){var _111b=data.replace(/":null/gi,"\":\"\"");_111a=ref.fromJson(_111b);}},error:function(error,_111c){_1112.handleHttpError(error,_111c);}});return _111a;},GetClientPath:function(){var _111d=String(window.location);var _111e=_111d.lastIndexOf("/");if(_111e!=-1){return _111d.substring(0,_111e);}return null;}});window.ExecuteWriteAction=function(_111f,param){_1113.ExecuteWriteAction(_111f,param);};window.GetMailMergeService=function(_1120){if(typeof console!=="undefined"){}return _1113.GetMailMergeService(_1120);};window.GetDesktopService=function(_1121){return _1113.GetMailMergeService(_1121);};if(!Sage.Services.hasService("MailMergeServiceLoader")){Sage.Services.addService("MailMergeServiceLoader",new Sage.MailMerge.Loader());}var _1122=true;var _1123=new _1114();var _1124=(navigator.userAgent.indexOf("Win")!=-1);if(_1124&&Sage&&Sage.Services){if(typeof slx!=="undefined"&&slx&&slx.com){dojo.addOnLoad(function(){_1123.attachWriteMenuPopulator();});_1122=false;}}if(_1122){try{if(typeof slx==="undefined"||!slx){if(window.console){}}if(typeof slx!=="undefined"&&slx&&!slx.com){if(window.console){}}}catch(e){}dojo.addOnLoad(function(){_1123.removeWriteMenu();});}return _1119;});},"Sage/MailMerge/Helper":function(){define(["Sage/UI/Dialogs","dijit/_Widget","dojo/i18n","dojo/string","dojo/_base/lang","dojo/i18n!./nls/Helper","dojo/i18n!./nls/Service","dojo/i18n!./nls/Lookup"],function(_1125,_1126,i18n,_1127,dLang,nls){Sage.namespace("MailMerge.Helper");dojo.mixin(Sage.MailMerge.Helper,{desktopErrorsStore:null,infoStore:null,DesktopErrors:function(){if(this.desktopErrorsStore!=null){return this.desktopErrorsStore;}else{var sPath=Sage.MailMerge.Loader.prototype.GetClientPath();if(sPath!=null){var sUrl=_1127.substitute("${0}/SLXMailMergeClient.ashx?method=GetDesktopErrors",[sPath]);var _1128=this.GetMailMergeLoader().DecodeMailMergeJsonFromUrl(sUrl);if(_1128!=null){this.desktopErrorsStore=_1128;return this.desktopErrorsStore;}}}return null;},ExecuteWriteAction:function(_1129,param){try{require(["Sage/MailMerge/Service"],function(){var _112a=Sage.MailMerge.Helper.GetMailMergeService();if(_112a){switch(_1129){case WriteAction.waWriteAddressLabels:_112a.WriteAddressLabels();break;case WriteAction.waWriteEmail:_112a.WriteEmail();break;case WriteAction.waWriteEmailUsing:_112a.WriteEmailUsing(param);break;case WriteAction.waWriteEmailUsingMore:_112a.WriteEmailUsingMoreTemplates();break;case WriteAction.waWriteFaxUsing:_112a.WriteFaxUsing(param);break;case WriteAction.waWriteFaxUsingMore:_112a.WriteFaxUsingMoreTemplates();break;case WriteAction.waWriteLetterUsing:_112a.WriteLetterUsing(param);break;case WriteAction.waWriteLetterUsingMore:_112a.WriteLetterUsingMoreTemplates();break;case WriteAction.waWriteMailMerge:_112a.WriteMailMerge();break;case WriteAction.waWriteTemplates:_112a.WriteTemplates(true);break;}}});}catch(err){var _112b="";if(this.IsSageGearsObjectError(err)){_112b=this.DesktopErrors().SageGearsObjectError;}var _112c=(dojo.isFunction(err.toMessage))?err.toMessage(_112b,this.MailMergeInfoStore().ShowJavaScriptStack):err.message;_1125.showError(_1127.substitute(this.DesktopErrors().WriteActionError,[_112c]));}},GetDesktopService:function(_112d){return this.GetMailMergeService(_112d);},GetMailMergeLoader:function(){if(Sage.Services.hasService("MailMergeServiceLoader")){return Sage.Services.getService("MailMergeServiceLoader");}return null;},GetMailMergeService:function(_112e){var _112f=true;if(typeof _112e==="boolean"){_112f=_112e;}if(Sage&&Sage.Services&&typeof slx!=="undefined"&&slx&&slx.com&&Sage.Services.hasService("MailMergeService")){return Sage.Services.getService("MailMergeService");}else{if(_112f){_1125.showError(_1127.substitute("${0} ${1}",[this.DesktopErrors().MailMergeServiceLoad,this.DesktopErrors().SageGearsObjectError]));}}return null;},IsSageGearsObjectError:function(err){if(err){var _1130="The specified class name cannot be mapped to a COM object";var _1131=this.DesktopErrors().SageGearsClassError;if((Sage.Utility.isIE&&(err.number==-2146827287))||(err.message.indexOf(_1130)!=-1)||(err.message.indexOf(_1131)!=-1)){return true;}}return false;},MailMergeInfoStore:function(){if(this.infoStore!=null){return this.infoStore;}else{var sPath=Sage.MailMerge.Loader.prototype.GetClientPath();if(sPath!=null){var sUrl=_1127.substitute("${0}/SLXMailMergeClient.ashx?method=GetInfoStore",[sPath]);var _1132=this.GetMailMergeLoader().DecodeMailMergeJsonFromUrl(sUrl);if(_1132!=null){this.infoStore=_1132;return this.infoStore;}}}return null;}});dLang.mixin(Sage.MailMerge.Helper,nls);window.WriteAction={waWriteAddressLabels:0,waWriteEmail:1,waWriteEmailUsing:2,waWriteEmailUsingMore:3,waWriteFaxUsing:4,waWriteFaxUsingMore:5,waWriteLetterUsing:6,waWriteLetterUsingMore:7,waWriteMailMerge:8,waWriteTemplates:9};return Sage.MailMerge.Helper;});},"Sage/MailMerge/MenuHelper":function(){define(["Sage/MailMerge/Helper","dojo/_base/declare"],function(_1133,_1134){var _1135=_1134("Sage.MailMerge.MenuHelper",null,{_populateWriteMenu:function(){require(["Sage/MailMerge/Service"],function(){var _1136=_1133.GetMailMergeService();if(_1136){if(!_1136.MenuPopulated){_1136.PopulateWriteMenu();}}});},_getMenuInfo:function(){var info={toolbar:null,menu:null};var _1137=dojo.byId("ToolBar");if(typeof _1137!=="undefined"&&_1137!==null){info.toolbar=_1137;for(var i=0;i<_1137.children.length;i++){var oItem=_1137.children[i];if(oItem.id=="mnuMailMerge"){info.menu=oItem;return info;}}}return info;},attachWriteMenuPopulator:function(){var info=this._getMenuInfo();if(info.menu!==null){dojo.connect(info.menu,"onclick",this._populateWriteMenu);}},removeWriteMenu:function(){var info=this._getMenuInfo();if(info.toolbar!==null&&info.menu!==null){info.toolbar.removeChild(info.menu);}}});return _1135;});},"Sage/Services/main":function(){define(["Sage/Services/_ServiceMixin","Sage/Services/ActivityAction","Sage/Services/UserOptions","Sage/Services/ActivityActionProcessor","Sage/Services/ActivityService","Sage/Services/CalendarSecurityService","Sage/Services/ClientBindingManagerService","Sage/Services/ClientContextService","Sage/Services/ClientEntityContext","Sage/Services/RoleSecurityService","Sage/Services/SelectionContextService","Sage/Services/SystemOptions","Sage/Services/JobService","Sage/Services/ReportingService"],function(){});},"Sage/Services/_ServiceMixin":function(){define(["Sage/Data/SDataServiceRegistry","dojo/_base/declare"],function(_1138,_1139){var _113a=_1139("Sage.Services._ServiceMixin",null,{serviceMap:null,constructor:function(){var map=this.serviceMap;if(map){for(var _113b in map){if(this[_113b]){continue;}this[_113b]=this._resolveService(map[_113b]);}}},_resolveService:function(_113c){if(_113c&&_113c.type==="sdata"){return _1138.getSDataService(_113c.name);}return Sage.Services.getService(_113c);}});return _113a;});},"Sage/Services/ClientBindingManagerService":function(){define(["dojo/_base/declare"],function(_113d){var _113e=_113d("Sage.Services.ClientBindingManagerService",null,{constructor:function(){this._listeners[this.ON_SAVE]=[];this.inherited(arguments);},_WatchChanges:true,_PageExitWarningMessage:"",_ShowWarningOnPageExit:false,_SkipCheck:false,_CurrentEntityIsDirty:false,_SaveBtnID:"",_MsgDisplayID:"",_entityTransactionID:"",_IgnoreDirtyFlag:false,_DirtyAjaxItems:[],_listeners:{},_init:function(){this.positionDirtyDataMessage();dojo.subscribe("Sage/events/markDirty",this,"markDirty");},positionDirtyDataMessage:function(){var title=dojo.query("#PageTitle");var _113f=dojo.query(".dirtyDataMessage");if(title&&title.length>0&&_113f&&_113f.length>0){dojo.place(_113f[0],title[0],"after");dojo.style(_113f[0],"top",dojo.marginBox(title[0]).t+"px");dojo.style(_113f[0],"left",dojo.marginBox(title[0]).w+"px");}},addListener:function(event,_1140,scope){this._listeners[event]=this._listeners[event]||[];this._listeners[event].push({listener:_1140,scope:scope});},removeListener:function(event,_1141){this._listeners[event]=this._listeners[event]||[];for(var i=0;i<this._listeners[event].length;i++){if(this._listeners[event][i].listener==_1141){break;}}this._listeners[event].splice(i,1);},onSave:function(){for(var i=0;i<this._listeners[this.ON_SAVE].length;i++){var fn=this._listeners[this.ON_SAVE][i].listener;var scope=this._listeners[this.ON_SAVE][i].scope||this;if(typeof fn==="function"){fn.call(scope);}}},SetShowWarningOnPageExit:function(_1142){this._ShowWarningOnPageExit=(_1142);if(this._ShowWarningOnPageExit){window.onbeforeunload=this.onExit;}},onExit:function(e){var mgr=Sage.Services.getService("ClientBindingManagerService");if(mgr){if(mgr._ShowWarningOnPageExit){if(mgr._SkipCheck){return;}var hdd=mgr.hasDirtyData();if(hdd&&(mgr._IgnoreDirtyFlag===false)||Sage.Utility.getModeId()==="insert"){window.setTimeout(function(){Sage.Utility.hideRequestIndicator(null,{});},1000);if(window.event){window.event.returnValue=mgr._PageExitWarningMessage;}else{return mgr._PageExitWarningMessage;}}}}return;},canChangeEntityContext:function(){if((this._WatchChanges)&&(this.hasDirtyData())&&(this._ShowWarningOnPageExit)){if(confirm(this._PageExitWarningMessage)){this.clearDirtyStatus();return true;}else{return false;}}return true;},hasDirtyData:function(){return (this._CurrentEntityIsDirty||(this._DirtyAjaxItems&&this._DirtyAjaxItems.length>0));},markDirty:function(e){var mgr=Sage.Services.getService("ClientBindingManagerService");if(mgr){if(mgr._WatchChanges){mgr._CurrentEntityIsDirty=true;if(mgr._IgnoreDirtyFlag===false){dojo.style(dojo.byId(mgr._MsgDisplayID),"display","inline");}}}},addDirtyAjaxItem:function(_1143){var mgr=Sage.Services.getService("ClientBindingManagerService");if(mgr){var len=this._DirtyAjaxItems.length;for(var i=0;i<len;i++){if(this._DirtyAjaxItems[i]===_1143){return;}}this._DirtyAjaxItems.push(_1143);if(this._WatchChanges){if(this._IgnoreDirtyFlag===false){dojo.style(dojo.byId(mgr._MsgDisplayID),"display","inline");}}}},clearDirtyAjaxItem:function(_1144){var len=this._DirtyAjaxItems.length;for(var i=0;i<len;i++){if(this._DirtyAjaxItems[i]===_1144){this._DirtyAjaxItems.splice(i,1);}}if(!this.hasDirtyData()){$("#"+this._MsgDisplayID).hide();}},clearDirtyStatus:function(){var mgr=Sage.Services.getService("ClientBindingManagerService");if(mgr){mgr._CurrentEntityIsDirty=false;$("#"+mgr._MsgDisplayID).hide();}},notifyIsSaving:function(){if(Sage.Utility.Validate._isValid){var mgr=Sage.Services.getService("ClientBindingManagerService");if(mgr){Sys.WebForms.PageRequestManager.getInstance().add_endRequest(mgr.handleEndSaveRequest);mgr.clearDirtyStatus();if(Sage.Utility.getModeId()==="insert"){mgr._SkipCheck=true;}mgr.onSave();}}},handleEndSaveRequest:function(_1145,args){var mgr=Sage.Services.getService("ClientBindingManagerService");if(mgr){if(!args.get_error()){mgr.clearDirtyStatus();}else{mgr.markDirty();}Sys.WebForms.PageRequestManager.getInstance().remove_endRequest(mgr.handleEndSaveRequest);}},saveForm:function(){var btn=dojo.byId(this._SaveBtnID);if(btn){if((btn.tagName.toLowerCase()==="input")&&(btn.type==="image")){this.notifyIsSaving();Sys.WebForms.PageRequestManager.getInstance()._doPostBack(btn.name,null);}else{if(btn.onClick){this.notifyIsSaving();btn.onClick();}}}},registerResetBtn:function(_1146){if(_1146){var btn=dojo.byId(_1146);if(btn){$addHandler(btn,"click",this.resetCurrentEntity);}}},registerSaveBtn:function(_1147,_1148){if(_1147){var btn=dojo.byId(_1147);if(btn){dojo.connect(btn,"onclick",function(){Sage.Utility.Validate.onWorkSpaceSave(_1148);});$addHandler(btn,"click",this.notifyIsSaving);if(this._SaveBtnID===""){this._SaveBtnID=_1147;}}}},registerDialogCancelBtn:function(_1149){if(_1149){var btn=dojo.byId(_1149);if(btn){$addHandler(btn,"click",this.rollbackCurrentTransaction);}}},registerBoundControls:function(_114a){if((this._WatchChanges)&&(_114a)){var _114b=_114a.split(",");var elem;for(var i=0;i<_114b.length;i++){if(dojo.byId(_114b[i])){elem=dojo.byId(_114b[i]);}else{if(dijit.byId(_114b[i])){elem=dijit.byId(_114b[i]).focusNode;}}if(elem){if(elem.attributes["slxcompositecontrol"]){this.findChildControls(elem);}else{this.attachChangeHandler(elem);}}}}this.findWarningExceptions();},findChildControls:function(elem){if((elem)&&(elem.attributes)&&(elem.attributes["slxchangehook"])&&(!elem.attributes["slxcompositecontrol"])){this.attachChangeHandler(elem);}else{if(elem.childNodes){for(var n=0;n<elem.childNodes.length;n++){this.findChildControls(elem.childNodes[n]);}}}},setDijitControlFocus:function(_114c){var _114d=dijit.byId(_114c);if(_114d){_114d.focus();if(_114d.select){_114d.select();}return true;}},setControlFocus:function(_114e){var _114f=function(elem){if(typeof elem==="undefined"){return false;}if((elem&&elem.select)&&((typeof (elem.select)=="function")||(typeof (elem.select)=="object"))){elem.select();try{elem.focus();}catch(ex){return false;}return true;}return false;};var elem=$("#"+_114e)[0];if(elem){if(_114f(elem)){return;}elem=$("#"+_114e+" TEXTAREA")[0];if((elem)&&(_114f(elem))){return;}elem=$("#"+_114e+" INPUT")[0];if(elem){if(dojo.hasClass(elem,"dijitArrowButtonInner")){if(this.setDijitControlFocus(_114e+"-SingleSelectPickList-Combo")){return;}}else{if(dojo.hasClass(elem,"dijitValidationInner")){elem=$("#"+_114e+" INPUT")[1];if((elem)&&(_114f(elem))){return;}}else{if(dojo.style(elem,"display")=="none"&&elem.classList.length===0){elem=$("#"+_114e+" INPUT")[3];if((elem)&&(_114f(elem))){return;}}}}if(_114f(elem)){return;}}elem=$("#"+_114e+" SELECT")[0];if((elem)&&(_114f(elem))){return;}}},attachChangeHandler:function(elem){if(elem){if((elem.tagName==="A")||((elem.tagName==="INPUT")&&((elem.type==="button")||(elem.type==="image")||(elem.type==="submit")))){this.registerChildPostBackWarningExceptions(elem);}else{try{elem._events=elem._events||{change:[]};$removeHandler(elem,"change",this.markDirty);}catch(e){}$addHandler(elem,"change",this.markDirty);}}},registerPostBackWarningExceptions:function(elem){if(elem){var elems=$("a,input[type='INPUT'],input[type='BUTTON'],input[type='IMAGE'],input[type='SUBMIT']",elem).get();for(var i=0;i<elems.length;i++){this.registerChildPostBackWarningExceptions(elems[i]);}}},findWarningExceptions:function(){var elems=$("span[slxcompositecontrol], div[slxcompositecontrol]").get();for(var i=0;i<elems.length;i++){this.registerPostBackWarningExceptions(elems[i]);}},registerChildPostBackWarningExceptions:function(elem){if(elem){if($(elem).hasClass("leavesPage")){return;}if((elem.tagName=="A")||((elem.tagName=="INPUT")&&((elem.type=="button")||(elem.type=="image")||(elem.type=="submit")))){try{$removeHandler(elem,"click",this.skipWarning);}catch(e){}$addHandler(elem,"click",this.skipWarning);}}},turnOffWarnings:function(){var mgr=Sage.Services.getService("ClientBindingManagerService");if(mgr){mgr._SkipCheck=true;var x=window.setTimeout(function(){var mgr=Sage.Services.getService("ClientBindingManagerService");if(mgr){mgr._SkipCheck=true;}},500);}},resumeWarning:function(){var mgr=Sage.Services.getService("ClientBindingManagerService");if(mgr){mgr._SkipCheck=false;}},skipWarning:function(){var mgr=Sage.Services.getService("ClientBindingManagerService");if(mgr){mgr._SkipCheck=true;var x=window.setTimeout(function(){var mgr=Sage.Services.getService("ClientBindingManagerService");if(mgr){mgr._SkipCheck=false;}},500);}},resetCurrentEntity:function(){var mgr=Sage.Services.getService("ClientBindingManagerService");mgr.doFormReset();if(mgr){var _1150=Sage.Services.getService("ClientContextService");if(_1150){if(_1150.containsKey("ResetCurrentEntity")){_1150.setValue("ResetCurrentEntity","true");}else{_1150.add("ResetCurrentEntity","true");}}mgr.clearDirtyStatus();}},rollbackCurrentTransaction:function(){var mgr=Sage.Services.getService("ClientBindingManagerService");mgr.doSectionReset("dialog");if(mgr){var _1151=Sage.Services.getService("ClientContextService");if(_1151){if(_1151.containsKey("RollbackEntityTransaction")){_1151.setValue("RollbackEntityTransaction",mgr._entityTransactionID);}else{_1151.add("RollbackEntityTransaction",mgr._entityTransactionID);}}}},doFormReset:function(){document.forms[0].reset();},doSectionReset:function(_1152){function _1153(_1154,_1155){if((_1154=="main")&&(document.getElementById("MainContent"))){return document.getElementById("MainContent").getElementsByTagName(_1155);}else{if((_1154=="tabs")&&(document.getElementById("TabControl"))){return document.getElementById("TabControl").getElementsByTagName(_1155);}else{if(document.getElementById("DialogWorkspace_content")){return document.getElementById("DialogWorkspace_content").getElementsByTagName(_1155);}}}return [];};var elem;var elems=_1153(_1152,"INPUT");var i;if(elems.length>0){for(i=0;i<elems.length;i++){elem=elems[i];if((elem.type==="checkbox")||(elem.type==="radio")){if(elem.checked!=elem.defaultChecked){elem.checked=elem.defaultChecked;}}else{if(elem.value!=elem.defaultValue){elem.value=elem.defaultValue;}}}elems=_1153(_1152,"TEXTAREA");for(i=0;i<elems.length;i++){elem=elems[i];if(elem.value!=elem.defaultValue){elem.value=elem.defaultValue;}}elems=_1153(_1152,"SELECT");for(i=0;i<elems.length;i++){elem=elems[i];for(var k=0;k<elem.options.length;k++){elem.options[k].selected=elem.options[k].defaultSelected;}}}else{document.forms[0].reset();}},setCurrentTransaction:function(_1156){this._entityTransactionID=_1156;},clearReset:function(){if(Sage.Services){var _1157=Sage.Services.getService("ClientContextService");if(_1157){if(_1157.containsKey("ResetCurrentEntity")){_1157.remove("ResetCurrentEntity");}if(_1157.containsKey("RollbackEntityTransaction")){_1157.remove("RollbackEntityTransaction");}}}}});if(!Sage.Services.hasService("ClientBindingManagerService")){Sage.Services.addService("ClientBindingManagerService",new Sage.Services.ClientBindingManagerService());}return _113e;});},"Sage/Services/ClientContextService":function(){define(["dojo/_base/declare"],function(_1158){var _1159=_1158("Sage.Services.ClientContextService",null,{contextDataFieldId:false,_items:[],_watches:[],constructor:function(opts){dojo.mixin(this,opts);this.load();},_toItemLiteral:function(key,value){var _115a={};_115a.itemKey=key;_115a.itemVal=value;return _115a;},_indexOf:function(key){for(var i=0;i<this._items.length;i++){if(this._items[i].itemKey==key){return i;}}return -1;},_indexOfNoCase:function(key){for(var i=0;i<this._items.length;i++){if(this._items[i].itemKey.toUpperCase()==key.toUpperCase()){return i;}}return -1;},_throwKeyNotFound:function(key){throw "Entry Not Found: "+key;},_throwDuplicateKey:function(key){throw "Entry Already Exists: "+key;},add:function(key,value){if(this._indexOf(key)===-1){var lit=this._toItemLiteral(key,value);this._items.push(lit);this.save();}else{this._throwDuplicateKey(key);}},remove:function(key){var index=this._indexOf(key);if(index!==-1){this._items.splice(index,1);this.save();}},setValue:function(key,value){var index=this._indexOf(key);if(index!==-1){this._items[index].itemVal=value;this.save();}else{this._throwKeyNotFound(key);}},getValue:function(key){var index=this._indexOf(key);if(index!==-1){return decodeURIComponent(this._items[index].itemVal);}else{this._throwKeyNotFound(key);}},getValueEx:function(key,_115b){var index;if(_115b){index=this._indexOfNoCase(key);}else{index=this._indexOf(key);}if(index!==-1){return decodeURIComponent(this._items[index].itemVal);}else{this._throwKeyNotFound(key);}},clear:function(){this._items=[];this.save();},containsKey:function(key){return (this._indexOf(key)!==-1);},containsKeyEx:function(key,_115c){if(_115c){return (this._indexOfNoCase(key)!==-1);}else{return (this._indexOf(key)!==-1);}},getCount:function(){return this._items.length;},hasKeys:function(){return this._items.length===0;},getKeys:function(){var _115d=[],i;for(i=0;i<this._items.length;i++){_115d.push(this._items[i].itemKey);}return _115d;},valueAt:function(index){if(this._items[index]){return decodeURIComponent(this._items[index].itemVal);}else{return null;}},keyAt:function(index){this.load();if(this._items[index]){return this._items[index].itemKey;}else{return null;}},getValues:function(){var _115e=[],i;for(i=0;i<this._items.length;i++){_115e.push(decodeURIComponent(this._items[i].itemVal));}return _115e;},save:function(hours){var data=document.getElementById(this.contextDataFieldId);if(data){data.value=this.toString();}else{alert("can't find context data field");}},load:function(){var data=document.getElementById(this.contextDataFieldId);if(data){if(data.value){this.fromString(data.value);}}},toString:function(){var str="",i;for(i=0;i<this._items.length;i++){str+=this._items[i].itemKey+"="+encodeURIComponent(this._items[i].itemVal);if(i!==this._items.length-1){str+="&";}}return str;},fromString:function(_115f){this._items=[];if(_115f!==""){var items=_115f.split("&"),i;for(i=0;i<items.length;i++){var pair=items[i].split("=");this._items.push(this._toItemLiteral(pair[0],decodeURIComponent(pair[1])));}}this.save();}});return _1159;});},"Sage/Services/SelectionContextService":function(){define(["dojo/_base/declare"],function(_1160){var _1161=_1160("Sage.Services.SelectionContextService",null,{_url:"",constructor:function(){this._url="slxdata.ashx/slx/crm/-/SelectionService";},getSelectionInfo:function(key,_1162){if(typeof key==="undefined"||key===null){key="";}dojo.xhrGet({url:this._url,handleAs:"json",load:function(data){_1162(data);},error:function(_1163,_1164,error){}});},getSelectedIds:function(_1165,_1166){dojo.xhrGet({url:this._url,handleAs:"json",load:function(data){_1166(data);},error:function(_1167,_1168,error){}});},setSelectionContext:function(key,_1169,_116a){dojo.xhrPost({url:dojo.string.substitute("${0}/SetSelectionContext?key=${1}",[this._url,key]),handleAs:"json",load:function(data){_116a(data);},error:function(_116b,_116c,error){_116a(error);},postData:dojo.toJson(_1169)});}});Sage.Services.addService("SelectionContextService",new Sage.Services.SelectionContextService());return _1161;});},"Sage/Services/JobService":function(){define(["Sage/Utility","Sage/UI/Dialogs","dojo/_base/declare","dojo/string","dojo/i18n!./nls/JobService"],function(_116d,_116e,_116f,_1170,_1171){var _1172=_116f("Sage.Services.JobService",null,{getSchedulingSDataService:function(){var svc=new Sage.SData.Client.SDataService({serverName:window.location.hostname,virtualDirectory:Sage.Utility.getVirtualDirectoryName()+"/slxdata.ashx",applicationName:"$app",contractName:"scheduling",port:window.location.port&&window.location.port!==80?window.location.port:false,protocol:/https/i.test(window.location.protocol)?"https":false,json:true});return svc;},getJobDefinition:function(_1173){if(!_1173){_116e.showError(_1170.substitute(_1171.txtInvalidParameter,["options"]),"Job Service");return;}if(typeof _1173.key!=="string"){_116e.showError(_1170.substitute(_1171.txtInvalidParameter,["options.key"]),"Job Service");return;}var svc=this.getSchedulingSDataService();var _1174=new Sage.SData.Client.SDataSingleResourceRequest(svc);_1174.setQueryArg("include","$descriptors");_1174.setResourceKind(_1170.substitute("${0}('${1}')",[_1173.resourceKind,_1173.key]));_1174.read({success:function(_1175){if(_1173.success){_1173.success(_1175);}},failure:function(xhr,sdata){var _1176="getJobDefinition: "+_1170.substitute(_1171.txtUnexpectedError,[xhr.status,xhr.statusText]);if(_1173.failure){_1173.failure(xhr,sdata);}}});},getExecution:function(_1177){if(!_1177){_116e.showError(_1170.substitute(_1171.txtInvalidParameter,["options"]),"Job Service");return;}if((typeof _1177.triggerId!=="string")&&(typeof _1177.executionId!=="string")){_116e.showError(_1170.substitute(_1171.txtInvalidParameter,["options.triggerId or options.executionId"]),"Job Service");return;}var svc=this.getSchedulingSDataService();var _1178=new Sage.SData.Client.SDataSingleResourceRequest(svc);if(typeof _1177.triggerId==="string"){_1178.setResourceKind("executions");_1178.setQueryArg("include","$descriptors");_1178.setQueryArg("where",_1170.substitute("triggerId eq '${0}'",[_1177.triggerId]));}if(typeof _1177.executionId==="string"){_1178.setResourceKind(_1170.substitute("executions('${0}')",[_1177.executionId]));}_1178.read({success:function(_1179){if(_1177.success){_1177.success(_1179);}},failure:function(xhr,sdata){var _117a="getExecution: "+_1170.substitute(_1171.txtUnexpectedError,[xhr.status,xhr.statusText]);console.error(_117a);if(_1177.failure){_1177.failure(xhr,sdata);}}});},interruptExecution:function(_117b){if(!_117b){_116e.showError(_1170.substitute(_1171.txtInvalidParameter,["options"]),"Job Service");return;}if(typeof _117b.key!=="string"){_116e.showError(_1170.substitute(_1171.txtInvalidParameter,["options.key"]),"Job Service");return;}var _117c=this.getSchedulingSDataService();var _117d=new Sage.SData.Client.SDataServiceOperationRequest(_117c);_117d.setApplicationName("$app");_117d.setOperationName("interrupt");_117d.setResourceKind("executions('"+_117b.key+"')");var entry={};_117d.execute(entry,{success:function(_117e){if(_117b.success){_117b.success(_117e);}},failure:function(xhr,sdata){var _117f=_1170.substitute(_1171.txtTriggerJobError,[_117b.key,xhr.status,xhr.statusText]);console.error(_117f);if(_117b.failure){_117b.failure(xhr,sdata);}}});},scheduleJob:function(_1180){if(!_1180){_116e.showError(_1170.substitute(_1171.txtInvalidParameter,["options"]),"Job Service");return;}if(typeof _1180.key!=="string"){_116e.showError(_1170.substitute(_1171.txtInvalidParameter,["options.key"]),"Job Service");return;}var _1181=this.getSchedulingSDataService();var entry={$descriptor:_1180.descriptor?_1180.descriptor:"",job:{$key:_1180.key},startTimeUtc:_1180.startTime,endTimeUtc:_1180.endTime,parameters:_1180.parameters,cronExpression:_1180.cronExpression};var _1182=new Sage.SData.Client.SDataApplicationRequest(_1181);_1182.setResourceKind("triggers");_1182.execute=function(entry,_1183){return _1182.service.executeServiceOperation(_1182,entry,_1183);},_1182.execute(entry,{success:function(_1184){if(_1180.success){_1180.success(_1184);}},failure:function(xhr,sdata){var _1185=_1170.substitute(_1171.txtScheduleJobError,[_1180.key,xhr.status,xhr.statusText]);console.error(_1185);if(_1180.failure){_1180.failure(xhr,sdata);}}});},getTrigger:function(_1186){if(!_1186){_116e.showError(_1170.substitute(_1171.txtInvalidParameter,["options"]),"Job Service");return;}if((typeof _1186.triggerId!=="string")){_116e.showError(_1170.substitute(_1171.txtInvalidParameter,["options.triggerId"]),"Job Service");return;}var _1187=this.getSchedulingSDataService();var _1188=new Sage.SData.Client.SDataSingleResourceRequest(_1187);_1188.setResourceKind(_1170.substitute("triggers('${0}')",[_1186.triggerId]));_1188.read({success:function(_1189){if(_1186.success){_1186.success(_1189);}},failure:function(xhr,sdata){var _118a="getExecution: "+_1170.substitute(_1171.txtUnexpectedError,[xhr.status,xhr.statusText]);console.error(_118a);if(_1186.failure){_1186.failure(xhr,sdata);}}});},updateTrigger:function(_118b){if(!_118b){_116e.showError(_1170.substitute(_1171.txtInvalidParameter,["options"]),"Job Service");return;}if(typeof _118b.key!=="string"){_116e.showError(_1170.substitute(_1171.txtInvalidParameter,["options.key"]),"Job Service");return;}var _118c=this.getSchedulingSDataService();var entry={$descriptor:_118b.descriptor,job:{$key:_118b.key},startTimeUtc:_118b.startTime,endTimeUtc:_118b.endTime,parameters:_118b.parameters,cronExpression:_118b.cronExpression};var _118d=new Sage.SData.Client.SDataSingleResourceRequest(_118c);_118d.setResourceKind("triggers");_118d.setResourceSelector(_1170.substitute("'${0}'",[_118b.key]));_118d.update(entry,{success:function(_118e){if(_118b.success){_118b.success(_118e);}},failure:function(xhr,sdata){var _118f=_1170.substitute(_1171.txtScheduleJobError,[_118b.key,xhr.status,xhr.statusText]);if(_118b.failure){_118b.failure(xhr,sdata);}}});},deleteScheduledJob:function(key,def){if(!key){return false;}var defer=(typeof def==="object"&&def!==null);var _1190=this.getSchedulingSDataService();var _1191=new Sage.SData.Client.SDataApplicationRequest(_1190);_1191.setApplicationName("$app");_1191.setQueryArg("format","json");_1191.setQueryArg("hasErrorHandler","true");_1191.setResourceKind(_1170.substitute("triggers('${0}')",[key]));dojo.xhrDelete({handleAs:"json",url:_1191.uri.toString(),preventCache:true,load:function(data){if(defer){def.callback(data);}},error:function(error,_1192){_116d.ErrorHandler.handleHttpError(error,_1192);if(defer){def.errback(error);}}});return true;},triggerJob:function(_1193){if(!_1193){_116e.showError(_1170.substitute(_1171.txtInvalidParameter,["options"]),"Job Service");return;}if(typeof _1193.key!=="string"){_116e.showError(_1170.substitute(_1171.txtInvalidParameter,["options.key"]),"Job Service");return;}var _1194=this.getSchedulingSDataService();var entry={name:_1193.key,request:{parameters:_1193.parameters?_1193.parameters:[]}};var _1195=new Sage.SData.Client.SDataServiceOperationRequest(_1194);_1195.setApplicationName("$app");_1195.setOperationName("trigger");_1195.setResourceKind("jobs('"+_1193.key+"')");_1195.execute(entry,{success:function(_1196){if(_1193.success){_1193.success(_1196);}},failure:function(xhr,sdata){var _1197=_1170.substitute(_1171.txtTriggerJobError,[_1193.key,xhr.status,xhr.statusText]);console.error(_1197);if(_1193.failure){_1193.failure(xhr,sdata);}}});}});if(!Sage.Services.hasService("JobService")){Sage.Services.addService("JobService",new Sage.Services.JobService());}return _1172;});},"Sage/Services/ReportingService":function(){define(["dojo/_base/declare","dojo/string","dojo/i18n!./nls/ReportingService","Sage/Utility/Jobs","Sage/Reporting/Enumerations","dojo/json","dojo/_base/array","Sage/MainView/ReportMgr/ReportWizardController","Sage/MainView/ReportMgr/Crystal/CrystalReportsUtility","Sage/UI/Dialogs"],function(_1198,_1199,_119a,jobs,_119b,_119c,_119d,_119e,_119f,_11a0){var _11a1=_1198("Sage.Services.ReportingService",null,{startWizard:function(_11a2){_119e.startWizard(_11a2);},runReport:function(_11a3){_11a3.key=this._getJobId(_11a3.reportType);jobs.triggerJobAndDisplayProgressDialog(_11a3);},scheduleReport:function(_11a4){_11a4.key=this._getJobId(_11a4.reportType);var _11a5=Sage.Services.getService("JobService");_11a5.scheduleJob(_11a4);},getSchedule:function(_11a6){var _11a7=Sage.Services.getService("JobService");_11a7.getTrigger(_11a6);},updateSchedule:function(_11a8){var _11a9=Sage.Services.getService("JobService");_11a9.updateTrigger(_11a8);},getReportMetadata:function(_11aa){if(!_11aa||typeof _11aa.reportId!=="string"){console.error("getReportMetadata: Missing parameters");return;}var _11ab,_11ac,name,_11ad;if(_11aa.reportId.indexOf(":")!==-1){_11ab=_11aa.reportId.split(":")[0];name=_11aa.reportId.split(":")[1];}else{_11ac=_11aa.reportId;}var _11ae=Sage.Data.SDataServiceRegistry.getSDataService("system");if(_11ab&&name){_11ad=new Sage.SData.Client.SDataResourceCollectionRequest(_11ae);_11ad.setResourceKind("reports");_11ad.setQueryArg("where","family eq '"+_11ab+"' and name eq '"+name+"'");_11ad.setQueryArg("count","1");_11ad.read({success:function(_11af){if(_11af&&_11af.$resources&&_11af.$resources.length===1){if(_11aa.success){_11aa.success(_11af.$resources[0]);}}},failure:function(xhr,sdata){var _11b0="ReportingService.getReportMetadata: "+_1199.substitute(_119a.txtUnexpectedError,[xhr.status,xhr.statusText]);console.error(_11b0);if(_11aa.failure){_11aa.failure(xhr,sdata);}}});return;}else{_11ad=new Sage.SData.Client.SDataSingleResourceRequest(_11ae);_11ad.setResourceKind("reports");_11ad.setResourceSelector("'"+_11ac+"'");_11ad.read({success:function(_11b1){if(_11aa.success){_11aa.success(_11b1);}},failure:function(xhr,sdata){var _11b2="ReportingService.getReport: "+_1199.substitute(_119a.txtUnexpectedError,[xhr.status,xhr.statusText]);console.error(_11b2);if(_11aa.failure){_11aa.failure(xhr,sdata);}}});}},_getJobId:function(_11b3){switch(_11b3){case _119b.ReportTypes.CrystalReport:return "Saleslogix.Reporting.Jobs.CrystalReportsJob";default:throw _1199.substitute(_119a.txtUnsupportedReportType,[_11b3]);}},defaultDetailReports:null,defaultReport:null,reportJob:null,showReport:function(_11b4,_11b5,_11b6){if(!this.isValidString(_11b4)){_11a0.showError(this.getDisplayError(_119a.invalidReportPluginError));return;}if(!this.isValidString(_11b5)){_11a0.showError(this.getDisplayError(_119a.invalidTableNameError));return;}if(!this.isValidString(_11b6)&&!(_11b6 instanceof Array)){_11a0.showError(this.getDisplayError(_119a.invalidEntityError));return;}this.showReportViewer(_11b4,_11b5,_11b6);},showDefaultReport:function(){var _11b7=this.getCurrentReport();if(this.isValidString(_11b7)){var _11b8=_119f.getCurrentEntityCondition();var _11b9={reportId:_11b7,reportOptions:{wizardOptions:{hiddenSteps:[_119b.CrystalReportWizardStep.Conditions,_119b.CrystalReportWizardStep.ExportOptions]},scheduleOptions:{executionType:_119b.ExecutionType.OnDemand},exportOptions:{outputFormat:_119b.ReportExportFormat.Pdf},conditionOptions:{conditions:[_11b8],conditionsConnector:_119b.ReportConditionConnector.And}}};this.startWizard(_11b9);}else{_11a0.showError(this.getDisplayError(_119a.noDefaultReportError));}},showReportById:function(_11ba){this.showReportViewerInContext(_11ba);},showReportByName:function(_11bb){this.showReportViewerInContext(_11bb);},showReportViewerInContext:function(_11bc){if(!this.isValidString(_11bc)){_11a0.showError(this.getDisplayError(_119a.invalidReportPluginError));return;}var _11bd=this.getCurrentContext();if(typeof console!=="undefined"){}this.showReportViewer(_11bc,_11bd.tablename,_11bd.entityid);},showReportViewer:function(_11be,_11bf,_11c0){if(!this.isValidString(_11be)){_11a0.showError(this.getDisplayError(_119a.invalidReportPluginError));return;}if(!this.isValidString(_11bf)){_11a0.showError(this.getDisplayError(_119a.invalidTableNameError));return;}if(!this.isValidString(_11c0)&&!(_11c0 instanceof Array)){_11a0.showError(this.getDisplayError(_119a.invalidEntityError));return;}this.setReportJob(_11be,_11bf,_11c0);this._showReport();},setReportJob:function(_11c1,_11c2,_11c3){if(typeof _11c1!=="string"){console.error("setReportJob: Invalid parameter 'reportId'.");return;}if(typeof _11c2!=="string"){console.error("setReportJob: Invalid parameter 'tableName'.");return;}if((typeof _11c3!=="string")&&!(_11c3 instanceof Array)){console.error("setReportJob: Invalid parameter 'entityIds'.");return;}var _11c4=this._getRecordSelectionFormula(_11c2,_11c3);this.reportJob=this.newReportJob();this.reportJob.pluginid=_11c1;this.reportJob.rsf=_11c4;},_getRecordSelectionFormula:function(_11c5,_11c6){if(this.isValidString(_11c6)){if(_11c6.indexOf(",")!==-1){_11c6=_11c6.split(",");}else{_11c6=[_11c6];}}if(_11c6.length===0){console.error("showReport: At least one entity id must be passed as argument.");return;}if(typeof _11c5!=="string"){console.error("_getRecordSelectionFormula: Invalid parameter 'tableName'.");return;}if(!(_11c6 instanceof Array)){console.error("_getRecordSelectionFormula: Invalid parameter 'entityIds'.");return;}var _11c7=_11c5.toUpperCase()+"."+_11c5.toUpperCase()+"ID";var _11c8;if(_11c6.length===1){_11c8="({"+_11c7+"} = \""+_11c6[0]+"\")";}else{var _11c9=[];_119d.forEach(_11c6,function(_11ca,i){_11ca="\""+_11ca+"\"";_11c9.push(_11ca);});_11c8="({"+_11c7+"} in ["+_11c9.join(",")+"])";}return _11c8;},newReportJob:function(){var _11cb={pluginid:"",rsf:"",sortdirections:"",sortfields:""};return _11cb;},showReportEx:function(_11cc){this.reportJob=_11cc;this._showReport();},_showReport:function(){var _11cd=this.getReportId(this.reportJob.pluginid);var _11ce={reportId:_11cd,reportOptions:{wizardOptions:{hiddenSteps:[_119b.CrystalReportWizardStep.Conditions,_119b.CrystalReportWizardStep.ExportOptions]},scheduleOptions:{executionType:_119b.ExecutionType.OnDemand},exportOptions:{outputFormat:_119b.ReportExportFormat.Pdf},conditionOptions:{conditionsConnector:_119b.ReportConditionConnector.And,recordSelectionFormula:this.reportJob.rsf}}};this.startWizard(_11ce);},getCurrentReport:function(){var _11cf=this.getCurrentContext();if(_11cf.tablename===""||_11cf.entityid===""){return null;}switch(_11cf.tablename){case "ACCOUNT":return this.getAccountReport();case "CONTACT":return this.getContactReport();case "OPPORTUNITY":return this.getOpportunityReport();case "DEFECT":return this.getDefectReport();case "SALESORDER":return this.getSalesOrderReport();case "TICKET":return this.getTicketReport();default:return this.getDefaultReport();}},getDefaultReport:function(){return this.defaultReport;},setDefaultReport:function(value){this.defaultReport=value;},getReport:function(_11d0){this._initReports();var _11d1=null;if(this.isValidString(_11d0)&&dojo.isObject(this.defaultDetailReports)){dojo.some(this.defaultDetailReports,function(_11d2){if(_11d2.maintable.toUpperCase()==_11d0.toUpperCase()){var _11d3=_1199.substitute("${0}:${1}",[_11d2.family,_11d2.name]);_11d1=_11d3;return true;}else{return false;}});}return _11d1;},setReport:function(value,_11d4){var _11d5=this.parseReport(value);if(_11d5!==null){var _11d6=_11d4||_11d5.family.toUpperCase();this.setReportEx(_11d6,_11d5.family,_11d5.name);}},setReportEx:function(_11d7,_11d8,name){this._initReports();if(this.isValidString(_11d7)&&this.isValidString(_11d8)&&this.isValidString(name)&&dojo.isObject(this.defaultDetailReports)){var _11d9=dojo.some(this.defaultDetailReports,function(_11da){if(_11da.maintable.toUpperCase()==_11d7.toUpperCase()){_11da.family=_11d8;_11da.name=name;return true;}else{return false;}});if(!_11d9){var _11db={"maintable":_11d7,"family":_11d8,"name":name};this.defaultDetailReports.push(_11db);}}},getAccountReport:function(){return this.getReport("ACCOUNT");},setAccountReport:function(value){this.setReport(value,"ACCOUNT");},getContactReport:function(){return this.getReport("CONTACT");},setContactReport:function(value){this.setReport(value,"CONTACT");},getOpportunityReport:function(){return this.getReport("OPPORTUNITY");},setOpportunityReport:function(value){this.setReport(value,"OPPORTUNITY");},getDefectReport:function(){return this.getReport("DEFECT");},setDefectReport:function(value){this.setReport(value,"DEFECT");},getSalesOrderReport:function(){return this.getReport("SALESORDER");},setSalesOrderReport:function(value){this.setReport(value,"SALESORDER");},getTicketReport:function(){return this.getReport("TICKET");},setTicketReport:function(value){this.setReport(value,"TICKET");},saveDefaultReports:function(_11dc,_11dd){if(dojo.isObject(this.defaultDetailReports)){var _11de=Sage.Services.getService("UserOptions");if(_11de){var _11df=function(_11e0){if(typeof _11dc==="function"){_11dc(_11e0);}};var _11e1=function(_11e2){if(typeof console!=="undefined"){console.error("saveDefaultReports: %o",_11e2);}if(typeof _11dd==="function"){_11dd(_11e2);}};var _11e3={"defaultDetailReports":this.defaultDetailReports};var _11e4=dojo.toJson(_11e3);if(typeof console!=="undefined"){}_11de.set("DefaultDetailReports","Reporting",_11e4,_11df,_11e1);}}},getReportId:function(value){var _11e5=null;if(this.isValidString(value)){if(value.indexOf(":")!=-1){dojo.xhrGet({url:"SLXReportsHelper.ashx?method=GetReportId&report="+encodeURIComponent(value),handleAs:"text",preventCache:true,sync:true,load:function(data,_11e6){_11e5=data;},error:function(_11e7,_11e8){if(typeof console!=="undefined"){console.error(_11e8);}}});}else{if(value.length==12){_11e5=value;}}}return _11e5;},getCurrentContext:function(){var _11e9={"tablename":"","entityid":""};if(Sage.Services.hasService("ClientEntityContext")){var _11ea=Sage.Services.getService("ClientEntityContext");if(!_11ea){return _11e9;}var _11eb=_11ea.getContext();if(!_11eb||typeof _11eb.EntityTableName==="undefined"){return _11e9;}_11e9.tablename=_11eb.EntityTableName.toUpperCase();_11e9.entityid=_11eb.EntityId;}return _11e9;},parseReport:function(value){if(this.isValidString(value)){var _11ec=value.split(":");if(dojo.isArray(_11ec)&&_11ec.length==2){return {"family":_11ec[0],"name":_11ec[1]};}}return null;},isValidString:function(s){return (s&&(typeof s==="string"));},_initReports:function(){if(this.defaultDetailReports===null){var self=this;dojo.xhrGet({url:"slxdata.ashx/slx/crm/-/useroptions/Reporting/DefaultDetailReports",handleAs:"json",preventCache:true,sync:true,load:function(_11ed,_11ee){if(dojo.isObject(_11ed)&&typeof _11ed.optionValue!=="undefined"&&_11ed.optionValue!==""){var obj=dojo.fromJson(_11ed.optionValue);if(obj&&typeof obj.defaultDetailReports!=="undefined"&&dojo.isArray(obj.defaultDetailReports)){dojo.mixin(self,obj);}}},error:function(_11ef,_11f0){if(typeof console!=="undefined"){console.error(_11f0);}}});}if(this.defaultDetailReports===null){this.defaultDetailReports=[{"maintable":"ACCOUNT","family":"Account","name":"Account Detail"},{"maintable":"CONTACT","family":"Contact","name":"Contact Detail"},{"maintable":"OPPORTUNITY","family":"Opportunity","name":"Opportunity Detail"},{"maintable":"DEFECT","family":"Defect","name":"Support Defect"},{"maintable":"TICKET","family":"Ticket","name":"Support Ticket"},{"maintable":"SALESORDER","family":"Sales Order","name":"Sales Order Detail"}];}},getDisplayError:function(msg){return _1199.substitute("${0} ${1}",[_119a.reportCannotBeShownError,msg]);}});if(!Sage.Services.hasService("ReportingService")){Sage.Services.addService("ReportingService",new Sage.Services.ReportingService());}return _11a1;});},"Sage/Utility/Jobs":function(){define(["Sage/Utility","dojo/date/locale","dojo/string","dojo/_base/declare","Sage/UI/Dialogs","dojo/i18n!./nls/Jobs","dijit/ProgressBar","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dojo/_base/array","dijit/registry"],function(_11f1,_11f2,_11f3,_11f4,_11f5,_11f6,_11f7,_11f8,lang,_11f9,_11fa){Sage.namespace("Utility.Jobs");lang.mixin(Sage.Utility.Jobs,{_intervalId:null,_triggerId:null,_jobService:null,_options:null,_pollIntervalInSeconds:5,progressDialog:false,progressBar:false,cancelButton:null,triggerJobAndDisplayProgressDialog:function(_11fb){var self=this;self._reset();if(!this._validateOptions(_11fb)){return;}self._options={key:_11fb.key,closable:(typeof _11fb.closable==="boolean")?_11fb.closable:true,infoMessage:(typeof _11fb.infoMessage==="string")?_11fb.infoMessage:"",title:(typeof _11fb.title==="string")?_11fb.title:_11f6.defaultProgressDialogTitle,showDismissButton:(typeof _11fb.showDismissButton==="boolean")?_11fb.showDismissButton:true,width:(typeof _11fb.width==="number")?_11fb.width:400,indeterminate:(typeof _11fb.indeterminate==="boolean")?_11fb.indeterminate:false,maximum:(typeof _11fb.maximum==="number")?_11fb.maximum:100,showCompleteNotification:(typeof _11fb.showCompleteNotification==="boolean")?_11fb.showCompleteNotification:false,showErrorNotification:(typeof _11fb.showErrorNotification==="boolean")?_11fb.showErrorNotification:true,failure:_11fb.failure,complete:_11fb.complete,ensureZeroFilters:_11fb.ensureZeroFilters===true?true:false};var _11fc={descriptor:_11fb.descriptor,key:_11fb.key,parameters:_11fb.parameters,success:function(_11fd){self._showProgressDialog(_11fd.response?_11fd.response.triggerId:_11fd.$key);},failure:function(xhr,sdata){if(self._options.showErrorNotification){_11f1.ErrorHandler.handleHttpError(xhr,sdata);}if(self._options.failure){var _11fe=self._getErrorMessage(xhr);self._options.failure(_11fe);}}};this._jobService=Sage.Services.getService("JobService");this._jobService.scheduleJob(_11fc);dojo.publish("/job/execution/changed",[self]);},formatElapsedTime:function(_11ff){if(!_11ff){_11ff="00:00:00.00000";}var _1200=_11ff.split(".");return _1200[0];},formatJobDescription:function(job){return !job?"":job.$descriptor;},formatDate:function(_1201){if(!_1201){return "";}var _1202=new Date(parseInt(_1201.substr(6)));return _11f2.format(_1202,{selector:"datetime",fullYear:true});},formatUser:function(user){return user?user.$descriptor:"";},formatRepeatCount:function(_1203){if(_1203===-1){return _11f6.repeatIndefinitely;}return _1203;},formatJobResult:function(item,_1204,cell){var _1205=cell.grid.store.getValue(item,"result");return !_1205?"":Sage.Utility.Jobs.formatJobResultLink(_1205,item.trigger);},formatJob:function(value){return !value?"":Sage.Utility.Jobs.formatJobResultLink(value.result,value.trigger);},formatJobResultLink:function(_1206,_1207){var parts=_1206.split("://");if(parts.length>1){switch(parts[0]){case "SlxAttachment":return _11f3.substitute("<a href=\"javascript: Sage.Utility.File.Attachment.getAttachment('${1}');\" title=\"${0}\">${0}</a>",[_1207?_1207.$descriptor:"",parts[1]]);case "GoToEntity":return _11f3.substitute("<a href=\"${0}.aspx?entityid=${1}&modeid=Detail\">${2}</a>",[parts[1],parts[2],_1207?_1207.$descriptor:""]);case "GoToGroup":return _11f3.substitute("<a href=\"${0}.aspx?gid=${1}&modeid=list\">${2}</a>",[parts[1],parts[2],_1207?_1207.$descriptor:""]);}}return "";},getTriggerDescription:function(_1208){if(_1208){if(_1208.$descriptor){return _1208.$descriptor;}else{return _1208.$key;}}return "";},formatProgress:function(_1209){if(!_1209||typeof _1209!=="number"){_1209=0;}var _120a=new _11f7({indeterminate:false,maximum:100,value:_1209});return _120a;},getParameterRunAsUser:function(_120b){if(_120b){var _120c=this._getParameterValue(_120b,"RunAsUserId");return _11f1.getUserName(_120c);}return "";},refreshList:function(tabId){try{var panel=dijit.byId("list");if(panel){var _120d=Sage.Services.getService("ClientGroupContext");if(_120d){var ctx=_120d.getContext();if(tabId===ctx.CurrentGroupID){panel.refreshView(tabId);}}}}catch(e){}},getCurrentGroupId:function(){var svc=Sage.Services.getService("ClientGroupContext");var _120e=svc.getContext();return _120e.CurrentGroupID;},getLookupConditionsForJob:function(){var _120f=[];var _1210=Sage.Services.getService("ClientGroupContext");var self=this;if(_1210){var _1211=_1210.getContext();if(_1211&&_1211.CurrentGroupID==="LOOKUPRESULTS"&&_1211.LookupResultsConditions){var _1212=Sys.Serialization.JavaScriptSerializer.deserialize(_1211.LookupResultsConditions);_11f9.forEach(_1212,function(_1213){_120f.push({dataPath:self._getDataPathFromLayout(_1213.fieldname),op:self._getConditionValue(_1213.operator),value:_1213.val});});}}return _120f;},_getDataPathFromLayout:function(alias){var panel=_11fa.byId("list");var _1214=panel._configurationProvider._currentConfiguration?panel._configurationProvider._currentConfiguration.layout:null;for(var i=0;i<_1214.length;i++){var item=_1214[i];if(item&&item.alias===alias){return item.dataPath;}}return alias;},getFiltersForJob:function(){var _1215=[];var panel=_11fa.byId("list");var _1216=panel.get("filterManager");var _1217=panel._configurationProvider._currentConfiguration?panel._configurationProvider._currentConfiguration.layout:null;var _1218=panel._configurationProvider._currentConfiguration?panel._configurationProvider._currentConfiguration.tableAliases:{};var _1219=null;var _121a=null;var _121b=null;var _121c;var self=this;for(var key in _1216._applied){if(_1216._applied.hasOwnProperty(key)){_1219=_1216._applied[key];if(_1219){_121a=_1216._definitionSet[key];_121c=(_121a.details.rangeFilter&&"rangeFilter")||(_121a.details.distinctFilter&&"distinctFilter")||(_121a.details.lookupFilter&&"lookupFilter");_121b=self._resolveProperty(_1217,_1218,_121a.propertyName);switch(_121c){case "rangeFilter":_1215.push({filterName:_121a.filterName,tableName:_121b.tableName,field:_121b.alias,filterType:"Range",ranges:self._getFilterValues(_1219,_121c)});break;case "distinctFilter":_1215.push({filterName:_121a.filterName,tableName:_121b.tableName,field:_121b.alias,filterType:"Distinct",value:self._getFilterValues(_1219,_121c)});break;case "lookupFilter":_1215.push({filterName:_121a.filterName,filterType:"Lookup",tableName:_121b.tableName,field:_121b.alias,op:_1219.value.operator,value:[_1219.value.value]});break;}}}}return _1215;},_validateOptions:function(_121d){if(!_121d){return false;}if(typeof _121d.key!=="string"){return false;}return true;},_reset:function(){this._intervalId=null;this._options=null;this._triggerId=null;},_getErrorMessage:function(xhr){var _121e=_11f3.substitute(_11f6.errorMessage,[this._options.key,xhr.status,xhr.statusText]);return _121e;},_getUnexpectedErrorMessage:function(){var _121f=_11f3.substitute(_11f6.unexpectedErrorMessage,[this._options.key]);return _121f;},_getParameterValue:function(_1220,name){var value="";if(_1220){_11f9.some(_1220,function(entry,i){if(entry.name===name){value=entry.value;return true;}});}return value;},_updateProgressDialog:function(_1221){if(this.progressBar){if(_1221&&typeof _1221.progress==="number"){this.progressBar.update({progress:_1221.progress});}if(_1221&&typeof _1221.title==="string"){this.progressBar.update({title:_1221.title});}if(_1221&&typeof _1221.infoMessage==="string"){var _1222=dojo.byId("progressDialogMessageDiv");if(_1222){_1222.innerHTML=_1221.infoMessage;}}}},_showProgressDialog:function(_1223){var self=this;self._triggerId=_1223;var _1224=self._options;this.progressDialog=new dijit.Dialog({title:_1224.title,style:dojo.string.substitute("width: ${0}px;",[_1224.width]),closable:_1224.closable});var _1225=new dojo.create("div",{innerHTML:_1224.infoMessage,style:"text-align: left; margin-top: 5px; margin-bottom: 10px",id:"progressDialogMessageDiv"});this.progressDialog.containerNode.appendChild(_1225);var _1226=new dojo.create("div",{style:"text-align: left; margin-top: 5px; margin-bottom: 10px",id:"progressDialogLinkDiv","class":"display-none"});this.progressDialog.containerNode.appendChild(_1226);this.progressBar=new dijit.ProgressBar({style:"margin-top: 10px; margin-bottom: 20px",indeterminate:_1224.indeterminate,maximum:_1224.maximum,progress:0});this.progressDialog.containerNode.appendChild(this.progressBar.domNode);if(_1224.showDismissButton){this.cancelButton=new dijit.form.Button({label:_11f6.cancelButtonCaption,style:"margin-right: 3px;",dojoType:"dijit.form.Button",onClick:function(_1227){self._cancelJob();}});var _1228=new dijit.form.Button({label:_11f6.closeButtonCaption,onClick:function(_1229){self._closeProgressDialog();}});var _122a=new dojo.create("div",{id:"progressDialogButtonDiv",style:"text-align: center;"});_122a.appendChild(this.cancelButton.domNode);_122a.appendChild(_1228.domNode);this.progressDialog.containerNode.appendChild(_122a);}this.progressDialog.show();if(!this.progressDialog.helpIcon){lang.mixin(this.progressDialog,new _11f8());this.progressDialog.createHelpIconByTopic("jobsProgressDialog");}this._intervalId=setInterval(function(){Sage.Utility.Jobs._updateProgress();},this._pollIntervalInSeconds*1000);},_cancelJob:function(){clearInterval(this._intervalId);if(!this.jobService){this._jobService=Sage.Services.getService("JobService");}this._jobService.interruptExecution(this._options);this._closeProgressDialog();},_closeProgressDialog:function(){clearInterval(this._intervalId);if(this.progressDialog){this.progressDialog.hide();this.progressDialog.destroyDescendants();if(this.cancelButton){this.cancelButton.destroyRecursive();}}},_updateProgress:function(){var self=this;var _122b=Sage.Services.getService("JobService");var _122c={triggerId:this._triggerId,success:function(_122d,sdata){_122c={progress:_122d.progress};self._updateProgressDialog(_122c);if(_122d.status==="Complete"){clearInterval(self._intervalId);var _122e=dojo.byId("progressDialogMessageDiv");if(_122e){_122e.innerHTML=_11f6.jobCompletedSuccessfully;}var _122f=dojo.byId("progressDialogLinkDiv");if(_122f&&_122d.result){var parts=_122d.result.split("://");if(parts.length>1){dojo.removeClass(_122f,"display-none");switch(parts[0]){case "SlxAttachment":_122f.innerHTML=_11f3.substitute("<a onclick=\"Sage.Utility.Jobs._closeProgressDialog();\" href=\"javascript: Sage.Utility.File.Attachment.getAttachment('${1}');\" title=\"${0}\">${0}</a>",[_122d.trigger?_122d.trigger.$descriptor:"",parts[1]]);break;case "GoToEntity":_122f.innerHTML=_11f3.substitute("<a onclick=\"Sage.Utility.Jobs._closeProgressDialog();\" href=\"${0}.aspx?entityid=${1}&modeid=Detail\">${2}</a>",[parts[1],parts[2],_122d.trigger?_122d.trigger.$descriptor:""]);break;case "GoToGroup":_122f.innerHTML=_11f3.substitute("<a onclick=\"Sage.Utility.Jobs._closeProgressDialog();\" href=\"${0}.aspx?gid=${1}&modeid=list\">${2}</a>",[parts[1],parts[2],_122d.trigger?_122d.trigger.$descriptor:""]);}}}if(this.cancelButton){this.cancelButton.destroyRecursive();}if(self._options.showCompleteNotification){_11f5.showInfo(_11f6.jobCompletedSuccessfully,self._options.title);}if(self._options.complete){self._options.complete(_122d);}dojo.publish("/job/execution/changed",[self]);}if(_122d.status==="Error"){clearInterval(self._intervalId);_11f5.closeProgressBar();if(self._options.showErrorNotification){_11f1.ErrorHandler.handleHttpError(_122d,sdata);}if(self._options.failure){self._options.failure(_122d);}if(this.cancelButton){this.cancelButton.destroyRecursive();}}},failure:function(_1230,sdata){clearInterval(self._intervalId);_11f5.closeProgressBar();if(self._options.showErrorNotification){_11f1.ErrorHandler.handleHttpError(_1230,sdata);}if(self._options.failure){self._options.failure(_1230);}if(this.cancelButton){this.cancelButton.destroyRecursive();}}};_122b.getExecution(_122c);},_getConditionValue:function(_1231){switch(_1231){case "sw":return "STARTING WITH";case "ne":return "<>";case "gt":return ">";case "ge":return ">=";case "lt":return "<";case "le":return "<=";case "like":return "LIKE";default:return "=";}},_parseProperty:function(_1232,last){var parts=_1232.split(".");if(last){return parts[parts.length-1];}else{return _1232.substr(0,_1232.length-parts[parts.length-1].length-1);}},_getFilterValues:function(_1233,_1234){var _1235=[];for(var name in _1233){if(_1233.hasOwnProperty(name)){switch(_1234){case "rangeFilter":_1235.push({lower:_1233[name].lower,upper:_1233[name].upper});break;case "distinctFilter":_1235.push(name);break;case "lookupFilter":break;}}}return _1235;},_resolveProperty:function(_1236,_1237,_1238){if(_1236){var _1239=this._getFilterDataPath(_1238,_1236,_1237,false,false);if(_1239){return _1239;}else{_1239=this._getFilterDataPath(_1238,_1236,_1237,true,false);if(_1239){return _1239;}else{_1239=this._getFilterDataPath(_1238,_1236,_1237,true,true);return _1239?_1239:_1238;}}}return _1238;},_resolveAliasProperty:function(_123a,_123b){var _123c=_123a;var _123d="";if(_123a.indexOf("_")>-1){var parts=_123a.split("_");if(parts[0].length===2){_123c=parts[1];_11f9.forEach(_123b,function(_123e){if(parts[0]===_123e.alias){_123d=_123e.tableName;return;}});}}return {tableName:_123d,alias:_123c};},_getFilterDataPath:function(_123f,_1240,_1241,_1242,_1243){var i,x,item,alias,table,_1244,_1245,_1246,_1247;for(i=0;i<_1240.length;i++){item=_1240[i];_1246=item.propertyPath;if(_1242){_1245=item.propertyPath&&item.propertyPath.split(".");if(_1245.length===2){_1246=_1245[1];}}if(_1246===_123f){if(item.propertyPath.indexOf(".")>-1){return this._resolveAliasProperty(item.alias,_1241);}else{table=item.dataPath&&item.dataPath.split(":")[0];if(/^[a-z]\d+_/i.test(item.alias)){alias=item.alias;}else{_1244=table&&_1241[table.toUpperCase()];if(_1244){alias=_1244+"."+item.alias;}}}return {tableName:table,alias:alias?alias:item.alias};}if(_1243&&item.dataPath!==""){_1247=item.dataPath.split(".");if(_1247.length>1){var path=_1247[_1247.length-1];var parts=path.split("!");if(parts.length>1){for(x=0;x<_1241.length;x++){if(_1241[x].tableName===parts[0]){return {tableName:_1241[x].tableName,alias:parts[1]};}}}}}}return null;}});return Sage.Utility.Jobs;});},"Sage/Reporting/Enumerations":function(){define(["dojo/_base/declare","dojo/i18n!./nls/Enumerations"],function(_1248,_1249){Sage.namespace("Sage.Reporting.Enumerations");dojo.mixin(Sage.Reporting.Enumerations,{nlsResources:_1249,ConditionPreset:{CurrentEntity:"CurrentEntity",CurrentGroup:"CurrentGroup",CurrentUser:"CurrentUser",AllRecords:"AllRecords",Custom:"Custom",Preset:"Preset"},ReportConditionConnector:{And:"And",Or:"Or"},FieldDataTypes:{String:"String",Numeric:"Numeric",DateTime:"DateTime"},DateRange:{ThisWeek:"ThisWeek",ThisMonth:"ThisMonth",ThisQuarter:"ThisQuarter",ThisYear:"ThisYear",LastWeek:"LastWeek",LastMonth:"LastMonth",LastQuarter:"LastQuarter",LastYear:"LastYear",MonthToDate:"MonthToDate",QuarterToDate:"QuarterToDate",YearToDate:"QuarterToDate"},ReportExportFormat:{NoFormat:"NoFormat",Pdf:"Pdf",Excel:"Excel",ExcelDataOnly:"ExcelDataOnly",Csv:"Csv",Word:"Word",Xml:"Xml"},ReportTypes:{CrystalReport:"Crystal",ExportToFileReportType:"ExportToFile"},getReportTypeCaption:function(_124a){switch(_124a){case this.ReportTypes.CrystalReport:return _1249.txtCrystalReport;case this.ReportTypes.ExportToFileReportType:return _1249.txtExportToFileReportType;default:console.error("Unsupported report type : "+_124a);}return _1249.txtUnknownReportType;},ReportConditionType:{Group:"Group",DateRange:"DateRange",User:"User",Query:"Query"},getReportConditionTypeCaption:function(_124b){switch(String(_124b)){case String(this.ReportConditionType.Group):return _1249.txtGroup;case String(this.ReportConditionType.DateRange):return _1249.txtDateRange;case String(this.ReportConditionType.User):return _1249.txtUser;case String(this.ReportConditionType.Query):return _1249.txtQuery;default:console.error("Unsupported condition type : "+_124b);}return "";},ReportConditionOperator:{IsGreaterThan:"IsGreaterThan",IsLessThan:"IsLessThan",IsInTheRange:"IsInTheRange",IsAfter:"IsAfter",IsBefore:"IsBefore",Contains:"Contains",StartsWith:"StartsWith",EndsWith:"EndsWith",Is:"Is",IsNot:"IsNot"},getReportConditionOperatorCaption:function(_124c){switch(String(_124c)){case String(this.ReportConditionOperator.IsGreaterThan):return _1249.txtIsGreaterThan;case String(this.ReportConditionOperator.IsLessThan):return _1249.txtIsLessThan;case String(this.ReportConditionOperator.IsInTheRange):return _1249.txtIsInTheRange;case String(this.ReportConditionOperator.IsAfter):return _1249.txtIsAfter;case String(this.ReportConditionOperator.IsBefore):return _1249.txtIsBefore;case String(this.ReportConditionOperator.Contains):return _1249.txtContains;case String(this.ReportConditionOperator.StartsWith):return _1249.txtStartsWith;case String(this.ReportConditionOperator.EndsWith):return _1249.txtEndsWith;case String(this.ReportConditionOperator.Is):return _1249.txtIs;case String(this.ReportConditionOperator.IsNot):return _1249.txtIsNot;default:console.error("Unsupported condition operator : "+_124c);}return "";},ExecutionType:{OnDemand:0,Scheduled:1},getExecutionTypeCaption:function(value){switch(value){case this.ExecutionType.OnDemand:return _1249.txtOnDemand;case this.ExecutionType.Scheduled:return _1249.txtScheduled;default:console.error("Unsupported execution type: "+value);}return "";},CrystalReportWizardStep:{Init:0,Conditions:1,Parameters:2,ExportOptions:3,Finish:4},SlxParameterValueKind:{NumberParameter:"NumberParameter",CurrencyParameter:"CurrencyParameter",BooleanParameter:"BooleanParameter",DateParameter:"DateParameter",StringParameter:"StringParameter",DateTimeParameter:"DateTimeParameter",TimeParameter:"TimeParameter",UserParameter:"UserParameter"},SlxDefaultValueDisplayType:{Description:"Description",DescriptionAndValue:"DescriptionAndValue"},SlxParameterValueRangeKind:{Range:"Range",Discrete:"Discrete",DiscreteAndRange:"DiscreteAndRange"},SlxRangeBoundType:{NoBound:"NoBound",BoundExclusive:"BoundExclusive",BoundInclusive:"BoundInclusive"},ParameterClassName:{DiscreteValue:"CrystalReports.ParameterFieldDiscreteValue",RangeValue:"CrystalReports.ParameterFieldRangeValue"}});return Sage.Reporting.Enumerations;});},"Sage/MainView/ReportMgr/ReportWizardController":function(){define(["Sage/UI/Dialogs","dojo/json","dojo/_base/array","dojo/i18n!./nls/ReportWizardController","Sage/Reporting/Enumerations","Sage/Utility","Sage/MainView/ReportMgr/Crystal/CrystalReportWizardController"],function(_124d,_124e,_124f,_1250,_1251,_1252,_1253){Sage.namespace("Sage.MainView.ReportMgr.ReportWizardController");dojo.mixin(Sage.MainView.ReportMgr.ReportWizardController,{startWizard:function(_1254){if(!_1254){return;}if(_1254.reportId){this._getReportMetadata(_1254.reportId,_1254.reportOptions,_1254.reportDisplayName);}else{if(_1254.triggerId){this._getReportSchedule(_1254.triggerId);}else{return;}}},_getReportSchedule:function(_1255){var self=this;this._showLoadingIndicator(_1250.txtLoadingScheduleDetails);var _1256={triggerId:_1255,success:function(entry){self._closeLoadingIndicator();self._triggerReceived(entry);},failure:function(xhr,sdata){self._closeLoadingIndicator();_1252.ErrorHandler.handleHttpError(xhr,sdata);}};var _1257=Sage.Services.getService("ReportingService");_1257.getSchedule(_1256);},_triggerReceived:function(_1258){var _1259=this._getParameterValue(_1258.parameters,"PluginFamily");var _125a=this._getParameterValue(_1258.parameters,"PluginName");var _125b=this._getParameterValue(_1258.parameters,"ReportConditions");_125b=_125b?"["+_125b+"]":"[]";_125b=_124e.parse(_125b);var _125c=this._getParameterValue(_1258.parameters,"ConditionsConnector");_124f.forEach(_125b,function(_125d,j){if(_125d.dataType===_1251.FieldDataTypes.DateTime){if(_1252.Convert.isDateString(_125d.value)){_125d.value=_1252.Convert.toDateFromString(_125d.value);}if(_1252.Convert.isDateString(_125d.fromRange)){_125d.fromRange=_1252.Convert.toDateFromString(_125d.fromRange);}if(_1252.Convert.isDateString(_125d.toRange)){_125d.toRange=_1252.Convert.toDateFromString(_125d.toRange);}}});var _125e=this._getParameterValue(_1258.parameters,"ReportParameters");_125e=_125e?"["+_125e+"]":"[]";_125e=_124e.parse(_125e);var _125f=this._getParameterValue(_1258.parameters,"RunAsUserId");var _1260=this._getParameterValue(_1258.parameters,"OutputFormat");var _1261=this._getParameterValue(_1258.parameters,"ScheduleName");if(_125a&&_1259){var _1262=Sage.Services.getService("ReportingService");var _1263=_1262.getReportId(_1259+":"+_125a);if(_1263){var _1264={scheduleOptions:{executionType:_1251.ExecutionType.Scheduled,trigger:_1258},exportOptions:{outputFormat:_1260,runAsUserId:_125f},conditionOptions:{conditions:_125b,conditionsConnector:_125c},parameterOptions:{parameters:_125e}};this._getReportMetadata(_1263,_1264);}else{_124d.showError(_1250.txtCannotDetermineReportId);}}else{_124d.showError(_1250.txtCannotDetermineReportNameOrFamily);}},_getReportMetadata:function(_1265,_1266,_1267){var self=this;var _1268=_1267?_1250.txtLoading+_1267:_1250.txtLoadingReport;this._showLoadingIndicator(_1268);var _1269={reportId:_1265,success:function(entry){self._reportMetadataReceived(entry,_1266);},failure:function(xhr,sdata){self._closeLoadingIndicator();_1252.ErrorHandler.handleHttpError(xhr,sdata);}};var _126a=Sage.Services.getService("ReportingService");_126a.getReportMetadata(_1269);},_reportMetadataReceived:function(_126b,_126c){_124f.forEach(_126b.reportFilters,function(_126d,i){_124f.forEach(_126d.filterConditions,function(_126e,j){if(_126e.dataType===_1251.FieldDataTypes.DateTime){if(_1252.Convert.isDateString(_126e.value)){_126e.value=_1252.Convert.toDateFromString(_126e.value);}if(_1252.Convert.isDateString(_126e.fromRange)){_126e.fromRange=_1252.Convert.toDateFromString(_126e.fromRange);}if(_1252.Convert.isDateString(_126e.toRange)){_126e.toRange=_1252.Convert.toDateFromString(_126e.toRange);}}});});_124f.forEach(_126b.parameters,function(_126f,i){if(!_126f.currentValues){_126f.currentValues=[];}if(_126c.parameterOptions){_126c.parameterOptions.parameters[i].defaultValues=_126f.defaultValues;}});this._closeLoadingIndicator();var _1270=this._getControllerInstance(_126b,_126c);_1270.startWizard();},_getControllerInstance:function(_1271,_1272){switch(_1271.reportType){case _1251.ReportTypes.CrystalReport:return new _1253(_1271,_1272);}},_showLoadingIndicator:function(title){var _1273=dijit.byId("dlgReportLoading");if(_1273){_1273.destroyRecursive();}_1273=new dijit.Dialog({id:"progressDialog",title:title,style:"width: 300px; height: 100px",closable:false});var _1274=new dijit.ProgressBar({id:"reportLoadingProgressBar",style:"margin-top: 10px; margin-bottom: 20px",indeterminate:true});_1273.containerNode.appendChild(_1274.domNode);_1273.show();dojo.style(_1273.closeButtonNode,"display","none");_1273.onCancel=function(){};},_closeLoadingIndicator:function(){var dlg=dijit.byId("progressDialog");if(dlg){dlg.hide();dlg.destroyRecursive();}},_getParameterValue:function(_1275,_1276){var _1277=null;_124f.some(_1275,function(_1278,j){if(_1278.name===_1276){_1277=_1278.value;return true;}});return _1277;}});return Sage.MainView.ReportMgr.ReportWizardController;});},"Sage/MainView/ReportMgr/Crystal/CrystalReportWizardController":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/i18n!./nls/CrystalReportWizardController","Sage/Reporting/Enumerations","Sage/MainView/ReportMgr/Crystal/CrystalReportParametersDialog","Sage/MainView/ReportMgr/Crystal/CrystalReportConditionsDialog","Sage/MainView/ReportMgr/Common/ExportOptionsDialog","Sage/MainView/ReportMgr/ReportManagerUtility","Sage/UI/Dialogs","dojo/topic","dojo/string"],function(_1279,_127a,_127b,_127c,_127d,_127e,_127f,_1280,_1281,_1282,topic,_1283){var _1284=_1279("Sage.MainView.ReportMgr.CrystalReportWizardController",null,{_reportMetadata:null,wizardOptions:null,conditionOptions:null,parameterOptions:null,scheduleOptions:null,exportOptions:null,_mode:null,_nlsResources:_127c,_subscriptions:[],_dialogIds:["dlgCrystalReportConditions","dlgCrystalReportParameters","dlgExportOptions"],constructor:function(_1285,_1286){if(!_1285){return;}this._reportMetadata=_1285;if(!this._reportMetadata.reportFilters){this._reportMetadata.reportFilters=[];}this.wizardOptions=_1286.wizardOptions?_1286.wizardOptions:this._getDefaultWizardOptions();this.conditionOptions=_1286.conditionOptions?_1286.conditionOptions:this._getDefaultConditionOptions();this.parameterOptions=_1286.parameterOptions?_1286.parameterOptions:this._getDefaultParameterOptions();this.scheduleOptions=_1286.scheduleOptions?_1286.scheduleOptions:this._getDefaultScheduleOptions();this.exportOptions=_1286.exportOptions?_1286.exportOptions:this._getDefaultExportOptions();var self=this;this._subscriptions.push(topic.subscribe("/reportManager/reportWizard/nextStep",function(_1287,_1288){self._nextStep(_1287,_1288);}));this._subscriptions.push(topic.subscribe("/reportManager/reportWizard/previousStep",function(_1289,_128a){self._previousStep(_1289,_128a);}));this._subscriptions.push(topic.subscribe("/reportManager/reportWizard/cancel",function(_128b,_128c){self._cancel();}));this._mode="new";if(this.scheduleOptions&&this.scheduleOptions.trigger){this._mode="edit";}},startWizard:function(){var _128d=[];if(this._hasDynamicParameterErrors(_128d)){var error=_1283.substitute(_127c.txtInvalidReportWithDynamicParameters,[this._reportMetadata.family,this._reportMetadata.name,_128d.join(" ").trim()]);_1282.showError(error,this._nlsResources.txtError);return;}var _128e=this._getNextStep(_127d.CrystalReportWizardStep.Init);this._goToStep(_128e,null);},_nextStep:function(_128f,_1290){this._processCurrentStep(_128f,_1290);var _1291=this._getNextStep(_128f);this._goToStep(_1291);},_previousStep:function(_1292,_1293){this._processCurrentStep(_1292,_1293);var _1294=this._getPreviousStep(_1292);this._goToStep(_1294);},_cancel:function(){var self=this;setTimeout(function(){self._destroyObjects();},dijit.defaultDuration+100);},_getDefaultWizardOptions:function(){return {hiddenSteps:[]};},_getDefaultConditionOptions:function(){return {conditions:[],conditionsConnector:_127d.ReportConditionConnector.And};},_getDefaultParameterOptions:function(){return {parameters:[]};},_getDefaultScheduleOptions:function(){return {executionType:_127d.ExecutionType.OnDemand,trigger:null};},_getDefaultExportOptions:function(){return {outputFormat:_127d.ReportExportFormat.Pdf,runAsUserId:null};},_hasDynamicParameterErrors:function(_1295){_127a.forEach(this._reportMetadata.parameters,function(_1296,i){if(_1296.isDynamic&&!_1296.isOptionalPrompt){if(_1296.clientMustQueryDynamicData===true){_1295.push(_1283.substitute(_127c.txtInvalidDynamicParameterDatasource,{p:_1296}));}else{if(_1296.isInvalidDynamicParameter===true){if(_127b.isString(_1296.invalidDynamicParameterReason)&&_1296.invalidDynamicParameterReason!==""){_1295.push(_1283.substitute(_127c.txtInvalidDynamicParameterReason,{p:_1296}));}else{_1295.push(_1283.substitute(_127c.txtInvalidDynamicParameterUnknownReason,{p:_1296}));}}}}});return _1295.length>0;},_isStepVisible:function(step){var _1297=true;if(this.wizardOptions&&this.wizardOptions.hiddenSteps){_127a.some(this.wizardOptions.hiddenSteps,function(_1298,i){if(step===_1298){_1297=false;return true;}});}if(!_1297){return false;}switch(step){case _127d.CrystalReportWizardStep.Parameters:return !!(this._reportMetadata.parameters&&this._reportMetadata.parameters.length>0);case _127d.CrystalReportWizardStep.Conditions:return true;case _127d.CrystalReportWizardStep.ExportOptions:return true;default:return true;}},_processCurrentStep:function(_1299,_129a){switch(_1299){case _127d.CrystalReportWizardStep.Conditions:this.conditionOptions=_129a;break;case _127d.CrystalReportWizardStep.Parameters:this.parameterOptions=_129a;break;case _127d.CrystalReportWizardStep.ExportOptions:this.exportOptions=_129a.exportOptions;this.scheduleOptions=_129a.scheduleOptions;break;}},_getNextStep:function(_129b){for(var step in _127d.CrystalReportWizardStep){var _129c=_127d.CrystalReportWizardStep[step];if(_129c>_129b&&this._isStepVisible(_129c)){return _129c;}}return null;},_getPreviousStep:function(_129d){var _129e=[];for(var step in _127d.CrystalReportWizardStep){var _129f=_127d.CrystalReportWizardStep[step];_129e.unshift(_129f);}var self=this;var _12a0=null;_127a.some(_129e,function(_12a1,i){if(_12a1<_129d&&self._isStepVisible(_12a1)){_12a0=_12a1;return true;}});return _12a0;},_goToStep:function(step){var _12a2=this._getNextStep(step);var _12a3=(_12a2===null||_12a2===_127d.CrystalReportWizardStep.Finish);var _12a4=this._getPreviousStep(step);var _12a5=(_12a4===null||_12a4===_127d.CrystalReportWizardStep.Init);var _12a6;var _12a7;switch(step){case _127d.CrystalReportWizardStep.Conditions:_12a6=dijit.byId("dlgCrystalReportConditions");if(_12a6){_12a6.show();}else{_12a7={reportMetadata:this._reportMetadata,conditionOptions:this.conditionOptions,isLastStep:_12a3,isFirstStep:_12a5};_12a6=new _127f(_12a7);_12a6.startup();_12a6.show();}break;case _127d.CrystalReportWizardStep.Parameters:_12a6=dijit.byId("dlgCrystalReportParameters");if(_12a6){_12a6.show();}else{_12a7={reportMetadata:this._reportMetadata,parameters:this.parameterOptions.parameters,isLastStep:_12a3,isFirstStep:_12a5};_12a6=new _127e(_12a7,this._mode);_12a6.startup();_12a6.show();}break;case _127d.CrystalReportWizardStep.ExportOptions:_12a6=dijit.byId("dlgExportOptions");if(_12a6){_12a6.show();}else{_12a7={reportMetadata:this._reportMetadata,isLastStep:_12a3,isFirstStep:_12a5,scheduleOptions:this.scheduleOptions,exportOptions:this.exportOptions};_12a6=new _1280(_12a7);_12a6.startup();_12a6.show();}break;case _127d.CrystalReportWizardStep.Finish:this._finishWizard();break;}},_finishWizard:function(){this._destroyObjects();switch(this._mode){case "new":switch(this.scheduleOptions.executionType){case _127d.ExecutionType.Scheduled:this._scheduleReport();break;case _127d.ExecutionType.OnDemand:this._runReport();break;}break;case "edit":this._updateSchedule();break;}},_destroyObjects:function(){_127a.forEach(this._dialogIds,function(_12a8,i){var _12a9=dijit.byId(_12a8);if(_12a9){_12a9.destroyRecursive();}});_127a.forEach(this._subscriptions,function(_12aa,i){_12aa.remove();});},_getJobParameters:function(){var _12ab=[];_12ab.push({name:"PluginFamily",value:this._reportMetadata.family});_12ab.push({name:"PluginName",value:this._reportMetadata.name});_12ab.push({name:"TemplateName",value:this._reportMetadata.displayName});_12ab.push({name:"ReportConditions",value:this.conditionOptions.conditions});_12ab.push({name:"ConditionsConnector",value:this.conditionOptions.conditionsConnector});if(this.conditionOptions.recordSelectionFormula){_12ab.push({name:"RecordSelectionFormula",value:this.conditionOptions.recordSelectionFormula});}_127a.forEach(this.parameterOptions.parameters,function(_12ac){if(_12ac){_12ac.defaultValues=null;_12ac.values=null;}});_12ab.push({name:"ReportParameters",value:this.parameterOptions.parameters});var _12ad=this.exportOptions.description?this.exportOptions.description:this._reportMetadata.displayName;_12ab.push({name:"ScheduleName",value:_12ad});_12ab.push({name:"OutputFormat",value:this.exportOptions.outputFormat});if(this.exportOptions.runAsUserId){_12ab.push({name:"RunAsUserId",value:this.exportOptions.runAsUserId});}return _12ab;},_getJobOptions:function(){var _12ae=this._getJobParameters();var _12af=(dojo.isString(this.exportOptions.description)&&(this.exportOptions.description!==""))?this.exportOptions.description:this._reportMetadata.displayName;var _12b0=dojo.date.locale.format(new Date(),{selector:"date",datePattern:"yyyy_MM_dd_hhmm"});var user="";var usr;if(typeof this.exportOptions.runAsUserId==="string"){usr=_1281.getUser(this.exportOptions.runAsUserId);if(usr){user=usr.UserName;}}else{usr=_1281.getUser(_1281.getCurrentUser().userID);if(usr){user=usr.UserName;}}var _12b1=_1283.substitute("${0}_${1}_${2}",[_12af,user,_12b0]);var _12b2={descriptor:_12b1,closable:true,reportType:_127d.ReportTypes.CrystalReport,parameters:_12ae,title:_12af,success:function(_12b3){},failure:function(_12b4){}};return _12b2;},_scheduleReport:function(){var _12b5=this._getJobOptions();_12b5.cronExpression=this.scheduleOptions.cronExpression;_12b5.descriptor=this.scheduleOptions.scheduleDescription;_12b5.startTime=this.scheduleOptions.startTime;_12b5.endTime=this.scheduleOptions.endTime;_12b5.success=function(){_1282.showInfo(_127c.txtReportSuccessfullyScheduled,_127c.dlgScheduleReport_Title);};var _12b6=Sage.Services.getService("ReportingService");_12b6.scheduleReport(_12b5);},_runReport:function(){var _12b7=this._getJobOptions();var _12b8=Sage.Services.getService("ReportingService");_12b8.runReport(_12b7);},_updateSchedule:function(){var _12b9=this._getJobOptions();_12b9.cronExpression=this.scheduleOptions.cronExpression;_12b9.descriptor=this.scheduleOptions.scheduleDescription;_12b9.startTime=this.scheduleOptions.startTime;_12b9.endTime=this.scheduleOptions.endTime;_12b9.success=function(){_1281.refreshList("schedules");_1282.showInfo(_127c.txtScheduleSuccessfullyUpdated,_127c.dlgScheduleReport_Title);};_12b9.closable=true;_12b9.key=this.scheduleOptions.trigger.$key;_12b9.descriptor=this.scheduleOptions.scheduleDescription;var _12ba=Sage.Services.getService("ReportingService");_12ba.updateSchedule(_12b9);}});return _1284;});},"Sage/MainView/ReportMgr/Crystal/CrystalReportParametersDialog":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/text!./templates/CrystalReportParametersDialog.html","dojo/i18n!./nls/CrystalReportParametersDialog","Sage/Reporting/Enumerations","Sage/MainView/ReportMgr/Common/_WizardDialogBase","Sage/MainView/ReportMgr/Crystal/BooleanParameterEditor","Sage/MainView/ReportMgr/Crystal/DateParameterEditor","Sage/MainView/ReportMgr/Crystal/SimpleParameterEditor","Sage/MainView/ReportMgr/Crystal/MultiSelectParameterEditor","Sage/Utility"],function(_12bb,_12bc,_12bd,_12be,_12bf,_12c0,_12c1,_12c2,_12c3,_12c4,_12c5){var _12c6=_12c5.makeTemplateFromString(_12bd.replace("\n",""));var _12c7=_12bb("Sage.MainView.ReportMgr.Crystal.CrystalReportParametersDialog",[_12c0],{id:"dlgCrystalReportParameters",widgetTemplate:_12c6,mode:null,_nlsResources:_12be,_helpIconTopic:"RptscheduleWiz",_parameterWidgets:null,_parameters:null,_currentStep:_12bf.CrystalReportWizardStep.Parameters,constructor:function(_12c8,_12c9){this.mode=_12c9;this._initializeWizardOptions(_12c8);this._parameterWidgets=[];this._parameters=(_12c8.parameters&&_12c8.parameters.length>0)?_12c8.parameters:_12c8.reportMetadata.parameters;},destroy:function(){_12bc.forEach(this._parameterWidgets,function(_12ca,i){dojo.publish("entity/report/parameters/control/destroy",[_12ca,this]);if(_12ca){_12ca.destroyRecursive();}});this._dialog.destroyRecursive();this.inherited(arguments);},startup:function(){this.inherited(arguments);this._loadPromptParameters();},isValid:function(){var valid=true;_12bc.forEach(this._parameterWidgets,function(_12cb,i){valid=valid&&_12cb.isValid();});return valid;},_loadPromptParameters:function(){var self=this;_12bc.forEach(this._parameters,function(_12cc,i){if(!_12cc.name.toUpperCase().startsWith("PM-")){var _12cd=self._getParameterEditor(_12cc);if(_12cd){_12cd.paramId=i;_12cd.mode=self.mode;_12cd.placeAt(self.paramsContainerDiv);_12cd.startup();self._parameterWidgets.push(_12cd);}else{console.error("This report uses parameters that are not currently supported.");}}});},_getDialogTitle:function(){return this._nlsResources.txtDialogTitle+" ["+this._reportMetadata.displayName+"]";},_getWizardStepResult:function(){var _12ce=[];_12bc.forEach(this._parameterWidgets,function(_12cf,i){_12ce.push(_12cf.get("value"));});var _12d0={parameters:_12ce};return _12d0;},_getParameterEditor:function(_12d1){switch(_12d1.parameterValueKind){case _12bf.SlxParameterValueKind.BooleanParameter:return new _12c1(_12d1);case _12bf.SlxParameterValueKind.StringParameter:case _12bf.SlxParameterValueKind.NumberParameter:case _12bf.SlxParameterValueKind.CurrencyParameter:if(_12d1.allowMultiValue){return new _12c4(_12d1);}else{return new _12c3(_12d1);}break;case _12bf.SlxParameterValueKind.DateParameter:case _12bf.SlxParameterValueKind.DateTimeParameter:return new _12c2(_12d1);case _12bf.SlxParameterValueKind.TimeParameter:console.error("Unknown parameter type: "+_12d1.parameterValueKind+"/"+_12d1.valueRangeKind);break;default:console.error("Unknown parameter type. valueKind:"+_12d1.parameterValueKind+"/rangeKind:"+_12d1.valueRangeKind+"/multiValue:"+_12d1.allowMultiValue);return null;}return null;}});return _12c7;});},"Sage/MainView/ReportMgr/Common/_WizardDialogBase":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","dijit/_Widget","Sage/_Templated","Sage/MainView/ReportMgr/ReportManagerUtility","Sage/Reporting/Enumerations","dojo/i18n!./nls/_WizardDialogBase","Sage/UI/Controls/_DialogHelpIconMixin"],function(_12d2,topic,_12d3,_12d4,_12d5,_12d6,_12d7,_12d8,_12d9){var _12da=_12d2("Sage.MainView.ReportMgr.Common._WizardDialogBase",[_12d4,_12d5],{_dialog:null,_currentStep:null,_isFirstStep:false,_isLastStep:false,_reportMetadata:null,_btnPlusIconPath:"images/icons/plus_16x16.gif",widgetsInTemplate:true,show:function(){this._dialog.show();if(this._helpIconTopic){if(!this._dialog.helpIcon){_12d3.mixin(this._dialog,new _12d9());this._dialog.createHelpIconByTopic(this._helpIconTopic);}}},startup:function(){this.inherited(arguments);this._initializeWizardButtons();},isValid:function(){return true;},_dialog_OnCancel:function(){this._checkCurrentStep();this._dialog.hide();topic.publish("/reportManager/reportWizard/cancel",null);},_cmdBack_OnClick:function(){this._checkCurrentStep();var _12db=this._getWizardStepResult();this._dialog.hide();topic.publish("/reportManager/reportWizard/previousStep",this._currentStep,_12db);},_cmdNext_OnClick:function(){if(this.isValid()){this._checkCurrentStep();var _12dc=this._getWizardStepResult();this._dialog.hide();topic.publish("/reportManager/reportWizard/nextStep",this._currentStep,_12dc);}},_cmdCancel_OnClick:function(){this._checkCurrentStep();this._dialog.hide();topic.publish("/reportManager/reportWizard/cancel",null);},_initializeWizardOptions:function(_12dd){if(_12dd){this._isFirstStep=_12dd.isFirstStep;this._isLastStep=_12dd.isLastStep;this._reportMetadata=_12dd.reportMetadata;}},_initializeWizardButtons:function(){if(this._isFirstStep){_12d6.setDomNodeVisible(this.cmdBack.domNode,false);}if(this._isLastStep){this.cmdNext.setLabel(_12d8.txtFinish);}},_getWizardStepResult:function(){console.error("_getWizardStepResult must be implemented.");return null;},_checkCurrentStep:function(){if(this._currentStep===null){console.error("_currentStep has not been defined");}}});return _12da;});},"Sage/MainView/ReportMgr/ReportManagerUtility":function(){define(["dojo/_base/xhr","dojo/i18n!./nls/ReportManagerUtility","Sage/Reporting/Enumerations"],function(_12de,_12df,_12e0){Sage.namespace("Sage.MainView.ReportMgr.ReportManagerUtility");dojo.mixin(Sage.MainView.ReportMgr.ReportManagerUtility,{_nlsResources:_12df,getOperators:function(_12e1){switch(String(_12e1)){case String(_12e0.FieldDataTypes.Numeric):return [{operator:_12e0.ReportConditionOperator.Is,caption:_12e0.nlsResources.txtIs},{operator:_12e0.ReportConditionOperator.IsNot,caption:_12e0.nlsResources.txtIsNot},{operator:_12e0.ReportConditionOperator.IsGreaterThan,caption:_12e0.nlsResources.txtIsGreaterThan},{operator:_12e0.ReportConditionOperator.IsLessThan,caption:_12e0.nlsResources.txtIsLessThan},{operator:_12e0.ReportConditionOperator.IsInTheRange,caption:_12e0.nlsResources.txtIsInTheRange}];case String(_12e0.FieldDataTypes.DateTime):return [{operator:_12e0.ReportConditionOperator.Is,caption:_12e0.nlsResources.txtIs},{operator:_12e0.ReportConditionOperator.IsNot,caption:_12e0.nlsResources.txtIsNot},{operator:_12e0.ReportConditionOperator.IsAfter,caption:_12e0.nlsResources.txtIsAfter},{operator:_12e0.ReportConditionOperator.IsBefore,caption:_12e0.nlsResources.txtIsBefore},{operator:_12e0.ReportConditionOperator.IsInTheRange,caption:_12e0.nlsResources.txtIsInTheRange}];case String(_12e0.FieldDataTypes.String):return [{operator:_12e0.ReportConditionOperator.Is,caption:_12e0.nlsResources.txtIs},{operator:_12e0.ReportConditionOperator.IsNot,caption:_12e0.nlsResources.txtIsNot},{operator:_12e0.ReportConditionOperator.Contains,caption:_12e0.nlsResources.txtContains},{operator:_12e0.ReportConditionOperator.StartsWith,caption:_12e0.nlsResources.txtStartsWith},{operator:_12e0.ReportConditionOperator.EndsWith,caption:_12e0.nlsResources.txtEndsWith}];default:console.error("Unsupported field type: "+_12e1);}return "";},getUser:function(_12e2){var user=null;_12de("GET",{url:"slxdata.ashx/slx/dynamic/-/users('"+_12e2+"')?format=json",handleAs:"json",sync:true}).then(function(data){user=data;});return user;},getGroup:function(_12e3){var group=null;var url="slxdata.ashx/slx/system/-/groups";if(_12e3.indexOf(":")!==-1){var _12e4=_12e3.split(":")[0];var name=_12e3.split(":")[1];url=url+"?format=json&where=family eq '"+_12e4+"' and name eq '"+name+"'";}else{url=url+"('"+_12e3+"')?format=json";}_12de("GET",{url:url,handleAs:"json",sync:true}).then(function(data){if(data.$resources&&data.$resources.length===1){data=data.$resources[0];}group=data;});return group;},getEntityHistory:function(_12e5){var _12e6={items:[]};_12de("GET",{url:"slxdata.ashx/slxdata.ashx/slx/crm/-/entityhistory",handleAs:"json",sync:true}).then(function(data){_12e6=data;});},getOutputFormats:function(_12e7){switch(_12e7){case _12e0.ReportTypes.CrystalReport:return [{outputFormat:_12e0.ReportExportFormat.Pdf,caption:_12e0.nlsResources.txtPdf},{outputFormat:_12e0.ReportExportFormat.Word,caption:_12e0.nlsResources.txtWord},{outputFormat:_12e0.ReportExportFormat.Excel,caption:_12e0.nlsResources.txtExcel},{outputFormat:_12e0.ReportExportFormat.ExcelDataOnly,caption:_12e0.nlsResources.txtExcelDataOnly},{outputFormat:_12e0.ReportExportFormat.Csv,caption:_12e0.nlsResources.txtCsv},{outputFormat:_12e0.ReportExportFormat.Xml,caption:_12e0.nlsResources.txtXml}];default:console.error("Unsupported report type: "+_12e7);return [];}},getCurrentEntityContext:function(){if(Sage.Services.hasService("ClientEntityContext")){var _12e8=Sage.Services.getService("ClientEntityContext");if(_12e8){return _12e8.getContext();}}return null;},getCurrentUser:function(){var _12e9=Sage.Services.getService("ClientContextService");var user=null;if(_12e9){user={userID:_12e9.getValue("userID"),userPrettyName:_12e9.getValue("userPrettyName")};}return user;},setDomNodeVisible:function(_12ea,_12eb){if(_12ea&&_12eb){dojo.removeClass(_12ea,"display-none");}else{if(_12ea){dojo.addClass(_12ea,"display-none");}}},refreshList:function(tabId){try{var panel=dijit.byId("list");if(panel){var _12ec=Sage.Services.getService("ClientGroupContext");if(_12ec){var ctx=_12ec.getContext();if(tabId===ctx.CurrentGroupID){panel.refreshView(tabId);}}}}catch(e){}}});return Sage.MainView.ReportMgr.ReportManagerUtility;});},"Sage/MainView/ReportMgr/Crystal/BooleanParameterEditor":function(){define(["dojo/_base/declare","dojo/text!./templates/BooleanParameterEditor.html","Sage/MainView/ReportMgr/Crystal/ParameterHeaderWidget","Sage/MainView/ReportMgr/Crystal/_ParameterEditorBase","Sage/MainView/ReportMgr/ReportManagerUtility","Sage/MainView/ReportMgr/Crystal/CrystalReportsUtility","Sage/Utility"],function(_12ed,_12ee,_12ef,_12f0,_12f1,_12f2,_12f3){var _12f4=_12f3.makeTemplateFromString(_12ee);var _12f5=_12ed("Sage.MainView.ReportMgr.Crystal.BooleanParameterEditor",[_12f0],{widgetTemplate:_12f4,value:null,_setValueAttr:function(value){this._set("value",value);},_getValueAttr:function(){var _12f6=this._getCurrentValue();if(_12f6){this._promptParameter.currentValues=[_12f6];}return this._promptParameter;},constructor:function(_12f7){},startup:function(){if(this._started){return;}this.inherited(arguments);var _12f8=new _12ef({promptText:this._promptParameter.promptText,parameterFieldName:this._promptParameter.parameterFieldName}).placeAt(this.paramsHeaderContainer);_12f2.initializeComboBoxValues(this._values,_12f2.getRangeInitialValue(this._initialValues,false),this.cmbValues);_12f1.setDomNodeVisible(this.divValidationMessage,false);},isValid:function(){var valid=true;var msg="";var _12f9=this._getCurrentValue();if(_12f9===null){msg=this.txtPleaseSpecifyValue;dojo.removeClass(this.errorInvalidOption,"display-none");this.cmbValues.focus();valid=false;}else{dojo.addClass(this.errorInvalidOption,"display-none");}this._showValidationMessage(msg);return valid;},_showValidationMessage:function(msg){this.spanValidationMessage.innerHTML=Sage.Utility.htmlEncode(msg);_12f1.setDomNodeVisible(this.divValidationMessage,(msg!==""));},_getCurrentValue:function(){var item=this.cmbValues.item;if(item&&item.value!==""){return this.getOriginalParameterValue(item._id);}return null;}});return _12f5;});},"Sage/MainView/ReportMgr/Crystal/ParameterHeaderWidget":function(){define(["dojo/_base/declare","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/ParameterHeaderWidget.html","Sage/Utility"],function(_12fa,_12fb,_12fc,_12fd,_12fe,_12ff){var _1300=_12fa("Sage.MainView.ReportMgr.Crystal.ParameterHeaderWidget",[_12fb,_12fc,_12fd],{templateString:_12fe,promptText:"",parameterFieldName:"",constructor:function(){},postCreate:function(){this.inherited(arguments);}});return _1300;});},"Sage/MainView/ReportMgr/Crystal/_ParameterEditorBase":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/number","dijit/_Widget","Sage/_Templated","Sage/Utility","Sage/Reporting/Enumerations","dojo/i18n!./nls/_ParameterEditorBase","Sage/UI/TransferBoxWidget","Sage/UI/TransferBoxWidgetEnumerations","dojo/store/Memory","dojo/store/Observable","dojo/date/locale","Sage/MainView/ReportMgr/Crystal/CrystalReportsUtility","dojo/string"],function(_1301,_1302,_1303,_1304,_1305,_1306,_1307,_1308,_1309,_130a,_130b,_130c,_130d,_130e,_130f){var _1310=_1301("Sage.MainView.ReportMgr.Crystal._ParameterEditorBase",[_1304,_1305],{widgetsInTemplate:true,_promptParameter:null,_values:null,_initialValues:null,_initialCustomValues:null,_initialIds:null,_allowCustomValues:false,_minimum:null,_maximum:null,_paramDiscreteType:false,_paramDiscreteAndRangeType:false,_paramRangeType:false,_showDescriptionAndValue:false,paramId:null,mode:null,constructor:function(_1311){dojo.mixin(this,_1308);this._values=[];this._initialValues=[];this._initialCustomValues=[];this._initialIds=[];this._promptParameter=_1311;this._initializeParameterProperties();this._getParameterDataTypes();},isValid:function(){return true;},valueWithinMinMaxRange:function(value){if(this._minimum&&(value<this._minimum)){return false;}if(this._maximum&&(value>this._maximum)){return false;}return true;},ensureNewSelectedValue:function(items,_1312){var isNew=true;dojo.some(items,function(_1313){if(_1313.label===_1312){isNew=false;return isNew;}});return isNew;},initializeTransferBoxWidget:function(_1314,_1315){var data=[];var self=this;if(_1315){_1302.forEach(this._values,function(entry,i){data[i]={id:entry._id,value:entry.value?entry.value:entry.description,displayValue:entry.description,__selected:false};});}var store=_130c(new _130b({identifier:"id",data:data}));this.transferBox=new _1309({store:store,sortAttribute:"id",filterProperty:"value",useFilterTypeAhead:true,selectionMode:this.allowMultiValue?_130a.SelectionMode.Extended:_130a.SelectionMode.Single},"transferBox");_1302.forEach(self._initialIds,function(_1316,i){_1302.forEach(self.transferBox.store.data,function(_1317,i){if(_1316==_1317.id||_1316.id==_1317.id){_1317.__selected=true;}});});_1302.forEach(this._initialCustomValues,function(entry,i){var item={id:entry.parameterClass==="Range"?entry.description:entry._id,value:entry.value?entry.value:entry.description,displayValue:entry.description?entry.description:entry.value,__selected:true,destroyOnRemove:false};self.transferBox.addNewItem(item);});this.transferBox.placeAt(_1314);},getOriginalParameterValue:function(_1318){var _1319=null;_1302.some(this._promptParameter.defaultValues,function(entry,i){if(entry._id==_1318){_1319=dojo.clone(entry);delete _1319._id;return true;}});return _1319;},getMinMaxValidationMessage:function(value){switch(this.parameterValueKind){case _1307.SlxParameterValueKind.NumberParameter:if(this._minimum&&(value<this._minimum)){return dojo.replace(this.txtPleaseSpecifyNumberGreater,[this._minimum]);}if(this._maximum&&(value>this._maximum)){return dojo.replace(this.txtPleaseSpecifyNumberLesser,[this._maximum]);}break;case _1307.SlxParameterValueKind.CurrencyParameter:break;case _1307.SlxParameterValueKind.DateParameter:case _1307.SlxParameterValueKind.DateTimeParameter:if(this._minimum&&(value<this._minimum)){this._validationMsg=dojo.replace(this.txtPleaseSpecifyDateGreater,[_130e.getDateOnlyFormattedDate(this._minimum)]);}if(this._maximum&&(value>this._maximum)){this._validationMsg=dojo.replace(this.txtPleaseSpecifyDateLesser,[_130e.getDateOnlyFormattedDate(this._maximum)]);}break;case _1307.SlxParameterValueKind.BooleanParameter:break;default:if(this._minimum&&(value.length<this._minimum)){return dojo.replace(this.txtTheMinimumLengthForThisField,[this._minimum]);}if(this._maximum&&(value.length>this._maximum)){return dojo.replace(this.txtTheMaximumLengthForThisField,[this._maximum]);}}return "";},getMinMaxInitializationMessage:function(){var _131a="";switch(this.parameterValueKind){case _1307.SlxParameterValueKind.NumberParameter:if(this._minimum&&!this._maximum){_131a=dojo.replace(this.txtPleaseSpecifyNumberGreater,[this._minimum]);}if(!this._minimum&&this._maximum){_131a=dojo.replace(this.txtPleaseSpecifyNumberLesser,[this._maximum]);}if(this._minimum&&this._maximum){_131a=dojo.replace(this.txtPleaseSpecifyNumberBetween,[this._minimum,this._maximum]);}break;case _1307.SlxParameterValueKind.CurrencyParameter:break;case _1307.SlxParameterValueKind.DateParameter:case _1307.SlxParameterValueKind.DateTimeParameter:if(this._minimum&&!this._maximum){_131a=dojo.replace(this.txtPleaseSpecifyDateLesser,[_130e.getDateOnlyFormattedDate(this._minimum)]);}if(!this._minimum&&this._maximum){_131a=dojo.replace(this.txtPleaseSpecifyDateGreater,[_130e.getDateOnlyFormattedDate(this._maximum)]);}if(this._minimum&&this._maximum){_131a=dojo.replace(this.txtPleaseSpecifyDateBetween,[_130e.getDateOnlyFormattedDate(this._minimum),_130e.getDateOnlyFormattedDate(this._maximum)]);}break;case _1307.SlxParameterValueKind.BooleanParameter:break;default:if(this._minimum&&!this._maximum){_131a=dojo.replace(this.txtTheMinimumLengthForThisField,[this._minimum]);}if(!this._minimum&&this._maximum){_131a=dojo.replace(this.txtTheMaximumLengthForThisField,[this._maximum]);}if(this._minimum&&this._maximum){_131a=dojo.replace(this.txtTheValueMustBeBetween,[this._minimum,this._maximum]);}}return _131a;},_initializeParameterProperties:function(){var self=this;this._allowCustomValues=this._promptParameter.allowCustomCurrentValues;this._showDescriptionAndValue=(this._promptParameter.defaultValueDisplayType=="DescriptionAndValue");var _131b=this._promptParameter.parameterValueKind;this._paramDiscreteType=this._promptParameter.valueRangeKind===_1307.SlxParameterValueRangeKind.Discrete;this._paramDiscreteAndRangeType=this._promptParameter.valueRangeKind===_1307.SlxParameterValueRangeKind.DiscreteAndRange;this._paramRangeType=this._promptParameter.valueRangeKind===_1307.SlxParameterValueRangeKind.Range;var _131c=0;if(this._promptParameter.defaultValues){_1302.forEach(this._promptParameter.defaultValues,function(entry,i){var strId=self._getZeroPrefixedId(_131c);entry._id=strId;var _131d=(entry.className===_1307.ParameterClassName.DiscreteValue)?entry.discreteValue.actualValue:entry.rangeValue;var _131e=entry.description;if(self._showDescriptionAndValue&&dojo.isString(_131e)){_131e=_130f.substitute("${0} - ${1}",[_131d,_131e]);}if(!dojo.isString(_131e)){_131e=_131d;}var _131f=_131b===_1307.SlxParameterValueKind.DateParameter||_131b===_1307.SlxParameterValueKind.DateTimeParameter;var value={_id:strId,value:_131d,description:_131f?self._formatDateTimeDescription(_131e):_131e,parameterClass:entry.className===_1307.ParameterClassName.DiscreteValue?_1307.SlxParameterValueRangeKind.Discrete:_1307.SlxParameterValueRangeKind.Range};self._values.push(value);_131c++;});}var _1320=this._promptParameter.currentValues.length>0?this._promptParameter.currentValues:this._promptParameter.initialValues;if(_1320){_1302.forEach(_1320,function(entry,i){var _1321=(entry.className===_1307.ParameterClassName.DiscreteValue)?entry.discreteValue.actualValue:entry.rangeValue;var _1322=entry.description;var parts=null;if(entry.rangeDateValue){parts=entry.rangeDateValue.split(";");_1321.beginValue=parts[0];_1321.endValue=parts[1];}if(entry.discreteDateValue){parts=entry.discreteDateValue.split(";");_1321=parts[0];}var value={value:_1321,description:entry.description?entry.description:_1321,parameterClass:entry.className===_1307.ParameterClassName.DiscreteValue?_1307.SlxParameterValueRangeKind.Discrete:_1307.SlxParameterValueRangeKind.Range};self._initialValues.push(value);});}if(this._initialValues.length>0){_1302.forEach(this._initialValues,function(_1323,i){var found=false;_1302.some(self._values,function(entry,i){if(entry.value===_1323.value){self._initialIds.push(entry._id);found=true;return true;}});if(!found){self._initialCustomValues.push(_1323);}});}switch(_131b){case _1307.SlxParameterValueKind.DateParameter:case _1307.SlxParameterValueKind.DateTimeParameter:if(this._promptParameter.minimumValue&&this._promptParameter.minimumValue.discreteValue){this._minimum=_1306.Convert.toDateFromString(this._getDateOnlyIsoString(this._promptParameter.minimumValue.discreteValue.actualValue));}if(this._promptParameter.maximumValue&&this._promptParameter.maximumValue.discreteValue){this._maximum=_1306.Convert.toDateFromString(this._getDateOnlyIsoString(this._promptParameter.maximumValue.discreteValue.actualValue));}break;case _1307.SlxParameterValueKind.NumberParameter:case _1307.SlxParameterValueKind.StringParameter:if(this._promptParameter.minimumValue&&this._promptParameter.minimumValue.discreteValue){this._minimum=_1303.parse(this._promptParameter.minimumValue.discreteValue.actualValue);}if(this._promptParameter.maximumValue&&this._promptParameter.maximumValue.discreteValue){this._maximum=_1303.parse(this._promptParameter.maximumValue.discreteValue.actualValue);}break;}},_formatDateTimeDescription:function(_1324){if(this._promptParameter.parameterValueKind===_1307.SlxParameterValueKind.DateTimeParameter){return _130d.format(_1306.Convert.toDateFromString(_1324,false),{fullYear:true});}else{return _130d.format(_1306.Convert.toDateFromString(_1324,false),{fullYear:true,selector:this.displayTime?null:"date"});}},_getParameterDataTypes:function(){var _1325=this._promptParameter.defaultValues;if(_1325&&_1325[0].discreteValue){this._promptParameter.actualValueType=_1325[0].discreteValue.actualValueType;this._promptParameter.valueType=_1325[0].discreteValue.valueType;}else{this._promptParameter.actualValueType=this._getDataType(this._promptParameter.parameterValueKind);this._promptParameter.valueType=this._promptParameter.actualValueType;}if(_1325&&_1325[0].rangeValue){this._promptParameter.beginValueType=_1325[0].rangeValue.beginValueType;this._promptParameter.endValueType=_1325[0].rangeValue.endValueType;}else{this._promptParameter.beginValueType=this._getDataType(this._promptParameter.parameterValueKind);this._promptParameter.endValueType=this._promptParameter.beginValueType;}},_getDataType:function(_1326){switch(_1326){case _1307.SlxParameterValueKind.BooleanParameter:return "Boolean";case _1307.SlxParameterValueKind.CurrencyParameter:case _1307.SlxParameterValueKind.NumberParameter:return "Double";case _1307.SlxParameterValueKind.DateParameter:case _1307.SlxParameterValueKind.DateTimeParameter:case _1307.SlxParameterValueKind.TimeParameter:return "DateTime";case _1307.SlxParameterValueKind.StringParameter:return "String";default:return "String";}},_getStringOfZeros:function(_1327){return Array(_1327+1).join("0");},_getZeroPrefixedId:function(_1328){if(isNaN(_1328)){throw "A non-numeric value was passed to _getZeroPrefixedId";}else{var id=_1328.toString();if(id.length<5){return this._getStringOfZeros(5-id.length)+id;}return id;}},_getValue:function(_1329){var value=null;_1302.some(this._values,function(entry,i){if(entry._id==_1329){value=dojo.clone(entry);return true;}});return value;},_getSelectionMode:function(){var _132a="";if(this._promptParameter.allowMultiValue){_132a="MultiSelect";}else{_132a="SingleSelect";}if(this._allowCustomValues){_132a=_132a+"WithCustom";}else{_132a=_132a+"NoCustom";}return _132a;},_getDateOnlyIsoString:function(_132b){var _132c=null;if(_132b.indexOf("T")!==-1){_132c=_132b.split("T")[0];}return _132c;}});return _1310;});},"Sage/UI/TransferBoxWidget":function(){define(["dojo/_base/declare","dojo/_base/array","Sage/UI/TransferBoxWidgetEnumerations","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dgrid/OnDemandList","dgrid/Selection","dgrid/Keyboard","dojo/dom-construct","dojo/text!./templates/TransferBoxWidget.html","dojo/i18n!./nls/TransferBoxWidget","dojo/dom-style","put-selector/put"],function(_132d,_132e,_132f,_1330,_1331,_1332,_1333,_1334,_1335,_1336,_1337,_1338,_1339,put){var _133a=_132d("Sage.UI.TransferBoxWidget",[_1330,_1331,_1332],{templateString:_1337,"class":"transferBoxWidget",widgetsInTemplate:true,sortAttribute:"",sortDescending:false,allowFiltering:true,allowClearAll:true,useFilterTypeAhead:true,selectionMode:_132f.SelectionMode.Extended,hideTransferBoxOnSingleSelectMode:true,postMixInProperties:function(){dojo.mixin(this,_1338);},postCreate:function(){this.inherited(arguments);this._setVisibilityState();this._declareLists();},addSelectedItem:function(id){var row=this.from.row(id);if(row.data){row.data.__selected=true;this.store.put(row.data);}else{}},addNewItem:function(item,_133b){var _133c=false;if(!item.id){item.id=this._generateUniqueId();}if(_133b){var self=this;this.store.query({id:item.id}).forEach(function(item){_133c=true;if(!item.__selected){item.__selected=true;self.store.put(item);}return;});}if(!_133c){this.store.add(item);if(item.__selected){this.addSelectedItem(item.id);}}},getSelectedValues:function(){var _133d=[];this.store.query({__selected:true}).forEach(function(item){_133d.push(item);});return _133d;},_setVisibilityState:function(){this.addButton.set("disabled",true);this.removeButton.set("disabled",true);if(!this.allowFiltering){dojo.addClass(this.searchFilterDiv,"display-none");}else{if(this.useFilterTypeAhead){dojo.connect(this.searchFilter.focusNode,"onkeyup",this,"_onKeyUp",true);_1339.set(this.filterButton.domNode,"display","none");}}if(this.hideTransferBoxOnSingleSelectMode&&this.selectionMode===_132f.SelectionMode.Single){dojo.addClass(this.transferButtons,"display-none");dojo.addClass(this.toNode,"display-none");dojo.addClass(this.availableValues,"display-none");dojo.addClass(this.selectedValues,"display-none");this.colFromNode.setAttribute("colspan","3");}if(!this.allowClearAll){_1339.set(this.removeAllButton.domNode,"display","none");}},_declareLists:function(){var _133e=_132d([_1333,_1334,_1335]);var from=this.from=new _133e({store:this.store,query:function(item){return !item.__selected;},sort:[{attribute:this.sortAttribute,descending:this.sortDescending}],selectionMode:this.selectionMode,loadingMessage:this.loadingText,noDataMessage:this.noResultsText,renderRow:this._renderItem,},this.fromNode);this.from.startup();this._selectionToDisable(from,this.addButton);var to=this.to=new _133e({store:this.store,query:function(item){return item.__selected;},sort:[{attribute:this.sortAttribute,descending:this.sortDescending}],renderRow:this._renderItem},this.toNode);this._selectionToDisable(to,this.removeButton);},_renderItem:function(item){return put("div",item.displayValue?item.displayValue:"");},_selectionToDisable:function(list,_133f){var _1340=0;list.on("dgrid-select",function(e){_1340+=e.rows.length;_133f.set("disabled",!_1340);});list.on("dgrid-deselect",function(e){_1340-=e.rows.length;_133f.set("disabled",!_1340);});},_onFilterClick:function(){this.from.set("query",{displayValue:new RegExp(this.prepForRegex(),"i"),__selected:false});},_onKeyUp:function(){this._onFilterClick();},_onAddClick:function(){for(var id in this.from.selection){this.addSelectedItem(id);}},_onAddAllClick:function(){var self=this;this.store.query({displayValue:new RegExp(this.prepForRegex(),"i")}).forEach(function(item){item.__selected=true;self.store.put(item);});},_onRemoveClick:function(){for(var id in this.to.selection){var row=this.to.row(id);if(row.data&&row.data.__selected){row.data.__selected=false;this.store.put(row.data);}}},_onRemoveAllClick:function(){var self=this;this.store.query({__selected:true}).forEach(function(item){item.__selected=false;self.store.put(item);});},_generateUniqueId:function(){var d=new Date().getTime();var uuid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=(d+Math.random()*16)%16|0;d=Math.floor(d/16);return (c=="x"?r:(r&7|8)).toString(16);});return uuid;},prepForRegex:function(){var _1341=this.searchFilter.get("value");_1341=_1341.replace(new RegExp("%|\\[|[*]|_|[.]|[(]|[)]|[^]|[$]|[\\]|[?]|[+]|[|]","g"),"\\$&");return _1341;}});return _133a;});},"Sage/UI/TransferBoxWidgetEnumerations":function(){define(["dojo/_base/declare"],function(_1342){Sage.namespace("Sage.UI.TransferBoxWidgetEnumerations");dojo.mixin(Sage.UI.TransferBoxWidgetEnumerations,{SearchConditions:{EqualTo:"EqualTo",Contains:"Contains",StartingWith:"StartingWith"},SelectionMode:{Extended:"extended",Multiple:"multiple",Single:"single",None:"none"}});return Sage.UI.TransferBoxWidgetEnumerations;});},"dgrid/OnDemandList":function(){define(["./List","./_StoreMixin","dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred","dojo/dom","dojo/on","./util/misc","put-selector/put"],function(List,_1343,_1344,lang,_1345,dom,_1346,_1347,put){return _1344([List,_1343],{minRowsPerPage:25,maxRowsPerPage:250,maxEmptySpace:Infinity,bufferRows:10,farOffRemoval:2000,queryRowsOverlap:0,pagingMethod:"debounce",pagingDelay:_1347.defaultDelay,keepScrollPosition:false,rowHeight:22,postCreate:function(){this.inherited(arguments);var self=this;_1346(this.bodyNode,"scroll",_1347[this.pagingMethod](function(event){self._processScroll(event);},null,this.pagingDelay));},renderQuery:function(query,_1348,_1349){var self=this,_134a={query:query,count:0,node:_1348,options:_1349},_134b=this.preload,_134c;if(!_1348){var _134d={node:put(this.contentNode,"div.dgrid-preload",{rowIndex:0}),count:0,query:query,next:_134a,options:_1349};_134d.node.style.height="0";_134a.node=_1348=put(this.contentNode,"div.dgrid-preload");_134a.previous=_134d;}_1348.rowIndex=this.minRowsPerPage;if(_134b){if((_134a.next=_134b.next)&&_1348.offsetTop>=_134b.node.offsetTop){_134a.previous=_134b;}else{_134a.next=_134b;_134a.previous=_134b.previous;}_134a.previous.next=_134a;_134a.next.previous=_134a;}else{this.preload=_134a;}var _134e=put(_1348,"-div.dgrid-loading"),_134f=put(_134e,"div.dgrid-below");_134f.innerHTML=this.loadingMessage;function _1350(err){put(_134e,"!");if(err){if(self._refreshDeferred){self._refreshDeferred.reject(err);delete self._refreshDeferred;}throw err;}};_1349=lang.mixin(this.get("queryOptions"),_1349,{start:0,count:this.minRowsPerPage},"level" in query?{queryLevel:query.level}:null);this._trackError(function(){return _134c=query(_1349);});if(typeof _134c==="undefined"){_1350();return;}_1345.when(self.renderArray(_134c,_1348,_1349),function(trs){var total=typeof _134c.total==="undefined"?_134c.length:_134c.total;return _1345.when(total,function(total){var _1351=trs.length,_1352=_1348.parentNode,_1353=self.noDataNode;put(_134e,"!");if(!("queryLevel" in _1349)){self._total=total;}if(total===0){if(_1353){put(_1353,"!");delete self.noDataNode;}self.noDataNode=_1353=put("div.dgrid-no-data");_1352.insertBefore(_1353,self._getFirstRowSibling(_1352));_1353.innerHTML=self.noDataMessage;}var _1354=0;for(var i=0;i<_1351;i++){_1354+=self._calcRowHeight(trs[i]);}if(_1351&&_1354){self.rowHeight=_1354/_1351;}total-=_1351;_134a.count=total;_1348.rowIndex=_1351;if(total){_1348.style.height=Math.min(total*self.rowHeight,self.maxEmptySpace)+"px";}else{_1348.style.display="none";_1349.count++;}if(self._previousScrollPosition){self.scrollTo(self._previousScrollPosition);delete self._previousScrollPosition;}self._processScroll();if(self._refreshDeferred){self._refreshDeferred.resolve(_134c);delete self._refreshDeferred;}return trs;},_1350);},_1350);return _134c;},refresh:function(_1355){var self=this,keep=(_1355&&_1355.keepScrollPosition),dfd,_1356;if(typeof keep==="undefined"){keep=this.keepScrollPosition;}if(keep){this._previousScrollPosition=this.getScrollPosition();}this.inherited(arguments);if(this.store){dfd=this._refreshDeferred=new _1345();_1356=self.renderQuery(function(_1357){return self.store.query(self.query,_1357);});if(typeof _1356==="undefined"){dfd.reject();}return dfd.then(function(_1358){setTimeout(function(){_1346.emit(self.domNode,"dgrid-refresh-complete",{bubbles:true,cancelable:false,grid:self,results:_1358});},0);delete self._refreshDeferred;return _1358;},function(err){delete self._refreshDeferred;throw err;});}},resize:function(){this.inherited(arguments);this._processScroll();},_getFirstRowSibling:function(_1359){return _1359.lastChild;},_calcRowHeight:function(_135a){var _135b=_135a.previousSibling;if(_135b&&!/\bdgrid-preload\b/.test(_135b.className)){return _135a.offsetTop-_135b.offsetTop;}return _135a.offsetHeight;},lastScrollTop:0,_processScroll:function(evt){var grid=this,_135c=grid.bodyNode,_135d=(evt&&evt.scrollTop)||this.getScrollPosition().y,_135e=_135c.offsetHeight+_135d,_135f,_1360,_1361=grid.preload,_1362=grid.lastScrollTop,_1363=grid.bufferRows*grid.rowHeight,_1364=_1363-grid.rowHeight,_1365,_1366,_1367,_1368=true;var _1369=1;grid.lastScrollTop=_135d;function _136a(_136b,_136c,_136d,below){var _136e=grid.farOffRemoval,_1360=_136b.node;if(_136c>2*_136e){var row,_136f=_1360[_136d];var _1370=0;var count=0;var _1371=[];while((row=_136f)){var _1372=grid._calcRowHeight(row);if(_1370+_1372+_136e>_136c||(_136f.className.indexOf("dgrid-row")<0&&_136f.className.indexOf("dgrid-loading")<0)){break;}var _136f=row[_136d];_1370+=_1372;count+=row.count||1;grid.removeRow(row,true);_1371.push(row);}_136b.count+=count;if(below){_1360.rowIndex-=count;_1373(_136b);}else{_1360.style.height=(_1360.offsetHeight+_1370)+"px";}var _1374=put("div",_1371);setTimeout(function(){put(_1374,"!");},1);}};function _1373(_1375,noMax){_1375.node.style.height=Math.min(_1375.count*grid.rowHeight,noMax?Infinity:grid.maxEmptySpace)+"px";};function _1376(_1377,_1378){do{_1377=_1378?_1377.next:_1377.previous;}while(_1377&&!_1377.node.offsetWidth);return _1377;};while(_1361&&!_1361.node.offsetWidth){_1361=_1361.previous;}while(_1361&&_1361!=_135f){_135f=grid.preload;grid.preload=_1361;_1360=_1361.node;var _1379=_1360.offsetTop;var _137a;if(_135e+_1369+_1364<_1379){_1361=_1376(_1361,(_1368=false));}else{if(_135d-_1369-_1364>(_1379+(_137a=_1360.offsetHeight))){_1361=_1376(_1361,(_1368=true));}else{var _137b=((_1360.rowIndex?_135d-_1363:_135e)-_1379)/grid.rowHeight;var count=(_135e-_135d+2*_1363)/grid.rowHeight;var _137c=Math.max(Math.min((_135d-_1362)*grid.rowHeight,grid.maxRowsPerPage/2),grid.maxRowsPerPage/-2);count+=Math.min(Math.abs(_137c),10);if(_1360.rowIndex==0){_137b-=count;}_137b=Math.max(_137b,0);if(_137b<10&&_137b>0&&count+_137b<grid.maxRowsPerPage){count+=Math.max(0,_137b);_137b=0;}count=Math.min(Math.max(count,grid.minRowsPerPage),grid.maxRowsPerPage,_1361.count);if(count==0){_1361=_1376(_1361,_1368);continue;}count=Math.ceil(count);_137b=Math.min(Math.floor(_137b),_1361.count-count);var _137d=lang.mixin(grid.get("queryOptions"),_1361.options);_1361.count-=count;var _137e=_1360,_137f,_1380=grid.queryRowsOverlap,below=_1360.rowIndex>0&&_1361;if(below){var _1381=_1361.previous;if(_1381){_136a(_1381,_135d-(_1381.node.offsetTop+_1381.node.offsetHeight),"nextSibling");if(_137b>0&&_1381.node==_1360.previousSibling){_137b=Math.min(_1361.count,_137b);_1361.previous.count+=_137b;_1373(_1361.previous,true);_1360.rowIndex+=_137b;_1380=0;}else{count+=_137b;}_1361.count-=_137b;}_137d.start=_1360.rowIndex-_1380;_137d.count=Math.min(count+_1380,grid.maxRowsPerPage);_1360.rowIndex=_137d.start+_137d.count;}else{if(_1361.next){_136a(_1361.next,_1361.next.node.offsetTop-_135e,"previousSibling",true);var _137e=_1360.nextSibling;if(_137e==_1361.next.node){_1361.next.count+=_1361.count-_137b;_1361.next.node.rowIndex=_137b+count;_1373(_1361.next);_1361.count=_137b;_1380=0;}else{_137f=true;}}_137d.start=_1361.count;_137d.count=Math.min(count+_1380,grid.maxRowsPerPage);}if(_137f&&_137e&&_137e.offsetWidth){_137f=_137e.offsetTop;}_1373(_1361);if("level" in _1361.query){_137d.queryLevel=_1361.query.level;}if(!("queryLevel" in _137d)&&(_137d.start>grid._total||_137d.count<0)){continue;}var _1382=put(_137e,"-div.dgrid-loading[style=height:"+count*grid.rowHeight+"px]"),_1383=put(_1382,"div.dgrid-"+(below?"below":"above"));_1383.innerHTML=grid.loadingMessage;_1382.count=count;var _1384=_1361.query(_137d),_1385=grid._trackError(function(){return _1384;});if(_1385===undefined){put(_1382,"!");return;}(function(_1386,below,_1387,_1388){_1367=_1345.when(grid.renderArray(_1388,_1386,_137d),function(rows){_1366=_1388;_137e=_1386.nextSibling;put(_1386,"!");if(_1387&&_137e&&_137e.offsetWidth){var pos=grid.getScrollPosition();grid.scrollTo({x:pos.x,y:pos.y+_137e.offsetTop-_1387,preserveMomentum:true});}_1345.when(_1388.total||_1388.length,function(total){if(!("queryLevel" in _137d)){grid._total=total;}if(below){below.count=total-below.node.rowIndex;if(below.count===0){_137d.count++;}_1373(below);}});grid._processScroll();return rows;},function(e){put(_1386,"!");throw e;});}).call(this,_1382,below,_137f,_1384);_1361=_1361.previous;}}}if(_1367&&(_1365=this._refreshDeferred)){delete this._refreshDeferred;_1345.when(_1367,function(){_1365.resolve(_1366);});}},removeRow:function(_1389,_138a){function _138b(_138c,_138d){return _138c!=null?_138c:_138d;};if(_1389){var _138e=_1389.previousSibling,_138f=_1389.nextSibling,_1390=_138e&&_138b(_138e.observerIndex,_138e.previousObserverIndex),_1391=_138f&&_138b(_138f.observerIndex,_138f.nextObserverIndex),_1392=_1389.observerIndex;_1389.observerIndex=undefined;if(_138a){_1389.nextObserverIndex=_1391;_1389.previousObserverIndex=_1390;}if(this.cleanEmptyObservers&&_1392>-1&&_1392!==_1390&&_1392!==_1391){var _1393=this.observers;var _1394=_1393[_1392];if(_1394){if(!_138a){var rows=_1394.rows;for(var i=0;i<rows.length;i++){if(rows[i]!=_1389&&dom.isDescendant(rows[i],this.domNode)){return this.inherited(arguments);}}}_1394.cancel();this._numObservers--;_1393[_1392]=0;}}}this.inherited(arguments);}});});},"dgrid/List":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/dom","dojo/on","dojo/has","./util/misc","dojo/has!touch?./TouchScroll","xstyle/has-class","put-selector/put","dojo/_base/sniff","xstyle/css!./css/dgrid.css"],function(_1395,_1396,dom,_1397,has,_1398,_1399,_139a,put){_139a("mozilla","opera","webkit","ie","ie-6","ie-6-7","quirks","no-quirks","touch");var _139b="dgrid-row-odd",_139c="dgrid-row-even",_139d,_139e;function byId(id){return document.getElementById(id);};function _139f(_13a0){_13a0.className="";document.body.removeChild(_13a0);};function _13a1(_13a2,_13a3){put(document.body,_13a2,".dgrid-scrollbar-measure");var size=_13a2["offset"+_13a3]-_13a2["client"+_13a3];_139f(_13a2);return size;};has.add("dom-scrollbar-width",function(_13a4,doc,_13a5){return _13a1(_13a5,"Width");});has.add("dom-scrollbar-height",function(_13a6,doc,_13a7){return _13a1(_13a7,"Height");});has.add("dom-rtl-scrollbar-left",function(_13a8,doc,_13a9){var div=put("div"),_13aa;put(document.body,_13a9,".dgrid-scrollbar-measure[dir=rtl]");put(_13a9,div);_13aa=!!has("ie")||!!has("trident")||div.offsetLeft>=has("dom-scrollbar-width");_139f(_13a9);put(div,"!");_13a9.removeAttribute("dir");return _13aa;});var _13ab=0;function _13ac(){return "dgrid_"+_13ab++;};var _13ad=/ +/g;function _13ae(cls){var _13af=cls?"."+cls.replace(_13ad,"."):"";if(this._class){_13af="!"+this._class.replace(_13ad,"!")+_13af;}put(this.domNode,_13af);this._class=cls;};function _13b0(){return this._class;};var _13b1=has("ie")<7&&!has("quirks")?function(){var root,w,h,dims;if(!this._started){return;}root=document.documentElement;w=root.clientWidth;h=root.clientHeight;dims=this._prevWinDims||[];if(dims[0]!==w||dims[1]!==h){this.resize();this._prevWinDims=[w,h];}}:function(){if(this._started){this.resize();}};function _13b2(){return {x:this.bodyNode.scrollLeft,y:this.bodyNode.scrollTop};};function _13b3(_13b4){if(typeof _13b4.x!=="undefined"){this.bodyNode.scrollLeft=_13b4.x;}if(typeof _13b4.y!=="undefined"){this.bodyNode.scrollTop=_13b4.y;}};return _1396(has("touch")?_1399:null,{tabableHeader:false,showHeader:false,showFooter:false,maintainOddEven:true,cleanAddedRules:true,useTouchScroll:null,addUiClasses:true,cleanEmptyObservers:true,highlightDuration:250,postscript:function(_13b5,_13b6){var grid=this;(this._Row=function(id,_13b7,_13b8){this.id=id;this.data=_13b7;this.element=_13b8;}).prototype.remove=function(){grid.removeRow(this.element);};if(_13b6){this.srcNodeRef=_13b6=_13b6.nodeType?_13b6:byId(_13b6);}this.create(_13b5,_13b6);},listType:"list",create:function(_13b9,_13ba){var _13bb=this.domNode=_13ba||put("div"),cls;if(_13b9){this.params=_13b9;_1396.safeMixin(this,_13b9);cls=_13b9["class"]||_13b9.className||_13bb.className;this._sort=_13b9.sort||[];delete this.sort;}else{this._sort=[];}this.observers=[];this._numObservers=0;this._listeners=[];this._rowIdToObject={};this.postMixInProperties&&this.postMixInProperties();this.id=_13bb.id=_13bb.id||this.id||_13ac();if(this.useTouchScroll===null){this.useTouchScroll=!has("dom-scrollbar-width");}this.buildRendering();if(cls){_13ae.call(this,cls);}this.postCreate();delete this.srcNodeRef;if(this.domNode.offsetHeight){this.startup();}},buildRendering:function(){var _13bc=this.domNode,_13bd=this.addUiClasses,self=this,_13be,_13bf,_13c0,_13c1,isRTL;isRTL=this.isRTL=(document.body.dir||document.documentElement.dir||document.body.style.direction).toLowerCase()=="rtl";_13bc.className="";put(_13bc,"[role=grid].dgrid.dgrid-"+this.listType+(_13bd?".ui-widget":""));_13be=this.headerNode=put(_13bc,"div.dgrid-header.dgrid-header-row"+(_13bd?".ui-widget-header":"")+(this.showHeader?"":".dgrid-header-hidden"));if(has("quirks")||has("ie")<8){_13bf=put(_13bc,"div.dgrid-spacer");}_13c0=this.bodyNode=put(_13bc,"div.dgrid-scroller");if(has("ff")){_13c0.tabIndex=-1;}this.headerScrollNode=put(_13bc,"div.dgrid-header.dgrid-header-scroll.dgrid-scrollbar-width"+(_13bd?".ui-widget-header":""));_13c1=this.footerNode=put("div.dgrid-footer"+(this.showFooter?"":".dgrid-footer-hidden"));put(_13bc,_13c1);if(isRTL){_13bc.className+=" dgrid-rtl"+(has("dom-rtl-scrollbar-left")?" dgrid-rtl-swap":"");}_1397(_13c0,"scroll",function(event){if(self.showHeader){_13be.scrollLeft=event.scrollLeft||_13c0.scrollLeft;}event.stopPropagation();_1397.emit(_13bc,"scroll",{scrollTarget:_13c0});});this.configStructure();this.renderHeader();this.contentNode=this.touchNode=put(this.bodyNode,"div.dgrid-content"+(_13bd?".ui-widget-content":""));this._listeners.push(this._resizeHandle=_1397(window,"resize",_1398.throttleDelayed(_13b1,this)));},postCreate:has("touch")?function(){if(this.useTouchScroll){this.inherited(arguments);}}:function(){},startup:function(){if(this._started){return;}this.inherited(arguments);this._started=true;this.resize();this.set("sort",this._sort);},configStructure:function(){},resize:function(){var _13c2=this.bodyNode,_13c3=this.headerNode,_13c4=this.footerNode,_13c5=_13c3.offsetHeight,_13c6=this.showFooter?_13c4.offsetHeight:0,_13c7=has("quirks")||has("ie")<7;this.headerScrollNode.style.height=_13c2.style.marginTop=_13c5+"px";_13c2.style.marginBottom=_13c6+"px";if(_13c7){_13c2.style.height="";_13c2.style.height=Math.max((this.domNode.offsetHeight-_13c5-_13c6),0)+"px";if(_13c6){_13c4.style.bottom="1px";setTimeout(function(){_13c4.style.bottom="";},0);}}if(!_139d){_139d=has("dom-scrollbar-width");_139e=has("dom-scrollbar-height");if(has("ie")){_139d++;_139e++;}_1398.addCssRule(".dgrid-scrollbar-width","width: "+_139d+"px");_1398.addCssRule(".dgrid-scrollbar-height","height: "+_139e+"px");if(_139d!=17&&!_13c7){_1398.addCssRule(".dgrid-header-row","right: "+_139d+"px");_1398.addCssRule(".dgrid-rtl-swap .dgrid-header-row","left: "+_139d+"px");}}if(_13c7){_13c3.style.width=_13c2.clientWidth+"px";setTimeout(function(){_13c3.scrollLeft=_13c2.scrollLeft;},0);}},addCssRule:function(_13c8,css){var rule=_1398.addCssRule(_13c8,css);if(this.cleanAddedRules){this._listeners.push(rule);}return rule;},on:function(_13c9,_13ca){var _13cb=_1397(this.domNode,_13c9,_13ca);if(!has("dom-addeventlistener")){this._listeners.push(_13cb);}return _13cb;},cleanup:function(){var _13cc=this.observers,i;for(i in this._rowIdToObject){if(this._rowIdToObject[i]!=this.columns){var _13cd=byId(i);if(_13cd){this.removeRow(_13cd,true);}}}for(i=0;i<_13cc.length;i++){var _13ce=_13cc[i];_13ce&&_13ce.cancel();}this.observers=[];this._numObservers=0;this.preload=null;},destroy:function(){if(this._listeners){for(var i=this._listeners.length;i--;){this._listeners[i].remove();}delete this._listeners;}this._started=false;this.cleanup();put(this.domNode,"!");if(this.useTouchScroll){this.inherited(arguments);}},refresh:function(){this.cleanup();this._rowIdToObject={};this._autoId=0;this.contentNode.innerHTML="";this.scrollTo({x:0,y:0});},newRow:function(_13cf,_13d0,_13d1,i,_13d2){if(_13d0){var row=this.insertRow(_13cf,_13d0,_13d1,i,_13d2);put(row,".dgrid-highlight"+(this.addUiClasses?".ui-state-highlight":""));setTimeout(function(){put(row,"!dgrid-highlight!ui-state-highlight");},this.highlightDuration);return row;}},adjustRowIndices:function(_13d3){var next=_13d3;var _13d4=next.rowIndex;if(_13d4>-1){do{if(next.rowIndex>-1){if(this.maintainOddEven){if((next.className+" ").indexOf("dgrid-row ")>-1){put(next,"."+(_13d4%2==1?_139b:_139c)+"!"+(_13d4%2==0?_139b:_139c));}}next.rowIndex=_13d4++;}}while((next=next.nextSibling)&&next.rowIndex!=_13d4);}},renderArray:function(_13d5,_13d6,_13d7){_13d7=_13d7||{};var self=this,start=_13d7.start||0,_13d8=this.observers,rows,_13d9,_13da;if(!_13d6){this._lastCollection=_13d5;}if(_13d5.observe){self._numObservers++;var _13db=_13d5.observe(function(_13dc,from,to){var row,_13dd,_13de,_13df;function _13e0(){_13de=(_13de.connected||_13de).nextSibling;};if(from>-1&&rows[from]){row=rows.splice(from,1)[0];if(row.parentNode==_13d9){_13dd=row.nextSibling;if(_13dd){if(from!=to){_13dd.rowIndex--;}}self.removeRow(row);}_13d7.count--;if(self._processScroll){self._processScroll();}}if(to>-1){if(rows.length){if(to===0){_13de=rows[to];_13de=_13de&&_13e1(_13de);}else{_13de=rows[to-1];if(_13de){_13de=_13e1(_13de);_13e0();}}}else{_13de=self._getFirstRowSibling&&self._getFirstRowSibling(_13d9);}if(row&&_13de&&row.id===_13de.id){_13e0();}if(_13de&&!_13de.parentNode){_13de=byId(_13de.id);}_13df=(_13d6&&_13d6.parentNode)||(_13de&&_13de.parentNode)||self.contentNode;row=self.newRow(_13dc,_13df,_13de,_13d7.start+to,_13d7);if(row){row.observerIndex=_13da;rows.splice(to,0,row);if(!_13dd||to<from){var _13e2=row.previousSibling;_13dd=!_13e2||_13e2.rowIndex+1==row.rowIndex||row.rowIndex==0?row:_13e2;}}_13d7.count++;}if(from===0){_13e3(1,1);}else{if(from===_13d5.length-(to===-1?0:1)){_13e3(0,0);}}from!=to&&_13dd&&self.adjustRowIndices(_13dd);self._onNotification(rows,_13dc,from,to);},true);_13da=_13d8.push(_13db)-1;}var _13e4=document.createDocumentFragment(),_13e5;function _13e3(){var sides=arguments;if(_13da>-1){for(var i=0;i<sides.length;i++){var top=sides[i];var _13e6=rows[top?0:rows.length-1];_13e6=_13e6&&_13e1(_13e6);if(_13e6){var row=_13e6[top?"previousSibling":"nextSibling"];if(row){row=self.row(row);}if(row&&row.element!=_13e6){var _13e7=top?"unshift":"push";_13d5[_13e7](row.data);rows[_13e7](row.element);_13d7.count++;}}}}};function _13e1(row){if(!dom.isDescendant(row,self.domNode)&&byId(row.id)){return self.row(row.id.slice(self.id.length+5)).element;}return row;};function _13e8(_13e9){_13e5=self.insertRow(_13e9,_13e4,null,start++,_13d7);_13e5.observerIndex=_13da;return _13e5;};function _13ea(error){if(typeof _13da!=="undefined"){_13d8[_13da].cancel();_13d8[_13da]=0;self._numObservers--;}if(error){throw error;}};var _13eb;function _13ec(_13ed){_13eb=_13ed.slice(0);_13d9=_13d6?_13d6.parentNode:self.contentNode;if(_13d9&&_13d9.parentNode&&(_13d9!==self.contentNode||_13ed.length)){_13d9.insertBefore(_13e4,_13d6||null);_13e5=_13ed[_13ed.length-1];_13e5&&self.adjustRowIndices(_13e5);}else{if(_13d8[_13da]&&self.cleanEmptyObservers){_13ea();}}rows=_13ed;if(_13db){_13db.rows=rows;}};if(_13d5.map){rows=_13d5.map(_13e8,console.error);if(rows.then){return _13d5.then(function(_13ee){_13d5=_13ee;return rows.then(function(_13ef){_13ec(_13ef);_13e3(1,1,0,0);return _13eb;});});}}else{rows=[];for(var i=0,l=_13d5.length;i<l;i++){rows[i]=_13e8(_13d5[i]);}}_13ec(rows);_13e3(1,1,0,0);return _13eb;},_onNotification:function(rows,_13f0,from,to){},renderHeader:function(){},_autoId:0,insertRow:function(_13f1,_13f2,_13f3,i,_13f4){var _13f5=_13f4.parentId,id=this.id+"-row-"+(_13f5?_13f5+"-":"")+((this.store&&this.store.getIdentity)?this.store.getIdentity(_13f1):this._autoId++),row=byId(id),_13f6=row&&row.previousSibling;if(row){if(row===_13f3){_13f3=(_13f3.connected||_13f3).nextSibling;}this.removeRow(row);}row=this.renderRow(_13f1,_13f4);row.className=(row.className||"")+" dgrid-row "+(i%2==1?_139b:_139c)+(this.addUiClasses?" ui-state-default":"");this._rowIdToObject[row.id=id]=_13f1;_13f2.insertBefore(row,_13f3||null);if(_13f6){this.adjustRowIndices(_13f6);}row.rowIndex=i;return row;},renderRow:function(value,_13f7){return put("div",""+value);},removeRow:function(_13f8,_13f9){_13f8=_13f8.element||_13f8;delete this._rowIdToObject[_13f8.id];if(!_13f9){put(_13f8,"!");}},row:function(_13fa){var id;if(_13fa instanceof this._Row){return _13fa;}if(_13fa.target&&_13fa.target.nodeType){_13fa=_13fa.target;}if(_13fa.nodeType){var _13fb;do{var rowId=_13fa.id;if((_13fb=this._rowIdToObject[rowId])){return new this._Row(rowId.substring(this.id.length+5),_13fb,_13fa);}_13fa=_13fa.parentNode;}while(_13fa&&_13fa!=this.domNode);return;}if(typeof _13fa=="object"){id=this.store.getIdentity(_13fa);}else{id=_13fa;_13fa=this._rowIdToObject[this.id+"-row-"+id];}return new this._Row(id,_13fa,byId(this.id+"-row-"+id));},cell:function(_13fc){return {row:this.row(_13fc)};},_move:function(item,steps,_13fd,_13fe){var _13ff,_1400,_1401;_1401=_1400=item.element;steps=steps||1;do{if((_13ff=_1400[steps<0?"previousSibling":"nextSibling"])){do{_1400=_13ff;if(_1400&&(_1400.className+" ").indexOf(_13fd+" ")>-1){_1401=_1400;steps+=steps<0?1:-1;break;}}while((_13ff=(!_13fe||!_1400.hidden)&&_1400[steps<0?"lastChild":"firstChild"]));}else{_1400=_1400.parentNode;if(!_1400||_1400===this.bodyNode||_1400===this.headerNode){break;}}}while(steps);return _1401;},up:function(row,steps,_1402){if(!row.element){row=this.row(row);}return this.row(this._move(row,-(steps||1),"dgrid-row",_1402));},down:function(row,steps,_1403){if(!row.element){row=this.row(row);}return this.row(this._move(row,steps||1,"dgrid-row",_1403));},scrollTo:has("touch")?function(_1404){return this.useTouchScroll?this.inherited(arguments):_13b3.call(this,_1404);}:_13b3,getScrollPosition:has("touch")?function(){return this.useTouchScroll?this.inherited(arguments):_13b2.call(this);}:_13b2,get:function(name){var fn="_get"+name.charAt(0).toUpperCase()+name.slice(1);if(typeof this[fn]==="function"){return this[fn].apply(this,[].slice.call(arguments,1));}if(!1&&typeof this[fn+"Attr"]==="function"){}return this[name];},set:function(name,value){if(typeof name==="object"){for(var k in name){this.set(k,name[k]);}}else{var fn="_set"+name.charAt(0).toUpperCase()+name.slice(1);if(typeof this[fn]==="function"){this[fn].apply(this,[].slice.call(arguments,1));}else{if(!1&&typeof this[fn+"Attr"]==="function"){}this[name]=value;}}return this;},_getClass:_13b0,_setClass:_13ae,_getClassName:_13b0,_setClassName:_13ae,_setSort:function(_1405,_1406){this._sort=typeof _1405!="string"?_1405:[{attribute:_1405,descending:_1406}];this.refresh();if(this._lastCollection){if(_1405.length){if(typeof _1405!="string"){_1406=_1405[0].descending;_1405=_1405[0].attribute;}this._lastCollection.sort(function(a,b){var aVal=a[_1405],bVal=b[_1405];if(aVal===undefined){aVal="";}if(bVal===undefined){bVal="";}return aVal==bVal?0:(aVal>bVal==!_1406?1:-1);});}this.renderArray(this._lastCollection);}},sort:function(_1407,_1408){_1395.deprecated("sort(...)","use set(\"sort\", ...) instead","dgrid 0.4");this.set("sort",_1407,_1408);},_getSort:function(){return this._sort;},_setShowHeader:function(show){var _1409=this.headerNode;this.showHeader=show;put(_1409,(show?"!":".")+"dgrid-header-hidden");this.renderHeader();this.resize();if(show){_1409.scrollLeft=this.getScrollPosition().x;}},setShowHeader:function(show){_1395.deprecated("setShowHeader(...)","use set(\"showHeader\", ...) instead","dgrid 0.4");this.set("showHeader",show);},_setShowFooter:function(show){this.showFooter=show;put(this.footerNode,(show?"!":".")+"dgrid-footer-hidden");this.resize();}});});},"dgrid/util/misc":function(){define(["dojo/has","put-selector/put"],function(has,put){has.add("dom-contains",function(_140a,doc,_140b){return !!_140b.contains;});var _140c=[],_140d,_140e,_140f,_1410=/([^A-Za-z0-9_\u00A0-\uFFFF-])/g;function _1411(index){var _1412=_140c[index],i,l;if(_1412===undefined){return;}_140d[_140e](_1412);_140c[index]=undefined;for(i=index+1,l=_140c.length;i<l;i++){if(_140c[i]>_1412){_140c[i]--;}}};var util={defaultDelay:15,throttle:function(cb,_1413,delay){var ran=false;delay=delay||util.defaultDelay;return function(){if(ran){return;}ran=true;cb.apply(_1413,arguments);setTimeout(function(){ran=false;},delay);};},throttleDelayed:function(cb,_1414,delay){var ran=false;delay=delay||util.defaultDelay;return function(){if(ran){return;}ran=true;var a=arguments;setTimeout(function(){ran=false;cb.apply(_1414,a);},delay);};},debounce:function(cb,_1415,delay){var timer;delay=delay||util.defaultDelay;return function(){if(timer){clearTimeout(timer);timer=null;}var a=arguments;timer=setTimeout(function(){cb.apply(_1415,a);},delay);};},each:function(_1416,_1417,_1418){var i,len;if(!_1416){return;}if(typeof _1416.length==="number"){for(i=0,len=_1416.length;i<len;i++){_1417.call(_1418,_1416[i],i,_1416);}}else{for(i in _1416){_1417.call(_1418,_1416[i],i,_1416);}}},contains:function(_1419,node){if(has("dom-contains")){return _1419.contains(node);}else{return _1419.compareDocumentPosition(node)&8;}},addCssRule:function(_141a,css){if(!_140d){_140d=put(document.getElementsByTagName("head")[0],"style");_140d=_140d.sheet||_140d.styleSheet;_140e=_140d.deleteRule?"deleteRule":"removeRule";_140f=_140d.cssRules?"cssRules":"rules";}var index=_140c.length;_140c[index]=(_140d.cssRules||_140d.rules).length;_140d.addRule?_140d.addRule(_141a,css):_140d.insertRule(_141a+"{"+css+"}",_140c[index]);return {get:function(prop){return _140d[_140f][_140c[index]].style[prop];},set:function(prop,value){if(typeof _140c[index]!=="undefined"){_140d[_140f][_140c[index]].style[prop]=value;}},remove:function(){_1411(index);}};},escapeCssIdentifier:function(id,_141b){return id.replace(_1410,_141b||"\\$1");}};return util;});},"put-selector/put":function(){(function(_141c){var _141d,_141e=/[-+,> ]/;_141c([],_141d=function(doc,_141f){_141e=_141f||_141e;var _1420=/(?:\s*([-+ ,<>]))?\s*(\.|!\.?|#)?([-\w%$|]+)?(?:\[([^\]=]+)=?['"]?([^\]'"]*)['"]?\])?/g,_1421,_1422,_1423=false,doc=doc||document,_1424=typeof doc.createElement=="object";function _1425(_1426,text){_1426.appendChild(doc.createTextNode(text));};function put(_1427){var _1428,_1429,_142a,_142b,_142c,args=arguments,_142d=args[0];function _142e(){if(_142c&&_142b&&_142c!=_142b){(_142b==_1427&&(_1428||(_1428=_141e.test(_142f)&&doc.createDocumentFragment()))?_1428:_142b).insertBefore(_142c,_142a||null);}};for(var i=0;i<args.length;i++){var _142f=args[i];if(typeof _142f=="object"){_1429=false;if(_142f instanceof Array){_142c=doc.createDocumentFragment();for(var key=0;key<_142f.length;key++){_142c.appendChild(put(_142f[key]));}_142f=_142c;}if(_142f.nodeType){_142c=_142f;_142e();_142b=_142f;_142a=0;}else{for(var key in _142f){_142c[key]=_142f[key];}}}else{if(_1429){_1429=false;_1425(_142c,_142f);}else{if(i<1){_1427=null;}_1429=true;var _1430=_142f.replace(_1420,function(t,_1431,_1432,value,_1433,_1434){if(_1431){_142e();if(_1431=="-"||_1431=="+"){_142b=(_142a=(_142c||_142b)).parentNode;_142c=null;if(_1431=="+"){_142a=_142a.nextSibling;}}else{if(_1431=="<"){_142b=_142c=(_142c||_142b).parentNode;}else{if(_1431==","){_142b=_1427;}else{if(_142c){_142b=_142c;}}_142c=null;}_142a=0;}if(_142c){_142b=_142c;}}var tag=!_1432&&value;if(tag||(!_142c&&(_1432||_1433))){if(tag=="$"){_1425(_142b,args[++i]);}else{tag=tag||put.defaultTag;var _1435=_1424&&args[i+1]&&args[i+1].name;if(_1435){tag="<"+tag+" name=\""+_1435+"\">";}_142c=_1423&&~(_1422=tag.indexOf("|"))?doc.createElementNS(_1423[tag.slice(0,_1422)],tag.slice(_1422+1)):doc.createElement(tag);}}if(_1432){if(value=="$"){value=args[++i];}if(_1432=="#"){_142c.id=value;}else{var _1436=_142c.className;var _1437=_1436&&(" "+_1436+" ").replace(" "+value+" "," ");if(_1432=="."){_142c.className=_1436?(_1437+value).substring(1):value;}else{if(_142f=="!"){var _1438;if(_1424){put("div",_142c,"<").innerHTML="";}else{if(_1438=_142c.parentNode){_1438.removeChild(_142c);}}}else{_1437=_1437.substring(1,_1437.length-1);if(_1437!=_1436){_142c.className=_1437;}}}}}if(_1433){if(_1434=="$"){_1434=args[++i];}if(_1433=="style"){_142c.style.cssText=_1434;}else{var _1439=_1433.charAt(0)=="!"?(_1433=_1433.substring(1))&&"removeAttribute":"setAttribute";_1434=_1434===""?_1433:_1434;_1423&&~(_1422=_1433.indexOf("|"))?_142c[_1439+"NS"](_1423[_1433.slice(0,_1422)],_1433.slice(_1422+1),_1434):_142c[_1439](_1433,_1434);}}return "";});if(_1430){throw new SyntaxError("Unexpected char "+_1430+" in "+_142f);}_142e();_142b=_142d=_142c||_142b;}}}if(_1427&&_1428){_1427.appendChild(_1428);}return _142d;};put.addNamespace=function(name,uri){if(doc.createElementNS){(_1423||(_1423={}))[name]=uri;}else{doc.namespaces.add(name,uri);}};put.defaultTag="div";put.forDocument=_141d;return put;});})(function(id,deps,_143a){_143a=_143a||deps;if(typeof define==="function"){define([],function(){return _143a();});}else{if(typeof window=="undefined"){require("./node-html")(module,_143a);}else{put=_143a();}}});},"xstyle/has-class":function(){define(["dojo/has"],function(has){var _143b={};return function(){var test,args=arguments;for(var i=0;i<args.length;i++){var test=args[i];if(!_143b[test]){_143b[test]=true;var parts=test.match(/^(no-)?(.+?)((-[\d\.]+)(-[\d\.]+)?)?$/),_143c=has(parts[2]),lower=-parts[4];if((lower>0?lower<=_143c&&(-parts[5]||lower)>=_143c:!!_143c)==!parts[1]){document.documentElement.className+=" has-"+test;}}}};});},"xstyle/css":function(){define(["require"],function(_143d){function _143e(tag,id,_143f){var _1440=document.documentElement;var _1441=_1440.insertBefore(document.createElement(tag),_1440.firstChild);_1441.id=id;var _1442=(_1441.currentStyle||getComputedStyle(_1441,null))[_143f];_1440.removeChild(_1441);return _1442;};return {load:function(_1443,_1444,_1445,_1446){var url=_1444.toUrl(_1443);var _1447=_1444.cache&&_1444.cache["url:"+url];if(_1447){if(_1447.xCss){var _1448=_1447.parser;var xCss=_1447.xCss;_1447=_1447.cssText;}_143d(["./util/createStyleSheet"],function(_1449){_1449(_1447);});if(xCss){}return _144a();}function _144a(){var _144b=_143e("x-parse",null,"content");if(_144b&&_144b!="none"){_1444([eval(_144b)],_1445);}else{_1445();}};var _144c=_143e("div",_1443.replace(/\//g,"-").replace(/\..*/,"")+"-loaded","display");if(_144c=="none"){return _144a();}_143d(["./core/load-css"],function(load){load(url,_144a);});}};});},"dgrid/_StoreMixin":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred","dojo/on","dojo/aspect","put-selector/put"],function(_144d,_144e,lang,_144f,_1450,_1451,put){function noop(value){return value;};function _1452(err){if(typeof err!=="object"){err=new Error(err);}else{if(err.dojoType==="cancel"){return;}}err.grid=this;if(_1450.emit(this.domNode,"dgrid-error",{grid:this,error:err,cancelable:true,bubbles:true})){console.error(err);}};return _144e(null,{store:null,query:null,queryOptions:null,getBeforePut:true,noDataMessage:"",loadingMessage:"",constructor:function(){this.query={};this.queryOptions={};this.dirty={};this._updating={};this._columnsWithSet={};_1451.before(this,"configStructure",lang.hitch(this,function(){this._columnsWithSet={};}));},postCreate:function(){this.inherited(arguments);if(this.store){this._updateNotifyHandle(this.store);}},destroy:function(){this.inherited(arguments);if(this._notifyHandle){this._notifyHandle.remove();}},_configColumn:function(_1453){if(_1453.set){this._columnsWithSet[_1453.field]=_1453;}this.inherited(arguments);},_updateNotifyHandle:function(store){if(this._notifyHandle){this._notifyHandle.remove();delete this._notifyHandle;}if(store&&typeof store.notify==="function"){this._notifyHandle=_1451.after(store,"notify",lang.hitch(this,"_onNotify"),true);var sort=this.get("sort");if(!sort||!sort.length){}}},_setStore:function(store,query,_1454){this._updateNotifyHandle(store);this.store=store;this.dirty={};this.set("query",query,_1454);},_setQuery:function(query,_1455){var sort=_1455&&_1455.sort;this.query=query!==undefined?query:this.query;this.queryOptions=_1455||this.queryOptions;sort?this.set("sort",sort):this.refresh();},setStore:function(store,query,_1456){_144d.deprecated("setStore(...)","use set(\"store\", ...) instead","dgrid 0.4");this.set("store",store,query,_1456);},setQuery:function(query,_1457){_144d.deprecated("setQuery(...)","use set(\"query\", ...) instead","dgrid 0.4");this.set("query",query,_1457);},_getQueryOptions:function(){var _1458=lang.delegate(this.queryOptions,{});if(typeof (this._sort)==="function"||this._sort.length){_1458.sort=this._sort;}return _1458;},_getQuery:function(){var q=this.query;return typeof q=="object"&&q!=null?lang.delegate(q,{}):q;},_setSort:function(_1459,_145a){if(this.store){this._lastCollection=null;}this.inherited(arguments);},_onNotify:function(_145b,_145c){this.inherited(arguments);if(_145b&&this._numObservers<1){this.refresh({keepScrollPosition:true});}},insertRow:function(_145d,_145e,_145f,i,_1460){var store=this.store,dirty=this.dirty,id=store&&store.getIdentity(_145d),_1461;if(id in dirty&&!(id in this._updating)){_1461=dirty[id];}if(_1461){_145d=lang.delegate(_145d,_1461);}return this.inherited(arguments);},updateDirty:function(id,field,value){var dirty=this.dirty,_1462=dirty[id];if(!_1462){_1462=dirty[id]={};}_1462[field]=value;},setDirty:function(id,field,value){_144d.deprecated("setDirty(...)","use updateDirty() instead","dgrid 0.4");this.updateDirty(id,field,value);},save:function(){var self=this,store=this.store,dirty=this.dirty,dfd=new _144f(),_1463=dfd.promise,_1464=function(id){var data;return (self.getBeforePut||!(data=self.row(id).data))?function(){return store.get(id);}:function(){return data;};};function _1465(id,_1466){return function(_1467){var _1468=self._columnsWithSet,_1469=self._updating,key,data;if(typeof _1467.set==="function"){_1467.set(_1466);}else{for(key in _1466){_1467[key]=_1466[key];}}for(key in _1468){data=_1468[key].set(_1467);if(data!==undefined){_1467[key]=data;}}_1469[id]=true;return _144f.when(store.put(_1467),function(){delete dirty[id];delete _1469[id];});};};for(var id in dirty){var put=_1465(id,dirty[id]);_1463=_1463.then(_1464(id)).then(put);}dfd.resolve();return _1463;},revert:function(){this.dirty={};this.refresh();},_trackError:function(func){var _146a;if(typeof func=="string"){func=lang.hitch(this,func);}try{_146a=func();}catch(err){_1452.call(this,err);}return _144f.when(_146a,noop,lang.hitch(this,_1452));},newRow:function(){var row=this.inherited(arguments);if(this.noDataNode){put(this.noDataNode,"!");delete this.noDataNode;}return row;},removeRow:function(_146b,_146c){var row={element:_146b};if(!_146c&&this.noDataMessage&&(this.up(row).element===_146b)&&(this.down(row).element===_146b)){this.noDataNode=put(this.contentNode,"div.dgrid-no-data");this.noDataNode.innerHTML=this.noDataMessage;}return this.inherited(arguments);}});});},"dgrid/Selection":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/Deferred","dojo/on","dojo/has","dojo/aspect","./List","dojo/has!touch?./util/touch","put-selector/put","dojo/query","dojo/_base/sniff"],function(_146d,_146e,_146f,on,has,_1470,List,_1471,put){has.add("dom-comparedocumentposition",function(_1472,doc,_1473){return !!_1473.compareDocumentPosition;});has.add("pointer",function(_1474,doc,_1475){return "onpointerdown" in _1475?"pointer":"onmspointerdown" in _1475?"MSPointer":false;});has.add("css-user-select",function(_1476,doc,_1477){var style=_1477.style,_1478=["Khtml","O","ms","Moz","Webkit"],i=_1478.length,name="userSelect";do{if(typeof style[name]!=="undefined"){return name;}}while(i--&&(name=_1478[i]+"UserSelect"));return false;});has.add("dom-selectstart",typeof document.onselectstart!=="undefined");var _1479=has("mac")?"metaKey":"ctrlKey",_147a=has("css-user-select"),_147b=has("pointer"),_147c=_147b&&_147b.slice(0,2)==="MS",_147d=_147b?_147b+(_147c?"Down":"down"):"mousedown",_147e=_147b?_147b+(_147c?"Up":"up"):"mouseup";function _147f(node,_1480){var value=node.unselectable=_1480?"on":"",_1481=node.getElementsByTagName("*"),i=_1481.length;while(--i){if(_1481[i].tagName==="INPUT"||_1481[i].tagName==="TEXTAREA"){continue;}_1481[i].unselectable=value;}};function _1482(grid,_1483){var node=grid.bodyNode,value=_1483?"text":has("ff")<21?"-moz-none":"none";if(_147a&&_147a!=="msUserSelect"){node.style[_147a]=value;}else{if(has("dom-selectstart")){if(!_1483&&!grid._selectstartHandle){grid._selectstartHandle=on(node,"selectstart",function(evt){var tag=evt.target&&evt.target.tagName;if(tag!=="INPUT"&&tag!=="TEXTAREA"){evt.preventDefault();}});}else{if(_1483&&grid._selectstartHandle){grid._selectstartHandle.remove();delete grid._selectstartHandle;}}}else{_147f(node,!_1483);if(!_1483&&!grid._unselectableHandle){grid._unselectableHandle=_1470.after(grid,"renderRow",function(row){_147f(row,true);return row;});}else{if(_1483&&grid._unselectableHandle){grid._unselectableHandle.remove();delete grid._unselectableHandle;}}}}};return _146e(null,{selectionDelegate:".dgrid-row",selectionEvents:_147d+","+_147e+",dgrid-cellfocusin",selectionTouchEvents:has("touch")?_1471.tap:null,deselectOnRefresh:true,allowSelectAll:false,selection:{},selectionMode:"extended",allowTextSelection:undefined,_selectionTargetType:"rows",create:function(){this.selection={};return this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this._initSelectionEvents();var _1484=this.selectionMode;this.selectionMode="";this._setSelectionMode(_1484);},destroy:function(){this.inherited(arguments);if(this._selectstartHandle){this._selectstartHandle.remove();}if(this._unselectableHandle){this._unselectableHandle.remove();}if(this._removeDeselectSignals){this._removeDeselectSignals();}},_setSelectionMode:function(mode){if(mode==this.selectionMode){return;}this.clearSelection();this.selectionMode=mode;this._selectionHandlerName="_"+mode+"SelectionHandler";this._setAllowTextSelection(this.allowTextSelection);},setSelectionMode:function(mode){_146d.deprecated("setSelectionMode(...)","use set(\"selectionMode\", ...) instead","dgrid 0.4");this.set("selectionMode",mode);},_setAllowTextSelection:function(allow){if(typeof allow!=="undefined"){_1482(this,allow);}else{_1482(this,this.selectionMode==="none");}this.allowTextSelection=allow;},_handleSelect:function(event,_1485){if(!this[this._selectionHandlerName]||!this.allowSelect(this.row(_1485))||(event.type==="dgrid-cellfocusin"&&event.parentType==="mousedown")||(event.type===_147e&&_1485!=this._waitForMouseUp)){return;}this._waitForMouseUp=null;this._selectionTriggerEvent=event;if(!event.keyCode||!event.ctrlKey||event.keyCode==32){if(!event.shiftKey&&event.type===_147d&&this.isSelected(_1485)){this._waitForMouseUp=_1485;}else{this[this._selectionHandlerName](event,_1485);}}this._selectionTriggerEvent=null;},_singleSelectionHandler:function(event,_1486){var _1487=event.keyCode?event.ctrlKey:event[_1479];if(this._lastSelected===_1486){this.select(_1486,null,!_1487||!this.isSelected(_1486));}else{this.clearSelection();this.select(_1486);this._lastSelected=_1486;}},_multipleSelectionHandler:function(event,_1488){var _1489=this._lastSelected,_148a=event.keyCode?event.ctrlKey:event[_1479],value;if(!event.shiftKey){value=_148a?null:true;_1489=null;}this.select(_1488,_1489,value);if(!_1489){this._lastSelected=_1488;}},_extendedSelectionHandler:function(event,_148b){if(event.button===2?!this.isSelected(_148b):!(event.keyCode?event.ctrlKey:event[_1479])){this.clearSelection(null,true);}this._multipleSelectionHandler(event,_148b);},_toggleSelectionHandler:function(event,_148c){this.select(_148c,null,null);},_initSelectionEvents:function(){var grid=this,_148d=this.contentNode,_148e=this.selectionDelegate;this._selectionEventQueues={deselect:[],select:[]};if(has("touch")&&!has("pointer")&&this.selectionTouchEvents){on(_148d,_1471.selector(_148e,this.selectionTouchEvents),function(evt){grid._handleSelect(evt,this);grid._ignoreMouseSelect=this;});on(_148d,on.selector(_148e,this.selectionEvents),function(event){if(grid._ignoreMouseSelect!==this){grid._handleSelect(event,this);}else{if(event.type===_147e){grid._ignoreMouseSelect=null;}}});}else{on(_148d,on.selector(_148e,this.selectionEvents),function(event){grid._handleSelect(event,this);});}if(this.addKeyHandler){this.addKeyHandler(32,function(event){grid._handleSelect(event,event.target);});}if(this.allowSelectAll){this.on("keydown",function(event){if(event[_1479]&&event.keyCode==65&&!/\bdgrid-input\b/.test(event.target.className)){event.preventDefault();grid[grid.allSelected?"clearSelection":"selectAll"]();}});}if(this._setStore){_1470.after(this,"_setStore",function(){grid._updateDeselectionAspect();});}this._updateDeselectionAspect();},_updateDeselectionAspect:function(){var self=this,store=this.store,_148f,_1490;function _1491(_1492,_1493,_1494){var id=_1493||(_1492&&_1492[self.idProperty||"id"]);if(id!=null){var row=self.row(id),_1495=row&&self.selection[row.id];if(_1495){self[_1494](row,null,_1495);}}};if(this._removeDeselectSignals){this._removeDeselectSignals();}if(store&&store.notify){_148f=_1470.before(store,"notify",function(_1496,_1497){if(!_1496){_1491(_1496,_1497,"deselect");}});_1490=_1470.after(store,"notify",function(_1498,_1499){_1491(_1498,_1499,"select");},true);this._removeDeselectSignals=function(){_148f.remove();_1490.remove();};}else{_148f=_1470.before(this,"removeRow",function(_149a,_149b){var row;if(!_149b){row=this.row(_149a);if(row&&(row.id in this.selection)){this.deselect(row);}}});this._removeDeselectSignals=function(){_148f.remove();};}},allowSelect:function(row){return true;},_fireSelectionEvent:function(type){var queue=this._selectionEventQueues[type],_149c=this._selectionTriggerEvent,_149d;_149d={bubbles:true,grid:this};if(_149c){_149d.parentType=_149c.type;}_149d[this._selectionTargetType]=queue;on.emit(this.contentNode,"dgrid-"+type,_149d);this._selectionEventQueues[type]=[];},_fireSelectionEvents:function(){var _149e=this._selectionEventQueues,type;for(type in _149e){if(_149e[type].length){this._fireSelectionEvent(type);}}},_select:function(row,toRow,value){var _149f,_14a0,_14a1,_14a2,_14a3;if(typeof value==="undefined"){value=true;}if(!row.element){row=this.row(row);}if(value===false||this.allowSelect(row)){_149f=this.selection;_14a0=!!_149f[row.id];if(value===null){value=!_14a0;}_14a1=row.element;if(!value&&!this.allSelected){delete this.selection[row.id];}else{_149f[row.id]=value;}if(_14a1){if(value){put(_14a1,".dgrid-selected"+(this.addUiClasses?".ui-state-active":""));}else{put(_14a1,"!dgrid-selected!ui-state-active");}}if(value!==_14a0&&_14a1){this._selectionEventQueues[(value?"":"de")+"select"].push(row);}if(toRow){if(!toRow.element){toRow=this.row(toRow);}if(!toRow){this._lastSelected=_14a1;return;}_14a2=toRow.element;if(_14a2){_14a3=this._determineSelectionDirection(_14a1,_14a2);if(!_14a3){_14a2=document.getElementById(_14a2.id);_14a3=this._determineSelectionDirection(_14a1,_14a2);}while(row.element!=_14a2&&(row=this[_14a3](row))){this._select(row,null,value);}}}}},_determineSelectionDirection:has("dom-comparedocumentposition")?function(from,to){var _14a4=to.compareDocumentPosition(from);if(_14a4&1){return false;}return _14a4===2?"down":"up";}:function(from,to){if(to.sourceIndex<1){return false;}return to.sourceIndex>from.sourceIndex?"down":"up";},select:function(row,toRow,value){this._select(row,toRow,value);this._fireSelectionEvents();},deselect:function(row,toRow){this.select(row,toRow,false);},clearSelection:function(_14a5,_14a6){this.allSelected=false;for(var id in this.selection){if(_14a5!==id){this._select(id,null,false);}}if(!_14a6){this._lastSelected=null;}this._fireSelectionEvents();},selectAll:function(){this.allSelected=true;this.selection={};for(var i in this._rowIdToObject){var row=this.row(this._rowIdToObject[i]);this._select(row.id,null,true);}this._fireSelectionEvents();},isSelected:function(_14a7){if(typeof _14a7==="undefined"||_14a7===null){return false;}if(!_14a7.element){_14a7=this.row(_14a7);}return (_14a7.id in this.selection)?!!this.selection[_14a7.id]:this.allSelected&&(!_14a7.data||this.allowSelect(_14a7));},refresh:function(){if(this.deselectOnRefresh){this.clearSelection();}this._lastSelected=null;return this.inherited(arguments);},renderArray:function(){var grid=this,rows=this.inherited(arguments);_146f.when(rows,function(rows){var _14a8=grid.selection,i,row,_14a9;for(i=0;i<rows.length;i++){row=grid.row(rows[i]);_14a9=row.id in _14a8?_14a8[row.id]:grid.allSelected;if(_14a9){grid._select(row,null,_14a9);}}grid._fireSelectionEvents();});return rows;}});});},"dgrid/Keyboard":function(){define(["dojo/_base/declare","dojo/aspect","dojo/on","dojo/_base/lang","dojo/has","put-selector/put","./util/misc","dojo/_base/Deferred","dojo/_base/sniff"],function(_14aa,_14ab,on,lang,has,put,_14ac,_14ad){var _14ae={checkbox:1,radio:1,button:1},_14af=/\bdgrid-cell\b/,_14b0=/\bdgrid-row\b/;var _14b1=_14aa(null,{pageSkip:10,tabIndex:0,keyMap:null,headerKeyMap:null,postMixInProperties:function(){this.inherited(arguments);if(!this.keyMap){this.keyMap=lang.mixin({},_14b1.defaultKeyMap);}if(!this.headerKeyMap){this.headerKeyMap=lang.mixin({},_14b1.defaultHeaderKeyMap);}},postCreate:function(){this.inherited(arguments);var grid=this;function _14b2(event){var _14b3=event.target;return _14b3.type&&(!_14ae[_14b3.type]||event.keyCode==32);};function _14b4(_14b5){var _14b6=grid.cellNavigation,_14b7=_14b6?_14af:_14b0,_14b8=_14b5===grid.headerNode,_14b9=_14b5;function _14ba(){if(grid._focusedHeaderNode){grid._focusedHeaderNode.tabIndex=-1;}if(grid.showHeader){grid._focusedHeaderNode=_14b9=_14b6?grid.headerNode.getElementsByTagName("th")[0]:grid.headerNode;if(_14b9){_14b9.tabIndex=grid.tabIndex;}}};if(_14b8){_14ba();_14ab.after(grid,"renderHeader",_14ba,true);}else{_14ab.after(grid,"renderArray",function(ret){return _14ad.when(ret,function(ret){var _14bb=grid._focusedNode||_14b9;if(_14b7.test(_14bb.className)&&_14ac.contains(_14b5,_14bb)){return ret;}for(var i=0,_14bc=_14b5.getElementsByTagName("*"),_14bd;(_14bd=_14bc[i]);++i){if(_14b7.test(_14bd.className)){_14bb=grid._focusedNode=_14bd;break;}}_14bb.tabIndex=grid.tabIndex;return ret;});});}grid._listeners.push(on(_14b5,"mousedown",function(event){if(!_14b2(event)){grid._focusOnNode(event.target,_14b8,event);}}));grid._listeners.push(on(_14b5,"keydown",function(event){if(event.metaKey||event.altKey){return;}var _14be=grid[_14b8?"headerKeyMap":"keyMap"][event.keyCode];if(_14be&&!_14b2(event)){_14be.call(grid,event);}}));};if(this.tabableHeader){_14b4(this.headerNode);on(this.headerNode,"dgrid-cellfocusin",function(){grid.scrollTo({x:this.scrollLeft});});}_14b4(this.contentNode);},removeRow:function(_14bf){if(!this._focusedNode){return this.inherited(arguments);}var self=this,_14c0=document.activeElement===this._focusedNode,_14c1=this[this.cellNavigation?"cell":"row"](this._focusedNode),_14c2=_14c1.row||_14c1,_14c3;_14bf=_14bf.element||_14bf;if(_14bf===_14c2.element){_14c3=this.down(_14c2,true);if(!_14c3||_14c3.element===_14bf){_14c3=this.up(_14c2,true);}this._removedFocus={active:_14c0,rowId:_14c2.id,columnId:_14c1.column&&_14c1.column.id,siblingId:!_14c3||_14c3.element===_14bf?undefined:_14c3.id};setTimeout(function(){if(self._removedFocus){self._restoreFocus(_14c2.id);}},0);this._focusedNode=null;}this.inherited(arguments);},insertRow:function(_14c4){var _14c5=this.inherited(arguments);if(this._removedFocus&&!this._removedFocus.wait){this._restoreFocus(_14c5);}return _14c5;},_restoreFocus:function(row){var _14c6=this._removedFocus,_14c7,cell;row=row&&this.row(row);_14c7=row&&row.element&&row.id===_14c6.rowId?row:typeof _14c6.siblingId!=="undefined"&&this.row(_14c6.siblingId);if(_14c7&&_14c7.element){if(!_14c7.element.parentNode.parentNode){_14c6.wait=true;return;}if(typeof _14c6.columnId!=="undefined"){cell=this.cell(_14c7,_14c6.columnId);if(cell&&cell.element){_14c7=cell;}}if(_14c6.active&&_14c7.element.offsetHeight!==0){this.focus(_14c7);}else{put(_14c7.element,".dgrid-focus");_14c7.element.tabIndex=this.tabIndex;}}delete this._removedFocus;},addKeyHandler:function(key,_14c8,_14c9){return _14ab.after(this[_14c9?"headerKeyMap":"keyMap"],key,_14c8,true);},_focusOnNode:function(_14ca,_14cb,event){var _14cc="_focused"+(_14cb?"Header":"")+"Node",_14cd=this[_14cc],_14ce=this.cellNavigation?"cell":"row",cell=this[_14ce](_14ca),_14cf,input,_14d0,_14d1,i;_14ca=cell&&cell.element;if(!_14ca){return;}if(this.cellNavigation){_14cf=_14ca.getElementsByTagName("input");for(i=0,_14d0=_14cf.length;i<_14d0;i++){input=_14cf[i];if((input.tabIndex!=-1||"lastValue" in input)&&!input.disabled){if(has("ie")<8){input.style.position="relative";}input.focus();if(has("ie")<8){input.style.position="";}_14d1=true;break;}}}event=lang.mixin({grid:this},event);if(event.type){event.parentType=event.type;}if(!event.bubbles){event.bubbles=true;}if(_14cd){put(_14cd,"!dgrid-focus[!tabIndex]");if(has("ie")<8){_14cd.style.position="";}event[_14ce]=this[_14ce](_14cd);on.emit(_14ca,"dgrid-cellfocusout",event);}_14cd=this[_14cc]=_14ca;event[_14ce]=cell;var _14d2=this.cellNavigation?_14af:_14b0;if(!_14d1&&_14d2.test(_14ca.className)){if(has("ie")<8){_14ca.style.position="relative";}_14ca.tabIndex=this.tabIndex;_14ca.focus();}put(_14ca,".dgrid-focus");on.emit(_14cd,"dgrid-cellfocusin",event);},focusHeader:function(_14d3){this._focusOnNode(_14d3||this._focusedHeaderNode,true);},focus:function(_14d4){this._focusOnNode(_14d4||this._focusedNode,false);}});var _14d5=_14b1.moveFocusVertical=function(event,steps){var _14d6=this.cellNavigation,_14d7=this[_14d6?"cell":"row"](event),_14d8=_14d6&&_14d7.column.id,next=this.down(this._focusedNode,steps,true);if(_14d6){next=this.cell(next,_14d8);}this._focusOnNode(next,false,event);event.preventDefault();};var _14d9=_14b1.moveFocusUp=function(event){_14d5.call(this,event,-1);};var _14da=_14b1.moveFocusDown=function(event){_14d5.call(this,event,1);};var _14db=_14b1.moveFocusPageUp=function(event){_14d5.call(this,event,-this.pageSkip);};var _14dc=_14b1.moveFocusPageDown=function(event){_14d5.call(this,event,this.pageSkip);};var _14dd=_14b1.moveFocusHorizontal=function(event,steps){if(!this.cellNavigation){return;}var _14de=!this.row(event),_14df=this["_focused"+(_14de?"Header":"")+"Node"];this._focusOnNode(this.right(_14df,steps),_14de,event);event.preventDefault();};var _14e0=_14b1.moveFocusLeft=function(event){_14dd.call(this,event,-1);};var _14e1=_14b1.moveFocusRight=function(event){_14dd.call(this,event,1);};var _14e2=_14b1.moveHeaderFocusEnd=function(event,_14e3){var nodes;if(this.cellNavigation){nodes=this.headerNode.getElementsByTagName("th");this._focusOnNode(nodes[_14e3?0:nodes.length-1],true,event);}event.preventDefault();};var _14e4=_14b1.moveHeaderFocusHome=function(event){_14e2.call(this,event,true);};var _14e5=_14b1.moveFocusEnd=function(event,_14e6){var self=this,_14e7=this.cellNavigation,_14e8=this.contentNode,_14e9=_14e6?0:_14e8.scrollHeight,_14ea=_14e8.scrollTop+_14e9,_14eb=_14e8[_14e6?"firstChild":"lastChild"],_14ec=_14eb.className.indexOf("dgrid-preload")>-1,_14ed=_14ec?_14eb[(_14e6?"next":"previous")+"Sibling"]:_14eb,_14ee=_14ed.offsetTop+(_14e6?0:_14ed.offsetHeight),_14ef;if(_14ec){while(_14ed&&_14ed.className.indexOf("dgrid-row")<0){_14ed=_14ed[(_14e6?"next":"previous")+"Sibling"];}if(!_14ed){return;}}if(!_14ec||_14eb.offsetHeight<1){if(_14e7){_14ed=this.cell(_14ed,this.cell(event).column.id);}this._focusOnNode(_14ed,false,event);}else{if(!has("dom-addeventlistener")){event=lang.mixin({},event);}_14ef=_14ab.after(this,"renderArray",function(rows){_14ef.remove();return _14ad.when(rows,function(rows){var _14f0=rows[_14e6?0:rows.length-1];if(_14e7){_14f0=self.cell(_14f0,self.cell(event).column.id);}self._focusOnNode(_14f0,false,event);});});}if(_14ea===_14ee){event.preventDefault();}};var _14f1=_14b1.moveFocusHome=function(event){_14e5.call(this,event,true);};function _14f2(event){event.preventDefault();};_14b1.defaultKeyMap={32:_14f2,33:_14db,34:_14dc,35:_14e5,36:_14f1,37:_14e0,38:_14d9,39:_14e1,40:_14da};_14b1.defaultHeaderKeyMap={32:_14f2,35:_14e2,36:_14e4,37:_14e0,39:_14e1};return _14b1;});},"dojo/store/Observable":function(){define(["../_base/kernel","../_base/lang","../when","../_base/array"],function(_14f3,lang,when,array){var _14f4=function(store){var undef,_14f5=[],_14f6=0;store=lang.delegate(store);store.notify=function(_14f7,_14f8){_14f6++;var _14f9=_14f5.slice();for(var i=0,l=_14f9.length;i<l;i++){_14f9[i](_14f7,_14f8);}};var _14fa=store.query;store.query=function(query,_14fb){_14fb=_14fb||{};var _14fc=_14fa.apply(this,arguments);if(_14fc&&_14fc.forEach){var _14fd=lang.mixin({},_14fb);delete _14fd.start;delete _14fd.count;var _14fe=store.queryEngine&&store.queryEngine(query,_14fd);var _14ff=_14f6;var _1500=[],_1501;_14fc.observe=function(_1502,_1503){if(_1500.push(_1502)==1){_14f5.push(_1501=function(_1504,_1505){when(_14fc,function(_1506){var atEnd=_1506.length!=_14fb.count;var i,l,_1502;if(++_14ff!=_14f6){throw new Error("Query is out of date, you must observe() the query prior to any data modifications");}var _1507,_1508=-1,_1509=-1;if(_1505!==undef){for(i=0,l=_1506.length;i<l;i++){var _150a=_1506[i];if(store.getIdentity(_150a)==_1505){_1507=_150a;_1508=i;if(_14fe||!_1504){_1506.splice(i,1);}break;}}}if(_14fe){if(_1504&&(_14fe.matches?_14fe.matches(_1504):_14fe([_1504]).length)){var _150b=_1508>-1?_1508:_1506.length;_1506.splice(_150b,0,_1504);_1509=array.indexOf(_14fe(_1506),_1504);_1506.splice(_150b,1);if((_14fb.start&&_1509==0)||(!atEnd&&_1509==_1506.length)){_1509=-1;}else{_1506.splice(_1509,0,_1504);}}}else{if(_1504){if(_1505!==undef){_1509=_1508;}else{if(!_14fb.start){_1509=store.defaultIndex||0;_1506.splice(_1509,0,_1504);}}}}if((_1508>-1||_1509>-1)&&(_1503||!_14fe||(_1508!=_1509))){var _150c=_1500.slice();for(i=0;_1502=_150c[i];i++){_1502(_1504||_1507,_1508,_1509);}}});});}var _150d={};_150d.remove=_150d.cancel=function(){var index=array.indexOf(_1500,_1502);if(index>-1){_1500.splice(index,1);if(!_1500.length){_14f5.splice(array.indexOf(_14f5,_1501),1);}}};return _150d;};}return _14fc;};var _150e;function _150f(_1510,_1511){var _1512=store[_1510];if(_1512){store[_1510]=function(value){var _1513;if(_1510==="put"){_1513=store.getIdentity(value);}if(_150e){return _1512.apply(this,arguments);}_150e=true;try{var _1514=_1512.apply(this,arguments);when(_1514,function(_1515){_1511((typeof _1515=="object"&&_1515)||value,_1513);});return _1514;}finally{_150e=false;}};}};_150f("put",function(_1516,_1517){store.notify(_1516,_1517);});_150f("add",function(_1518){store.notify(_1518);});_150f("remove",function(id){store.notify(undefined,id);});return store;};lang.setObject("dojo.store.Observable",_14f4);return _14f4;});},"Sage/MainView/ReportMgr/Crystal/CrystalReportsUtility":function(){define(["dojo/date/locale","dojo/i18n!./nls/CrystalReportsUtility","Sage/UI/Controls/Currency","Sage/UI/Controls/TextBox","dojo/string","Sage/Reporting/Enumerations","Sage/MainView/ReportMgr/ReportManagerUtility","dojo/_base/array","dojo/store/Memory"],function(_1519,_151a,_151b,_151c,_151d,_151e,_151f,_1520,_1521){Sage.namespace("Sage.MainView.ReportMgr.Crystal.CrystalReportsUtility");dojo.mixin(Sage.MainView.ReportMgr.Crystal.CrystalReportsUtility,{_nlsResources:_151a,getConditionTypes:function(_1522){var _1523=[];if(_1522){if(_1522.useDateFilter){_1523.push({conditionType:_151e.ReportConditionType.DateRange,caption:_151e.getReportConditionTypeCaption(_151e.ReportConditionType.DateRange)});}if(_1522.useGroupFilter){_1523.push({conditionType:_151e.ReportConditionType.Group,caption:_151e.getReportConditionTypeCaption(_151e.ReportConditionType.Group)});}_1523.push({conditionType:_151e.ReportConditionType.Query,caption:_151e.getReportConditionTypeCaption(_151e.ReportConditionType.Query)});if(_1522.useUserFilter){_1523.push({conditionType:_151e.ReportConditionType.User,caption:_151e.getReportConditionTypeCaption(_151e.ReportConditionType.User)});}}return _1523;},getCurrentEntityCondition:function(){var _1524=null;var _1525=_151f.getCurrentEntityContext();if(_1525&&_1525.EntityTableName&&_1525.EntityId){var _1526=_1525.EntityTableName.toUpperCase()+"ID";_1524={conditionType:_151e.ReportConditionType.Query,table:_1525.EntityTableName.toUpperCase(),field:_1526,operator:_151e.ReportConditionOperator.Is,value:_1525.EntityId,fromRange:null,toRange:null,dataType:_151e.FieldDataTypes.String,tag:null};}return _1524;},createCustomParameterInputControl:function(_1527,_1528,_1529){var _152a=null;if(_1529.isCurrency){_152a=new _151b({style:"width:95%",id:_1527,constraints:{currency:""},value:""});}else{_152a=new _151c({style:"width:90%",id:_1527});}dojo.place(_152a.domNode,_1528,"only");if(_1529.isNumeric){_1529.connect(_152a,"onKeyPress",_1529._onKeyPress,true);}return _152a;},getCustomParameterInputField:function(_152b,_152c,_152d){var _152e=null;if(_152c){_152b=_151d.substitute("${id}_CurrencyTextBox",{id:_152b});}var _152f=_151d.substitute("input#${id}.dijitReset.dijitInputInner",{id:_152b});if(_152d){_152e=dojo.query(_152f,_152d.domNode);}else{_152e=dojo.query(_152f);}if(_152e.length>0){return _152e[0];}return null;},getCurrentUserCondition:function(){var _1530={conditionType:_151e.ReportConditionType.User,table:null,field:null,operator:_151e.ReportConditionOperator.Is,value:_151a.txtCurrentUser,fromRange:null,toRange:null,dataType:_151e.FieldDataTypes.String,tag:":UserID"};return _1530;},getDateOnlyFormattedDate:function(_1531){return _1519.format(_1531,{selector:"date",fullYear:true});},initializeComboBoxValues:function(_1532,_1533,_1534){var _1535=new _1521({identifier:"id",name:"description",value:"value",data:_1532});_1534.set("store",_1535);_1534.set("searchAttr","description");_1534.set("value","_id");_1534.set("maxHeight","150");_1534.set("required",false);if(_1533!==""){_1520.some(_1532,function(entry,i){if(entry.value==_1533){_1534.set("displayedValue",entry.description);return true;}});}else{_1534.set("displayedValue","");}},getRangeInitialValue:function(_1536,_1537){var value="";if(_1536&&_1536.length>0){var _1538=_1536[0];if(_1538.parameterClass===_151e.SlxParameterValueRangeKind.Discrete){value=_1538.value;}else{if(_1537){value=_1538.value.beginValue;}else{value=_1538.value.endValue;}}}return value;}});return Sage.MainView.ReportMgr.Crystal.CrystalReportsUtility;});},"Sage/UI/Controls/Currency":function(){define(["dojo/_base/html","dojox/grid/DataGrid","dijit/_Widget","Sage/_Templated","dijit/form/CurrencyTextBox","Sage/UI/Controls/CurrencyTextBox","dojo/currency","dojo/string","dojo/_base/declare"],function(html,_1539,_153a,_153b,_153c,_153d,_153e,_153f,_1540){dojo.mixin(dijit.form.ValidationTextBox.prototype.attributeMap,{slxchangehook:"focusNode"});var _1541=_1540("Sage.UI.Controls.Currency",[_153a,_153b],{displayModes:{"AsHyperlink":0,"AsControl":1,"AsText":2},modeTemplates:{"AsHyperlink":new Simplate(["<div data-dojo-type=\"dijit.form.Button\" showLabel=\"true\">{%= $.value %}</div>"]),"AsControl":new Simplate(["<input  data-dojo-type=\"Sage.UI.Controls.CurrencyTextBox\" ","constraints=\"{ {%= $.constraintsToString() %} }\" ","id=\"{%= $.id %}_CurrencyTextBox\" ","style=\"width:inherit;\"","textAlign=\"{%= $.textAlign %}\""," name=\"{%= $.name %}\" type=\"text\" "," value=\"{%= $.value %}\" dojoAttachPoint=\"focusNode\" ","{% if ( $.multiCurrency ) { %} "," class=\"ISOSpace\" ","{% } %}"," hotKey=\"{%= $.hotKey %}\" ","{% if($.disabled === \"disabled\") { %} "," disabled=\"disabled\" ","{% } %}","{% if($.readonly === \"readonly\") { %} "," readonly=\"readonly\" ","{% } %}"," maxlength=\"{%= $.maxLength %}\" "," autoPostBack=\"{%= $.autoPostBack %}\" "," required=\"{%= $.required %}\">","{% if ( $.multiCurrency ) { %} ","<label id=\"{%= $.id %}_ISOLabel\" ","dojoAttachPoint=\"currencyCodeLabel\" ","for=\"${0}_CurrencyTextbox\" ","class=\"ISOLabel\" ","wairole=\"presentation\" ","readonly=\"true\" ","tabindex=\"-1\" ","class=\"dijitInputInner\" ","role=\"presentation\">","</label> ","{% } %}"]),"AsText":new Simplate(["<div data-dojo-type=\"dijit.form.Button\" showLabel=\"true\">{%= $.formattedText() %}</div>"])},widgetTemplate:new Simplate(["<div style=\"width:inherit;\" slxcompositecontrol=\"true\" id=\"{%= $.id %}\" >","{%= $.modeTemplates[$.displayMode].apply($) %}","</div>"]),postMixInProperties:function(){this.currentCultureSymbol=Sys.CultureInfo.CurrentCulture.numberFormat.CurrencySymbol;if(this.multiCurrency){this.constraints["currency"]=null;}else{if(this.constraints["currency"]===""||this.constraints["currency"]===null){this.constraints["currency"]=this.currentCode;}}},postCreate:function(){if(this.multiCurrency){dijit.byId(this.id+"_CurrencyTextBox").domNode.setAttribute("style","width:100% !important;");this.currencyCodeLabel.innerHTML=this.currentCode;}this.inherited(arguments);},value:0,currentCultureSymbol:"",currentCode:"USD",exchangeRate:1,multiCurrency:false,displayCurrencyCode:true,autoPostBack:false,width:15,maxLength:128,required:false,style:"",enabled:true,readonly:"",disabled:"",visible:true,hotKey:"",tabIndex:0,displayMode:"AsControl",widgetsInTemplate:true,styles:"text-align: right;",name:"",constraints:null,id:"currencyControl",constraintsToString:function(){var tmp=[];for(var prop in this.constraints){if(this.constraints.hasOwnProperty(prop)){var value=this.constraints[prop];if(typeof value==="string"){value="'"+value+"'";}tmp.push(prop+":"+value);}}var _1542=tmp.join(",");return _1542;},constructor:function(_1543){this.inherited(arguments);},destroy:function(){if(this.focusNode){this.focusNode.destroy();}this.inherited(arguments);}});return _1541;});},"Sage/UI/Controls/CurrencyTextBox":function(){define(["dijit/form/CurrencyTextBox","dojo/currency","Sage/Utility","dojo/_base/declare","dojo/_base/lang"],function(_1544,_1545,_1546,_1547,lang){var _1548=_1547("Sage.UI.Controls.CurrencyTextBox",[_1544],{shouldPublishMarkDirty:true,autoPostBack:false,hotKey:"",attributeMap:{hotKey:{node:"textbox",type:"attribute",attribute:"accessKey"}},onBlur:function(){var _1549=Sys.CultureInfo.CurrentCulture.numberFormat.CurrencyDecimalSeparator;this.textbox.value=_1546.maximizeDecimalDigit(this.textbox.value,this.constraints.places,_1549);},_sageUICurrencyTextBox_IsValid:function(){if(this.constraints.places>-1){var _154a=_1546.restrictDecimalDigit(this.textbox.value,this.constraints.places);this.textbox.value=lang.trim(_154a.replace(Sys.CultureInfo.CurrentCulture.numberFormat.CurrencySymbol,""));this.textbox.value=lang.trim(_154a.replace(this.constraints.currency,""));}this.inherited(arguments);},postCreate:function(){this.connect(this,"isValid",this._sageUICurrencyTextBox_IsValid);this.connect(this,"onChange",this.onChanged);this.connect(this,"onBlur",this.onBlur);this.inherited(arguments);},onChanged:function(e){if(this.shouldPublishMarkDirty){dojo.publish("Sage/events/markDirty");}if(this.autoPostBack){if(Sys){Sys.WebForms.PageRequestManager.getInstance()._doPostBack(this.id,null);}}},setAttribute:function(attr,val){this.set(attr,val);}});return _1548;});},"Sage/MainView/ReportMgr/Crystal/DateParameterEditor":function(){define(["dojo/_base/declare","dojo/_base/array","Sage/MainView/ReportMgr/Crystal/ParameterHeaderWidget","dojo/text!./templates/DateParameterEditor.html","Sage/MainView/ReportMgr/Crystal/_ParameterEditorBase","Sage/MainView/ReportMgr/ReportManagerUtility","Sage/MainView/ReportMgr/Crystal/CrystalReportsUtility","Sage/Utility","Sage/Reporting/Enumerations","dojo/string"],function(_154b,_154c,_154d,_154e,_154f,_1550,_1551,_1552,_1553,_1554){var _1555=_1552.makeTemplateFromString(_154e);var _1556=_154b("Sage.MainView.ReportMgr.Crystal.DateParameterEditor",[_154f],{widgetTemplate:_1555,displayTime:false,_selectedValues:[],_validationMsg:"",_setValueAttr:function(value){this._set("value",value);},_getValueAttr:function(){this._promptParameter.currentValues=[];if(this._selectedValues.length>0){var self=this;_154c.forEach(this._selectedValues,function(_1557,i){self._promptParameter.currentValues.push(self._getParameterValue(_1557));});}else{var _1558;if(this._paramDiscreteType){var _1559=this._getDateValue(this.dtDiscreteFromRange,this.cboDiscreteStartRange.item);if(_1559){_1558={range:null,value:_1559.value};}else{_1558={range:null,value:""};}}else{var range=this._getRangeValue();if(range!==undefined&&range!==null){_1558={range:range,displayValue:range.displayValue,value:range.startValue?range.startValue:range.endValue};}else{_1558={range:null,displayValue:"",value:""};}}this._promptParameter.currentValues.push(this._getParameterValue(_1558));}return this._promptParameter;},postCreate:function(){this.displayTime=this._promptParameter.parameterValueKind===_1553.SlxParameterValueKind.DateTimeParameter;this.dtDiscreteFromRange.displayTime=this.displayTime;this.dtToRange.displayTime=this.displayTime;this.dtCustomValue.displayTime=this.displayTime;this.chkIncludeFromRange.set("checked",true);this.chkIncludeToRange.set("checked",true);},constructor:function(_155a){},startup:function(){if(this._started){return;}this.inherited(arguments);var _155b=new _154d({promptText:this._promptParameter.promptText,parameterFieldName:this._promptParameter.parameterFieldName}).placeAt(this.paramsHeaderContainer);switch(this.valueRangeKind){case _1553.SlxParameterValueRangeKind.Discrete:if(this.allowMultiValue){_1550.setDomNodeVisible(this.tblRange,false);}else{_1550.setDomNodeVisible(this.colEndDefaultValues,false);_1550.setDomNodeVisible(this.rowIncludeRangeOptions,false);_1550.setDomNodeVisible(this.rowUpperLowerRangeOptions,false);_1550.setDomNodeVisible(this.colEndDefaultValuesLabel,false);_1550.setDomNodeVisible(this.rowToRange,false);_1550.setDomNodeVisible(this.rowToValueLabel,false);_1550.setDomNodeVisible(this.rowStartEndOrValue,this._allowCustomValues&&this._values.length>0);_1550.setDomNodeVisible(this.rowDiscreteFromRange,this._allowCustomValues);this.lblDiscreteStartRange.textContent=this.lblSelectValue_Caption;if(this._values.length>0){_1551.initializeComboBoxValues(this._values,_1551.getRangeInitialValue(this._initialValues,false),this.cboDiscreteStartRange);this.cboDiscreteStartRange.setAttribute("style","width:55% !important;");this.dtDiscreteFromRange.setAttribute("style","width: 55% !important;");dojo.connect(this.cboDiscreteStartRange,"onBlur",this,"_cboDiscreteStartRange_OnChange",true);dojo.connect(this.dtDiscreteFromRange,"onChange",this,"_dtDiscreteStartRange_OnChange",true);}else{if(this.initialValues&&this.initialValues.length>0){this.dtDiscreteFromRange.set("value",this.initialValues[0]);}else{this.dtDiscreteFromRange.setAttribute("style","width: 55%!important;");}}}break;case _1553.SlxParameterValueRangeKind.Range:case _1553.SlxParameterValueRangeKind.DiscreteAndRange:_1550.setDomNodeVisible(this.rowStartEndOrValue,this._allowCustomValues&&this._values.length>0);_1550.setDomNodeVisible(this.rowCustomRangeValues,this._allowCustomValues);if(this._values.length>0){_1551.initializeComboBoxValues(this._values,this.allowMultiValue&&this.mode!=="new"?"":_1551.getRangeInitialValue(this._initialValues,true),this.cboDiscreteStartRange);dojo.connect(this.dtDiscreteFromRange,"onChange",this,"_dtDiscreteFromRange_OnChange",true);dojo.connect(this.cboDiscreteStartRange,"onBlur",this,"_cboStartRange_OnChange",true);_1551.initializeComboBoxValues(this._values,this.allowMultiValue&&this.mode!=="new"?"":_1551.getRangeInitialValue(this._initialValues,false),this.cboEndRangeValues);dojo.connect(this.dtToRange,"onChange",this,"_dtEndRange_OnChange",true);dojo.connect(this.cboEndRangeValues,"onBlur",this,"_cboEndRange_OnChange",true);}break;default:console.error(_1554("Unknown parameter type: ${0}",[this.valueRangeKind]));}_1550.setDomNodeVisible(this.divValidationMessage,false);_1550.setDomNodeVisible(this.rowRangeListItems,this._values.length>0);_1550.setDomNodeVisible(this.rowAddRangeParameter,this.allowMultiValue);_1550.setDomNodeVisible(this.rowCustomValues,this._allowCustomValues&&this.allowMultiValue&&!this._paramRangeType);if(this.allowMultiValue){if(this._paramRangeType){this._initialIds=[];}this.initializeTransferBoxWidget(this.transferBoxContainer,!this._paramRangeType);}this._assignDefaultRangeValues();this._initializeMessages();},isValid:function(){this._validationMsg="";dojo.addClass(this.rowRangeValidationError,"display-none");if(!this.isOptionalPrompt&&!this.allowNullValue){if(this.transferBox){this._selectedValues=this.transferBox.getSelectedValues();if(this._selectedValues.length>0){dojo.addClass(this.transferBox.errorValidation,"display-none");}else{dojo.removeClass(this.transferBox.errorValidation,"display-none");this._validationMsg=this.txtPleaseSpecifyValue;}}else{if(this._verifyRequiredAssignments()){this._validateMinMaxRange();}}}this.lblRangeValidationError.textContent=this._validationMsg;if(this._validationMsg!==""){dojo.removeClass(this.rowRangeValidationError,"display-none");}return this._validationMsg==="";},_assignDefaultRangeValues:function(){if(this.currentValues.length===1){if(this.currentValues[0].rangeValue){var _155c=this.currentValues[0];var _155d=_155c.rangeValue.beginValue;_155d=_155d?_1552.Convert.toDateFromString(_155d):null;this.chkIncludeFromRange.set("checked",(_155c.rangeValue.lowerBoundType===_1553.SlxRangeBoundType.BoundInclusive));this.chkNoLowerValue.set("checked",(_155d===null));_155d=_155c.rangeValue.endValue;_155d=_155d?_1552.Convert.toDateFromString(_155d):null;this.chkIncludeToRange.set("checked",(_155c.rangeValue.upperBoundType===_1553.SlxRangeBoundType.BoundInclusive));this.chkNoUpperValue.set("checked",(_155d===null));}}},_cboDiscreteStartRange_OnChange:function(){var item=this.cboDiscreteStartRange.item;if(item&&item.value!==""){this.dtDiscreteFromRange.reset();}},_dtDiscreteStartRange_OnChange:function(){if(this.dtDiscreteFromRange.focusNode.value!==""){this.cboDiscreteStartRange.attr("displayedValue","");}},_cboStartRange_OnChange:function(){var item=this.cboDiscreteStartRange.item;if(item&&item.value!==""){this.dtDiscreteFromRange.reset();}},_cboEndRange_OnChange:function(){var item=this.cboEndRangeValues.item;if(item&&item.value!==""){this.dtToRange.reset();}},_dtDiscreteFromRange_OnChange:function(){if(this.dtDiscreteFromRange.focusNode.value!==""){this.cboDiscreteStartRange.set("displayedValue","");}},_dtEndRange_OnChange:function(){if(this.dtToRange.focusNode.value!==""){this.cboEndRangeValues.set("displayedValue","");}},_initializeMessages:function(){var _155e=this.getMinMaxInitializationMessage();this.spanMinMaxMessage.innerHTML=_1552.htmlEncode(_155e);_1550.setDomNodeVisible(this.divMinMaxMessage,(_155e!==""));},_validateMinMaxRange:function(){if(this._paramDiscreteType){var _155f=this._getDateValue(this.dtDiscreteFromRange,this.cboDiscreteStartRange.item);if(_155f){var _1560=this.getMinMaxInitializationMessage(_155f.date);}return;}var _1561=this._getDateValue(this.dtDiscreteFromRange,this.cboDiscreteStartRange.item);var _1562=this._getDateValue(this.dtToRange,this.cboEndRangeValues.item);if(this._minimum&&!this.chkNoLowerValue.checked&&(_1561<this._minimum)){this._validationMsg=dojo.replace(this.txtPleaseSpecifyDateGreater,[_1551.getDateOnlyFormattedDate(this._minimum)]);}if(this._minimum&&!this.chkNoUpperValue.checked&&(_1562<this._minimum)){this._validationMsg=dojo.replace(this.txtPleaseSpecifyDateGreater,[_1551.getDateOnlyFormattedDate(this._minimum)]);}if(this._maximum&&!this.chkNoUpperValue.checked&&(_1562>this._maximum)){this._validationMsg=dojo.replace(this.txtPleaseSpecifyDateLesser,[_1551.getDateOnlyFormattedDate(this._maximum)]);}if(this._maximum&&!this.chkNoLowerValue.checked&&(_1561>this._maximum)){this._validationMsg=dojo.replace(this.txtPleaseSpecifyDateLesser,[_1551.getDateOnlyFormattedDate(this._maximum)]);}if(!this.chkNoLowerValue.checked&&!this.chkNoUpperValue.checked){if(_1561>_1562){this._validationMsg=this.txtFromMustBeLessThanOrEqualToTo;}}},_getParameterValue:function(_1563){var _1564=null;if(_1563.range){_1564={className:_1553.ParameterClassName.RangeValue,description:_1563.displayValue,rangeDateValue:_1554.substitute("${0};${1}",[_1563.range.startValue?_1563.range.startValue:"",_1563.range.endValue?_1563.range.endValue:""]),rangeValue:{beginValue:_1563.range.startValue,beginValueType:this.beginValueType,endValue:_1563.range.endValue,endValueType:this.endValueType,lowerBoundType:_1563.range.noLowerValue?_1553.SlxRangeBoundType.NoBound:_1563.range.includeFromRange?_1553.SlxRangeBoundType.BoundInclusive:_1553.SlxRangeBoundType.BoundExclusive,upperBoundType:_1563.range.noUpperValue?_1553.SlxRangeBoundType.NoBound:_1563.range.includeToRange?_1553.SlxRangeBoundType.BoundInclusive:_1553.SlxRangeBoundType.BoundExclusive}};}else{_1564={className:_1553.ParameterClassName.DiscreteValue,description:_1563.displayValue,discreteDateValue:_1554.substitute("${0};",[_1563.value]),discreteValue:{actualValue:_1563.value,actualValueType:this.actualValueType,value:_1563.value,valueType:this.valueType}};}return _1564;},_chkNoLowerValue_OnCheck:function(_1565){this.chkIncludeFromRange.setAttribute("disabled",_1565);this.cboDiscreteStartRange.setAttribute("disabled",_1565);this.chkNoUpperValue.setAttribute("disabled",_1565);this.dtDiscreteFromRange.setAttribute("disabled",_1565);},_chkNoUpperValue_OnCheck:function(_1566){this.chkIncludeToRange.setAttribute("disabled",_1566);this.cboEndRangeValues.setAttribute("disabled",_1566);this.chkNoLowerValue.setAttribute("disabled",_1566);this.dtToRange.setAttribute("disabled",_1566);},_cmdAddRange_OnClick:function(){if(this._verifyRequiredAssignments()){dojo.addClass(this.rowRangeValidationError,"display-none");var range=this._getRangeValue();var _1567={range:range,displayValue:range.displayValue,value:range.startValue?range.startValue:range.endValue};this._addToSelectedValues(_1567);}else{dojo.removeClass(this.rowRangeValidationError,"display-none");}},_getRangeValue:function(){var _1568=this._getDateValue(this.dtDiscreteFromRange,this.cboDiscreteStartRange.item);var _1569=this._getDateValue(this.dtToRange,this.cboEndRangeValues.item);var _156a=_1568!==null&&_1568!==undefined;var _156b=_1569!==null&&_1569!==undefined;var range=[];if(!this.chkNoLowerValue.get("checked")&&!this.chkNoUpperValue.get("checked")&&_156a&&_156b){range={startValue:_1568.value,endValue:_1569.value,displayValue:_1554.substitute("[${0} .. ${1}]",[_1568.displayValue,_1569.displayValue])};}else{if(this.chkNoLowerValue.get("checked")&&_156b){range={startValue:null,endValue:_1569.value,displayValue:_1554.substitute("( .. ${0}]",[_1569.displayValue])};}else{if(this.chkNoUpperValue.get("checked")&&_156a){range={startValue:_1568.value,endValue:null,displayValue:_1554.substitute("[${0} .. )",[_1568.displayValue])};}}}range.noLowerValue=this.chkNoLowerValue.checked;range.noUpperValue=this.chkNoUpperValue.checked;range.includeFromRange=this.chkIncludeFromRange.checked;range.includeToRange=this.chkIncludeFromRange.checked;return range;},_verifyRequiredAssignments:function(){if(this._paramDiscreteType){this._validateDiscreteParameterType();}else{var _156c=this._getDateValue(this.dtDiscreteFromRange,this.cboDiscreteStartRange.item);var _156d=this._getDateValue(this.dtToRange,this.cboEndRangeValues.item);if(this.chkNoUpperValue.checked){if(_156c.displayValue){this._removeErrorMessages();return true;}else{if(this._allowCustomValues){this.cboDiscreteStartRange.focus();dojo.removeClass(this.lstErrorDiscreteStartRange,"display-none");dojo.addClass(this.lstErrorEndRange,"display-none");}else{this.dtDiscreteFromRange.focus();dojo.removeClass(this.errorDiscreteValue,"display-none");dojo.addClass(this.errorEndRange,"display-none");}}return false;}if(this.chkNoLowerValue.checked){if(_156d.displayValue){this._removeErrorMessages();return true;}else{if(this._allowCustomValues){this.cboEndRangeValues.focus();dojo.addClass(this.lstErrorDiscreteStartRange,"display-none");dojo.removeClass(this.lstErrorEndRange,"display-none");}else{this.dtToRange.focus();dojo.addClass(this.errorDiscreteValue,"display-none");dojo.removeClass(this.errorEndRange,"display-none");}}return false;}if(!_156c.displayValue||!_156d.displayValue||(this._isStartDatePriorToEndDate(_156c,_156d))){this._setRangeErrorMessageVisibility(_156c,_156d);return false;}else{dojo.addClass(this.allowMultiValue?this.lstErrorDiscreteStartRange:this.errorDiscreteValue,"display-none");dojo.addClass(this.allowMultiValue?this.lstErrorEndRange:this.errorEndRange,"display-none");}}return true;},_validateDiscreteParameterType:function(){dojo.addClass(this.lstErrorDiscreteStartRange,"display-none");dojo.addClass(this.errorDiscreteValue,"display-none");if(this.dtDiscreteFromRange.focusNode.value===""&&(!this.cboDiscreteStartRange.item)){this._validationMsg=this.txtPleaseSpecifyValue;if(this._values.length>0){dojo.removeClass(this.lstErrorDiscreteStartRange,"display-none");this.cboDiscreteStartRange.focus();}else{dojo.removeClass(this.errorDiscreteValue,"display-none");this.dtDiscreteFromRange.focus();}}else{this._validateMinMaxRange();if(this._validationMsg!==""){if(this.dtDiscreteFromRange.focusNode.value!==""){dojo.removeClass(this.errorDiscreteValue,"display-none");this.dtDiscreteFromRange.focus();}else{dojo.removeClass(this.lstErrorDiscreteStartRange,"display-none");this.cboDiscreteStartRange.focus();}}}},_removeErrorMessages:function(){dojo.addClass(this.errorDiscreteValue,"display-none");dojo.addClass(this.errorEndRange,"display-none");dojo.addClass(this.lstErrorDiscreteStartRange,"display-none");dojo.addClass(this.lstErrorEndRange,"display-none");},_isStartDatePriorToEndDate:function(_156e,_156f){var _1570=_1552.Convert.toDateFromString(_156e.value);var _1571=_1552.Convert.toDateFromString(_156f.value);return _1570>_1571;},_setRangeErrorMessageVisibility:function(_1572,_1573){this._validationMsg=this.txtPleaseSpecifyValue;if(!_1572.displayValue&&!_1573.displayValue){dojo.removeClass(this.allowMultiValue?this.lstErrorDiscreteStartRange:this.errorDiscreteValue,"display-none");dojo.removeClass(this.allowMultiValue?this.lstErrorEndRange:this.errorEndRange,"display-none");if(this.allowMultiValue){this.cboDiscreteStartRange.focus();}else{this.dtDiscreteFromRange.focus();}}else{if(!_1572.displayValue){dojo.addClass(this.allowMultiValue?this.lstErrorEndRange:this.errorEndRange,"display-none");dojo.removeClass(this.allowMultiValue?this.lstErrorDiscreteStartRange:this.errorDiscreteValue,"display-none");this.dtDiscreteFromRange.focus();}else{if(!_1573.displayValue){dojo.addClass(this.allowMultiValue?this.lstErrorDiscreteStartRange:this.errorDiscreteValue,"display-none");dojo.removeClass(this.allowMultiValue?this.lstErrorEndRange:this.errorEndRange,"display-none");if(this.allowMultiValue){this.cboEndRangeValues.focus();}else{this.dtToRange.focus();}}else{dojo.addClass(this.errorDiscreteValue,"display-none");this.dtToRange.focus();this._validationMsg=this.txtFromMustBeLessThanOrEqualToTo;}}}},_getRangeDisplayValue:function(){var _1574=this._getDateValue(this.dtDiscreteFromRange,this.cboDiscreteStartRange.item);var _1575=this._getDateValue(this.dtToRange,this.cboEndRangeValues.item);if(!this.chkNoLowerValue.get("checked")&&!this.chkNoUpperValue.get("checked")){return _1554.substitute("[${0} .. ${1}]",[_1574.displayValue,_1575.displayValue]);}else{if(this.chkNoLowerValue.get("checked")){return _1554.substitute("( .. ${0}]",[_1575.displayValue]);}else{return _1554.substitute("[${0} .. )",[_1574.displayValue]);}}},_addToSelectedValues:function(_1576){if(_1576){if(this.valueWithinMinMaxRange(_1576.value)){var item={id:_1576.displayValue,value:_1576.value,displayValue:_1576.displayValue,range:_1576.range,__selected:true,destroyOnRemove:false};this.transferBox.addNewItem(item,true);this._showValidationMessage("");}else{this._validateMinMaxRange();this._showValidationMessage(this._validationMsg);}}else{this._showValidationMessage(this.txtPleaseSpecifyValue);}},_showValidationMessage:function(msg){this.spanValidationMessage.innerHTML=_1552.htmlEncode(msg);_1550.setDomNodeVisible(this.divValidationMessage,(msg!==""));},_cmdAddCustom_OnClick:function(){if(this.dtCustomValue.textbox.value===""){dojo.removeClass(this.errorCustomDate,"display-none");this._showValidationMessage(this.txtPleaseSpecifyValue);this.dtCustomValue.focus();}else{this._showValidationMessage("");dojo.addClass(this.errorCustomDate,"display-none");var _1577={range:null,displayValue:this.dtCustomValue.textbox.value,value:_1552.Convert.toIsoStringFromDate(this.dtCustomValue.get("value"))};this._addToSelectedValues(_1577);}},_getDateValue:function(_1578,_1579){var _157a=_1578.textbox.value;var _157b;if(_157a===""){if(_1579&&_1579!==null&&_1579.value!==""){_157b={value:_1579.value,displayValue:_1579.description,date:_1552.Convert.toDateFromString(_1579.value)};}}else{_157b={displayValue:_157a,value:_1552.Convert.toIsoStringFromDate(_1578.get("value")),date:_1578.get("value")};}return _157b;}});return _1556;});},"Sage/MainView/ReportMgr/Crystal/SimpleParameterEditor":function(){define(["dojo/_base/declare","dojo/_base/array","Sage/MainView/ReportMgr/Crystal/ParameterHeaderWidget","dojo/text!./templates/SimpleParameterEditor.html","Sage/MainView/ReportMgr/Crystal/_ParameterEditorBase","Sage/MainView/ReportMgr/ReportManagerUtility","Sage/MainView/ReportMgr/Crystal/CrystalReportsUtility","Sage/Utility","Sage/Reporting/Enumerations","dojo/string","dojo/number","dojo/currency","Sage/UI/Controls/Currency","Sage/UI/Controls/TextBox","Sage/MainView/ReportMgr/Crystal/ParameterRangeWidget"],function(_157c,_157d,_157e,_157f,_1580,_1581,_1582,_1583,_1584,_1585,_1586,_1587,_1588,_1589,_158a){var _158b=_1583.makeTemplateFromString(_157f);var _158c=_157c("Sage.MainView.ReportMgr.Crystal.SimpleParameterEditor",[_1580],{widgetTemplate:_158b,isNumeric:false,isCurrency:false,txtCustomValue:null,parameterRangeWidget:null,_setValueAttr:function(value){this._set("value",value);},_getValueAttr:function(){this._promptParameter.currentValues=[];var _158d;if(this._paramRangeType){var range=this.parameterRangeWidget.getRangeValue();_158d={range:range,displayValue:range.displayValue,value:range.startValue?range.startValue:range.endValue};this._promptParameter.currentValues.push(this._getParameterValue(_158d));}else{var _158e=this._getCurrentValue();if(_158e){var _158f=this._getParameterValue(_158e);this._promptParameter.currentValues.push(_158f);}}return this._promptParameter;},constructor:function(_1590){},startup:function(){if(this._started){return;}this.inherited(arguments);_1581.setDomNodeVisible(this.divValidationMessage,false);this.isNumeric=(this.parameterValueKind===_1584.SlxParameterValueKind.NumberParameter);this.isCurrency=(this.parameterValueKind===_1584.SlxParameterValueKind.CurrencyParameter);var _1591=new _157e({promptText:this._promptParameter.promptText,parameterFieldName:this._promptParameter.parameterFieldName}).placeAt(this.paramsHeaderContainer);if(this._paramRangeType){this.parameterRangeWidget=new _158a({paramInitialIds:this._initialIds,paramInitialValues:this._initialValues,paramValues:this._values,defaultValues:this._promptParameter.defaultValues,parameterValueKind:this._promptParameter.parameterValueKind,allowCustomValues:this._allowCustomValues,parameterPageId:this.paramId,isAttachedToTransbox:false},"parameterRangeWidget");this.parameterRangeWidget.placeAt(this.parameterRangeWidgetContainer);_1581.setDomNodeVisible(this.rowParameterRange,true);}else{if(this._values.length>0){_1581.setDomNodeVisible(this.rowSingleValue,true);_1582.initializeComboBoxValues(this._values,_1582.getRangeInitialValue(this._initialValues,false),this.cmbValues);this.connect(this.cmbValues,"onBlur",this._onComboBoxChange,true);}_1581.setDomNodeVisible(this.rowCustomValues,this._values.length===0||this._allowCustomValues);var _1592=_1585.substitute("customControl_${id}",{id:this.paramId});this.customValueField=_1582.createCustomParameterInputControl(_1592,this.customValueContainer,this);this.txtCustomValue=_1582.getCustomParameterInputField(_1592,this.isCurrency,this.customValueField);if(this.isCurrency){dojo.attr(this.customValueField,"style","width:105% !important;");}else{dojo.attr(this.customValueField,"style","width:110% !important;");}this.connect(this.customValueField,"onBlur",this._onCustomChange,true);this.subscribe("entity/report/parameters/control/destroy",function(data){if(data){if(data.id.indexOf("Simple")>-1){data._destroyObject();}}});}_1581.setDomNodeVisible(this.rowOrEnterValue,(this._allowCustomValues&&this._values.length>0&&!this._paramRangeType));this._initializeMessages();},_onKeyPress:function(e){if(!_1583.restrictToNumberOnKeyPress(e,"number")){dojo.stopEvent(e);}},_onCustomChange:function(){if(dojo.attr(this.txtCustomValue,"value")!==""){this.cmbValues.set("displayedValue","");}},_onComboBoxChange:function(){var item=this.cmbValues.item;if(item&&item.value!==""){dojo.attr(this.txtCustomValue,"value","");dojo.attr(this.customValueField,"displayedValue","");}},isValid:function(){var msg="";if(!this._promptParameter.isOptionalPrompt&&!this._promptParameter.allowNullValue){if(this._paramRangeType){if(!this.parameterRangeWidget.verifyRequiredAssignments()){msg=this.txtPleaseSpecifyValue;}else{if(!this.parameterRangeWidget.validateRangeWithinBoundaries()){msg=this.txtFromMustBeLessThanOrEqualToTo;}}}else{var _1593=this._getCurrentValue();if(_1593===null){msg=this.txtPleaseSpecifyValue;}else{var value=this.isNumeric?_1593:_1593.length;msg=this.getMinMaxValidationMessage(value);if(msg.length===0&&this.isCurrency){msg=this.customValueField._supportingWidgets[0].message;}}}}this._showValidationMessage(msg);return msg==="";},_initializeMessages:function(){var _1594=this.getMinMaxInitializationMessage();this.spanMinMaxMessage.innerHTML=_1583.htmlEncode(_1594);_1581.setDomNodeVisible(this.divMinMaxMessage,(_1594!==""));},_showValidationMessage:function(msg){this.spanValidationMessage.innerHTML=_1583.htmlEncode(msg);_1581.setDomNodeVisible(this.divValidationMessage,(msg!==""));_1581.setDomNodeVisible(this.errorEndRange,(msg!==""));_1581.setDomNodeVisible(this.errorCustomValue,(msg!==""));if(msg!==""&&!this._paramRangeType){if(this._values.length>0){this.cmbValues.focus();}else{this.txtCustomValue.focus();}}},_getCurrentValue:function(){var value=null;var _1595=null;if(dojo.attr(this.txtCustomValue,"value")!==""){if(this.isNumeric){value=_1586.parse(dojo.attr(this.txtCustomValue,"value"));}else{if(this.isCurrency){value=this.txtCustomField._supportingWidgets[0].value;_1595=this.txtCustomField._supportingWidgets[0].displayedValue;}else{value=dojo.attr(this.txtCustomValue,"value");}}return {value:value,displayValue:_1595?_1595:value};}else{var _1596=this.cmbValues.item;if(_1596&&_1596.value!==""){if(this.isNumeric){value=_1586.parse(_1596.value);}else{value=_1596.value;}return {value:value,displayValue:_1596.description};}}return value;},_getParameterValue:function(_1597){var _1598;if(_1597.range){_1598={className:_1584.ParameterClassName.RangeValue,description:_1597.displayValue,rangeValue:{beginValue:_1597.range.startValue,beginValueType:this.beginValueType,endValue:_1597.range.endValue,endValueType:this.endValueType,lowerBoundType:_1597.range.noLowerValue?_1584.SlxRangeBoundType.NoBound:_1597.range.includeFromRange?_1584.SlxRangeBoundType.BoundInclusive:_1584.SlxRangeBoundType.BoundExclusive,upperBoundType:_1597.range.noUpperValue?_1584.SlxRangeBoundType.NoBound:_1597.range.includeToRange?_1584.SlxRangeBoundType.BoundInclusive:_1584.SlxRangeBoundType.BoundExclusive}};}else{_1598={className:"CrystalReports.ParameterFieldDiscreteValue",computedText:this.isNumeric?null:"\""+_1597.value+"\"",description:_1597.displayValue,discreteValue:{actualValue:_1597.value,actualValueType:this.actualValueType,value:_1597.value,valueType:this.valueType}};}return _1598;},_destroyObject:function(){if(this.customValueField){this.customValueField.destroyRecursive();}if(this.parameterRangeWidget){dojo.publish("entity/report/parameters/control/destroy",[this.parameterRangeWidget,this]);}}});return _158c;});},"Sage/MainView/ReportMgr/Crystal/ParameterRangeWidget":function(){define(["dojo/_base/declare","dojo/_base/array","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!./templates/ParameterRangeWidget.html","Sage/MainView/ReportMgr/ReportManagerUtility","dojo/i18n!./nls/_ParameterEditorBase","Sage/MainView/ReportMgr/Crystal/CrystalReportsUtility","dojo/string","dojo/currency","Sage/UI/Controls/Currency","Sage/UI/Controls/TextBox","Sage/Reporting/Enumerations","Sage/Utility"],function(_1599,_159a,_159b,_159c,_159d,_159e,_159f,_15a0,_15a1,_15a2,_15a3,_15a4,_15a5,_15a6,_15a7){var _15a8=_1599("Sage.MainView.ReportMgr.Crystal.ParameterRangeWidget",[_159b,_159c,_159d],{templateString:_159e,paramInitialIds:null,paramValues:null,defaultValues:null,paramInitialValues:null,parameterPageId:null,isNumeric:false,isCurrency:false,txtStartCustomValue:null,txtEndCustomValue:null,customStartValueField:null,customEndValueField:null,parameterValueKind:_15a6.SlxParameterValueKind.StringParameter,allowCustomValues:false,hasParamValues:false,isAttachedToTransbox:false,postMixInProperties:function(){dojo.mixin(this,_15a0);},postCreate:function(){this.inherited(arguments);this.chkIncludeFromRange.set("checked",true);this.chkIncludeToRange.set("checked",true);this._initializeStartRangeValues();},verifyRequiredAssignments:function(){var _15a9=this._getValue(this._SafelyGetStartValue(),this.cboStartRangeValues.item);var _15aa=this._getValue(this._SafelyGetEndValue(),this.cboEndRangeValues.item);if(this.chkNoUpperValue.checked){if(_15a9.displayValue){this._removeErrorMessages();return true;}else{this.cboStartRangeValues.focus();dojo.removeClass(this.hasParamValues?this.errorStartRange:this.errorStartCustomValue,"display-none");dojo.addClass(this.hasParamValues?this.errorEndRange:this.errorEndCustomValue,"display-none");}return false;}if(this.chkNoLowerValue.checked){if(_15aa.displayValue){this._removeErrorMessages();return true;}else{this.cboEndRangeValues.focus();dojo.addClass(this.hasParamValues?this.errorStartRange:this.errorStartCustomValue,"display-none");dojo.removeClass(this.hasParamValues?this.errorEndRange:this.errorEndCustomValue,"display-none");}return false;}if(!_15a9.displayValue||!_15aa.displayValue){this._setRangeErrorMessageVisibility(_15a9.displayValue,_15aa.displayValue);return false;}else{dojo.addClass(this.hasParamValues?this.errorStartRange:this.errorStartCustomValue,"display-none");dojo.addClass(this.hasParamValues?this.errorEndRange:this.errorEndCustomValue,"display-none");return true;}},validateBasedOnSubContainers:function(){if(this.isCurrency){if(this.customEndValueField._supportingWidgets[0]&&this.customEndValueField._supportingWidgets[0].state==="Error"){return this.customEndValueField._supportingWidgets[0].message;}if(this.customStartValueField._supportingWidgets[0]&&this.customStartValueField._supportingWidgets[0].state==="Error"){return this.customStartValueField._supportingWidgets[0].message;}}return "";},validateRangeWithinBoundaries:function(){if(!this.chkNoUpperValue.checked&&!this.chkNoLowerValue.checked){var _15ab=this._getValue(this._SafelyGetStartValue(),this.cboStartRangeValues.item);var _15ac=this._getValue(this._SafelyGetEndValue(),this.cboEndRangeValues.item);switch(this.parameterValueKind){case _15a6.SlxParameterValueKind.NumberParameter:if(parseInt(_15ab.value)>parseInt(_15ac.value)){dojo.removeClass(this.hasParamValues?this.errorEndRange:this.errorEndCustomValue,"display-none");return false;}break;case _15a6.SlxParameterValueKind.CurrencyParameter:if(parseFloat(_15ab.value)>parseFloat(_15ac.value)){dojo.removeClass(this.hasParamValues?this.errorEndRange:this.errorEndCustomValue,"display-none");return false;}break;default:if(_15ab.value.toUpperCase()>_15ac.value.toUpperCase()){dojo.removeClass(this.hasParamValues?this.errorEndRange:this.errorEndCustomValue,"display-none");return false;}break;}}return true;},getRangeValue:function(){var _15ad=this._getValue(dojo.attr(this.txtStartCustomValue,"value"),this.cboStartRangeValues.item);var _15ae=this._getValue(dojo.attr(this.txtEndCustomValue,"value"),this.cboEndRangeValues.item);var range=[];if(!this.chkNoLowerValue.get("checked")&&!this.chkNoUpperValue.get("checked")){range={startValue:_15ad.value,endValue:_15ae.value,displayValue:_15a2.substitute("[${0} .. ${1}]",[_15ad.displayValue,_15ae.displayValue])};}else{if(this.chkNoLowerValue.get("checked")){range={startValue:null,endValue:_15ae.value,displayValue:_15a2.substitute("( .. ${0}]",[_15ae.displayValue])};}else{range={startValue:_15ad.value,endValue:null,displayValue:_15a2.substitute("[${0} .. )",[_15ad.displayValue])};}}range.noLowerValue=this.chkNoLowerValue.checked;range.noUpperValue=this.chkNoUpperValue.checked;range.includeFromRange=this.chkIncludeFromRange.checked;range.includeToRange=this.chkIncludeToRange.checked;return range;},_SafelyGetStartValue:function(){var val="";if(!this.txtStartCustomValue){this.txtStartCustomValue=_15a1.getCustomParameterInputField(_15a2.substitute("startControl_${id}",{id:this.parameterPageId}),this.isCurrency,this.customStartValueField);}if(this.txtStartCustomValue&&this.txtStartCustomValue.value){val=dojo.attr(this.txtStartCustomValue,"value");}return val;},_SafelyGetEndValue:function(){var val="";if(!this.txtEndCustomValue){this.txtEndCustomValue=_15a1.getCustomParameterInputField(_15a2.substitute("endControl_${id}",{id:this.parameterPageId}),this.isCurrency,this.customEndValueField);}if(this.txtEndCustomValue&&this.txtEndCustomValue.value){val=dojo.attr(this.txtEndCustomValue,"value");}return val;},_initializeStartRangeValues:function(){this.isCurrency=(this.parameterValueKind===_15a6.SlxParameterValueKind.CurrencyParameter);this.isNumeric=(this.parameterValueKind===_15a6.SlxParameterValueKind.NumberParameter);_159f.setDomNodeVisible(this.rowStartEndCustomValue,this.allowCustomValues);this.hasParamValues=this.paramValues.length>0;var _15af=_15a2.substitute("startControl_${id}",{id:this.parameterPageId});this.customStartValueField=_15a1.createCustomParameterInputControl(_15af,this.startCustomValueContainer,this);this.txtStartCustomValue=_15a1.getCustomParameterInputField(_15af,this.isCurrency,this.customStartValueField);_15af=_15a2.substitute("endControl_${id}",{id:this.parameterPageId});this.customEndValueField=_15a1.createCustomParameterInputControl(_15af,this.endCustomValueContainer,this);this.txtEndCustomValue=_15a1.getCustomParameterInputField(_15af,this.isCurrency,this.customEndValueField);if(this.hasParamValues){_15a1.initializeComboBoxValues(this.paramValues,this.isAttachedToTransbox?"":_15a1.getRangeInitialValue(this.paramInitialValues,true),this.cboStartRangeValues);dojo.connect(this.cboStartRangeValues,"onBlur",this,"_startRangeValue_OnChange",true);if(this.isCurrency){dojo.connect(this.customStartValueField._supportingWidgets[0],"onChange",this,"_txtStartCustomValue_OnChange",true);}else{dojo.connect(this.customStartValueField.domNode,"onChange",this,"_txtStartCustomValue_OnChange",true);}_15a1.initializeComboBoxValues(this.paramValues,this.isAttachedToTransbox?"":_15a1.getRangeInitialValue(this.paramInitialValues,false),this.cboEndRangeValues);dojo.connect(this.cboEndRangeValues,"onBlur",this,"_endRangeValue_OnChange",true);if(this.isCurrency){dojo.connect(this.customEndValueField._supportingWidgets[0],"onChange",this,"_txtEndCustomValue_OnChange",true);}else{dojo.connect(this.customEndValueField.domNode,"onChange",this,"_txtEndCustomValue_OnChange",true);}}_159f.setDomNodeVisible(this.rowStartEndRangeValues,this.hasParamValues);_159f.setDomNodeVisible(this.rowStartEndRangeLabels,this.hasParamValues);_159f.setDomNodeVisible(this.rowStartEndOrValue,this.allowCustomValues&&this.hasParamValues);dojo.subscribe("entity/report/parameters/control/destroy",function(data){if(data){if(data.id.indexOf("Range")>-1){data._destroyObject();}else{if(data.parameterRangeWidget){data.parameterRangeWidget._destroyObject();}}}});this._assignDefaultRangeValues();},_assignDefaultRangeValues:function(){if(this.paramInitialValues.length===1){if(this.paramInitialValues[0].value){var _15b0=this.paramInitialValues[0];if(_15b0.value.lowerBoundType){this.chkIncludeFromRange.set("checked",(_15b0.value.lowerBoundType===_15a6.SlxRangeBoundType.BoundInclusive));this.chkNoLowerValue.set("checked",(_15b0.value.beginValue===null));this.chkIncludeToRange.set("checked",(_15b0.value.upperBoundType===_15a6.SlxRangeBoundType.BoundInclusive));this.chkNoUpperValue.set("checked",(_15b0.value.endValue===null));}}}},_onKeyPress:function(e){if(!_15a7.restrictToNumberOnKeyPress(e,"number")){dojo.stopEvent(e);}},_chkNoLowerValue_OnCheck:function(_15b1){this.chkIncludeFromRange.setAttribute("disabled",_15b1);this.cboStartRangeValues.setAttribute("disabled",_15b1);this.txtStartCustomValue.setAttribute("disabled",_15b1);this.chkNoUpperValue.setAttribute("disabled",_15b1);},_chkNoUpperValue_OnCheck:function(_15b2){this.chkIncludeToRange.setAttribute("disabled",_15b2);this.cboEndRangeValues.setAttribute("disabled",_15b2);this.txtEndCustomValue.setAttribute("disabled",_15b2);this.chkNoLowerValue.setAttribute("disabled",_15b2);},_startRangeValue_OnChange:function(){var item=this.cboStartRangeValues.item;if(item&&item.value!==""){dojo.attr(this.txtStartCustomValue,"value","");dojo.attr(this.customStartValueField,"displayedValue","");}},_txtStartCustomValue_OnChange:function(){if(dojo.attr(this.txtStartCustomValue,"value")!==""){this.cboStartRangeValues.set("displayedValue","");}},_endRangeValue_OnChange:function(){var item=this.cboEndRangeValues.item;if(item&&item.value!==""){dojo.attr(this.txtEndCustomValue,"value","");dojo.attr(this.customEndValueField,"displayedValue","");}},_txtEndCustomValue_OnChange:function(){if(dojo.attr(this.txtEndCustomValue,"value")!==""){this.cboEndRangeValues.set("displayedValue","");}},_getValue:function(_15b3,_15b4){var _15b5={displayValue:_15b3,value:_15b3};if(_15b3===""){if(_15b4&&_15b4.value!==""){_15b5={value:_15b4.value,displayValue:_15b4.description};}}return _15b5;},_getOriginalParameterValue:function(_15b6){var _15b7=null;_159a.some(this.defaultValues,function(entry,i){if(entry._id==_15b6){_15b7=dojo.clone(entry);return true;}});return _15b7;},_setRangeErrorMessageVisibility:function(_15b8,_15b9){if(!_15b8&&!_15b9){dojo.removeClass(this.hasParamValues?this.errorStartRange:this.errorStartCustomValue,"display-none");dojo.removeClass(this.hasParamValues?this.errorEndRange:this.errorEndCustomValue,"display-none");this.cboStartRangeValues.focus();}else{if(!_15b8){dojo.addClass(this.hasParamValues?this.errorEndRange:this.errorEndCustomValue,"display-none");dojo.removeClass(this.hasParamValues?this.errorStartRange:this.errorStartCustomValue,"display-none");this.cboStartRangeValues.focus();}else{dojo.addClass(this.hasParamValues?this.errorStartRange:this.errorStartCustomValue,"display-none");dojo.removeClass(this.hasParamValues?this.errorEndRange:this.errorEndCustomValue,"display-none");this.cboEndRangeValues.focus();}}},_removeErrorMessages:function(){dojo.addClass(this.errorStartRange,"display-none");dojo.addClass(this.errorEndRange,"display-none");dojo.addClass(this.errorStartCustomValue,"display-none");dojo.addClass(this.errorEndCustomValue,"display-none");},_destroyObject:function(){this.customEndValueField.destroyRecursive();this.customStartValueField.destroyRecursive();}});return _15a8;});},"Sage/MainView/ReportMgr/Crystal/MultiSelectParameterEditor":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/string","dojo/number","Sage/UI/Controls/Currency","Sage/UI/Controls/TextBox","Sage/MainView/ReportMgr/Crystal/ParameterHeaderWidget","dojo/text!./templates/MultiSelectParameterEditor.html","Sage/MainView/ReportMgr/Crystal/_ParameterEditorBase","Sage/MainView/ReportMgr/ReportManagerUtility","Sage/MainView/ReportMgr/Crystal/CrystalReportsUtility","dijit/form/MultiSelect","Sage/Utility","Sage/MainView/ReportMgr/Crystal/ParameterRangeWidget","Sage/Reporting/Enumerations"],function(_15ba,_15bb,_15bc,_15bd,_15be,_15bf,_15c0,_15c1,_15c2,_15c3,_15c4,_15c5,_15c6,_15c7,_15c8){var _15c9=_15c6.makeTemplateFromString(_15c1);var _15ca=_15ba("Sage.MainView.ReportMgr.Crystal.MultiSelectParameterEditor",[_15c2],{widgetTemplate:_15c9,parameterRangeWidget:null,isNumeric:false,isCurrency:false,txtCustomValue:null,customValueField:null,_setValueAttr:function(value){this._set("value",value);},_getValueAttr:function(){var self=this;this._promptParameter.currentValues=[];_15bb.forEach(this._selectedValues,function(_15cb,i){var _15cc=self._getParameterValue(_15cb);self._promptParameter.currentValues.push(_15cc);});return this._promptParameter;},constructor:function(_15cd){},startup:function(){if(this._started){return;}this.inherited(arguments);this.isNumeric=(this.parameterValueKind===_15c8.SlxParameterValueKind.NumberParameter);this.isCurrency=(this.parameterValueKind===_15c8.SlxParameterValueKind.CurrencyParameter);var _15ce=new _15c0({promptText:this._promptParameter.promptText,parameterFieldName:this._promptParameter.parameterFieldName}).placeAt(this.paramsHeaderContainer);if(!this._paramDiscreteType){_15c3.setDomNodeVisible(this.parameterRangeDiv,true);this.parameterRangeWidget=new _15c7({paramInitialIds:this._initialIds,paramInitialValues:this._initialValues,paramValues:this._values,defaultValues:this._promptParameter.defaultValues,parameterValueKind:this._promptParameter.parameterValueKind,allowCustomValues:this._allowCustomValues,parameterPageId:this.paramId,isAttachedToTransbox:this.mode!=="new"},"parameterRangeWidget");this.parameterRangeWidget.placeAt(this.parameterRangeWidgetContainer);}this.initializeTransferBoxWidget(this.transferBoxContainer,!this._paramRangeType);var _15cf=_15bc.substitute("customControl_${id}",{id:this.paramId});this.customValueField=_15c4.createCustomParameterInputControl(_15cf,this.customValueContainer,this);this.txtCustomValue=_15c4.getCustomParameterInputField(_15cf,this.isCurrency,this.customValueField);if(this.isCurrency){dojo.attr(this.customValueField,"style","width:97% !important;");}else{dojo.attr(this.customValueField,"style","width:95% !important;");}dojo.subscribe("entity/report/parameters/control/destroy",function(data){if(data){if(data.id.indexOf("Multi")>-1){data._destroyObject();}}});_15c3.setDomNodeVisible(this.divValidationMessage,false);_15c3.setDomNodeVisible(this.rowCustomValues,this._allowCustomValues&&!this._paramRangeType);this._initializeMessages();},isValid:function(){var valid=true;var msg="";if(!this._promptParameter.isOptionalPrompt&&!this._promptParameter.allowNullValue){this._selectedValues=this.transferBox.getSelectedValues();if(this._selectedValues.length>0){dojo.addClass(this.transferBox.errorValidation,"display-none");}else{dojo.removeClass(this.transferBox.errorValidation,"display-none");msg=this.txtPleaseSpecifyValue;valid=false;}}this._showValidationMessage(msg);return valid;},_onKeyPress:function(e){if(!_15c6.restrictToNumberOnKeyPress(e,"number")){dojo.stopEvent(e);}},_initializeMessages:function(){var _15d0=this.getMinMaxInitializationMessage();this.spanMinMaxMessage.innerHTML=_15c6.htmlEncode(_15d0);_15c3.setDomNodeVisible(this.divMinMaxMessage,(_15d0!==""));},_showValidationMessage:function(msg){this.spanValidationMessage.innerHTML=_15c6.htmlEncode(msg);_15c3.setDomNodeVisible(this.divValidationMessage,(msg!==""));},_getParameterValue:function(_15d1){var _15d2;if(_15d1.range){_15d2={className:_15c8.ParameterClassName.RangeValue,description:_15d1.displayValue,rangeValue:{beginValue:_15d1.range.startValue,beginValueType:this.beginValueType,endValue:_15d1.range.endValue,endValueType:this.endValueType,lowerBoundType:_15d1.range.noLowerValue?_15c8.SlxRangeBoundType.NoBound:_15d1.range.includeFromRange?_15c8.SlxRangeBoundType.BoundInclusive:_15c8.SlxRangeBoundType.BoundExclusive,upperBoundType:_15d1.range.noUpperValue?_15c8.SlxRangeBoundType.NoBound:_15d1.range.includeToRange?_15c8.SlxRangeBoundType.BoundInclusive:_15c8.SlxRangeBoundType.BoundExclusive}};}else{_15d2={className:_15c8.ParameterClassName.DiscreteValue,description:_15d1.displayValue,discreteValue:{actualValue:_15d1.value,actualValueType:this.actualValueType,value:_15d1.value,valueType:this.valueType}};}return _15d2;},_cmdAddRange_OnClick:function(){this.lblRangeValidationError.textContent=this.txtPleaseSpecifyValue;if(this.parameterRangeWidget.verifyRequiredAssignments()){if(this.parameterRangeWidget.validateRangeWithinBoundaries()){var msg=this.parameterRangeWidget.validateBasedOnSubContainers();if(msg.length>0){dojo.removeClass(this.lblRangeValidationError,"display-none");this.lblRangeValidationError.textContent=msg;}else{dojo.addClass(this.lblRangeValidationError,"display-none");var range=this.parameterRangeWidget.getRangeValue();if(this.isNumeric){range.startValue=range.startValue?_15bd.parse(range.startValue.replace(/\D/g,"")):null;range.endValue=range.endValue?_15bd.parse(range.endValue.replace(/\D/g,"")):null;}var _15d3={range:range,displayValue:range.displayValue,value:range.startValue?range.startValue:range.endValue};this._addToSelectedValues(_15d3);}}else{dojo.removeClass(this.lblRangeValidationError,"display-none");this.lblRangeValidationError.textContent=this.txtFromMustBeLessThanOrEqualToTo;}}else{dojo.removeClass(this.lblRangeValidationError,"display-none");}},_cmdAddCustom_OnClick:function(){var value=null;var _15d4=null;if(this.isCurrency){value=this.customValueField._supportingWidgets[0].value;_15d4=this.customValueField._supportingWidgets[0].displayedValue;}else{value=dojo.attr(this.txtCustomValue,"value");}if(value===""){dojo.removeClass(this.errorCustomDate,"display-none");this._showValidationMessage(this.txtPleaseSpecifyValue);this.txtCustomValue.focus();}else{this._showValidationMessage("");dojo.addClass(this.errorCustomDate,"display-none");var _15d5={value:value,displayValue:_15d4?_15d4:value};this._addToSelectedValues(_15d5);}},_addToSelectedValues:function(_15d6){if(_15d6){if(this.valueWithinMinMaxRange(_15d6.value)){var msg="";if(this.isCurrency){msg=this.customValueField._supportingWidgets[0].message;}if(msg.length===0){var item={id:_15d6.displayValue,value:_15d6.value,displayValue:_15d6.displayValue,range:_15d6.range,__selected:true,destroyOnRemove:false};this.transferBox.addNewItem(item,true);this._showValidationMessage("");}else{this._showValidationMessage(msg);}}else{this._showValidationMessage(this.getMinMaxValidationMessage(_15d6.value));}}else{this._showValidationMessage(this.txtPleaseSpecifyValue);}},_destroyObject:function(){if(this.customValueField){this.customValueField.destroyRecursive();}if(this.parameterRangeWidget){dojo.publish("entity/report/parameters/control/destroy",[this.parameterRangeWidget,this]);}}});return _15ca;});},"Sage/MainView/ReportMgr/Crystal/CrystalReportConditionsDialog":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/topic","dojo/store/Memory","dojo/data/ObjectStore","dojo/data/ItemFileWriteStore","dojo/text!./templates/CrystalReportConditionsDialog.html","dojo/i18n!./nls/CrystalReportConditionsDialog","Sage/Reporting/Enumerations","Sage/MainView/ReportMgr/ReportManagerUtility","Sage/MainView/ReportMgr/Crystal/CrystalReportsUtility","Sage/MainView/ReportMgr/Crystal/CrystalReportConditionEditor","Sage/MainView/ReportMgr/Common/_WizardDialogBase","Sage/MainView/ReportMgr/Crystal/CrystalReportsFormatter","dijit/Dialog","dijit/form/Form","Sage/Utility"],function(_15d7,_15d8,topic,_15d9,_15da,_15db,_15dc,_15dd,_15de,_15df,_15e0,_15e1,_15e2,_15e3,_15e4,Form,_15e5){var _15e6=_15e5.makeTemplateFromString(_15dc);var _15e7=_15d7("Sage.MainView.ReportMgr.Crystal.CrystalReportConditionsDialog",[_15e2],{id:"dlgCrystalReportConditions",widgetTemplate:_15e6,_nlsResources:_15dd,_helpIconTopic:"RptscheduleWiz",_subscriptions:null,_reportFilters:null,_conditionOptions:null,_conditionsCollection:null,_currentStep:_15de.CrystalReportWizardStep.Conditions,constructor:function(_15e8){this._subscriptions=[];this._conditionsCollection=[];this._initializeWizardOptions(_15e8);this._conditionOptions=_15e8.conditionOptions;if(!this._conditionOptions.conditionsConnector){this._conditionOptions.conditionsConnector=_15de.ReportConditionConnector.And;}var self=this;if(this._conditionOptions.conditions){_15d8.forEach(this._conditionOptions.conditions,function(_15e9,i){self._addNewCondition(_15e9);});}this._reportFilters=dojo.clone(this._reportMetadata.reportFilters);this._subscriptions.push(topic.subscribe("/reportManager/reportWizard/createCondition",function(_15ea){self._addNewCondition(_15ea);}));this._subscriptions.push(topic.subscribe("/reportManager/reportWizard/updateCondition",function(_15eb){self._updateCondition(_15eb);}));},destroy:function(){this.grdCrystalConditions.destroy();_15d8.forEach(this._subscriptions,function(_15ec,i){_15ec.remove();});this._dialog.destroyRecursive();this.inherited(arguments);},startup:function(){this.inherited(arguments);this._initializeConditionsGrid();this._initializeConditionPresets();if(this._conditionOptions.conditions.length>0){this.cmbConditionPresets.attr("value",_15de.ConditionPreset.Custom);}if(this._conditionOptions.conditionsConnector){this.cmbConnector.attr("value",this._conditionOptions.conditionsConnector);}},_btnAddCondition_Click:function(){var _15ed=new _15e1(null,this._reportMetadata);_15ed.show();},_cmbConditionPresets_OnChange:function(value){var _15ee=this._getSelectedPreset();this._setConditionsVisibility(_15ee);this._showPreset(_15ee);},_addNewCondition:function(_15ef){_15ef._id=this._getConditionId();this._conditionsCollection.push(_15ef);this._refreshConditionsGrid();},_updateCondition:function(_15f0){var self=this;_15d8.some(this._conditionsCollection,function(entry,i){if(entry._id===_15f0._id){self._conditionsCollection[i]=_15f0;return true;}});this._refreshConditionsGrid();},_initializeConditionPresets:function(){var items=[{value:_15de.ConditionPreset.AllRecords,caption:_15dd.txtAllRecords,tag:_15de.ConditionPreset.AllRecords},{value:_15de.ConditionPreset.Custom,caption:_15dd.txtSpecificConditions,tag:_15de.ConditionPreset.Custom}];var _15f1=null;var _15f2=_15e0.getCurrentUserCondition();if(_15f2&&this._reportMetadata.useUserFilter){_15f1={name:_15dd.txtCurrentUser,id:_15de.ConditionPreset.CurrentUser,filterConditions:[_15f2]};this._reportFilters.unshift(_15f1);}_15f2=_15e0.getCurrentEntityCondition();if(_15f2){var _15f3=_15df.getCurrentEntityContext();_15f1={name:"["+_15f3.Description+"]",id:_15de.ConditionPreset.CurrentEntity,filterConditions:[_15f2]};this._reportFilters.unshift(_15f1);}_15d8.forEach(this._reportFilters,function(_15f4,i){items.push({value:_15f4.id,caption:_15f4.name,tag:_15de.ConditionPreset.Preset});});var data={identifier:"value",label:"caption",items:items};var store=new _15db({data:data});this.cmbConditionPresets.setStore(store);this.cmbConditionPresets.startup();},_initializeConditionsGrid:function(){var data={identifier:"_id",items:this._conditionsCollection};var store=new _15da({objectStore:new _15d9({data:data})});this.grdCrystalConditions.setStore(store);},_getDialogTitle:function(){return this._nlsResources.txtDialogTitle+" ["+this._reportMetadata.displayName+"]";},_getWizardStepResult:function(){this._conditionOptions.conditions=this._getConditions();this._conditionOptions.conditionsConnector=this.cmbConnector.value;return this._conditionOptions;},_setConditionsVisibility:function(_15f5){_15df.setDomNodeVisible(this.trConnector,false);_15df.setDomNodeVisible(this.tbConditions.domNode,false);_15df.setDomNodeVisible(this.grdCrystalConditions.domNode,false);switch(_15f5.tag){case _15de.ConditionPreset.Preset:case _15de.ConditionPreset.Custom:_15df.setDomNodeVisible(this.trConnector,true);_15df.setDomNodeVisible(this.tbConditions.domNode,true);_15df.setDomNodeVisible(this.grdCrystalConditions.domNode,true);this.grdCrystalConditions.resize();break;}},_getSelectedPreset:function(){var item=this.cmbConditionPresets.store._getItemByIdentity(this.cmbConditionPresets.value);var _15f6={value:item?this.cmbConditionPresets.store.getValue(item,"value"):null,tag:item?this.cmbConditionPresets.store.getValue(item,"tag"):null};return _15f6;},_showPreset:function(_15f7){switch(_15f7.tag){case _15de.ConditionPreset.Preset:var self=this;_15d8.some(this._reportFilters,function(_15f8,i){if(_15f8.id===_15f7.value){self._conditionsCollection=[];_15d8.forEach(_15f8.filterConditions,function(_15f9,i){self._addNewCondition(_15f9);});if(_15f8.conditionsConnector){self._conditionOptions.conditionsConnector=_15f8.conditionsConnector;self.cmbConnector.attr("value",self._conditionOptions.conditionsConnector);}return true;}});break;case _15de.ConditionPreset.CurrentRecord:break;case _15de.ConditionPreset.CurrentGroup:break;case _15de.ConditionPreset.Custom:break;default:break;}},_getConditions:function(){var _15fa=this._getSelectedPreset();var _15fb=[];switch(_15fa.tag){case _15de.ConditionPreset.Custom:case _15de.ConditionPreset.Preset:for(var i=0;i<this._conditionsCollection.length;i++){var _15fc=dojo.clone(this._conditionsCollection[i]);delete _15fc._id;_15fb.push(_15fc);}break;}return _15fb;},_getConditionId:function(){var maxId=0;for(var i=0;i<this._conditionsCollection.length;i++){if(maxId<this._conditionsCollection[i]._id){maxId=this._conditionsCollection[i]._id;}}return maxId+1;},_refreshConditionsGrid:function(){if(this.grdCrystalConditions){this.grdCrystalConditions.store.close();this._initializeConditionsGrid();}},_editCondition:function(_15fd){var _15fe=this.grdCrystalConditions.getItem(_15fd);var _15ff=new _15e1(_15fe,this._reportMetadata);_15ff.show();},_deleteCondition:function(id){var index=-1;_15d8.some(this._conditionsCollection,function(_1600,i){if(_1600._id===id){index=i;return true;}});if(index!==-1){this._conditionsCollection.splice(index,1);}this._refreshConditionsGrid();}});return _15e7;});},"Sage/MainView/ReportMgr/Crystal/CrystalReportConditionEditor":function(){define(["dojo/_base/declare","dojo/string","dojo/_base/array","dojo/topic","dojo/i18n!./nls/CrystalReportConditionEditor","dojo/text!./templates/CrystalReportConditionEditor.html","dijit/_Widget","Sage/_Templated","dojo/_base/lang","Sage/UI/Controls/_DialogHelpIconMixin","Sage/UI/Controls/Lookup","Sage/UI/Dialogs","Sage/Data/SDataServiceRegistry","dojo/data/ItemFileWriteStore","Sage/Reporting/Enumerations","Sage/MainView/ReportMgr/ReportManagerUtility","Sage/MainView/ReportMgr/Crystal/CrystalReportsUtility","dijit/form/Select","dijit/form/CheckBox"],function(_1601,_1602,_1603,topic,_1604,_1605,_1606,_1607,_1608,_1609,_160a,_160b,_160c,_160d,_160e,_160f,_1610){var _1611=_1601("Sage.MainView.ReportMgr.CrystalReportConditionEditor",[_1606,_1607],{id:"dlgCrystalReportConditionEditor",_dialog:false,_reportMetadata:null,widgetTemplate:new Simplate(eval(_1605)),_nlsResources:_1604,widgetsInTemplate:true,_entity:null,_mode:"new",constructor:function(_1612,_1613){this._entity=_1612;this._reportMetadata=_1613;if(_1612){this._mode="edit";}},show:function(){this._dialog.show();if(!this._dialog.helpIcon){_1608.mixin(this._dialog,new _1609());this._dialog.createHelpIconByTopic("reportconditions");}},destroy:function(){this.lkpUser.destroy();this.lkpGroup.destroy();this.inherited(arguments);},_dialog_OnShow:function(){this._initializeControls();},_closeDialog:function(){var self=this;self._dialog.hide();self.destroyRecursive();},_cmdOK_OnClick:function(){if(this._isValid()){this._save();}},_cmdCancel_OnClick:function(){this._closeDialog();},_dialog_OnCancel:function(){this._closeDialog();},_cmbConditionType_OnChange:function(){this._setControlsVisibility();},_cmbDateRange_OnChange:function(){this._setDateRangeControlsVisibility();},_cmbTables_OnChange:function(){this._initializeFieldsDropdown();},_cmbFields_OnChange:function(){this._initializeOperatorsDropdown();},_cmbOperators_OnChange:function(){this._setQueryControlsVisibility();},_chkCurrentUser_OnChange:function(){if(this.chkCurrentUser.checked){this.lkpUser.set("selectedObject",null);}_160f.setDomNodeVisible(this.trUser,!this.chkCurrentUser.checked);},_isValid:function(){switch(this.cmbConditionType.value){case String(_160e.ReportConditionType.Group):if(!this.lkpGroup.get("selectedObject")){_160b.showError(_1602.substitute(this._nlsResources.txtInvalidParameterMessage,[this._nlsResources.cmbGroup_Caption]),this._nlsResources.txtInvalidParameterTitle);return false;}break;case String(_160e.ReportConditionType.DateRange):if(this.cmbDateRange.value==="DateRange"){if(this.dtFromDate.focusNode.value===""){_160b.showError(_1602.substitute(this._nlsResources.txtInvalidParameterMessage,[this._nlsResources.dtFromDate_Caption]),this._nlsResources.txtInvalidParameterTitle);return false;}if(this.dtToDate.focusNode.value===""){_160b.showError(_1602.substitute(this._nlsResources.txtInvalidParameterMessage,[this._nlsResources.dtToDate_Caption]),this._nlsResources.txtInvalidParameterTitle);return false;}}break;case String(_160e.ReportConditionType.User):if(!this.chkCurrentUser.checked&&!this.lkpUser.get("selectedObject")){_160b.showError(_1602.substitute(this._nlsResources.txtInvalidParameterMessage,[this._nlsResources.lkpUser_Caption]),this._nlsResources.txtInvalidParameterTitle);}break;case String(_160e.ReportConditionType.Query):if(!this.cmbTables.value||this.cmbTables.value===""){_160b.showError(_1602.substitute(this._nlsResources.txtInvalidParameterMessage,[this._nlsResources.cmbTable_Caption]),this._nlsResources.txtInvalidParameterTitle);return false;}if(!this.cmbFields.value||this.cmbFields.value===""){_160b.showError(_1602.substitute(this._nlsResources.txtInvalidParameterMessage,[this._nlsResources.cmbField_Caption]),this._nlsResources.txtInvalidParameterTitle);return false;}if(!this.cmbOperators.value||this.cmbOperators.value===""){_160b.showError(_1602.substitute(this._nlsResources.txtInvalidParameterMessage,[this._nlsResources.cmbOperator_Caption]),this._nlsResources.txtInvalidParameterTitle);return false;}var _1614=this.cmbOperators.value;var _1615=this._getFieldDataType();switch(_1615){case _160e.FieldDataTypes.Numeric:if(_1614==_160e.ReportConditionOperator.IsInTheRange){if(!this.txtNumericValue1.focusNode.textbox.value||this.txtNumericValue1.focusNode.textbox.value===""){_160b.showError(_1602.substitute(this._nlsResources.txtInvalidParameterMessage,[this._nlsResources.txtNumericValueFrom_Caption]),this._nlsResources.txtInvalidParameterTitle);return false;}if(!this.txtNumericValue2.focusNode.textbox.value||this.txtNumericValue2.focusNode.textbox.value===""){_160b.showError(_1602.substitute(this._nlsResources.txtInvalidParameterMessage,[this._nlsResources.txtNumericValueTo_Caption]),this._nlsResources.txtInvalidParameterTitle);return false;}}else{if(!this.txtNumericValue1.focusNode.textbox.value||this.txtNumericValue1.focusNode.textbox.value===""){_160b.showError(_1602.substitute(this._nlsResources.txtInvalidParameterMessage,[this._nlsResources.txtValue_Caption]),this._nlsResources.txtInvalidParameterTitle);return false;}}break;case _160e.FieldDataTypes.DateTime:if(_1614==_160e.ReportConditionOperator.IsInTheRange){if(this.dtDateValue1.focusNode.value===""){_160b.showError(_1602.substitute(this._nlsResources.txtInvalidParameterMessage,[this._nlsResources.dtFromDate_Caption]),this._nlsResources.txtInvalidParameterTitle);return false;}if(this.dtDateValue2.focusNode.value===""){_160b.showError(_1602.substitute(this._nlsResources.txtInvalidParameterMessage,[this._nlsResources.dtToDate_Caption]),this._nlsResources.txtInvalidParameterTitle);return false;}}else{if(this.dtDateValue1.focusNode.value===""){_160b.showError(_1602.substitute(this._nlsResources.txtInvalidParameterMessage,[this._nlsResources.dtFromDate_Caption]),this._nlsResources.txtInvalidParameterTitle);return false;}}break;case _160e.FieldDataTypes.String:if(!this.txtStringValue1.value||this.txtStringValue1.value===""){_160b.showError(_1602.substitute(this._nlsResources.txtInvalidParameterMessage,[this._nlsResources.txtValue_Caption]),this._nlsResources.txtInvalidParameterTitle);return false;}break;default:console.error("Unsupported field type: "+_1615);}break;}return true;},_setControlsVisibility:function(){_160f.setDomNodeVisible(this.trUser,false);_160f.setDomNodeVisible(this.trCurrentUser,false);_160f.setDomNodeVisible(this.trGroup,false);_160f.setDomNodeVisible(this.trDateRange,false);_160f.setDomNodeVisible(this.trFromDate,false);_160f.setDomNodeVisible(this.trToDate,false);_160f.setDomNodeVisible(this.trTable,false);_160f.setDomNodeVisible(this.trField,false);_160f.setDomNodeVisible(this.trOperator,false);_160f.setDomNodeVisible(this.trValue,false);if(this.cmbConditionType){switch(this.cmbConditionType.value){case _160e.ReportConditionType.Group:_160f.setDomNodeVisible(this.trGroup,true);break;case _160e.ReportConditionType.DateRange:_160f.setDomNodeVisible(this.trDateRange,true);_160f.setDomNodeVisible(this.trFromDate,true);_160f.setDomNodeVisible(this.trToDate,true);break;case _160e.ReportConditionType.User:_160f.setDomNodeVisible(this.trUser,true);_160f.setDomNodeVisible(this.trCurrentUser,true);break;case _160e.ReportConditionType.Query:_160f.setDomNodeVisible(this.trTable,true);_160f.setDomNodeVisible(this.trField,true);_160f.setDomNodeVisible(this.trOperator,true);_160f.setDomNodeVisible(this.trValue,true);break;}}this._setQueryControlsVisibility();},_setDateRangeControlsVisibility:function(){if(this.cmbDateRange){switch(this.cmbDateRange.value){case "DateRange":_160f.setDomNodeVisible(this.trFromDate,true);_160f.setDomNodeVisible(this.trToDate,true);break;default:_160f.setDomNodeVisible(this.trFromDate,false);_160f.setDomNodeVisible(this.trToDate,false);break;}}},_initializeControls:function(){this._initializeConditionTypeDropdown();this._createUserLookup();this._createGroupLookup();this._setControlsVisibility();this._initializeTablesDropdown();this._setValues();},_setValues:function(){if(this._entity){this.cmbConditionType.attr("value",this._entity.conditionType);switch(this.cmbConditionType.value){case _160e.ReportConditionType.Group:var group=this._entity.value?_160f.getGroup(this._entity.value):null;this.lkpGroup.set("selectedObject",group);break;case _160e.ReportConditionType.DateRange:this.cmbDateRange.attr("value",this._entity.value);if(this.cmbDateRange.value==="DateRange"){this.dtFromDate.set("value",this._entity.fromRange);this.dtToDate.set("value",this._entity.toRange);}break;case _160e.ReportConditionType.User:if(this._entity.tag.toUpperCase()===":USERID"){this.chkCurrentUser.set("checked",true);}else{var user=this._entity.value?_160f.getUser(this._entity.tag):null;this.lkpUser.set("selectedObject",user);}break;case _160e.ReportConditionType.Query:this.cmbTables.attr("value",this._entity.table);var _1616=this._entity.operator;switch(this._entity.dataType){case _160e.FieldDataTypes.Numeric:if(_1616==_160e.ReportConditionOperator.IsInTheRange){this.txtNumericValue1.focusNode.textbox.value=this._entity.fromRange;this.txtNumericValue2.focusNode.textbox.value=this._entity.toRange;}else{this.txtNumericValue1.focusNode.textbox.value=this._entity.value;}break;case _160e.FieldDataTypes.DateTime:if(_1616==_160e.ReportConditionOperator.IsInTheRange){this.dtDateValue1.set("value",this._entity.fromRange);this.dtDateValue2.set("value",this._entity.toRange);}else{this.dtDateValue1.set("value",this._entity.value);}break;case _160e.FieldDataTypes.String:this.txtStringValue1.set("value",this._entity.value);break;default:console.error("Unsupported field type: "+this._entity.dataType);}break;default:console.error("Unsupported condition type: "+this.cmbConditionType.value);}}},_initializeConditionTypeDropdown:function(){var _1617=_1610.getConditionTypes(this._reportMetadata);var data={identifier:"conditionType",label:"caption",items:_1617};var store=new _160d({data:data});this.cmbConditionType.setStore(store);this.cmbConditionType.startup();},_createUserLookup:function(){var _1618={id:"_lkpConditionUser",structure:[{cells:[{name:_1604.txtName,field:"UserInfo.UserName",sortable:true,width:"400px",editable:false,propertyType:"System.String",excludeFromFilters:false,defaultValue:""}]}],gridOptions:{contextualCondition:function(){return "Type ne 5 and Type ne 8 and Type ne 6";},contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"users",include:["UserInfo"],sort:[{attribute:"UserInfo.UserName"}]},isModal:true,preFilters:[],returnPrimaryKey:true,dialogTitle:_1604.txtSelectUser,dialogButtonText:_1604.txtOK};this.lkpUser=new _160a({id:"lkpConditionUser",readonly:false,config:_1618});dojo.place(this.lkpUser.domNode,this.contentPaneLkpUser.domNode,"only");},_createGroupLookup:function(){var _1619=_1602.substitute("upper(family) eq '${0}' or upper(family) eq '${1}'",[this._reportMetadata.family.toUpperCase(),this._reportMetadata.mainTable.toUpperCase()]);var _161a={id:"_lkpConditionGroup",structure:[{cells:[{name:_1604.txtName,field:"displayName",sortable:true,width:"400px",editable:false,propertyType:"System.String",excludeFromFilters:false,defaultValue:""}]}],gridOptions:{contextualCondition:function(){return _1619;},contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"groups",include:[],select:["displayName","name","family"],sort:[{attribute:"displayName",descending:false}],service:_160c.getSDataService("system",false,true,false)},isModal:true,preFilters:[],returnPrimaryKey:true,dialogTitle:_1604.txtSelectGroup,dialogButtonText:_1604.txtOK};this.lkpGroup=new _160a({id:"lkpConditionGroup",readonly:false,config:_161a});dojo.place(this.lkpGroup.domNode,this.contentPaneLkpGroup.domNode,"only");},_getTableMetadata:function(_161b){var _161c=null;if(this._reportMetadata.tables){_1603.some(this._reportMetadata.tables,function(entry,i){if(entry.alias===_161b){_161c=entry;return true;}});}return _161c;},_getFieldMetadata:function(_161d,_161e){var _161f=this._getTableMetadata(_161d);var _1620=null;if(_161f){if(_161f.fields){_1603.some(_161f.fields,function(entry,i){if(entry.name==_161e){_1620=entry;return true;}});}}return _1620;},_getFieldDataType:function(){var _1621=this.cmbTables.value;var _1622=this.cmbFields.value;var _1623=this._getFieldMetadata(_1621,_1622);var _1624=_1623&&_1623.dataType?_1623.dataType:null;return _1624;},_initializeTablesDropdown:function(){var items=[];if(this._reportMetadata.tables){_1603.forEach(this._reportMetadata.tables,function(entry,i){items.push({alias:entry.alias,displayName:entry.displayName});});}var data={identifier:"alias",label:"displayName",items:items};var store=new _160d({data:data});this.cmbTables.setStore(store);this.cmbTables.startup();},_initializeFieldsDropdown:function(){var _1625=this.cmbTables.value;var _1626=this._getTableMetadata(_1625);var _1627=_1626&&_1626.fields?_1626.fields:[];var items=[];_1603.forEach(_1627,function(entry,i){items.push({name:entry.name,displayName:entry.displayName});});var data={identifier:"name",label:"displayName",items:items};var store=new _160d({data:data});this.cmbFields.setStore(store);this.cmbFields.startup();if(this._entity){this.cmbFields.attr("value",this._entity.field);}},_initializeOperatorsDropdown:function(){var _1628=this._getFieldDataType();var _1629=_160f.getOperators(_1628);var data={identifier:"operator",label:"caption",items:_1629};var store=new _160d({data:data});this.cmbOperators.setStore(store);this.cmbOperators.startup();if(this._entity){this.cmbOperators.attr("value",this._entity.operator);}},_save:function(){if(!this._entity){this._entity={conditionType:this.cmbConditionType.value,tableName:null,fieldName:null,operator:null,value:null,fromValue:null,toValue:null,dataType:null,tag:null};}this._entity.conditionType=this.cmbConditionType.value;this._entity.table=null;this._entity.field=null;this._entity.operator=null;this._entity.value=null;this._entity.fromRange=null;this._entity.toRange=null;this._entity.dataType=null;this._entity.tag=null;switch(this.cmbConditionType.value){case _160e.ReportConditionType.Group:var group=this.lkpGroup.get("selectedObject");this._entity.value=group.family+":"+group.name;this._entity.tag=group.$key;this._entity.operator=String(_160e.ReportConditionOperator.Is);this._entity.dataType=_160e.FieldDataTypes.String;break;case _160e.ReportConditionType.DateRange:this._entity.dataType=_160e.FieldDataTypes.DateTime;if(this.cmbDateRange.value==="DateRange"){this._entity.operator=String(_160e.ReportConditionOperator.IsInTheRange);this._entity.value=null;this._entity.fromRange=this.dtFromDate.get("value");this._entity.toRange=this.dtToDate.get("value");}else{this._entity.operator=String(_160e.ReportConditionOperator.Is);this._entity.value=this.cmbDateRange.value;}break;case _160e.ReportConditionType.User:if(this.chkCurrentUser.checked){this._entity.value=_1604.chkCurrentUser_Caption;this._entity.tag=":UserID";}else{var user=this.lkpUser.get("selectedObject");this._entity.value=user.$descriptor;this._entity.tag=user.$key;}this._entity.operator=String(_160e.ReportConditionOperator.Is);this._entity.dataType=_160e.FieldDataTypes.String;break;case _160e.ReportConditionType.Query:var _162a=this.cmbOperators.value;this._entity.table=this.cmbTables.value;this._entity.field=this.cmbFields.value;this._entity.operator=_162a;var _162b=this._getFieldDataType();this._entity.dataType=_162b;switch(_162b){case _160e.FieldDataTypes.Numeric:if(_162a==_160e.ReportConditionOperator.IsInTheRange){this._entity.fromRange=parseInt(this.txtNumericValue1.focusNode.textbox.value);this._entity.toRange=parseInt(this.txtNumericValue2.focusNode.textbox.value);}else{this._entity.value=parseInt(this.txtNumericValue1.focusNode.textbox.value);}break;case _160e.FieldDataTypes.DateTime:if(_162a==_160e.ReportConditionOperator.IsInTheRange){this._entity.fromRange=this.dtDateValue1.get("value");this._entity.toRange=this.dtDateValue2.get("value");}else{this._entity.value=this.dtDateValue1.get("value");}break;case _160e.FieldDataTypes.String:this._entity.value=this.txtStringValue1.get("value");break;default:console.error("Unsupported field type: "+_162b);}break;default:console.error("Unsupported condition type: "+this.cmbConditionType.value);}if(this._mode==="new"){topic.publish("/reportManager/reportWizard/createCondition",this._entity);}else{topic.publish("/reportManager/reportWizard/updateCondition",this._entity);}this._closeDialog();},_setQueryControlsVisibility:function(){_160f.setDomNodeVisible(this.trStringValue1,false);_160f.setDomNodeVisible(this.trStringValue2,false);_160f.setDomNodeVisible(this.trNumericValue1,false);_160f.setDomNodeVisible(this.trNumericValue2,false);_160f.setDomNodeVisible(this.trDateValue1,false);_160f.setDomNodeVisible(this.trDateValue2,false);if(this.cmbConditionType.value!==_160e.ReportConditionType.Query){return;}var _162c=this._getFieldDataType();var _162d=this.cmbOperators.value;switch(_162c){case _160e.FieldDataTypes.Numeric:this.lblNumericValue1.innerHTML=this._nlsResources.txtValue_Caption+":";_160f.setDomNodeVisible(this.trNumericValue1,true);if(_162d==_160e.ReportConditionOperator.IsInTheRange){this.lblNumericValue1.innerHTML=this._nlsResources.txtNumericValueFrom_Caption+":";_160f.setDomNodeVisible(this.trNumericValue2,true);}break;case _160e.FieldDataTypes.DateTime:_160f.setDomNodeVisible(this.trDateValue1,true);if(_162d==_160e.ReportConditionOperator.IsInTheRange){_160f.setDomNodeVisible(this.trDateValue2,true);}break;case _160e.FieldDataTypes.String:_160f.setDomNodeVisible(this.trStringValue1,true);break;default:this._initializeFieldsDropdown();this._initializeOperatorsDropdown();_160f.setDomNodeVisible(this.trStringValue1,true);}}});return _1611;});},"Sage/MainView/ReportMgr/Crystal/CrystalReportsFormatter":function(){define(["dojo/_base/declare","dojo/i18n!./nls/CrystalReportsFormatter","Sage/Reporting/Enumerations","Sage/MainView/ReportMgr/ReportManagerUtility","dojo/date/locale","dojo/string"],function(_162e,_162f,_1630,_1631,_1632,_1633){Sage.namespace("Sage.MainView.ReportMgr.Crystal.CrystalReportsFormatter");dojo.mixin(Sage.MainView.ReportMgr.Crystal.CrystalReportsFormatter,{formatConditionType:function(value){return _1630.getReportConditionTypeCaption(value);},formatOperator:function(value){return _1630.getReportConditionOperatorCaption(value);},formatEditCondition:function(value,_1634,cell){return "<a href=javascript:dijit.byId('dlgCrystalReportConditions')._editCondition("+_1634+")>"+_162f.txtEdit+"</a>";},formatDeleteCondition:function(item){return "<a href=javascript:dijit.byId('dlgCrystalReportConditions')._deleteCondition("+item._id+")>"+_162f.txtDelete+"</a>";},formatConditionValue:function(item){var _1635=null;var _1636=null;var _1637=null;switch(String(item.conditionType)){case String(_1630.ReportConditionType.Group):var group=_1631.getGroup(item.tag);var _1638=group?group.$descriptor:"";return _1638;case String(_1630.ReportConditionType.DateRange):if(item.operator===_1630.ReportConditionOperator.IsInTheRange){_1636=_1632.format(item.fromRange,{selector:"datetime",fullYear:true});_1637=_1632.format(item.toRange,{selector:"datetime",fullYear:true});_1635=_1633.substitute(_162f.txtRangeValue,[_1636,_1637]);return _1635;}else{return item.value;}break;case String(_1630.ReportConditionType.User):return item.value;case String(_1630.ReportConditionType.Query):var _1639=item.operator;switch(item.dataType){case _1630.FieldDataTypes.Numeric:if(_1639==_1630.ReportConditionOperator.IsInTheRange){_1635=_1633.substitute(_162f.txtRangeValue,[item.fromRange,item.toRange]);return _1635;}else{return item.value;}break;case _1630.FieldDataTypes.DateTime:if(_1639==_1630.ReportConditionOperator.IsInTheRange){_1636=_1632.format(item.fromRange,{selector:"datetime",fullYear:true});_1637=_1632.format(item.toRange,{selector:"datetime",fullYear:true});_1635=_1633.substitute(_162f.txtRangeValue,[_1636,_1637]);return _1635;}else{var _163a=_1632.format(item.value,{selector:"datetime",fullYear:true});return _163a;}break;case _1630.FieldDataTypes.String:return item.value;default:console.error("Unsupported field type: "+item.dataType);}break;default:console.error("Unsupported condition type: "+item.conditionType);}}});return Sage.MainView.ReportMgr.Crystal.CrystalReportsFormatter;});},"Sage/MainView/ReportMgr/Common/ExportOptionsDialog":function(){define(["dojo/_base/declare","dojo/_base/array","Sage/Reporting/Enumerations","dojo/text!./templates/ExportOptionsDialog.html","dojo/i18n!./nls/ExportOptionsDialog","Sage/UI/Controls/Lookup","Sage/MainView/ReportMgr/ReportManagerUtility","dojo/data/ItemFileWriteStore","Sage/MainView/ReportMgr/Common/_WizardDialogBase","Sage/Utility","Sage/UI/JobSchedulingWidget","dijit/Dialog","dijit/form/Form"],function(_163b,_163c,_163d,_163e,_163f,_1640,_1641,_1642,_1643,_1644,_1645){var _1646=_1644.makeTemplateFromString(_163e);var _1647=_163b("Sage.MainView.ReportMgr.Common.ExportOptionsDialog",[_1643],{id:"dlgExportOptions",_nlsResources:_163f,_helpIconTopic:"RptscheduleWiz",_currentStep:_163d.CrystalReportWizardStep.ExportOptions,_scheduleOptions:null,_exportOptions:null,widgetTemplate:_1646,constructor:function(_1648){this._initializeWizardOptions(_1648);this._scheduleOptions=_1648.scheduleOptions;this._exportOptions=_1648.exportOptions;},destroy:function(){this.lkpRunAsUserId.destroyRecursive();this.cmbOutputFormat.destroyRecursive();if(this.jobSchedulingWidget){this.jobSchedulingWidget.destroyRecursive();}this._dialog.destroyRecursive();this.inherited(arguments);},show:function(){this.jobSchedulingWidget.initialize({trigger:this._scheduleOptions.trigger});this.inherited(arguments);},startup:function(){this.inherited(arguments);this._createRunAsLookup();this._setControlsVisibility();this._initializeOutputFormatDropdown();this._initializeTextboxes();},isValid:function(){var valid=true;if(this._scheduleOptions.executionType===_163d.ExecutionType.Scheduled){valid=this.jobSchedulingWidget.validateSchedule();}return valid;},_initializeTextboxes:function(){var _1649=this._scheduleOptions.trigger?this._scheduleOptions.trigger.$descriptor:this.reportMetadata.displayName;this.txtScheduleDescription.set("value",_1649);},_initializeOutputFormatDropdown:function(){var _164a=_1641.getOutputFormats(this.reportMetadata.reportType);var data={identifier:"outputFormat",label:"caption",items:_164a};var store=new _1642({data:data});this.cmbOutputFormat.setStore(store);this.cmbOutputFormat.startup();if(this._exportOptions.outputFormat){this.cmbOutputFormat.attr("value",this._exportOptions.outputFormat);}},_createRunAsLookup:function(){var _164b={id:"_lkpRunAsUserId",structure:[{cells:[{name:_163f.txtName,field:"UserInfo.UserName",sortable:true,width:"400px",editable:false,propertyType:"System.String",excludeFromFilters:false,defaultValue:""}]}],gridOptions:{contextualCondition:function(){return "Type ne 5 and Type ne 8 and Type ne 6";},contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"users",include:["UserInfo"],sort:[{attribute:"UserInfo.UserName"}]},isModal:true,preFilters:[],returnPrimaryKey:true,dialogTitle:_163f.txtSelectUser,dialogButtonText:_163f.txtOK};this.lkpRunAsUserId=new _1640({id:"lkpRunAsUserId",readonly:false,config:_164b});dojo.place(this.lkpRunAsUserId.domNode,this.container_lkpRunAsUserId.domNode,"only");if(this._exportOptions.runAsUserId){var user=_1641.getUser(this._exportOptions.runAsUserId);this.lkpRunAsUserId.set("selectedObject",user);}},_getWizardStepResult:function(){var _164c={exportOptions:this._getExportOptions(),scheduleOptions:this._getScheduleOptions()};return _164c;},_getExportOptions:function(){this._exportOptions.description=this.txtScheduleDescription.get("value");this._exportOptions.outputFormat=this.cmbOutputFormat.value;this._exportOptions.runAsUserId=this.lkpRunAsUserId.selectedObject?this.lkpRunAsUserId.selectedObject.$key:null;return this._exportOptions;},_getScheduleOptions:function(){if(this._scheduleOptions.executionType==_163d.ExecutionType.OnDemand){this._scheduleOptions.executionType=_163d.ExecutionType.OnDemand;}else{var _164d=this.jobSchedulingWidget.getJobSchedulingOptions();var _164e=null;var _164f=null;var _1650=null;if(_164d){if(_164d.startTime&&(_164d.startTime instanceof Date)){_164e=_1644.Convert.toJsonStringFromDate(_164d.startTime);}if(_164d.endTime&&(_164d.endTime instanceof Date)){_164f=_1644.Convert.toJsonStringFromDate(_164d.endTime);}_1650=_164d.cronExpression;}this._scheduleOptions.startTime=_164e;this._scheduleOptions.endTime=_164f;this._scheduleOptions.cronExpression=_1650;this._scheduleOptions.scheduleDescription=this.txtScheduleDescription.get("value");this._scheduleOptions.executionType=_163d.ExecutionType.Scheduled;}return this._scheduleOptions;},_setControlsVisibility:function(){var svc=Sage.Services.getService("RoleSecurityService");if(svc){if(!svc.hasAccess("Entities/ReportManager/RunAsUser")){_1641.setDomNodeVisible(this.trRunAsUserId,false);}}var _1651=(this._scheduleOptions.executionType===_163d.ExecutionType.Scheduled);_1641.setDomNodeVisible(this.trSchedulingWidget,_1651);},_getDialogTitle:function(){if(this._scheduleOptions.executionType===_163d.ExecutionType.OnDemand){return this._nlsResources.txtDialogTitle+" ["+this._reportMetadata.displayName+"]";}else{return this._nlsResources.txtDialogTitleScheduling+" ["+this._reportMetadata.displayName+"]";}}});return _1647;});},"Sage/UI/JobSchedulingWidget":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","dijit/form/Select","dijit/form/Button","Sage/UI/ImageButton","dojo/text!./templates/JobSchedulingWidget.html","dojo/i18n!./nls/JobSchedulingWidget","dojo/_base/declare","dojo/string","Sage/UI/Dialogs","Sage/UI/Controls/DateTimePicker"],function(_1652,_1653,_1654,_1655,_1656,_1657,_1658,_1659,_165a,_165b,_165c){var _165d=_165a("Sage.UI.JobSchedulingWidget",[_1654,_1652,_1653],{cronExpression:"",displayStartEndTime:true,minuteOptions:["1","5","10","15","20","25","30","35","40","45","50","55"],pastHourOptions:["0","5","10","15","20","25","30","35","40","45","50","55"],hourOptions:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],cronFields:{seconds:0,minutes:"*",hours:"*",days:"*",weeks:"*",months:"*",years:"*"},cronExpressionVisible:true,_initialized:false,widgetsInTemplate:true,templateString:_1658,postMixInProperties:function(){dojo.mixin(this,_1659);},initialize:function(_165e){dojo.mixin(this,_165e);if(this.trigger){this.cronExpression=this.trigger.cronExpression;}else{this.cronExpressionVisible=false;}this.txtCronExpression.set("value",this.cronExpression);this._parseCronExpression();this.cboFrequency.set("value",this._getFrequencyType());this._loadScheduleDetails();this._initializeControlState();this.cboFrequency.removeOption("yearly");},_initializeListOptions:function(_165f,_1660,_1661){var _1662=[];this._clearComboBox(_165f);dojo.forEach(_1661,function(_1663){var _1664={selected:false,label:_1663,value:_1663};if(_1660===_1663){_1664.selected=true;}_1662.push(_1664);});_165f.addOption(_1662);},_parseCronExpression:function(){if(this.cronExpression){var parts=this.cronExpression.split(" ");if(parts.length===6||parts.length===7){this.cronFields.seconds=parts[0];this.cronFields.minutes=parts[1];this.cronFields.hours=parts[2];this.cronFields.days=parts[3];this.cronFields.weeks=parts[4];this.cronFields.months=parts[5];this.cronFields.years=parts.length===6?parts[6]:"*";}}},_getFrequencyType:function(){var _1665="daily";if(!this.cronExpression){return _1665;}var _1666=[];if(this.cronFields.days==="?"){if(this.cronFields.months==="MON-FRI"){this.cronExpressionVisible=false;return "weekday";}else{if(this.cronFields.months.indexOf("#")!==-1){_1666=["/"];if(!isNaN(this.cronFields.weeks)){this.cronExpressionVisible=true;}else{if(this._isValid(this.cronFields.days,_1666)){_1665="monthly";this.cronExpressionVisible=false;}}}else{if(this._isWeeklyType()){this.cronExpressionVisible=false;return "weekly";}}}}if(this.cronFields.months==="?"&&(this.cronFields.days==="1/1"||this.cronFields.days==="*")){if(!isNaN(this.cronFields.hours)){this.cronExpressionVisible=false;return "daily";}else{var part=this.cronFields.hours.split("/");if(part.length>1){this.cronExpressionVisible=false;return "hourly";}else{part=this.cronFields.minutes.split("/");if(part.length>1){this.cronExpressionVisible=false;return "minutes";}}}}return _1665;},_isWeeklyType:function(){var _1667=[",","-","*","?","/","L","#"];if(this._isValid(this.cronFields.months,_1667)){return true;}else{return false;}},_loadScheduleDetails:function(){if(this.cronExpression){this._loadCronScheduleDetails();}else{this._loadFromPropScheduleDetails();}},_loadFromPropScheduleDetails:function(){this.cronExpressionVisible=false;if(this.trigger){}},_loadCronScheduleDetails:function(){var part;switch(this.cboFrequency.get("value")){case "minutes":part=this.cronFields.minutes.split("/");this._initializeListOptions(this.cboMinutesHours,part[1],this.minuteOptions);break;case "hourly":part=this.cronFields.hours.split("/");this._initializeListOptions(this.cboMinutesHours,part[1],this.hourOptions);this.cboMinutesHours.set("value",part[1]);this._initializeListOptions(this.cboMinutesPastHour,this.cronFields.minutes,this.pastHourOptions);this.cboMinutesPastHour.set("value",this.cronFields.minutes);break;case "weekly":this.cboDay.set("value",this._convertDayToStr(this.cronFields.months));break;case "monthly":part=this.cronFields.months.split("#");this.cboDay.set("value",this._convertDayToStr(part[0]));this.cboMonthDay.set("value",part[1]);break;}},_convertDayToStr:function(day){if(!isNaN(day)){switch(day){case 1:return "SUN";case 3:return "TUE";case 4:return "WED";case 5:return "THU";case 6:return "FRI";case 7:return "SAT";default:return "MON";}}else{return day;}},_convertDayToInt:function(day){switch(day){case "SUN":return 0;case "MON":return 1;case "TUE":return 2;case "WED":return 3;case "THU":return 4;case "FRI":return 5;case "SAT":return 6;}},_isValidExpression:function(){var _1668=[];switch(this.cboFrequency.get("value")){case "minutes":_1668=[",","-"];return this._isValid(this.cronFields.minutes,_1668);case "hourly":_1668=[",","-"];return this._isValid(this.cronFields.hours,_1668);case "daily":case "weekly":return true;case "monthly":_1668=[",","-","?","/","L"];return this._isValid(this.cronFields.months,_1668);default:return false;}},_isValid:function(_1669,_166a){var _166b=true;dojo.every(_166a,function(_166c){if(_1669.indexOf(_166c)!==-1){_166b=false;}});return _166b;},_assignDateValues:function(){switch(this.cboFrequency.get("value")){case "daily":case "weekday":case "weekly":case "monthly":case "yearly":var _166d=new Date();var _166e=[",","-","*"];var _166f=this._getTimePart(this.cronFields.minutes,_166e);if(this._isNumber(_166f)){_166d.setMinutes(_166f);}var hours=this._getTimePart(this.cronFields.hours,_166e);if(this._isNumber(hours)){_166d.setHours(this.cronFields.hours);}if(this.trigger&&this._isNumber(_166f)&&this._isNumber(hours)){this.dtRunAtTime.set("value",_166d);}break;}if(this.trigger){if(this.trigger.startTimeUtc){this.dtRunFromDate.set("value",new Date(parseInt(this.trigger.startTimeUtc.substr(6))));}if(this.trigger.endTimeUtc){this.dtRunToDate.set("value",new Date(parseInt(this.trigger.endTimeUtc.substr(6))));}}},_getTimePart:function(_1670,_1671){var _1672="invalid";if(this._isNumber(_1670)){_1672=parseInt(_1670);}else{if(this._isValid(_1670,_1671)){var part=_1670.split("/");if(part.length>1){_1672=part[1];}}}return _1672;},_isNumber:function(value){var reg=new RegExp("^[0-9]+$");return !!reg.test(value);},_initializeControlState:function(){var _1673=this.cboFrequency.get("value").valueOf();this._setVisibility(this.divMinutesHours,_1673==="minutes"||_1673==="hourly");this._setVisibility(this.lblOnText,_1673==="weekly");this._setVisibility(this.lblOnTheText,_1673==="monthly");this._setVisibility(this.divMonthDay,_1673==="monthly");this._setVisibility(this.divDay,_1673==="weekly"||_1673==="monthly");this._setVisibility(this.lblAtText,_1673!=="minutes");this._setVisibility(this.divRunAtTime,_1673!=="minutes"&&_1673!=="hourly");this._setVisibility(this.lblMinutesPastHour,_1673==="hourly");this._setVisibility(this.divMinutesPastHour,_1673==="hourly");this._setVisibility(this.rowCronExpression,this.cronExpressionVisible);},_onFrequencyChange:function(){var _1674=this.cboFrequency.get("value").valueOf();if(_1674==="minutes"){if(this.initialized){this._initializeListOptions(this.cboMinutesHours,"5",this.minuteOptions);}}else{if(_1674==="hourly"){if(this.initialized){this._initializeListOptions(this.cboMinutesHours,"1",this.hourOptions);}if(this.cboMinutesPastHour.options.length===0){this._initializeListOptions(this.cboMinutesPastHour,"0",this.pastHourOptions);}}}if(!this.initialized){this.initialized=true;this._assignDateValues();}this._initializeControlState();},_clearComboBox:function(_1675){var _1676=_1675.options.length;for(var i=0;i<_1676;i++){_1675.removeOption(0);}},_setVisibility:function(_1677,_1678){if(_1677&&_1678){dojo.removeClass(_1677,"display-none");}else{if(_1677){dojo.addClass(_1677,"display-none");}}},_buildCronExpression:function(){return _165b.substitute("${0} ${1} ${2} ${3} ${4} ${5} ${6}",[this._getFormatedSeconds(),this._getFormatedMinutes(),this._getFormatedHours(),this._getFormatedDaysOfMonth(),this._getFormatedMonths(),this._getFormatedDaysOfWeek(),this._getFormatedYears()]);},_getFormatedSeconds:function(){return 0;},_getFormatedMinutes:function(){switch(this.cboFrequency.get("value")){case "minutes":return _165b.substitute("0/${0}",[this.cboMinutesHours.get("value")]);case "hourly":return this.cboMinutesPastHour.get("value");case "daily":case "weekly":case "monthly":case "yearly":return this._getTimePortion(true);default:return "*";}},_getFormatedHours:function(){switch(this.cboFrequency.get("value")){case "minutes":return "*";case "hourly":return _165b.substitute("0/${0}",[this.cboMinutesHours.get("value")]);default:return this._getTimePortion(false);}},_getTimePortion:function(_1679){if(_1679){var _167a=this.dtRunAtTime.getTimeValue();return _167a.getMinutes();}else{var hour=this.dtRunAtTime.getTimeValue();return hour.getHours();}},_getFormatedDaysOfMonth:function(){switch(this.cboFrequency.get("value")){case "minutes":case "hourly":case "daily":return "*";case "weekday":case "weekly":case "monthly":case "yearly":return "?";default:return "*";}},_getFormatedMonths:function(){return "*";},_getFormatedDaysOfWeek:function(){switch(this.cboFrequency.get("value")){case "minutes":case "daily":case "hourly":return "?";case "weekday":return "MON-FRI";case "weekly":return this.cboDay.get("value");case "monthly":case "yearly":return _165b.substitute("${0}#${1}",[this.cboDay.get("value"),this.cboMonthDay.get("value")]);default:return "*";}},_getFormatedYears:function(){return "*";},_isSameDate:function(_167b,_167c){return _167b.getFullYear()===_167c.getFullYear()&&_167b.getMonth()===_167c.getMonth()&&_167b.getDate()===_167c.getDate();},_getDaysDateDiff:function(date1,date2){var _167d=1000*60*60*24;var _167e=Math.abs(date1.getTime()-date2.getTime());return Math.round(_167e/_167d);},getJobSchedulingOptions:function(){var _167f={startTime:this.dtRunFromDate.focusNode.value===""?null:this.dtRunFromDate.getValue(),endTime:this.dtRunToDate.focusNode.value===""?null:this.dtRunToDate.getValue(),cronExpression:this._buildCronExpression()};return _167f;},validateSchedule:function(_1680,_1681){var _1682=this.dtRunFromDate.focusNode.value===""?null:this.dtRunFromDate.getValue();var _1683=this.dtRunToDate.focusNode.value===""?null:this.dtRunToDate.getValue();var onDay=null;if(_1680&&!_1682||(_1681&&!_1682||_1681&&!_1683)){if(!_1682){_165c.showError(this.txtInvalidStartDate,this.txtInvalidScheduleTitle);}else{_165c.showError(this.txtInvalidEndDate,this.txtInvalidScheduleTitle);}return false;}if(!_1682&&!_1683){return true;}if(_1682&&_1683&&_1682>=_1683||!_1682&&_1683){_165c.showError(this.txtInvalidDatesMessage,this.txtInvalidScheduleTitle);return false;}if(!_1683){return true;}_1682=new Date(_1682);_1683=new Date(_1683);switch(this.cboFrequency.get("value")){case "minutes":if(_1682.setMinutes(_1682.getMinutes()+parseInt(this.cboMinutesHours.get("value")))>=_1683){_165c.showError(this.txtInvalidScheduleTime,this.txtInvalidScheduleTitle);return false;}return true;case "hourly":if(_1682.setHours(_1682.getHours()+parseInt(this.cboMinutesHours.get("value")))>=_1683){_165c.showError(this.txtInvalidScheduleTime,this.txtInvalidScheduleTitle);return false;}return true;case "daily":case "weekday":if(this._isSameDate(_1682,_1683)){_165c.showError(this.txtInvalidScheduleTime,this.txtInvalidScheduleTitle);return false;}return true;case "weekly":if(this._isSameDate(_1682,_1683)){_165c.showError(this.txtInvalidScheduleTime,this.txtInvalidScheduleTitle);return false;}else{if(_1683.getDate()-_1682.getDate()<7){onDay=this._convertDayToInt(this.cboDay.get("value"));var _1684=_1682;_1684.setDate(_1684.getDate()+(_1684.getDay()+onDay));if(_1684>_1683){_165c.showError(this.txtInvalidScheduleTime,this.txtInvalidScheduleTitle);return false;}}}return true;case "monthly":if(this._isSameDate(_1682,_1683)){_165c.showError(this.txtInvalidScheduleTime,this.txtInvalidScheduleTitle);return false;}else{if(this._getDaysDateDiff(_1683,_1682)<31){var _1685=parseInt(this.cboMonthDay.get("value"));onDay=this._convertDayToInt(this.cboDay.get("value"));var _1686=this._moveToNthOccurrence(_1682,_1685,onDay,"","");var _1687=this._moveToNthOccurrence(_1683,_1685,onDay,"","");if(_1686<=_1682){if(_1687<=_1686||_1687>=_1683){_165c.showError(this.txtInvalidScheduleTime,this.txtInvalidScheduleTitle);return false;}}}}return true;}return false;},_moveToNthOccurrence:function(_1688,index,day,month,year){var date=new Date(_1688);date.setDate(1);if(month!==""&&month!==undefined){date.setMonth(month);}else{month=date.getMonth();}if(year!==""&&year!==undefined){date.setFullYear(year);}else{year=date.getFullYear();}while(date.getDay()!=day){date.setDate(date.getDate()+1);}switch(index){case 2:date.setDate(date.getDate()+7);break;case 3:date.setDate(date.getDate()+14);break;case 4:date.setDate(date.getDate()+21);break;case 5:date.setDate(date.getDate()+28);if(date.getMonth()!==month){date=null;}break;}return date;},destroyWidget:function(){this.destroyRecursive();}});return _165d;});},"Sage/MainView/main":function(){define(["Sage/MainView/ActivityManager","Sage/MainView/SecurityManager","Sage/MainView/ActivityMgr/ActivityCalendar","Sage/MainView/BindingsManager","Sage/MainView/Contact/ContactSearchForDuplicates","Sage/MainView/Contact/ContactUserAssociationEditor","Sage/MainView/IntegrationContract/MatchingOptionsConfig","Sage/MainView/IntegrationContract/AdvancedSearchOptions","Sage/MainView/IntegrationContract/InvoiceRTDV","Sage/MainView/IntegrationContract/SalesOrderRTDV","Sage/MainView/IntegrationContract/SalesQuoteRTDV","Sage/MainView/IntegrationContract/CustomerPaymentsRTDV","Sage/MainView/JobManager","Sage/MainView/ReportManager","Sage/MainView/EntityManager","Sage/MainView/Options/OptionsDialog","Sage/MainView/FormManager","Sage/MainView/GroupManager","Sage/MainView/IntegrationContract/SyncResultsHistory","Sage/MainView/_BaseListPanelConfig","Sage/MainView/Lead/ImportLeadsWizard"],function(){});},"Sage/MainView/ActivityManager":function(){define(["Sage/UI/SDataMainViewConfigurationProvider","Sage/UI/ListPanel","Sage/Utility","Sage/Utility/Activity","Sage/MainView/ActivityMgr/ActivityGroupContextService","Sage/Services/ActivityService","Sage/MainView/ActivityMgr/FilterConfigurationProvider","dojo/i18n!./nls/ActivityManager","dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred","require","Sage/Extensions/Activity/ActivityListCustomTabs/CustomTabsConfig","Sage/Extensions/Activity/ListPanelOverrides/ListPanelOverridesConfig","Sage/Extensions/ActivityRequirements"],function(_1689,_168a,_168b,_168c,_168d,_168e,_168f,_1690,_1691,lang,_1692,_1693,_1694,_1695){var _1696=_1691("Sage.MainView.ActivityManager",_1689,{_nlsResources:false,_currentTabId:false,_currentTabDescription:false,_currentUserId:false,_currentKeyField:"$key",_groupContextService:false,_tabNameCache:{},_mainViewName:"ActivityManager",store:false,custTabs:{},custTabConfigs:null,configTypes:null,listPanelOverrides:{},listPanelOverrideConfigs:null,_custTabConfigType:{},constructor:function(_1697){this._nlsResources=_1690;this._currentUserId="x";var _1698=Sage.Services.getService("ClientGroupContext");if(!_1698||_1698.declaredClass!=="Sage.MainView.ActivityMgr.ActivityGroupContextService"){Sage.Services.removeService("ClientGroupContext");_1698=new _168d();Sage.Services.addService("ClientGroupContext",_1698);}var ctx=_1698.getContext();this._currentTabId=ctx.CurrentGroupID;this._currentTabDescription=ctx.CurrentName;var _1699=Sage.Services.getService("ClientContextService");if(_1699){if(_1699.containsKey("userID")){this._currentUserId=_1699.getValue("userID");}}this.titlePaneConfiguration={tabs:this._getTabsConfig(),menu:this._getMenuConfig(),titleFmtString:this._nlsResources.titleFmtString||"${0}"};dojo.subscribe("/group/context/changed",this,"_onCurrentGroupChanged");lang.mixin(this.custTabs,_1694);lang.mixin(this.listPanelOverrides,_1695);this.configTypes=_1698.groupConfigTypes;if(this.listPanelOverrides&&this.listPanelOverrides.overrideConfigs){this.listPanelOverrideConfigs=this.listPanelOverrides.overrideConfigs;for(var x=0;x<this.listPanelOverrideConfigs.length;x++){this._overrideTab(this.listPanelOverrideConfigs[x].listId,this.listPanelOverrideConfigs[x].newConfig,_1698.groupConfigTypes);}}if(this.custTabs&&this.custTabs.configTypes){this.custTabConfigs=this.custTabs.configTypes;for(var y=0;y<this.custTabConfigs.length;y++){this._addCustomTab(_1698.groupConfigTypes,this.custTabConfigs[y]);}}},_setListPanelConfig:function(){var _169a=Sage.Services.getService("ClientGroupContext");if(_169a){this.listPanelConfiguration=_169a.getCurrentListConfig();this.store=this.listPanelConfiguration.list.store;this.service=this.listPanelConfiguration.list.store.service;}return;},_getListPanelConfig:function(){this._setListPanelConfig();return this.listPanelConfiguration;},requestConfiguration:function(_169b){if(_169b.success){_169b.success.call(_169b.scope||this,this._getListPanelConfig(),this);}},requestTitlePaneConfiguration:function(_169c){if(_169c.success){_169c.success.call(_169c.scope||this,this.titlePaneConfiguration,this);}},onConfigurationChange:function(obj){},onTitlePaneConfigurationChange:function(){},_setUIForNewTab:function(tabId,_169d){this._currentTabId=tabId;this._currentTabDescription=_169d;},_onCurrentGroupChanged:function(args){var _169e=args["current"];if(!_169e){var _169f=Sage.Services.getService("ClientGroupContext");_169e=_169f.getContext();}if(dijit.byId("GroupTabs").selectedChildWidget.id!==_169e.CurrentGroupID){dijit.byId("GroupTabs").selectChild(_169e.CurrentGroupID);}},_onTabSelected:function(tab){var _16a0=Sage.Services.getService("ClientGroupContext");var id=tab.id||tab;var _16a1=_16a0.getKeyField(id);if(_16a0){var ctx=_16a0.getContext();if(ctx.CurrentGroupID===id){return;}this._setUIForNewTab(id,tab.title);_16a0.setCurrentGroup(id,tab.title,_16a1);}},_getTabsConfig:function(){var _16a2={store:false,selectedTabId:this._currentTabId,tabKeyProperty:"key",tabNameProperty:"descriptor",fetchParams:{},staticTabs:this._getStaticTabs(),onTabSelect:dojo.hitch(this,"_onTabSelected"),onTabClose:false,showTabContextMenus:false};return _16a2;},_getStaticTabs:function(){var _16a3=Sage.Services.getService("ClientGroupContext");var _16a4=_16a3.getStaticTabs();return _16a4;},_getMenuConfig:function(){return false;},_overrideTab:function(_16a5,_16a6,_16a7){this._dynamicRequire(_16a6,function(_16a8){for(var i=0;i<_16a7.length;i++){if(_16a7[i].key.toUpperCase()===_16a5.toUpperCase()){_16a7[i].configProviderType=_16a8;}}});},_addCustomTab:function(_16a9,_16aa){this._dynamicRequire(_16aa.configProviderType,function(_16ab){_16aa.configProviderType=_16ab;_16a9.push(_16aa);});},_dynamicRequire:function(_16ac,_16ad){var _16ae=new _1692();_1693([_16ac],function(_16af){_16ae.resolve(_16af);});_16ae.then(function(_16b0){_16ad(_16b0);},function(err){console.error("Error: _dynamicRequire :  Attempted to add an unknown module type .",err);});}});return _1696;});},"Sage/UI/SDataMainViewConfigurationProvider":function(){define(["Sage/UI/ListPanel","Sage/_ConfigurationProvider","Sage/UI/TitleContentPane","Sage/UI/DetailPanel","Sage/UI/_DetailPanelConfigurationProvider","dojo/_base/declare"],function(_16b1,_16b2,_16b3,_16b4,_16b5,_16b6){var _16b7=_16b6("Sage.UI.SDataMainViewConfigurationProvider",[_16b2,Sage.UI._TitlePaneConfigProvider,_16b5],{entityType:"",service:null,listPanelConfiguration:false,constructor:function(_16b8){this.listPanelConfiguration=this.listPanelConfiguration||{list:{},detail:false,summary:false};this.titlePaneConfiguration=this.titlePaneConfiguration||{tabs:false,menu:false,titleFmtString:"${0}"};var eCtx=Sage.Services.getService("ClientEntityContext");if(eCtx){eCtx.setContext({EntityType:this.entityType});}var _16b9=Sage.Services.getService("ClientGroupContext");if(_16b9){dojo.connect(_16b9,"onCurrentGroupChanged",this,"handleProfileChanged");}if(Sage.Services.hasService("MainViewConfigurationProvider")){Sage.Services.removeService("MainViewConfigurationProvider");}},handleProfileChanged:function(opt){this.onConfigurationChange(opt);},requestConfiguration:function(_16ba){if(_16ba.success&&this.listPanelConfiguration){_16ba.success.call(_16ba.scope||this,this.listPanelConfiguration,this);}}});return _16b7;});},"Sage/UI/ListPanel":function(){define(["dojo/aspect","dojo/i18n","dijit/layout/BorderContainer","dijit/layout/StackContainer","dijit/layout/ContentPane","dijit/Toolbar","dijit/ToolbarSeparator","dojox/grid/EnhancedGrid","Sage/_Templated","Sage/UI/Filters/FilterManager","Sage/UI/ToolBarLabel","dijit/Menu","dojox/grid/enhanced/plugins/Menu","Sage/Utility","dojox/storage/LocalStorageProvider","Sage/UI/_DetailPane","dijit/_Widget","dojox/grid/enhanced/plugins/IndirectSelection","Sage/UI/Grid/Plugins/ShowHideColumns","dojo/_base/array","dojo/_base/lang","dojo/_base/declare","dojo/i18n!./nls/ListPanel","dojo/_base/sniff","dojo/dom-geometry","dijit/registry","dojo/_base/connect","dojo/ready"],function(_16bb,i18n,_16bc,_16bd,_16be,_16bf,_16c0,_16c1,_16c2,_16c3,_16c4,_16c5,_16c6,util,_16c7,_16c8,_16c9,_16ca,_16cb,array,lang,_16cc,_16cd,has,_16ce,_16cf,_16d0,ready){var _16d1=_16cc("Sage.UI.ListPanel",[_16bc,_16c9,_16c2],{widgetsInTemplate:true,contentTemplate:new Simplate(["{%! $.menuTemplate %}","{%! $.listTemplate %}","{%! $.detailTemplate %}"]),listTemplate:new Simplate(["<div data-dojo-type=\"dijit.layout.StackContainer\" region=\"center\" splitter=\"true\" data-dojo-attach-point=\"_gridContainer\">","<div data-dojo-type=\"dijit.layout.ContentPane\" data-dojo-attach-point=\"_noConfigurationPane\"></div>","<div id=\"{%= $.id %}_listGrid\" columnReordering=\"true\" class=\"listGrid\" data-dojo-type=\"{%= $.gridType %}\" data-dojo-attach-point=\"_listGrid\" plugins=\"{menus:{selectedRegionMenu:'_listContextmenu', rowMenu:'_listContextmenu'}, indirectSelection: {%: $._indirectSelection%}, showHideColumns: true}\" dojoAttachEvent=\"onRowClick:_onRowClick,onRowContextMenu:_onRowContextMenu,onSelected:_onSelectedInList,onSelectionChanged:_onSelectionChanged,onResizeColumn:_onResizeColumn,onHeaderCellClick:_onHeaderCellClick,onCellClick:_onCellClick,onRowDblClick:_onRowDblClick\">","<div data-dojo-type=\"dijit.Menu\" id=\"_listContextmenu\" dojotAttachPoint=\"_listContextmenu\" style=\"display:none\" ></div>","</div>","<div id=\"{%= $.id %}_summaryGrid\" class=\"summaryGrid\" data-dojo-type=\"{%= $.gridType %}\" selectionMode=\"none\" data-dojo-attach-point=\"_summaryGrid\" dojoAttachEvent=\"onRowClick:_onRowClick,onRowContextMenu:_onRowContextMenu,onSelected:_onSelectedInSummary,onSelectionChanged:_onSelectionChanged\"></div>","</div>"]),menuTemplate:new Simplate(["<div data-dojo-type=\"dijit.Toolbar\" region=\"top\" splitter=\"false\" id=\"{%= $.id %}_toolbar\" style=\"{%= $.toolbarStyle %}\" data-dojo-attach-point=\"_tbar\" class=\"list-panel-tbar right-tools\">","<div data-dojo-type=\"Sage.UI.ToolBarLabel\" label=\"\" data-dojo-attach-point=\"_tbarLabel\" class=\"list-panel-left-tools\"></div>","<div data-dojo-type=\"Sage.UI.ToolBarLabel\" label=\"\" data-dojo-attach-point=\"_tbarOverflowLabel\" class=\"list-panel-left-tools\" style=\"display:none;\"></div>","<div data-dojo-type=\"Sage.UI.ToolBarLabel\" label=\"{%= $.unsavedDataText %}\" data-dojo-attach-point=\"_unsavedDataLabel\" class=\"display-none\"></div>","<div data-dojo-type=\"Sage.UI.ToolBarLabel\" label=\"\" data-dojo-attach-point=\"_filterSummary\" class=\"filter-summary-view\"></div>","<div data-dojo-type=\"dijit.form.Button\" showLabel=\"true\" id=\"{%= $.id %}_detailBtn\" data-dojo-attach-point=\"_detailButton\" dojoAttachEvent=\"onClick:toggleDetail\" class=\"list-panel-tool-detail\">{%= $.detailText %}</div>","<span data-dojo-type=\"dijit.ToolbarSeparator\" data-dojo-attach-point=\"_buttonSection\" class=\"list-panel-tool-section\"></span>","<div data-dojo-type=\"dijit.form.Button\" showLabel=\"true\" id=\"{%= $.id %}_listBtn\" data-dojo-attach-point=\"_listButton\" dojoAttachEvent=\"onClick:showList\" class=\"list-panel-tool-list\">{%= $.listText %}</div>","<div data-dojo-type=\"dijit.form.Button\" showLabel=\"true\" id=\"{%= $.id %}_summaryBtn\" data-dojo-attach-point=\"_summaryButton\" dojoAttachEvent=\"onClick:showSummary\" class=\"list-panel-tool-summary\">{%= $.summaryText %}</div>","<div data-dojo-type=\"Sage.UI.ImageButton\" iconClass=\"Global_Images icon16x16 icon_refresh\"  tooltip=\"{%: $.refreshText %}\" id=\"refreshBtn\" data-dojo-attach-point=\"_refreshButton\" dojoAttachEvent=\"onClick:refreshView\" class=\"list-panel-tool-help\"></div>","<div data-dojo-type=\"Sage.UI.ImageButton\" iconClass=\"Global_Images icon16x16 icon_Help_16x16\" tooltip=\"{%: $.helpText %}\" id=\"helpBtn\" data-dojo-attach-point=\"_helpButton\" dojoAttachEvent=\"onClick:showHelp\" class=\"list-panel-tool-help\"></div>","</div>"]),detailTemplate:new Simplate(["<div data-dojo-type=\"{%= $.detailType %}\" region=\"{%= $.detailRegion %}\" splitter=\"true\" style=\"{%= $.detailStyle %}\" data-dojo-attach-point=\"_detailPane\">","</div>"]),_filterGroup:null,_filterSubscriptions:null,_filterManager:null,_toolbarApplied:false,_configurationProvider:null,_configurationConnects:null,_contextConnects:null,_dataChangeWatchers:[],_gridContainer:null,_noConfigurationPane:null,_listGrid:null,_indirectSelection:"",_summaryGrid:null,_detailPane:null,_tbar:null,_tbarCustom:false,_tbarLabel:null,_buttonSection:null,_detailButton:null,_listButton:null,_summaryButton:null,_helpButton:null,_filterSummary:null,_unsavedDataLabel:null,_forcedFilterPublish:false,_listMode:"list",helpTopicName:"listview",gutters:false,toolbarStyle:"",gridType:"dojox.grid.EnhancedGrid",initialGrid:"list",filterGroup:"default",detailVisible:false,detailOnSummary:false,detailRegion:"bottom",detailStyle:"height: 256px;",detailType:"dijit.layout.ContentPane",autoConfigure:true,hasCheckBox:false,autoFitColumns:true,FILTER_UPDATE_DELAY:1000,STORE_KEY_COLUMN_SIZE:"_COLUMN_UNIT_WIDTH_",STORE_KEY_SORT_INFO:"_GRID_SORT_PROPS_",STORE_KEY_LAYOUT_INFO:"_GRID_LAYOUT_PROPS_",STORE_KEY_TOGGLE_INFO:"_GRID_TOTTLE_PROPS_",STORE_KEY_STORE_QUERY:"_STORE_QUERY_",STORE_KEY_VIEWSTATE:"LISTPANEL_VIEWSTATE",RECORD_WARNING_SIZE:30000,constructor:function(){this.inherited(arguments);},postMixInProperties:function(){this.inherited(arguments);lang.mixin(this,_16cd);this._setupCheckBox();this._setupAutoFit();},postCreate:function(){this.inherited(arguments);if(this._listGrid){this.connect(this._listGrid.scroller,"scroll",this._onListScroll);this.connect(this._summaryGrid.scroller,"scroll",this._onSummaryScroll);this._listGrid.canSort=function(col){var cells=this.layout.cells;var cell=cells[Math.abs(col)-1];if(cell.nosort){return false;}return true;};this._listGrid.columnReordering=true;this._listGrid.selectionMode="extended";dojo.connect(this._listGrid,"onMoveColumn",this,function(type,_16d2,cols){var cells=this._listGrid.layout.cells,_16d3=[],i=0,key="";for(i=0;i<cells.length;i++){if(cells[i].field){_16d3.push(cells[i].field);}}key=this._getGridLayoutKey();this._saveToLocalStorage(key,_16d3);});dojo.subscribe("/sage/ui/grid/columnToggle/"+this._listGrid.id,dojo.hitch(this,function(cell){var cells=this._listGrid.layout.cells,_16d4=[],i=0,key="";for(i=0;i<cells.length;i++){_16d4.push({field:cells[i].field,hidden:cells[i].hidden});}key=this._getGridColumnToggleKey();this._saveToLocalStorage(key,_16d4);}));}this._gridContainer.selectChild(this._noConfigurationPane);if(this._detailPane.isInstanceOf(_16c8)){this._detailPane.set("owner",this);}this._setDetailPaneVisibility(false,false);if(this._tbarOverflowLabel){this._tbarOverflowLabel.set("label",_16cd.overflowText);}this._updateToolbarItemVisibility();},startup:function(){this.inherited(arguments);if(this.autoConfigure){this.requestConfiguration();}},uninitialize:function(){this.inherited(arguments);if(this._filterManager){this._filterManager.destroy();}if(this._configurationProvider){this._configurationProvider.destroy();}},getAppliedFilterCount:function(){return this._filterManager&&this._filterManager.getAppliedFilterCount();},_setupCheckBox:function(){var _16d5=Sage.Services.getService("UserOptions");this._indirectSelection="false";if(_16d5&&_16d5.get){_16d5.get("GroupCheckboxEnabled","GroupGridView",lang.hitch(this,function(data){var _16d6=data&&data.value;if(_16d6==="True"||_16d6==="T"){this._indirectSelection="{ draggable: false}";this.hasCheckBox=true;}else{this.hasCheckBox=false;}}),null,this,false);}},_setupAutoFit:function(){var _16d7=Sage.Services.getService("UserOptions");if(_16d7&&_16d7.get){_16d7.get("autoFitColumns","GroupGridView",lang.hitch(this,function(data){var val=data&&data.value;if(val==="True"||val==="T"){this.autoFitColumns=true;}else{this.autoFitColumns=false;}}),null,this,false);}},_setSortInfo:function(store){var key=this._getGridSortKey(),_16d8=this._getFromLocalStorage(key);if(_16d8){if(_16d8.descending){this._listGrid.sortInfo=(_16d8.cellIndex+1)*-1;}else{this._listGrid.sortInfo=_16d8.cellIndex+1;}store.sort=[_16d8];}else{if(store.id=="Entity"||store.id=="all_groups"||store.id=="releases"||store.id=="statistics"){if(this.hasCheckBox){this._listGrid.sortInfo=2;}else{this._listGrid.sortInfo=1;}}else{this._listGrid.sortInfo=0;}}},_setSummarySortInfo:function(store){var key=this._getGridSortKey(),_16d9=this._getFromLocalStorage(key);if(_16d9){store.sort=[_16d9];}},_setColumnSizes:function(_16da){var cells=_16da;if(_16da[0].cells){cells=_16da[0].cells[0];}array.forEach(cells,function(item){if(item&&item.field){var key=this._getColumnSizeKey(item.field),value=this._getFromLocalStorage(key);if(value){item.width=value;}}},this);},_doAutoFitColumns:function(){if(!this.autoFitColumns){return;}var _16db=this._listGrid.get("structure"),cells=_16db,_16dc=0,_16dd,_16de,_16df=0;if(_16db&&_16db[0].cells){cells=_16db[0].cells[0];}array.forEach(cells,function(item){if(item&&item.field){var key=this._getColumnSizeKey(item.field),value=this._getFromLocalStorage(key);if(value){item.width=value;}if(!this._isFieldHidden(item.field)){_16dc+=parseInt(item.width,10);}}},this);_16dd=_16ce.getContentBox("list");_16de=_16dd.w;if(this.hasCheckBox){_16df=200;}else{_16df=155;}_16de=_16de-_16df;var _16e0=this._listGrid.store.id;if(_16e0=="all_groups"||_16e0=="releases"||_16e0=="statistics"){_16de=_16de-20;}array.forEach(cells,function(item){var width,pct,_16e1;if(item&&item.field&&!this._isFieldHidden(item.field)){width=parseInt(item.width,10);pct=width/_16dc;_16e1=Math.floor(_16de*pct);item.width=_16e1+"px";}},this);this._listGrid.set("structure",_16db);this._updateColumnVisibility();},_updateStructureFromLocalStore:function(){var key=this._getGridLayoutKey(),_16e2=this._listGrid.structure,_16e3=this._getFromLocalStorage(key),cells;if(_16e3){if(_16e2[0].cells){cells=_16e2[0].cells[0];}else{cells=_16e2;}if(cells){cells.sort(function(a,b){var _16e4=array.indexOf(_16e3,a.field),_16e5=array.indexOf(_16e3,b.field);if(_16e4>_16e5){return 1;}if(_16e4<_16e5){return -1;}return 0;});}this._listGrid.set("structure",_16e2);}this._updateColumnVisibility();},_isFieldHidden:function(field){var _16e6,_16e7,_16e8;_16e6=this._getGridColumnToggleKey();_16e7=this._getFromLocalStorage(_16e6);_16e8=false;if(_16e7){array.forEach(_16e7,lang.hitch(this,function(item){if(item.field===field){_16e8=item.hidden;}}));}return _16e8;},_updateColumnVisibility:function(){var _16e9,_16ea;_16e9=this._getGridColumnToggleKey();_16ea=this._getFromLocalStorage(_16e9);if(_16ea){array.forEach(this._listGrid.layout.cells,lang.hitch(this,function(cell){array.forEach(_16ea,lang.hitch(this,function(item){if(item.field===cell.field){this._listGrid.layout.setColumnVisibility(cell.index,!item.hidden);}}));}));}},_handleConfigurationChange:function(){this._listGrid.selection.clear();if(this._detailPane){this._detailPane.clear();}this.requestConfiguration();},_setConfigurationProviderAttr:function(value){if(this._configurationConnects){array.forEach(this._configurationConnects,function(_16eb){this.disconnect(_16eb);},this);}if(this._configurationProvider&&this._configurationProvider!==value){this._configurationProvider.destroy();}this._configurationProvider=value;this._configurationConnects=[];if(this._configurationProvider){this._configurationConnects.push(this.connect(this._configurationProvider,"onConfigurationChange",this._handleConfigurationChange));this._configurationProvider.set("owner",this);if(this._created){if(this.autoConfigure){this.requestConfiguration();}}}},_getConfigurationProviderAttr:function(){return this._configurationProvider;},_setFilterGroupAttr:function(value){if(this._filterSubscriptions){array.forEach(this._filterSubscriptions,function(_16ec){this.unsubscribe(_16ec);},this);}this._filterGroup=value;this.set("filterManager",new _16c3({filterGroup:this._filterGroup}));this._filterSubscriptions=[];this._filterSubscriptions.push(this.subscribe(dojo.string.substitute("/ui/filters/${0}/change",[this._filterGroup]),this._onFilterChange));var _16ed=util.debounce(lang.hitch(this,this._onFilterRefresh),this.FILTER_UPDATE_DELAY);this._filterSubscriptions.push(this.subscribe(dojo.string.substitute("/ui/filters/${0}/refresh",[this._filterGroup]),_16ed));this._ensureApplyFilterWasPublished();},_ensureApplyFilterWasPublished:function(_16ee){if(this._forcedFilterPublish){return;}var _16ef,_16f0;_16ef=Sage.Services.getService("ClientGroupContext");_16f0=_16ef&&_16ef.getContext();if(_16f0&&_16f0.AppliedFilterInfo){_16ef.publishFiltersApplied(_16f0.AppliedFilterInfo);}if(this._filterManager&&_16ee&&_16ef.applyFilters){_16ef.applyFilters(this._filterManager);}this._forcedFilterPublish=true;},_getFilterGroupAttr:function(){return this._filterGroup;},_setFilterManagerAttr:function(value){if(this._filterManager&&this._filterManager!==value){this._filterManager.destroy();}this._filterManager=value;if(this._filterManager){this._filterManager.set("owner",this);}},_getFilterManagerAttr:function(){return this._filterManager;},_onFilterChange:function(){},_onFilterRefresh:function(_16f1,_16f2,_16f3){this._listGrid.selection.clear();if(this._detailPane){this._detailPane.clear();}var query=_16f3.createQuery(),key=this._getStoreQueryKey();if(this._listMode==="summary"&&this._hasConfigurationForSummary()){this._summaryGrid.queryOptions=this._summaryGrid.queryOptions||{};this._summaryGrid.filter(query);}else{this._listGrid.queryOptions=this._listGrid.queryOptions||{};this._listGrid.queryOptions.httpMethodOverride=!!query;this._listGrid.filter(query,true);}this._saveToLocalStorage(key,{store:this._listGrid.store,query:query});},_setConfigurationAttr:function(_16f4){this._applyConfiguration(_16f4);},_getListAttr:function(){return this._listGrid;},_getSummaryAttr:function(){return this._summaryGrid;},_getDetailAttr:function(){return this._detailPane;},_applyConfigurationFailed:function(_16f5){dojo.publish("/listView/applyConfiguration",this);},_applyConfiguration:function(_16f6){this._forcedFilterPublish=false;dojo.publish("/listView/applyConfiguration",this);var key=this._getViewStateKey(),state=this._getFromLocalStorage(key,this._getViewNS());if(state){this.initialGrid=state;}this._configuration=_16f6;this._gridContainer.selectChild(this._noConfigurationPane);if(this.initialGrid==="list"&&this._hasConfigurationForList()){this.showList();}if(this._hasConfigurationForSummary()){this._configuration.summary.active=false;}if(this.initialGrid==="summary"&&this._hasConfigurationForSummary()){if(this._gridContainer.selectedChildWidget===this._noConfigurationPane){this.showSummary();}}this._applyToolBar();if(this._configuration&&this._configuration.list&&this._configuration.list.selectionMode&&this._configuration.list.selectionMode==="single"){this._listGrid.selection.setMode("single");}else{if(this._configuration&&this._configuration.list&&this._configuration.list.selectionMode&&this._configuration.list.selectionMode==="none"){this._listGrid.selection.setMode("none");}else{this._listGrid.selection.setMode("extended");}}},_applyToolBar:function(){var _16f7,i,items;if(this._tbarCustom){_16f7=this._tbar.getChildren();for(i=0;i<_16f7.length;i++){if(_16f7[i].custom){this._tbar.removeChild(_16f7[i]);}}this._tbarCustom=false;}if(this._toolbarApplied&&!this._configuration.updateToolBar){return;}if(this._configuration&&this._configuration.toolBar){items=this._configuration.toolBar.items||[];if(items.length>0){this._tbarCustom=true;}for(i=0;i<items.length;i++){if(items[i].icon||items[i].imageClass){this._tbar.addChild(new Sage.UI.ImageButton(items[i]),i);}else{this._tbar.addChild(new dijit.form.Button(items[i]),i);}}}this._toolbarApplied=true;},_setDetailPaneVisibility:function(value,_16f8){if(value){if(this._hasConfigurationForDetail()&&!this._isConfigurationActiveForDetail()){if(this._detailPane.isInstanceOf(_16c8)){this._detailPane.set("configuration",this._configuration.detail);}this._configuration.detail.active=true;}this._detailButton.set("label",this.hideDetailText);this.addChild(this._detailPane);var _16f9=this._getSelection(0);if(_16f9){this._detailPane._onSelected(_16f9.rowIndex,_16f9,this._listGrid);}else{this._detailPane.clear();if(this._configurationProvider&&this.configurationProvider._mainViewName==="EntityManager"){_16bb.after(this._listGrid,"_onFetchComplete",function(){dojo.publish("/sage/ui/grid/gridLoadComplete","");});}}if(_16f8&&this._hasConfigurationForDetail()&&this._configuration.detailStateKey){sessionStorage.setItem(this._configuration.detailStateKey,"true");}}else{this._detailButton.set("label",this.detailText);this.removeChild(this._detailPane);if(_16f8&&this._hasConfigurationForDetail()&&this._configuration.detailStateKey){sessionStorage.setItem(this._configuration.detailStateKey,"false");}}},_getSelection:function(index){var sels=this._listGrid.selection.getSelected();var _16fa=null;for(var i=0;i<sels.length;i++){if(index==i){_16fa=sels[i];return _16fa;}}return _16fa;},_updateToolbarItemVisibility:function(){dojo.toggleClass(this.domNode,"list-panel-has-summary",this._canShowSummaryLink());dojo.toggleClass(this.domNode,"list-panel-has-detail",this._canShowDetailPane());},_canShowSummaryLink:function(){return (this._hasConfigurationForSummary()||(this._configurationProvider&&this._configurationProvider.summaryOptions));},_canShowDetailPane:function(){return (this._hasConfigurationForDetail()&&((this._gridContainer.selectedChildWidget!==this._summaryGrid)||this.detailOnSummary));},_shouldShowDetailPane:function(){return (this._canShowDetailPane()&&this.detailVisible);},_hasConfigurationForList:function(){return (this._configuration&&this._configuration.list);},_hasConfigurationForSummary:function(){return (this._configuration&&this._configuration.summary);},_hasConfigurationForDetail:function(){return (this._configuration&&this._configuration.detail);},_isConfigurationActiveForList:function(){return (this._hasConfigurationForList()&&this._configuration.list.active);},_isConfigurationActiveForSummary:function(){return (this._hasConfigurationForSummary()&&this._configuration.summary.active);},_isConfigurationActiveForDetail:function(){return (this._hasConfigurationForDetail()&&this._configuration.detail.active);},_onRowClick:function(e){this.onRowClick(e.rowIndex,e.grid.getItem(e.rowIndex),e.grid);},_onRowContextMenu:function(e){var _16fb=e.grid.selection,_16fc=_16fb.getSelected();if(_16fc.length===0){_16fb.select(e.rowIndex);}this.onRowContextMenu(e.rowIndex,e.grid.getItem(e.rowIndex),e.grid);},_onSelectedInList:function(index){this.onSelected(index,this._listGrid.getItem(index),this._listGrid);},_onSelectedInSummary:function(index){this.onSelected(index,this._summaryGrid.getItem(index),this._summaryGrid);},_onSelectionChanged:function(){dojo.publish("/sage/ui/list/selectionChanged",this);this.onSelectionChanged();},_onResizeColumn:function(_16fd){var grid=this._listGrid,cell=grid.getCell(_16fd),value=cell.unitWidth,key=this._getColumnSizeKey(cell.field);this._saveToLocalStorage(key,value);this._doAutoFitColumns();},_onHeaderCellClick:function(e){var grid=this._listGrid,key=this._getGridSortKey(),value,_16fe=grid.getSortProps();grid.selection.clear();if(_16fe&&_16fe.length>0){value=_16fe[0];value.cellIndex=e.cell.index;if(e.cell.nosort){return;}grid.setSortIndex(value.cellIndex,!value.descending);this._saveToLocalStorage(key,value);}},_onRowDblClick:function(e){if(this._configuration.list.onNavigateToDefaultItem){if(e.rowIndex>-1){var item=e.grid._by_idx[e.rowIndex].item;this._configuration.list.onNavigateToDefaultItem(item);}}},_onCellClick:function(e){var i,inc=1,_16ff=e.grid.selection.isSelected(e.rowIndex),_1700;if(has("ie")>8){try{var _1701=document.getSelection();if(_1701&&_1701.removeAllRanges){_1701.removeAllRanges();}}catch(err){}}if(e.grid.rowSelectCell){if(e.grid.rowSelectCell.index!==e.cell.index){if(e.shiftKey===true&&e.grid.rowSelectCell.lastClickRowIdx!==e.rowIndex){if(e.grid.rowSelectCell.lastClickRowIdx>e.rowIndex){inc=-1;}for(i=e.grid.rowSelectCell.lastClickRowIdx;i!==e.rowIndex;i+=inc){e.grid.rowSelectCell.toggleRow(i,true);}e.grid.rowSelectCell.toggleRow(e.rowIndex,true);}else{e.grid.rowSelectCell.toggleRow(e.rowIndex,!_16ff);if(this._shouldShowDetailPane()&&_16ff){_1700=this._getSelection(0);if(_1700){this._detailPane._onSelected(_1700.rowIndex,_1700,e.grid);}else{this._detailPane.clear();}}}e.grid.rowSelectCell.lastClickRowIdx=e.rowIndex;}else{if(this._shouldShowDetailPane()&&_16ff){e.grid.rowSelectCell.toggleRow(e.rowIndex,!_16ff);_1700=this._getSelection(0);e.grid.rowSelectCell.toggleRow(e.rowIndex,_16ff);if(_1700){this._detailPane._onSelected(_1700.rowIndex,_1700,e.grid);}else{this._detailPane.clear();}}}}},_saveToLocalStorage:function(key,value,_1702){var _1703;key=this._alterKeyForLookupResults(key);try{_1703=new _16c7();_1703.initialize();if(!_1702){_1702=this._getGroupNS();}_1702=this._makeValidNamespace(_1702);_1703.put(key,value,function(_1704,key,_1705){if(_1704===_1703.FAILED){console.error("Failed writing key: "+key+" in local storage. Message: "+_1705);}},_1702);}catch(err){console.error(err);}},_getFromLocalStorage:function(key,_1706){var _1707,_1708;key=this._alterKeyForLookupResults(key);try{_1707=new _16c7();_1707.initialize();if(!_1706){_1706=this._getGroupNS();}_1706=this._makeValidNamespace(_1706);_1708=_1707.get(key,_1706);}catch(err){console.error(err);}return _1708;},_alterKeyForLookupResults:function(key){if((/LOOKUPRESULTS/).test(key)){var _1709=this._getMainViewName();key=key.replace("LOOKUPRESULTS","LOOKUPRESULTS"+(_1709!=-1?_1709:""));}return key;},_makeValidNamespace:function(ns){return ns.replace(/[^0-9^A-Z^a-z^\-]/g,"-");},_getGroupNS:function(){var ns=Sage.Groups.GroupManager.LOCALSTORE_NAMESPACE+"-"+this._getGroupID();return ns;},_getViewNS:function(){var ns=Sage.Groups.GroupManager.LOCALSTORE_NAMESPACE+"-"+this._getMainViewName();return ns;},_getGroupID:function(){var _170a=Sage.Services.getService("ClientGroupContext"),_170b=-1,_170c=null;if(_170a){_170c=_170a.getContext();if(_170c){_170b=_170c.CurrentGroupID;}}return _170b;},_getMainViewName:function(){if(this._configurationProvider._mainViewName){return this._configurationProvider._mainViewName;}var _170d=Sage.Services.getService("ClientGroupContext"),_170e=-1,_170f=null;if(_170d){_170f=_170d.getContext();if(_170f){_170e=_170f.CurrentEntity;}}return _170e;},_getColumnSizeKey:function(_1710){var _1711=_1710.replace(/[\.\$]/g,"_"),id=this._listGrid.id+"_"+this._configuration.list.id+"_"+this.STORE_KEY_COLUMN_SIZE+_1711;return id;},_getGridSortKey:function(){return this._keyGen(this.STORE_KEY_SORT_INFO);},_getGridLayoutKey:function(){return this._keyGen(this.STORE_KEY_LAYOUT_INFO);},_getGridColumnToggleKey:function(){return this._keyGen(this.STORE_KEY_TOGGLE_INFO);},_getViewStateKey:function(){return this.STORE_KEY_VIEWSTATE;},_getStoreQueryKey:function(){var id=this.STORE_KEY_STORE_QUERY+this._getGroupID();return id;},_keyGen:function(_1712){var id=this._listGrid.id+_1712+this._configuration.list.id;return id;},_onListScroll:function(){this._onScroll(this._listGrid.scroller);},_onSummaryScroll:function(){this._onScroll(this._summaryGrid.scroller);},_onScroll:function(_1713){var _1714,_1715,count,lbl;if(_1713.rowCount>=this.RECORD_WARNING_SIZE){this._tbarOverflowLabel.domNode.style.display="block";}else{this._tbarOverflowLabel.domNode.style.display="none";}if(this._tbarLabel){count=_1713.rowCount;if(count<=0){_1714=0;_1715=0;count=0;}else{_1714=(_1713.firstVisibleRow===0)?1:_1713.firstVisibleRow+1;_1715=(_1713.lastVisibleRow>=_1713.rowCount)?_1713.rowCount:_1713.lastVisibleRow+1;}lbl=dojo.string.substitute("${0} ${1} - ${2} ${3} ${4}",[this.displayingText,_1714,_1715,this.ofText,count]);this._tbarLabel.set("label",lbl);}},_markDirty:function(_1716){this._unsavedDataLabel.set("style","display:inline");},_markClean:function(){this._unsavedDataLabel.set("style","display:none");},getTotalSelectionCount:function(){var _1717=0,sel;if(this._listMode==="list"){this._configuration.list.active=true;}if(!this._isConfigurationActiveForList()||!this._listGrid){return [];}sel=this._listGrid.selection;if(sel){_1717=sel.getSelectedCount();}return _1717;},getSelectionInfo:function(_1718){var _1719,_171a,_171b,mode,_171c,_171d,_171e,_171f,sels,_1720=[],i,_1721;if(this._listMode==="list"){this._configuration.list.active=true;}if(!this._isConfigurationActiveForList()||!this._listGrid){return [];}_1719=this._listGrid.rowCount||0;_171a=this.getTotalSelectionCount();_171b=this.id;mode="selection";_171c=[];_171d=Sage.Services.getService("ClientGroupContext");_171e=(_171d)?_171d.getContext().CurrentTableKeyField||"":"";if(this._configuration.hasCompositeKey){_171f=this._configuration.hasCompositeKey;}else{_171f=false;}sels=this._listGrid.selection.getSelected();_1720=[];for(i=0;i<sels.length;i++){if(sels[i]){var _1722={rn:0,id:sels[i][_171e]};if(_1718){_1722["entity"]=sels[i];}_171c.push(_1722);_1720.push(sels[i][_171e]);}}_1721={key:_171b,mode:mode,selectionCount:_171a,recordCount:_1719,sortDirection:"",sortField:"",keyField:_171e,hasCompositeKey:_171f,ranges:[],selections:_171c,selectedIds:_1720};return _1721;},requestConfiguration:function(){ready(lang.hitch(this,function(){if(this._configurationProvider){this._configurationProvider.requestConfiguration({success:lang.hitch(this,this._applyConfiguration),failure:lang.hitch(this,this._applyConfigurationFailed)});}}));},refreshView:function(){if(this._configuration.rebuildOnRefresh){this.requestConfiguration();}this.refreshList();dojo.publish("/listView/refresh",this);},refreshList:function(_1723){if(this._listMode!=="list"){this.refreshSummary();return;}if(!_1723){this._listGrid._refresh();}else{if(this._configuration._listId===_1723){this._listGrid._refresh();}}if(this._listGrid&&this._listGrid.selection){this._listGrid.selection.clear();}if(this._detailPane){this._detailPane.clear();}},refreshSummary:function(){if(this._hasConfigurationForSummary()&&(this._listMode!=="list")){this._summaryGrid._refresh();}},showHelp:function(){util.openHelp(this.helpTopicName);},refreshGrid:function(){this._listGrid.selection.clear();this.refreshList();this.refreshSummary();},showList:function(){var query,_1724,_1725,_1726,i,cMenu,_1727,_1728,store,key,_1729,_172a;this._listMode="list";if(!this._hasConfigurationForList()){return;}_1729=this._getViewStateKey();this._saveToLocalStorage(_1729,"list",this._getViewNS());this._ensureApplyFilterWasPublished(true);query=this._filterManager.createQuery();key=this._getStoreQueryKey();_1724=this._listGrid.queryOptions||{};_1724.httpMethodOverride=!!query;this._setSortInfo(this._configuration.list.store);if(this._configuration.list.rowsPerPage>0){this._listGrid.set("rowsPerPage",this._configuration.list.rowsPerPage);}this._listGrid._setStore(this._configuration.list.store);this._listGrid._setQuery(query,_1724);this._saveToLocalStorage(key,{store:this._configuration.list.store,query:query});if(this._listGrid.structure!==this._configuration.list.structure){this._setColumnSizes(this._configuration.list.structure);this._listGrid.set("structure",this._configuration.list.structure);this._doAutoFitColumns();this._updateStructureFromLocalStore();}this._listGrid._refresh(true);if(!this._isConfigurationActiveForList()){if(this._dataChangeWatchers.length>0){array.forEach(this._dataChangeWatchers,dojo.disconnect);this._dataChangeWatchers=[];}if(this._configuration.list.formatterScope&&(this._listGrid.formatterScope!==this._configuration.list.formatterScope)){this._listGrid.set("formatterScope",this._configuration.list.formatterScope);}if(this._configuration.rebuildMenus){_1725=this._listGrid.selectedRegionMenu.getChildren();for(i=0;i<_1725.length;i++){_1726=_1725[i];this._listGrid.selectedRegionMenu.removeChild(_1726);}}_1727=this._configuration.list.selectedRegionContextMenuItems||[];if(_1727.length>0){_1728=this._listGrid.selectedRegionMenu.getChildren();if(_1728.length!==_1727.length){cMenu=this._listGrid.selectedRegionMenu;for(i=0;i<_1727.length;i++){cMenu.addChild(_1727[i]);}if(this._configuration.list.onSelectedRegionContextMenu){if(this._contextConnects){array.forEach(this._contextConnects,dojo.disconnect);}this._contextConnects=[];this._contextConnects.push(dojo.connect(this._listGrid,"onRowContextMenu",this._configurationProvider,this._configuration.list.onSelectedRegionContextMenu));}}}store=this._listGrid.store;if(store&&store!==null){if(store.features.hasOwnProperty("dojo.data.api.Write")){this._dataChangeWatchers.push(dojo.connect(store,"onSet",this,function(_172b,_172c,_172d,_172e){if(_172d!==_172e){this._markDirty(_172b);}}));if(store.onDataReset){this._dataChangeWatchers.push(dojo.connect(store,"onDataReset",this,"_markClean"));}}}}this._configuration.list.active=true;this._gridContainer.selectChild(this._listGrid);this._setDetailPaneVisibility(this._shouldShowDetailPane(),false);this._updateToolbarItemVisibility();_172a=_16cf.byId("centerContent");},showSummary:function(){var _172f,query;this._listMode="summary";if(!this._hasConfigurationForSummary()){this._configuration.summary=this._configurationProvider._createConfigurationForSummary();}query=this._filterManager.createQuery();this._setSummarySortInfo(this._configuration.summary.store);this._summaryGrid.setStore(this._configuration.summary.store,query);this._summaryGrid.setStructure(this._configuration.summary.structure);dojo.connect(this._summaryGrid,"_onFetchComplete",this,lang.hitch(this,function(){this._summaryGrid.resize();}));if(this._listGrid.selection){this._listGrid.selection.clear();}if(!this._isConfigurationActiveForSummary()){_172f=this._getViewStateKey();this._saveToLocalStorage(_172f,"summary",this._getViewNS());if(this._configuration.summary.hasOwnProperty("rowHeight")){this._summaryGrid.set("rowHeight",this._configuration.summary.rowHeight);}if(this._configuration.summary.hasOwnProperty("rowsPerPage")){this._summaryGrid.set("rowsPerPage",this._configuration.summary.rowsPerPage);}if(this._configuration.summary.hasOwnProperty("formatterScope")){this._summaryGrid.set("formatterScope",this._configuration.summary.formatterScope);}this._summaryGrid.canSort=function(col){return false;};this._configuration.summary.active=true;}this._gridContainer.selectChild(this._summaryGrid);this._setDetailPaneVisibility(this._shouldShowDetailPane(),false);this._updateToolbarItemVisibility();},toggleDetail:function(){if(!this._hasConfigurationForDetail()){return;}this.detailVisible=!this.detailVisible;this._setDetailPaneVisibility(this._shouldShowDetailPane(),true);},onRowClick:function(index,row,grid){},onRowContextMenu:function(index,row,grid){},onSelected:function(index,row,grid){},onSelectionChanged:function(){},resolveProperty:function(_1730,_1731){var list=this._configuration&&this._configuration.list,_1732=list&&list.layout,_1733=(list&&list.tableAliases)||{};if(_1732){var alias=this._getAlias(_1730,_1732,_1733,false);if(alias){return alias;}else{alias=this._getAlias(_1730,_1732,_1733,true);if(alias){return alias;}else{return _1730;}}}if(this._configuration&&typeof (this._configuration.resolveProperty)==="function"){return this._configuration.resolveProperty(_1730,_1731);}return _1730;},_getAlias:function(_1734,_1735,_1736,_1737){var i,item,table,_1738,_1739,_173a;for(i=0;i<_1735.length;i++){item=_1735[i];_173a=item.propertyPath;if(_1737){_1739=item.propertyPath&&item.propertyPath.split(".");if(_1739.length===2){_173a=_1739[1];}}if(_173a===_1734){if(/^[a-z]\d+_/i.test(item.alias)){return item.alias;}table=item.dataPath&&item.dataPath.split(":")[0];_1738=table&&_1736[table.toUpperCase()];if(_1738){return _1738+"."+item.alias;}return item.alias;}}return null;}});return _16d1;});},"Sage/UI/Filters/FilterManager":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/string","dojo/date","dojo/date/locale","Sage/Utility","Sage/Utility/Filters"],function(lang,_173b,array,_173c,_173d,_173e,_173f,_1740){var _1741=_173b("Sage.UI.Filters.FilterManager",null,{_connects:null,_subscribes:null,_owner:null,_timeout:null,_applied:null,_definitionSet:null,refreshBufferDelay:500,filterGroup:"default",owner:null,nullName:"SLX_NULL",emptyName:"SLX_EMPTY",constructor:function(_1742){lang.mixin(this,_1742);this._applied={};this._definitionSet={};var _1743=_173f.getValue(window,"Sage.UI.DataStore.Filters"),_1744=null,_1745=null;if(_1743&&_1743[this.filterGroup]){_1744=_1743[this.filterGroup].applied;_1745=_1743[this.filterGroup].definitionSet;if(_1744){this._applied=_1744;}if(_1745){this._definitionSet=_1745;}}this._connects=[];this._subscribes=[];this._subscribes.push(dojo.subscribe(_173c.substitute("/ui/filters/${0}/change",[this.filterGroup]),this,this._onChange),dojo.subscribe(_173c.substitute("/ui/filters/${0}/clear",[this.filterGroup]),this,this._onClear),dojo.subscribe(_173c.substitute("/ui/filters/${0}/apply",[this.filterGroup]),this,this._onApply));},destroy:function(){array.forEach(this._connects,function(_1746){_1746.remove();});array.forEach(this._subscribes,function(_1747){_1747.remove();});this.uninitialize();},uninitialize:function(){},"set":function(name,value){this["_"+name]=value;},"get":function(name){return this["_"+name];},_onClear:function(_1748,_1749){var key=_1748&&_1748.$key;if(key&&this._applied[key]){delete this._applied[key];}else{this._applied={};}},getAppliedFilterCount:function(){var _174a,_174b,_174c,count=0;for(_174a in this._applied){if(this._applied.hasOwnProperty(_174a)){_174c=this._applied[_174a];for(_174b in _174c){if(_174c.hasOwnProperty(_174b)){count=count+1;}}}}return count;},_onApply:function(_174d,_174e,_174f){this._applied=_174d||{};this._definitionSet=_174e||{};},_onChange:function(_1750,name,value,_1751){if(this._timeout){clearTimeout(this._timeout);}var key=_1750&&_1750.$key,_1752=null;if(key){this._definitionSet[key]=_1750;this._applied[key]=this._applied[key]||{};_1752=this._applied[key];if((_1750.details.userLookupFilter)||(_1750.details.lookupFilter)){_1752["value"]=value;}else{if(value!==false){_1752[name]=value;}else{delete _1752[name];}}}this._timeout=setTimeout(lang.hitch(this,this._onTimeout),this.refreshBufferDelay);},_onTimeout:function(){dojo.publish(_173c.substitute("/ui/filters/${0}/refresh",[this.filterGroup]),[this._applied,this._definitionSet,this]);},_escapeString:function(_1753,quote){quote=quote||"\"";return _1753.replace(quote,quote+quote);},_transformValue:function(type,value,quote){if(value){quote=quote||"\"";if(type==="string"||type==="key"||type==="enum"||type==="boolean"||type==="unknown"){return quote+this._escapeString(value,quote)+quote;}if(type==="date"){quote="@";return quote+this._transformDate(value)+quote;}}return value;},_transformDate:function(value){var today=new Date(Date.now()),_1754;if(this.specialDates.hasOwnProperty(value)){return _173f.Convert.toIsoStringFromDate(this.specialDates[value](today));}else{_1754=_173e.parse(value);if(_1754){return _173f.Convert.toIsoStringFromDate(_1754);}else{return value;}}},specialDates:{":today":function(today){today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":todaystart":function(today){today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":todayend":function(today){today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":yesterday":function(today){today.setDate(today.getDate()-1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":yesterdaystart":function(today){today.setDate(today.getDate()-1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":yesterdayend":function(today){today.setDate(today.getDate()-1);today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":tomorrow":function(today){today.setDate(today.getDate()+1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":tomorrowstart":function(today){today.setDate(today.getDate()+1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":tomorrowend":function(today){today.setDate(today.getDate()+1);today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":thisweekstart":function(today){today.setDate(today.getDate()-today.getDay());today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":thisweekend":function(today){today.setDate(today.getDate()+(6-today.getDay()));today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":thismonthstart":function(today){today.setDate(1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":thismonthend":function(today){today.setDate(_173d.getDaysInMonth(today));today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":thisyearstart":function(today){today.setDate(1);today.setMonth(0);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":thisyearend":function(today){today.setDate(31);today.setMonth(11);today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":thisquarterstart":function(today){var month=today.getMonth(),mod=month%3;today.setMonth(month-mod);today.setDate(1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":thisquarterend":function(today){var month=today.getMonth(),mod=2-(month%3);today.setMonth(month+mod);today.setDate(_173d.getDaysInMonth(today));today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":nextweekstart":function(today){today.setDate(today.getDate()+(7-today.getDay()));today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":nextweekend":function(today){today.setDate(today.getDate()+(7-today.getDay())+6);today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":nextmonthstart":function(today){today.setMonth(today.getMonth()+1);today.setDate(1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":nextmonthend":function(today){today.setMonth(today.getMonth()+1);today.setDate(1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":nextyearstart":function(today){today.setFullYear(today.getFullYear()+1);today.setMonth(0);today.setDate(1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":nextyearend":function(today){today.setFullYear(today.getFullYear()+1);today.setMonth(11);today.setDate(31);today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":nextquarterstart":function(today){var month=today.getMonth(),mod=2-(month%3);today.setMonth(month+mod+1);today.setDate(1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":nextquarterend":function(today){var month=today.getMonth(),mod=2-(month%3);today.setMonth(month+mod+3);today.setDate(_173d.getDaysInMonth(today));today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":lastweekstart":function(today){today.setDate(today.getDate()-today.getDay()-7);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":lastweekend":function(today){today.setDate(today.getDate()-today.getDay()-1);today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":lastmonthstart":function(today){today.setMonth(today.getMonth()-1);today.setDate(1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":lastmonthend":function(today){today.setMonth(today.getMonth()-1);today.setDate(_173d.getDaysInMonth(today));today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":lastyearstart":function(today){today.setFullYear(today.getFullYear()-1);today.setMonth(0);today.setDate(1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":lastyearend":function(today){today.setFullYear(today.getFullYear()-1);today.setMonth(11);today.setDate(31);today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":lastquarterstart":function(today){var month=today.getMonth(),mod=month%3;today.setMonth(month-mod-3);today.setDate(1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":lastquarterend":function(today){var month=today.getMonth(),mod=month%3;today.setMonth(month-mod-1);today.setDate(_173d.getDaysInMonth(today));today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":beforelastyearend":function(today){today.setFullYear(today.getFullYear()-2);today.setMonth(0);today.setDate(1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;}},resolveProperty:function(_1755,_1756){if(this._owner&&this._owner.resolveProperty){return this._owner.resolveProperty(_1755,_1756);}return _1755;},resolveTimelessProperty:function(_1757){if(this._owner){if(this._owner._configuration){if(this._owner._configuration.getTimelessProperty){return this._owner._configuration.getTimelessProperty(_1757);}}}return false;},resolveDataType:function(_1758){return _1740.resolveDataType(_1758);},createRangeFragment:function(_1759,_175a,_175b,_175c){var _175d=this.resolveDataType(_1759.propertyDataTypeId),_175e=this.resolveProperty(_175a,_175c),_175f=_1759.details.rangeFilter,_1760=false,_1761=[],_1762=[],_1763="and",sub=_173c.substitute,name=null,range=null,_1764=null,_1765=function(p){return p;},_1766=[],_1767=_175f.characters>0?_175f.characters:1;if(_175d==="string"){_1765=function(p){return sub("substring(${0}, 1, ${1})",[p,_1767]);};}for(name in _175b){if(_175b.hasOwnProperty(name)){range=_175b[name];if(typeof range==="undefined"||range===null){continue;}if(_175d==="date"){_1760=this.resolveTimelessProperty(_175e);}if(_1760){var _1768=new Date(Date.now());var _1769=new Date(Date.now());var quote="@";var _176a="";var _176b="";if(range.lower===range.upper){_1761.push(this._transformValue(_175d,range.lower));}else{if(this.specialDates.hasOwnProperty(range.lower)){_1768=this.specialDates[range.lower](_1768);_1768.setHours(0);_1768.setMinutes(0);_1768.setSeconds(0);_176a=quote+_173f.Convert.toIsoStringFromDateNonUTC(_1768)+quote;}if(this.specialDates.hasOwnProperty(range.upper)){_1769=this.specialDates[range.upper](_1769);_1769.setHours(23);_1769.setMinutes(59);_1769.setSeconds(59);_176b=quote+_173f.Convert.toIsoStringFromDateNonUTC(_1769)+quote;}_1764=[_1760,_1765(_175e),this._transformValue(_175d,range.lower),this._transformValue(_175d,range.upper),_176a,_176b];if(range.lower===null){_1762.push(sub("((${0} eq false and ${1} le ${3}) or (${0} eq true and ${1} le ${4}))",_1764));}else{if(range.upper===null){_1762.push(sub("((${0} eq false and ${1} ge ${2}) or (${0} eq true and ${1} le ${5}))",_1764));}else{_1762.push(sub("((${0} eq false and ${1} between ${2} and ${3}) or (${0} eq true and ${1} between ${4} and ${5}))",_1764));}}_1763="or";}}else{if(range.lower===range.upper){if(range.lower!==null&&typeof range.lower!=="undefined"){_1761.push(this._transformValue(_175d,range.lower));}}else{_1764=[_1765(_175e),this._transformValue(_175d,range.lower),this._transformValue(_175d,range.upper)];if(range.lower===null){_1762.push(sub("${0} le ${2}",_1764));}else{if(range.upper===null){_1762.push(sub("${0} ge ${1}",_1764));}else{_1762.push(sub("${0} between ${1} and ${2}",_1764));}}_1763="or";}}}}if(_1761.length>0){if(_175d==="string"){array.forEach(_1761,function(value){if(value&&value.length>2){_1766.push(value.substring(0,_1767+1)+"\"");}});_1761=_1766;}_1762.push(sub("${0} in (${1})",[_1765(_175e),_1761.join(",")]));}return _1762.length>0?"("+_1762.join(") "+_1763+" (")+")":false;},createDistinctFragment:function(_176c,_176d,_176e,_176f){var _1770=this.resolveDataType(_176c.propertyDataTypeId),sub=_173c.substitute,name=null,_1771=[],_1772=null,_1773=false,_1774=this.resolveProperty(_176d,_176f);for(name in _176e){if(_176e.hasOwnProperty(name)){if(name===this.nullName){_1772=sub("${0} eq null",[_1774]);}else{if(name===this.emptyName){_1771.push("''");}else{_1771.push(this._transformValue(_1770,_176e[name]));}}}}if(_1771.length>0){if(_176c.$key=="HasFilter"&&_176d=="filters.filterType"){if(_1771.length>0){_1773=sub("${0} not in (${1})",[_1774,_1771.join(",")]);}}else{_1773=sub("${0} in (${1})",[_1774,_1771.join(",")]);}}if(_1772&&_1771.length>0){_1773=sub("(${0} or ${1})",[_1773,_1772]);}else{if(_1772){_1773=_1772;}}return _1773;},createLookupFragment:function(_1775,_1776,_1777,_1778){var _1779=this.resolveDataType(_1775.propertyDataTypeId),_177a,value="",prop=this.resolveProperty(_1776,_1778),_177b="";if(_1777.hasOwnProperty("value")){_177a=_1777["value"].operator;value=_1777["value"].value;}if((value==="")||(value===null)){return false;}if(typeof value==="string"){prop="upper("+prop+")";value=value.toUpperCase();}if(_1775.filterName=="Display Name"||_1775.filterName=="Entity Name"){_1779="string";}_177b=_173c.substitute("${0} ${1}",[prop,this._transformLookupOperator(_177a,value,_1779)]);return _177b;},_transformLookupOperator:function(_177c,value,_177d){var lhs,rhs="${0}";switch(_177c){case "Equal":lhs="eq";break;case "NotEqual":lhs="ne";break;case "LessThan":lhs="lt";break;case "LessThanEqual":lhs="le";break;case "GreaterThan":lhs="gt";break;case "GreaterThanEqual":lhs="ge";break;case "StartsWith":lhs="like";rhs="${0}%";break;case "EndsWith":lhs="like";rhs="%${0}";break;case "Contains":lhs="like";rhs="%${0}%";break;default:lhs="eq";break;}if(_177d==="string"||_177d==="key"){rhs="\""+rhs+"\"";}rhs=_173c.substitute(rhs,[value]);return _173c.substitute("${0} ${1}",[lhs,rhs]);},createQuery:function(){var _177e=[],key,_177f,_1780,_1781,_1782,_1783,_1784;for(key in this._applied){if(this._applied.hasOwnProperty(key)){_177f=this._applied[key];_1780=this._definitionSet[key];_1781=_1780.propertyName;_1782=_1780.details;_1784=_1780.dataPath;if(_1782.rangeFilter){_1783=this.createRangeFragment(_1780,_1781,_177f,_1784);}else{if(_1782.distinctFilter){_1783=this.createDistinctFragment(_1780,_1781,_177f,_1784);}else{if((_1782.userLookupFilter)||(_1782.lookupFilter)){_1783=this.createLookupFragment(_1780,_1781,_177f,_1784);}}}if(_1783){_177e.push(_1783);}}}return _177e.length>0?"("+_177e.join(") and (")+")":false;},createEntityManagerValueSet:function(){var _1785=[],_1786,_1787,_1788,_1789,_178a,name,key;for(key in this._applied){if(this._applied.hasOwnProperty(key)){_1786=this._applied[key];_1787=this._definitionSet[key];_1788=_1787.details;_1789=(_1788.rangeFilter&&"rangeValues")||(_1788.distinctFilter&&"distinctValues")||(_1788.userLookupFilter&&"lookupValues");_178a=null;var obj=[];switch(_1789){case "rangeValues":obj=[];for(name in _1786){if(_1786.hasOwnProperty(name)){obj.push(_1786[name]);}}_178a={"id":_1787.$key};_178a["distinctValues"]=[];_178a["lookupValues"]=[];_178a["rangeValues"]=obj;break;case "distinctValues":for(name in _1786){obj=[];for(name in _1786){if(_1786.hasOwnProperty(name)){obj.push(_1786[name]);}}_178a={"id":_1787.$key};_178a["distinctValues"]=obj;_178a["lookupValues"]=[];_178a["rangeValues"]=[];}break;case "lookupValues":for(name in _1786){obj=[];for(name in _1786){if(_1786.hasOwnProperty(name)){obj.push(_1786[name]);}}_178a={"id":_1787.$key};_178a["distinctValues"]=[];_178a["lookupValues"]=obj;_178a["rangeValues"]=[];}break;default:break;}if(_178a!==null){_1785.push(_178a);}}}return _1785;},createValueSet:function(){var _178b=[],_178c,_178d,_178e,_178f,_1790,name,key;for(key in this._applied){if(this._applied.hasOwnProperty(key)){_178c=this._applied[key];_178d=this._definitionSet[key];_178e=_178d.details;_178f=(_178e.rangeFilter&&"rangeFilter")||(_178e.distinctFilter&&"distinctFilter")||(_178e.userLookupFilter&&"lookupFilter");_1790={"filterId":_178d.$key,"filterName":_178d.filterName,"appliedValues":[],"operator":null};switch(_178f){case "rangeFilter":for(name in _178c){if(_178c.hasOwnProperty(name)){_1790.appliedValues.push(_178c[name]&&_178c[name].rangeId);}}break;case "distinctFilter":for(name in _178c){if(_178c.hasOwnProperty(name)){_1790.appliedValues.push(name);}}break;case "lookupFilter":for(name in _178c){if(_178c.hasOwnProperty(name)){if(_178c[name].hasOwnProperty("operator")){_1790.appliedValues.push(_178c[name]);_1790.operator=_178c[name].operator;}}}break;default:break;}_178b.push(_1790);}}return _178b;}});return _1741;});},"Sage/Utility/Filters":function(){define(["dojo/_base/lang","Sage/Data/SDataServiceRegistry","dojo/json"],function(lang,_1791,json){Sage.namespace("Utility.Filters");lang.mixin(Sage.Utility.Filters,{getHiddenFiltersKey:function(){var _1792=Sage.Services.getService("ClientGroupContext"),_1793=_1792&&_1792.getContext(),_1794="hidden_filters_",_1795=_1793&&_1793.CurrentGroupID,key="";if(_1795){_1795=_1795.toLowerCase();_1795=_1795.replace(/ /g,"_").replace(/'/g,"_");key=_1794+_1795;}return key;},setHiddenFilters:function(key,value){var _1796,entry,_1797;_1796=_1791.getSDataService("system");entry={"$name":"setHiddenFilters","request":{"key":key,"value":value}};_1797=new Sage.SData.Client.SDataServiceOperationRequest(_1796);_1797.setOperationName("setHiddenFilters");_1797.execute(entry,{});sessionStorage.removeItem(key);},getHiddenFilters:function(key,_1798,_1799){var _179a,_179b,entry,data;data=sessionStorage.getItem(key);if(data===null){_179a=_1791.getSDataService("system");entry={"$name":"getHiddenFilters","request":{"key":key}};_179b=new Sage.SData.Client.SDataServiceOperationRequest(_179a).setOperationName("getHiddenFilters");_179b.execute(entry,{success:lang.hitch(this,this._getHiddenFiltersSuccess,_1798,key),failure:_1799});}else{_1798.call(this,json.parse(data));}},_getHiddenFiltersSuccess:function(_179c,key,data){if(_179c){sessionStorage.setItem(key,json.stringify(data));_179c.call(this,data);}},resolveDataType:function(_179d){switch(_179d){case "47f90249-e4c8-4564-9ae6-e1fa9904f8b8":case "6b0b3d51-0728-4b67-9473-52836a81da53":case "2596d57d-89d6-4b72-9036-b18c64c5324c":case "f37c635c-9fbf-40d8-98d5-750a54a3cca1":return "numeric";case "ccc0f01d-7ba5-408e-8526-a3f942354b3a":case "76c537a8-8b08-4b35-84cf-fa95c6c133b0":case "b71918bf-fac1-4b62-9ed5-0b0294bc9900":case "517d5e69-9efa-4d0a-8e7a-1c7691f921ba":return "string";case "8edd8fce-2be5-4d3d-bedd-ea667e78a8af":return "enum";case "1f08f2eb-87c8-443b-a7c2-a51f590923f5":return "date";case "30053f5a-8d40-4db1-b185-1e4128eb26cc":return "key";case "92432b4d-8206-4a96-ba7b-e4cbd374f148":case "95ca9d52-6f0b-4a96-bd40-43583f41faf8":return "boolean";case "f4ca6023-9f5f-4e41-8571-50ba94e8f233":return "binary";default:return "unknown";}},resolveDataTypeQB:function(_179e){var _179f;switch(_179e){case "47f90249-e4c8-4564-9ae6-e1fa9904f8b8":case "6b0b3d51-0728-4b67-9473-52836a81da53":_179f="Integer";break;case "2596d57d-89d6-4b72-9036-b18c64c5324c":case "f37c635c-9fbf-40d8-98d5-750a54a3cca1":_179f="Decimal";break;case "ccc0f01d-7ba5-408e-8526-a3f942354b3a":case "76c537a8-8b08-4b35-84cf-fa95c6c133b0":case "b71918bf-fac1-4b62-9ed5-0b0294bc9900":case "517d5e69-9efa-4d0a-8e7a-1c7691f921ba":_179f="String";break;case "1f08f2eb-87c8-443b-a7c2-a51f590923f5":_179f="Date/Time";break;case "f4ca6023-9f5f-4e41-8571-50ba94e8f233":_179f="Memo/Blob";break;default:_179f="String";}return _179f;}});return Sage.Utility.Filters;});},"Sage/UI/_DetailPane":function(){define(["dijit/_Widget","dojo/_base/declare"],function(_17a0,_17a1){var _17a2=_17a1("Sage.UI._DetailPane",[_17a0],{constructor:function(){},_applyConfiguration:function(_17a3){this._configuration=_17a3;},_setConfigurationAttr:function(_17a4){this._applyConfiguration(_17a4);},_setOwnerAttr:function(owner){if(this._owner===owner){return;}if(this._owner){throw new Error("Sage.UI._DetailPane can only be bound to a single Sage.UI.ListPanel.");}this._owner=owner;this.connect(this._owner,"onRowClick",this._onRowClick);this.connect(this._owner,"onSelected",this._onSelected);},_getOwnerAttr:function(){return this._owner;},_onRowClick:function(index,row,grid){},_onSelected:function(index,row,grid){}});return _17a2;});},"Sage/UI/Grid/Plugins/ShowHideColumns":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojox/grid/enhanced/_Plugin","dojox/grid/EnhancedGrid","dijit/Destroyable","dijit/Menu","dijit/CheckedMenuItem","dojo/on","dojo/topic"],function(_17a5,array,lang,_17a6,_17a7,_17a8,Menu,_17a9,on,topic){var _17aa=_17a5("Sage.UI.Grid.Plugins.ShowHideColumns",[_17a6,_17a8],{name:"showHideColumns",privates:{},hideQueue:null,constructor:function(){this.hideQueue=[];this.inherited(arguments);},onStartUp:function(){var menu=new Menu(),_17ab;menu.startup();this.own(on(menu,"open",lang.hitch(this,function(){if(this.grid.headerMenu){this.grid.headerMenu.destroyDescendants();this.hideQueue=[];}array.forEach(this.grid.layout.cells,function(cell){_17ab=new _17a9({label:cell.name||"",checked:!cell.hidden});this.own(on(_17ab,"click",lang.hitch({plugin:this,item:_17ab,cell:cell},function(){this.plugin.hideQueue.push(this.cell);this.item.set("checked",!this.item.checked);})));this.grid.headerMenu.addChild(_17ab);},this);})));this.own(on(menu,"blur",lang.hitch(this,function(){setTimeout(lang.hitch(this,function(){array.forEach(this.hideQueue,function(item){this.grid.layout.setColumnVisibility(item.index,item.hidden);topic.publish("/sage/ui/grid/columnToggle/"+this.grid.id,item);},this);topic.publish("/sage/ui/grid/columnsToggled/"+this.grid.id);this.hideQueue=[];},100));})));this.grid.set("headerMenu",menu);}});_17a7.registerPlugin(_17aa);return _17aa;});},"Sage/UI/TitleContentPane":function(){define(["dijit/MenuSeparator","dijit/Menu","dijit/layout/ContentPane","dijit/MenuItem","dijit/PopupMenuItem","dijit/MenuBar","dijit/MenuBarItem","Sage/UI/PopupMenuBarItem","dojox/grid/DataGrid","Sage/UI/OrientableMenuBar","Sage/UI/GridMenuItem","Sage/UI/ImageButton","Sage/Utility","Sage/Groups/GroupContextService","Sage/Data/BaseSDataStore","Sage/UI/GroupsTitlePaneConfigProvider","dojo/dom-style","dojo/_base/array","dojo/dom-class","dojo/_base/declare","dojo/_base/lang"],function(_17ac,Menu,_17ad,_17ae,_17af,_17b0,_17b1,_17b2,_17b3,_17b4,_17b5,_17b6,_17b7,_17b8,_17b9,_17ba,_17bb,array,_17bc,_17bd,lang){var _17be=_17bd("Sage.UI.TitleContentPane",_17ad,{started:false,_configurationProvider:null,_configuration:{},_titleFmtString:"${0}",_groupMenuBar:false,_groupMenu:false,title:false,tabConnects:null,startup:function(){this.inherited(arguments);var _17bf,mode=_17b7.getModeId();if(typeof mode==="string"&&mode.toLowerCase()==="list"){_17bf=dojo.subscribe("/listView/applyConfiguration",lang.hitch(this,function(){dojo.disconnect(_17bf);this._doStartup();}));}else{this._doStartup();}},_doStartup:function(){if(this.started){return;}this.tabConnects=[];if(this._configurationProvider===null){var eCtx=Sage.Services.getService("ClientEntityContext");if(eCtx){var c=eCtx.getContext();if(c["IsGroupsBasedEntity"]){this._configurationProvider=new _17ba();}}}if(this._configurationProvider!==null){var _17c0=dojo.create("div",{"id":"GroupMenuSpace","class":"GroupButton"});dojo.place(_17c0,this.domNode);dojo.connect(this._configurationProvider,"onTitlePaneConfigurationChange",this,"resetConfiguration");this._configurationProvider.requestTitlePaneConfiguration({scope:this,success:function(_17c1){this._setConfiguration(_17c1);this.started=true;}});}else{this._hideEmptyTabBar();}},_resize:function(){var tabs=dijit.byId("GroupTabs");tabs.resize();},_setConfiguration:function(_17c2){this._configuration=_17c2;if(this._configuration){if(this._configuration.menu){this._addMenu(this._configuration.menu);}if(this._configuration.tabs){this._showTabBar();this._addTabs(this._configuration.tabs);}else{this._hideEmptyTabBar();}if(this._configuration.titleFmtString){this._titleFmtString=this._configuration.titleFmtString;}}},resetConfiguration:function(){var tabs,i,len,_17c3,child;tabs=dijit.byId("GroupTabs");if(tabs){array.forEach(this.tabConnects,function(_17c4){dojo.disconnect(_17c4);});this.tabConnects=[];try{_17c3=tabs.getChildren();len=_17c3.length;for(i=0;i<len;i++){child=_17c3[i];tabs.removeChild(child);}tabs.destroyDescendants();}catch(err){console.error(err);}}this.started=false;this._doStartup();},_setTitleAttr:function(title){dojo.html.set(dojo.byId("PageTitleText"),dojo.string.substitute(this._titleFmtString,[title]));},_setConfigurationProviderAttr:function(_17c5){this._configurationProvider=_17c5;this._doStartup();this._resize();},_addMenu:function(_17c6){if(_17c6){if(this._groupMenu){return;}this._groupMenuBar=new _17b4({id:"groupMenuBar",title:_17c6.tooltip,orientation:{"BR":"TR","BL":"TL"},baseClass:"group-menu-bar"});_17bc.remove(this._groupMenuBar.containerNode,"dijitMenuBar");this._groupMenu=new Menu({id:"groupMenu",style:{width:_17c6.width||"350px"}});this._addItemsToMenu(this._groupMenu,_17c6.items);this._groupMenuBar.addChild(new _17b2({label:_17c6.text||"...",icon:_17c6.img||this._blankGif,imageClass:_17c6.imageClass||"",baseClass:"group-menu-button",id:_17c6.id||Sage.guid("groupMenuItem"),popup:this._groupMenu,style:"width:80px"}));this._groupMenuBar.placeAt("GroupsWrapper","before");this._groupMenuBar.startup();var svc=Sage.Services.getService("RoleSecurityService");if(svc.hasAccess("Entities/Group/Add")){var _17c7=new _17b6({id:"addGroupButton",imageClass:"fa fa-plus",title:_17c6.addGroupTooltip,onClick:function(){Sage.Groups.GroupManager.CreateGroup();}});_17c7.placeAt("GroupsWrapper","before");_17c7.startup();}}},_addItemsToMenu:function(menu,items){var len=items.length,itm;for(var i=0;i<len;i++){itm=items[i];if(itm.fn){menu.addChild(itm.fn.call(itm.scope||this));}else{if(itm.items&&itm.items.length>0){var _17c8=new Menu({parentMenu:menu,id:itm.id+"_submenu"});this._addItemsToMenu(_17c8,itm.items);menu.addChild(new _17ae({label:itm.text||"...",icon:itm.img||this._blankGif,title:itm.tooltip||"",popup:_17c8,id:itm.id}));}else{if(itm.isSeparator||itm.text==="-"){menu.addChild(new _17ac());}else{menu.addChild(new _17ae({label:itm.text||"...",icon:itm.img||this._blankGif,title:itm.tooltip||"",id:itm.id,onClick:itm.onClick||function(){document.location=itm.href;}}));}}}}},_addTabs:function(_17c9){try{var _17ca={selectedTabId:"",tabKeyProperty:"$key",tabNameProperty:"$descriptor",tabGroupNameProperty:"name",tabFamilyProperty:"family",tabHiddenProperty:false};dojo.mixin(_17ca,_17c9);if(_17ca){var tabs=dijit.byId("GroupTabs");tabs.startup();var blank=this._blankGif;var _17cb=typeof _17ca.onTabClose==="function";var _17cc;if(_17ca.staticTabs){var len=_17ca.staticTabs.length;for(var i=0;i<len;i++){var t=_17ca.staticTabs[i];var tabId=t[_17ca.tabKeyProperty];var _17cd=dijit.byId(tabId);var sTab=_17cd||new _17ad({id:tabId,title:t[_17ca.tabNameProperty],closable:true,dataItem:t,onClose:function(){return false;}});var child=tabs.addChild(sTab);if(_17ca.selectedTabId===tabId){tabs.selectChild(sTab);}if(_17ca.showTabContextMenus&&t["contextMenuItems"]){_17cc=t["contextMenuItems"];for(var x=0;x<_17cc.length;x++){var mItem=_17cc[x];if(mItem.isspacer||mItem.text===""){tabs.addTabMenuItem(tabId,new _17ac());}else{var href=mItem.href;if(href.indexOf("javascript:")<0){href=dojo.string.substitute("javascript:${0}('${1}','${2}','${3}');",[href,t[_17ca.tabKeyProperty],t[_17ca.tabNameProperty],t[_17ca.tabFamilyProperty]]);}else{var _17ce={"groupId":t[_17ca.tabKeyProperty],"groupName":t[_17ca.tabNameProperty],"family":t[_17ca.tabFamilyProperty]};href=dojo.string.substitute(href,_17ce);}var _17cf=t[_17ca.tabKeyProperty]+"_MENU_"+x;var _17d0=new _17ae({id:_17cf,label:mItem.text||"...",icon:mItem.img||blank,title:mItem.tooltip||"",ref:href,onClick:function(){if(this.ref!==""){try{window.location.href=this.ref;}catch(e){}}}});tabs.addTabMenuItem(tabId,_17d0);}}}}}if(_17ca.lookupButton){_17ca.lookupButton.startup();dojo.place(_17ca.lookupButton.domNode,tabs.domNode,"before");}var _17d1=_17b7.getClientContextByKey("userID");var _17d2={onComplete:function(data){var _17d3,i,_17d4=[],tabId,_17d5=false;for(i=0;i<data.length;i++){_17d3=data[i];if(_17ca.tabHiddenProperty&&_17d3[_17ca.tabHiddenProperty]===true){continue;}tabId=_17d3[_17ca.tabKeyProperty];_17d5=_17ca.selectedTabId===_17d3[_17ca.tabKeyProperty];var aTab=dijit.byId(tabId)||new _17ad({id:tabId,title:_17d3[_17ca.tabNameProperty],closable:_17cb,dataItem:_17d3,selected:_17d5});tabs.addChild(aTab);if(_17d5){tabs.selectChild(aTab);}(function menuFunction(_17d6,_17d7){var tabId=_17d6[_17ca.tabKeyProperty];return function(){var _17d8=false,_17d9=false,_17da=_17d7.trim()==="ADMIN";if(_17d6.userId!==_17d7){_17d9=true;}else{_17d9=false;}if(Sage.UI.DataStore.ContextMenus&&Sage.UI.DataStore.ContextMenus.groupTabContextMenu){var _17db=Sage.UI.DataStore.ContextMenus.groupTabContextMenu.items;for(var mi=0;mi<_17db.length;mi++){var mItem=_17db[mi];if((mItem.id==="gtcDelete"&&_17d9&&!_17da)||(mItem.id==="gtcShare"&&_17d9)){_17d8=true;}else{_17d8=false;}if(mItem.isspacer||mItem.text===""){tabs.addTabMenuItem(tabId,new _17ac());}else{var href=mItem.href;if(href.indexOf("javascript:")<0){href=dojo.string.substitute("javascript:${0}('${1}','${2}','${3}');",[href,_17d6[_17ca.tabKeyProperty],(_17d6[_17ca.tabGroupNameProperty]||_17d6[_17ca.tabNameProperty]),_17d6[_17ca.tabFamilyProperty]]);}else{var _17dc={"groupId":_17d6[_17ca.tabKeyProperty],"groupName":_17d6[_17ca.tabNameProperty]||_17d6[_17ca.tabGroupNameProperty],"family":_17d6[_17ca.tabFamilyProperty]||""};href=dojo.string.substitute(href,_17dc);}tabs.addTabMenuItem(tabId,new _17ae({id:tabId+"_tab_"+mi,label:mItem.text||"...",icon:mItem.img||blank,title:mItem.tooltip||"",ref:href,disabled:_17d8,onClick:function(){if(this.ref!==""){try{window.location.href=this.ref;}catch(e){}}}}));}}}};})(_17d3,_17d1)();}}};dojo.mixin(_17d2,_17ca.fetchParams);if(_17ca.store){_17ca.store.fetch(_17d2);}if(_17ca.onTabClick){this.tabConnects.push(dojo.connect(tabs,"onClick",_17ca,"onTabClick",true));}if(_17ca.onTabSelect){this.tabConnects.push(dojo.connect(tabs,"selectChild",_17ca,"onTabSelect"));}if(_17cb){this.tabConnects.push(dojo.connect(tabs,"closeChild",_17ca,"onTabClose"));}}else{this._hideEmptyTabBar();}}catch(err){console.error(err);}},_hideEmptyTabBar:function(){var tabs=dijit.byId("GroupTabs");if(tabs){if(dojo.byId("localTitle").style.display!="none"){_17bb.set(this.domNode,"height","37px");}else{_17bb.set(this.domNode,"display","none");}this.getParent().layout();tabs.set("style","display:none");}},_showTabBar:function(){var tabs=dijit.byId("GroupTabs");if(tabs){if(dojo.byId("localTitle").style.display!="none"){_17bb.set(this.domNode,"height","67px");}else{_17bb.set(this.domNode,"display","none");}tabs.domNode.style.display="block";this.getParent().layout();}}});return _17be;});},"Sage/UI/PopupMenuBarItem":function(){define(["Sage/UI/MenuBarItem","Sage/UI/PopupMenuItem","dojo/_base/declare"],function(_17dd,_17de,_17df){return _17df("Sage.UI.PopupMenuBarItem",[_17de,_17dd],{});});},"Sage/UI/MenuBarItem":function(){define(["Sage/UI/MenuItem","dojo/text!../templates/MenuBarItem.html","dojo/_base/declare"],function(_17e0,_17e1,_17e2){var _17e3=_17e2("Sage.UI.MenuBarItem",_17e0,{iconClass:"",_setIconClassAttr:{node:"iconNode",type:"class"},label:"",_setLabelAttr:{node:"containerNode",type:"innerHTML"},icon:"",_setIconAttr:{node:"iconNode",type:"attribute",attribute:"src"},imageClass:"noIcon",iconStyle:"",_setIconStyleAttr:{node:"iconNode",type:"style"},templateString:_17e1});return _17e3;});},"Sage/UI/MenuItem":function(){define(["dijit/MenuItem","dijit/_Widget","dojo/dom-style","dojo/_base/declare","dojo/text!../templates/MenuItem.html"],function(_17e4,_17e5,_17e6,_17e7,_17e8){var _17e9=_17e7("Sage.UI.MenuItem",_17e4,{templateString:_17e8,iconClass:"",_setIconClassAttr:{node:"iconNode",type:"class"},label:"",_setLabelAttr:{node:"containerNode",type:"innerHTML"},icon:"",_setIconAttr:{node:"iconNode",type:"attribute",attribute:"src"},imageClass:"noIcon",iconStyle:"",_setIconStyleAttr:{node:"iconNode",type:"style"},ref:"",postMixInProperties:function(){if(this.hasImageClass()&&this.hasIcon()){this.icon=this._blankGif;}else{this.icon=this.icon||this._blankGif;}this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(this.hasImageClass()){this.set("icon",this._blankGif);_17e6.set(this.iconNode,"display","none");}else{_17e6.set(this.iconNodeSprite,"display","none");}},hasImageClass:function(){if(this.imageClass&&this.imageClass!=="noIcon"){return true;}return false;},hasIcon:function(){if(this.icon&&this.icon!==this._blankGif){return true;}return false;},destroy:function(){this._setSelected=function(){};this.inherited(arguments);}});return _17e9;});},"Sage/UI/PopupMenuItem":function(){define(["Sage/UI/MenuItem","dijit/PopupMenuItem","dojo/_base/declare"],function(_17ea,_17eb,_17ec){var _17ed=_17ec("Sage.UI.PopupMenuItem",[_17ea,_17eb],{_fillContent:function(){if(this.srcNodeRef){var nodes=dojo.query("*",this.srcNodeRef);Sage.UI.PopupMenuItem.superclass._fillContent.call(this,nodes[0]);this.dropDownContainer=this.srcNodeRef;}},startup:function(){if(this._started){return;}this.inherited(arguments);if(!this.popup){var node=dojo.query("[widgetId]",this.dropDownContainer)[0];this.popup=dijit.byNode(node);}dojo.body().appendChild(this.popup.domNode);this.popup.startup();this.popup.domNode.style.display="none";if(this.arrowWrapper){dojo.style(this.arrowWrapper,"visibility","");}dijit.setWaiState(this.focusNode,"haspopup","true");},destroyDescendants:function(){if(this.popup){if(!this.popup._destroyed){this.popup.destroyRecursive();}delete this.popup;}this.inherited(arguments);}});return _17ed;});},"Sage/UI/OrientableMenuBar":function(){define(["dijit/MenuBar","dojo/_base/declare"],function(_17ee,_17ef){var _17f0=_17ef("Sage.UI.OrientableMenuBar",_17ee,{postCreate:function(args){this.inherited(arguments);if(typeof this.orientation!=="undefined"){this._orient=this.orientation;}}});return _17f0;});},"Sage/UI/GridMenuItem":function(){define(["dijit/MenuItem","dojox/grid/EnhancedGrid","dojo/text!../templates/GridMenuItem.html","dojo/_base/declare","dojo/dom-style","dojo/dom-construct","dojo/aspect","dojo/_base/lang","dojo/topic"],function(_17f1,_17f2,_17f3,_17f4,_17f5,_17f6,_17f7,lang,topic){var _17f8=_17f4("Sage.UI.GridMenuItem",_17f1,{grid:null,templateString:_17f3,startup:function(){this.inherited(arguments);_17f7.after(this.getParent(),"onOpen",lang.hitch(this,this.startGrid));var h=this.gridOptions.height||this.height||"250px",w=this.gridOptions.width||this.width||"150px";_17f5.set(this.focusNode,{height:h,width:w});},startGrid:function(){if(this.grid&&this.grid.started){if(this.grid.lastScrollTop===0){this.grid.resize();}else{this.grid.setScrollTop(this.grid.lastScrollTop);}return;}else{if(typeof this.gridOptions!=="undefined"){var _17f9=(this.gridOptions.hasOwnProperty("cssClass"))?this.gridOptions.cssClass:"",_17fa;this.gridOptions.cssClass=_17f9+" menuGrid";if(this.grid){var _17fb=this.grid.layout.cells[2].hidden;if(_17fb!==this.gridOptions.structure[2].hidden){if(_17fb){this.gridOptions.structure[1].width="260px";}else{this.gridOptions.structure[1].width="205px";}this.gridOptions.structure[2].hidden=_17fb;}this.grid.destroyRecursive();}this.grid=new _17f2(this.gridOptions);_17f6.place(this.grid.domNode,this.containerNode,"only");this.grid.canSort=function(col){if(Math.abs(col)===1){return false;}return true;};if(this.gridOptions.hasOwnProperty("_onCellClick")){this.grid.on("cellClick",lang.hitch(this.gridOptions,this.gridOptions._onCellClick));}if(this.gridOptions.hasOwnProperty("_onCanSelect")){this.grid.on("canSelect",lang.hitch(this.gridOptions,this.gridOptions._onCanSelect));}this.grid.startup();this.grid.started=true;_17fa=_17f7.after(this.grid,"_onFetchComplete",lang.hitch(this,function(){topic.publish("sage/ui/groups/gridMenuStarted",this);_17fa.remove();}));}}},_onClick:function(e){e.stopPropagation();}});return _17f8;});},"Sage/UI/GroupsTitlePaneConfigProvider":function(){define(["Sage/UI/_TitlePaneConfigProvider","Sage/Data/BaseSDataStore","Sage/UI/GroupMenuFmtScope","Sage/UI/GridMenuItem","Sage/Groups/GroupManager","Sage/Utility","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/string","Sage/Groups/GroupLookup","Sage/UI/SearchMenuItem","Sage/UI/ImageButton","dojo/i18n!./nls/GroupsTitlePaneConfigProvider","dijit/popup"],function(_17fc,_17fd,_17fe,_17ff,_1800,_1801,array,_1802,lang,_1803,_1804,_1805,_1806,_1807,pm){var _1808=_1802("Sage.UI.GroupsTitlePaneConfigProvider",_17fc,{searchText:"Lookup",lookupResultsText:_1807.lookupResultsText,store:false,_requestOptions:false,_grpContextHandle:false,config:false,requestTitlePaneConfiguration:function(_1809){var _180a,gSvc,_180b,_180c,_180d,_180e;if(this._isInsertMode()){if(_1809.success){this.config={menu:false,tabs:false};_1809.success.call(_1809.scope||this,this.config,this);}return;}_180a=Sage.Data.SDataServiceRegistry.getSDataService("system");this.store=new _17fd({service:_180a,resourceKind:"groups",include:[],sort:[{attribute:"displayName",descending:false}],select:["$key","$descriptor","name","isHidden","userId","family","displayName"]});gSvc=Sage.Services.getService("ClientGroupContext");_180b=gSvc.getContext();if(_180b.notGroupBased){return;}if(!_180b.CurrentFamily){this._requestOptions=_1809;this._grpContextHandle=dojo.connect(gSvc,"onContextSet",this,"_groupContextSetCallback");return;}_180c=this._getMenuConfig();_180d=dijit.byId("GroupLookupButton");if(_180d){_180d.destroy(true);}_180e=this._getTabConfig();this.config={menu:_180c,tabs:_180e};if(_1809.success){_1809.success.call(_1809.scope||this,this.config,this);}},_isInsertMode:function(){var mode=Sage.Utility.getModeId();return (mode&&(mode.toLowerCase()==="insert"));},_groupContextSetCallback:function(_180f){if(this._grpContextHandle){dojo.disconnect(this._grpContextHandle);this._grpContextHandle=false;}else{return;}this.config={menu:this._getMenuConfig(),tabs:this._getTabConfig()};if(this._requestOptions.success){this._requestOptions.success.call(this._requestOptions.scope||this,this.config,this);}},_getTabConfig:function(){var gSvc=Sage.Services.getService("ClientGroupContext"),_1810=gSvc&&gSvc.getContext();return {store:this.store,selectedTabId:_1810.CurrentGroupID,selectedTabName:_1810.CurrentName,tabKeyProperty:"$key",tabNameProperty:"$descriptor",tabGroupNameProperty:"name",tabHiddenProperty:"isHidden",showTabContextMenus:true,fetchParams:{query:_1803.substitute("upper(family) eq '${0}'",[_1810.CurrentFamily.toUpperCase()]),count:1000,start:0,sort:[{attribute:"displayName"}]},lookupButton:new _1806({id:"GroupLookupButton",label:"",imageClass:"fa fa-search",title:_1807.lookupText,onClick:function(){var _1811=Sage.Services.getService("ClientGroupContext"),_1812;if(_1811){_1812=Sage.Services.getService("GroupLookupManager");if(_1812){_1812.showLookup();}}}}),staticTabs:[{"$key":"LOOKUPRESULTS","$descriptor":this.lookupResultsText,closable:false,contextMenuItems:this._getTabContextMenuItems()}],onTabSelect:function(child,_1813){var id,_1814;if(_1813){return;}id=(typeof child==="string")?child:child.id;_1814=Sage.Services.getService("ClientGroupContext");if(_1814){if(id!=="DOLOOKUP"){_1814.setCurrentGroup(id);}}},onTabClose:function(tab){Sage.Groups.GroupManager.HideGroup(tab.id);},onTabClick:function(e){var mode=_1801.getModeId(),_1815=Sage.Services.getService("ClientGroupContext"),tabs=dijit.byId("GroupTabs"),_1816="",_1817="",_1810=null,_1818=e.target,title="";if(mode!=="detail"){return;}array.forEach(tabs.getChildren(),function(item){if(item.selected){_1816=item.id;title=item.title;}});if(_1815){_1810=_1815.getContext();if(_1816!=="DOLOOKUP"&&_1810){_1817=_1810.CurrentGroupID;}}if(_1816===_1817&&_1818&&_1818.innerHTML===title){Sage.Link.toListView();}}};},_getTabContextMenuItems:function(){var items;if(Sage.UI.DataStore.ContextMenus&&Sage.UI.DataStore.ContextMenus.GroupLookupTabContextMenu){items=Sage.UI.DataStore.ContextMenus.GroupLookupTabContextMenu.items;}return items;},_getMenuConfig:function(){var _1819=Sage.Services.getService("ClientGroupContext"),_181a=_1819.getContext(),_181b=_181a.CurrentName||"";return {id:"mnuGroupMenu",cls:"",img:"images/icons/Groups_16x16.gif",imageClass:"icon_Groups_16x16",text:_1807.groupText,tooltip:_1807.groupButtonTooltip,addGroupTooltip:_1807.addGroupButtonTooltip,width:"375px",items:[{cls:"",id:"sep2",text:"-",img:"",tooltip:"",href:"",isSeparator:true},{fn:this._getGroupMenuSearch,scope:this},{fn:this._getGroupMenuGrid,scope:this}]};},_getGroupMenuGrid:function(){var that=this,_181c=new _17fe({store:this.store}),query={},_181d=false,svc=Sage.Services.getService("ClientGroupContext"),key="GroupMenuShowHidden",_181e=sessionStorage.getItem(key),_181f=_181e!=="true";if(svc){_181d=svc.getContext();if(_181d.CurrentEntity){query=_1803.substitute("upper(family) eq '${0}'",[_181d.CurrentFamily.toUpperCase()]);}}return new _17ff({gridOptions:{id:"groupsGridInMenu",store:that.store,rowsPerPage:40,structure:[{name:"&nbsp;",field:"$key",formatter:"fmtSelectedCol",width:"20px"},{name:_1807.groupColumnText,field:"displayName",width:_181f?"260px":"205px"},{name:_1807.visibleColumnText,field:"isHidden",formatter:"fmtHideCol",width:"55px",hidden:_181f}],loadingMessage:"Loading...",noDataMessage:"No records returned",selectionMode:"single",query:query,height:"400px",width:"275px",formatterScope:_181c,_onCellClick:function(e){if(!this.processingRequest){this.processingRequest=true;var _1820,_1821,_1822=e.grid.getParent(),menu=_1822&&_1822.getParent(),_1823,_1824,_1825=false,_181d;if(!this.menuClosedHandle){this.menuClosedHandle=menu.on("close",lang.hitch(this,function(){var _1826=dijit.byId("titlePane");if(_1826&&!_1825){_1826.resetConfiguration();}this.processingRequest=false;this.menuClosedHandle.remove();this.menuClosedHandle=null;}));}if(e.cell.index===1){_1820=e.grid.getItem(e.rowIndex);_1821=Sage.Services.getService("ClientGroupContext");if(_1821){_181d=_1821.getContext();var _1827=dijit.byId("mnuGroupMenu");if(_181d&&_181d.CurrentGroupID===_1820.$key){_1827._onClick(e);pm.close(menu);}else{_1825=true;_1824=dojo.connect(_1821,"onCurrentGroupChanged",e.grid,function(){this.started=false;dojo.disconnect(_1824);_1827._onClick(e);pm.close(menu);});_1821.setCurrentGroup(_1820.$key);}}}else{e.grid.started=false;this.processingRequest=false;e.stopPropagation();}}}},width:"300px",height:"400px"});},_getGroupMenuSearch:function(){return new _1805({});}});return _1808;});},"Sage/UI/_TitlePaneConfigProvider":function(){define(["dojo/_base/declare"],function(_1828){var _1829=_1828("Sage.UI._TitlePaneConfigProvider",null,{titlePaneConfiguration:{menu:{},tabs:{},titleFmtString:"${0}"},requestTitlePaneConfiguration:function(_182a){if(_182a.success&&this.titlePaneConfiguration){_182a.success.call(_182a.scope||this,this.titlePaneConfiguration,this);}}});return _1829;});},"Sage/UI/GroupMenuFmtScope":function(){define(["dijit/form/CheckBox","dojo/_base/declare"],function(_182b,_182c){var scope=_182c("Sage.UI.GroupMenuFmtScope",null,{store:null,currentGroupId:"",constructor:function(args){this.store=args.store;this.currentGroupId="";var _182d=Sage.Services.getService("ClientGroupContext");if(_182d){dojo.connect(_182d,"onCurrentGroupChanged",this,"onCurrentGroupChanged");}},fmtSelectedCol:function(value,idx){if(this.currentGroupId===""){var _182e=Sage.Services.getService("ClientGroupContext");if(_182e){var _182f=_182e.getContext();this.currentGroupId=(_182f.CurrentGroupID==="LOOKUPRESULTS")?"p6UJ9A00024G":_182f.CurrentGroupID;}}return (value===this.currentGroupId)?["<span id=\"",value,"\" >&#10003;</span>"].join(""):["<span id=\"",value,"\" >&nbsp;</span>"].join("");},fmtHideCol:function(value,idx,cell){var grid=cell.grid,item=grid.getItem(idx),_1830=new _182b();_1830.set("checked",!value);_1830.on("click",function(){var _1831=_1830.get("checked"),svc=Sage.Services.getService("RoleSecurityService");if(svc.hasAccess("Entities/Group/Edit")){if(_1831){Sage.Groups.GroupManager.UnHideGroup(item["$key"],true);}else{Sage.Groups.GroupManager.HideGroup(item["$key"],true);}}});return _1830;},onCurrentGroupChanged:function(){this.currentGroupId="";var _1832=Sage.Services.getService("ClientGroupContext");var _1833=_1832.getContext();if(dijit.byId("GroupTabs").selectedChildWidget.id!==_1833.CurrentGroupID){dijit.byId("GroupTabs").selectChild(_1833.CurrentGroupID);}}});return scope;});},"Sage/UI/SearchMenuItem":function(){define(["dojo/_base/declare","dijit/MenuItem","dijit/form/TextBox","dijit/form/CheckBox","dijit/form/Button","Sage/UI/ImageButton","dojo/dom-construct","dojo/_base/lang","dojo/has","dojo/_base/sniff","Sage/UI/Controls/_DialogHelpIconMixin","dojo/text!../templates/GridMenuItem.html","dojo/i18n!./nls/SearchMenuItem","dojo/topic"],function(_1834,_1835,_1836,_1837,_1838,_1839,_183a,lang,has,sniff,_183b,_183c,nls,topic){var _183d=_1834("Sage.UI.SearchMenuItem",_1835,{id:"groupSearchMenuItem",templateString:_183c,seedQuery:"",findText:"Find: ",showHiddenText:"Show Hidden: ",clearText:"Clear",textBox:null,findButton:null,clearButton:null,showHiddenCheck:null,registeredWidgets:null,startup:function(){this.inherited(arguments);var _183e=lang.hitch(this,function(event){if(event.keyCode===9){event.cancelBubble=true;}});if(nls){this.findText=nls.findText;this.showHiddenText=nls.showHiddenText;this.clearText=nls.clearText;}this.getParent().on("open",lang.hitch(this,this.init));if(has("mozilla")){this.getParent().on("keyPress",_183e);}else{this.getParent().on("keyDown",_183e);}},init:function(){if(!this.started){topic.subscribe("sage/ui/groups/gridMenuStarted",lang.hitch(this,function(_183f){if(!this.started){this.registeredWidgets=[];this._createSearchTextBox();this._createShowHidden();}this._setQuery();this.started=true;}));}var fn=lang.hitch(this,function(){this.focusText();});setTimeout(fn,100);},focusText:function(){if(this.textBox&&this.textBox.focus){this.textBox.focus();}},_createSearchTextBox:function(){this.textBox=new _1836();this.textBox.startup();this.registeredWidgets.push(this.textBox);var _1840=lang.hitch(this,function(event){if(event.keyCode===13){this._setQuery();}if(event.keyCode===37||event.keyCode===39||event.keyCode===9){event.cancelBubble=true;}});if(has("mozilla")){this.textBox.on("keyPress",_1840);}else{this.textBox.on("keyDown",_1840);}this.textBox.on("click",function(event){event.cancelBubble=true;});_183a.place(this.textBox.domNode,this.containerNode,"only");_183a.create("label",{"for":this.textBox.id,"innerHTML":this.findText+": ","class":"groupMenuLabel"},this.containerNode,"first");this.findButton=new _1839({imageClass:"icon_Find_16x16","class":"groupMenuButton","title":this.findText,onClick:lang.hitch(this,function(event){event.cancelBubble=true;this._setQuery();})});this.clearButton=new _1838({label:this.clearText,"class":"groupMenuButton","title":this.clearText,onClick:lang.hitch(this,function(event){event.cancelBubble=true;this.textBox.set("value","");this._setQuery();})});_183a.place(this.findButton.domNode,this.containerNode,"last");_183a.place(this.clearButton.domNode,this.containerNode,"last");this.titleBar=this.containerNode;lang.mixin(this,new _183b());this.createHelpIconByTopic("Group_Manager");_183a.place(this.helpIcon,this.containerNode,"last");this.registeredWidgets.push(this.findButton);this.registeredWidgets.push(this.clearButton);},_createShowHidden:function(){var key="GroupMenuShowHidden",_1841=sessionStorage.getItem(key);if(_1841===null){sessionStorage.setItem(key,"false");_1841="false";}this.showHiddenCheck=new _1837();this.showHiddenCheck.set("checked",_1841==="true"?true:false);this.registeredWidgets.push(this.showHiddenCheck);this.showHiddenCheck.on("click",lang.hitch(this,function(event){event.cancelBubble=true;this._setQuery();var grid=dijit.byId("groupsGridInMenu");if(grid){if(this.showHiddenCheck.checked){sessionStorage.setItem(key,"true");grid.structure[1].width="205px";}else{sessionStorage.setItem(key,"false");grid.structure[1].width="260px";}grid.setStructure(grid.structure);grid.layout.setColumnVisibility(2,this.showHiddenCheck.checked);}}));var _1842=_183a.create("p",null,this.containerNode,"last");_183a.place(this.showHiddenCheck.domNode,_1842,"last");_183a.create("label",{"for":this.showHiddenCheck.id,"innerHTML":this.showHiddenText,"class":"groupMenuLabel"},this.showHiddenCheck.domNode,"before");},_setQuery:function(){var grid=dijit.byId("groupsGridInMenu"),_1843=this.textBox.get("value").replace(/'/g,"''"),_1844=[];if(grid){if(!this.seedQuery){this.seedQuery=grid.get("query");}_1844.push(this.seedQuery);if(_1843){_1843=this._escapeSearchText(_1843);_1844.push("and upper(displayName) like '%"+_1843.toUpperCase()+"%'");}if(!this.showHiddenCheck.checked){_1844.push("and not isHidden");}grid.set("query",_1844.join(" "));grid._refresh();}},_escapeSearchText:function(_1845){_1845=_1845.replace(/\[/g,"[[]").replace(/_/g,"[_]").replace(/%/g,"[%]");return _1845;},_onClick:function(e){e.cancelBubble=true;},destroy:function(){var i;if(this.registeredWidgets!==null){for(i=0;i<this.registeredWidgets.length;i++){this.registeredWidgets[i].destroy(false);this.registeredWidgets.splice(i,1);}}this.inherited(arguments);}});return _183d;});},"Sage/UI/DetailPanel":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/dom-construct","dojo/dom-class","dojo/i18n","dijit/registry","dijit/layout/BorderContainer","dijit/Toolbar","dijit/ToolbarSeparator","Sage/_Templated","Sage/UI/_DetailPanelConfigurationProvider"],function(_1846,lang,array,_1847,_1848,i18n,_1849,_184a,_184b,_184c,_184d,_184e,_184f){return _1846("Sage.UI.DetailPanel",[_184a,_184d],{widgetsInTemplate:true,contentTemplate:new Simplate(["<div class=\"detail-panel-toolbar listPanelToolbar rightTools\" data-dojo-type=\"dijit.Toolbar\" style=\"{%= $.toolbarStyle %}\" data-dojo-attach-point=\"_toolbar\" data-dojo-props=\"region: 'top', align: 'right', splitter: false\">","<span data-dojo-type=\"dijit.ToolbarSeparator\" data-dojo-attach-point=\"_buttonSeparator\"></span>","<div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"_helpButton\" data-dojo-attach-event=\"onClick:showHelp\" data-dojo-props=\"showLabel:true\">{%= $.helpText %}</div>","</div>"]),helpText:"Help",helpTopicName:"detailview",toolbarStyle:"",toolbarActive:true,id:"detailPanel",buildRendering:function(){this.inherited(arguments);_1848.add(this.domNode,"detail-panel");},startup:function(){this.inherited(arguments);this.requestConfiguration();},showHelp:function(){Sage.Utility.openHelp(this.helpTopicName);},requestConfiguration:function(){if(this.configurationProvider){this.configurationProvider.requestDetailModeConfiguration({scope:this,success:this._applyConfiguration});}},_applyConfiguration:function(_1850){this._configuration=_1850;this._configureToolbar(_1850);this._configureContent(_1850);},_configureContent:function(_1851){var _1852=_1851&&_1851.content;if(_1852){var _1853=_1852;if(lang.isFunction(_1853)){_1853=_1853.call(this,_1851,this);}if(_1853){if(this._content){this.removeChild(this._content);this._content.destroyRecursive();this._content=null;}_1853.set("region","center");this._content=_1853;this.addChild(_1853);this.layout();}}},_configureToolbar:function(_1854){if(this._toolbarApplied){return;}var _1855=_1854&&_1854.toolBar;if(_1855===false){if(this.toolbarActive){this.removeChild(this._toolbar);this.toolbarActive=false;}}else{if(_1855){if(!this.toolbarActive){this.addChild(this._toolbar);this.toolbarActive=true;}array.forEach(_1855.items,function(item,index){this._toolbar.addChild(new dijit.form.Button(item),index);},this);}}this._toolbarApplied=true;}});});},"Sage/UI/_DetailPanelConfigurationProvider":function(){define(["dojo/_base/declare"],function(_1856){var _1857=_1856("Sage.UI._DetailPanelConfigurationProvider",null,{detailModeConfiguration:false,constructor:function(_1858){dojo.mixin(this,_1858);},requestDetailModeConfiguration:function(_1859){if(_1859.success&&this.detailModeConfiguration){_1859.success.call(_1859.scope||this,this.detailModeConfiguration,this);}}});return _1857;});},"Sage/MainView/ActivityMgr/ActivityGroupContextService":function(){define(["Sage/Groups/BaseGroupContextService","Sage/Services/ActivityService","dojo/string","Sage/Data/SDataServiceRegistry","dojo/_base/lang","Sage/MainView/ActivityMgr/ActivityListPanelConfig","Sage/MainView/ActivityMgr/AlarmListPanelConfig","Sage/MainView/ActivityMgr/AllOpenListPanelConfig","Sage/MainView/ActivityMgr/ConfirmListPanelConfig","Sage/MainView/ActivityMgr/EventListPanelConfig","Sage/MainView/ActivityMgr/LitRequestListPanelConfig","Sage/MainView/ActivityMgr/PastDueListPanelConfig","dojox/storage/LocalStorageProvider","dojo/_base/declare","dojo/_base/connect","dojo/_base/json","dojo/i18n!./nls/ActivityGroupContextService"],function(_185a,_185b,_185c,_185d,lang,_185e,_185f,_1860,_1861,_1862,_1863,_1864,_1865,_1866,_1867,json,_1868){var _1869=_1866("Sage.MainView.ActivityMgr.ActivityGroupContextService",_185a,{_currentContext:null,_currentTabId:false,_currentTabDescription:false,_currentUserId:false,_currentKeyField:"$key",_currentListConfiguration:false,groupConfigTypes:[{key:"activities",descriptor:_1868.activityTabDisplayName,keyField:"$key",configProviderType:_185e},{key:"allopen",descriptor:_1868.allOpenTabDisplayName,keyField:"$key",configProviderType:_1860},{key:"pastdue",descriptor:_1868.pastDueTabDisplayName,keyField:"$key",isCompostie:true,configProviderType:_1864},{key:"alarms",descriptor:_1868.alarmTabDisplayName,keyField:"$key",isCompostie:true,configProviderType:_185f},{key:"events",descriptor:_1868.eventTabDisplayName,keyField:"$key",configProviderType:_1862},{key:"confirmations",descriptor:_1868.confirmTabDisplayName,keyField:"$key",configProviderType:_1861},{key:"literature",descriptor:_1868.litTabDisplayName,keyField:"$key",configProviderType:_1863}],_configsHash:false,_LOCALSTORE_NAMESPACE:"Sage-ActivityManagerView",_STORE_KEY_LASTAB:"_LASTTAB",_tabNameCache:{},constructor:function(){this.inherited(arguments);this._currentContext={};lang.mixin(this._currentContext,this._emptyContext);this._currentContext.CurrentTableKeyField="$key";this._currentContext.AppliedFilterInfo={};this._currentContext.CurrentFamily=null;this._currentContext.notGroupBased=true;var _186a=this._getDefaultTabId();this.setContext(_186a,"default");this.unsubscribeConnects();this._subscribes=[];this._subscribes.push(_1867.subscribe(_185c.substitute("/ui/filters/default/refresh"),this,this._onDefaultFilterRefresh));this._onDefaultFilterLoad();},buildCurrentEntityContext:function(){var _186b=this._currentContext.CurrentGroupID;if(!_186b){return;}if(this._currentListConfiguration){this._currentContext.CurrentEntity=this._currentListConfiguration.entityName;this._currentContext.CurrentTableKeyField=this.getKeyField(_186b);if(!this._currentContext.CurrentName){this._currentContext.CurrentName=this.getGroupName(_186b);}}},_ensureConfigsHash:function(){if(!this._configsHash){var hash={};for(var i=0;i<this.groupConfigTypes.length;i++){var cfg=this.groupConfigTypes[i];hash[cfg.key]=lang.mixin(cfg,{instance:false});}this.configsHash=hash;}},_setListConfig:function(){this._ensureConfigsHash();var tabId=this._currentContext.CurrentGroupID;var _186c=(this.configsHash.hasOwnProperty(tabId))?this.configsHash[tabId]:this.configsHash["activities"];if(!_186c.instance){_186c.instance=new _186c.configProviderType();this.onTabConfigCreated(_186c.instance);}else{_186c.instance.rebuild();}this._currentListConfiguration=_186c.instance;return;},getCurrentListConfig:function(){this._setListConfig();return this._currentListConfiguration;},getKeyField:function(tabid){this._ensureConfigsHash();var _186d="$key";if(this.configsHash[tabid]){_186d=this.configsHash[tabid]["keyField"]||"$key";}return _186d;},getGroupName:function(tabid){this._ensureConfigsHash();var name="default";if(this.configsHash[tabid]){name=this.configsHash[tabid]["descriptor"]||"default";}return name;},onCurrentGroupChanged:function(_186e){this._clearFilterManager();var self=this;this._onDefaultFilterLoad(function(){var _186f=self.getContext();_1867.publish("/group/context/changed",[_186e,self]);self._saveToLocalStorage(self._STORE_KEY_LASTAB,_186f.CurrentGroupID);});},_clearFilterManager:function(){var _1870={};var _1871={};_1867.publish("/ui/filters/default/apply",[_1870,_1871,this]);},getContext:function(){if(this._currentContext.CurrentGroupID===null){this.requestContext();}this.buildCurrentEntityContext();return this._currentContext;},requestContext:function(){if(this._isRetrievingContext===true){return;}},setContext:function(id,name){this._currentContext.CurrentGroupID=id;this._currentContext.CurrentName=name;this._setListConfig();this.buildCurrentEntityContext();this._isRetrievingContext=false;this.onContextSet(this._currentContext);},isContextRequired:function(){return !(Sage&&Sage.Groups&&Sage.Groups._groupContext);},setCurrentGroup:function(id,name,_1872){if(this._currentContext.CurrentGroupID===id){return;}if(!name||!_1872){this._currentContext.CurrentGroupID=id;this._currentContext.CurrentName=false;this.buildCurrentEntityContext();name=this._currentContext.CurrentName;}else{this._currentContext.CurrentTableKeyField=_1872;}this.setContext(id,name);this.onCurrentGroupChanged({current:this._currentContext});},_onDefaultFilterLoad:function(_1873){var _1874=this.getContext(),_1875=_185d.getSDataService("system"),_1876,entry={"$name":"getEntityFilters","request":{"entityName":_1874.CurrentEntity,"key":_1874.CurrentGroupID}};_1876=new Sage.SData.Client.SDataServiceOperationRequest(_1875).setOperationName("getEntityFilters");_1876.execute(entry,{success:lang.hitch(this,function(_1877){try{if(_1877.response.appliedFilterInfo){this._currentContext.AppliedFilterInfo.applied=_1877.response.appliedFilterInfo.applied;this._currentContext.AppliedFilterInfo.definitionSet=_1877.response.appliedFilterInfo.definitionSet;if(_1873){_1873();}}}catch(err){console.error(err);}}),failure:function(_1878){console.error(_1878);},async:false});},_onDefaultFilterRefresh:function(_1879,_187a,_187b){var _187c=this.getContext(),_187d=_185d.getSDataService("system"),entry={"$name":"applyFilterToEntity","request":{"entityName":_187c.CurrentEntity,"filter":json.toJson(_187b.createValueSet()),"key":_187c.CurrentGroupID}},_187e=new Sage.SData.Client.SDataServiceOperationRequest(_187d).setOperationName("applyFilterToEntity");_187e.execute(entry,{});},getStaticTabs:function(){return this.groupConfigTypes;},_saveToLocalStorage:function(key,value,_187f){this._saveToSessionStorage(key,value,_187f);return;},_getFromLocalStorage:function(key,_1880){return this._getFromSessionStorage(key,_1880);},_getFromSessionStorage:function(key,_1881){if(!_1881){_1881=this._LOCALSTORE_NAMESPACE;}var _1882=_1881+"_"+key;return sessionStorage.getItem(_1882);},_saveToSessionStorage:function(key,value,_1883){if(!_1883){_1883=this._LOCALSTORE_NAMESPACE;}var _1884=_1883+"_"+key;sessionStorage.setItem(_1884,value);},_getDefaultTabId:function(){var _1885="activities",_1886=this._getUrlTabId(),_1887;if(_1886){_1886=this._validateTabId(_1886);if(_1886){return _1886;}}var _1888=this._getFromLocalStorage(this._STORE_KEY_LASTAB);if(_1888){_1885=_1888;}else{_1887=Sage.Services.getService("ActivityService");if(_1887){_1885=_1887.getDefaultActivityManagerTabId();}}if(!this._configsHash){for(var i=0;i<this.groupConfigTypes;i++){if(_1885===this.groupConfigTypes[i]["key"]){return _1885;}}}return _1885;},_getUrlTabId:function(){var tabId=false,_1889="[\\?&]tabId=([^%#]*)",regex=new RegExp(_1889),_188a=regex.exec(window.location.href);if(_188a!==null){tabId=_188a[1];}return tabId;},_validateTabId:function(tabId){if(tabId){for(var i=0;i<this.groupConfigTypes.length;i++){var cfg=this.groupConfigTypes[i];if(cfg.key.toUpperCase()===tabId.toUpperCase()){return cfg.key;}}}return null;},onTabConfigCreated:function(_188b){}});if(!Sage.Services.hasService("ClientGroupContext")){Sage.Services.addService("ClientGroupContext",new _1869());}else{var _188c=Sage.Services.getService("ClientGroupContext");if(_188c.declaredClass!=="Sage.MainView.ActivityMgr.ActivityGroupContextService"){_188c.unsubscribeConnects();Sage.Services.removeService("ClientGroupContext");Sage.Services.addService("ClientGroupContext",new _1869());}}return _1869;});},"Sage/Groups/BaseGroupContextService":function(){define(["Sage/Utility","dojo/string","Sage/Data/SDataServiceRegistry","dojo/ready","dojo/_base/lang","dojo/_base/declare","dojo/_base/array"],function(_188d,_188e,_188f,ready,lang,_1890,array){var _1891=_1890("Sage.Groups.BaseGroupContextService",null,{_adHocGroupList:null,_connects:null,_subscribes:null,_emptyContext:null,_currentRequestHandle:null,_isAdHocGroupListRetrieved:false,constructor:function(){this._connects=[];this._subscribes=[];this._adHocGroupList=[];this._emptyContext={DefaultGroupID:null,CurrentGroupID:null,CurrentTable:null,CurrentName:null,CurrentEntity:null,CurrentFamily:null};ready(lang.hitch(this,function(){if(!this.isContextRequired()){var _1892=_188d.getValue(window,"Sage.Groups._groupContext"),_1893=_188d.getValue(window,"Sage.UI.DataStore.Filters");if(_1893){if(_1892["AppliedFilterInfo"]){_1893["default"]=this.createFilterExtendedSet(_1892["AppliedFilterInfo"]);}}}if(this.isContextRequired()){this.requestContext();}}));},createFilterExtendedSet:function(_1894){var _1895=_1894["definitionSet"]||[],_1896=_1894["applied"]||[],_1897={},_1898={},_1899,_189a,i,j,value;for(i=0;i<_1895.length;i++){_1899=_1895[i];_189a={"$key":_1899["id"],"$partial":true,"filterName":_1899["filterName"],"displayName":_1899["displayName"],"propertyName":_1899["propertyName"],"propertyDataTypeId":_1899["propertyDataTypeId"],"details":{}};if(_1899["filterType"]=="rangeFilter"){_189a["details"]["rangeFilter"]={"characters":_1899["characters"]};}else{if(_1899["filterType"]=="lookupFilter"){_189a["details"]["userLookupFilter"]={};}else{_189a["details"]["distinctFilter"]={};}}_1897[_1899["id"]]=_189a;}for(i=0;i<_1896.length;i++){_1899=_1896[i];_189a={};for(j=0;j<_1899["rangeValues"].length;j++){value=_1899["rangeValues"][j];_189a[value["rangeName"]]=lang.mixin({},value);}for(j=0;j<_1899["distinctValues"].length;j++){value=_1899["distinctValues"][j];if(typeof value==="string"){_189a[value]=value;}}for(j=0;j<_1899["lookupValues"].length;j++){value=_1899["lookupValues"][j];if(typeof value==="object"){_189a["value"]=value;}}_1898[_1899["id"]]=_189a;}return {"definitionSet":_1897,"applied":_1898};},destroy:function(){array.forEach(this._connects,function(_189b){dojo.disconnect(_189b);});this.unsubscribeConnects();this.uninitialize();},unsubscribeConnects:function(){array.forEach(this._subscribes,function(_189c){dojo.unsubscribe(_189c);});},uninitialize:function(){},isContextRequired:function(){var _189d=!(Sage&&Sage.Groups&&Sage.Groups._groupContext);return _189d;},createCompatibleContext:function(_189e){if(_189e["currentGroupId"]=="LOOKUPRESULTS"){_189e["currentName"]="Lookup Results";}var _189f={"AppliedFilterInfo":_189e["appliedFilterInfo"],"ContainsPositionState":_189e["containsPositionState"],"CurrentDisplayName":_189e["currentDisplayName"],"CurrentEntity":_189e["currentEntity"],"CurrentEntityID":_189e["currentEntityId"],"CurrentEntityPosition":_189e["currentEntityPosition"],"CurrentFamily":_189e["currentFamily"],"CurrentGroupCount":_189e["currentGroupCount"],"CurrentGroupID":_189e["currentGroupId"],"CurrentName":_189e["currentName"],"CurrentTable":_189e["currentTable"],"CurrentTableKeyField":_189e["currentTableKeyField"],"DefaultGroupID":_189e["defaultGroupId"],"FirstEntityID":_189e["firstEntityId"],"LastEntityID":_189e["lastEntityId"],"LookupLayoutGroupName":_189e["lookupLayoutGroupName"],"NextEntityID":_189e["nextEntityId"],"PreviousEntityID":_189e["previousEntityId"],"RetrievedOn":_189e["retrievedOn"],"isAdhoc":_189e["isAdHoc"],"LookupResultsConditions":_189e["lookupResultsConditions"]};if(!_189e["appliedFilterInfo"]){delete _189f.AppliedFilterInfo;}return _189f;},_onDefaultFilterRefresh:function(_18a0,_18a1,_18a2){},getContext:function(){},setContext:function(_18a3){var _18a4=Sage&&Sage.Groups;if(_18a4&&_18a3){lang.mixin(_18a4._groupContext,_18a3);this.onContextSet(_18a4._groupContext);}},setCurrentGroup:function(_18a5,_18a6){},_onSetContextRequestSuccess:function(entry){var _18a7=entry&&entry["response"],_18a8=_18a7&&this.createCompatibleContext(_18a7);if(_18a8){this.setContext(_18a8);}this.onCurrentGroupChanged({current:_18a8});},_onSetContextRequestFailure:function(_18a9,o){},onSuccessfulGroupChanged:function(data){var _18aa=this.getContext();this.setContext(data);this.onCurrentGroupChanged({current:data,previous:_18aa});},onCurrentGroupChanged:function(_18ab){},publishFiltersApplied:function(){var _18ac=this.getContext();if(_18ac.AppliedFilterInfo){ready(lang.hitch(this,function(){var _18ad=this.createFilterExtendedSet(_18ac.AppliedFilterInfo),_18ae=_188d.getValue(window,"Sage.UI.DataStore.Filters");_18ae["default"]=_18ad;dojo.publish("/ui/filters/default/apply",[_18ad["applied"],_18ad["definitionSet"],this]);}));}},applyFilters:function(_18af){var _18b0=this.getContext();if(_18b0.AppliedFilterInfo){var _18b1=this.createFilterExtendedSet(_18b0.AppliedFilterInfo),_18b2=_188d.getValue(window,"Sage.UI.DataStore.Filters");_18b2["default"]=_18b1;if(_18af){_18af._onApply(_18b1["applied"],_18b1["definitionSet"],this);}}},onContextSet:function(_18b3){}});return _1891;});},"Sage/MainView/ActivityMgr/ActivityListPanelConfig":function(){define(["dojo/i18n","Sage/MainView/ActivityMgr/BaseListPanelConfig","Sage/Utility/Activity","Sage/UI/SummaryFormatterScope","Sage/UI/SDataSummaryFormatterScope","Sage/Data/BaseSDataStore","Sage/Data/SDataStore","Sage/UI/Columns/DateTime","Sage/Data/SDataServiceRegistry","dojo/_base/declare","dojo/_base/connect","dojo/string","dojo/i18n!./nls/ActivityListPanelConfig","dojo/i18n!./templates/nls/UserActivityDetailSummary","dojo/i18n!./templates/nls/UserActivityListSummary"],function(i18N,_18b4,_18b5,_18b6,_18b7,_18b8,_18b9,_18ba,_18bb,_18bc,_18bd,_18be,_18bf){var _18c0=_18bc("Sage.MainView.ActivityMgr.ActivityListPanelConfig",[_18b4],{constructor:function(){this._nlsResources=_18bf;this._listId="Activities";this._resourceKind="userActivities";this.entityName="UserActivity";this._contextMenu="ActivityListContextMenu";this._scheduleContextMenu="ScheduleContextMenu";this._service=_18bb.getSDataService("system");this._structure=this._getStructure();this._select=this._getSelect();this._include=this._getInclude();this._sort=this._getSort();this._where=this._getWhere();this._store=this._getStore();this.list=this._getListConfig();this.summary=this._getSummaryConfig();this.detail=this._getDetailConfig();this.toolBar=this._getToolBars();this.keyField="$key";this.hasCompositeKey=true;_18bd.subscribe("/entity/activity/change",this._onListRefresh);_18bd.subscribe("/entity/activity/delete",this._onListRefresh);_18bd.subscribe("/entity/activity/create",this._onListRefresh);_18bd.subscribe("/entity/userActivity/change",this._onListRefresh);_18bd.subscribe("/entity/userActivity/delete",this._onListRefresh);_18bd.subscribe("/entity/userActivity/create",this._onListRefresh);_18bd.subscribe("/entity/activity/confirm",this._onListRefresh);_18bd.subscribe("/entity/activity/decline",this._onListRefresh);_18bd.subscribe("/entity/userNotification/delete",this._onListRefresh);_18bd.subscribe("/entity/activityAttendees/updated",this._onListRefresh);},_onListRefresh:function(event){var _18c1=Sage.Services.getService("ActivityService");_18c1.refreshList("activities");},_getSelect:function(){return ["Activity/Attachment","Activity/Timeless","Activity/Recurring","Activity/RecurIterations","Activity/Alarm","Activity/Type","Activity/StartDate","Activity/Duration","Activity/ContactName","Activity/ContactId","Activity/LeadName","Activity/LeadId","Activity/AccountName","Activity/AccountId","Activity/Description","Activity/Priority","Activity/Leader","UserId","AlarmTime","Alarm","Status","Activity/AttendeeCount"];},_getInclude:function(){return ["Activity","$descriptors"];},_getSort:function(){return [{attribute:"Activity.StartDate",descending:true}];},_getWhere:function(){return (this._currentUserId)?_18be.substitute("(User.Id eq \"${0}\") and (Status ne \"asDeclned\" ) and (Activity.Type ne \"atLiterature\" ) ",[this._currentUserId]):"";},_getStructure:function(){var _18c2="<div class='Global_Images icon16x16 icon_attach_to_16' title='"+this._nlsResources.colNameAttachment+"' />";var _18c3="<div class='Global_Images icon16x16 icon_recurring' title='"+this._nlsResources.colNameRecurring+"' />";var _18c4="<img src='images/icons/Alarm_16x16.gif' title='"+this._nlsResources.colNameAlarm+"' alt='"+this._nlsResources.colNameAlarm+"' />";var _18c5="<div class='Global_Images icon16x16 icon_unconfirmedActivity16x16' title='"+this._nlsResources.colNameUnConfirmStatus+"' />";var _18c6=this._nlsResources.colNameType||"Activity Type";var _18c7=this._nlsResources.colNameStartDate||"Start Date";var _18c8=this._nlsResources.colNameDuration||"Duration";var _18c9=this._nlsResources.colNameAccount||"Account/Company";var _18ca=this._nlsResources.colNameRegarding||"Regarding";var _18cb=this._nlsResources.colNamePriority||"Priority";var _18cc=this._nlsResources.colNameUserId||"Leader";var _18cd=this._nlsResources.colNameTypeName||"Type";var _18ce=this._nlsResources.colNameContactName||"Name";var _18cf=this._nlsResources.colNameAssociationCount||"Participant Count";return [{field:"Status",name:_18c5,type:_18b5.activityConfirmStatusCell,width:"20px"},{field:"Alarm",name:_18c4,type:_18b5.activityAlarmCell,width:"20px"},{field:"Activity.Attachment",name:_18c2,type:_18b5.activityAttachCell,width:"20px"},{field:"Activity.Recurring",name:_18c3,type:_18b5.activityRecurringCell,width:"20px"},{field:"Activity.Type",name:_18c6,type:_18b5.activityTypeCell,width:"90px"},{field:"Activity.StartDate",name:_18c7,type:_18ba,timelessField:"Activity.Timeless",width:"100px"},{field:"Activity.Duration",name:_18c8,type:_18b5.activityDurationCell,width:"40px"},{field:"Activity.ContactId",name:_18cd,type:_18b5.activityNameTypeCell,width:"40px"},{field:"Activity.ContactName",name:_18ce,type:_18b5.activityNameCell,width:"200px"},{field:"Activity.AccountName",name:_18c9,type:_18b5.activityAccountCell,width:"200px"},{field:"Activity.Description",name:_18ca,width:"100px"},{field:"Activity.Priority",name:_18cb,width:"40px"},{field:"Activity.Leader",name:_18cc,type:_18b5.activityLeaderCell,width:"200px"},{field:"Activity.AttendeeCount",name:_18cf,width:"90px"}];},_getSummaryConfig:function(){var store=new _18b9({id:this._listId,service:this._service,resourceKind:this._resourceKind,include:["Activity","$descriptors"],select:["$key"],expandRecurrences:false,where:this._where});var _18d0=[{field:"$key",formatter:"formatSummary",width:"100%",name:"Summary View"}];var _18d1=this._getFormatterScope();return {structure:_18d0,layout:"layout",store:store,rowHeight:170,rowsPerPage:10,formatterScope:_18d1};},_getDetailConfig:function(){var _18d2=this._getFormatterScope();return {resourceKind:this._resourceKind,requestConfiguration:this._getSummaryDetailRequestConfig(),templateLocation:"MainView/ActivityMgr/templates/UserActivityDetailSummary.html"};},_getSummaryListRequestConfig:function(){return {resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["$key","Alarm","Status","User","Activity/Attachment","Activity/Timeless","Activity/Recurring","Activity/RecurIterations","Activity/Type","Activity/StartDate","Activity/Duration","Activity/ContactName","Activity/ContactId","Activity/LeadName","Activity/LeadId","Activity/AccountName","Activity/AccountId","Activity/Description","Activity/Priority","Activity/Leader","Activity/Location","Activity/TicketId","Activity/TicketNumber","Activity/OpportunityId","Activity/OpportunityName","Activity/Notes","Activity/PhoneNumber","Activity/AttendeeCount"],include:["Activity","$descriptors"],useBatchRequest:true,expandRecurrences:false};},_getSummaryDetailRequestConfig:function(){return {resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["$key","Alarm","Status","User","Activity/Attachment","Activity/Timeless","Activity/Recurring","Activity/RecurIterations","Activity/Type","Activity/StartDate","Activity/Duration","Activity/ContactName","Activity/ContactId","Activity/LeadName","Activity/LeadId","Activity/AccountName","Activity/AccountId","Activity/Description","Activity/Priority","Activity/Leader","Activity/Location","Activity/TicketId","Activity/TicketNumber","Activity/OpportunityId","Activity/OpportunityName","Activity/LongNotes","Activity/PhoneNumber","Activity/AttendeeCount"],include:["Activity","$descriptors"],useBatchRequest:true,expandRecurrences:false};},_getFormatterScope:function(){return new _18b7({templateLocation:"MainView/ActivityMgr/templates/UserActivityListSummary.html",resetDataManager:true,requestConfiguration:this._getSummaryListRequestConfig()});},_getToolBars:function(){return {items:[]};},getTimelessProperty:function(_18d3){return "Activity.Timeless";}});return _18c0;});},"Sage/MainView/ActivityMgr/BaseListPanelConfig":function(){define(["Sage/_ConfigurationProvider","Sage/Data/SDataStore","dijit/Menu","dijit/PopupMenuItem","dijit/MenuSeparator","Sage/UI/MenuItem","dojo/i18n!./nls/BaseListPanelConfig","dijit/registry","dojo/string","dojo/_base/declare"],function(_18d4,_18d5,Menu,_18d6,_18d7,_18d8,_18d9,_18da,_18db,_18dc){var _18dd=_18dc("Sage.MainView.ActivityMgr.BaseListPanelConfig",[_18d4],{list:false,detail:false,summary:false,toolBar:false,_listId:false,_store:false,_service:false,_where:false,_sort:false,_select:false,_include:false,_structure:false,_currentUserId:false,_resourceKind:false,_nlsResources:false,_securedAction:"",keyField:"$key",hasCompositeKey:false,_menuItems:null,_contextMenu:false,_schedeContextMenu:false,_activityService:false,_summaryformaterScope:false,entityName:false,rebuildMenus:true,rebuildOnRefresh:false,constructor:function(){this._nlsResources=_18d9;this._service=Sage.Data.SDataServiceRegistry.getSDataService("dynamic");this._activityService=Sage.Services.getService("ActivityService");var _18de=Sage.Services.getService("ClientContextService");if(_18de){if(_18de.containsKey("userID")){this._currentUserId=_18de.getValue("userID");}}this._include=this._getInclude();this._menuItems=[];},rebuild:function(){this._where=this._getWhere();this._structure=this._getStructure();this.list=this._getListConfig();this.summary=this._getSummaryConfig();this.detail=this._getDetailConfig();this.toolBar=this._getToolBars();},_onListRefresh:function(event){var _18df=Sage.Services.getService("ActivityService");_18df.refreshList();},_getListConfig:function(){if(!this._store){this._store=this._getStore();}else{this._store.where=this._where;}var _18e0={id:this._listId,structure:this._structure,store:this._store,selectedRegionContextMenuItems:this._getListContextMenuItems(),onSelectedRegionContextMenu:this._onListContext};return _18e0;},_getStore:function(){var store=new _18d5({id:this._listId,service:this._service,resourceKind:this._resourceKind,include:this._include,select:this._select,sort:this._sort,where:this._where});return store;},_getSelect:function(){var _18e1=[];return _18e1;},_getInclude:function(){var _18e2=[];return _18e2;},_getSort:function(){var sort=[];return sort;},_getWhere:function(){var where="";return where;},_getStructure:function(){var _18e3=[];return _18e3;},_getSummaryConfig:function(){var store=new _18d5({id:this._listId,service:this._service,resourceKind:this._resourceKind,include:[],select:["$key"],where:this._where});var _18e4=[{field:"$key",formatter:"formatSummary",width:"100%",name:"Summary View"}];var _18e5=this._getFormatterScope();var _18e6={structure:_18e4,layout:"layout",store:store,rowHeight:170,rowsPerPage:10,formatterScope:_18e5};return _18e6;},_getFormatterScope:function(){return false;},_getDetailConfig:function(){return false;},_getToolBars:function(){var _18e7={items:[]};return _18e7;},_getListContextMenuItems:function(){if(!this._contextMenu){return;}if(this._menuItems.length>0){return this._menuItems;}if(!Sage.UI.DataStore.ContextMenus){return [];}if(!Sage.UI.DataStore.ContextMenus.listContextMenu){return [];}if(this._menuItems.length>0){this._menuItems[0].destroyDescendants();}this._menuItems=[];var _18e8=Sage.UI.DataStore.ContextMenus.listContextMenu.items;var len=_18e8.length;for(var i=0;i<len;i++){var mDef=_18e8[i];if(mDef.id===this._contextMenu){this._buildChildMenu(mDef.submenu,null);}else{if(mDef.id===this._scheduleContextMenu){var _18e9=new _18d7();this._menuItems.push(_18e9);var _18ea=new Menu();var _18eb=new _18d6({label:mDef.text,popup:_18ea});this._buildChildMenu(mDef.submenu,_18ea);this._menuItems.push(_18eb);}}}return this._menuItems;},_getGridMenu:function(){var _18ec=dijit.byId("_listContextmenu");return _18ec;},_buildChildMenu:function(_18ed,_18ee){var len=_18ed.length;for(var i=0;i<len;i++){var mDef=_18ed[i];if(mDef.submenu.length>0){var _18ef=new Menu();this._buildChildMenu(mDef.submenu,_18ef);var _18f0=new _18d6({label:mDef.text,popup:_18ef});if(_18ee){_18ee.addChild(_18f0);}else{this._menuItems.push(_18f0);}}else{var _18f1=null;if((mDef.text==="-")||(mDef.text===" ")||(mDef.isspacer)){_18f1=new _18d7();}else{var href=mDef.href;if(href.indexOf("javascript:")<0){href=_18db.substitute("javascript:${0}()",[href]);}_18f1=new _18d8({label:mDef.text||"...",icon:mDef.img,title:mDef.tooltip||"",ref:href,onClick:function(){if(this.ref!==""){try{window.location.href=this.ref;}catch(e){}}}});}if(_18ee){_18ee.addChild(_18f1);}else{this._menuItems.push(_18f1);}}}},_onListContext:function(){},getFilterConfig:function(_18f2,entry,_18f3){var _18f4=this._service;var _18f5=_18f2;var _18f6=this.entityName;var _18f7=this._resourceKind;var where=this._where;var _18f8={};_18f8["groupId"]=this._listId;_18f8["store"]=new _18d5({executeReadWith:"readFeed",request:new Sage.SData.Client.SDataResourcePropertyRequest(_18f5).setResourceKind("entities").setResourceSelector("\""+_18f6+"\"").setResourceProperty("filters").setQueryArg("where","filterType ne \"analyticsMetric\"").setQueryArg("count",20)});_18f8["createStoreForFilter"]=function(_18f9){return _18f9&&_18f9["filterName"]?new _18d5({executeReadWith:"readFeed",request:new Sage.SData.Client.SDataResourcePropertyRequest(_18f4).setResourceKind(_18f7).setResourceProperty("$queries/executeMetric").setQueryArg("_filterName",_18f9["filterName"]).setQueryArg("orderby","displayName").setQueryArg("_activeFilter",where)}):null;};_18f8["getFilterManager"]=function(){var _18fa=_18da.byId("list");return _18fa&&_18fa.get("filterManager");};return _18f8;},getTimelessProperty:function(_18fb){return false;}});return _18dd;});},"Sage/UI/SummaryFormatterScope":function(){define(["Sage/UI/SummaryContainer","Sage/Data/SummaryViewDataManager","Sage/UI/Controls/SummaryAggregate","dojo/_base/lang","dojo/_base/declare"],function(_18fc,_18fd,_18fe,lang,_18ff){var _1900=_18ff("Sage.UI.SummaryFormatterScope",null,{templateLocation:false,queryName:"",idField:"",dataManager:null,requestConfiguration:false,widgets:[],constructor:function(args){dojo.mixin(this,args);this.widgets=[];this.preFetchResources();this._setupDataManager();},_setupDataManager:function(){this.dataManager=new _18fd();if(Sage.Services.hasService("SummaryViewDataManager")){Sage.Services.removeService("SummaryViewDataManager");}Sage.Services.addService("SummaryViewDataManager",this.dataManager);},formatSummary:function(value,idx){var _1901,id=idx+"_sum_"+value;if(value===null){return "";}if(this.dataManager===null){this.dataManager=Sage.Services.getService("SummaryViewDataManager");}if(this.dataManager===null){this._setupDataManager();}_1901=dijit.byId(id);if(_1901){_1901.destroy();}_1901=new _18fc({id:id,templateLocation:this.templateLocation});this.dataManager.requestData(value,_1901,this.requestConfiguration);this.widgets[idx]=_1901;return this.widgets[idx];},preFetchResources:function(){var _1902=["Sage"];var _1903=this.templateLocation.split("/");for(var i=0;i<_1903.length-1;i++){_1902.push(_1903[i]);}var path="dojo/i18n!"+_1902.join("/")+"/nls/"+_1903[_1903.length-1].replace(".html","");require([path],lang.hitch(this,function(nls){lang.mixin(this,nls);}));dojo["cache"]("Sage",this.templateLocation);}});return _1900;});},"Sage/UI/SummaryContainer":function(){define(["dijit/_Widget","Sage/_Templated","Sage/UI/SummaryContents","dojo/_base/declare"],function(_1904,_1905,_1906,_1907){var _1908=_1907("Sage.UI.SummaryContainer",[_1904,_1905],{widgetsInTemplate:false,templateLocation:"",contentNode:null,paneContents:null,entity:null,postProcessCallBack:false,attributeMap:{"content":{node:"contentNode",type:"innerHTML"}},widgetTemplate:new Simplate(["<div class=\"EntityCard\">","<div dojoAttachPoint=\"contentNode\">Loading...</div>","</div>"]),_setEntityAttr:function(_1909){this.entity=_1909;var pane=new _1906({templateLocation:this.templateLocation,entity:_1909});dojo.place(pane.domNode,this.contentNode,"only");pane.startup();this.paneContents=pane;if(this.postProcessCallBack){this.postProcessCallBack(this.entity);}},startup:function(){if(this.entity){var pane=new _1906({templateLocation:this.templateLocation,entity:this.entity});dojo.place(pane.domNode,this.contentNode,"only");pane.startup();this.paneContents=pane;if(this.postProcessCallBack){this.postProcessCallBack(this.entity);}}},destroy:function(){if(this.paneContents){this.paneContents.destroy(arguments);}this.inherited(arguments);}});return _1908;});},"Sage/UI/SummaryContents":function(){define(["dijit/_Widget","Sage/_Templated","dojo/_base/lang","dojo/_base/declare"],function(_190a,_190b,lang,_190c){var _190d=_190c("Sage.UI.SummaryContents",[_190a,_190b],{widgetsInTemplate:true,templateLocation:"",templateString:"",widgetTemplate:"",constructor:function(_190e){this.inherited(arguments);var _190f=["Sage"];var _1910=_190e.templateLocation.split("/");for(var i=0;i<_1910.length-1;i++){_190f.push(_1910[i]);}var path="dojo/i18n!"+_190f.join("/")+"/nls/"+_1910[_1910.length-1].replace(".html","");require([path],lang.hitch(this,function(nls){lang.mixin(this,nls);}));var _1911=_190e.templateLocation||this.templateLocation;if(dojo.config.isDebug){_1911=_1911+"?_t="+new Date().valueOf();}this.templateString=dojo["cache"]("Sage",_1911);var _1912=eval(this.templateString);this.widgetTemplate=new Simplate(_1912);}});return _190d;});},"Sage/UI/Controls/SummaryAggregate":function(){define(["dijit/_Widget","Sage/_Templated","dijit/Tooltip","Sage/UI/GridMenuItem","Sage/Data/BaseSDataStore","Sage/UI/Columns/SlxLink","Sage/UI/Columns/Phone","dojo/i18n!../nls/SDataLookup","dojo/_base/declare"],function(_1913,_1914,_1915,_1916,_1917,_1918,phone,_1919,_191a){var _191b=_191a("Sage.UI.Controls.SummaryAggregate",[_1913,_1914],{loadingText:_1919.loadingText,noDataText:_1919.noDataText,widgetsInTemplate:true,value:"",content:"",valueNode:null,linkTabName:"",entityId:"",linkPage:"",toolTip:false,_button:null,_menu:null,store:false,grid:false,popupStructure:null,resourceKind:"",select:null,where:"",widgetTemplate:new Simplate(["<span>","<button data-dojo-type=\"dijit.form.ComboButton\" data-dojo-attach-point=\"_button\" data-dojo-attach-event=\"onClick:_click\" >","<div data-dojo-type=\"dijit.Menu\" data-dojo-attach-point=\"_menu\">","</div>","</button>","</span>"]),constructor:function(){this.select=[];this.popupStructure=[];this.inherited(arguments);},_click:function(){if(!this.linkPage){this._findlinkPage();}var url=this.linkPage+"?entityid="+this.entityId||"";if(this.linkTabName){url=url+"&activetab="+this.linkTabName;}document.location=url;},_setValueAttr:function(value){this.value=value;this._button.set("label",value);},startup:function(){this.inherited(arguments);if(!this.store){if(this.select.length===0){this.select.push("id");for(var i=0;i<this.popupStructure.length;i++){this.select.push(this.popupStructure[i]["field"]);}}this.store=new _1917({service:Sage.Data.SDataServiceRegistry.getSDataService("dynamic"),resourceKind:this.resourceKind,select:this.select});}if(!this.grid){this.grid=new _1916({gridOptions:{store:this.store,rowsPerPage:40,structure:this.popupStructure,loadingMessage:this.loadingText,noDataMessage:this.noDataText,selectionMode:"single",query:this.where.replace(/~magicquote~/g,"'"),height:"250px",width:"300px"}});this._menu.addChild(this.grid);this._menu.set("style",{width:"350px"});this.grid.startup();}},_findlinkPage:function(){if(!this.linkPage){var url=document.location.href;if(url.indexOf("?")>-1){this.linkPage=url.substring(0,url.indexOf("?"));}}},destroy:function(){this.inherited(arguments);if(this.grid){this.grid.destroy();}}});Sage.UI.Controls.SummaryAggregate.markupFactory=function(props,node,ctor){var _191c=function(n){var w=d.attr(n,"width")||"auto";if((w!="auto")&&(w.slice(-2)!="em")&&(w.slice(-1)!="%")){w=parseInt(w,10)+"px";}return w;};if(!props.popupStructure){var d=dojo;var _191d=[];var _191e=window.isMultiCurrencyEnabled();d.query("> span",node).forEach(function(span,_191f){var cell={name:d.trim(d.attr(span,"name")||span.innerHTML),type:d.attr(span,"cellType")||false,field:d.trim(d.attr(span,"field")||""),id:d.trim(d.attr(span,"id")||""),idField:d.trim(d.attr(span,"idField")||""),queryParams:d.trim(d.attr(span,"queryParams")||""),pageName:d.trim(d.attr(span,"pageName")||""),image:d.trim(d.attr(span,"icon")||""),multiCurrency:_191e,exchangeRateType:d.trim(d.attr(span,"exchangeRateType")||"")};if(d.hasAttr(span,"width")){cell["width"]=_191c(span);}cell.type=cell.type?dojo.getObject(cell.type):dojox.grid.cells.Cell;if(cell.type&&cell.type.markupFactory){cell.type.markupFactory(span,cell);}if(cell.name==="&nbsp;"||cell.name===""){cell.name=cell.field;}_191d.push(cell);});props.popupStructure=_191d;}return new ctor(props,node);};return _191b;});},"Sage/UI/SDataSummaryFormatterScope":function(){define(["Sage/UI/SummaryContainer","dojo/i18n","Sage/UI/SummaryFormatterScope","Sage/Data/SDataSummaryViewDataManager","Sage/UI/Controls/SummaryAggregate","dojo/_base/declare"],function(_1920,i18n,_1921,_1922,_1923,_1924){var _1925=_1924("Sage.UI.SDataSummaryFormatterScope",[_1921],{constructor:function(args){dojo.mixin(this,args);this.widgets=[];this.preFetchResources();this._setupDataManager();},_setupDataManager:function(){this.dataManager=new _1922(this.requestConfiguration);if(Sage.Services.hasService("SummaryViewDataManager")){Sage.Services.removeService("SummaryViewDataManager");}Sage.Services.addService("SummaryViewDataManager",this.dataManager);}});return _1925;});},"Sage/Data/SDataSummaryViewDataManager":function(){define(["Sage/Data/SDataServiceRegistry","Sage/Data/SDataStore","dojo/_base/declare","dojo/_base/lang"],function(_1926,_1927,_1928,lang){var _1929=_1928("Sage.Data.SDataSummaryRequestQueue",null,{select:[],resourceKind:"",fetching:false,serviceName:"dynamic",include:[],service:null,useBatchRequest:false,expandRecurrences:null,constructor:function(_192a){lang.mixin(this,_192a);this.requestHash={};this.fetching=false;},add:function(_192b,_192c){var _192d=this.requestHash[_192b];if((_192d)&&(_192d.id!==_192c.id)){if(!_192d.duplicates){_192d.duplicates=[];}var found=false;for(var i=0;i<_192d.duplicates.length;i++){if(_192d.duplicates[i].context.id===_192c.id){found=true;}}if(!found){_192d.duplicates.push({id:_192c.id,context:_192c});}}else{this.requestHash[_192b]=_192c;}},send:function(_192e,_192f){this.fetching=true;this.service=_1926.getSDataService(this.serviceName);var _1930=this;if(this.useBatchRequest){var batch=new Sage.SData.Client.SDataBatchRequest(this.service);batch.setResourceKind(this.resourceKind);batch.setQueryArg("select",this.select.join(","));batch.setQueryArg("include",this.include.join(","));batch.using(function(){for(var bid in _1930.requestHash){var _1931=new Sage.SData.Client.SDataSingleResourceRequest(_1930.service);_1931.setResourceKind(_1930.resourceKind);_1931.setResourceSelector("'"+bid+"'");if(_1930.expandRecurrences!==null){_1931.uri.queryArgs["_expandRecurrences"]=_1930.expandRecurrences;}_1931.setQueryArg("include",_1930.include.join(","));_1931.read();}});batch.commit({success:lang.hitch(_192f,_192e,_1930),failure:lang.hitch(this,this.requestFailed,_1930)});}else{var _1932=[];for(var id in this.requestHash){_1932.push("'"+id+"'");}var _1933=new Sage.SData.Client.SDataResourceCollectionRequest(this.service);var where="Id in ("+_1932.join(",")+")";_1933.setResourceKind(this.resourceKind);_1933.setQueryArg("select",this.select.join(","));_1933.setQueryArg("where",where);_1933.setQueryArg("include",this.include.join(","));_1933.read({success:lang.hitch(_192f,_192e,_1930),failure:lang.hitch(this,this.requestFailed,_1930)});}},requestFailed:function(a,b,c){}});var _1934=_1928("Sage.Data.SDataSummaryViewDataManager",null,{keyField:"$key",constructor:function(){this._createNewQueue();},_createNewQueue:function(){this.queue=new _1929();this.requestTimeout=false;},requestData:function(_1935,_1936,_1937){if(this.queue.fetching){this.oldQueue=this.queue;this._createNewQueue();}if(_1937.keyField){this.keyField=_1937.keyField;}this.queue.select=_1937.select;this.queue.resourceKind=_1937.resourceKind;this.queue.serviceName=_1937.serviceName;this.queue.include=_1937.include;this.queue.useBatchRequest=_1937.useBatchRequest;if(_1937.expandRecurrences!==null){this.queue.expandRecurrences=_1937.expandRecurrences;}this.queue.add(_1935,_1936);if(this.requestTimeout){window.clearTimeout(this.requestTimeout);}var q=this.queue;var self=this;this.requestTimeout=window.setTimeout(function(){q.send(self.receiveData,self);},250);},requestDataNoWait:function(_1938,_1939,_193a){var _193b=new _1929();if(_193a.keyField){this.keyField=_193a.keyField;}_193b.select=_193a.select;_193b.resourceKind=_193a.resourceKind;_193b.serviceName=_193a.serviceName;_193b.include=_193a.include;_193b.useBatchRequest=_193a.useBatchRequest;if(_193a.expandRecurrences!==null){_193b.expandRecurrences=_193a.expandRecurrences;}_193b.add(_1938,_1939);_193b.send(this.receiveData,this);},receiveData:function(_193c,data){var i;for(i=0;i<data.$resources.length;i++){var _193d=data.$resources[i];var id=_193d.id;if(!id){id=_193d[this.keyField];_193d.id=id;}var _193e=_193c.requestHash[_193d.id];if(_193e){if(_193e.duplicates){try{if(!_193e.applied){_193e.applied=true;_193e.set("entity",_193d);var j;for(j=0;j<_193e.duplicates.length;j++){try{if(!_193e.duplicates[j].context.applied){_193e.duplicates[j].context.applied=true;_193e.duplicates[j].context.set("entity",_193d);}}catch(err){console.error(err);}}}}catch(err){console.error(err);}}else{try{if(!_193e.applied){_193e.applied=true;_193e.set("entity",_193d);}}catch(err){console.error(err);}}}}}});return _1934;});},"Sage/MainView/ActivityMgr/AlarmListPanelConfig":function(){define(["Sage/MainView/ActivityMgr/BaseListPanelConfig","Sage/Utility","Sage/Utility/Activity","Sage/UI/SummaryFormatterScope","Sage/UI/SDataSummaryFormatterScope","Sage/Data/SDataStore","Sage/UI/Columns/DateTime","Sage/MainView/ActivityMgr/SnoozeButton","Sage/MainView/ActivityMgr/SnoozeOptions","Sage/Data/SDataServiceRegistry","dojo/_base/declare","dojo/_base/connect","dojo/string","dojo/i18n!./nls/ActivityListPanelConfig","dojo/i18n!./templates/nls/UserActivityDetailSummary","dojo/i18n!./templates/nls/UserActivityListSummary"],function(_193f,_1940,_1941,_1942,_1943,_1944,_1945,_1946,_1947,_1948,_1949,_194a,_194b,_194c){var _194d=_1949("Sage.MainView.ActivityMgr.AlarmListPanelConfig",[_193f],{constructor:function(){this._nlsResources=_194c;this._listId="alarms";this._resourceKind="userActivities";this.entityName="UserActivity";this._contextMenu="ActivityListContextMenu";this._scheduleContextMenu="ScheduleContextMenu";this._service=_1948.getSDataService("system");this._structure=this._getStructure();this._select=this._getSelect();this._include=this._getInclude();this._sort=this._getSort();this._where=this._getWhere();this._store=this._getStore();this.list=this._getListConfig();this.summary=this._getSummaryConfig();this.toolBar=this._getToolBars();this.keyField="$key";this.hasCompositeKey=true;this.rebuildOnRefresh=true,_194a.subscribe("/entity/activity/change",this._onListRefresh);_194a.subscribe("/entity/activity/delete",this._onListRefresh);_194a.subscribe("/entity/activity/create",this._onListRefresh);_194a.subscribe("/entity/userActivity/change",this._onListRefresh);_194a.subscribe("/entity/userActivity/delete",this._onListRefresh);_194a.subscribe("/entity/userActivity/create",this._onListRefresh);_194a.subscribe("/entity/activity/confirm",this._onListRefresh);_194a.subscribe("/entity/activity/decline",this._onListRefresh);},_onListRefresh:function(event){var _194e=Sage.Services.getService("ActivityService");_194e.refreshList("alarms");},_getSelect:function(){return ["Activity/Attachment","Activity/Timeless","Activity/Recurring","Activity/RecurIterations","Activity/Alarm","Activity/AlarmTime","Activity/Type","Activity/StartDate","Activity/Duration","Activity/ContactName","Activity/ContactId","Activity/LeadName","Activity/LeadId","Activity/AccountName","Activity/AccountId","Activity/Description","Activity/Priority","Activity/Leader","UserId","AlarmTime","Alarm","Status"];},_getInclude:function(){return ["Activity","$descriptors"];},_getSort:function(){return [];},_getWhere:function(){return _194b.substitute("(User.Id eq '${0}' and Status ne 'asDeclned') and ((Alarm eq true and AlarmTime ne null and AlarmTime lt '${1}') or (Alarm eq null and AlarmTime eq null and Activity.Alarm eq true and Activity.AlarmTime lt '${1}'))",[this._currentUserId,Sage.Utility.Convert.toIsoStringFromDate(new Date())]);},_getStructure:function(){var _194f="<div class='Global_Images icon16x16 icon_attach_to_16' title='"+this._nlsResources.colNameAttachment+"' />";var _1950="<div class='Global_Images icon16x16 icon_recurring' title='"+this._nlsResources.colNameRecurring+"' />";var _1951="<div class='Global_Images icon16x16 icon_unconfirmedActivity16x16' title='"+this._nlsResources.colNameUnConfirmStatus+"' />";var _1952=this._nlsResources.colNameType||"Activity Type";var _1953=this._nlsResources.colNameStartDate||"Start Date";var _1954=this._nlsResources.colNameDuration||"Duration";var _1955=this._nlsResources.colNameContact||"Name";var _1956=this._nlsResources.colNameAccount||"Account/Company";var _1957=this._nlsResources.colNameRegarding||"Regarding";var _1958=this._nlsResources.colNamePriority||"Priority";var _1959=this._nlsResources.colNameUserId||"Leader";var _195a=this._nlsResources.colNameTypeName||"Type";return [{field:"Status",name:_1951,type:_1941.activityConfirmStatusCell,width:"20px"},{field:"Activity.Attachment",name:_194f,type:_1941.activityAttachCell,width:"20px"},{field:"Activity.Recurring",name:_1950,type:_1941.activityRecurringCell,width:"20px"},{field:"Activity.Type",name:_1952,type:_1941.activityTypeCell,width:"90px"},{field:"Activity.StartDate",name:_1953,type:_1945,timelessField:"Activity.Timeless",width:"100px"},{field:"Activity.Duration",name:_1954,type:_1941.activityDurationCell,width:"40px"},{field:"Activity.ContactId",name:_195a,type:_1941.activityNameTypeCell,width:"40px"},{field:"Activity.ContactName",name:_1955,type:_1941.activityNameCell,width:"200px"},{field:"Activity.AccountName",name:_1956,type:_1941.activityAccountCell,width:"200px"},{field:"Activity.Description",name:_1957,width:"100px"},{field:"Activity.Priority",name:_1958,width:"40px"},{field:"Activity.Leader",name:_1959,type:_1941.activityLeaderCell,width:"200px"}];},_getSummaryConfig:function(){var store=new _1944({id:this._listId,service:this._service,resourceKind:this._resourceKind,include:["Activity","$descriptors"],select:["$key"],expandRecurrences:false,where:this._where});var _195b=[{field:"$key",formatter:"formatSummary",width:"100%",name:"Summary View"}];return {structure:_195b,layout:"layout",store:store,rowHeight:170,rowsPerPage:10,formatterScope:this._getFormatterScope()};},_getDetailConfig:function(){var _195c=this._getFormatterScope();return {resourceKind:this._resourceKind,requestConfiguration:this._getSummaryDetailRequestConfig(),templateLocation:"MainView/ActivityMgr/templates/UserActivityDetailSummary.html"};},_getSummaryListRequestConfig:function(){return {resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["$key","Alarm","Status","User","Activity/Attachment","Activity/Timeless","Activity/Recurring","Activity/RecurIterations","Activity/Type","Activity/StartDate","Activity/Duration","Activity/ContactName","Activity/ContactId","Activity/LeadName","Activity/LeadId","Activity/AccountName","Activity/AccountId","Activity/Description","Activity/Priority","Activity/Leader","Activity/Location","Activity/TicketId","Activity/TicketNumber","Activity/OpportunityId","Activity/OpportunityName","Activity/Notes","Activity/PhoneNumber","Activity/AttendeeCount"],include:["Activity","$descriptors"],useBatchRequest:true,expandRecurrences:false};},_getSummaryDetailRequestConfig:function(){var _195d={resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["$key","Alarm","Status","User","Activity/Attachment","Activity/Timeless","Activity/Recurring","Activity/RecurIterations","Activity/Type","Activity/StartDate","Activity/Duration","Activity/ContactName","Activity/ContactId","Activity/LeadName","Activity/LeadId","Activity/AccountName","Activity/AccountId","Activity/Description","Activity/Priority","Activity/Leader","Activity/Location","Activity/TicketId","Activity/TicketNumber","Activity/OpportunityId","Activity/OpportunityName","Activity/LongNotes","Activity/PhoneNumber","Activity/AttendeeCount"],include:["Activity","$descriptors"],useBatchRequest:true,expandRecurrences:false};return _195d;},_getFormatterScope:function(){var _195e=this._getSummaryListRequestConfig();var _195f=new _1943({templateLocation:"MainView/ActivityMgr/templates/UserActivityListSummary.html",resetDataManager:true,requestConfiguration:_195e});return _195f;},_getToolBars:function(){var _1960={items:[{custom:true,imageClass:"icon_SnoozeAlarm_16x16",tooltip:this._nlsResources.SnoozeAlarm||"Snooze Alarm",onClick:function(){var _1961=new _1947();_1961.show();}},{custom:true,imageClass:"icon_DismissAlarm_16x16",tooltip:this._nlsResources.DismissAlarm||"Dismiss Alarm",onClick:function(){var _1962=Sage.Services.getService("ActivityService");_1962.dismissAlarm();}}]};this.updateToolBar=true;return _1960;},getTimelessProperty:function(_1963){return "Activity.Timeless";}});return _194d;});},"Sage/MainView/ActivityMgr/SnoozeButton":function(){define(["dijit/_Widget","Sage/_Templated","dojo/_base/declare"],function(_1964,_1965,_1966){var _1967=_1966("Sage.MainView.ActivityMgr.SnoozeButton",[_1964,_1965],{widgetsInTemplate:true,_started:false,widgetTemplate:new Simplate(["<span class=\"alarm-button\">","<button data-dojo-type=\"dijit.form.ComboButton\" data-dojo-attach-point=\"_snoozeButton\" data-dojo-attach-event=\"onClick:_cboClick\" class=\"\" >","<div data-dojo-type=\"Sage.MainView.ActivityMgr.SnoozeOptions\" data-dojo-attach-point=\"_snoozeOptions\"></div>","</button>","</span>"]),startup:function(){if(this._started){return;}this.inherited(arguments);this._started=true;},_cboClick:function(){this._snoozeButton.openDropDown();},destroy:function(){this._snoozeButton.destroyRecursive();}});return _1967;});},"Sage/MainView/ActivityMgr/SnoozeOptions":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","dijit/Dialog","dijit/form/Button","dijit/form/FilteringSelect","dojo/_base/declare","dojo/i18n!./nls/SnoozeOptions"],function(_1968,_1969,_196a,_196b,_196c,_196d,_196e,_196f){var _1970=_196e("Sage.MainView.ActivityMgr.SnoozeOptions",[_196a,_1968,_1969],{fiveMinText:"5 minutes",tenMinText:"10 minutes",fifteenMinText:"15 minutes",thirtyMinText:"30 minutes",oneHourText:"x1 hour",twoHourText:"2 hours",fourHourText:"4 hours",eightHourText:"8 hours",oneDayText:"1 day",twoDayText:"2 days",threeDayText:"3 days",oneWeekText:"1 week",twoWeekText:"2 weeks",snoozeText:"Snooze",snoozeByText:"Snooze by:",snoozeAllText:"Snooze All",snoozeTitle:"Snooze Alarms",widgetsInTemplate:true,templateString:["<div>","<div data-dojo-type=\"dijit.Dialog\" id=\"_snoozeDialog\" title=\"${snoozeTitle}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onHide:hide\">","<div class=\"alarm-snoozebar\" dojoAttachPoint=\"_snoozebar\">","<table>","<tr>","<td class=\"snoozeText\">${snoozeByText}</td>","<td class=\"snoozeBy\">","<select name=\"selectSnoozeBy\" dojoAttachPoint=\"_selSnoozeBy\" data-dojo-type=\"dijit.form.FilteringSelect\">","<option value=\"5\" selected=\"selected\">${fiveMinText}</option>","<option value=\"10\" >${tenMinText}</option>","<option value=\"15\" >${fifteenMinText}</option>","<option value=\"30\" >${thirtyMinText}</option>","<option value=\"60\" >${oneHourText}</option>","<option value=\"120\" >${twoHourText}</option>","<option value=\"240\" >${fourHourText}</option>","<option value=\"480\" >${eightHourText}</option>","<option value=\"1440\" >${oneDayText}</option>","<option value=\"2880\" >${twoDayText}</option>","<option value=\"4320\" >${threeDayText}</option>","<option value=\"10080\" >${oneWeekText}</option>","<option value=\"20160\" >${twoWeekText}</option>","</select>","</td>","<td class=\"snoozeActions\">","<button data-dojo-type=\"dijit.form.Button\" type=\"button\" dojoAttachEvent=\"onClick:_snooze\">${snoozeText}</button>","</td>","</tr>","</table>","</div>","</div>","</div>"].join(""),constructor:function(){dojo.mixin(this,_196f);},show:function(){this._showWithUserOptions();},_showWithUserOptions:function(){var _1971=Sage.Services.getService("UserOptions");if(_1971){_1971.getByCategory("ActivityAlarm",this._receivedOptions,this);}},_receivedOptions:function(data){var opts=data["$resources"];for(var i=0;i<opts.length;i++){var opt=opts[i];if(opt["name"].toUpperCase()==="DEFAULTSNOOZE"){var _1972=opt["value"];this._selSnoozeBy.setValue(_1972);}}this._dialog.show();},hide:function(){this.destroy();},destroy:function(){this._dialog.destroyRecursive();},_snooze:function(value){var _1973=Sage.Services.getService("ActivityService");var _1974=this._getNewAlarmTimeOptions();this.hide();_1973.snooze(null,_1974);},_snoozeAll:function(){},_getNewAlarmTime:function(){var _1975=this._getNewAlarmTimeOptions();var _1976=dojo.date.add(new Date(),_1975.interval,_1975.duration);return Sage.Utility.Convert.toIsoStringFromDate(_1976);},_getNewAlarmTimeOptions:function(){var dur=5,_1977="minute";var _1978=this._selSnoozeBy.get("displayedValue");var _1979=this._selSnoozeBy.get("value");switch(_1979){case this.tenMinText:dur=10;break;case this.fifteenMinText:dur=15;break;case this.thirtyMinText:dur=30;break;case this.oneHourText:dur=1;_1977="hour";break;case this.twoHourText:dur=2;_1977="hour";break;case this.fourHourText:dur=4;_1977="hour";break;case this.eightHourText:dur=8;_1977="hour";break;case this.oneDayText:dur=1;_1977="day";break;case this.twoDayText:dur=2;_1977="day";break;case this.threeDayText:dur=3;_1977="day";break;case this.oneWeekText:dur=1;_1977="week";break;case this.twoWeekText:dur=2;_1977="week";break;default:dur=_1979;}var _197a={name:_1978,duration:dur,interval:_1977};return _197a;},_showSnooze:function(){}});return _1970;});},"Sage/MainView/ActivityMgr/AllOpenListPanelConfig":function(){define(["Sage/MainView/ActivityMgr/BaseListPanelConfig","Sage/Utility","Sage/Utility/Activity","Sage/UI/SDataSummaryFormatterScope","Sage/Data/BaseSDataStore","Sage/UI/Columns/DateTime","Sage/Data/SDataServiceRegistry","dojo/_base/declare","dojo/_base/connect","dojo/i18n!./nls/ActivityListPanelConfig","dojo/i18n!./templates/nls/AllOpenListSummary","dojo/i18n!./templates/nls/AllOpenDetailSummary"],function(_197b,_197c,_197d,_197e,_197f,_1980,_1981,_1982,_1983,_1984){var _1985=_1982("Sage.MainView.ActivityMgr.AllOpenListPanelConfig",[_197b],{constructor:function(){this._nlsResources=_1984;this._listId="allOpen";this._resourceKind="activities";this.entityName="Activity";this._contextMenu="ActivityListContextMenu";this._scheduleContextMenu="ScheduleContextMenu";this._service=_1981.getSDataService("system");this._structure=this._getStructure();this._select=this._getSelect();this._include=this._getInclude();this._sort=this._getSort();this._where=this._getWhere();this._store=this._getStore();this.list=this._getListConfig();this.list.selectionMode="single";this.summary=this._getSummaryConfig();this.detail=this._getDetailConfig();this.toolBar=this._getToolBars();_1983.subscribe("/entity/activity/change",this._onListRefresh);_1983.subscribe("/entity/activity/delete",this._onListRefresh);_1983.subscribe("/entity/activity/create",this._onListRefresh);},_onListRefresh:function(event){var _1986=Sage.Services.getService("ActivityService");_1986.refreshList("allopen");},_getSelect:function(){return ["$key","Attachment","Timeless","Recurring","RecurIterations","Alarm","Type","StartDate","Duration","ContactName","ContactId","LeadName","LeadId","AccountName","AccountId","Description","Priority","Leader","RecurrenceState","AttendeeCount"];},_getInclude:function(){return ["$descriptors"];},_getSort:function(){return [{attribute:"StartDate",descending:true}];},_getWhere:function(){return "(Type ne \"atLiterature\" )";},_getStructure:function(){var _1987="<div class='Global_Images icon16x16 icon_attach_to_16' title='"+this._nlsResources.colNameAttachment+"' />";var _1988="<div class='Global_Images icon16x16 icon_recurring' title='"+this._nlsResources.colNameRecurring+"' />";var _1989="<img style='width: 16px; height: 16px' src='images/icons/Alarm_16x16.gif' title='"+this._nlsResources.colNameAlarm+"' alt='"+this._nlsResources.colNameAlarm+"' />";var _198a=this._nlsResources.colNameType||"Type";var _198b=this._nlsResources.colNameStartDate||"Start Date";var _198c=this._nlsResources.colNameDuration||"Duration";var _198d=this._nlsResources.colNameAccount||"Account";var _198e=this._nlsResources.colNameRegarding||"Regarding";var _198f=this._nlsResources.colNamePriority||"Priority";var _1990=this._nlsResources.colNameUserId||"Leader";var _1991=this._nlsResources.colNameTypeName||"Type";var _1992=this._nlsResources.colNameContactName||"Name";var _1993=this._nlsResources.colNameAssociationCount||"Participant Count";return [{field:"Alarm",name:_1989,type:_197d.activityAlarmCell,width:"20px"},{field:"Attachment",name:_1987,type:_197d.activityAttachCell,width:"20px"},{field:"Recurring",name:_1988,type:_197d.activityRecurringCell,width:"20px"},{field:"Type",name:_198a,type:_197d.activityTypeCell,width:"90px"},{field:"StartDate",name:_198b,type:_1980,timelessField:"Timeless",width:"100px"},{field:"Duration",name:_198c,type:_197d.activityDurationCell,width:"40px"},{field:"ContactId",name:_1991,type:_197d.activityNameTypeCell,width:"40px"},{field:"ContactName",name:_1992,type:_197d.activityNameCell,width:"200px"},{field:"AccountName",name:_198d,type:_197d.activityAccountCell,width:"200px"},{field:"Description",name:_198e,width:"100px"},{field:"Priority",name:_198f,width:"40px"},{field:"Leader",name:_1990,type:_197d.activityLeaderCell,width:"200px"},{field:"AttendeeCount",name:_1993,width:"90px"}];},_getDetailConfig:function(){return {resourceKind:this._resourceKind,requestConfiguration:this._getSummaryDetailRequestConfig(),templateLocation:"MainView/ActivityMgr/templates/AllOpenDetailSummary.html"};},_getSummaryListRequestConfig:function(){return {resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["$key","Attachment","Timeless","Recurring","RecurIterations","Alarm","Type","StartDate","Duration","ContactName","ContactId","LeadName","LeadId","AccountName","AccountId","Description","Priority","Leader/$descriptor","Location","TicketId","TicketNumber","OpportunityId","OpportunityName","Notes","RecurrenceState","PhoneNumber","AttendeeCount"],include:["$descriptors"],useBatchRequest:true};},_getSummaryDetailRequestConfig:function(){return {resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["$key","Attachment","Timeless","Recurring","RecurIterations","Alarm","Type","StartDate","Duration","ContactName","ContactId","LeadName","LeadId","AccountName","AccountId","Description","Priority","Leader/$descriptor","Location","TicketId","TicketNumber","OpportunityId","OpportunityName","LongNotes","RecurrenceState","PhoneNumber","AttendeeCount"],include:["$descriptors"],useBatchRequest:true};},_getFormatterScope:function(){return new _197e({templateLocation:"MainView/ActivityMgr/templates/AllOpenListSummary.html",resetDataManager:true,requestConfiguration:this._getSummaryListRequestConfig()});},_getToolBars:function(){return {items:[]};},getTimelessProperty:function(_1994){return "Timeless";}});return _1985;});},"Sage/MainView/ActivityMgr/ConfirmListPanelConfig":function(){define(["Sage/MainView/ActivityMgr/BaseListPanelConfig","Sage/Utility","Sage/Utility/Activity","Sage/UI/SummaryFormatterScope","Sage/Data/BaseSDataStore","Sage/UI/Columns/DateTime","dojo/_base/declare","dojo/_base/connect","dojo/string","dojox/grid/cells","dojo/i18n!./nls/ConfirmListPanelConfig","dojo/i18n!./templates/nls/ConfirmationListSummary","dojo/i18n!./templates/nls/ConfirmationDetailSummary"],function(_1995,_1996,_1997,_1998,_1999,_199a,_199b,_199c,_199d,_199e,_199f){var _19a0=_199b("Sage.MainView.ActivityMgr.ConfirmListPanelConfig",[_1995],{constructor:function(){this._nlsResources=_199f;this._listId="confirmations";this._resourceKind="UserNotifications";this.entityName="UserNotification";this._contextMenu="ConfimationListContextMenu";this._scheduleContextMenu="ScheduleContextMenu";this._structure=this._getStructure();this._select=this._getSelect();this._include=this._getInclude();this._sort=this._getSort();this._where=this._getWhere();this._store=this._getStore();this.list=this._getListConfig();this.detail=this._getDetailConfig();this.summary=this._getSummaryConfig();this.toolBar=this._getToolBars();_199c.subscribe("/entity/userNotification/change",this._onListRefresh);_199c.subscribe("/entity/userNotification/delete",this._onListRefresh);},_onListRefresh:function(event){var _19a1=Sage.Services.getService("ActivityService");_19a1.refreshList("confirmations");},_getSelect:function(){return ["$key","Type","ActivityId","Activity/Type","Activity/StartDate","Activity/Description","FromUserId","ToUserId","FromUser/UserInfo/UserName","ToUser/UserInfo/UserName"];},_getInclude:function(){return ["UserInfo"];},_getSort:function(){return [{attribute:"Activity.StartDate",descending:true}];},_getWhere:function(){return (this._currentUserId)?_199d.substitute("ToUser.Id eq \"${0}\" ",[this._currentUserId]):"";},_getStructure:function(){var _19a2=this._nlsResources.colNameType||"Activity Type";var _19a3=this._nlsResources.colNameNotification||"Notification";var _19a4=this._nlsResources.colNameStartDate||"Start Date";var _19a5=this._nlsResources.colNameRegarding||"Regarding";var _19a6=this._nlsResources.colNameFromUser||"From";var _19a7=this._nlsResources.colNameToUser||"To User";var _19a8=_199b("Sage.MainView.ActivityMgr.ConfirmListPanelConfig.ActivityConfirmCell",_199e.Cell,{format:function(_19a9,_19aa){var key=_1996.getValue(_19aa,"$key");var type=_1996.getValue(_19aa,"Type");var _19ab=_1997.getConfirmStatusName(type);var html="<a href='javascript:Sage.Link.editConfirmation(\""+key+"\")' >"+_19ab+"</a>";return html;}});var _19ac=_199b("Sage.MainView.ActivityMgr.ConfirmListPanelConfig.ActivityTypeCell",_199e.Cell,{format:function(_19ad,_19ae){var type=this.get(_19ad,_19ae);return "<div><div class='Global_Images icon16x16 "+_1997.getActivityImageClass(type,"small")+"'></div>&nbsp"+_1997.getActivityTypeName(type)+"</div>";}});return [{field:"Type",name:_19a3,type:_19a8,width:"90px"},{field:"Activity.Type",name:_19a2,type:_19ac,width:"90px"},{field:"Activity.StartDate",name:_19a4,type:_199a,timelessField:"Timeless",width:"150px"},{field:"Activity.Description",name:_19a5,width:"300px"},{field:"FromUser.UserInfo.UserName",name:_19a6,width:"100px"},{field:"ToUser.UserInfo.UserName",name:_19a7,width:"100px"}];},_getDetailConfig:function(){var _19af=this._getFormatterScope();return {resourceKind:this._resourceKind,requestConfiguration:{mashupName:"ActivityManager",queryName:"ConfirmationDetailSummary_query"},templateLocation:"MainView/ActivityMgr/templates/ConfirmationDetailSummary.html",postProcessCallBack:false};},_getFormatterScope:function(){return new _1998({requestConfiguration:{mashupName:"ActivityManager",queryName:"ConfirmationListSummary_query"},templateLocation:"MainView/ActivityMgr/templates/ConfirmationListSummary.html"});},_getToolBars:function(){return {items:[]};}});return _19a0;});},"Sage/MainView/ActivityMgr/EventListPanelConfig":function(){define(["Sage/MainView/ActivityMgr/BaseListPanelConfig","Sage/Utility","Sage/Utility/Activity","Sage/UI/SummaryFormatterScope","Sage/Data/BaseSDataStore","Sage/UI/Columns/DateTime","dojo/_base/declare","dojo/_base/connect","dojo/string","dojox/grid/cells","dojo/i18n!./nls/EventListPanelConfig","dojo/i18n!./templates/nls/EventSummary"],function(_19b0,_19b1,_19b2,_19b3,_19b4,_19b5,_19b6,_19b7,_19b8,_19b9,_19ba){var _19bb=_19b6("Sage.MainView.ActivityMgr.EventListPanelConfig",[_19b0],{constructor:function(){this._nlsResources=_19ba;this._listId="events";this._resourceKind="events";this.entityName="Event";this._contextMenu="EventListContextMenu";this._securedAction="ActivitiesViewEvents";this._structure=this._getStructure();this._select=this._getSelect();this._sort=this._getSort();this._where=this._getWhere();this._store=this._getStore();this.list=this._getListConfig();this.detail=this._getDetailConfig();this.summary=this._getSummaryConfig();this.toolBar=this._getToolBars();_19b7.subscribe("/entity/event/create",this._onListRefresh);_19b7.subscribe("/entity/event/change",this._onListRefresh);_19b7.subscribe("/entity/event/delete",this._onListRefresh);},_onListRefresh:function(event){var _19bc=Sage.Services.getService("ActivityService");_19bc.refreshList("events");},_getSelect:function(){return ["$key","Type","StartDate","EndDate","Location","Description","User/UserInfo/UserName","User/UserAccessToOtherCal/OthersAccessToUserCal/Id"];},_getSort:function(){return [{attribute:"StartDate",descending:true}];},_getWhere:function(){return (this._currentUserId)?_19b8.substitute("(User.UserAccessToOtherCal.OthersAccessToUserCal.Id eq \"${0}\")",[this._currentUserId]):"";},_getStructure:function(){var _19bd=this._nlsResources.colNameType||"Type";var _19be=this._nlsResources.colNameStartDate||"Start Date";var _19bf=this._nlsResources.colNameEndDate||"End Date";var _19c0=this._nlsResources.colNameDescription||"Description";var _19c1=this._nlsResources.colNameUser||"User";var _19c2=this._nlsResources.colNameLocation||"Location";_19b6("Sage.MainView.ActivityMgr.EventListPanelConfig.EditEventCell",_19b9.Cell,{format:function(_19c3,_19c4){var key=Sage.Utility.getValue(_19c4,"$key");var html="<a href='javascript:Sage.Link.editEvent(\""+key+"\")' >"+"Edit"+"</a>";return html;}});_19b6("Sage.MainView.ActivityMgr.EventListPanelConfig.EventTypeCell",_19b9.Cell,{format:function(_19c5,_19c6){var key=Sage.Utility.getValue(_19c6,"$key");var type=Sage.Utility.getValue(_19c6,"Type");var html="<a href='javascript:Sage.Link.editEvent(\""+key+"\")' >"+type+"</a>";return html;}});return [{field:"Type",name:_19bd,type:Sage.MainView.ActivityMgr.EventListPanelConfig.EventTypeCell,width:"100px"},{field:"StartDate",name:_19be,type:_19b5,dateOnly:true,utc:false,width:"100px"},{field:"EndDate",name:_19bf,type:_19b5,dateOnly:true,utc:false,width:"100px"},{field:"User.UserInfo.UserName",name:_19c1,width:"120px"},{field:"Location",name:_19c2,width:"200px"},{field:"Description",name:_19c0,width:"300px"}];},_getDetailConfig:function(){var _19c7=this._getFormatterScope();return {resourceKind:this._resourceKind,requestConfiguration:{mashupName:"ActivityManager",queryName:"EventSummary_query"},templateLocation:"MainView/ActivityMgr/templates/EventSummary.html",postProcessCallBack:false};},_getFormatterScope:function(){return new _19b3({requestConfiguration:{mashupName:"ActivityManager",queryName:"EventSummary_query"},templateLocation:"MainView/ActivityMgr/templates/EventSummary.html"});},_getToolBars:function(){return {items:[]};}});return _19bb;});},"Sage/MainView/ActivityMgr/LitRequestListPanelConfig":function(){define(["Sage/MainView/ActivityMgr/BaseListPanelConfig","Sage/Utility","Sage/Utility/Activity","Sage/UI/SummaryFormatterScope","Sage/Data/BaseSDataStore","Sage/UI/Columns/DateTime","dojo/_base/declare","dojo/_base/connect","dojo/string","dojox/grid/cells","dojo/i18n!./nls/LitRequestListPanelConfig","dojo/i18n!./templates/nls/LitRequestSummary"],function(_19c8,_19c9,_19ca,_19cb,_19cc,_19cd,_19ce,_19cf,_19d0,_19d1,_19d2){var _19d3=_19ce("Sage.MainView.ActivityMgr.LitRequestListPanelConfig",[_19c8],{constructor:function(){this._nlsResources=_19d2;this._listId="literature";this._resourceKind="litRequests";this.entityName="LitRequest";this._contextMenu="LitRequestListContextMenu";this._securedAction="ActivitiesViewLitratureRequests";this._structure=this._getStructure();this._select=this._getSelect();this._sort=this._getSort();this._where=this._getWhere();this._store=this._getStore();this.list=this._getListConfig();this.summary=this._getSummaryConfig();this.toolBar=this._getToolBars();_19cf.subscribe("/entity/litRequest/change",this._onListRefresh);},_onListRefresh:function(event){var _19d4=Sage.Services.getService("ActivityService");_19d4.refreshList("literature");},_getSelect:function(){return ["$key","ContactName","Contact/$key","Description","FillDate","FillStatus","Options","Priority","RequestDate","SendDate","SendVia","TotalCost","FillUser/UserInfo/UserName","RequestUser/UserInfo/UserName","Contact/AccountName","Contact/Address/PostalCode","Contact/Account/AccountId","ReqestUser/$key"];},_getSort:function(){return [{attribute:"RequestDate",descending:true}];},_getWhere:function(){var _19d5=this._nlsResources.litFillStatusComplete||"Completed";return (this._currentUserId)?_19d0.substitute("(RequestUser.Id eq \"${0}\") and (FillStatus ne \"${1}\"  or FillStatus eq null )",[this._currentUserId,_19d5]):"";},_getStructure:function(){var _19d6=this._nlsResources.colNameView||"View";var _19d7=this._nlsResources.colNameContact||"Contact";var _19d8=this._nlsResources.colNameDescription||"Description";var _19d9=this._nlsResources.colNameFillStatus||"Status";var _19da=this._nlsResources.colNamePriority||"Priority";var _19db=this._nlsResources.colNameReqestDate||"Request Date";var _19dc=this._nlsResources.colNameSendDate||"Send Date";var _19dd=this._nlsResources.colNameSendVia||"Send Via";var _19de=this._nlsResources.colNameTotalCost||"Total Cost";var _19df=this._nlsResources.colNameReqestUser||"Request User";var _19e0=this._nlsResources.colNameAccount||"Account";var _19e1=this._nlsResources.colNamePostalCode||"Postal Code";_19ce("Sage.MainView.ActivityMgr.LitRequestListPanelConfig.LitViewCell",_19d1.Cell,{format:function(_19e2,_19e3){var key=_19c9.getValue(_19e3,"$key");return "<a href=\"LitRequest.aspx?entityid="+key+"&modeid=Detail\" >"+_19d6+"</a>";}});_19ce("Sage.MainView.ActivityMgr.LitRequestListPanelConfig.LitContactCell",_19d1.Cell,{format:function(_19e4,_19e5){var _19e6=Sage.Utility.getValue(_19e5,"Contact.$key");var _19e7=Sage.Utility.getValue(_19e5,"ContactName");return "<a href=\"Contact.aspx?entityid="+_19e6+"&modeid=Detail\" >"+_19e7+"</a>";}});_19ce("Sage.MainView.ActivityMgr.LitRequestListPanelConfig.LitAccountCell",_19d1.Cell,{format:function(_19e8,_19e9){var _19ea=Sage.Utility.getValue(_19e9,"Contact.Account.$key");var _19eb=Sage.Utility.getValue(_19e9,"Contact.AccountName");return "<a href=\"Account.aspx?entityid="+_19ea+"&modeid=Detail\" >"+_19eb+"</a>";}});return [{field:"$key",name:" ",type:Sage.MainView.ActivityMgr.LitRequestListPanelConfig.LitViewCell,width:"60px"},{field:"RequestDate",name:_19db,type:_19cd,dateOnly:true,width:"90px"},{field:"Priority",name:_19da,width:"60px"},{field:"Description",name:_19d8,width:"200px"},{field:"ContactName",name:_19d7,type:Sage.MainView.ActivityMgr.LitRequestListPanelConfig.LitContactCell,width:"200px"},{field:"Contact.AccountName",name:_19e0,type:Sage.MainView.ActivityMgr.LitRequestListPanelConfig.LitAccountCell,width:"200px"},{field:"SendDate",name:_19dc,type:_19cd,dateOnly:true,width:"90px"},{field:"SendVia",name:_19dd,width:"60px"},{field:"TotalCost",name:_19de,width:"60px"},{field:"FillStatus",name:_19d9,width:"60px"},{field:"RequestUser.UserInfo.UserName",name:_19df,width:"90px"},{field:"Contact.Address.PostalCode",name:_19e1,width:"60px"}];},_getDetailConfig:function(){return {resourceKind:this._resourceKind,requestConfiguration:{mashupName:"ActivityManager",queryName:"LitRequestSummary_query"},templateLocation:"MainView/ActivityMgr/templates/LitRequestSummary.html",postProcessCallBack:false};},_getFormatterScope:function(){return new _19cb({requestConfiguration:{mashupName:"ActivityManager",queryName:"LitRequestSummary_query"},templateLocation:"MainView/ActivityMgr/templates/LitRequestSummary.html"});},_getToolBars:function(){return {items:[]};}});return _19d3;});},"Sage/MainView/ActivityMgr/PastDueListPanelConfig":function(){define(["Sage/MainView/ActivityMgr/BaseListPanelConfig","Sage/Utility","Sage/Utility/Activity","Sage/UI/SummaryFormatterScope","Sage/UI/SDataSummaryFormatterScope","Sage/Data/SDataStore","Sage/Data/SDataStore","Sage/UI/Columns/DateTime","Sage/Data/SDataServiceRegistry","dojo/_base/declare","dojo/_base/connect","dojo/string","dojo/i18n!./nls/ActivityListPanelConfig","dojo/i18n!./templates/nls/UserActivityDetailSummary","dojo/i18n!./templates/nls/UserActivityListSummary"],function(_19ec,_19ed,_19ee,_19ef,_19f0,_19f1,_19f2,_19f3,_19f4,_19f5,_19f6,_19f7,_19f8){var _19f9=_19f5("Sage.MainView.ActivityMgr.PastDueListPanelConfig",[_19ec],{constructor:function(){this._nlsResources=_19f8;this._listId="pastdue";this._resourceKind="useractivities";this.entityName="UserActivity";this._contextMenu="ActivityListContextMenu";this._scheduleContextMenu="ScheduleContextMenu";this._service=_19f4.getSDataService("system");this._structure=this._getStructure();this._select=this._getSelect();this._include=this._getInclude();this._sort=this._getSort();this._where=this._getWhere();this._store=this._getStore();this.list=this._getListConfig();this.summary=this._getSummaryConfig();this.toolBar=this._getToolBars();this.keyField="$key";this.hasCompositeKey=true;this.rebuildOnRefresh=true,_19f6.subscribe("/entity/activity/change",this._onListRefresh);_19f6.subscribe("/entity/activity/delete",this._onListRefresh);_19f6.subscribe("/entity/activity/create",this._onListRefresh);_19f6.subscribe("/entity/userActivity/change",this._onListRefresh);_19f6.subscribe("/entity/userActivity/delete",this._onListRefresh);_19f6.subscribe("/entity/userActivity/create",this._onListRefresh);_19f6.subscribe("/entity/activity/confirm",this._onListRefresh);_19f6.subscribe("/entity/activity/decline",this._onListRefresh);_19f6.subscribe("/entity/userNotification/delete",this._onListRefresh);},_onListRefresh:function(event){var _19fa=Sage.Services.getService("ActivityService");_19fa.refreshList("pastdue");},_getSelect:function(){return ["Activity/Attachment","Activity/Timeless","Activity/Recurring","Activity/RecurIterations","Activity/Alarm","Activity/Type","Activity/StartDate","Activity/Duration","Activity/ContactName","Activity/ContactId","Activity/LeadName","Activity/LeadId","Activity/AccountName","Activity/AccountId","Activity/Description","Activity/Priority","Activity/Leader","UserId","AlarmTime","Alarm","Status"];},_getInclude:function(){return ["Activity","$descriptors"];},_getSort:function(){return [];},_getWhere:function(){var dt=new Date();var dtNow=Sage.Utility.Convert.toIsoStringFromDate(dt);var _19fb=_19ee.formatTimelessEndDate(dt,"day",-1);return _19f7.substitute("(User.Id eq '${0}') and ( Activity.Type ne \"atLiterature\" ) and ((Alarm eq 'false') or (Alarm eq null)) and ((Activity.StartDate lt '${1}') and ((Activity.Timeless eq 'false') or (Activity.Timeless eq null )) or ((Activity.StartDate lt '${2}') and (Activity.Timeless eq 'true' )))",[this._currentUserId,dtNow,_19fb]);},_getStructure:function(){var _19fc="<div class='Global_Images icon16x16 icon_attach_to_16' title='"+this._nlsResources.colNameAttachment+"' />";var _19fd="<div class='Global_Images icon16x16 icon_recurring' title='"+this._nlsResources.colNameRecurring+"' />";var _19fe="<div class='Global_Images icon16x16 icon_unconfirmedActivity16x16' title='"+this._nlsResources.colNameUnConfirmStatus+"' />";var _19ff=this._nlsResources.colNameType||"Activity Type";var _1a00=this._nlsResources.colNameStartDate||"Start Date";var _1a01=this._nlsResources.colNameDuration||"Duration";var _1a02=this._nlsResources.colNameContact||"Name";var _1a03=this._nlsResources.colNameAccount||"Account/Company";var _1a04=this._nlsResources.colNameRegarding||"Regarding";var _1a05=this._nlsResources.colNamePriority||"Priority";var _1a06=this._nlsResources.colNameUserId||"Leader";var _1a07=this._nlsResources.colNameTypeName||"Type";return [{field:"Status",name:_19fe,type:_19ee.activityConfirmStatusCell,width:"20px"},{field:"Activity.Attachment",name:_19fc,type:_19ee.activityAttachCell,width:"20px"},{field:"Activity.Recurring",name:_19fd,type:_19ee.activityRecurringCell,width:"20px"},{field:"Activity.Type",name:_19ff,type:_19ee.activityTypeCell,width:"90px"},{field:"Activity.StartDate",name:_1a00,type:_19f3,timelessField:"Activity.Timeless",width:"100px"},{field:"Activity.Duration",name:_1a01,type:_19ee.activityDurationCell,width:"40px"},{field:"Activity.ContactId",name:_1a07,type:_19ee.activityNameTypeCell,width:"40px"},{field:"Activity.ContactName",name:_1a02,type:_19ee.activityNameCell,width:"200px"},{field:"Activity.AccountName",name:_1a03,type:_19ee.activityAccountCell,width:"200px"},{field:"Activity.Description",name:_1a04,width:"100px"},{field:"Activity.Priority",name:_1a05,width:"40px"},{field:"Activity.Leader",name:_1a06,type:_19ee.activityLeaderCell,width:"200px"}];},_getSummaryConfig:function(){var store=new _19f1({id:this._listId,service:this._service,resourceKind:this._resourceKind,include:["Activity","$descriptors"],select:["$key"],expandRecurrences:false,where:this._where});var _1a08=[{field:"$key",formatter:"formatSummary",width:"100%",name:"Summary View"}];return {structure:_1a08,layout:"layout",store:store,rowHeight:120,rowsPerPage:10,formatterScope:this._getFormatterScope()};},_getDetailConfig:function(){var _1a09=this._getFormatterScope();return {resourceKind:this._resourceKind,requestConfiguration:this._getSummaryDetailRequestConfig(),templateLocation:"MainView/ActivityMgr/templates/UserActivityDetailSummary.html"};},_getSummaryListRequestConfig:function(){return {resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["$key","Alarm","Status","Activity/Attachment","Activity/Timeless","Activity/Recurring","Activity/RecurIterations","Activity/Type","Activity/StartDate","Activity/Duration","Activity/ContactName","Activity/ContactId","Activity/LeadName","Activity/LeadId","Activity/AccountName","Activity/AccountId","Activity/Description","Activity/Priority","Activity/Leader","Activity/Location","Activity/TicketId","Activity/TicketNumber","Activity/OpportunityId","Activity/OpportunityName","Activity/Notes","Activity/PhoneNumber","Activity/AttendeeCount"],include:["Activity","$descriptors"],useBatchRequest:true,expandRecurrences:false};},_getSummaryDetailRequestConfig:function(){return {resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["$key","Alarm","Status","Activity/Attachment","Activity/Timeless","Activity/Recurring","Activity/RecurIterations","Activity/Type","Activity/StartDate","Activity/Duration","Activity/ContactName","Activity/ContactId","Activity/LeadName","Activity/LeadId","Activity/AccountName","Activity/AccountId","Activity/Description","Activity/Priority","Activity/Leader","Activity/Location","Activity/TicketId","Activity/TicketNumber","Activity/OpportunityId","Activity/OpportunityName","Activity/LongNotes","Activity/PhoneNumber","Activity/AttendeeCount"],include:["Activity","$descriptors"],useBatchRequest:true,expandRecurrences:false};},_getFormatterScope:function(){return new _19f0({templateLocation:"MainView/ActivityMgr/templates/UserActivityListSummary.html",resetDataManager:true,requestConfiguration:this._getSummaryListRequestConfig()});},_getToolBars:function(){return {items:[]};},getTimelessProperty:function(_1a0a){return "Activity.Timeless";}});return _19f9;});},"Sage/MainView/ActivityMgr/FilterConfigurationProvider":function(){define(["Sage/Services/_ServiceMixin","Sage/_ConfigurationProvider","Sage/Utility","Sage/Utility/Activity","Sage/Data/SDataStore","Sage/Services/ActivityService","Sage/MainView/ActivityMgr/ActivityGroupContextService","dijit/registry","dojo/_base/declare","Sage/Utility/Filters","dojo/_base/lang","dojo/json"],function(_1a0b,_1a0c,_1a0d,_1a0e,_1a0f,_1a10,_1a11,_1a12,_1a13,_1a14,lang,json){var _1a15=_1a13("Sage.MainView.ActivityMgr.FilterConfigurationProvider",[_1a0c,_1a0b],{_configuration:null,_hasLayoutConfiguration:false,_hasFilterHiddenConfiguration:false,_currentUserId:false,serviceMap:{"groupContextService":"ClientGroupContext","metaDataService":{type:"sdata",name:"metadata"},"systemDataService":{type:"sdata",name:"system"}},constructor:function(_1a16){this.inherited(arguments);if(this.groupContextService.declaredClass!=="Sage.MainView.ActivityMgr.ActivityGroupContextService"){Sage.Services.removeService("ClientGroupContext");this.groupContextService=new _1a11();Sage.Services.addService("ClientGroupContext",this.groupContextService);}var _1a17=Sage.Services.getService("ClientContextService");if(_1a17){if(_1a17.containsKey("userID")){this._currentUserId=_1a17.getValue("userID");}}this._subscribes.push(dojo.subscribe("/group/context/changed",this,this._onGroupContextChanged));},_onGroupContextChanged:function(){this.onConfigurationChange();},onConfigurationChange:function(){},_createConfiguration:function(entry,_1a18){var _1a19=this.groupContextService.getCurrentListConfig();this._configuration=_1a19.getFilterConfig(this.metaDataService,entry,_1a18);if(!this._configuration){this._configuration={};}this._configuration.getFilterManager=function(){var _1a1a=_1a12.byId("list");return _1a1a&&_1a1a.get("filterManager");};this._hasLayoutConfiguration=true;},requestConfiguration:function(_1a1b){this._configuration={};this._hasLayoutConfiguration=false;this._hasFilterHiddenConfiguration=false;this._onRequestConfigurationSuccess(_1a1b,null);this._getHiddenFilters(_1a1b);},_onRequestConfigurationSuccess:function(_1a1c,entry){this._createConfiguration(entry,_1a1c);this._callOptionsSuccess(_1a1c);},_onRequestConfigurationFailure:function(_1a1d,_1a1e){if(_1a1d.failure){_1a1d.failure.call(_1a1d.scope||this,_1a1e,_1a1d,this);}},getFilterFormatter:function(_1a1f){if(_1a1f){if(_1a1f.filterName==="Duration"){return _1a0e.formatDuration;}}return false;},ModifyFilterQuery:function(_1a20,query){var _1a21=false;if(query){_1a21=true;}if(_1a20.propertyName==="Activity.Duration"){if(_1a21){query="("+query+") and (Activity.Timeless ne true)";}else{query="(Activity.Timeless ne true)";}}else{if(_1a20.propertyName==="Duration"){if(_1a21){query="("+query+") and (Timeless ne true)";}else{query="(Timeless ne true)";}}}return query;},_getHiddenFilters:function(_1a22){var key=this._getHiddenFiltersKey();if(key){_1a14.getHiddenFilters(key,lang.hitch(this,this._onHiddenFiltersFetchComplete,_1a22||{}),function(err){console.error(err);});}},_getHiddenFiltersKey:function(){var key=_1a14.getHiddenFiltersKey();return key;},_onHiddenFiltersFetchComplete:function(_1a23,_1a24){if(_1a24&&_1a24.response&&_1a24.response.value){this._configuration._hiddenFilters=json.parse(_1a24.response.value);if(this._configuration._hiddenFilters&&this._configuration._hiddenFilters.constructor===Array){this._configuration._hiddenFilters={};}}this._configuration._hiddenFiltersKey=this._getHiddenFiltersKey();this._hasFilterHiddenConfiguration=true;this._callOptionsSuccess(_1a23);},_callOptionsSuccess:function(_1a25){if(!this._hasLayoutConfiguration||!this._hasFilterHiddenConfiguration){return;}if(_1a25.success){_1a25.success.call(_1a25.scope||this,this._configuration,_1a25,this);this._hasLayoutConfiguration=false;this._hasFilterHiddenConfiguration=false;}}});return _1a15;});},"Sage/Extensions/Activity/ActivityListCustomTabs/CustomTabsConfig":function(){define([],function(){return {};});},"Sage/Extensions/Activity/ListPanelOverrides/ListPanelOverridesConfig":function(){define([],function(){return {"overrideConfigs":[]};});},"Sage/Extensions/ActivityRequirements":function(){define(["Sage/Extensions/Activity/ListPanelOverrides/ActivityListPanelConfig","Sage/Extensions/Activity/ListPanelOverrides/AllOpenListPanelConfig"],function(){return true;});},"Sage/Extensions/Activity/ListPanelOverrides/ActivityListPanelConfig":function(){define(["Sage/MainView/ActivityMgr/ActivityListPanelConfig","Sage/UI/Columns/SlxLink","dojo/_base/declare","dojo/_base/lang","dojo/i18n!./nls/ActivityListPanelConfig"],function(_1a26,_1a27,_1a28,lang,_1a29){var _1a2a=_1a28("Sage.Extensions.Activity.ListPanelOverrides.ActivityListPanelConfig",[_1a26],{constructor:function(){lang.mixin(this,_1a29);this._select.push("Activity/AttendeeCount");this._structure.push({field:"Activity.AttendeeCount",name:this.colNameAssociationCount,width:"90px"});}});return _1a2a;});},"Sage/Extensions/Activity/ListPanelOverrides/AllOpenListPanelConfig":function(){define(["Sage/MainView/ActivityMgr/AllOpenListPanelConfig","dojo/_base/declare","dojo/_base/lang","dojo/i18n!./nls/AllOpenListPanelConfig"],function(_1a2b,_1a2c,lang,_1a2d){var _1a2e=_1a2c("Sage.Extensions.Activity.ListPanelOverrides.AllOpenListPanelConfig",[_1a2b],{constructor:function(){lang.mixin(this,_1a2d);this._select.push("AttendeeCount");this._structure.push({field:"AttendeeCount",name:this.colNameAssociationCount,width:"90px"});}});return _1a2e;});},"Sage/MainView/SecurityManager":function(){define(["Sage/UI/SDataMainViewConfigurationProvider","Sage/UI/Columns/RadioGroup","Sage/Data/WritableSDataStore","Sage/MainView/SecurityMgr/SecurityManagerGroupContext","dojo/i18n!./nls/SecurityManager","dojo/_base/declare"],function(_1a2f,_1a30,_1a31,_1a32,_1a33,_1a34){var _1a35=_1a34("Sage.MainView.SecurityManager",_1a2f,{_profilesStore:false,_currentProfileId:false,_currentProfileDescription:false,_profileNameCache:{},store:false,entityType:"securityProfileColumns",constructor:function(_1a36){dojo.mixin(this,_1a33);var _1a37=Sage.Services.getService("ClientGroupContext");if(!_1a37||_1a37.declaredClass!="Sage.MainView.SecurityMgr.SecurityManagerGroupContext"){Sage.Services.removeService("ClientGroupContext");_1a37=new _1a32();Sage.Services.addService("ClientGroupContext",_1a37);}if(_1a37){var ctx=_1a37.getContext();this._currentProfileId=ctx.CurrentGroupID;this._currentProfileDescription=ctx.CurrentName;}this.service=Sage.Data.SDataServiceRegistry.getSDataService("system");this.titlePaneConfiguration={tabs:this._getTabsConfig(),menu:this._getMenuConfig(),titleFmtString:this.securityManagerText+": ${0}"};dojo.subscribe("/group/context/changed",this,"onConfigurationChange");},_getListPanelConfig:function(){var _1a38=dijit.byId("refreshBtn");if(!this.refreshEvent){this.refreshEvent=dojo.connect(_1a38,"onClick",this,function(){var _1a39=dijit.byId("list");_1a39._markClean();});}var _1a3a=[{field:"table",name:this.tableText,width:"155px"},{field:"entity",name:this.entityText,width:"130px"},{field:"column",name:this.columnText,width:"140px"},{field:"property",name:this.propertyText,width:"100px"},{field:"access",name:this.accessText,labels:[this.readWriteText,this.readOnlyText,this.noAccessText],width:"300px",type:_1a30,options:["ReadWrite","ReadOnly","NoAccess"],editable:true}];var where=(this._currentProfileId)?dojo.string.substitute("profile.id eq \"${0}\"",[this._currentProfileId]):"";if(!this.store){this.store=new _1a31({id:"securityProfileColumns",service:this.service,isSecurityManager:true,resourceKind:"securityProfileColumns",include:[],select:["table","entity","column","property","access"],directQuery:{conditions:where}});}else{this.store.directQuery={conditions:where};}this.listPanelConfiguration={list:{structure:_1a3a,store:this.store,selectionMode:"none",id:"securityManagerListConfig"},detail:false,summary:false,toolBar:{items:[{icon:"~/ImageResource.axd?scope=global&type=Global_Images&key=Save_16x16",title:this.saveText,onClick:dojo.hitch(this.store,"save")},{icon:"~/ImageResource.axd?scope=global&type=Global_Images&key=Reset_16x16",title:this.resetText,onClick:dojo.hitch(this.store,"revert")}]}};dojo.style(dijit.byId("addGroupButton").domNode,"display","none");return this.listPanelConfiguration;},requestConfiguration:function(_1a3b){if(_1a3b.success){_1a3b.success.call(_1a3b.scope||this,this._getListPanelConfig(),this);}},requestTitlePaneConfiguration:function(_1a3c){if(_1a3c.success){_1a3c.success.call(_1a3c.scope||this,this.titlePaneConfiguration,this);}},onConfigurationChange:function(obj){this._currentProfileId=obj.current.CurrentGroupID;this._currentProfileDescription=obj.current.CurrentName;if(this._currentProfileId&&this._currentProfileId.length===12){if(this._profileNameCache&&this._profileNameCache.hasOwnProperty(this._currentProfileId)){this._setUIForNewGroup(false);}else{this._profilesStore.fetch({onComplete:dojo.hitch(this,"_setUIForNewGroup")});}}},onTitlePaneConfigurationChange:function(){},_setUIForNewGroup:function(_1a3d){var i;if(_1a3d){this._profileNameCache={};for(i=0;i<_1a3d.length;i++){this._profileNameCache[_1a3d[i]["$key"]]=_1a3d[i]["$descriptor"];}}var _1a3e=dijit.byId("titlePane");if(_1a3e){_1a3e.set("title",this._profileNameCache[this._currentProfileId]);}var tabs=dijit.byId("GroupTabs");if(tabs){var _1a3f=tabs.getChildren();for(i=0;i<_1a3f.length;i++){if(_1a3f[i].id===this._currentProfileId){tabs.selectChild(_1a3f[i],false);break;}}}},_getTabsConfig:function(){this._setProfilesStore();this._profilesStore.fetch({onComplete:dojo.hitch(this,"_setUIForNewGroup")});return {store:this._profilesStore,selectedTabId:this._currentProfileId,tabKeyProperty:"$key",tabNameProperty:"profileDescription",fetchParams:{},staticTabs:[],onTabSelect:function(child){var _1a40=Sage.Services.getService("ClientGroupContext");if(_1a40){var ctx=_1a40.getContext();var id=child.id||child;if(ctx.CurrentGroupID===id){return;}var _1a41=dijit.byId("list");_1a41._markClean();_1a40.setCurrentGroup(id,child.title);}},onTabClose:false};},_setProfilesStore:function(){this._profilesStore=this._profilesStore||new _1a31({id:"securityProfilesstore",service:this.service,resourceKind:"securityProfiles",include:[],select:["profileDescription","defaultPermission","profileType"],orderby:"profileDescription"});},_getMenuConfig:function(){this._setProfilesStore();return {id:"profileMenu",img:"images/icons/Groups_16x16.gif",text:this.profilesText,tooltip:this.profilesText,width:"300px",items:[{fn:this._getProfileMenuGrid,scope:this}]};},_getProfileMenuGrid:function(){return new Sage.UI.GridMenuItem({gridOptions:{id:"profileGridInMenu",store:this._profilesStore,rowsPerPage:40,structure:[{field:"profileDescription",name:"Description",width:"290px"}],selectionMode:"single",query:{},height:"400px",width:"350px",onSelected:function(idx){var _1a42=this.getItem(idx);var _1a43=Sage.Services.getService("ClientGroupContext");if(_1a43){var ctx=_1a43.getContext();if(ctx.CurrentGroupID===_1a42["$key"]){return;}var _1a44=dijit.byId("GroupTabs"),_1a45=_1a44.getChildren();for(var i=0;i<_1a45.length;i++){if(_1a45[i].id==_1a42["$key"]){_1a44.selectChild(_1a45[i]);_1a43.setCurrentGroup(_1a42["$key"],_1a42.profileDescription);return;}}}}}});}});return _1a35;});},"Sage/UI/Columns/RadioGroup":function(){define(["dojox/grid/cells/_base","dojo/_base/declare"],function(_1a46,_1a47){var _1a48=_1a47("Sage.UI.Columns.RadioGroup",dojox.grid.cells.AlwaysEdit,{options:null,values:null,labels:[],constructor:function(_1a49){this.values=this.values||this.options;if(this.labels&&this.labels.length>0){var _1a4a=["<table style=\"width:100%\"><tr>"];for(var i=0;i<this.labels.length;i++){_1a4a.push("<td style=\"text-align: center;\">"+this.labels[i]+"</td>");}this.name=_1a4a.join("");}},formatEditing:function(_1a4b,_1a4c){var _1a4d=["<table style=\"width:100%\"><tr>"];for(var i=0;i<this.values.length;i++){_1a4d.push(["<td style=\"text-align: center;\">","<input type=\"radio\""," id=\""+this.values[i]+"_"+_1a4c+"\""," name=\""+this.field+"_"+_1a4c+"\""," value=\""+this.values[i]+"\"",_1a4b===this.values[i]?" checked=\"checked\" />":" />"].join(""));}_1a4d.push("</tr></table>");return _1a4d.join("");},doclick:function(e){if(e.target.tagName==="INPUT"){var _1a4e=this.grid.edit;_1a4e.applyCellEdit(e.target.value,this,e.rowIndex);}}});return _1a48;});},"Sage/MainView/SecurityMgr/SecurityManagerGroupContext":function(){define(["Sage/Groups/GroupContextService","dojo/_base/declare"],function(_1a4f,_1a50){var _1a51=_1a50("Sage.MainView.SecurityMgr.SecurityManagerGroupContext",_1a4f,{_currentContext:{},constructor:function(){dojo.mixin(this._currentContext,this._emptyContext);},getContext:function(){if(this._currentContext.CurrentGroupID===null){this.requestContext();}return this._currentContext;},requestContext:function(){if(this._isRetrievingContext===true){return;}this.setContext("PROF00000001","Read/Write Default");},setContext:function(id,name){this._currentContext.CurrentGroupID=id;this._currentContext.CurrentName=name;this._isRetrievingContext=false;},setCurrentGroup:function(id,name){this.setContext(id,name);this.onCurrentGroupChanged({current:this._currentContext});}});return _1a51;});},"Sage/MainView/ActivityMgr/ActivityCalendar":function(){define(["Sage/Data/WritableSDataStore","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/Utility","dojo/date/locale","dojo/string","dojo/_base/lang","dojo/_base/declare","dojo/i18n!./nls/ActivityCalendar","Sage/Array"],function(_1a52,_1a53,_1a54,_1a55,_1a56,_1a57,lang,_1a58,_1a59){var _1a5a=_1a58("Sage.MainView.ActivityMgr.ActivityCalendar",null,{_contentWindow:null,_activitiesData:null,_eventsData:null,_allData:null,_schedulerEvents:[],_schedulerEvents1:[],_schedulerLoaded:false,_loadHistoryOnStart:false,self:this,_calendarUsers:[],_selectedUsers:[],_currentUser:null,_userOptions:{},_userActivityData:[],_reccurring:[],_currentUserId:null,_currentUserColor:[],_dateRangeStart:null,_dateRangeEnd:null,completedText:"(Completed)",meetingIconUrl:"../../images/icons/meeting_14x14.png",toDoIconUrl:"../../images/icons/To_Do_14x14.png",phoneCallIconUrl:"../../images/icons/Call_14x14.png",personalActivityIconUrl:"../../images/icons/personal_14x14.png",_userColors:[],constructor:function(_1a5b,_1a5c){(function(){this._contentWindow=_1a5b;})();this._currentUserId=lang.trim(_1a55.getClientContextByKey("userID"))||"";this._userOptions=_1a5c;this._userColors["user1"]="#D5E2BD";this._userColors["user2"]="#CFDEF5";this._userColors["user3"]="#FBDBB5";this._userColors["user4"]="#DFC9F6";this._currentUserColor=[];this._nlsResources=_1a59;var _1a5d=function(dt){return dojo.date.locale.format(new Date(dt),{selector:"date",datePattern:"EEE MMM d yyyy 00:00:00 ZZZZ"});};var _1a5e=function(dt){return dojo.date.locale.format(new Date(dt),{selector:"date",datePattern:"EEE MMM d yyyy 24:00:00 ZZZZ"});};var _1a5f=function(data){var _1a60=[{StartDate:_1a5d(Sage.Utility.Convert.toDateFromString(data.StartDate)),EndDate:_1a5e(Sage.Utility.Convert.toDateFromString(data.EndDate)),Text:data.Type,Id:data.$key+"-evt"}];return _1a60;};var self=this;dojo.subscribe("/entity/history/create",function(data){if(data!=null){var _1a61=data.HistoryId||data.$key;if(_1a61){self._getHistoryItem(_1a61);}}});dojo.subscribe("/entity/history/delete",function(key){if(key!=null){self._deleteHistoryItem(key);}});dojo.subscribe("/entity/activity/create",function(data){if(data!=null){if(!data.Timeless){var _1a62=data.Leader.$key;_1a62=lang.trim(_1a62);if(self._isUserSelected(_1a62)){if(data.Recurring){self._refreshSchedulerEvents();}else{var _1a63=self._formatActivityObject(data,_1a62);if(!self._userActivityData[_1a62]){self._userActivityData[_1a62]=[];self._userActivityData[_1a62]["activities"]=[];}self._userActivityData[_1a62]["activities"].push(_1a63);dojo.publish("/entity/activity/addToScheduler",[_1a63,this]);}}}}});dojo.subscribe("/entity/userActivity/create",function(data){if(data!=null&&data.Activity){var actId=data.Activity.$key;var _1a64=data.User.$key;var _1a65=data.Status;if(self._isUserSelected(_1a64)){if(self._reccurring[actId]){self._removeReccurringFromScheduler(actId);window.setTimeout(function(){self._reloadAllActivitiesByActivityId(actId);},1);}else{var _1a66=self._getActivityObjectFromCollection(actId);if(_1a66){var _1a67=self._getUserActivityFromActivity(_1a66,actId,_1a64,_1a65);dojo.publish("/entity/activity/addToScheduler",[_1a67,this]);if(!self._userActivityData[_1a64]){self._userActivityData[_1a64]=[];self._userActivityData[_1a64]["activities"]=[];}self._userActivityData[_1a64]["activities"].push(_1a67);}}}}});dojo.subscribe("/entity/activity/activityScheduler/reloadActivity",function(_1a68){self._reloadAllActivitiesByActivityId(_1a68);});dojo.subscribe("/entity/userActivity/delete",function(data){if(data!=null){var _1a69=data.split(";")[0];var _1a6a=data.split(";")[1];var _1a6b=_1a69.split("=")[1];if(self._reccurring[_1a6b]){self._removeReccurringFromScheduler(_1a6b);window.setTimeout(function(){self._reloadAllActivitiesByActivityId(_1a6b);},1);}else{var _1a6c=_1a6a.split("=")[1];_1a6c=_1a6c.replace("'","");var actId=_1a6b+"-"+_1a6c+"-act";if(lang.trim(_1a55.getClientContextByKey("userID"))==_1a6c){actId="0:"+actId;}dojo.publish("/entity/activity/deleteFromScheduler",[actId,this]);self._removeActivityObjectFromCollection(_1a6b,_1a6c);}}});dojo.subscribe("/entity/activity/change",function(data){if(data!=null&&!data.Timeless){if(data.Recurring||data.RecurrenceState.toLowerCase()!=="rsnotrecurring"){self._refreshSchedulerEvents();}else{if(data.LeaderChanged){self._deleteFromSchedulerByActivity(data.$key);}var _1a6d=null;if(data.Leader&&data.Leader.$key){_1a6d=lang.trim(data.Leader.$key);}if(self._isUserSelected(_1a6d)){var _1a6e=self._formatActivityObject(data,_1a6d);dojo.publish("/entity/activity/updateScheduler",[_1a6e,this]);self._removeActivityObjectFromCollection(data.$key,_1a6d);self._userActivityData[_1a6d]["activities"].push(_1a6e);}var _1a6f=self._getMembersOfActivity(data.$key);if(_1a6f){for(var i=0;i<_1a6f.length;i++){if(_1a6f[i]!==_1a6d){_1a6e=self._formatActivityObject(data,_1a6f[i]);dojo.publish("/entity/activity/updateScheduler",[_1a6e,this]);self._removeActivityObjectFromCollection(data.$key,_1a6f[i]);if(!self._userActivityData[_1a6f[i]]){self._userActivityData[_1a6f[i]]=[];self._userActivityData[_1a6f[i]]["activities"]=[];}self._userActivityData[_1a6f[i]]["activities"].push(_1a6e);}}}}}else{if(data!=null&&data.TimelessChanged){self._deleteFromSchedulerByActivity(data.$key);}}});dojo.subscribe("/entity/activity/delete/single",function(_1a70){self._deleteFromSchedulerByActivity(_1a70);});dojo.subscribe("/entity/activity/confirm",function(_1a71){if(_1a71){self._refreshSchedulerByActivity(_1a71.activityId);}});dojo.subscribe("/entity/activity/decline",function(_1a72){if(_1a72){self._refreshSchedulerByActivity(_1a72.activityId);}});dojo.subscribe("/entity/activity/delete/recurrence",function(_1a73){var actId;if(_1a73){actId=_1a73.substring(0,13);if(self._userActivityData){for(var i in self._userActivityData){if(self._userActivityData[i]!=null){var _1a74=[];if(self._userActivityData[i]["activities"]){for(var k=0;k<self._userActivityData[i]["activities"].length;k++){if(self._userActivityData[i]["activities"][k]){var id=self._userActivityData[i]["activities"][k]["id"];if(id.indexOf(actId)>-1){_1a74.push(id);}}}if(_1a74.length>0){dojo.publish("/entity/activity/clearSchedulerEvents",[_1a74,this]);}}}}}}});dojo.subscribe("/entity/activity/delete",function(_1a75){self._deleteFromSchedulerByActivity(_1a75);});dojo.subscribe("/entity/event/create",function(data){if(data!=null){var _1a76=data.UserId;_1a76=lang.trim(_1a76);var _1a77=self._formatEventObject(data,_1a76);dojo.publish("/entity/activity/addToScheduler",[_1a77,this]);}});dojo.subscribe("/entity/event/change",function(data){if(data!=null){var _1a78=data.UserId;_1a78=lang.trim(_1a78);var _1a79=self._formatEventObject(data,_1a78);dojo.publish("/entity/activity/updateScheduler",[_1a79,this]);}});dojo.subscribe("/entity/event/delete/single",function(_1a7a){var evId=_1a7a+"-evt";dojo.publish("/entity/activity/deleteFromScheduler",[evId,this]);});dojo.subscribe("/entity/calendar/userlist/add",function(data){(function(){dojo.publish("/entity/activity/updateScheduler",[_1a5f(data),this]);})();});completedText=this._nlsResources.completedText||"(Completed)";},_deleteHistoryItem:function(_1a7b){if(this._userActivityData){for(var i in this._userActivityData){if(this._userActivityData[i]!=null){if(this._userActivityData[i]["history"]){for(var k=0;k<this._userActivityData[i]["history"].length;k++){if(this._userActivityData[i]["history"][k]){var id=this._userActivityData[i]["history"][k]["id"];if(id.indexOf(_1a7b)>-1){delete this._userActivityData[i]["history"][k];dojo.publish("/entity/activity/deleteFromScheduler",[id,this]);break;}}}}}}}},_deleteFromSchedulerByActivity:function(_1a7c){if(_1a7c&&_1a7c.indexOf("{")==-1){var _1a7d=this._getAllActivitiesFromCollectionById(_1a7c);for(var i=0;i<_1a7d.length;i++){dojo.publish("/entity/activity/deleteFromScheduler",[_1a7d[i],this]);this._removeActivityObjectFromCollectionByActivityId(_1a7d[i]);}}},_isUserSelected:function(_1a7e){var _1a7f=false;for(var i in this._selectedUsers){if(this._selectedUsers[i]["userId"]){if(this._selectedUsers[i]["userId"].toString()==_1a7e){_1a7f=true;break;}}}return _1a7f;},_refreshSchedulerByActivity:function(_1a80){if(_1a80){this._deleteFromSchedulerByActivity(_1a80);this._reloadAllActivitiesByActivityId(_1a80);}},_getUserActivityFromActivity:function(_1a81,actId,_1a82,_1a83){var _1a84=dojo.clone(_1a81);var sd=_1a81.start_date;var ed=_1a81.end_date;var _1a85=false;if(_1a84){_1a84.id=actId+"-"+_1a82+"-act";if(_1a83){switch(_1a83){case "asAccepted":_1a85=true;break;case "asUnconfirmed":_1a85=false;break;}}_1a84.userColor=this._currentUserColor[_1a82];_1a84.end_date=ed;_1a84.start_date=sd;_1a84.confirmed=_1a85;}return _1a84;},_getActivityObjectFromCollection:function(_1a86){var _1a87=null;var br=false;if(this._userActivityData){for(var i in this._userActivityData){if(this._userActivityData[i]!=null){if(this._userActivityData[i]["activities"]){for(var k=0;k<this._userActivityData[i]["activities"].length;k++){if(this._userActivityData[i]["activities"][k]){var id=this._userActivityData[i]["activities"][k]["id"];if(id.indexOf(_1a86)>-1){_1a87=this._userActivityData[i]["activities"][k];br=true;break;}}}}}if(br){break;}}}return _1a87;},_getAllActivitiesFromCollectionById:function(_1a88){var _1a89=[];if(this._userActivityData){for(var i in this._userActivityData){if(this._userActivityData[i]!=null){if(this._userActivityData[i]["activities"]){for(var k=0;k<this._userActivityData[i]["activities"].length;k++){if(this._userActivityData[i]["activities"][k]){var id=this._userActivityData[i]["activities"][k]["id"];if(id.indexOf(_1a88)>-1){_1a89.push(id);}}}}}}}return _1a89;},_removeActivityObjectFromCollection:function(_1a8a,_1a8b){if(this._userActivityData){if(this._userActivityData[_1a8b]!=null){if(this._userActivityData[_1a8b]["activities"]){for(var k=0;k<this._userActivityData[_1a8b]["activities"].length;k++){if(this._userActivityData[_1a8b]["activities"][k]){var id=this._userActivityData[_1a8b]["activities"][k]["id"];if(id.indexOf(_1a8a)>-1){delete this._userActivityData[_1a8b]["activities"][k];break;}}}}}}},_removeActivityObjectFromCollectionByActivityId:function(_1a8c){var br=false;if(this._userActivityData){for(var i in this._userActivityData){if(this._userActivityData[i]!=null){if(this._userActivityData[i]["activities"]){for(var k=0;k<this._userActivityData[i]["activities"].length;k++){if(this._userActivityData[i]["activities"][k]){var id=this._userActivityData[i]["activities"][k]["id"];if(id==_1a8c){delete this._userActivityData[i]["activities"][k];br=true;break;}}}}}if(br){break;}}}},_getMembersOfActivity:function(_1a8d){var _1a8e;var _1a8f=[];if(this._userActivityData){for(var i in this._selectedUsers){if(this._selectedUsers[i]&&this._selectedUsers[i]["userId"]){var _1a90=this._selectedUsers[i]["userId"].toString();if(this._userActivityData[_1a90]!=null){if(this._userActivityData[_1a90]["activities"]){_1a8e=this._userActivityData[_1a90]["activities"].filter(function(_1a91){return _1a91.id.indexOf(_1a8d)>-1;});if(_1a8e.length>0){_1a8f.push(_1a90);}}}}}}return _1a8f;},_getWeekStart:function(_1a92,date){if(date==null){date=new Date();}var shift=date.getDay();shift=_1a92-shift;var _1a93=dojo.date.add(date,"day",shift);if(_1a93>date){_1a93=dojo.date.add(_1a93,"day",-7);}return _1a93;},_setQueryDates:function(data){var ndate=data.date.valueOf();switch(data.mode){case "day":case "week":case "workweek":case "month":var _1a94=dojo.date.getDaysInMonth(new Date(ndate));var _1a95=new Date(new Date(ndate).setDate(1));_1a95.setHours(0,0,0,0);var _1a96=new Date(new Date(ndate).setDate(_1a94));_1a96.setHours(0,0,0,0);var _1a97=this._dateAdd(_1a95,"day",-7);var _1a98=this._dateAdd(_1a96,"day",8);this._dateRangeStart=Sage.Utility.Convert.toIsoStringFromDate(_1a97);this._dateRangeEnd=Sage.Utility.Convert.toIsoStringFromDate(_1a98);break;}},_updateDateRange:function(data,_1a99){if(!_1a99&&!this._schedulerLoaded){return;}var _1a9a=false;var nDate=data.date;if(Sage.Utility.Convert.isDateString(nDate)){nDate=Sage.Utility.Convert.toDateFromString(nDate);}nDate=new Date(nDate.getFullYear(),nDate.getMonth(),nDate.getDate(),nDate.getHours(),nDate.getMinutes());if(this._dateRangeStart&&this._dateRangeEnd){var sDate=this._dateRangeStart;if(Sage.Utility.Convert.isDateString(sDate)){sDate=Sage.Utility.Convert.toDateFromString(sDate);}sDate=new Date(sDate.getFullYear(),sDate.getMonth(),sDate.getDate(),sDate.getHours(),sDate.getMinutes());var eDate=this._dateRangeEnd;if(Sage.Utility.Convert.isDateString(eDate)){eDate=Sage.Utility.Convert.toDateFromString(eDate);}eDate=new Date(eDate.getFullYear(),eDate.getMonth(),eDate.getDate(),eDate.getHours(),eDate.getMinutes());var _1a9b=null;var _1a9c=null;switch(data.mode){case "day":if(dojo.date.compare(nDate,eDate,"date")>0||(dojo.date.compare(sDate,nDate,"date")>0)){_1a9a=true;}break;case "week":_1a9b=this._formatDateToCompare(data.weekStartDate);_1a9c=this._formatDateToCompare(data.weekEndDate);if((dojo.date.compare(_1a9b,sDate,"date")>=0&&dojo.date.compare(eDate,_1a9c,"date")>=0)||(dojo.date.compare(sDate,_1a9b,"date")>=0&&dojo.date.compare(_1a9c,eDate,"date")>=0)){_1a9a=false;}else{_1a9a=true;}break;case "workweek":_1a9b=this._formatDateToCompare(data.workWeekStartDate);_1a9c=this._formatDateToCompare(data.workWeekEndDate);if((dojo.date.compare(_1a9b,sDate,"date")>=0&&dojo.date.compare(eDate,_1a9c,"date")>=0)||(dojo.date.compare(sDate,_1a9b,"date")>=0&&dojo.date.compare(_1a9c,eDate,"date")>=0)){_1a9a=false;}else{_1a9a=true;}break;case "month":_1a9a=true;break;}}else{_1a9a=true;}if(_1a9a){this._setQueryDates(data);this._refreshSchedulerEvents();}},_formatDateToCompare:function(dt){var d=dt;if(Sage.Utility.Convert.isDateString(d)){d=Sage.Utility.Convert.toDateFromString(d);}d=new Date(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes());return d;},_updateCalendarUsers:function(_1a9d,_1a9e){var idx=dojo.indexOf(this._calendarUsers,_1a9d);if(_1a9e==="add"){if(idx!=-1){this._calendarUsers.splice(idx);}this._calendarUsers.push(_1a9d);}else{if(_1a9e==="remove"){if(idx!=-1){this._calendarUsers.splice(idx);}}}},_updateReccurring:function(id){if(id){var rId=id.replace("0:","").split(";");var aId=rId[0];if(!this._reccurring[aId]){this._reccurring[aId]=[];}this._reccurring[aId].push(id);}},_dateAdd:function(dt,mode,_1a9f){if(!dt){return "";}if(Sage.Utility.Convert.isDateString(dt)){dt=Sage.Utility.Convert.toDateFromString(dt);}var dtAdd=new Date(dt.getFullYear(),dt.getMonth(),dt.getDate(),dt.getHours(),dt.getMinutes());dtAdd=dojo.date.add(dtAdd,mode,_1a9f);return dtAdd;},_reloadUserCalendars:function(_1aa0){if(this._userActivityData){if(this._userActivityData[_1aa0]!=null){var _1aa1=[];var _1aa2=[];var _1aa3=[];if(this._userActivityData[_1aa0]["activities"]){for(var k=0;k<this._userActivityData[_1aa0]["activities"].length;k++){if(this._userActivityData[_1aa0]["activities"][k]){_1aa1.push(this._userActivityData[_1aa0]["activities"][k]["id"]);}}dojo.publish("/entity/activity/clearSchedulerEvents",[_1aa1,this]);}if(this._userActivityData[_1aa0]["events"]){for(var l=0;l<this._userActivityData[_1aa0]["events"].length;l++){if(this._userActivityData[_1aa0]["events"][l]){_1aa2.push(this._userActivityData[_1aa0]["events"][l]["id"]);}}dojo.publish("/entity/activity/clearSchedulerEvents",[_1aa2,this]);}if(this._userActivityData[_1aa0]["history"]){for(var m=0;m<this._userActivityData[_1aa0]["history"].length;m++){if(this._userActivityData[_1aa0]["history"][m]){_1aa3.push(this._userActivityData[_1aa0]["history"][m]["id"]);}}dojo.publish("/entity/activity/clearSchedulerEvents",[_1aa3,this]);}}}},_updateSelectedUsers:function(_1aa4,_1aa5,_1aa6){if(_1aa4){if(this._selectedUsers==null||this._selectedUsers.length==0){this._selectedUsers=lang.clone(_1aa4);}else{var _1aa7;if(_1aa5){for(var i in _1aa4){_1aa7=_1aa4[i]["userId"];if(_1aa7){delete this._selectedUsers[_1aa7];}}}else{for(var i in _1aa4){_1aa7=_1aa4[i]["userId"];userColor=_1aa4[i]["usercolor"];if(_1aa7){this._selectedUsers[_1aa7]=_1aa4[i];if(this._currentUserId==_1aa7){this._updateCalendarUsers(_1aa7.toString(),"add");this._getActivities(_1aa7.toString(),userColor.toString());this._getEvents(_1aa7.toString(),userColor.toString());if(_1aa6){this._getHistory(_1aa7.toString(),userColor.toString());}}else{var _1aa8={userId:_1aa7,userColor:userColor};this._getSecurityAccessData(lang.trim(_1a55.getClientContextByKey("userID")),_1aa7,_1aa8,function(scObj){this._updateCalendarUsers(scObj.userId.toString(),"add");this._getActivities(scObj.userId.toString(),scObj.userColor.toString());this._getEvents(scObj.userId.toString(),scObj.userColor.toString());if(_1aa6){this._getHistory(scObj.userId.toString(),scObj.userColor.toString());}},this);}}}}}}},_refreshSchedulerEvents:function(){dojo.publish("/entity/activity/clearScheduler",[null,this]);if(this._selectedUsers){var _1aa9,_1aaa;var _1aab=lang.trim(_1a55.getClientContextByKey("userID"));var _1aac=false;if(this._selectedUsers[_1aab]){_1aac=this._selectedUsers[_1aab]["loadHistoryOnStart"];}for(var i in this._selectedUsers){_1aa9=this._selectedUsers[i]["userId"];_1aaa=this._selectedUsers[i]["usercolor"];var _1aad={userId:_1aa9,userColor:_1aaa};if(_1aa9==_1aab){this._getActivities(_1aa9,_1aaa);this._getEvents(_1aa9,_1aaa);if(_1aac){this._getHistory(_1aa9,_1aaa);}}else{if(_1aa9){this._getSecurityAccessData(_1aab,_1aa9,_1aad,function(scObj){this._getActivities(scObj.userId,scObj.userColor);this._getEvents(scObj.userId,scObj.userColor);if(_1aac){this._getHistory(scObj.userId,scObj.userColor);}},this);}}}}this._schedulerLoaded=true;},_removeReccurringFromScheduler:function(_1aae){if(this._reccurring){var list=this._reccurring[_1aae];if(list&&list.length>0){dojo.publish("/entity/activity/clearSchedulerEvents",[list,this]);}}},_checkSecurityAccess:function(_1aaf,_1ab0,_1ab1,scope){this.accessData=false;if(!this._accessStore){this._accessStore=new _1a53({include:["$descriptors"],resourceKind:"activityresourceviews",service:_1a54.getSDataService("dynamic")});}this._accessStore.fetch({predicate:"'"+_1ab0+"-"+_1aaf+"'",onComplete:function(_1ab2){_1ab1.call(scope,_1ab2);},onError:function(){_1ab1.call(scope,null);},scope:this});},_getSecurityAccessData:function(_1ab3,_1ab4,scObj,_1ab5,scope){if(this._selectedUsers[_1ab4]&&this._selectedUsers[_1ab4]["access"]){_1ab5.call(scope,scObj);}else{this._checkSecurityAccess(_1ab3,_1ab4,function(_1ab6){if(_1ab6){this._selectedUsers[_1ab4]["access"]=[];this._selectedUsers[_1ab4]["access"].allowAdd=_1ab6.AllowAdd;this._selectedUsers[_1ab4]["access"].allowEdit=_1ab6.AllowEdit;this._selectedUsers[_1ab4]["access"].allowDelete=_1ab6.AllowDelete;}_1ab5.call(scope,scObj);},this);}},_reloadAllActivitiesByActivityId:function(_1ab7){if(!this.allActivitiesStore){this.allActivitiesStore=_1a52({service:_1a54.getSDataService("system"),resourceKind:"activities",include:["$descriptors,UserInfo"],select:["$key","Alarm","AlarmTime","Status","AccountId","AccountName","ActivityId","ContactId","ContactName","Description","Duration","LeadId","LeadName","OpportunityId","OpportunityName","TicketId","Recurring","StartDate","Timeless","Type","Priority","Notes","Phonenumber","Location","AllowEdit","Leader/Userinfo/UserName","Useractivities/status","Useractivities/User/$key"],sort:[{attribute:"StartDate",descending:true}]});}this.allActivitiesStore.fetch({query:_1a57.substitute("Id eq '${0}' and not Timeless and UserActivities.Status ne 'asDeclned'",[_1ab7]),count:80,start:0,onComplete:this._onallActivitiesRequestComplete,scope:this});},_onallActivitiesRequestComplete:function(_1ab8){dojo.require("Sage.Utility");dojo.require("dojo.date.locale");if(_1ab8!=null&&_1ab8!=undefined){this._schedulerEventsx=[];var _1ab9=null;for(var i=0;i<_1ab8.length;i++){var _1aba={};if(!_1ab8[i].Timeless){if(_1ab8[i]["UserActivities"]){var _1abb=_1ab8[i]["UserActivities"]["$resources"];if(_1abb&&_1abb.length>0){for(var j=0;j<_1abb.length;j++){_1ab9=_1abb[j]["User"]["$key"];_1ab9=lang.trim(_1ab9);if(this._isUserSelected(_1ab9)&&_1abb[j]["Status"]!="asDeclned"){_1aba=this._formatActivityObject(_1ab8[i],_1ab9,_1abb[j]["Status"]);if(_1aba){this._schedulerEventsx.push(_1aba);this._updateUserActivityDataCollection(_1ab9,_1aba,true);}}}}}else{if(_1ab8[i]["Leader"]){_1ab9=_1ab8[i]["Leader"]["$key"];_1ab9=lang.trim(_1ab9);_1aba=this._formatActivityObject(_1ab8[i],_1ab9);this._schedulerEventsx.push(_1aba);this._updateUserActivityDataCollection(_1ab9,_1aba,true);}}}}dojo.publish("/entity/activity/loadScheduler",[dojo.clone(this._schedulerEventsx),this]);}},_getActivities:function(_1abc,color,start,count){if(_1abc==null){_1abc=_1a55.getClientContextByKey("userID");}_1abc=lang.trim(_1abc);self._currentUser=_1abc;if(color==null||color==undefined){color="user1";}this._currentUserColor[_1abc]=color;if(!this.activitiesStore){this.activitiesStore=_1a52({service:_1a54.getSDataService("system"),resourceKind:"activities",include:["$descriptors"],select:["Alarm","AlarmTime","Attachment","Status","AccountId","AccountName","ActivityId","ContactId","ContactName","Description","Duration","LeadId","LeadName","OpportunityId","OpportunityName","TicketId","Recurring","StartDate","Timeless","Type","Priority","Notes","Phonenumber","Location","AllowEdit","AllowDelete","Leader/Userinfo/UserName","UserActivities","UserActivities/User","UserActivities/Status"],sort:[{attribute:"StartDate"}]});}count=count||100;start=start||1;var _1abd={"me":this,"userId":_1abc,"start":start,"count":count,"color":color};this.activitiesStore.fetch({query:_1a57.substitute("UserActivities.UserId eq '${0}' and not Timeless and UserActivities.Status ne 'asDeclned' and StartDate gt @${1}@ and StartDate lt @${2}@",[_1abc,this._dateRangeStart,this._dateRangeEnd]),onComplete:this._onActivitiesRequestComplete,onBegin:this._onActivitiesRequestBegin,scope:_1abd,count:count,start:start});},_onActivitiesRequestBegin:function(_1abe,_1abf){var _1ac0=_1abf.scope.me;var _1ac1=_1abf.scope.userId;var count=_1abf.scope.count;var start=_1abf.scope.start;var color=_1abf.scope.color;if(_1abe>100&&_1abe>(start+count)){if(_1abe<=300&&start==1){_1ac0._getActivities(_1ac1,color,(start+count)-1,_1abe);}else{start=start==1?(start+count)-1:start+count;_1ac0._getActivities(_1ac1,color,start,100);}}},_getEvents:function(_1ac2,color,start,count){if(_1ac2==null){_1ac2=_1a55.getClientContextByKey("userID");}_1ac2=lang.trim(_1ac2);this._currentUserColor[_1ac2]=color;if(!this.eventsStore){this.eventsStore=_1a52({service:_1a54.getSDataService("dynamic"),resourceKind:"events",include:[],select:["Type","StartDate","EndDate","Location","Description","User"],sort:[{attribute:"StartDate",descending:true}]});}count=count||100;start=start||0;var _1ac3={"me":this,"userId":_1ac2,"start":start,"count":count,"color":color};this.eventsStore.fetch({query:{conditions:_1a57.substitute("UserId eq '${0}' and StartDate gt @${1}@ and StartDate lt @${2}@",[_1ac2,this._dateRangeStart,this._dateRangeEnd])},onComplete:this._onEventsRequestComplete,onBegin:this._onEventsRequestBegin,scope:_1ac3,count:count,start:start});},_onEventsRequestBegin:function(_1ac4,_1ac5){var _1ac6=_1ac5.scope.me;var _1ac7=_1ac5.scope.userId;var count=_1ac5.scope.count;var start=_1ac5.scope.start;var color=_1ac5.scope.color;var _1ac8=start+count;var _1ac9=_1ac4-_1ac8;if(_1ac9>0){if(_1ac9>=100){_1ac6._getEvents(_1ac7,color,_1ac8,100);}else{_1ac6._getEvents(_1ac7,color,_1ac8,_1ac9);}}},_getHistory:function(_1aca,color,start,count){if(_1aca==null){_1aca=_1a55.getClientContextByKey("userID");}this._currentUserColor[_1aca]=color;count=count||100;start=start||1;if(!this.historyActivitiesStore){this.historyActivitiesStore=_1a52({service:_1a54.getSDataService("dynamic"),resourceKind:"history",include:["History"],select:["$key","UserId","ActivityId","AccountName","Category","CompletedDate","ContactId","ContactName","Description","Duration","LeadId","LeadName","LongNotes","Notes","OpportunityId","OpportunityName","Priority","Timeless","Type","Location","StartDate","EndDate"],sort:[{attribute:"StartDate"}]});}var _1acb={"me":this,"userId":_1aca,"start":start,"count":count,"color":color};this.historyActivitiesStore.fetch({query:_1a57.substitute("UserId eq '${0}' and not Timeless and StartDate gt @${1}@ and StartDate lt @${2}@ and Type in ('atPhoneCall','atToDo','atAppointment','atPersonal')",[_1aca,this._dateRangeStart,this._dateRangeEnd]),onComplete:this._onHistoryRequestComplete,onBegin:this._onHistoryRequestBegin,scope:_1acb,count:count,start:start});},_onHistoryRequestBegin:function(_1acc,_1acd){var _1ace=_1acd.scope.me;var _1acf=_1acd.scope.userId;var count=_1acd.scope.count;var start=_1acd.scope.start;var color=_1acd.scope.color;if(_1acc>100&&_1acc>(start+count)){if(_1acc<=300&&start==1){_1ace._getHistory(_1acf,color,(start+count)-1,_1acc);}else{start=start==1?(start+count)-1:start+count;_1ace._getHistory(_1acf,color,start,100);}}},_getHistoryItem:function(_1ad0){if(!this._historyStore){this._historyStore=new _1a53({include:[],resourceKind:"history",service:_1a54.getSDataService("dynamic")});}this._historyStore.fetch({predicate:"\""+_1ad0+"\"",onComplete:this._receivedHistoryItem,scope:this});},_receivedHistoryItem:function(_1ad1){var _1ad2;var _1ad3=lang.trim(_1a55.getClientContextByKey("userID"));if(_1ad1!=null&&_1ad1!=undefined){_1ad2=_1ad1.UserId;if(this._selectedUsers[_1ad2]){var _1ad4=false;if(this._selectedUsers[_1ad2]){_1ad4=this._selectedUsers[_1ad2]["loadHistoryOnStart"];}if(_1ad4){var _1ad5={};_1ad5=this._formatHistoryObject(_1ad2,_1ad1,_1ad3);if(!this._isEmptyObject(_1ad5)){if(!this._userActivityData[_1ad2]){this._userActivityData[_1ad2]={};}if(!this._userActivityData[_1ad2]["history"]){this._userActivityData[_1ad2]["history"]=[];}this._userActivityData[_1ad2]["history"].push(_1ad5);dojo.publish("/entity/activity/addToScheduler",[dojo.clone(_1ad5),this]);}}}}},iframeRef:function(_1ad6){return _1ad6.contentWindow?_1ad6.contentWindow.document:_1ad6.contentDocument;},_getActivityUserId:function(_1ad7){var uId=null;if(_1ad7){var _1ad8=_1ad7.split(";");if(_1ad8&&_1ad8.length>1){uId=_1ad8[1].split("=")[1];}}return uId;},_getAccessData:function(_1ad9,_1ada){var _1adb=false;if(this._selectedUsers&&this._selectedUsers[_1ad9]&&this._selectedUsers[_1ad9]["access"]){switch(_1ada){case "allowAdd":_1adb=this._selectedUsers[_1ad9]["access"]["allowAdd"];break;case "allowEdit":_1adb=this._selectedUsers[_1ad9]["access"]["allowEdit"];break;case "allowDelete":_1adb=this._selectedUsers[_1ad9]["access"]["allowDelete"];break;}}return _1adb;},_formatActivityObject:function(_1adc,_1add,_1ade,_1adf){var _1ae0,_1ae1,text,_1ae2;var _1ae3={};var _1ae4=false;if(!_1adf){_1adf=lang.trim(_1a55.getClientContextByKey("userID"));}if(_1add===lang.trim(_1adf)){_1ae4=true;}if(_1adc!=null){if(_1ae4){_1ae3.id="0:";_1ae3.id+=_1adc.$key;}else{_1ae3.id=_1adc.$key;}_1ae3.currentUser=_1ae4;_1ae3.id+="-"+_1add;_1ae3.id+="-act";_1ae3.type="userActivity";_1ae3.subType=_1adc.Type;_1ae0=_1adc.StartDate;text=_1adc.ContactName;_1ae3.text=(text==null)?"":text;_1ae3.timeless=_1adc.Timeless;_1ae3.alarm=_1adc.Alarm;if(_1adc["Leader"]){_1ae3.leaderUserId=_1adc["Leader"]["$key"];}_1ae3.alarmTime=Sage.Utility.Convert.toDateFromString(_1adc.AlarmTime);_1ae3.duration=_1adc.Duration;_1ae3.description=_1adc.Description;_1ae3.contactId=_1adc.ContactId;_1ae3.contactName=_1adc.ContactName;_1ae3.accountId=_1adc.AccountId;_1ae3.accountName=_1adc.AccountName;_1ae3.leadId=_1adc.LeadId;_1ae3.leadName=_1adc.LeadName;_1ae3.regarding="<span style=\"max-width:500px;display:block\">"+_1adc.Description+"</span>";_1ae3.priority=_1adc.Priority;_1ae3.notes=_1adc.Notes;_1ae3.phoneNumber=_1adc.PhoneNumber;_1ae3.opportunityId=_1adc.OpportunityId;_1ae3.opportunity=_1adc.OpportunityName;_1ae3.recurring=_1adc.$key.indexOf(";")>0?true:false;if(_1ae4){_1ae3.allowDelete=true;_1ae3.allowEdit=_1adc.AllowEdit;}else{_1ae3.allowDelete=this._getAccessData(_1add,"allowDelete");_1ae3.allowEdit=this._getAccessData(_1add,"allowEdit");}_1ae3.ticketId=_1adc.TicketId;if(_1ae3.recurring){this._updateReccurring(_1ae3.id);}_1ae3.attachment=_1adc.Attachment;_1ae3.location=_1adc.Location;switch(_1adc.Type.toUpperCase()){case "ATTODO":_1ae2=this.toDoIconUrl;break;case "ATAPPOINTMENT":_1ae2=this.meetingIconUrl;break;case "ATPHONECALL":_1ae2=this.phoneCallIconUrl;break;case "ATPERSONAL":_1ae2=this.personalActivityIconUrl;break;}_1ae3.iconSrc=_1ae2;_1ae3.userColor=this._currentUserColor[_1add];var _1ae5=true;if(_1ade){switch(_1ade){case "asAccepted":_1ae5=true;break;case "asUnconfirmed":_1ae5=false;break;}}_1ae3.confirmed=_1ae5;_1ae3.start_date=_1a55.Activity.formatActivityStartDateForCalendar(_1adc.StartDate);_1ae3.end_date=_1a55.Activity.formatActivityEndDateForCalendar(_1adc.StartDate,_1ae3.duration);if(_1ae3.alarmTime){_1ae3.alarmMinutesBefore=dojo.date.difference(Sage.Utility.Convert.toDateFromString(_1adc.StartDate),_1ae3.alarmTime,"minute");}if(Sage.Utility.Convert.isDateString(_1adc.StartDate)){_1adc.StartDate=Sage.Utility.Convert.toDateFromString(_1adc.StartDate);}var _1ae6=new Date(_1adc.StartDate.getFullYear(),_1adc.StartDate.getMonth(),_1adc.StartDate.getDate(),_1adc.StartDate.getHours(),_1adc.StartDate.getMinutes());var eDate=dojo.date.add(_1ae6,"minute",_1ae3.duration);if(dojo.date.compare(eDate,_1ae6,"date")>0){_1ae3.endsAfterMidnight=true;_1ae3.actualEndDate=eDate;}}return _1ae3;},_formatEventObject:function(_1ae7,_1ae8){var _1ae9={};if(_1ae7!=null){_1ae9.id=_1ae7.$key;_1ae9.id+="-evt";_1ae9.type="event";_1ae9.subType=_1ae7.Type;_1ae9.description=_1ae7.Description;_1ae9.location=_1ae7.Location;_1ae9.text=_1ae7.Type;_1ae9.userColor=this._currentUserColor[_1ae8];_1ae9.start_date=_1a55.Activity.formatEventDateForCalendar(_1ae7.StartDate,"MM/d/yy 0:00");_1ae9.end_date=_1a55.Activity.formatEventDateForCalendar(_1ae7.EndDate,"MM/d/yy 24:00");}return _1ae9;},_updateUserActivityDataCollection:function(_1aea,_1aeb,_1aec){if(!this._userActivityData[_1aea]){this._userActivityData[_1aea]=[];}if(!this._userActivityData[_1aea]["activities"]){this._userActivityData[_1aea]["activities"]=[];}else{if(_1aec){try{this._userActivityData[_1aea]["activities"].removeByAttr("id",_1aeb.id);}catch(ex){}}}this._userActivityData[_1aea]["activities"].push(_1aeb);},_onActivitiesRequestComplete:function(_1aed,_1aee){var _1aef=_1aee.scope.userId;var _1af0=_1aee.scope.me;if(_1aed!=null&&_1aed!=undefined){_1af0._schedulerEvents=[];var _1af1=null;var _1af2=null;var _1af3=_1a55.getClientContextByKey("userID");for(var i=0;i<_1aed.length;i++){var _1af4={};if(!_1aed[i].Timeless){if(_1aed[i]["UserActivities"]){if(_1aed[i]["UserActivities"]["$resources"]){for(var j=0;j<_1aed[i]["UserActivities"]["$resources"].length;j++){if(_1aed[i]["UserActivities"]["$resources"][j]["User"]){if(_1aef==_1aed[i]["UserActivities"]["$resources"][j]["User"]["$key"]){_1af1=_1aed[i]["UserActivities"]["$resources"][j]["User"]["$key"];_1af1=lang.trim(_1af1);_1af2=_1aed[i]["UserActivities"]["$resources"][j]["Status"];_1af4=_1af0._formatActivityObject(_1aed[i],_1af1,_1af2,_1af3);_1af0._updateUserActivityDataCollection(_1af1,_1af4);}}}}}else{if(_1aed[i]["Leader"]){_1af1=_1aed[i]["Leader"]["$key"];_1af1=lang.trim(_1af1);_1af4=_1af0._formatActivityObject(_1aed[i],_1af1,null,_1af3);_1af0._updateUserActivityDataCollection(_1af1,_1af4);_1af1=null;}}}if(!_1af0._isEmptyObject(_1af4)){_1af0._schedulerEvents.push(_1af4);}}dojo.publish("/entity/activity/loadScheduler",[dojo.clone(_1af0._schedulerEvents),_1af0]);}},_onEventsRequestComplete:function(_1af5){dojo.require("Sage.Utility");dojo.require("dojo.date.locale");if(_1af5!=null&&_1af5!=undefined){var _1af6=this.me;_1af6._schedulerEvents1=[];var _1af7=null;for(var i=0;i<_1af5.length;i++){var _1af8={};if(!_1af7){_1af7=_1af5[i]["User"]["$key"];}_1af7=lang.trim(_1af7);_1af8=_1af6._formatEventObject(_1af5[i],_1af7);if(_1af8){_1af6._schedulerEvents1.push(_1af8);}}if(!_1af6._userActivityData[_1af7]){_1af6._userActivityData[_1af7]={};}_1af6._userActivityData[_1af7]["events"]=_1af6._schedulerEvents1;dojo.publish("/entity/activity/loadScheduler",[dojo.clone(_1af6._schedulerEvents1),_1af6]);}},_formatHistoryObject:function(_1af9,_1afa,_1afb){var _1afc={};var _1afd="";var text;_1af9=lang.trim(_1af9);if(!_1afa.Timeless){if(_1af9==lang.trim(_1afb)){_1afc.id="0:";_1afc.id+=_1afa.$key;}else{_1afc.id=_1afa.$key;}_1afc.id+="-"+_1af9;_1afc.id+="-hist";_1afc.type="userHistoryActivity";_1afc.activityId=_1afa.ActivityId;_1afc.subType=_1afa.Type;text=_1afa.ContactName;_1afc.text=(text==null)?"":text;_1afc.timeless=_1afa.Timeless;_1afc.duration=_1afa.Duration;_1afc.description=_1afa.Description;_1afc.contactName=_1afa.ContactName;_1afc.accountName=_1afa.AccountName;_1afc.leadName=_1afa.LeadName;_1afc.regarding="<span style=\"max-width:500px;display:block\">"+_1afa.Description+"</span>";_1afc.priority=_1afa.Priority;_1afc.notes=_1afa.Notes;_1afc.location=_1afa.Location;_1afc.opportunity=_1afa.OpportunityName;_1afc.userColor=this._currentUserColor[_1af9];_1afc.confirmed=true;switch(_1afa.Type.toUpperCase()){case "ATTODO":_1afd=this.toDoIconUrl;break;case "ATAPPOINTMENT":_1afd=this.meetingIconUrl;break;case "ATPHONECALL":_1afd=this.phoneCallIconUrl;break;case "ATPERSONALACTIVITY":_1afd=this.personalActivityIconUrl;break;}_1afc.iconSrc=_1afd;_1afc.start_date=_1a55.Activity.formatActivityEndDateForCalendar(_1afa.CompletedDate,_1afc.duration*-1);_1afc.end_date=_1a55.Activity.formatActivityStartDateForCalendar(_1afa.CompletedDate);}return _1afc;},_onHistoryRequestComplete:function(_1afe,_1aff){if(_1afe!=null&&_1afe!=undefined){var _1b00=_1aff.scope.userId;var _1b01=_1aff.scope.me;var _1b02=[];var text;var _1b03=null;var _1b04=lang.trim(_1a55.getClientContextByKey("userID"));for(var i=0;i<_1afe.length;i++){var _1b05={};_1b03=_1afe[i].UserId;_1b05=_1b01._formatHistoryObject(_1b03,_1afe[i],_1b04);if(!_1b01._isEmptyObject(_1b05)){_1b02.push(_1b05);}}if(_1b03!=null){if(!_1b01._userActivityData[_1b03]){_1b01._userActivityData[_1b03]={};}_1b01._userActivityData[_1b03]["history"]=_1b02;dojo.publish("/entity/activity/loadScheduler",[dojo.clone(_1b02),_1b01]);}}},_getEventColorByUser:function(_1b06){var _1b07="#d5e2bd";for(var i=0;i<this._calendarUsers.length;i++){if(this._calendarUsers[i].userId==_1b06){_1b07=this._calendarUsers[i].eventColor;}}return _1b07;},_isEmptyObject:function(obj){for(var i in obj){return false;}return true;}});return _1a5a;});},"Sage/MainView/Contact/ContactSearchForDuplicates":function(){define(["dojo/_base/declare","dojo/i18n!./nls/ContactSearchForDuplicates","dijit/_Widget","Sage/_Templated","Sage/Utility","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","Sage/UI/_DialogLoadingMixin","Sage/UI/Dialogs","dijit/Dialog","dojo/i18n!./nls/ContactSearchForDuplicates","dojo/text!./templates/ContactDetailSummary.html","dojo/text!../Lead/templates/LeadDetailSummary.html","dojo/text!../Account/templates/AccountDetailSummary.html"],function(_1b08,_1b09,_1b0a,_1b0b,_1b0c,_1b0d,_1b0e,_1b0f,_1b10,_1b11,nls,_1b12,_1b13,_1b14){var _1b15=_1b08("Sage.MainView.Contact.ContactSearchForDuplicates",[_1b0a,_1b0b],{workSpace:{},templateDialog:false,templateData:"",rootUrl:"slxdata.ashx/slx/crm/-/namedqueries?format=json&",widgetsInTemplate:true,constructor:function(){dojo.mixin(this,_1b09);},init:function(_1b16){this.workSpace=_1b16;},onTabFiltersClick:function(){this.setDivDisplay(this.workSpace.divFiltersId,"inline");this.setDivDisplay(this.workSpace.divOptionsId,"none");this.setTabDisplay(this.workSpace.tabFiltersId,"tws-tab-button tws-active-tab-button");this.setTabDisplay(this.workSpace.tabOptionsId,"tws-tab-button");},onTabOptionsClick:function(){this.setDivDisplay(this.workSpace.divOptionsId,"inline");this.setDivDisplay(this.workSpace.divFiltersId,"none");this.setTabDisplay(this.workSpace.tabOptionsId,"tws-tab-button tws-active-tab-button");this.setTabDisplay(this.workSpace.tabFiltersId,"tws-tab-button");},setDivDisplay:function(divId,_1b17){var _1b18=dojo.byId(divId);if(_1b18!==null){_1b18.style.display=_1b17;}},setTabDisplay:function(tabId,_1b19){var _1b1a=dojo.byId(tabId);if(_1b1a!==null){_1b1a.className=_1b19;}},showSummaryView:function(_1b1b,_1b1c){var url=this.getReqestUrl(_1b1b,_1b1c);this.showData(url,this.successRequest,this.errorRequest,_1b1b,_1b1c);},getReqestUrl:function(_1b1d,_1b1e){var url=null;if(_1b1d==="Contact"){url=this.getReqeustUrlEx(_1b1e,"ContactSearch");}if(_1b1d==="Lead"){url=this.getReqeustUrlEx(_1b1e,"LeadSearch");}if(_1b1d==="Account"){url=this.getReqeustUrlEx(_1b1e,"AccountSearch");}return url;},getReqeustUrlEx:function(_1b1f,_1b20){var _1b21="mainentity.id eq '${0}'";var _1b22={name:_1b20,where:dojo.string.substitute(_1b21,[_1b1f])};return this.rootUrl+this.buildQParamStr(_1b22);},buildQParamStr:function(_1b23){var o=_1b23;var p=[];if(typeof o==="object"){for(var k in o){p.push(k+"="+encodeURIComponent(o[k]));}}else{if(typeof o==="string"){p.push(o);}}return p.join("&");},showData:function(url,_1b24,_1b25,_1b26,_1b27){if(typeof _1b24==="undefined"){_1b24=function(data){};}if(typeof _1b25==="undefined"){_1b25=function(){};}if(typeof _1b26==="undefined"){_1b26="";}if(typeof _1b27==="undefined"){_1b27="";}var self=this;dojo.xhrGet({url:url,cache:false,preventCache:true,handleAs:"json",load:function(data){_1b24(self,_1b26,data);},error:function(_1b28,_1b29,error){_1b25(self,error);}});},successRequest:function(self,_1b2a,data){self.show(_1b2a,data);},show:function(_1b2b,data){this.templateData=data.items[0];this.templateDialog=new _1b11({title:this.getSummaryTitle(_1b2b),id:[this.id,"-Dialog"].join(""),content:this.getTemplate(_1b2b).apply(this)});this.connect(this.templateDialog,"onCancel",this._close);this.templateDialog.show();},errorRequest:function(self,error){_1b10.showError(dojo.string.substitute(self.errorLoadingSummaryView,[error]));},getSummaryTitle:function(_1b2c){var title=null;if(_1b2c==="Contact"){title=this.ContactSummaryView_Title;}if(_1b2c==="Lead"){title=this.LeadSummaryView_Title;}if(_1b2c==="Account"){title=this.AccountSummaryView_Title;}return title;},getTemplate:function(_1b2d){var tpl=null;if(_1b2d==="Contact"){tpl=new Simplate(eval(_1b12));}if(_1b2d==="Lead"){tpl=new Simplate(eval(_1b13));}if(_1b2d==="Account"){tpl=new Simplate(eval(_1b14));}return tpl;},_close:function(){this.templateDialog.destroyRecursive();}});return _1b15;});},"Sage/MainView/Contact/ContactUserAssociationEditor":function(){define(["dojo/_base/declare","dojo/i18n!./nls/ContactUserAssociationEditor","Sage/Data/SingleEntrySDataStore","Sage/Data/WritableSDataStore","Sage/Data/SDataServiceRegistry","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dojo/string","dijit/Dialog","dijit/_Widget","Sage/_Templated","Sage/UI/Dialogs","Sage/UI/Controls/Lookup","dojo/text!./templates/ContactUserAssociationEditor.html","Sage/UI/Controls/SingleSelectPickList","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/Form"],function(_1b2e,_1b2f,_1b30,_1b31,_1b32,_1b33,_1b34,_1b35,_1b36,_1b37,_1b38,_1b39,_1b3a,_1b3b){var _1b3c=_1b2e("Sage.TaskPane.ContactUserAssociationEditor",[_1b37,_1b38],{id:"dlgContactUserAssociation",actionType:false,_dialog:false,_updateableProperties:false,selectedFieldIndex:1,lup_User:false,_selectionInfo:false,widgetsInTemplate:true,widgetTemplate:new Simplate(eval(_1b3b)),constructor:function(info){this._selectionInfo=info.selectionInfo.selectedIds;this.actionType=info.action;dojo.mixin(this,_1b2f);if(this.actionType=="disassociate"){}},associationExists:function(_1b3d,_1b3e,_1b3f,scope){this._setupStore();var _1b40=_1b35.substitute("UserId eq '${0}' ",[_1b3f.UserId]);this._contactUserStore.fetch({query:_1b40,onComplete:function(_1b41){if(_1b41&&_1b41.length>0){_1b3e.call(scope,_1b41,_1b3f);}else{_1b3d.call(scope,_1b3f);}},onError:function(){_1b3d.call(scope,_1b3f);},scope:this});},loadContactData:function(_1b42,_1b43,scope){if(!_1b42){return;}this._setupStore();var _1b44=_1b35.substitute("ContactId in ['${0}'] ",[this._selectionInfo.join("','")]);this._contactUserStore.fetch({query:_1b44,onComplete:function(_1b45){_1b43.call(scope,_1b45);},onError:function(){_1b43.call(scope,null);},scope:this});this._contactUserStore.fetch({predicate:"'"+_1b42+"'",onComplete:function(_1b46){_1b43.call(scope,_1b46);},onError:function(){_1b43.call(scope,null);},scope:this});},setSelectionInfo:function(info){this._selectionInfo=info.selectionInfo.selectedIds;this.actionType=info.action;},show:function(){this._dialog.show();if(!this.lup_User){this.createUserLookup();}},createUserLookup:function(){this.userLookupConfig={id:"_acctMgr",structure:[{defaultCell:{"sortable":true,"width":"150px","editable":false,"propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"pickListName":null,"defaultValue":""},cells:[{"name":this.lookupNameColText,"field":"UserInfo.UserName","sortable":true},{"name":this.lookupTitleColText,"field":"UserInfo.Title","sortable":true},{"name":this.lookupDepartmentColText,"field":"UserInfo.Department","sortable":true},{"name":this.lookupRegionColText,"field":"UserInfo.Region","sortable":true},{"name":this.lookupTypeColText,"field":"Type","propertyType":"Sage.Entity.Interfaces.UserType","sortable":true}]}],gridOptions:{contextualCondition:function(){return "Type ne '5' and Type ne '6' and Type ne '7' and Type ne '8'";},contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"users",sort:[{attribute:"UserInfo.UserName"}]},isModal:true,initialLookup:true,returnPrimaryKey:true,dialogTitle:this.lookupUserText,dialogButtonText:this.btnOK_Caption};this.lup_User=new _1b3a({id:"lu_User",config:this.userLookupConfig,style:"width:100%"});dojo.place(this.lup_User.domNode,this.userLookup_Container.domNode,"only");},_setupStore:function(){if(!this._contactUserStore){this._contactUserStore=new _1b31({include:[],resourceKind:"contactUsers",service:Sage.Data.SDataServiceRegistry.getSDataService("dynamic")});}},_okClick:function(){var _1b47=this.lup_User.selectedObject.$key;if(this._selectionInfo&&_1b47){this._setupStore();if(this.actionType==="associate"){var _1b48={"ContactId":this._selectionInfo[0],"UserId":_1b47};this.associationExists(this._insertAssociation,function(){Sage.UI.Dialogs.showError(this.associationExistsMessage);},_1b48,this);}else{if(this.actionType==="disassociate"){for(var i=0;i<this._selectionInfo.count;i++){}}}}},_insertAssociation:function(_1b49,self){this._contactUserStore.saveNewEntity(_1b49,this._successfulContactUserSave,this._failedContactUserSave,this);},_successfulContactUserSave:function(data){this._dialog.hide();},_failedContactUserSave:function(er){this._dialog.hide();},_close:function(){this._dialog.hide();}});return _1b3c;});},"Sage/MainView/IntegrationContract/MatchingOptionsConfig":function(){define(["dojo/_base/declare","dojo/i18n!./nls/MatchingOptionsConfig","dojo/_base/array","dijit/_Widget","Sage/_Templated","Sage/UI/Dialogs","dojo/text!./templates/MatchingOptionsConfig.html","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dijit/Dialog","dijit/_Widget","Sage/_Templated","dijit/Dialog"],function(_1b4a,_1b4b,array,_1b4c,_1b4d,_1b4e,_1b4f){var _1b50=_1b4a("Sage.MainView.IntegrationContract.MatchingOptionsConfig",[_1b4c,_1b4d],{resourceKind:"",resourceDisplayName:"",id:"",index:0,selectedFieldIndex:0,matchingId:"",fields:[{FieldName:"",DisplayName:""}],operators:[],selectedFilters:[],hideimgurl:"images/icons/Find_Remove_16x16.gif",addimgurl:"images/icons/Find_Add_16x16.gif",widgetsInTemplate:true,widgetTemplate:new Simplate(eval(_1b4f)),constructor:function(){dojo.mixin(this,_1b4b);},init:function(_1b51){this.id=_1b51.Id;},conditionTemplate:new Simplate(["<div>","<div id=\"filterCondition_{%= $.index %}\" class=\"lookup-condition-row\" style=\"padding-left:12px\">","<select dojoType=\"dijit.form.select\" id=\"fieldnames_{%= $.index %}\" class=\"lookup-fieldnames-list\" style=\"width:160px\" >","{% for (var i=0; i < $.fields.length; i++) { %}","<option value=\"{%= $.fields[i].FieldName %}\" {% if ($.selectedFieldIndex == i ) { %} selected {% } %} >{%= $.fields[i].DisplayName %}</option>","{% } %}","</select>","<select dojoType=\"dijit.form.select\" id=\"operators_{%= $.index %}\" class=\"lookup-operators-list\" style=\"width:160px; margin-left:130px\">","{% for (var i=0;i<$.operators.length;i++) { %}","<option value=\"{%= $.operators[i].symbol %}\"  {% if ($.selectedFieldIndex == i ) { %} selected {% } %} >{%= $.operators[i].display %}</option>","{% } %}","</select>","{% if ($.index == 1 ) { %}","<img id=\"addCondition_{%= $.index %}\" src=\"{%= $.addimgurl %}\" alt=\"{%= $.filter_AddCondition %}\" style=\"cursor:pointer;padding:0px 5px;\" onclick=\"dijit.byId('{%= $.matchingId %}').matchingObject.addLookupCondition();\" />","{% } %}","{% if ($.index > 1 ) { %}","<img src=\"{%= $.hideimgurl %}\" alt=\"{%= $.filter_RemoveCondition %}\" style=\"cursor:pointer;padding:0px 5px;\" onclick=\"dijit.byId('{%= $.matchingId %}').matchingObject.removeLookupCondition({%= $.index %});\" />","{% } %}","</div>","</div>"]),onEditMatchConfig:function(_1b52,_1b53){this.resourceDisplayName=_1b53;this.resourceKind=_1b52;this.showDialog();},showDialog:function(){this.index=0;var _1b54=new dijit.Dialog({title:this.matchingCaption,id:[this.id,"-Dialog"].join(""),style:["height:",300,"px;width:",600,"px;"].join(""),matchingObject:this});_1b54.attr("content",this.widgetTemplate.apply(this));this.connect(_1b54,"onCancel",this.destroyDialog);this.matchingId=_1b54.id;_1b54.show();this.getMatchProperties();},getMatchProperties:function(){var self=this;dojo.xhrGet({url:dojo.string.substitute("slxdata.ashx/slx/crm/-/resources/getmatchproperties?resourceKind=${0}",[self.resourceKind]),cache:false,preventCache:true,handleAs:"json",load:function(data){self.fields=data.fields;self.operators=data.operators;self.selectedFilters=data.filters;dojo.query(dojo.byId([self.id,"-Loading-container"].join(""))).orphan();self.loadMatchingFilters();},error:function(_1b55,_1b56,error){dojo.byId([self.id,"-Loading-container"].join("")).innerHTML=self.error_InvalidEndpoint;}});},loadMatchingFilters:function(){for(var i=0;i<this.selectedFilters.length;i++){this.addLookupCondition();var field=dojo.byId(["fieldnames_",this.index].join(""));if(field!=null){field.value=this.selectedFilters[i].Property;}operator=dojo.byId(["operators_",this.index].join(""));if(operator!=null){operator.value=this.selectedFilters[i].Operator;operator.symbol=this.selectedFilters[i].Operator;}}},dialogResize:function(){dojo.style([this.id,"-Dialog"].join(""),"height","auto");},addLookupCondition:function(){this.index++;var _1b57=dojo.byId([this.id,"-Condition-container"].join(""));var _1b58=this.conditionTemplate.apply(this);dojo.place(_1b58,_1b57);this.dialogResize();},removeLookupCondition:function(idx){dojo.query(dojo.byId(["filterCondition_",idx].join(""))).orphan();},updateMatchProperties:function(){var self=this;dojo.xhrPost({url:"slxdata.ashx/slx/crm/-/resources/updateconfiguration",sync:true,postData:self.getSelections(),load:function(){self.destroyDialog();},error:function(_1b59,_1b5a,error){_1b4e.showError(error);}});},getSelections:function(){var _1b5b=[];var _1b5c=dojo.query(".lookup-condition-row");for(var i=0;i<_1b5c.length;i++){var _1b5d=dojo.query(".lookup-fieldnames-list",_1b5c[i]);var _1b5e=dojo.query(".lookup-operators-list",_1b5c[i]);var _1b5f={fieldName:_1b5d[0].value,operator:_1b5e[0].value};_1b5b.push(_1b5f);}return Sys.Serialization.JavaScriptSerializer.serialize(_1b5b);},reloadOperators:function(_1b60,_1b61){this.selectedFieldIndex=_1b60;this.index=_1b61;var _1b62=this.conditionTemplate.apply(this);dojo.place(_1b62,["filterCondition_",_1b61].join(""),"replace");},destroyDialog:function(){var rows=dojo.query(".lookup-condition-row");if(rows!=null){array.forEach(rows,"dojo.query(item).orphan();");}var _1b63=dijit.byId([this.id,"-Dialog"].join(""));if(_1b63){_1b63.destroy();}}});return _1b50;});},"Sage/MainView/IntegrationContract/AdvancedSearchOptions":function(){define(["dojo/_base/declare","dojo/i18n!./nls/AdvancedSearchOptions","dijit/_Widget","Sage/_Templated","Sage/UI/Dialogs","dojo/text!./templates/AdvancedSearchOptions.html","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dijit/Dialog","dijit/_Widget","Sage/_Templated","dijit/Dialog"],function(_1b64,_1b65,_1b66,_1b67,_1b68,_1b69){var _1b6a=_1b64("Sage.MainView.IntegrationContract.AdvancedSearchOptions",[_1b66,_1b67],{configOptions:[],id:"",refineSearchId:"",index:0,selectedFieldIndex:0,fields:[{FieldName:"",DisplayName:""}],operators:[],selectedFilters:[],hideimgurl:"images/icons/Find_Remove_16x16.gif",addimgurl:"images/icons/Find_Add_16x16.gif",widgetsInTemplate:true,constructor:function(){dojo.mixin(this,_1b65);},init:function(_1b6b){this.id=_1b6b.Id;this.configOptions=_1b6b;},conditionTemplate:new Simplate(["<div >","<div id=\"filterCondition_{%= $.index %}\" class=\"lookup-condition-row\" style=\"padding-left:10px\">","<select id=\"fieldnames_{%= $.index %}\" class=\"lookup-fieldnames-list\" style=\"width:160px\" onchange=\"dijit.byId('{%= $.refineSearchId %}').refineSearchObject.onPropertyChange({%= $.index %});\" >","{% for (var i=0;i<$.fields.length;i++) { %}","<option value=\"{%= $.fields[i].FieldName %}\" {% if ($.selectedFieldIndex == i ) { %} selected {% } %} >{%= $.fields[i].DisplayName %}</option>","{% } %}","</select>","<select id=\"operators_{%= $.index %}\" class=\"lookup-operators-list\" style=\"width:160px; margin-left:20px\">","{% for (var i=0;i<$.operators.length;i++) { %}","<option value=\"{%= $.operators[i].symbol %}\"  {% if ($.selectedFieldIndex == i ) { %} selected {% } %} >{%= $.operators[i].display %}</option>","{% } %}","</select>","<input type=\"text\" id=\"searchValue_{%= $.index %}\" class=\"search-value-list\" style=\"width:160px;margin-left:5px\" />","{% if ($.index == 1 ) { %}","<img id=\"addCondition_{%= $.index %}\" src=\"{%= $.addimgurl %}\" alt=\"{%= $.addImgAltText %}\" style=\"cursor:pointer;padding:0px 5px;\" onclick=\"dijit.byId('{%= $.id %}-Dialog').refineSearchObject.addLookupCondition();\" />","{% } %}","{% if ($.index > 1 ) { %}","<img src=\"{%= $.hideimgurl %}\" alt=\"{%= $.hideImgAltText %}\" style=\"cursor:pointer;padding:0px 5px;\" onclick=\"dijit.byId('{%= $.id %}-Dialog').refineSearchObject.removeLookupCondition({%= $.index %});\" />","{% } %}","</div>","</div>"]),onRefineSearch:function(){var _1b6c=dojo.byId(this.configOptions.optionRefineSearchId);if(_1b6c!=null&&_1b6c.checked){this.getDefaultMatchProperties();return true;}return false;},getDefaultMatchProperties:function(){var self=this;var _1b6d=dijit.byId([this.id,"-Dialog"].join(""));if(!_1b6d){dojo.xhrGet({url:dojo.string.substitute("slxdata.ashx/slx/crm/-/resources/getmatchproperties?resourceKind=${0}&targetMapping=${1}",[this.configOptions.resourceKind,true]),cache:false,preventCache:true,handleAs:"json",load:function(data){self.fields=data.fields;self.operators=data.operators;self.selectedFilters=data.filters;self.showDialog();},error:function(_1b6e,_1b6f,error){_1b68.ShowError("request: "+_1b6e+" \nstatus: "+_1b6f+" \nerror: "+error);}});}else{self.showDialog();}},showDialog:function(){this.index=0;var _1b70=dijit.byId([this.id,"-Dialog"].join(""));if(!_1b70){_1b70=new dijit.Dialog({title:this.dialogCaption,id:[this.id,"-Dialog"].join(""),style:["height:",300,"px;width:",600,"px;"].join(""),closable:true,loadingMessage:this.loadingText,refineSearchObject:this});var _1b71=new Simplate(eval(_1b69));_1b70.attr("content",_1b71.apply(this));}this.refineSearchId=_1b70.id;_1b70.show();this.loadMatchingFilters();dojo.style(_1b70.domNode,"zIndex",9050);},loadMatchingFilters:function(){for(var i=0;i<this.selectedFilters.length;i++){this.addLookupCondition();var field=dojo.byId(["fieldnames_",this.index].join(""));if(field!=null){field.value=this.selectedFilters[i].Property;}var _1b72=dojo.byId(["operators_",this.index].join(""));if(_1b72!=null){_1b72.value=this.selectedFilters[i].Operator;_1b72.symbol=this.selectedFilters[i].Operator;}var _1b73=dojo.byId(["searchValue_",this.index].join(""));if(_1b73!=null){_1b73.value=this.selectedFilters[i].SearchValue;}}},getSelections:function(){var _1b74=[];this.updateDisplay();var _1b75=dojo.query(".lookup-condition-row");for(var i=0;i<_1b75.length;i++){var _1b76=dojo.query(".lookup-fieldnames-list",_1b75[i]);var _1b77=dojo.query(".lookup-operators-list",_1b75[i]);var _1b78=dojo.query(".search-value-list",_1b75[i]);var _1b79={fieldName:_1b76[0].value,operator:_1b77[0].value,searchValue:_1b78[0].value};_1b74.push(_1b79);}var _1b7a=dojo.byId(this.configOptions.filtersId);if(_1b7a!=null){_1b7a.value=Sys.Serialization.JavaScriptSerializer.serialize(_1b74);}this.invokeClickEvent(dojo.byId(this.configOptions.refreshGridId));},updateDisplay:function(){var _1b7b=dojo.byId(this.configOptions.resultsMsgId);if(_1b7b!=null){_1b7b.innerHTML=this.loadingDisplay;}_1b7b=dojo.byId(this.configOptions.rowSearchResultsId);if(_1b7b!=null){_1b7b.style.display="none";}_1b7b=dojo.byId(this.configOptions.rowLinkToId);if(_1b7b!=null){_1b7b.style.display="none";}},invokeClickEvent:function(_1b7c){if(document.createEvent){var e=document.createEvent("MouseEvents");e.initEvent("click",true,true);_1b7c.dispatchEvent(e);}else{_1b7c.click();}},onPropertyChange:function(index){var _1b7d=dojo.byId(["searchValue_",index].join(""));if(_1b7d!=null){_1b7d.value="";}},addLookupCondition:function(){this.index++;var _1b7e=dojo.byId([this.id,"-Condition-container"].join(""));var _1b7f=this.conditionTemplate.apply(this);dojo.place(_1b7f,_1b7e);this.dialogResize();},dialogResize:function(){dojo.style([this.id,"-Dialog"].join(""),"height","auto");},removeLookupCondition:function(idx){dojo.query(dojo.byId(["filterCondition_",idx].join(""))).orphan();},reloadOperators:function(_1b80,_1b81){this.selectedFieldIndex=_1b80;this.index=_1b81;var _1b82=this.conditionTemplate.apply(this);dojo.place(_1b82,["filterCondition_",_1b81].join(""),"replace");},clearTargetSelection:function(){var _1b83=document.getElementsByName("TargetsGroup");if(_1b83!=null){for(var i=0;i<_1b83.length;i++){_1b83[i].checked=false;}}},onMatchSelection:function(_1b84){var _1b85=document.getElementById(_1b84);if(_1b85!=null){_1b85.checked=true;}},closeDetailsDialog:function(){}});return _1b6a;});},"Sage/MainView/IntegrationContract/InvoiceRTDV":function(){define(["dojo/_base/declare","dojo/i18n!./nls/InvoiceRTDV","dijit/_Widget","Sage/_Templated","Sage/UI/SLXPreviewGrid","Sage/Data/ProxySDataStore","Sage/UI/Dialogs","Sage/UI/Columns/DateTime","dojo/text!./templates/InvoiceRTDV.html","Sage/UI/DateTextBox","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dijit/Dialog","Sage/Utility/Workspace"],function(_1b86,_1b87,_1b88,_1b89,_1b8a,_1b8b,_1b8c,_1b8d,_1b8e,_1b8f,_1b90,lang,_1b91,_1b92){var _1b93=_1b86("Sage.MainView.IntegrationContract.InvoiceRTDV",[_1b88,_1b89],{workspace:"",tabId:"",grid:"",globalSyncId:"",operatingCompanyId:"",dataStore:null,paymentsDataStore:null,deliveriesDataStore:null,widgetsInTemplate:true,widgetTemplate:new Simplate(eval(_1b8e)),constructor:function(){dojo.mixin(this,_1b87);},loadSalesInvoices:function(){var self=this;var _1b94={readOnly:true,rowsPerPage:20,slxContext:{workspace:this.workspace,tabId:this.tabId},columns:[{width:10,field:"reference",name:this.grdInvoice_Name,defaultValue:"",sortable:true,formatter:this.invoiceDetailsViewRenderer,style:"text-align:left;",editable:false},{width:10,field:"date",type:_1b8d,formatType:"date",dateOnly:true,utc:false,name:this.grdInvoice_Date,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"customerReference",name:this.grdInvoice_PO,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"settlementDiscountTerms",name:this.grdInvoice_PaymentTerms,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"netTotal",name:this.grdInvoice_NetTotal,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"taxTotal",name:this.grdInvoice_Tax,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"grossTotal",name:this.grdInvoice_Amount,defaultValue:"",sortable:true,style:"text-align:left;",editable:false}],storeOptions:new _1b8b({service:Sage.Data.SDataServiceRegistry.getSDataService("proxy",true,false),resourceKind:"tradingAccounts",getResourcePredicate:function(){return dojo.string.substitute("$uuid eq '${0}'",[self.globalSyncId]);},getAppId:function(){return self.operatingCompanyId;},include:[],select:[],pathSegments:[{"text":"salesInvoices"}]}),tools:[]};var _1b95=new _1b8a.Grid(_1b94,this.placeHolder);_1b95.startup();var _1b96=_1b92.getDetailTabWorkspaceContainer();_1b96.resize();_1b96.resize();this.grid=_1b95;},invoiceDetailsViewRenderer:function(value){return dojo.string.substitute("<a href=\"javascript:invoiceRTDV.loadDetailsView();\">${0}</a>",[value]);},destroyFirst:function(id){var _1b97=dijit.byId(id);if(_1b97){_1b97.destroyRecursive();}},loadAddresses:function(data){this.destroyFirst("sdgrdInvoiceAddresses");if(data&&typeof data.postalAddresses==="undefined"){data.postalAddresses={};data.postalAddresses.$resources=new Array();}var _1b98=new dojox.grid.DataGrid({id:"sdgrdInvoiceAddresses",store:this.dataStore,structure:[{width:10,field:"type",name:this.grdAddress_Name,defaultValue:"",sortable:true,editable:false},{width:10,field:"address1",name:this.grdAddress_address1,defaultValue:"",sortable:true,editable:false},{width:10,field:"address2",name:this.grdAddress_address2,defaultValue:"",sortable:true,editable:false},{width:10,field:"townCity",name:this.grdAddress_City,defaultValue:"",sortable:true,editable:false},{width:10,field:"stateRegion",name:this.grdAddress_State,defaultValue:"",sortable:true,editable:false},{width:10,field:"zipPostCode",name:this.grdAddress_Zip,defaultValue:"",sortable:true,editable:false}],rowsPerPage:200,query:{},queryOptions:{singleResourceRequest:true,property:"postalAddresses"}});dojo.place(_1b98.domNode,this.sdgrdInvoiceAddresses_Grid,"single");_1b98.startup();},loadLineItems:function(data){this.destroyFirst("sdgrdInvoiceLines");if(data&&typeof data.salesInvoiceLines==="undefined"){data.salesInvoiceLines={};data.salesInvoiceLines.$resources=new Array();}var _1b99=new dojox.grid.DataGrid({id:"sdgrdInvoiceLines",store:this.dataStore,structure:[{width:10,field:"number",name:this.grdItems_Line,defaultValue:"",sortable:true,editable:false},{width:10,field:"type",name:this.grdItems_Type,defaultValue:"",sortable:true,editable:false},{width:10,field:"status",name:this.grdItems_Status,defaultValue:"",sortable:true,editable:false},{width:10,field:"commodity.name",name:this.grdItems_Commodity,defaultValue:"",sortable:true,editable:false},{width:10,field:"commodityVariant.reference",name:this.grdItems_CommodityVariant,defaultValue:"",sortable:true,editable:false},{width:10,field:"commodityDimension.reference",name:this.grdItems_CommodityDimension,defaultValue:"",sortable:true,editable:false},{width:10,field:"unitOfMeasure.name",name:this.grdItems_UnitOfMeasure,defaultValue:"",sortable:true,editable:false},{width:10,field:"quantity",name:this.grdItems_Quantity,defaultValue:"",sortable:true,editable:false},{width:10,field:"initialPrice",name:this.grdItems_InitialPrice,defaultValue:"",sortable:true,editable:false},{width:10,field:"actualPrice",name:this.grdItems_ActualPrice,defaultValue:"",sortable:true,editable:false},{width:10,field:"netTotal",name:this.grdItems_NetTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"chargesTotal",name:this.grdItems_ChargesTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"discountTotal",name:this.grdItems_DiscountTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"taxTotal",name:this.grdItems_TaxTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"grossTotal",name:this.grdItems_GrossTotal,defaultValue:"",sortable:true,editable:false}],rowsPerPage:200,query:{},queryOptions:{singleResourceRequest:true,property:"salesInvoiceLines"}});dojo.place(_1b99.domNode,this.sdgrdInvoiceLines_Grid,"only");_1b99.startup();},initPayments:function(){if(this.paymentsDataStore){return;}var self=this;var row=this.grid._grid.selection.getSelected()[0];if(row){this.paymentsDataStore=new _1b8b({service:Sage.Data.SDataServiceRegistry.getSDataService("proxy",true,false),getResourcePredicate:function(){var _1b9a=row["$key"];return dojo.string.substitute("'${0}'",[_1b9a]);},resourceKind:"salesInvoices",getAppId:function(){return self.operatingCompanyId;},include:[],select:[],pathSegments:[{"text":"receipts"}],includeContent:true});dojo.connect(this.paymentsDataStore,"onGetSingleResource",this,"loadPayments");this.paymentsDataStore.getSingleResource();}},loadPayments:function(data){this.destroyFirst("sdgrdPayments");if(data&&typeof data.receipts==="undefined"){data.receipts={};data.receipts.$resources=new Array();}var _1b9b=new dojox.grid.DataGrid({id:"sdgrdPayments",store:this.paymentsDataStore,structure:[{width:10,field:"date",type:_1b8d,formatType:"date",name:this.grdPayments_Date,defaultValue:"",sortable:true,editable:false},{width:10,field:"name",name:this.grdPayments_Name,defaultValue:"",sortable:true,editable:false},{width:10,field:"type",name:this.grdPayments_Type,defaultValue:"",sortable:true,editable:false},{width:10,field:"status",name:this.grdPayments_Status,defaultValue:"",sortable:true,editable:false},{width:10,field:"netTotal",name:this.grdPayments_NetTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"discountTotal",name:this.grdPayments_Discounts,defaultValue:"",sortable:true,editable:false},{width:10,field:"chargesTotal",name:this.grdPayments_Charges,defaultValue:"",sortable:true,editable:false},{width:10,field:"taxTotal",name:this.grdPayments_Tax,defaultValue:"",sortable:true,editable:false},{width:10,field:"grossTotal",name:this.grdPayments_GrossTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"currency",name:this.grdPayments_Currency,defaultValue:"",sortable:true,editable:false},{width:10,field:"tenderType",name:this.grdPayments_TenderType,defaultValue:"",sortable:true,editable:false},{width:10,field:"tenderReference",name:this.grdPayments_TenderReference,defaultValue:"",sortable:true,editable:false},{width:10,field:"processDate",type:_1b8d,formatType:"date",name:this.grdPayments_ProcessDate,defaultValue:"",sortable:true,editable:false}],rowsPerPage:200,query:{}});dojo.place(_1b9b.domNode,this.sdgrdPayments_Grid,"only");_1b9b.startup();},initDeliveries:function(){if(this.deliveriesDataStore){return;}var self=this;var row=this.grid._grid.selection.getSelected()[0];if(row){this.deliveriesDataStore=new _1b8b({service:Sage.Data.SDataServiceRegistry.getSDataService("proxy",true,false),getResourcePredicate:function(){var _1b9c=row["$key"];return dojo.string.substitute("'${0}'",[_1b9c]);},resourceKind:"salesInvoices",getAppId:function(){return self.operatingCompanyId;},include:[],select:[],pathSegments:[{"text":"salesOrderDeliveries"}],includeContent:true});dojo.connect(this.deliveriesDataStore,"onGetSingleResource",this,"loadDeliveries");this.deliveriesDataStore.getSingleResource();}},loadDeliveries:function(data){this.destroyFirst("sdgrdDeliveries");if(data&&typeof data.salesOrderDeliveries==="undefined"){data.salesOrderDeliveries={};data.salesOrderDeliveries.$resources=new Array();}var _1b9d=new dojox.grid.DataGrid({id:"sdgrdDeliveries",store:this.deliveriesDataStore,structure:[{width:10,field:"reference",name:this.grdDeliveries_Number,defaultValue:"",sortable:true,editable:false},{width:10,field:"type",name:this.grdDeliveries_Type,defaultValue:"",sortable:true,editable:false},{width:10,field:"status",name:this.grdDeliveries_Status,defaultValue:"",sortable:true,editable:false},{width:10,field:"requestedDeliveryDate",type:_1b8d,formatType:"date",name:this.grdDeliveries_RequestedDate,defaultValue:"",sortable:true,editable:false},{width:10,field:"actualDeliveryDate",type:_1b8d,formatType:"date",name:this.grdDeliveries_ActualDate,defaultValue:"",sortable:true,editable:false},{width:10,field:"actualDeliveryTime",type:_1b8d,formatType:"date",name:this.grdDeliveries_ActualTime,defaultValue:"",sortable:true,editable:false},{width:10,field:"requestedQuantity",name:this.grdDeliveries_RequestedQuantity,defaultValue:"",sortable:true,editable:false},{width:10,field:"deliveredQuantity",name:this.grdDeliveries_DeliveredQuantity,defaultValue:"",sortable:true,editable:false},{width:10,field:"deliveryMethod",name:this.grdDeliveries_Method,defaultValue:"",sortable:true,editable:false},{width:10,field:"carrierTradingAccount.name",name:this.grdDeliveries_Carrier,defaultValue:"",sortable:true,editable:false},{width:10,field:"carrierReference",name:this.grdDeliveries_CarrierReference,defaultValue:"",sortable:true,editable:false},{width:10,field:"dateExceptionReason",name:this.grdDeliveries_ExceptionReason,defaultValue:"",sortable:true,editable:false}],rowsPerPage:200,query:{}});dojo.place(_1b9d.domNode,this.sdgrdDeliveries_Grid,"only");_1b9d.startup();},loadDetailsView:function(){dojo.removeClass(this.loadingContainer,"display-none");dojo.addClass(this.invoiceDialogContent,"display-none");this._dialog.show();var self=this;var row=this.grid._grid.selection.getSelected()[0];if(row){var _1b9e=row["$key"];this.dataStore=new _1b8b({service:Sage.Data.SDataServiceRegistry.getSDataService("proxy",true,false),resourceKind:"salesInvoices",getResourcePredicate:function(){return dojo.string.substitute("'${0}'",[_1b9e]);},getAppId:function(){return self.operatingCompanyId;},include:[],select:["*,salesInvoiceLines/*,postalAddresses/*,buyerContact/fullName,pricelist/name,salesInvoiceLines/commodity/name,salesInvoiceLines/unitOfMeasure/name,salesInvoiceLines/commodityVariant/reference,salesInvoiceLines/commodityDimension/reference,salesOrderDeliveries/carrierTradingAccount/name"],includeContent:true});dojo.connect(this.dataStore,"onGetSingleResource",this,"buildGrids");this.dataStore.getSingleResource();}},loadInvoiceDetails:function(data){if(data&&typeof data!=="undefined"){this._dialog.set("value",data);}},buildGrids:function(data){this.loadInvoiceDetails(data);this.loadAddresses(data);this.loadLineItems(data);if(this.invoiceTabContainer!=null){this.invoiceTabContainer.selectChild(this.invoiceContent);}dojo.addClass(this.loadingContainer,"display-none");dojo.removeClass(this.invoiceDialogContent,"display-none");this._dialog.resize();},hideDetailsDialog:function(){this.destroyFirst("sdgrdDeliveries");this.deliveriesDataStore=null;this.destroyFirst("sdgrdPayments");this.paymentsDataStore=null;this._dialog.hide();}});return _1b93;});},"Sage/UI/DateTextBox":function(){define(["dijit/form/DateTextBox","Sage/Utility","dojo/_base/declare"],function(_1b9f,util,_1ba0){var _1ba1=_1ba0("Sage.UI.DateTextBox",_1b9f,{_getValueAttr:function(){var d=this.inherited(arguments);return (d)?util.Convert.toJsonStringFromDate(d):d;},_setValueAttr:function(value,_1ba2,_1ba3){if(Sage.Utility.Convert.isDateString(value)){value=util.Convert.toDateFromString(value);}this.inherited(arguments,[value,_1ba2,_1ba3]);}});return _1ba1;});},"Sage/MainView/IntegrationContract/SalesOrderRTDV":function(){define(["dojo/_base/declare","dojo/i18n!./nls/SalesOrderRTDV","dijit/_Widget","Sage/_Templated","Sage/UI/SLXPreviewGrid","Sage/Data/ProxySDataStore","Sage/UI/Dialogs","Sage/UI/Columns/DateTime","dojo/text!./templates/SalesOrderRTDV.html","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","Sage/UI/DateTextBox","dijit/Dialog","Sage/Utility/Workspace"],function(_1ba4,_1ba5,_1ba6,_1ba7,_1ba8,_1ba9,_1baa,_1bab,_1bac,_1bad,lang,_1bae,_1baf,_1bb0){var _1bb1=_1ba4("Sage.MainView.IntegrationContract.SalesOrderRTDV",[_1ba6,_1ba7],{workspace:"",tabId:"",grid:"",globalSyncId:"",operatingCompanyId:"",dataStore:null,salesPersonsDataStore:null,paymentsDataStore:null,deliveriesDataStore:null,widgetsInTemplate:true,widgetTemplate:new Simplate(eval(_1bac)),constructor:function(){dojo.mixin(this,_1ba5);},loadSalesOrders:function(){var self=this;var _1bb2={readOnly:true,rowsPerPage:20,slxContext:{workspace:this.workspace,tabId:this.tabId},columns:[{width:10,field:"$key",name:" ",sortable:false,formatter:this.salesOrdersX3DetailsViewRenderer,style:"text-align:left;",editable:false,hidden:function(){return !accountingSystemHandlesSO();}()},{width:10,field:"reference",name:this.grdSalesOrder_OrderNumber,sortable:true,formatter:this.salesOrdersDetailsViewRenderer,style:"text-align:left;",editable:false},{width:10,field:"date",type:_1bab,formatType:"date",dateOnly:true,utc:false,name:this.grdSalesOrder_OrderDate,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"status",name:this.grdSalesOrder_Status,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"statusFlagText",name:this.grdSalesOrder_HoldStatus,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"type",name:this.grdSalesOrder_Type,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"customerReference",name:this.grdSalesOrder_PO,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"netTotal",name:this.grdSalesOrder_NetTotal,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"discountTotal",name:this.grdSalesOrder_DiscountTotal,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"chargesTotal",name:this.grdSalesOrder_ChargesTotal,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"taxTotal",name:this.grdSalesOrder_TaxTotal,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"grossTotal",name:this.grdSalesOrder_GrossTotal,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"currency",name:this.grdSalesOrder_Currency,defaultValue:"",sortable:true,style:"text-align:left;",editable:false}],storeOptions:new _1ba9({service:Sage.Data.SDataServiceRegistry.getSDataService("proxy",true,false),resourceKind:"tradingAccounts",getResourcePredicate:function(){return dojo.string.substitute("$uuid eq '${0}'",[self.globalSyncId]);},getAppId:function(){return self.operatingCompanyId;},include:[],select:[],pathSegments:[{"text":"salesOrders"}]}),tools:[]};var _1bb3=new _1ba8.Grid(_1bb2,this.placeHolder);_1bb3.startup();var _1bb4=_1bb0.getDetailTabWorkspaceContainer();_1bb4.resize();_1bb4.resize();this.grid=_1bb3;},salesOrdersDetailsViewRenderer:function(value){return dojo.string.substitute("<a href=\"javascript:salesOrderRTDV.loadDetailsView();\">${0}</a>",[value]);},salesOrdersX3DetailsViewRenderer:function(){return dojo.string.substitute("<a href=\"javascript:salesOrderRTDV.callX3DetailsView();\">${0}</a>",[_1ba5.grdSalesOrder_Edit]);},destroyFirst:function(id){var _1bb5=dijit.byId(id);if(_1bb5){_1bb5.destroyRecursive();}},initSalesPersons:function(){if(this.salesPersonsDataStore){return;}var self=this;var row=this.grid._grid.selection.getSelected()[0];if(row){this.salesPersonsDataStore=new _1ba9({service:Sage.Data.SDataServiceRegistry.getSDataService("proxy",true,false),getResourcePredicate:function(){var _1bb6=row["$key"];return dojo.string.substitute("'${0}'",[_1bb6||""]);},resourceKind:"salesOrders",getAppId:function(){return self.operatingCompanyId;},include:[],select:[],pathSegments:[{"text":"salesPersons"}],includeContent:true});dojo.connect(this.salesPersonsDataStore,"onGetSingleResource",this,"loadSalesPersons");this.salesPersonsDataStore.getSingleResource();}},loadSalesPersons:function(data){this.destroyFirst("sdgrdSalesPersons");if(data&&typeof data.salesPersons==="undefined"){data.salesPersons={};data.salesPersons.$resources=new Array();}var _1bb7=new dojox.grid.DataGrid({id:"sdgrdSalesPersons",store:this.salesPersonsDataStore,structure:[{width:10,field:"name",name:this.grdSalesPersons_Name,defaultValue:"",sortable:true,editable:false},{width:10,field:"type",name:this.grdSalesPersons_Type,defaultValue:"",sortable:true,editable:false},{width:10,field:"extension",name:this.grdSalesPersons_Extension,defaultValue:"",sortable:true,editable:false},{width:10,field:"relationship",name:this.grdSalesPersons_Relationship,defaultValue:"",sortable:true,editable:false}],rowsPerPage:200,query:{}});dojo.place(_1bb7.domNode,this.sdgrdSalesPersons_Grid,"single");_1bb7.startup();},loadAddresses:function(data){this.destroyFirst("sdgrdSalesOrderAddresses");if(data&&typeof data.postalAddresses==="undefined"){data.postalAddresses={};data.postalAddresses.$resources=new Array();}var _1bb8=new dojox.grid.DataGrid({id:"sdgrdSalesOrderAddresses",store:this.dataStore,structure:[{width:10,field:"type",name:this.grdAddress_Name,defaultValue:"",sortable:true,editable:false},{width:10,field:"address1",name:this.grdAddress_Address1,defaultValue:"",sortable:true,editable:false},{width:10,field:"address2",name:this.grdAddress_Address2,defaultValue:"",sortable:true,editable:false},{width:10,field:"townCity",name:this.grdAddress_City,defaultValue:"",sortable:true,editable:false},{width:10,field:"stateRegion",name:this.grdAddress_State,defaultValue:"",sortable:true,editable:false},{width:10,field:"zipPostCode",name:this.grdAddress_Zip,defaultValue:"",sortable:true,editable:false}],rowsPerPage:200,query:{},queryOptions:{singleResourceRequest:true,property:"postalAddresses"}});dojo.place(_1bb8.domNode,this.sdgrdSalesOrderAddresses_Grid,"single");_1bb8.startup();},loadLineItems:function(data){this.destroyFirst("sdgrdSalesOrderLines");if(data&&typeof data.salesOrderLines==="undefined"){data.salesOrderLines={};data.salesOrderLines.$resources=new Array();}var _1bb9=new dojox.grid.DataGrid({id:"sdgrdSalesOrderLines",store:this.dataStore,structure:[{width:10,field:"number",name:this.grdItems_Line,defaultValue:"",sortable:true,editable:false},{width:10,field:"type",name:this.grdItems_Type,defaultValue:"",sortable:true,editable:false},{width:10,field:"commodity.name",name:this.grdItems_Commodity,defaultValue:"",sortable:true,editable:false},{width:10,field:"commodityVariant.reference",name:this.grdItems_CommodityVariant,defaultValue:"",sortable:true,editable:false},{width:10,field:"commodityDimension.reference",name:this.grdItems_CommodityDimension,defaultValue:"",sortable:true,editable:false},{width:10,field:"unitOfMeasure.name",name:this.grdItems_UnitOfMeasure,defaultValue:"",sortable:true,editable:false},{width:10,field:"fulfillmentLocation.name",name:this.grdItems_Location,defaultValue:"",sortable:true,editable:false},{width:10,field:"pricelist.name",name:this.grdItems_PriceList,defaultValue:"",sortable:true,editable:false},{width:10,field:"quantity",name:this.grdItems_Quantity,defaultValue:"",sortable:true,editable:false},{width:10,field:"initialPrice",name:this.grdItems_InitialPrice,defaultValue:"",sortable:true,editable:false},{width:10,field:"actualPrice",name:this.grdItems_ActualPrice,defaultValue:"",sortable:true,editable:false},{width:10,field:"netTotal",name:this.grdItems_NetTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"chargesTotal",name:this.grdItems_ChargesTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"discountTotal",name:this.grdItems_DiscountTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"taxTotal",name:this.grdItems_TaxTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"grossTotal",name:this.grdItems_GrossTotal,defaultValue:"",sortable:true,editable:false}],rowsPerPage:200,query:{},queryOptions:{singleResourceRequest:true,property:"salesOrderLines"}});dojo.place(_1bb9.domNode,this.sdgrdSalesOrderLines_Grid,"single");_1bb9.startup();},initPayments:function(){if(this.paymentsDataStore){return;}var self=this;var row=this.grid._grid.selection.getSelected()[0];if(row){this.paymentsDataStore=new _1ba9({service:Sage.Data.SDataServiceRegistry.getSDataService("proxy",true,false),getResourcePredicate:function(){var _1bba=row["$key"];return dojo.string.substitute("'${0}'",[_1bba||""]);},resourceKind:"salesOrders",getAppId:function(){return self.operatingCompanyId;},include:[],select:[],pathSegments:[{"text":"receipts"}],includeContent:true});dojo.connect(this.paymentsDataStore,"onGetSingleResource",this,"loadPayments");this.paymentsDataStore.getSingleResource();}},loadPayments:function(data){this.destroyFirst("sdgrdSOPayments");if(data&&typeof data.receipts==="undefined"){data.receipts={};data.receipts.$resources=new Array();}var _1bbb=new dojox.grid.DataGrid({id:"sdgrdSOPayments",store:this.paymentsDataStore,structure:[{width:10,field:"date",type:_1bab,formatType:"date",name:this.grdPayments_Date,defaultValue:"",sortable:true,editable:false},{width:10,field:"name",name:this.grdPayments_Name,defaultValue:"",sortable:true,editable:false},{width:10,field:"type",name:this.grdPayments_Type,defaultValue:"",sortable:true,editable:false},{width:10,field:"status",name:this.grdPayments_Status,defaultValue:"",sortable:true,editable:false},{width:10,field:"netTotal",name:this.grdPayments_NetTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"discountTotal",name:this.grdPayments_Discounts,defaultValue:"",sortable:true,editable:false},{width:10,field:"chargesTotal",name:this.grdPayments_Charges,defaultValue:"",sortable:true,editable:false},{width:10,field:"taxTotal",name:this.grdPayments_Tax,defaultValue:"",sortable:true,editable:false},{width:10,field:"grossTotal",name:this.grdPayments_GrossTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"currency",name:this.grdPayments_Currency,defaultValue:"",sortable:true,editable:false},{width:10,field:"tenderType",name:this.grdPayments_TenderType,defaultValue:"",sortable:true,editable:false},{width:10,field:"tenderReference",name:this.grdPayments_TenderReference,defaultValue:"",sortable:true,editable:false},{width:10,field:"processDate",type:_1bab,formatType:"date",name:this.grdPayments_ProcessDate,defaultValue:"",sortable:true,editable:false}],rowsPerPage:200,query:{}});dojo.place(_1bbb.domNode,this.sdgrdSOPayments_Grid,"single");_1bbb.startup();},initDeliveries:function(){if(this.deliveriesDataStore){return;}var self=this;var row=this.grid._grid.selection.getSelected()[0];if(row){this.deliveriesDataStore=new _1ba9({service:Sage.Data.SDataServiceRegistry.getSDataService("proxy",true,false),getResourcePredicate:function(){var _1bbc=row["$key"];return dojo.string.substitute("'${0}'",[_1bbc]);},resourceKind:"salesOrders",getAppId:function(){return self.operatingCompanyId;},include:[],select:[],pathSegments:[{"text":"salesOrderDeliveries"}],includeContent:true});dojo.connect(this.deliveriesDataStore,"onGetSingleResource",this,"loadDeliveries");this.deliveriesDataStore.getSingleResource();}},loadDeliveries:function(data){this.destroyFirst("sdgrdSODeliveries");if(data&&typeof data.salesOrderDeliveries==="undefined"){data.salesOrderDeliveries={};data.salesOrderDeliveries.$resources=new Array();}var _1bbd=new dojox.grid.DataGrid({id:"sdgrdSODeliveries",store:this.deliveriesDataStore,structure:[{width:10,field:"reference",name:this.grdDeliveries_Number,defaultValue:"",sortable:true,editable:false},{width:10,field:"type",name:this.grdDeliveries_Type,defaultValue:"",sortable:true,editable:false},{width:10,field:"status",name:this.grdDeliveries_Status,defaultValue:"",sortable:true,editable:false},{width:10,field:"requestedDeliveryDate",type:_1bab,formatType:"date",name:this.grdDeliveries_RequestedDate,defaultValue:"",sortable:true,editable:false},{width:10,field:"actualDeliveryDate",type:_1bab,formatType:"date",name:this.grdDeliveries_ActualDate,defaultValue:"",sortable:true,editable:false},{width:10,field:"actualDeliveryTime",type:_1bab,formatType:"date",name:this.grdDeliveries_ActualTime,defaultValue:"",sortable:true,editable:false},{width:10,field:"requestedQuantity",name:this.grdDeliveries_RequestedQuantity,defaultValue:"",sortable:true,editable:false},{width:10,field:"deliveredQuantity",name:this.grdDeliveries_DeliveredQuantity,defaultValue:"",sortable:true,editable:false},{width:10,field:"deliveryMethod",name:this.grdDeliveries_Method,defaultValue:"",sortable:true,editable:false},{width:10,field:"carrierTradingAccount.name",name:this.grdDeliveries_Carrier,defaultValue:"",sortable:true,editable:false},{width:10,field:"carrierReference",name:this.grdDeliveries_CarrierReference,defaultValue:"",sortable:true,editable:false},{width:10,field:"dateExceptionReason",type:_1bab,formatType:"date",name:this.grdDeliveries_ExceptionReason,defaultValue:"",sortable:true,editable:false}],rowsPerPage:200,query:{}});dojo.place(_1bbd.domNode,this.sdgrdSODeliveries_Grid,"single");_1bbd.startup();},loadDetailsView:function(){dojo.removeClass(this.loadingContainer,"display-none");dojo.addClass(this.salesOrderDetails,"display-none");dojo.addClass(this.tabContentDetails,"display-none");this._dialog.show();var self=this;var row=this.grid._grid.selection.getSelected()[0];if(row){var _1bbe=row["$key"];this.dataStore=new _1ba9({service:Sage.Data.SDataServiceRegistry.getSDataService("proxy",true,false),resourceKind:"salesOrders",getResourcePredicate:function(){return dojo.string.substitute("'${0}'",[_1bbe]);},getAppId:function(){return self.operatingCompanyId;},include:[],select:["*,salesOrderLines/*,postalAddresses/*,buyerContact/fullName,pricelist/name,quotation/reference,salesOrderLines/commodity/name,salesOrderLines/unitOfMeasure/name,salesOrderLines/fulfillmentLocation/name,salesOrderLines/pricelist/name,salesOrderLines/commodityVariant/reference,salesOrderLines/commodityDimension/reference,salesOrderDeliveries/carrierTradingAccount/name"]});dojo.connect(this.dataStore,"onGetSingleResource",this,"buildGrids");this.dataStore.getSingleResource();}},callX3DetailsView:function(){var row=this.grid._grid.selection.getSelected()[0];if(row){var _1bbf=row["$key"];dojo.xhrGet({url:dojo.string.substitute("slxdata.ashx/slx/crm/-/X3SalesOrder/getediterpsalesorderurl?salesOrderKey=${0}&operatingCompany=${1}&_dc=${2}",[_1bbf,this.operatingCompanyId,new Date().getTime()]),cache:false,preventCache:true,handleAs:"json",load:lang.hitch(this,function(data,xhr){this.launchAccountingSystemView(data);}),error:function(_1bc0,_1bc1,error){dojo.byId([self.id,"-Loading-container"].join("")).innerHTML=_1ba5.Error_InvalidEndpoint;}});}},loadSalesOrderDetails:function(data){if(data&&typeof data!=="undefined"){this._dialog.set("value",data);}},buildGrids:function(data){this.loadSalesOrderDetails(data);this.loadAddresses(data);this.loadLineItems(data);if(this.salesOrderContainer!=null){this.salesOrderContainer.selectChild(this.salesOrderContent);}dojo.addClass(this.loadingContainer,"display-none");dojo.removeClass(this.salesOrderDetails,"display-none");dojo.removeClass(this.tabContentDetails,"display-none");this._dialog.resize();},hideDetailsDialog:function(){this.destroyFirst("sdgrdSalesPersons");this.salesPersonsDataStore=null;this.destroyFirst("sdgrdSODeliveries");this.deliveriesDataStore=null;this.destroyFirst("sdgrdSOPayments");this.paymentsDataStore=null;this._dialog.hide();},destroy:function(_1bc2,args){},launchAccountingSystemView:function(data){if(data.error!=null){_1baa.showError(data.error);}else{try{window.open(data.url);}catch(err){_1baa.showError(this.errorERPRequest);console.error(dojo.string.substitute(this.errorERPRequestDetails,[this.errorERPRequest,err,url]));}}},executeErpInsertView:function(){dojo.xhrGet({url:dojo.string.substitute("slxdata.ashx/slx/crm/-/X3SalesOrder/getinserterpsalesorderurl?accountId=${0}&operatingCompany=${1}&_dc=${2}",[Sage.Utility.getCurrentEntityId(),this.operatingCompanyId,new Date().getTime()]),cache:false,preventCache:true,handleAs:"json",load:lang.hitch(this,function(data,xhr){this.launchAccountingSystemView(data);}),error:function(_1bc3,_1bc4,error){dojo.byId([self.id,"-Loading-container"].join("")).innerHTML=_1ba5.errorERPRequest;}});}});return _1bb1;});},"Sage/MainView/IntegrationContract/SalesQuoteRTDV":function(){define(["dojo/_base/declare","dojo/i18n!./nls/SalesQuoteRTDV","dijit/_Widget","Sage/_Templated","Sage/UI/SLXPreviewGrid","Sage/Data/ProxySDataStore","Sage/UI/Dialogs","Sage/UI/Columns/DateTime","dojo/text!./templates/SalesQuoteRTDV.html","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","Sage/UI/DateTextBox","Sage/Utility/Workspace"],function(_1bc5,_1bc6,_1bc7,_1bc8,_1bc9,_1bca,_1bcb,_1bcc,_1bcd,_1bce,lang,_1bcf,_1bd0,_1bd1){var _1bd2=_1bc5("Sage.MainView.IntegrationContract.SalesQuoteRTDV",[_1bc7,_1bc8],{workspace:"",tabId:"",grid:"",globalSyncId:"",operatingCompanyId:"",dataStore:null,salesPersonsDataStore:null,paymentsDataStore:null,deliveriesDataStore:null,widgetsInTemplate:true,widgetTemplate:new Simplate(eval(_1bcd)),constructor:function(){dojo.mixin(this,_1bc6);},loadSalesQuotes:function(){var self=this;var _1bd3={readOnly:true,rowsPerPage:20,slxContext:{workspace:this.workspace,tabId:this.tabId},columns:[{width:10,field:"$key",name:" ",sortable:false,formatter:this.salesQuotesX3DetailsViewRenderer,style:"text-align:left;",editable:false,hidden:function(){return !accountingSystemHandlesSO();}()},{width:10,field:"reference",name:this.grdSalesQuote_QuoteNumber,sortable:true,formatter:this.salesQuotesDetailsViewRenderer,style:"text-align:left;",editable:false},{width:10,field:"date",type:_1bcc,formatType:"date",dateOnly:true,utc:false,name:this.grdSalesQuote_QuoteDate,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"status",name:this.grdSalesQuote_Status,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"statusFlagText",name:this.grdSalesQuote_HoldStatus,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"type",name:this.grdSalesQuote_Type,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"customerReference",name:this.grdSalesQuote_PO,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"netTotal",name:this.grdSalesQuote_NetTotal,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"discountTotal",name:this.grdSalesQuote_DiscountTotal,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"chargesTotal",name:this.grdSalesQuote_ChargesTotal,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"taxTotal",name:this.grdSalesQuote_TaxTotal,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"grossTotal",name:this.grdSalesQuote_GrossTotal,defaultValue:"",sortable:true,style:"text-align:left;",editable:false},{width:10,field:"currency",name:this.grdSalesQuote_Currency,defaultValue:"",sortable:true,style:"text-align:left;",editable:false}],storeOptions:new _1bca({service:Sage.Data.SDataServiceRegistry.getSDataService("proxy",true,false),resourceKind:"tradingAccounts",getResourcePredicate:function(){return dojo.string.substitute("$uuid eq '${0}'",[self.globalSyncId]);},getAppId:function(){return self.operatingCompanyId;},include:[],select:[],pathSegments:[{"text":"salesQuotations"}]}),tools:[]};var _1bd4=new _1bc9.Grid(_1bd3,this.placeHolder);_1bd4.startup();var _1bd5=_1bd1.getDetailTabWorkspaceContainer();_1bd5.resize();_1bd5.resize();this.grid=_1bd4;},salesQuotesDetailsViewRenderer:function(value){return dojo.string.substitute("<a href=\"javascript:salesQuoteRTDV.loadDetailsView();\">${0}</a>",[value]);},salesQuotesX3DetailsViewRenderer:function(){return dojo.string.substitute("<a href=\"javascript:salesQuoteRTDV.callX3DetailsView();\">${0}</a>",[_1bc6.grdSalesQuote_Edit]);},destroyFirst:function(id){var _1bd6=dijit.byId(id);if(_1bd6){_1bd6.destroyRecursive();}},initSalesPersons:function(){if(this.salesPersonsDataStore){return;}var self=this;var row=this.grid._grid.selection.getSelected()[0];if(row){this.salesPersonsDataStore=new _1bca({service:Sage.Data.SDataServiceRegistry.getSDataService("proxy",true,false),getResourcePredicate:function(){var _1bd7=row["$key"];return dojo.string.substitute("'${0}'",[_1bd7||""]);},resourceKind:"salesQuotations",getAppId:function(){return self.operatingCompanyId;},include:[],select:[],pathSegments:[{"text":"salesPersons"}],includeContent:true});dojo.connect(this.salesPersonsDataStore,"onGetSingleResource",this,"loadSalesPersons");this.salesPersonsDataStore.getSingleResource();}},loadSalesPersons:function(data){this.destroyFirst("sdgrdSalesPersons");if(data&&typeof data.salesPersons==="undefined"){data.salesPersons={};data.salesPersons.$resources=new Array();}var _1bd8=new dojox.grid.DataGrid({id:"sdgrdSalesPersons",store:this.salesPersonsDataStore,structure:[{width:10,field:"name",name:this.grdSalesPersons_Name,defaultValue:"",sortable:true,editable:false},{width:10,field:"type",name:this.grdSalesPersons_Type,defaultValue:"",sortable:true,editable:false},{width:10,field:"extension",name:this.grdSalesPersons_Extension,defaultValue:"",sortable:true,editable:false},{width:10,field:"relationship",name:this.grdSalesPersons_Relationship,defaultValue:"",sortable:true,editable:false}],rowsPerPage:200,query:{}});dojo.place(_1bd8.domNode,this.sdgrdSalesPersons_Grid,"single");_1bd8.startup();},loadAddresses:function(data){this.destroyFirst("sdgrdSalesQuoteAddresses");if(data&&typeof data.postalAddresses==="undefined"){data.postalAddresses={};data.postalAddresses.$resources=new Array();}var _1bd9=new dojox.grid.DataGrid({id:"sdgrdSalesQuoteAddresses",store:this.dataStore,structure:[{width:10,field:"type",name:this.grdAddress_Name,defaultValue:"",sortable:true,editable:false},{width:10,field:"address1",name:this.grdAddress_Address1,defaultValue:"",sortable:true,editable:false},{width:10,field:"address2",name:this.grdAddress_Address2,defaultValue:"",sortable:true,editable:false},{width:10,field:"townCity",name:this.grdAddress_City,defaultValue:"",sortable:true,editable:false},{width:10,field:"stateRegion",name:this.grdAddress_State,defaultValue:"",sortable:true,editable:false},{width:10,field:"zipPostCode",name:this.grdAddress_Zip,defaultValue:"",sortable:true,editable:false}],rowsPerPage:200,query:{},queryOptions:{singleResourceRequest:true,property:"postalAddresses"}});dojo.place(_1bd9.domNode,this.sdgrdSalesQuoteAddresses_Grid,"single");_1bd9.startup();},loadLineItems:function(data){this.destroyFirst("sdgrdSalesQuoteLines");if(data&&typeof data.salesQuotationLines==="undefined"){data.salesQuotationLines={};data.salesQuotationLines.$resources=new Array();}var _1bda=new dojox.grid.DataGrid({id:"sdgrdSalesQuoteLines",store:this.dataStore,structure:[{width:10,field:"number",name:this.grdItems_Line,defaultValue:"",sortable:true,editable:false},{width:10,field:"type",name:this.grdItems_Type,defaultValue:"",sortable:true,editable:false},{width:10,field:"commodity.name",name:this.grdItems_Commodity,defaultValue:"",sortable:true,editable:false},{width:10,field:"commodityVariant.reference",name:this.grdItems_CommodityVariant,defaultValue:"",sortable:true,editable:false},{width:10,field:"commodityDimension.reference",name:this.grdItems_CommodityDimension,defaultValue:"",sortable:true,editable:false},{width:10,field:"unitOfMeasure.name",name:this.grdItems_UnitOfMeasure,defaultValue:"",sortable:true,editable:false},{width:10,field:"fulfillmentLocation.name",name:this.grdItems_Location,defaultValue:"",sortable:true,editable:false},{width:10,field:"pricelist.name",name:this.grdItems_PriceList,defaultValue:"",sortable:true,editable:false},{width:10,field:"quantity",name:this.grdItems_Quantity,defaultValue:"",sortable:true,editable:false},{width:10,field:"initialPrice",name:this.grdItems_InitialPrice,defaultValue:"",sortable:true,editable:false},{width:10,field:"actualPrice",name:this.grdItems_ActualPrice,defaultValue:"",sortable:true,editable:false},{width:10,field:"netTotal",name:this.grdItems_NetTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"chargesTotal",name:this.grdItems_ChargesTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"discountTotal",name:this.grdItems_DiscountTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"taxTotal",name:this.grdItems_TaxTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"grossTotal",name:this.grdItems_GrossTotal,defaultValue:"",sortable:true,editable:false}],rowsPerPage:200,query:{},queryOptions:{singleResourceRequest:true,property:"salesQuotationLines"}});dojo.place(_1bda.domNode,this.sdgrdSalesQuoteLines_Grid,"single");_1bda.startup();},initPayments:function(){if(this.paymentsDataStore){return;}var self=this;var row=this.grid._grid.selection.getSelected()[0];if(row){this.paymentsDataStore=new _1bca({service:Sage.Data.SDataServiceRegistry.getSDataService("proxy",true,false),getResourcePredicate:function(){var _1bdb=row["$key"];return dojo.string.substitute("'${0}'",[_1bdb||""]);},resourceKind:"salesQuotations",getAppId:function(){return self.operatingCompanyId;},include:[],select:[],pathSegments:[{"text":"receipts"}],includeContent:true});dojo.connect(this.paymentsDataStore,"onGetSingleResource",this,"loadPayments");this.paymentsDataStore.getSingleResource();}},loadPayments:function(data){this.destroyFirst("sdgrdSOPayments");if(data&&typeof data.receipts==="undefined"){data.receipts={};data.receipts.$resources=new Array();}var _1bdc=new dojox.grid.DataGrid({id:"sdgrdSOPayments",store:this.paymentsDataStore,structure:[{width:10,field:"date",type:_1bcc,formatType:"date",name:this.grdPayments_Date,defaultValue:"",sortable:true,editable:false},{width:10,field:"name",name:this.grdPayments_Name,defaultValue:"",sortable:true,editable:false},{width:10,field:"type",name:this.grdPayments_Type,defaultValue:"",sortable:true,editable:false},{width:10,field:"status",name:this.grdPayments_Status,defaultValue:"",sortable:true,editable:false},{width:10,field:"netTotal",name:this.grdPayments_NetTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"discountTotal",name:this.grdPayments_Discounts,defaultValue:"",sortable:true,editable:false},{width:10,field:"chargesTotal",name:this.grdPayments_Charges,defaultValue:"",sortable:true,editable:false},{width:10,field:"taxTotal",name:this.grdPayments_Tax,defaultValue:"",sortable:true,editable:false},{width:10,field:"grossTotal",name:this.grdPayments_GrossTotal,defaultValue:"",sortable:true,editable:false},{width:10,field:"currency",name:this.grdPayments_Currency,defaultValue:"",sortable:true,editable:false},{width:10,field:"tenderType",name:this.grdPayments_TenderType,defaultValue:"",sortable:true,editable:false},{width:10,field:"tenderReference",name:this.grdPayments_TenderReference,defaultValue:"",sortable:true,editable:false},{width:10,field:"processDate",type:_1bcc,formatType:"date",name:this.grdPayments_ProcessDate,defaultValue:"",sortable:true,editable:false}],rowsPerPage:200,query:{}});dojo.place(_1bdc.domNode,this.sdgrdSOPayments_Grid,"single");_1bdc.startup();},initDeliveries:function(){if(this.deliveriesDataStore){return;}var self=this;var row=this.grid._grid.selection.getSelected()[0];if(row){this.deliveriesDataStore=new _1bca({service:Sage.Data.SDataServiceRegistry.getSDataService("proxy",true,false),getResourcePredicate:function(){var _1bdd=row["$key"];return dojo.string.substitute("'${0}'",[_1bdd]);},resourceKind:"salesQuotations",getAppId:function(){return self.operatingCompanyId;},include:[],select:[],pathSegments:[{"text":"salesQuoteDeliveries"}],includeContent:true});dojo.connect(this.deliveriesDataStore,"onGetSingleResource",this,"loadDeliveries");this.deliveriesDataStore.getSingleResource();}},loadDeliveries:function(data){this.destroyFirst("sdgrdSODeliveries");if(data&&typeof data.salesQuoteDeliveries==="undefined"){data.salesQuoteDeliveries={};data.salesQuoteDeliveries.$resources=new Array();}var _1bde=new dojox.grid.DataGrid({id:"sdgrdSODeliveries",store:this.deliveriesDataStore,structure:[{width:10,field:"reference",name:this.grdDeliveries_Number,defaultValue:"",sortable:true,editable:false},{width:10,field:"type",name:this.grdDeliveries_Type,defaultValue:"",sortable:true,editable:false},{width:10,field:"status",name:this.grdDeliveries_Status,defaultValue:"",sortable:true,editable:false},{width:10,field:"requestedDeliveryDate",type:_1bcc,formatType:"date",name:this.grdDeliveries_RequestedDate,defaultValue:"",sortable:true,editable:false},{width:10,field:"actualDeliveryDate",type:_1bcc,formatType:"date",name:this.grdDeliveries_ActualDate,defaultValue:"",sortable:true,editable:false},{width:10,field:"actualDeliveryTime",type:_1bcc,formatType:"date",name:this.grdDeliveries_ActualTime,defaultValue:"",sortable:true,editable:false},{width:10,field:"requestedQuantity",name:this.grdDeliveries_RequestedQuantity,defaultValue:"",sortable:true,editable:false},{width:10,field:"deliveredQuantity",name:this.grdDeliveries_DeliveredQuantity,defaultValue:"",sortable:true,editable:false},{width:10,field:"deliveryMethod",name:this.grdDeliveries_Method,defaultValue:"",sortable:true,editable:false},{width:10,field:"carrierTradingAccount.name",name:this.grdDeliveries_Carrier,defaultValue:"",sortable:true,editable:false},{width:10,field:"carrierReference",name:this.grdDeliveries_CarrierReference,defaultValue:"",sortable:true,editable:false},{width:10,field:"dateExceptionReason",type:_1bcc,formatType:"date",name:this.grdDeliveries_ExceptionReason,defaultValue:"",sortable:true,editable:false}],rowsPerPage:200,query:{}});dojo.place(_1bde.domNode,this.sdgrdSODeliveries_Grid,"single");_1bde.startup();},loadDetailsView:function(){dojo.removeClass(this.loadingContainer,"display-none");dojo.addClass(this.salesQuoteDetails,"display-none");dojo.addClass(this.tabContentDetails,"display-none");this._dialog.show();var self=this;var row=this.grid._grid.selection.getSelected()[0];if(row){var _1bdf=row["$key"];this.dataStore=new _1bca({service:Sage.Data.SDataServiceRegistry.getSDataService("proxy",true,false),resourceKind:"salesQuotations",getResourcePredicate:function(){return dojo.string.substitute("'${0}'",[_1bdf]);},getAppId:function(){return self.operatingCompanyId;},include:[],select:["*,salesQuotationLines/*,postalAddresses/*,buyerContact/fullName,pricelist/name,quotation/reference,salesQuotationLines/commodity/name,salesQuotationLines/unitOfMeasure/name,salesQuotationLines/fulfillmentLocation/name,salesQuotationLines/pricelist/name,salesQuotationLines/commodityVariant/reference,salesQuotationLines/commodityDimension/reference,salesQuotationDeliveries/carrierTradingAccount/name"]});dojo.connect(this.dataStore,"onGetSingleResource",this,"buildGrids");this.dataStore.getSingleResource();}},callX3DetailsView:function(){var row=this.grid._grid.selection.getSelected()[0];if(row){var _1be0=row["$key"];dojo.xhrGet({url:dojo.string.substitute("slxdata.ashx/slx/crm/-/X3SalesQuote/getediterpsalesquoteurl?salesQuoteKey=${0}&operatingCompany=${1}&_dc=${2}",[_1be0,this.operatingCompanyId,new Date().getTime()]),cache:false,preventCache:true,handleAs:"json",load:lang.hitch(this,function(data,xhr){this.launchAccountingSystemView(data);}),error:function(_1be1,_1be2,error){dojo.byId([self.id,"-Loading-container"].join("")).innerHTML=_1bc6.Error_InvalidEndpoint;}});}},loadSalesQuoteDetails:function(data){if(data&&typeof data!=="undefined"){this._dialog.set("value",data);}},buildGrids:function(data){this.loadSalesQuoteDetails(data);this.loadAddresses(data);this.loadLineItems(data);if(this.salesQuoteContainer!=null){this.salesQuoteContainer.selectChild(this.salesQuoteContent);}dojo.addClass(this.loadingContainer,"display-none");dojo.removeClass(this.salesQuoteDetails,"display-none");dojo.removeClass(this.tabContentDetails,"display-none");this._dialog.resize();},hideDetailsDialog:function(){this.destroyFirst("sdgrdSalesPersons");this.salesPersonsDataStore=null;this.destroyFirst("sdgrdSODeliveries");this.deliveriesDataStore=null;this.destroyFirst("sdgrdSOPayments");this.paymentsDataStore=null;this._dialog.hide();},destroy:function(_1be3,args){},launchAccountingSystemView:function(data){if(data.error!=null){_1bcb.showError(data.error);}else{try{window.open(data.url);}catch(err){_1bcb.showError(this.errorERPRequest);console.error(dojo.string.substitute(this.errorERPRequestDetails,[this.errorERPRequest,err,url]));}}},executeErpInsertView:function(){dojo.xhrGet({url:dojo.string.substitute("slxdata.ashx/slx/crm/-/X3SalesQuote/getinserterpsalesquoteurl?accountId=${0}&operatingCompany=${1}&_dc=${2}",[Sage.Utility.getCurrentEntityId(),this.operatingCompanyId,new Date().getTime()]),cache:false,preventCache:true,handleAs:"json",load:lang.hitch(this,function(data,xhr){this.launchAccountingSystemView(data);}),error:function(_1be4,_1be5,error){dojo.byId([self.id,"-Loading-container"].join("")).innerHTML=_1bc6.errorERPRequest;}});}});return _1bd2;});},"Sage/MainView/IntegrationContract/CustomerPaymentsRTDV":function(){define(["dojo/_base/declare","dojo/i18n!./nls/CustomerPaymentsRTDV","dijit/_Widget","Sage/_Templated","Sage/UI/SLXPreviewGrid","Sage/Data/ProxySDataStore","Sage/UI/Dialogs","Sage/UI/Columns/DateTime","dojo/text!./templates/CustomerPaymentsRTDV.html","Sage/UI/DateTextBox","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dijit/Dialog","Sage/Utility/Workspace"],function(_1be6,_1be7,_1be8,_1be9,_1bea,_1beb,_1bec,_1bed,_1bee,_1bef,_1bf0,lang,_1bf1,_1bf2){var _1bf3=_1be6("Sage.MainView.IntegrationContract.CustomerPaymentsRTDV",[_1be8,_1be9],{workspace:"",tabId:"",grid:"",globalSyncId:"",operatingCompanyId:"",widgetsInTemplate:true,widgetTemplate:new Simplate(eval(_1bee)),constructor:function(){dojo.mixin(this,_1be7);},loadCustomerPayments:function(){var self=this;var _1bf4={readOnly:true,rowsPerPage:20,slxContext:{workspace:this.workspace,tabId:this.tabId},columns:[{width:10,field:"reference",name:this.grdPayments_Reference,sortable:true,formatter:this.customerPaymentsDetailsViewRenderer,style:"text-align:left;width:auto;",editable:false},{width:10,field:"date",type:_1bed,formatType:"date",dateOnly:true,utc:false,name:this.grdPayments_Date,sortable:true,style:"text-align:left;width:auto;",editable:false},{width:10,field:"type",name:this.grdPayments_Type,sortable:true,style:"text-align:left;width:auto;",editable:false},{width:10,field:"status",name:this.grdPayments_Status,sortable:true,style:"text-align:left;width:auto;",editable:false},{width:10,field:"grossTotal",name:this.grdPayments_GrossTotal,sortable:true,style:"text-align:left;width:auto;",editable:false},{width:10,field:"currency",name:this.grdPayments_Currency,sortable:true,style:"text-align:left;width:auto;",editable:false},{width:10,field:"processDate",type:_1bed,formatType:"date",dateOnly:true,utc:false,editable:false,hidden:function(){return true;}},{width:10,field:"discountTotal",editable:false,hidden:function(){return true;}},{width:10,field:"chargesTotal",editable:false,hidden:function(){return true;}},{width:10,field:"source",editable:false,hidden:function(){return true;}},{width:10,field:"taxTotal",editable:false,hidden:function(){return true;}},{width:10,field:"name",editable:false,hidden:function(){return true;}},{width:10,field:"tenderType",editable:false,hidden:function(){return true;}},{width:10,field:"tenderReference",editable:false,hidden:function(){return true;}},{width:10,field:"netTotal",editable:false,hidden:function(){return true;}},{width:10,field:"grossTotal",editable:false,hidden:function(){return true;}},{width:10,field:"taxCode",editable:false,hidden:function(){return true;}}],storeOptions:new _1beb({service:Sage.Data.SDataServiceRegistry.getSDataService("proxy",true,false),resourceKind:"tradingAccounts",getResourcePredicate:function(){return dojo.string.substitute("$uuid eq '${0}'",[self.globalSyncId]);},getAppId:function(){return self.operatingCompanyId;},include:[],select:[],pathSegments:[{"text":"receipts"}]}),tools:[]};var _1bf5=new _1bea.Grid(_1bf4,this.placeHolder);_1bf5.startup();var _1bf6=_1bf2.getDetailTabWorkspaceContainer();_1bf6.resize();_1bf6.resize();this.grid=_1bf5;},customerPaymentsDetailsViewRenderer:function(value){return dojo.string.substitute("<a href=\"javascript:customerPaymentsRTDV.loadDetailsView();\">${0}</a>",[value]);},loadDetailsView:function(){var row=this.grid._grid.selection.getSelected()[0];if(row){this._dialog.set("value",row);this._dialog.show();}},hideDetailsDialog:function(){this._dialog.hide();}});return _1bf3;});},"Sage/MainView/JobManager":function(){define(["Sage/UI/SDataMainViewConfigurationProvider","Sage/UI/ListPanel","Sage/Utility","Sage/MainView/JobMgr/JobManagerGroupContextService","Sage/MainView/JobMgr/FilterConfigurationProvider","dojo/_base/declare","Sage/MainView/JobMgr/JobManagerActions"],function(_1bf7,_1bf8,_1bf9,_1bfa,_1bfb,_1bfc){var _1bfd=_1bfc("Sage.MainView.JobManager",_1bf7,{_currentTabId:false,_currentTabDescription:false,_currentKeyField:"$key",_groupContextService:false,_tabNameCache:{},_mainViewName:"JobManager",store:false,constructor:function(_1bfe){var _1bff=Sage.Services.getService("ClientGroupContext");if(!_1bff||_1bff.declaredClass!=="Sage.MainView.JobMgr.JobManagerGroupContextService"){Sage.Services.removeService("ClientGroupContext");_1bff=new JobManagerGroupContextService();Sage.Services.addService("ClientGroupContext",_1bff);}var ctx=_1bff.getContext();this._currentTabId=ctx.CurrentGroupID;this._currentTabDescription=ctx.CurrentName;this.titlePaneConfiguration={tabs:this._getTabsConfig(),menu:this._getMenuConfig(),titleFmtString:"${0}"};dojo.subscribe("/group/context/changed",this,"_onCurrentGroupChanged");},_setListPanelConfig:function(){var _1c00=Sage.Services.getService("ClientGroupContext");if(_1c00){this.listPanelConfiguration=_1c00.getCurrentListConfig();this.store=this.listPanelConfiguration.list.store;this.service=this.listPanelConfiguration.list.store.service;}},_getListPanelConfig:function(){this._setListPanelConfig();return this.listPanelConfiguration;},requestConfiguration:function(_1c01){if(_1c01.success){_1c01.success.call(_1c01.scope||this,this._getListPanelConfig(),this);}},requestTitlePaneConfiguration:function(_1c02){if(_1c02.success){_1c02.success.call(_1c02.scope||this,this.titlePaneConfiguration,this);}},_setUIForNewTab:function(tabId,_1c03){this._currentTabId=tabId;this._currentTabDescription=_1c03;},_onCurrentGroupChanged:function(args){var _1c04=args["current"];if(!_1c04){var _1c05=Sage.Services.getService("ClientGroupContext");_1c04=_1c05.getContext();}if(dijit.byId("GroupTabs").selectedChildWidget.id!==_1c04.CurrentGroupID){dijit.byId("GroupTabs").selectChild(_1c04.CurrentGroupID);}},_onTabSelected:function(tab){var _1c06=Sage.Services.getService("ClientGroupContext");var id=tab.id||tab;var _1c07=_1c06.getKeyField(id);if(_1c06){var ctx=_1c06.getContext();if(ctx.CurrentGroupID===id){return;}this._setUIForNewTab(id,tab.title);_1c06.setCurrentGroup(id,tab.title,_1c07);}},_getTabsConfig:function(){var _1c08={store:false,selectedTabId:this._currentTabId,tabKeyProperty:"key",tabNameProperty:"descriptor",fetchParams:{},staticTabs:this._getStaticTabs(),onTabSelect:dojo.hitch(this,"_onTabSelected"),onTabClose:false,showTabContextMenus:false};return _1c08;},_getStaticTabs:function(){var _1c09=Sage.Services.getService("ClientGroupContext");var _1c0a=_1c09.getStaticTabs();return _1c0a;},_getMenuConfig:function(){return false;}});return _1bfd;});},"Sage/MainView/JobMgr/JobManagerGroupContextService":function(){define(["Sage/Groups/BaseGroupContextService","dojo/string","Sage/Data/SDataServiceRegistry","dojo/_base/lang","Sage/MainView/JobMgr/ExecutionsListPanelConfig","Sage/MainView/JobMgr/JobDefinitionsListPanelConfig","Sage/MainView/JobMgr/SchedulesListPanelConfig","dojox/storage/LocalStorageProvider","dojo/_base/declare","dojo/i18n!./nls/JobManagerGroupContextService"],function(_1c0b,_1c0c,_1c0d,lang,_1c0e,_1c0f,_1c10,_1c11,_1c12,_1c13){var _1c14=_1c12("Sage.MainView.JobMgr.JobManagerGroupContextService",_1c0b,{_currentContext:null,_currentTabId:false,_currentTabDescription:false,_currentUserId:false,_currentKeyField:"$key",_currentListConfiguration:false,groupConfigTypes:[{key:"executions",descriptor:_1c13.executionsTabDisplayName,keyField:"$key",configProviderType:_1c0e},{key:"jobDefinitions",descriptor:_1c13.jobDefinitionsTabDisplayName,keyField:"$key",configProviderType:_1c0f},{key:"schedules",descriptor:_1c13.schedulesTabDisplayName,keyField:"$key",configProviderType:_1c10}],_configsHash:false,_LOCALSTORE_NAMESPACE:"JobManagerView",_STORE_KEY_LASTAB:"_LASTTAB",_tabNameCache:{},constructor:function(){this.inherited(arguments);this._currentContext={};dojo.mixin(this._currentContext,this._emptyContext);this._currentContext.CurrentTableKeyField="$key";this._currentContext.AppliedFilterInfo={};this._currentContext.CurrentFamily=null;this._currentContext.notGroupBased=true;var _1c15=this._getDefaultTabId();this.setContext(_1c15,"default");this.unsubscribeConnects();this._subscribes=[];this._subscribes.push(dojo.subscribe(_1c0c.substitute("/ui/filters/default/refresh"),this,this._onDefaultFilterRefresh));this._onDefaultFilterLoad();},buildCurrentEntityContext:function(){var _1c16=this._currentContext.CurrentGroupID;if(!_1c16){return;}if(this._currentListConfiguration){this._currentContext.CurrentEntity=this._currentListConfiguration.entityName;this._currentContext.CurrentTableKeyField=this.getKeyField(_1c16);if(!this._currentContext.CurrentName){this._currentContext.CurrentName=this.getGroupName(_1c16);}}},_ensureConfigsHash:function(){if(!this._configsHash){var hash={};for(var i=0;i<this.groupConfigTypes.length;i++){var cfg=this.groupConfigTypes[i];hash[cfg.key]=lang.mixin(cfg,{instance:false});}this.configsHash=hash;}},_setListConfig:function(){this._ensureConfigsHash();var tabId=this._currentContext.CurrentGroupID;var _1c17=(this.configsHash.hasOwnProperty(tabId))?this.configsHash[tabId]:this.configsHash["groups"];if(!_1c17.instance){_1c17.instance=new _1c17.configProviderType();this.onTabConfigCreated(_1c17.instance);}else{_1c17.instance.rebuild();}this._currentListConfiguration=_1c17.instance;var _1c18=Sage.Services.getService("JobService");var _1c19=_1c18.getSchedulingSDataService();this._currentListConfiguration.list.service=_1c19;return;},getCurrentListConfig:function(){this._setListConfig();return this._currentListConfiguration;},getKeyField:function(tabid){this._ensureConfigsHash();var _1c1a="$key";if(this.configsHash[tabid]){_1c1a=this.configsHash[tabid]["keyField"]||"$key";}return _1c1a;},getGroupName:function(tabid){this._ensureConfigsHash();var name="default";if(this.configsHash[tabid]){name=this.configsHash[tabid]["descriptor"]||"default";}return name;},onCurrentGroupChanged:function(_1c1b){var self=this;dojo.publish("/group/context/changed",[_1c1b,this]);this._clearFilterManager();this._onDefaultFilterLoad(function(){var _1c1c=self.getContext();self._saveToLocalStorage(self._STORE_KEY_LASTAB,_1c1c.CurrentGroupID);});},_clearFilterManager:function(){var _1c1d={};var _1c1e={};dojo.publish("/ui/filters/default/apply",[_1c1d,_1c1e,this]);},getContext:function(){if(this._currentContext.CurrentGroupID===null){this.requestContext();}this.buildCurrentEntityContext();return this._currentContext;},requestContext:function(){if(this._isRetrievingContext===true){return;}},setContext:function(id,name){this._currentContext.CurrentGroupID=id;this._currentContext.CurrentName=name;this._setListConfig();this.buildCurrentEntityContext();this._isRetrievingContext=false;this.onContextSet(this._currentContext);},isContextRequired:function(){return !(Sage&&Sage.Groups&&Sage.Groups._groupContext);},setCurrentGroup:function(id,name,_1c1f){if(this._currentContext.CurrentGroupID===id){return;}if(!name||!_1c1f){this._currentContext.CurrentGroupID=id;this._currentContext.CurrentName=false;this.buildCurrentEntityContext();name=this._currentContext.CurrentName;}else{this._currentContext.CurrentTableKeyField=_1c1f;}this.setContext(id,name);this.onCurrentGroupChanged({current:this._currentContext});},_onDefaultFilterLoad:function(_1c20){},_onDefaultFilterRefresh:function(_1c21,_1c22,_1c23){var _1c24=this.getContext(),_1c25=_1c0d.getSDataService("system"),entry={"$name":"applyFilterToEntity","request":{"entityName":_1c24.CurrentEntity,"filter":dojo.toJson(_1c23.createValueSet()),"key":_1c24.CurrentGroupID}},_1c26=new Sage.SData.Client.SDataServiceOperationRequest(_1c25).setOperationName("applyFilterToEntity");_1c26.execute(entry,{});},getStaticTabs:function(){return this.groupConfigTypes;},_saveToLocalStorage:function(key,value,_1c27){this._saveToSessionStorage(key,value,_1c27);return;},_getFromLocalStorage:function(key,_1c28){return this._getFromSessionStorage(key,_1c28);},_getFromSessionStorage:function(key,_1c29){if(!_1c29){_1c29=this._LOCALSTORE_NAMESPACE;}var _1c2a=_1c29+"_"+key;return sessionStorage.getItem(_1c2a);},_saveToSessionStorage:function(key,value,_1c2b){if(!_1c2b){_1c2b=this._LOCALSTORE_NAMESPACE;}var _1c2c=_1c2b+"_"+key;sessionStorage.setItem(_1c2c,value);},_getDefaultTabId:function(){var _1c2d="executions";var _1c2e=this._getUrlTabId();if(_1c2e){_1c2e=this._validateTabId(_1c2e);if(_1c2e){return _1c2e;}}var _1c2f=this._getFromLocalStorage(this._STORE_KEY_LASTAB);if(_1c2f){_1c2d=_1c2f;}if(!this._configsHash){for(var i=0;i<this.groupConfigTypes;i++){if(_1c2d===this.groupConfigTypes[i]["key"]){return _1c2d;}}}return _1c2d;},_getUrlTabId:function(){var tabId=false,_1c30="[\\?&]tabId=([^%#]*)",regex=new RegExp(_1c30),_1c31=regex.exec(window.location.href);if(_1c31!==null){tabId=_1c31[1];}return tabId;},_validateTabId:function(tabId){if(tabId){for(var i=0;i<this.groupConfigTypes.length;i++){var cfg=this.groupConfigTypes[i];if(cfg.key.toUpperCase()===tabId.toUpperCase()){return cfg.key;}}}return null;},onTabConfigCreated:function(_1c32){}});if(!Sage.Services.hasService("ClientGroupContext")){Sage.Services.addService("ClientGroupContext",new _1c14());}else{var _1c33=Sage.Services.getService("ClientGroupContext");if(_1c33.declaredClass!=="Sage.MainView.JobMgr.JobManagerGroupContextService"){_1c33.unsubscribeConnects();Sage.Services.removeService("ClientGroupContext");Sage.Services.addService("ClientGroupContext",new _1c14());}}return _1c14;});},"Sage/MainView/JobMgr/ExecutionsListPanelConfig":function(){define(["Sage/MainView/JobMgr/BaseListPanelConfig","Sage/MainView/JobMgr/SDataSummaryFormatterScope","dojo/_base/declare","dojo/i18n!./nls/ExecutionsListPanelConfig","dojo/_base/lang","Sage/Utility/Jobs","dijit/ProgressBar","dojo/i18n!./templates/nls/ExecutionsListSummary","dojo/i18n!./templates/nls/ExecutionDetailSummary"],function(_1c34,_1c35,_1c36,_1c37,_1c38,_1c39){var _1c3a=_1c36("Sage.MainView.JobMgr.ExecutionsListPanelConfig",[_1c34],{constructor:function(){_1c38.mixin(this,_1c37);this._listId="Executions";this._resourceKind="executions";this.entityName="Execution";this._contextMenu="JobManagerListContextMenu";this._currentListContextSubMenu="ExecutionsListContextMenu";this._structure=this._getStructure();this._select=this._getSelect();this._sort=this._getSort();this._where=this._getWhere();this._include=this._getInclude();this._store=this._getStore();this.list=this._getListConfig();this.detail=this._getDetailConfig();this.toolBar=this._getToolBars();this.keyField="$key";},_getStructure:function(){var _1c3b=[{field:"job",name:this.colNameJobName,width:"75px",formatter:_1c39.formatJobDescription},{field:"user",name:this.colNameUser,width:"50px",formatter:_1c39.formatUser},{field:"phase",name:this.colNamePhase,width:"50px"},{field:"phaseDetail",name:this.colNamePhaseDetail,width:"50px"},{field:"progress",name:this.colNameProgress,width:"50px",formatter:_1c39.formatProgress},{field:"elapsed",name:this.colNameElapsed,width:"50px",formatter:_1c39.formatElapsedTime},{field:"status",name:this.colNameStatus,width:"50px"},{field:"_item",name:this.colNameResult,width:"50px",formatter:_1c39.formatJobResult,sortable:false}];return _1c3b;},_getSelect:function(){var _1c3c=["$key","job","trigger","user","phase","phaseDetail","progress","elapsed","status","result"];return _1c3c;},_getWhere:function(){return "";},_getSort:function(){var sort=[{attribute:"job"}];return sort;},_getInclude:function(){var _1c3d=["$descriptors"];return _1c3d;},_getSummaryListRequestConfig:function(){var _1c3e={resourceKind:this._resourceKind,serviceName:"scheduling",keyField:"$key",select:this._getSelect(),include:this._getInclude(),useBatchRequest:false};return _1c3e;},_getFormatterScope:function(){var _1c3f=this._getSummaryListRequestConfig();var _1c40=new _1c35({templateLocation:"MainView/JobMgr/templates/ExecutionsListSummary.html",resetDataManager:true,requestConfiguration:_1c3f});return _1c40;},_getSummaryDetailRequestConfig:function(){var _1c41={resourceKind:this._resourceKind,serviceName:"scheduling",keyField:"$key",select:["$key","phase","phaseDetail","progress","elapsed","status","result"],include:["$descriptors"],useBatchRequest:false};return _1c41;},_getDetailConfig:function(){var _1c42=this._getFormatterScope();var _1c43=this._getSummaryDetailRequestConfig();var _1c44={resourceKind:this._resourceKind,requestConfiguration:_1c43,templateLocation:"MainView/JobMgr/templates/ExecutionDetailSummary.html"};return _1c44;},_getToolBars:function(){var _1c45={items:[]};return _1c45;},_getResult:function(){return this._nlsResources.loadingText;}});return _1c3a;});},"Sage/MainView/JobMgr/BaseListPanelConfig":function(){define(["Sage/_ConfigurationProvider","Sage/Services/JobService","Sage/Data/SDataServiceRegistry","Sage/Data/SDataStore","dijit/Menu","dijit/PopupMenuItem","dijit/MenuSeparator","Sage/UI/MenuItem","dojo/i18n!./nls/BaseListPanelConfig","dijit/registry","dojo/_base/declare"],function(_1c46,_1c47,_1c48,_1c49,Menu,_1c4a,_1c4b,_1c4c,_1c4d,_1c4e,_1c4f){var _1c50=_1c4f("Sage.MainView.JobMgr.BaseListPanelConfig",[_1c46],{list:false,detail:false,summary:false,toolBar:false,_listId:false,_store:false,_sDataService:false,_where:false,_sort:false,_select:false,_include:false,_structure:false,_currentUserId:false,_resourceKind:false,_nlsResources:false,_securedAction:"",keyField:"$key",hasCompositeKey:false,_menuItems:null,_contextMenu:false,_summaryformaterScope:false,entityName:false,rebuildMenus:true,rebuildOnRefresh:false,constructor:function(){var _1c51=Sage.Services.getService("JobService");this._sDataService=_1c51.getSchedulingSDataService();this._nlsResources=_1c4d;var _1c52=Sage.Services.getService("ClientContextService");if(_1c52){if(_1c52.containsKey("userID")){this._currentUserId=_1c52.getValue("userID");}}this._include=this._getInclude();this._menuItems=[];},rebuild:function(){this._where=this._getWhere();this._structure=this._getStructure();this.list=this._getListConfig();this.summary=this._getSummaryConfig();this.detail=this._getDetailConfig();this.toolBar=this._getToolBars();},_getListConfig:function(){if(!this._store){this._store=this._getStore();}else{this._store.where=this._where;}var _1c53={id:this._listId,structure:this._structure,store:this._store,selectedRegionContextMenuItems:this._getListContextMenuItems(),onSelectedRegionContextMenu:this._onListContext,selectionMode:"single"};return _1c53;},_getStore:function(){var store=new _1c49({id:this._listId,service:this._sDataService,resourceKind:this._resourceKind,include:this._include,select:this._select,sort:this._sort,where:this._where});return store;},_getSelect:function(){var _1c54=[];return _1c54;},_getInclude:function(){var _1c55=[];return _1c55;},_getSort:function(){var sort=[];return sort;},_getWhere:function(){var where="";return where;},_getStructure:function(){var _1c56=[];return _1c56;},_getSummaryConfig:function(){var store=new _1c49({id:this._listId,service:this._sDataService,resourceKind:this._resourceKind,include:[],select:["$key"],where:this._where});var _1c57=[{field:"$key",formatter:"formatSummary",width:"100%",name:"Summary View"}];var _1c58=this._getFormatterScope();var _1c59={structure:_1c57,layout:"layout",store:store,rowHeight:170,rowsPerPage:10,formatterScope:_1c58};return _1c59;},_getFormatterScope:function(){return false;},_getDetailConfig:function(){return false;},_getToolBars:function(){var _1c5a={items:[]};return _1c5a;},_getListContextMenuItems:function(){if(!this._contextMenu){return;}if(this._menuItems.length>0){return this._menuItems;}if(!Sage.UI.DataStore.ContextMenus){return [];}if(!Sage.UI.DataStore.ContextMenus.listContextMenu){return [];}if(this._menuItems.length>0){this._menuItems[0].destroyDescendants();}this._menuItems=[];var _1c5b=Sage.UI.DataStore.ContextMenus.listContextMenu.items;var len=_1c5b.length;for(var i=0;i<len;i++){var mDef=_1c5b[i];if(mDef.id===this._currentListContextSubMenu){this._buildChildMenu(mDef.submenu,null);}}return this._menuItems;},_getGridMenu:function(){var _1c5c=dijit.byId("_listContextmenu");return _1c5c;},_buildChildMenu:function(_1c5d,_1c5e){var len=_1c5d.length;for(var i=0;i<len;i++){var mDef=_1c5d[i];if(mDef.submenu.length>0){var _1c5f=new Menu();this._buildChildMenu(mDef.submenu,_1c5f);var _1c60=new _1c4a({label:mDef.text,popup:_1c5f});if(_1c5e){_1c5e.addChild(_1c60);}else{this._menuItems.push(_1c60);}}else{var _1c61=null;if((mDef.text==="-")||(mDef.text===" ")||(mDef.isspacer)){_1c61=new _1c4b();}else{var href=mDef.href;if(href.indexOf("javascript:")<0){href=dojo.string.substitute("javascript:${0}()",[href]);}_1c61=new _1c4c({label:mDef.text||"...",icon:mDef.img,title:mDef.tooltip||"",ref:href,onClick:function(){if(this.ref!==""){try{window.location.href=this.ref;}catch(e){}}}});}if(_1c5e){_1c5e.addChild(_1c61);}else{this._menuItems.push(_1c61);}}}},_onListContext:function(){},getFilterConfig:function(_1c62,entry,_1c63){var _1c64=this._sDataService;var _1c65=_1c62;var _1c66=this.entityName;var _1c67=this._resourceKind;var where=this._where;var _1c68={};var _1c69=new Sage.SData.Client.SDataResourcePropertyRequest(_1c65);_1c69.setResourceKind("executions");_1c69.setResourceSelector("\""+_1c66+"\"");_1c69.setResourceProperty("filters");_1c69.setQueryArg("where","filterType ne \"analyticsMetric\"");_1c69.setQueryArg("count",20);_1c68["groupId"]=this._listId;_1c68["store"]=new _1c49({executeReadWith:"readFeed",request:_1c69});var _1c6a=new Sage.SData.Client.SDataResourcePropertyRequest(_1c64);_1c6a.setResourceKind(_1c67);_1c6a.setResourceProperty("$queries/executeMetric");_1c6a.setQueryArg("_filterName",filter["filterName"]);_1c6a.setQueryArg("orderby","displayName");_1c6a.setQueryArg("_activeFilter",where);_1c68["createStoreForFilter"]=function(_1c6b){return _1c6b&&_1c6b["filterName"]?new _1c49({executeReadWith:"readFeed",request:_1c6a}):null;};_1c68["getFilterManager"]=function(){var _1c6c=_1c4e.byId("list");return _1c6c&&_1c6c.get("filterManager");};return _1c68;}});return _1c50;});},"Sage/MainView/JobMgr/SDataSummaryFormatterScope":function(){define(["Sage/UI/SummaryContainer","dojo/i18n","Sage/UI/SummaryFormatterScope","Sage/MainView/JobMgr/SDataDetailViewDataManager","Sage/UI/Controls/SummaryAggregate","dojo/_base/declare"],function(_1c6d,i18n,_1c6e,_1c6f,_1c70,_1c71){var _1c72=_1c71("Sage.MainView.JobMgr.SDataSummaryFormatterScope",[_1c6e],{constructor:function(args){dojo.mixin(this,args);this.widgets=[];this.preFetchResources();this._setupDataManager();},_setupDataManager:function(){this.dataManager=new _1c6f(this.requestConfiguration);if(Sage.Services.hasService("SummaryViewDataManager")){Sage.Services.removeService("SummaryViewDataManager");}Sage.Services.addService("SummaryViewDataManager",this.dataManager);}});return _1c72;});},"Sage/MainView/JobMgr/SDataDetailViewDataManager":function(){define(["Sage/Data/SDataServiceRegistry","Sage/Data/SDataStore","dojo/_base/declare","dojo/_base/lang"],function(_1c73,_1c74,_1c75,lang){var _1c76=_1c75("Sage.MainView.JobMgr.SDataDetailRequestQueue",null,{select:[],resourceKind:"",fetching:false,include:[],service:null,constructor:function(_1c77){lang.mixin(this,_1c77);this.requestHash={};this.fetching=false;var _1c78=Sage.Services.getService("JobService");this.service=_1c78.getSchedulingSDataService();},add:function(_1c79,_1c7a){var _1c7b=this.requestHash[_1c79];if((_1c7b)&&(_1c7b.id!==_1c7a.id)){if(!_1c7b.duplicates){_1c7b.duplicates=[];}var found=false;for(var i=0;i<_1c7b.duplicates.length;i++){if(_1c7b.duplicates[i].context.id===_1c7a.id){found=true;}}if(!found){_1c7b.duplicates.push({id:_1c7a.id,context:_1c7a});}}else{this.requestHash[_1c79]=_1c7a;}},send:function(_1c7c,_1c7d){this.fetching=true;var _1c7e=this;var _1c7f=new Sage.SData.Client.SDataSingleResourceRequest(this.service);_1c7f.setResourceKind(this.resourceKind);for(var id in this.requestHash){_1c7f.setResourceSelector("'"+id+"'");}_1c7f.setQueryArg("include",this.include.join(","));_1c7f.read({success:lang.hitch(_1c7d,_1c7c,_1c7e),failure:lang.hitch(this,this.requestFailed,_1c7e)});},requestFailed:function(a,b,c){}});var _1c80=_1c75("Sage.MainView.JobMgr.SDataDetailViewDataManager",null,{keyField:"$key",constructor:function(){this.queue=new _1c76();this.requestTimeout=false;},requestDataNoWait:function(_1c81,_1c82,_1c83){var _1c84=new _1c76();if(_1c83.keyField){this.keyField=_1c83.keyField;}_1c84.select=_1c83.select;_1c84.resourceKind=_1c83.resourceKind;_1c84.serviceName=_1c83.serviceName;_1c84.include=_1c83.include;_1c84.useBatchRequest=_1c83.useBatchRequest;if(_1c83.expandRecurrences!==null){_1c84.expandRecurrences=_1c83.expandRecurrences;}_1c84.add(_1c81,_1c82);_1c84.send(this.receiveData,this);},receiveData:function(_1c85,data){var _1c86=data;var id=_1c86.id;if(!id){id=_1c86[this.keyField];_1c86.id=id;}var _1c87=_1c85.requestHash[_1c86.id];if(_1c87){try{if(!_1c87.applied){_1c87.applied=true;_1c87.set("entity",_1c86);}}catch(err){console.error(err);}}}});return _1c80;});},"Sage/MainView/JobMgr/JobDefinitionsListPanelConfig":function(){define(["Sage/MainView/JobMgr/BaseListPanelConfig","Sage/MainView/JobMgr/SDataSummaryFormatterScope","dojo/_base/declare","dojo/i18n!./nls/JobDefinitionsListPanelConfig","dojo/i18n!./templates/nls/JobDefinitionsListSummary","dojo/i18n!./templates/nls/JobDefinitionDetailSummary"],function(_1c88,_1c89,_1c8a,_1c8b){var _1c8c=_1c8a("Sage.MainView.JobMgr.JobDefinitionsListPanelConfig",[_1c88],{constructor:function(){this._nlsResources=_1c8b;this._listId="JobDefinitions";this._resourceKind="jobs";this.entityName="Job";this._contextMenu="JobManagerListContextMenu";this._currentListContextSubMenu="JobDefinitionsListContextMenu";this._structure=this._getStructure();this._select=this._getSelect();this._sort=this._getSort();this._where=this._getWhere();this._include=this._getInclude();this._store=this._getStore();this.list=this._getListConfig();this.detail=this._getDetailConfig();this.toolBar=this._getToolBars();this.keyField="$key";},_getStructure:function(){var _1c8d=this._nlsResources.colNameJobName||"Job Name";var _1c8e=this._nlsResources.colNameDescription||"Description";var _1c8f=this._nlsResources.colNameType||"Type";var _1c90=[{field:"$descriptor",name:_1c8d,width:"100px"},{field:"description",name:_1c8e,width:"100px"},{field:"type",name:_1c8f,width:"50px"}];return _1c90;},_getSelect:function(){var _1c91=["$key","description","type"];return _1c91;},_getWhere:function(){return "";},_getSort:function(){var sort=[{attribute:"description"}];return sort;},_getInclude:function(){var _1c92=[];return _1c92;},_getSummaryListRequestConfig:function(){var _1c93={resourceKind:this._resourceKind,serviceName:"scheduling",keyField:"$key",select:["$key","description"],include:[],useBatchRequest:false};return _1c93;},_getFormatterScope:function(){var _1c94=this._getSummaryListRequestConfig();var _1c95=new _1c89({templateLocation:"MainView/JobMgr/templates/JobDefinitionsListSummary.html",resetDataManager:true,requestConfiguration:_1c94});return _1c95;},_getSummaryDetailRequestConfig:function(){var _1c96={resourceKind:this._resourceKind,serviceName:"scheduling",keyField:"$key",select:["$key","description"],include:["$descriptors"],useBatchRequest:false};return _1c96;},_getDetailConfig:function(){var _1c97=this._getFormatterScope();var _1c98=this._getSummaryDetailRequestConfig();var _1c99={resourceKind:this._resourceKind,requestConfiguration:_1c98,templateLocation:"MainView/JobMgr/templates/JobDefinitionDetailSummary.html"};return _1c99;},_getToolBars:function(){var _1c9a={items:[]};return _1c9a;}});return _1c8c;});},"Sage/MainView/JobMgr/SchedulesListPanelConfig":function(){define(["Sage/MainView/JobMgr/BaseListPanelConfig","Sage/MainView/JobMgr/SDataSummaryFormatterScope","dojo/_base/declare","dojo/i18n!./nls/SchedulesListPanelConfig","dojo/_base/lang","Sage/Utility/Jobs","dojo/i18n!./templates/nls/SchedulesListSummary","dojo/i18n!./templates/nls/ScheduleDetailSummary"],function(_1c9b,_1c9c,_1c9d,_1c9e,_1c9f,_1ca0){var _1ca1=_1c9d("Sage.MainView.JobMgr.SchedulesListPanelConfig",[_1c9b],{constructor:function(){_1c9f.mixin(this,_1c9e);this._listId="Schedules";this._resourceKind="triggers";this._contextMenu="JobManagerListContextMenu";this._currentListContextSubMenu="SchedulesListContextMenu";this._structure=this._getStructure();this._select=this._getSelect();this._sort=this._getSort();this._where=this._getWhere();this._include=this._getInclude();this._store=this._getStore();this.list=this._getListConfig();this.detail=this._getDetailConfig();this.toolBar=this._getToolBars();this.keyField="$key";},_getStructure:function(){return [{field:"$descriptor",name:this.colNameTriggerName,width:"100px"},{field:"job",name:this.colNameJobName,width:"100px",formatter:_1ca0.formatJobDescription},{field:"user",name:this.colNameUser,width:"100px",formatter:_1ca0.formatUser},{field:"startTimeUtc",name:this.colNameStartTimeUtc,width:"100px",formatter:_1ca0.formatDate},{field:"endTimeUtc",name:this.colNameEndTimeUtc,width:"100px",formatter:_1ca0.formatDate},{field:"priority",name:this.colNamePriority,width:"100px"},{field:"status",name:this.colNameStatus,width:"100px"},{field:"timesTriggered",name:this.colNameTimesTriggered,width:"100px"}];},_getSelect:function(){var _1ca2=["$key","job","user","startTimeUtc","endTimeUtc","repeatCount","repeatInterval","priority","status","timesTriggered"];return _1ca2;},_getWhere:function(){return "";},_getSort:function(){var sort=[{attribute:"job"}];return sort;},_getInclude:function(){var _1ca3=["$descriptors,$key"];return _1ca3;},_getSummaryListRequestConfig:function(){var _1ca4={resourceKind:this._resourceKind,serviceName:"scheduling",keyField:"$key",select:this._getSelect(),include:this._getInclude(),useBatchRequest:false,sort:this._getSort()};return _1ca4;},_getFormatterScope:function(){var _1ca5=this._getSummaryListRequestConfig();var _1ca6=new _1c9c({templateLocation:"MainView/JobMgr/templates/SchedulesListSummary.html",resetDataManager:true,requestConfiguration:_1ca5});return _1ca6;},_getSummaryDetailRequestConfig:function(){var _1ca7={resourceKind:this._resourceKind,serviceName:"scheduling",keyField:"$key",select:["$key","description","job","user"],include:["$descriptors"],useBatchRequest:false};return _1ca7;},_getDetailConfig:function(){var _1ca8=this._getFormatterScope();var _1ca9=this._getSummaryDetailRequestConfig();var _1caa={resourceKind:this._resourceKind,requestConfiguration:_1ca9,templateLocation:"MainView/JobMgr/templates/ScheduleDetailSummary.html"};return _1caa;},_getToolBars:function(){var _1cab={items:[]};return _1cab;}});return _1ca1;});},"Sage/MainView/JobMgr/FilterConfigurationProvider":function(){define(["Sage/Services/_ServiceMixin","Sage/_ConfigurationProvider","Sage/Utility","Sage/Data/SDataStore","Sage/MainView/JobMgr/JobManagerGroupContextService","dijit/registry","dojo/_base/declare","Sage/Utility/Filters","dojo/_base/lang","dojo/json"],function(_1cac,_1cad,_1cae,_1caf,_1cb0,_1cb1,_1cb2,_1cb3,lang,json){var _1cb4=_1cb2("Sage.MainView.JobMgr.FilterConfigurationProvider",[_1cad,_1cac],{_configuration:null,_hasLayoutConfiguration:false,_hasFilterHiddenConfiguration:false,serviceMap:{"groupContextService":"ClientGroupContext","metaDataService":{type:"sdata",name:"metadata"},"systemDataService":{type:"sdata",name:"system"}},constructor:function(_1cb5){this.inherited(arguments);if(this.groupContextService.declaredClass!=="Sage.MainView.JobMgr.JobManagerGroupContextService"){Sage.Services.removeService("ClientGroupContext");this.groupContextService=new GroupManagerGroupContextService();Sage.Services.addService("ClientGroupContext",this.groupContextService);}this._subscribes.push(dojo.subscribe("/group/context/changed",this,this._onGroupContextChanged));},_onGroupContextChanged:function(){this.onConfigurationChange();},onConfigurationChange:function(){},_createConfiguration:function(entry,_1cb6){var _1cb7=this.groupContextService.getCurrentListConfig();this._configuration=_1cb7.getFilterConfig(this.metaDataService,entry,_1cb6);if(!this._configuration){this._configuration={};}this._configuration.getFilterManager=function(){var _1cb8=_1cb1.byId("list");return _1cb8&&_1cb8.get("filterManager");};this._hasLayoutConfiguration=true;},requestConfiguration:function(_1cb9){this._configuration={};this._hasLayoutConfiguration=false;this._hasFilterHiddenConfiguration=false;this._onRequestConfigurationSuccess(_1cb9,null);this._getHiddenFilters(_1cb9);},_onRequestConfigurationSuccess:function(_1cba,entry){this._createConfiguration(entry,_1cba);this._callOptionsSuccess(_1cba);},_onRequestConfigurationFailure:function(_1cbb,_1cbc){if(_1cbb.failure){_1cbb.failure.call(_1cbb.scope||this,_1cbc,_1cbb,this);}},getFilterFormatter:function(_1cbd){if(_1cbd){}return false;},ModifyFilterQuery:function(_1cbe,query){return query;},_getHiddenFilters:function(_1cbf){var key=this._getHiddenFiltersKey();if(key){_1cb3.getHiddenFilters(key,lang.hitch(this,this._onHiddenFiltersFetchComplete,_1cbf||{}),function(err){console.error(err);});}},_getHiddenFiltersKey:function(){var key=_1cb3.getHiddenFiltersKey();return key;},_onHiddenFiltersFetchComplete:function(_1cc0,_1cc1){if(_1cc1&&_1cc1.response&&_1cc1.response.value){this._configuration._hiddenFilters=json.parse(_1cc1.response.value);if(this._configuration._hiddenFilters&&this._configuration._hiddenFilters.constructor===Array){this._configuration._hiddenFilters={};}}this._configuration._hiddenFiltersKey=this._getHiddenFiltersKey();this._hasFilterHiddenConfiguration=true;this._callOptionsSuccess(_1cc0);},_callOptionsSuccess:function(_1cc2){if(!this._hasLayoutConfiguration||!this._hasFilterHiddenConfiguration){return;}if(_1cc2.success){_1cc2.success.call(_1cc2.scope||this,this._configuration,_1cc2,this);this._hasLayoutConfiguration=false;this._hasFilterHiddenConfiguration=false;}}});return _1cb4;});},"Sage/MainView/JobMgr/JobManagerActions":function(){define(["dojo/_base/declare","Sage/MainView/JobMgr/RunJobDialog","Sage/UI/Dialogs","dojo/i18n!./nls/JobManagerActions","dojo/string","Sage/Utility","Sage/Utility/Jobs"],function(_1cc3,_1cc4,_1cc5,_1cc6,_1cc7,_1cc8,_1cc9){Sage.namespace("Sage.MainView.JobMgr.JobManagerActions");dojo.mixin(Sage.MainView.JobMgr.JobManagerActions,{_getSelectedId:function(){var _1cca=_1cc8.getSelectionInfo();if(_1cca){if(_1cca.selectedIds.length===1){return _1cca.selectedIds[0];}}return null;},showRunJobDialog:function(isNew){var key=this._getSelectedId();if(!key){_1cc5.showInfo(_1cc6.error_NoRecordSelected);}else{var _1ccb=_1cc9.getCurrentGroupId();var _1ccc=dijit.byId("dlgRunJob");if(!_1ccc){_1ccc=new _1cc4();}var _1ccd=_1ccb==="schedules"?key:null;var _1cce={key:key,currentGroupId:_1ccb,isNew:isNew,triggerId:_1ccd};_1ccc.show(_1cce);}},deleteScheduledJob:function(){var key=this._getSelectedId();if(!key){_1cc5.showInfo(_1cc6.error_NoRecordSelected);}else{_1cc5.raiseQueryDialog("Infor CRM",_1cc6.confirm_ScheduleDeletion,function(_1ccf){if(_1ccf){var _1cd0=_1cc9.getCurrentGroupId();var _1cd1=Sage.Services.getService("JobService");if(_1cd1.deleteScheduledJob(key)){_1cc9.refreshList(_1cd0);}}},_1cc6.txtYes,_1cc6.txtNo);}},showCancelExecutionDialog:function(){var key=this._getSelectedId();if(!key){_1cc5.showInfo(_1cc6.error_NoRecordSelected);}else{var _1cd2={key:key,executionId:key,success:function(data){if(data&&data.status===_1cc6.jobStatusComplete){_1cc5.showInfo(_1cc6.completedJobMessage);}else{var _1cd3={title:_1cc6.txtInterruptExecutionTitle,query:_1cc7.substitute(_1cc6.txtInterruptExecutionConfirmationMessage,[""]),callbackFn:function(_1cd4){if(_1cd4===true){var _1cd5={key:key,success:function(_1cd6){_1cc5.showInfo(_1cc6.txtInterruptExecutionMessage,_1cc6.txtInterruptExecutionTitle);},failure:function(xhr){}};_1cd7.interruptExecution(_1cd5);}},yesText:_1cc6.txtYes,noText:_1cc6.txtNo,icon:"warningIcon"};_1cc5.raiseQueryDialogExt(_1cd3);}},failure:function(xhr){return true;}};var _1cd7=Sage.Services.getService("JobService");_1cd7.getExecution(_1cd2);}}});return Sage.MainView.JobMgr.JobManagerActions;});},"Sage/MainView/JobMgr/RunJobDialog":function(){define(["dojo/_base/declare","dojo/string","dojo/i18n!./nls/RunJobDialog","dojo/text!./templates/RunJobDialog.html","Sage/UI/JobSchedulingWidget","dijit/_Widget","Sage/_Templated","dojo/_base/lang","Sage/UI/Controls/_DialogHelpIconMixin","dojo/data/ItemFileWriteStore","dojox/grid/DataGrid","Sage/Utility/Jobs","Sage/Utility","Sage/UI/Dialogs"],function(_1cd8,_1cd9,_1cda,_1cdb,_1cdc,_1cdd,_1cde,_1cdf,_1ce0,_1ce1,_1ce2,_1ce3,_1ce4,_1ce5){var _1ce6=_1cd8("Sage.MainView.JobMgr.RunJobDialog",[_1cdd,_1cde],{id:"dlgRunJob",_dialog:false,_configMgr:false,_key:null,_trigger:null,_currentGroupId:null,widgetTemplate:new Simplate(eval(_1cdb)),nlsResources:_1cda,widgetsInTemplate:true,show:function(_1ce7){this._key=_1ce7.key;this._currentGroupId=_1ce7.currentGroupId;if(_1ce7.triggerId){this._getTriggerRequest(_1ce7.triggerId);this.cmbScheduleType.set("value","scheduled");this.cmbScheduleType.set("disabled",true);}this._setVisible(this.jobSchedulingWidget.divJobSchedulingWidget,false);this.jobSchedulingWidget.initialize({trigger:this._trigger});this._dialog.show();if(!this._dialog.helpIcon){_1cdf.mixin(this._dialog,new _1ce0());this._dialog.createHelpIconByTopic("runjob");}},_getTriggerRequest:function(key){var _1ce8=Sage.Services.getService("JobService");var _1ce9=new Sage.SData.Client.SDataSingleResourceRequest(_1ce8.getSchedulingSDataService());_1ce9.setResourceKind(_1cd9.substitute("triggers('${0}')",[key]));var self=this;_1ce9.read({async:false,success:function(_1cea){self._trigger=_1cea;}});},_dialog_OnShow:function(){var self=this;self.txtJobName.set("value",self._key);window.setTimeout(function(){self._getAndDisplayJobDetails();},250);},_triggerJob:function(){var _1ceb=this.jobSchedulingWidget.getJobSchedulingOptions();if(this.cmbScheduleType.value==="scheduled"){if(!this.jobSchedulingWidget.validateSchedule(false,false)){return;}}var _1cec=[];var isNew=(!this._trigger);if(this.grdJobParameters&&this.grdJobParameters.store){dojo.forEach(this.grdJobParameters.store._getItemsArray(),function(item){if(item&&item.name&&item.name.length){var value=!isNew?item.value.length>0?item.value[0]:"":item.defaultValue.length>0?item.defaultValue[0]:"";_1cec.push({name:item.name[0],value:value});}});}var _1ced=null;if(_1ceb.startTime&&(_1ceb.startTime instanceof Date)){_1ced=_1ce4.Convert.toJsonStringFromDate(_1ceb.startTime);}var _1cee=null;if(_1ceb.endTime&&(_1ceb.endTime instanceof Date)){_1cee=_1ce4.Convert.toJsonStringFromDate(_1ceb.endTime);}var _1cef=this._currentGroupId;var _1cf0={closable:true,key:this._key,descriptor:this.txtTriggerDescription.get("value"),frequency:this.cmbScheduleType.value==="scheduled"?_1ceb.frequency:null,startTime:_1ced,endTime:_1cee,user:{$key:this._getCurrentUserId()},parameters:_1cec,infoMessage:"",cronExpression:_1ceb.cronExpression,title:this.txtTriggerDescription.get("value")||this.txtJobName.get("value"),success:function(_1cf1){_1ce3.refreshList(_1cef);},failure:function(_1cf2){}};if(this.cmbScheduleType.value==="scheduled"){if(isNew){this._scheduleJob(_1cf0);}else{this._updateTrigger(_1cf0);}}else{_1ce3.triggerJobAndDisplayProgressDialog(_1cf0);}this._closeDialog();},_getCurrentUserId:function(){var _1cf3=null;var _1cf4=Sage.Services.getService("ClientContextService");if(_1cf4){if(_1cf4.containsKey("userID")){_1cf3=_1cf4.getValue("userID");}}return _1cf3;},_scheduleJob:function(_1cf5){var _1cf6=Sage.Services.getService("JobService");_1cf6.scheduleJob(_1cf5);},_updateTrigger:function(_1cf7){var _1cf8=Sage.Services.getService("JobService");_1cf8.updateTrigger(_1cf7);},_cmbScheduleType_OnChange:function(){if(this.cmbScheduleType){var _1cf9=(this.cmbScheduleType.value==="scheduled");this._setVisible(this.jobSchedulingWidget.divJobSchedulingWidget,_1cf9);}},_setVisible:function(_1cfa,_1cfb){if(_1cfa&&_1cfb){dojo.removeClass(_1cfa,"display-none");}else{if(_1cfa){dojo.addClass(_1cfa,"display-none");}}},_closeDialog:function(){var self=this;this.jobSchedulingWidget.destroyWidget();self._dialog.hide();setTimeout(function(){self.destroyRecursive();},1000);},_validateJobOptions:function(){if(typeof this._key!=="string"||this._key===""){_1ce5.showError(_1cd9.substitute(this.nlsResources.txtInvalidParameterMessage,[this.nlsResources.txtJobName_Caption]),this.nlsResources.txtInvalidParameterTitle);return false;}if(this.cmbScheduleType.value==="scheduled"){if(this.jobSchedulingWidget.cboFrequency.get("value")===""){_1ce5.showError(_1cd9.substitute(this.nlsResources.txtInvalidParameterMessage,[this.nlsResources.cbofrequency_Caption]),this.nlsResources.txtInvalidParameterTitle);return false;}}return true;},_cmdOK_OnClick:function(){if(this._validateJobOptions()){this._triggerJob();}},_cmdCancel_OnClick:function(){this._closeDialog();},_dialog_OnCancel:function(){this._closeDialog();},_getAndDisplayJobDetails:function(){var self=this;var svc=Sage.Services.getService("JobService");var key=this._key;var _1cfc="jobs";if(this._trigger){_1cfc="triggers";key=this._trigger.$key;}var _1cfd={key:key,resourceKind:_1cfc,success:function(_1cfe){if(_1cfe.job){self.txtJobName.set("value",_1cfe.job.$descriptor||_1cfe.job.$key);}self.txtTriggerDescription.set("value",_1cfe.$descriptor||_1cfe.$key);self._setJobParametersGridStore(_1cfe.parameters);}};svc.getJobDefinition(_1cfd);},_setJobParametersGridStore:function(_1cff){var _1d00=[];if(this._trigger){var _1d01=this._getJobParameters();var self=this;dojo.forEach(_1cff,function(item){var _1d02=self._getParameterDescription(_1d01,item.name);_1d00.push({name:item.name,value:item.value,description:_1d02});});}else{_1d00=_1cff;}var data={identifier:"name",items:_1d00};this._setParameterValueColumnBinding(this._trigger?"value":"defaultValue");var store=new _1ce1({data:data});this.grdJobParameters.setStore(store);},_getParameterDescription:function(_1d03,_1d04){var _1d05="";dojo.forEach(_1d03,function(item){if(item.name===_1d04){_1d05=item.description;}});return _1d05;},_getJobParameters:function(){var job=null;var _1d06=Sage.Services.getService("JobService");var _1d07=new Sage.SData.Client.SDataSingleResourceRequest(_1d06.getSchedulingSDataService());_1d07.setResourceKind(_1cd9.substitute("jobs('${0}')",[this._trigger.job.$key]));_1d07.setQueryArg("select","parameters/*");_1d07.read({async:false,success:function(_1d08){job=_1d08;}});return job?job.parameters:job;},_setParameterValueColumnBinding:function(_1d09){var self=this;dojo.forEach(this.grdJobParameters.layout.cells,function(item,index){if(item.id==="parameterValue"){self.grdJobParameters.layout.cells[index].field=_1d09;}});}});return _1ce6;});},"Sage/MainView/ReportManager":function(){define(["Sage/UI/SDataMainViewConfigurationProvider","Sage/MainView/ReportMgr/ReportManagerGroupContextService","Sage/MainView/ReportMgr/FilterConfigurationProvider","dojo/_base/declare","Sage/MainView/ReportMgr/ReportManagerActions","Sage/MainView/ReportMgr/ReportWizardController"],function(_1d0a,_1d0b,_1d0c,_1d0d){var _1d0e=_1d0d("Sage.MainView.ReportManager",_1d0a,{_currentTabId:false,_currentTabDescription:false,_mainViewName:"ReportManager",store:false,constructor:function(_1d0f){var _1d10=Sage.Services.getService("ClientGroupContext");if(!_1d10||_1d10.declaredClass!=="Sage.MainView.ReportMgr.ReportManagerGroupContextService"){_1d10=new _1d0b();Sage.Services.removeService("ClientGroupContext");Sage.Services.addService("ClientGroupContext",_1d10);}var ctx=_1d10.getContext();this._currentTabId=ctx.CurrentGroupID;this._currentTabDescription=ctx.CurrentName;this.titlePaneConfiguration={tabs:this._getTabsConfig(),menu:this._getMenuConfig(),titleFmtString:"${0}"};dojo.subscribe("/group/context/changed",this,"_onCurrentGroupChanged");},_getListPanelConfig:function(){var _1d11=Sage.Services.getService("ClientGroupContext");if(_1d11){this.listPanelConfiguration=_1d11.getCurrentListConfig();this.store=this.listPanelConfiguration.list.store;this.service=this.listPanelConfiguration.list.store.service;}return this.listPanelConfiguration;},requestConfiguration:function(_1d12){if(_1d12.success){_1d12.success.call(_1d12.scope||this,this._getListPanelConfig(),this);}},requestTitlePaneConfiguration:function(_1d13){if(_1d13.success){_1d13.success.call(_1d13.scope||this,this.titlePaneConfiguration,this);}},_getTabsConfig:function(){var _1d14={store:false,selectedTabId:this._currentTabId,tabKeyProperty:"key",tabNameProperty:"descriptor",fetchParams:{},staticTabs:this._getStaticTabs(),onTabSelect:dojo.hitch(this,"_onTabSelected"),onTabClose:false,showTabContextMenus:false};return _1d14;},_getStaticTabs:function(){var _1d15=Sage.Services.getService("ClientGroupContext");return _1d15.getStaticTabs();},_onTabSelected:function(tab){var _1d16=Sage.Services.getService("ClientGroupContext");if(_1d16){var ctx=_1d16.getContext();var id=tab.id||tab;if(ctx.CurrentGroupID===id){return;}_1d16._currentListConfiguration=null;_1d16.setCurrentGroup(id,tab.title);}},_onCurrentGroupChanged:function(args){var _1d17=args.current;this._currentTabId=_1d17.CurrentGroupID;this._currentTabDescription=_1d17.CurrentName;if(dijit.byId("GroupTabs").selectedChildWidget.id!==_1d17.CurrentGroupID){dijit.byId("GroupTabs").selectChild(_1d17.CurrentGroupID);}},_getMenuConfig:function(){return false;}});return _1d0e;});},"Sage/MainView/ReportMgr/ReportManagerGroupContextService":function(){define(["Sage/Groups/BaseGroupContextService","dojo/string","Sage/Data/SDataServiceRegistry","dojo/_base/lang","Sage/MainView/ReportMgr/ReportsListPanelConfig","Sage/MainView/ReportMgr/SchedulesListPanelConfig","Sage/MainView/ReportMgr/HistoryListPanelConfig","dojo/_base/declare","dojo/i18n!./nls/ReportManagerGroupContextService"],function(_1d18,_1d19,_1d1a,lang,_1d1b,_1d1c,_1d1d,_1d1e,_1d1f){var _1d20=_1d1e("Sage.MainView.ReportMgr.ReportManagerGroupContextService",_1d18,{_currentContext:null,_currentTabId:false,_currentTabDescription:false,_currentListConfiguration:false,defaultTabId:"reports",staticTabsConfiguration:[{key:"reports",descriptor:_1d1f.reportsTabDisplayName,keyField:"$key",configProviderType:_1d1b,entityName:"Reports",isNonEntityBased:true},{key:"schedules",descriptor:_1d1f.schedulesTabDisplayName,keyField:"$key",configProviderType:_1d1c,entityName:false,isNonEntityBased:true},{key:"history",descriptor:_1d1f.historyTabDisplayName,keyField:"$key",configProviderType:_1d1d,entityName:"ReportHistory",isNonEntityBased:false}],_configsHash:false,_LOCALSTORE_NAMESPACE:"ReportManagerView",_STORE_KEY_LASTAB:"_LASTTAB",_REPORT_FILTERS_KEY:"_REPORTFILTERS",_tabNameCache:{},constructor:function(){this.inherited(arguments);this._currentContext={};dojo.mixin(this._currentContext,this._emptyContext);this._currentContext.CurrentTableKeyField="$key";this._currentContext.AppliedFilterInfo={};this._currentContext.CurrentFamily=null;this._currentContext.notGroupBased=true;this.setContext(this._getDefaultTabId(),"default");this.unsubscribeConnects();this._subscribes=[];this._subscribes.push(dojo.subscribe("/ui/filters/default/refresh",this,this._onDefaultFilterRefresh));this._onDefaultFilterLoad();},getStaticTabs:function(){return this.staticTabsConfiguration;},setCurrentGroup:function(id,name,_1d21){if(this._currentContext.CurrentGroupID===id){return;}this._currentContext.CurrentTableKeyField=_1d21?_1d21:this.getKeyField(id);this.setContext(id,name?name:this.getGroupName(id));this.onCurrentGroupChanged({current:this._currentContext});},getContext:function(){return this._currentContext;},_ensureConfigsHash:function(){if(!this._configsHash){var hash={};for(var i=0;i<this.staticTabsConfiguration.length;i++){var cfg=this.staticTabsConfiguration[i];hash[cfg.key]=lang.mixin(cfg,{instance:false});}this.configsHash=hash;}},_setListConfig:function(){this._ensureConfigsHash();var tabId=this._currentContext.CurrentGroupID;var _1d22=(this.configsHash.hasOwnProperty(tabId))?this.configsHash[tabId]:this.configsHash["groups"];if(!_1d22.instance){_1d22.instance=new _1d22.configProviderType();}else{_1d22.instance.rebuild();}this._currentListConfiguration=_1d22.instance;this._currentListConfiguration.isNonEntityBased=_1d22.isNonEntityBased;this._currentListConfiguration.entityName=_1d22.entityName;},getCurrentListConfig:function(){this._setListConfig();return this._currentListConfiguration;},getKeyField:function(tabid){this._ensureConfigsHash();var _1d23="$key";if(this.configsHash[tabid]){_1d23=this.configsHash[tabid]["keyField"]||"$key";}return _1d23;},getGroupName:function(tabid){this._ensureConfigsHash();var name="default";if(this.configsHash[tabid]){name=this.configsHash[tabid]["descriptor"]||"default";}return name;},onCurrentGroupChanged:function(_1d24){this._clearFilterManager();var self=this;this._onDefaultFilterLoad(function(){dojo.publish("/group/context/changed",[_1d24,self]);self._saveToLocalStorage(self._STORE_KEY_LASTAB,self.getContext().CurrentGroupID);});},_clearFilterManager:function(){dojo.publish("/ui/filters/default/apply",[{},{},this]);},setContext:function(id,name){this._currentContext.CurrentGroupID=id;this._currentContext.CurrentName=name;this._currentContext.AppliedFilterInfo={};this._currentContext.filtersForEntity="";this._setListConfig();this._currentContext.CurrentEntity=this._currentListConfiguration.entityName;this._currentContext.isNonEntityBased=this._currentListConfiguration.isNonEntityBased;this._isRetrievingContext=false;this.onContextSet(this._currentContext);},isContextRequired:function(){return !(Sage&&Sage.Groups&&Sage.Groups._groupContext);},_onDefaultFilterLoad:function(_1d25){if(this._currentContext.CurrentGroupID==="schedules"){dojo.publish("/group/context/changedTask",[this]);this._saveToLocalStorage(this._STORE_KEY_LASTAB,this.getContext().CurrentGroupID);dojo.publish("/ui/filters/default/destroyFilters",[this]);}else{if(this._currentContext.CurrentGroupID==="history"){this._requestFilters(_1d25);}else{this._requestReportFilters(_1d25);}}},_requestReportFilters:function(_1d26){var _1d27=this.getContext();var self=this;var _1d28=_1d1a.getSDataService("system");var _1d29=new Sage.SData.Client.SDataResourcePropertyRequest(_1d28);_1d29.setResourceKind("reports");_1d29.setResourceProperty("$queries/filters");_1d29.readFeed({success:function(_1d2a){if(_1d2a){_1d27.filtersForEntity=dojo.toJson(_1d2a.$resources);self._requestFilters(_1d26);}},error:function(error){if(error){}},scope:this,async:false});},_requestFilters:function(_1d2b){var _1d2c=this.getContext();var _1d2d=_1d1a.getSDataService("system");var entry={"$name":"getEntityFilters","request":{"entityName":_1d2c.CurrentEntity,"key":_1d2c.CurrentGroupID,"isNonEntityBased":_1d2c.isNonEntityBased,"filtersForEntity":_1d2c.filtersForEntity}};var _1d2e=new Sage.SData.Client.SDataServiceOperationRequest(_1d2d);_1d2e.setOperationName("getEntityFilters");_1d2e.execute(entry,{success:lang.hitch(this,function(_1d2f){try{if(_1d2f.response.appliedFilterInfo){this._currentContext.AppliedFilterInfo.applied=_1d2f.response.appliedFilterInfo.applied;this._currentContext.AppliedFilterInfo.definitionSet=_1d2f.response.appliedFilterInfo.definitionSet;}if(_1d2b){_1d2b();}}catch(err){console.error(err);}}),failure:function(_1d30){console.error(_1d30);},async:false});},_onDefaultFilterRefresh:function(_1d31,_1d32,_1d33){var _1d34=this.getContext();var _1d35=_1d1a.getSDataService("system"),entry={"$name":"applyFilterToEntity","request":{"entityName":_1d34.CurrentEntity,"filter":dojo.toJson(_1d33.createValueSet()),"key":_1d34.CurrentGroupID,"isNonEntityBased":_1d34.isNonEntityBased,"filtersForEntity":_1d34.filtersForEntity}},_1d36=new Sage.SData.Client.SDataServiceOperationRequest(_1d35).setOperationName("applyFilterToEntity");_1d36.execute(entry,{});},_saveToLocalStorage:function(key,value,_1d37){this._saveToSessionStorage(key,value,_1d37);},_getFromLocalStorage:function(key,_1d38){return this._getFromSessionStorage(key,_1d38);},_getFromSessionStorage:function(key,_1d39){if(!_1d39){_1d39=this._LOCALSTORE_NAMESPACE;}var _1d3a=_1d39+"_"+key;return sessionStorage.getItem(_1d3a);},_saveToSessionStorage:function(key,value,_1d3b){if(!_1d3b){_1d3b=this._LOCALSTORE_NAMESPACE;}var _1d3c=_1d3b+"_"+key;sessionStorage.setItem(_1d3c,value);},_getDefaultTabId:function(){var _1d3d=this._getUrlTabId();if(_1d3d){_1d3d=this._validateTabId(_1d3d);if(_1d3d){return _1d3d;}}var _1d3e=this._getFromLocalStorage(this._STORE_KEY_LASTAB);if(_1d3e){this.defaultTabId=_1d3e;}else{}if(!this._configsHash){for(var i=0;i<this.staticTabsConfiguration;i++){if(this.defaultTabId===this.staticTabsConfiguration[i]["key"]){return this.defaultTabId;}}}return this.defaultTabId;},_getUrlTabId:function(){var tabId=false,_1d3f="[\\?&]tabId=([^%#]*)",regex=new RegExp(_1d3f),_1d40=regex.exec(window.location.href);if(_1d40!==null){tabId=_1d40[1];}return tabId;},_validateTabId:function(tabId){if(tabId){for(var i=0;i<this.staticTabsConfiguration.length;i++){var cfg=this.staticTabsConfiguration[i];if(cfg.key.toUpperCase()===tabId.toUpperCase()){return cfg.key;}}}return null;}});if(!Sage.Services.hasService("ClientGroupContext")){Sage.Services.addService("ClientGroupContext",new _1d20());}else{var _1d41=Sage.Services.getService("ClientGroupContext");if(_1d41.declaredClass!=="Sage.MainView.ReportMgr.ReportManagerGroupContextService"){_1d41.unsubscribeConnects();Sage.Services.removeService("ClientGroupContext");Sage.Services.addService("ClientGroupContext",new _1d20());}}return _1d20;});},"Sage/MainView/ReportMgr/ReportsListPanelConfig":function(){define(["Sage/MainView/_BaseListPanelConfig","Sage/MainView/ReportMgr/ReportsSDataSummaryFormatterScope","dojo/_base/declare","dojo/i18n!./nls/ReportsListPanelConfig","Sage/Data/SDataServiceRegistry","Sage/UI/Columns/DateTime","dojo/_base/lang","Sage/MainView/ReportMgr/ReportManagerFormatter","dojo/i18n!./templates/nls/ReportsListSummary","dojo/i18n!./templates/nls/ReportDetailSummary"],function(_1d42,_1d43,_1d44,_1d45,_1d46,_1d47,_1d48,_1d49){var _1d4a=_1d44("Sage.MainView.ReportMgr.ReportsListPanelConfig",[_1d42],{keyField:"$key",_listId:"Reports",_resourceKind:"reports",_contextMenu:"ReportManagerListContextMenu",_currentListContextSubMenu:"ReportsListContextMenu",constructor:function(){_1d48.mixin(this,_1d45);this._service=_1d46.getSDataService("system");this._structure=this._getStructure();this._select=this._getSelect();this._where=this._getWhere();this._include=this._getInclude();this._store=this._getStore();this.list=this._getListConfig();this.detail=this._getDetailConfig();this.toolBar=this._getToolBars();this.list.selectionMode="single";},_getStructure:function(){return [{field:"displayName",name:this.colNameReportName,width:"100px"},{field:"mainTable",name:this.colNameTable,width:"50px",formatter:_1d49.formatProperCase},{field:"createUser",name:this.colNameCreateUser,width:"50px",formatter:_1d49.formatGetUserById},{field:"createDate",name:this.colNameCreateDate,width:"50px",type:_1d47},{field:"modifyUser",name:this.colNameModifyUser,width:"50px",formatter:_1d49.formatGetUserById},{field:"modifyDate",name:this.colNameModifyDate,width:"50px",type:_1d47}];},_getSelect:function(){return ["displayName","mainTable","createUser","createDate","modifyUser","modifyDate"];},_getWhere:function(){return "";},_getSort:function(){var sort=[{attribute:"displayName",descending:false}];return sort;},_getInclude:function(){var _1d4b=[];return _1d4b;},_getSummaryListRequestConfig:function(){var _1d4c={resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["displayName","mainTable","createUser","createDate","modifyUser","modifyDate"],include:[],sort:this._getSort(),useBatchRequest:false};return _1d4c;},_getFormatterScope:function(){var _1d4d=this._getSummaryListRequestConfig();var _1d4e=new _1d43({templateLocation:"MainView/ReportMgr/templates/ReportsListSummary.html",resetDataManager:true,requestConfiguration:_1d4d});return _1d4e;},_getSummaryDetailRequestConfig:function(){var _1d4f={resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["displayName","mainTable","createUser","createDate","modifyUser","modifyDate"],include:[],useBatchRequest:false};return _1d4f;},_getDetailConfig:function(){var _1d50=this._getFormatterScope();var _1d51=this._getSummaryDetailRequestConfig();var _1d52={resourceKind:this._resourceKind,requestConfiguration:_1d51,templateLocation:"MainView/ReportMgr/templates/ReportDetailSummary.html"};return _1d52;},_getToolBars:function(){var _1d53={items:[]};return _1d53;}});return _1d4a;});},"Sage/MainView/_BaseListPanelConfig":function(){define(["Sage/_ConfigurationProvider","Sage/Data/SDataStore","dijit/Menu","dijit/PopupMenuItem","dijit/MenuSeparator","Sage/UI/MenuItem","dijit/registry","dojo/_base/declare","dojo/string","Sage/Data/SDataServiceRegistry"],function(_1d54,_1d55,Menu,_1d56,_1d57,_1d58,_1d59,_1d5a,_1d5b,_1d5c){var _1d5d=_1d5a("Sage.MainView._BaseListPanelConfig",[_1d54],{list:false,detail:false,summary:false,toolBar:false,_listId:false,_store:false,_service:false,_where:false,_sort:false,_select:false,_include:false,_structure:false,_currentUserId:false,_resourceKind:false,_securedAction:"",keyField:"$key",hasCompositeKey:false,_menuItems:null,_contextMenu:false,_summaryformaterScope:false,entityName:false,rebuildMenus:true,rebuildOnRefresh:false,detailStateKey:false,constructor:function(){var _1d5e=Sage.Services.getService("ClientContextService");if(_1d5e){if(_1d5e.containsKey("userID")){this._currentUserId=_1d5e.getValue("userID");}}this._include=this._getInclude();this._menuItems=[];},rebuild:function(){this._where=this._getWhere();this._structure=this._getStructure();this.list=this._getListConfig();this.summary=this._getSummaryConfig();this.detail=this._getDetailConfig();this.toolBar=this._getToolBars();},_onListRefresh:function(event){},_getListConfig:function(){if(!this._store){this._store=this._getStore();}else{this._store.where=this._where;}var _1d5f={id:this._listId,structure:this._structure,store:this._store,selectedRegionContextMenuItems:this._getListContextMenuItems(),onSelectedRegionContextMenu:this._onListContext};return _1d5f;},_getStore:function(){var store=new _1d55({id:this._listId,service:this._service,resourceKind:this._resourceKind,include:this._include,select:this._select,sort:this._sort,where:this._where});return store;},_getSelect:function(){var _1d60=[];return _1d60;},_getInclude:function(){var _1d61=[];return _1d61;},_getSort:function(){var sort=[];return sort;},_getWhere:function(){var where="";return where;},_getStructure:function(){var _1d62=[];return _1d62;},_getSummaryConfig:function(){var store=new _1d55({id:this._listId,service:this._service,resourceKind:this._resourceKind,include:[],select:["$key"],where:this._where});var _1d63=[{field:"$key",formatter:"formatSummary",width:"100%",name:"Summary View"}];var _1d64=this._getFormatterScope();var _1d65={structure:_1d63,layout:"layout",store:store,rowHeight:170,rowsPerPage:10,formatterScope:_1d64};return _1d65;},_getFormatterScope:function(){return false;},_getDetailConfig:function(){return false;},_getToolBars:function(){var _1d66={items:[]};return _1d66;},_getListContextMenuItems:function(){if(!this._contextMenu){return;}if(this._menuItems.length>0){return this._menuItems;}if(!Sage.UI.DataStore.ContextMenus){return [];}if(!Sage.UI.DataStore.ContextMenus.listContextMenu){return [];}if(this._menuItems.length>0){this._menuItems[0].destroyDescendants();}this._menuItems=[];var _1d67=Sage.UI.DataStore.ContextMenus.listContextMenu.items;var len=_1d67.length;for(var i=0;i<len;i++){var mDef=_1d67[i];if(mDef.id===this._currentListContextSubMenu){this._buildChildMenu(mDef.submenu,null);}}return this._menuItems;},_getGridMenu:function(){var _1d68=dijit.byId("_listContextmenu");return _1d68;},_buildChildMenu:function(_1d69,_1d6a){var len=_1d69.length;for(var i=0;i<len;i++){var mDef=_1d69[i];if(mDef.submenu.length>0){var _1d6b=new Menu();this._buildChildMenu(mDef.submenu,_1d6b);var _1d6c=new _1d56({label:mDef.text,popup:_1d6b});if(_1d6a){_1d6a.addChild(_1d6c);}else{this._menuItems.push(_1d6c);}}else{var _1d6d=null;if((mDef.text==="-")||(mDef.text===" ")||(mDef.isspacer)){_1d6d=new _1d57();}else{var href=mDef.href;if(href.indexOf("javascript:")<0){href=dojo.string.substitute("javascript:${0}()",[href]);}_1d6d=new _1d58({label:mDef.text||"...",icon:mDef.img,title:mDef.tooltip||"",ref:href,onClick:function(){if(this.ref!==""){try{window.location.href=this.ref;}catch(e){}}}});}if(_1d6a){_1d6a.addChild(_1d6d);}else{this._menuItems.push(_1d6d);}}}},_onListContext:function(){},getNonEntityBasedFilterConfig:function(_1d6e){var self=this;var _1d6f={groupId:this._listId,store:new _1d55({executeReadWith:"readFeed",request:new Sage.SData.Client.SDataResourcePropertyRequest(_1d5c.getSDataService("system")).setResourceKind(self._resourceKind).setResourceProperty("$queries/filters").setQueryArg("count",20)}),createStoreForFilter:function(_1d70){return _1d70&&_1d70["filterName"]?new _1d55({executeReadWith:"readFeed",request:new Sage.SData.Client.SDataResourcePropertyRequest(self._service).setResourceKind(self._resourceKind).setResourceProperty("$queries/executeMetric").setQueryArg("_filterName",_1d70["filterName"]).setQueryArg("orderby","displayName").setQueryArg("_activeFilter",self._where||"")}):null;},getFilterManager:function(){var _1d71=_1d59.byId("list");return _1d71&&_1d71.get("filterManager");}};return _1d6f;},getFilterConfig:function(_1d72,entry,_1d73){var self=this;var _1d74={groupId:this._listId,store:new _1d55({executeReadWith:"readFeed",request:new Sage.SData.Client.SDataResourcePropertyRequest(_1d72).setResourceKind("entities").setResourceSelector(_1d5b.substitute("\"${0}\"",[self.entityName])).setResourceProperty("filters").setQueryArg("where","filterType ne \"analyticsMetric\"").setQueryArg("count",20)}),createStoreForFilter:function(_1d75){return _1d75&&_1d75["filterName"]?new _1d55({executeReadWith:"readFeed",request:new Sage.SData.Client.SDataResourcePropertyRequest(self._service).setResourceKind(self._resourceKind).setResourceProperty("$queries/executeMetric").setQueryArg("_filterName",_1d75["filterName"]).setQueryArg("orderby","displayName").setQueryArg("_activeFilter",self._where||"")}):null;},getFilterManager:function(){var _1d76=_1d59.byId("list");return _1d76&&_1d76.get("filterManager");}};return _1d74;}});return _1d5d;});},"Sage/MainView/ReportMgr/ReportsSDataSummaryFormatterScope":function(){define(["Sage/UI/SummaryContainer","dojo/i18n","Sage/UI/SummaryFormatterScope","Sage/MainView/ReportMgr/ReportsSDataDetailViewDataManager","Sage/UI/Controls/SummaryAggregate","dojo/_base/declare"],function(_1d77,i18n,_1d78,_1d79,_1d7a,_1d7b){var _1d7c=_1d7b("Sage.MainView.ReportMgr.ReportsSDataSummaryFormatterScope",[_1d78],{constructor:function(args){dojo.mixin(this,args);this.widgets=[];this.preFetchResources();this._setupDataManager();},_setupDataManager:function(){this.dataManager=new _1d79(this.requestConfiguration);if(Sage.Services.hasService("SummaryViewDataManager")){Sage.Services.removeService("SummaryViewDataManager");}Sage.Services.addService("SummaryViewDataManager",this.dataManager);}});return _1d7c;});},"Sage/MainView/ReportMgr/ReportsSDataDetailViewDataManager":function(){define(["Sage/Data/SDataServiceRegistry","Sage/Data/SDataStore","dojo/_base/declare","dojo/_base/lang"],function(_1d7d,_1d7e,_1d7f,lang){var _1d80=_1d7f("Sage.MainView.ReportMgr.ReportsSDataDetailRequestQueue",null,{select:[],resourceKind:"",fetching:false,include:[],service:null,constructor:function(_1d81){lang.mixin(this,_1d81);this.requestHash={};this.fetching=false;this.service=Sage.Data.SDataServiceRegistry.getSDataService("system");},add:function(_1d82,_1d83){var _1d84=this.requestHash[_1d82];if((_1d84)&&(_1d84.id!==_1d83.id)){if(!_1d84.duplicates){_1d84.duplicates=[];}var found=false;for(var i=0;i<_1d84.duplicates.length;i++){if(_1d84.duplicates[i].context.id===_1d83.id){found=true;}}if(!found){_1d84.duplicates.push({id:_1d83.id,context:_1d83});}}else{this.requestHash[_1d82]=_1d83;}},send:function(_1d85,_1d86){this.fetching=true;var _1d87=this;var _1d88=new Sage.SData.Client.SDataSingleResourceRequest(this.service);_1d88.setResourceKind(this.resourceKind);for(var id in this.requestHash){_1d88.setResourceSelector("'"+id+"'");}_1d88.setQueryArg("include",this.include.join(","));_1d88.read({success:lang.hitch(_1d86,_1d85,_1d87),failure:lang.hitch(this,this.requestFailed,_1d87)});},requestFailed:function(a,b,c){console.error("Request failed %o %o %o",a,b,c);}});var _1d89=_1d7f("Sage.MainView.ReportMgr.ReportsSDataDetailViewDataManager",null,{keyField:"$key",constructor:function(){this.queue=new _1d80();this.requestTimeout=false;},requestDataNoWait:function(_1d8a,_1d8b,_1d8c){var _1d8d=new _1d80();if(_1d8c.keyField){this.keyField=_1d8c.keyField;}_1d8d.select=_1d8c.select;_1d8d.resourceKind=_1d8c.resourceKind;_1d8d.serviceName=_1d8c.serviceName;_1d8d.include=_1d8c.include;_1d8d.useBatchRequest=_1d8c.useBatchRequest;if(_1d8c.expandRecurrences!==null){_1d8d.expandRecurrences=_1d8c.expandRecurrences;}_1d8d.add(_1d8a,_1d8b);_1d8d.send(this.receiveData,this);},receiveData:function(_1d8e,data){var _1d8f=data;var id=_1d8f.id;if(!id){id=_1d8f[this.keyField];_1d8f.id=id;}var _1d90=_1d8e.requestHash[_1d8f.id];if(_1d90){try{if(!_1d90.applied){_1d90.applied=true;_1d90.set("entity",_1d8f);}}catch(err){console.error(err);}}}});return _1d89;});},"Sage/MainView/ReportMgr/ReportManagerFormatter":function(){define(["Sage/Utility","dojo/date/locale","dojo/number","dojo/string","dojo/_base/array","dojo/i18n!./nls/ReportManagerFormatter","Sage/Reporting/Enumerations"],function(_1d91,_1d92,_1d93,_1d94,_1d95,_1d96,_1d97){Sage.namespace("Sage.MainView.ReportMgr.ReportManagerFormatter");dojo.mixin(Sage.MainView.ReportMgr.ReportManagerFormatter,{_isNumeric:function(value){return !isNaN(parseFloat(value))&&isFinite(value);},formatDate:function(value){if(_1d91.Convert.isDateString(value)){var date=_1d91.Convert.toDateFromString(value);return _1d92.format(date,{selector:"datetime",fullYear:true});}return "";},formatFileSize:function(value){var self=Sage.MainView.ReportMgr.ReportManagerFormatter;if(value&&self._isNumeric(value)){return _1d93.round(value/1024,0)+" KB";}return "";},formatElapsedTime:function(value){var self=Sage.MainView.ReportMgr.ReportManagerFormatter;if(value&&self._isNumeric(value)){var days=Math.floor(value/(24*3600));var hours=Math.floor((value-(days*24*3600))/3600);var _1d98=Math.floor((value-(hours*3600))/60);var _1d99=value-(days*24*3600)-(hours*3600)-(_1d98*60);return _1d94.pad(hours,2)+":"+_1d94.pad(_1d98,2)+":"+_1d94.pad(_1d99,2);}return "";},formatBoolean:function(value){return _1d91.isTrue(value)?_1d96.txtTrue:_1d96.txtFalse;},_getParameterValue:function(_1d9a,name){var value="";if(_1d9a){_1d95.some(_1d9a,function(entry,i){if(entry.name===name){value=entry.value;return true;}});}return value;},formatGetUserById:function(item){if(!item){return "";}else{return _1d91.getUserName(item);}},getParameterRunAsUser:function(_1d9b){if(_1d9b){var _1d9c=Sage.MainView.ReportMgr.ReportManagerFormatter._getParameterValue(_1d9b,"RunAsUserId");return _1d91.getUserName(_1d9c);}return "";},formatScheduleName:function(item){return Sage.MainView.ReportMgr.ReportManagerFormatter._getParameterValue(item.parameters,"ScheduleName");},formatScheduleDescription:function(item){return Sage.MainView.ReportMgr.ReportManagerFormatter._getParameterValue(item.parameters,"Description");},formatPluginName:function(item){return Sage.MainView.ReportMgr.ReportManagerFormatter._getParameterValue(item.parameters,"PluginName");},formatTemplateName:function(_1d9d){return Sage.MainView.ReportMgr.ReportManagerFormatter._getParameterValue(_1d9d,"TemplateName");},formatOutputFormat:function(item){return Sage.MainView.ReportMgr.ReportManagerFormatter._getParameterValue(item.parameters,"OutputFormat");},formatScheduleUser:function(user){if(user&&user.$descriptor){return user.$descriptor;}return "";},formatCronExpression:function(item){return item.cronExpression;},formatAttachment:function(value,_1d9e,cell){var item=this.grid.getItem(_1d9e);return _1d94.substitute("<a href=\"javascript: Sage.Utility.File.Attachment.getAttachment('${0}');\" title=\"${1}\">${1}</a>",[item.AttachId,item.ScheduleName]);},formatExecutionType:function(value,_1d9f,cell){return _1d97.getExecutionTypeCaption(value);},formatReportType:function(value){return _1d97.getReportTypeCaption(value);},formatProperCase:function(value){if(typeof value==="string"){return value.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase();});}else{return "";}}});return Sage.MainView.ReportMgr.ReportManagerFormatter;});},"Sage/MainView/ReportMgr/SchedulesListPanelConfig":function(){define(["Sage/MainView/_BaseListPanelConfig","Sage/MainView/ReportMgr/SchedulesSDataSummaryFormatterScope","dojo/_base/declare","dojo/i18n!./nls/SchedulesListPanelConfig","Sage/Utility/Jobs","Sage/UI/Columns/DateTime","dojo/_base/lang","dojo/i18n!./templates/nls/SchedulesListSummary","dojo/i18n!./templates/nls/ScheduleDetailSummary"],function(_1da0,_1da1,_1da2,_1da3,_1da4,_1da5,_1da6){var _1da7=_1da2("Sage.MainView.ReportMgr.SchedulesListPanelConfig",[_1da0],{_listId:"Schedules",_resourceKind:"triggers",_contextMenu:"ReportManagerListContextMenu",_currentListContextSubMenu:"ReportSchedulesListContextMenu",constructor:function(){_1da6.mixin(this,_1da3);var _1da8=Sage.Services.getService("JobService");this._service=_1da8.getSchedulingSDataService();this._structure=this._getStructure();this._select=this._getSelect();this._sort=this._getSort();this._where=this._getWhere();this._include=this._getInclude();this._store=this._getStore();this.list=this._getListConfig();this.detail=this._getDetailConfig();this.toolBar=this._getToolBars();this.list.selectionMode="single";},_getStructure:function(){return [{field:"job",name:this.colJobName,width:"100px",formatter:_1da4.formatJobDescription},{field:"$descriptor",name:this.colNameDescription,width:"100px"},{field:"user",name:this.colNameRunAsUser,width:"100px",formatter:_1da4.formatUser},{field:"startTimeUtc",type:_1da5,name:this.colNameStartTimeUtc,width:"100px"},{field:"endTimeUtc",type:_1da5,name:this.colNameEndTimeUtc,width:"100px"},{field:"priority",name:this.colNamePriority,width:"100px"},{field:"status",name:this.colNameStatus,width:"100px"},{field:"timesTriggered",name:this.colNameExecutionCount,width:"100px"}];},_getSelect:function(){return ["$key","job","user","startTimeUtc","endTimeUtc","repeatCount","repeatInterval","priority","status","timesTriggered"];},_getInclude:function(){var _1da9=["$descriptors,$key"];return _1da9;},_getWhere:function(){return "jobId like 'Saleslogix.Reporting%'";},_getSort:function(){var sort=[{attribute:"job"}];return sort;},_getSummaryListRequestConfig:function(){var _1daa={resourceKind:this._resourceKind,serviceName:"scheduling",keyField:"$key",select:this._getSelect(),include:this._getInclude(),useBatchRequest:false,sort:this._getSort()};return _1daa;},_getFormatterScope:function(){var _1dab=this._getSummaryListRequestConfig();return new _1da1({templateLocation:"MainView/ReportMgr/templates/SchedulesListSummary.html",resetDataManager:true,requestConfiguration:_1dab});},_getSummaryDetailRequestConfig:function(){var _1dac={resourceKind:this._resourceKind,serviceName:"dynamic",keyField:"$key",select:this._getSelect(),include:this._getInclude(),useBatchRequest:false};return _1dac;},_getDetailConfig:function(){var _1dad=this._getFormatterScope();return {resourceKind:this._resourceKind,requestConfiguration:this._getSummaryDetailRequestConfig(),templateLocation:"MainView/ReportMgr/templates/ScheduleDetailSummary.html"};},_getToolBars:function(){var _1dae={items:[]};return _1dae;}});return _1da7;});},"Sage/MainView/ReportMgr/SchedulesSDataSummaryFormatterScope":function(){define(["Sage/UI/SummaryContainer","dojo/i18n","Sage/UI/SummaryFormatterScope","Sage/MainView/ReportMgr/SchedulesSDataDetailViewDataManager","Sage/UI/Controls/SummaryAggregate","dojo/_base/declare"],function(_1daf,i18n,_1db0,_1db1,_1db2,_1db3){var _1db4=_1db3("Sage.MainView.ReportMgr.SchedulesSDataSummaryFormatterScope",[_1db0],{constructor:function(args){dojo.mixin(this,args);this.widgets=[];this.preFetchResources();this._setupDataManager();},_setupDataManager:function(){this.dataManager=new _1db1(this.requestConfiguration);if(Sage.Services.hasService("SummaryViewDataManager")){Sage.Services.removeService("SummaryViewDataManager");}Sage.Services.addService("SummaryViewDataManager",this.dataManager);}});return _1db4;});},"Sage/MainView/ReportMgr/SchedulesSDataDetailViewDataManager":function(){define(["Sage/Data/SDataServiceRegistry","Sage/Data/SDataStore","dojo/_base/declare","dojo/_base/lang"],function(_1db5,_1db6,_1db7,lang){var _1db8=_1db7("Sage.MainView.ReportMgr.SchedulesSDataDetailRequestQueue",null,{select:[],resourceKind:"",fetching:false,include:[],service:null,constructor:function(_1db9){lang.mixin(this,_1db9);this.requestHash={};this.fetching=false;var _1dba=Sage.Services.getService("JobService");this.service=_1dba.getSchedulingSDataService();},add:function(_1dbb,_1dbc){var _1dbd=this.requestHash[_1dbb];if((_1dbd)&&(_1dbd.id!==_1dbc.id)){if(!_1dbd.duplicates){_1dbd.duplicates=[];}var found=false;for(var i=0;i<_1dbd.duplicates.length;i++){if(_1dbd.duplicates[i].context.id===_1dbc.id){found=true;}}if(!found){_1dbd.duplicates.push({id:_1dbc.id,context:_1dbc});}}else{this.requestHash[_1dbb]=_1dbc;}},send:function(_1dbe,_1dbf){this.fetching=true;var _1dc0=this;var _1dc1=new Sage.SData.Client.SDataSingleResourceRequest(this.service);_1dc1.setResourceKind(this.resourceKind);for(var id in this.requestHash){_1dc1.setResourceSelector("'"+id+"'");}_1dc1.setQueryArg("include",this.include.join(","));_1dc1.read({success:lang.hitch(_1dbf,_1dbe,_1dc0),failure:lang.hitch(this,this.requestFailed,_1dc0)});},requestFailed:function(a,b,c){}});var _1dc2=_1db7("Sage.MainView.ReportMgr.SchedulesSDataDetailViewDataManager",null,{keyField:"$key",constructor:function(){this.queue=new _1db8();this.requestTimeout=false;},requestDataNoWait:function(_1dc3,_1dc4,_1dc5){var _1dc6=new _1db8();if(_1dc5.keyField){this.keyField=_1dc5.keyField;}_1dc6.select=_1dc5.select;_1dc6.resourceKind=_1dc5.resourceKind;_1dc6.serviceName=_1dc5.serviceName;_1dc6.include=_1dc5.include;_1dc6.useBatchRequest=_1dc5.useBatchRequest;if(_1dc5.expandRecurrences!==null){_1dc6.expandRecurrences=_1dc5.expandRecurrences;}_1dc6.add(_1dc3,_1dc4);_1dc6.send(this.receiveData,this);},receiveData:function(_1dc7,data){var _1dc8=data;var id=_1dc8.id;if(!id){id=_1dc8[this.keyField];_1dc8.id=id;}var _1dc9=_1dc7.requestHash[_1dc8.id];if(_1dc9){try{if(!_1dc9.applied){_1dc9.applied=true;_1dc9.set("entity",_1dc8);}}catch(err){console.error(err);}}}});return _1dc2;});},"Sage/MainView/ReportMgr/HistoryListPanelConfig":function(){define(["Sage/MainView/_BaseListPanelConfig","Sage/UI/SDataSummaryFormatterScope","dojo/_base/declare","dojo/i18n!./nls/HistoryListPanelConfig","Sage/Data/SDataServiceRegistry","Sage/UI/Columns/DateTime","dojo/_base/lang","Sage/MainView/ReportMgr/ReportManagerFormatter","Sage/Utility/Jobs","dojo/i18n!./templates/nls/HistoryListSummary","dojo/i18n!./templates/nls/HistoryDetailSummary"],function(_1dca,_1dcb,_1dcc,_1dcd,_1dce,_1dcf,_1dd0,_1dd1,_1dd2){var _1dd3=_1dcc("Sage.MainView.ReportMgr.HistoryListPanelConfig",[_1dca],{keyField:"$key",_listId:"History",_resourceKind:"reportHistory",_contextMenu:"ReportManagerListContextMenu",_currentListContextSubMenu:"HistoryListContextMenu",entityName:"ReportHistory",constructor:function(){_1dd0.mixin(this,_1dcd);this._service=_1dce.getSDataService("dynamic");this._structure=this._getStructure();this._select=this._getSelect();this._where=this._getWhere();this._include=this._getInclude();this._store=this._getStore();this.list=this._getListConfig();this.detail=this._getDetailConfig();this.toolBar=this._getToolBars();},_getStructure:function(){return [{field:"CreateDate",name:this.colNameDate,width:"65px",type:_1dcf},{field:"ScheduleName",name:this.colNameReportName,width:"125px",formatter:_1dd1.formatAttachment},{field:"ReportType",name:this.colNameReportType,width:"50px",formatter:_1dd1.formatReportType},{field:"ExecutionType",name:this.colNameExecutionType,width:"50px",formatter:_1dd1.formatExecutionType},{field:"DocumentType",name:this.colNameOutputFormat,width:"50px"},{field:"RunAs",name:this.colNameRunAs,width:"50px",formatter:_1dd2.formatUser},{field:"ScheduledBy",name:this.colNameScheduledBy,width:"50px",formatter:_1dd2.formatUser},{field:"FileSize",name:this.colNameSize,width:"50px",formatter:_1dd1.formatFileSize}];},_getSelect:function(){return ["CreateDate","ExecutionType","ScheduledBy","RunAs","CreateUser","ScheduleName","DocumentType","FileSize","ElapsedTimeInSeconds","ReportType","AttachId"];},_getWhere:function(){return "";},_getInclude:function(){return ["$descriptors"];},_getSummaryListRequestConfig:function(){var _1dd4={resourceKind:this._resourceKind,serviceName:"dynamic",keyField:"$key",select:this._getSelect(),include:this._getInclude(),useBatchRequest:false};return _1dd4;},_getFormatterScope:function(){var _1dd5=this._getSummaryListRequestConfig();var _1dd6=new _1dcb({templateLocation:"MainView/ReportMgr/templates/HistoryListSummary.html",resetDataManager:true,requestConfiguration:_1dd5});return _1dd6;},_getSummaryDetailRequestConfig:function(){var _1dd7={resourceKind:this._resourceKind,serviceName:"dynamic",keyField:"$key",select:this._getSelect(),include:["$descriptors"],useBatchRequest:false};return _1dd7;},_getDetailConfig:function(){var _1dd8=this._getFormatterScope();var _1dd9=this._getSummaryDetailRequestConfig();var _1dda={resourceKind:this._resourceKind,requestConfiguration:_1dd9,templateLocation:"MainView/ReportMgr/templates/HistoryDetailSummary.html"};return _1dda;},_getToolBars:function(){var _1ddb={items:[]};return _1ddb;},resolveProperty:function(_1ddc,_1ddd){if(_1ddc==="ScheduledBy"){return "ScheduledBy.Id";}return _1ddc;}});return _1dd3;});},"Sage/MainView/ReportMgr/FilterConfigurationProvider":function(){define(["Sage/Services/_ServiceMixin","Sage/_ConfigurationProvider","Sage/MainView/ReportMgr/ReportManagerGroupContextService","dijit/registry","dojo/_base/declare","Sage/Utility/Filters","dojo/_base/lang","dojo/json"],function(_1dde,_1ddf,_1de0,_1de1,_1de2,_1de3,lang,json){var _1de4=_1de2("Sage.MainView.ReportMgr.FilterConfigurationProvider",[_1ddf,_1dde],{_configuration:null,_hasLayoutConfiguration:false,_hasFilterHiddenConfiguration:false,_currentUserId:false,serviceMap:{"groupContextService":"ClientGroupContext","metaDataService":{type:"sdata",name:"metadata"},"systemDataService":{type:"sdata",name:"system"}},constructor:function(_1de5){this.inherited(arguments);if(this.groupContextService.declaredClass!=="Sage.MainView.ReportMgr.ReportManagerGroupContextService"){Sage.Services.removeService("ClientGroupContext");this.groupContextService=new _1de0();Sage.Services.addService("ClientGroupContext",this.groupContextService);}this._subscribes.push(dojo.subscribe("/group/context/changed",this,this._onGroupContextChanged));},requestConfiguration:function(_1de6){this._configuration={};this._hasLayoutConfiguration=false;this._hasFilterHiddenConfiguration=false;this._onRequestConfigurationSuccess(_1de6,null);this._getHiddenFilters(_1de6);},onConfigurationChange:function(){},getFilterFormatter:function(_1de7){if(_1de7){if(_1de7.filterName==="ExecutionType"){}}return false;},_onGroupContextChanged:function(){this.onConfigurationChange();},_createConfiguration:function(entry,_1de8){var _1de9=this.groupContextService.getCurrentListConfig();if(this.groupContextService._currentContext.isNonEntityBased){this._configuration=_1de9.getNonEntityBasedFilterConfig(_1de8);}else{this._configuration=_1de9.getFilterConfig(this.metaDataService,entry,_1de8);}if(!this._configuration){this._configuration={};}this._configuration.getFilterManager=function(){var _1dea=_1de1.byId("list");return _1dea&&_1dea.get("filterManager");};this._hasLayoutConfiguration=true;},_onRequestConfigurationSuccess:function(_1deb,entry){this._createConfiguration(entry,_1deb);this._callOptionsSuccess(_1deb);},_onRequestConfigurationFailure:function(_1dec,_1ded){if(_1dec.failure){_1dec.failure.call(_1dec.scope||this,_1ded,_1dec,this);}},_getHiddenFilters:function(_1dee){var key=this._getHiddenFiltersKey();if(key){_1de3.getHiddenFilters(key,lang.hitch(this,this._onHiddenFiltersFetchComplete,_1dee||{}),function(err){console.error(err);});}},_getHiddenFiltersKey:function(){var key=_1de3.getHiddenFiltersKey();return key;},_onHiddenFiltersFetchComplete:function(_1def,_1df0){if(_1df0&&_1df0.response&&_1df0.response.value){this._configuration._hiddenFilters=json.parse(_1df0.response.value);if(this._configuration._hiddenFilters&&this._configuration._hiddenFilters.constructor===Array){this._configuration._hiddenFilters={};}}this._configuration._hiddenFiltersKey=this._getHiddenFiltersKey();this._hasFilterHiddenConfiguration=true;this._callOptionsSuccess(_1def);},_callOptionsSuccess:function(_1df1){if(!this._hasLayoutConfiguration||!this._hasFilterHiddenConfiguration){return;}if(_1df1.success){_1df1.success.call(_1df1.scope||this,this._configuration,_1df1,this);this._hasLayoutConfiguration=false;this._hasFilterHiddenConfiguration=false;}}});return _1de4;});},"Sage/MainView/ReportMgr/ReportManagerActions":function(){define(["dojo/_base/declare","Sage/UI/Dialogs","dojo/i18n!./nls/ReportManagerActions","dojo/string","Sage/MainView/ReportMgr/ReportWizardController","Sage/Reporting/Enumerations","Sage/Utility/Jobs","Sage/Data/SDataServiceRegistry"],function(_1df2,_1df3,_1df4,_1df5,_1df6,_1df7,_1df8,_1df9){Sage.namespace("Sage.MainView.ReportMgr.ReportManagerActions");dojo.mixin(Sage.MainView.ReportMgr.ReportManagerActions,{runReport:function(){this._runReport(_1df7.ExecutionType.OnDemand);},deleteReport:function(){var key=this._getSelectedId();if(!key){_1df3.showInfo(_1df4.txtSelectRecord);}else{var self=this;_1df3.raiseQueryDialog("Infor CRM",_1df5.substitute(_1df4.confirm_Deletion,[_1df4.confirm_Report]),function(_1dfa){if(_1dfa){var _1dfb=_1df8.getCurrentGroupId();if(self._deleteReport(key)){_1df8.refreshList(_1dfb);}}},_1df4.txtYes,_1df4.txtNo);}},scheduleReport:function(){this._runReport(_1df7.ExecutionType.Scheduled);},editSchedule:function(){var key=this._getSelectedId();if(!key){_1df3.showInfo(_1df4.txtSelectRecord);}else{var _1dfc={triggerId:key};_1df6.startWizard(_1dfc);}},deleteSchedule:function(){var key=this._getSelectedId();if(!key){_1df3.showInfo(_1df4.txtSelectRecord);}else{_1df3.raiseQueryDialog("Infor CRM",_1df5.substitute(_1df4.confirm_Deletion,[_1df4.confirm_Schedule]),function(_1dfd){if(_1dfd){var _1dfe=_1df8.getCurrentGroupId();var _1dff=Sage.Services.getService("JobService");var def=new dojo.Deferred();if(_1dff.deleteScheduledJob(key,def)){def.then(function(){_1df8.refreshList(_1dfe);},function(error){console.error("errback: %o",error);});}}},_1df4.txtYes,_1df4.txtNo);}},deleteHistory:function(){var _1e00=Sage.Utility.getSelectionInfo();if(_1e00.selectedIds.length<=0){_1df3.showInfo(_1df4.txtInvalidSelectionCount);}else{var self=this;_1df3.raiseQueryDialog("Infor CRM",_1df5.substitute(_1df4.confirm_Deletion,[_1df4.confirm_ReportHistory]),function(_1e01){if(_1e01){self._deleteHistory();}},_1df4.txtYes,_1df4.txtNo);}},_getSelectedId:function(){var _1e02=Sage.Utility.getSelectionInfo();if(_1e02){if(_1e02.selectedIds.length===1){return _1e02.selectedIds[0];}}return null;},_runReport:function(_1e03){var key=this._getSelectedId();if(!key){_1df3.showInfo(_1df4.txtSelectRecord);}else{var _1e04=dijit.byId("list");var _1e05=_1e04.get("list").selection.getFirstSelected().displayName;var _1e06={reportId:key,reportDisplayName:_1e05,reportOptions:{wizardOptions:{},scheduleOptions:{executionType:_1e03},exportOptions:{},conditions:[],parameterValues:[]}};_1df6.startWizard(_1e06);}},_getCurrentGroupId:function(){var svc=Sage.Services.getService("ClientGroupContext");var _1e07=svc.getContext();return _1e07.CurrentGroupID;},_deleteReport:function(key){var _1e08=_1df9.getSDataService("system",false,true,false);var _1e09=new Sage.SData.Client.SDataApplicationRequest(_1e08);_1e09.setResourceKind(_1df5.substitute("reports('${0}')",[key]));var sUrl=_1e09.uri;dojo.xhrDelete({handleAs:"json",url:sUrl,error:function(xhr){_1df3.showError(_1df5.substitute(_1df4.txtErrorDeleteReport,[xhr.status]));return false;}});return true;},_getCurrentUserId:function(){var _1e0a=null;var _1e0b=Sage.Services.getService("ClientContextService");if(_1e0b){if(_1e0b.containsKey("userID")){_1e0a=_1e0b.getValue("userID");}}return _1e0a;},_deleteHistory:function(){var _1e0c=Sage.Utility.getSelectionInfo();var _1e0d=[{"name":"EntityName","value":"ReportHistory"},{"name":"SelectedIds","value":(_1e0c.selectionCount>0)?_1e0c.selectedIds.join(",")||"":""}];var _1e0e=_1df8.getCurrentGroupId();var _1e0f={closable:true,key:"Sage.SalesLogix.BusinessRules.Jobs.DeleteEntityJob",descriptor:_1df4.txtDeleteHistory,user:{$key:this._getCurrentUserId()},parameters:_1e0d,infoMessage:_1df4.txtDeleteHistory,title:_1df4.txtDeleteTitle,complete:function(_1e10){_1df8.refreshList(_1e0e);},failure:function(_1e11){_1df3.showError(dojo.string.substitute(_1df4.deleteJobError,[_1e11.statusText]));}};_1df8.triggerJobAndDisplayProgressDialog(_1e0f);}});return Sage.MainView.ReportMgr.ReportManagerActions;});},"Sage/MainView/EntityManager":function(){define(["Sage/UI/SDataMainViewConfigurationProvider","Sage/MainView/EntityMgr/EntityManagerGroupContextService","Sage/MainView/EntityMgr/EntityFilterConfigurationProvider","dojo/_base/declare"],function(_1e12,_1e13,_1e14,_1e15){var _1e16=_1e15("Sage.MainView.EntityManager",_1e12,{_currentTabId:false,_currentTabDescription:false,_mainViewName:"EntityManager",store:false,constructor:function(_1e17){var _1e18=Sage.Services.getService("ClientGroupContext");if(!_1e18||_1e18.declaredClass!=="Sage.MainView.EntityMgr.EntityManagerGroupContextService"){_1e18=new _1e13();Sage.Services.removeService("ClientGroupContext");Sage.Services.addService("ClientGroupContext",_1e18);}var ctx=_1e18.getContext();this._currentTabId=ctx.CurrentGroupID;this._currentTabDescription=ctx.CurrentName;this.titlePaneConfiguration={tabs:this._getTabsConfig(),menu:this._getMenuConfig(),titleFmtString:"${0}"};},_getListPanelConfig:function(){var _1e19=Sage.Services.getService("ClientGroupContext");if(_1e19){this.listPanelConfiguration=_1e19.getCurrentListConfig();this.store=this.listPanelConfiguration.list.store;this.service=this.listPanelConfiguration.list.store.service;}return this.listPanelConfiguration;},requestConfiguration:function(_1e1a){if(_1e1a.success){_1e1a.success.call(_1e1a.scope||this,this._getListPanelConfig(),this);}},requestTitlePaneConfiguration:function(_1e1b){if(_1e1b.success){_1e1b.success.call(_1e1b.scope||this,this.titlePaneConfiguration,this);}},_getTabsConfig:function(){var _1e1c={store:false,selectedTabId:this._currentTabId,tabKeyProperty:"key",tabNameProperty:"descriptor",fetchParams:{},staticTabs:this._getStaticTabs(),onTabSelect:dojo.hitch(this,"_onTabSelected"),onTabClose:false,showTabContextMenus:false};return _1e1c;},_getStaticTabs:function(){var _1e1d=Sage.Services.getService("ClientGroupContext");return _1e1d.getStaticTabs();},_onTabSelected:function(tab){var _1e1e=Sage.Services.getService("ClientGroupContext");if(_1e1e){var ctx=_1e1e.getContext();var id=tab.id||tab;if(ctx.CurrentGroupID===id){return;}_1e1e._currentListConfiguration=null;_1e1e.setCurrentGroup(id,tab.title);}},_onCurrentGroupChanged:function(args){var _1e1f=args.current;this._currentTabId=_1e1f.CurrentGroupID;this._currentTabDescription=_1e1f.CurrentName;if(dijit.byId("GroupTabs").selectedChildWidget.id!==_1e1f.CurrentGroupID){dijit.byId("GroupTabs").selectChild(_1e1f.CurrentGroupID);}},_getMenuConfig:function(){return false;}});return _1e16;});},"Sage/MainView/EntityMgr/EntityManagerGroupContextService":function(){define(["Sage/Groups/BaseGroupContextService","dojo/string","Sage/Data/SDataServiceRegistry","dojo/_base/lang","Sage/MainView/EntityMgr/EntityListPanelConfig","dojo/_base/declare","dojo/i18n!./nls/EntityManagerGroupContextService","Sage/Services/UserOptions"],function(_1e20,_1e21,_1e22,lang,_1e23,_1e24,_1e25){var _1e26=_1e24("Sage.MainView.EntityMgr.EntityManagerGroupContextService",_1e20,{_currentContext:null,_currentTabId:false,_currentTabDescription:false,_currentListConfiguration:false,defaultTabId:"entity",staticTabsConfiguration:[{key:"entity",descriptor:"Entities",keyField:"$key",configProviderType:_1e23,entityName:"Entities",isNonEntityBased:true}],_configsHash:false,_LOCALSTORE_NAMESPACE:"EntityManagerView",_STORE_KEY_LASTAB:"_LASTTAB",_ENTITY_FILTERS_KEY:"_ENTITYFILTERS",_tabNameCache:{},constructor:function(){this.inherited(arguments);this._currentContext={};dojo.mixin(this._currentContext,this._emptyContext);lang.mixin(this,_1e25);this._currentContext.CurrentTableKeyField="$key";this._currentContext.AppliedFilterInfo={};this._currentContext.CurrentFamily=null;this._currentContext.notGroupBased=true;this.setContext(this._getDefaultTabId(),"default");this.unsubscribeConnects();this._subscribes=[];this._subscribes.push(dojo.subscribe(_1e21.substitute("/ui/filters/default/refresh"),this,this._onDefaultFilterRefresh));this._onDefaultFilterLoad();},getStaticTabs:function(){return this.staticTabsConfiguration;},setCurrentGroup:function(id,name,_1e27){if(this._currentContext.CurrentGroupID===id){return;}this._currentContext.CurrentTableKeyField=_1e27?_1e27:this.getKeyField(id);this.setContext(id,name?name:this.getGroupName(id));this.onCurrentGroupChanged({current:this._currentContext});},getContext:function(){return this._currentContext;},_ensureConfigsHash:function(){if(!this._configsHash){var hash={};for(var i=0;i<this.staticTabsConfiguration.length;i++){var cfg=this.staticTabsConfiguration[i];hash[cfg.key]=lang.mixin(cfg,{instance:false});}this.configsHash=hash;}},_setListConfig:function(){this._ensureConfigsHash();var tabId=this._currentContext.CurrentGroupID;var _1e28=(this.configsHash.hasOwnProperty(tabId))?this.configsHash[tabId]:this.configsHash["groups"];if(!_1e28.instance){_1e28.instance=new _1e28.configProviderType();}else{_1e28.instance.rebuild();}this._currentListConfiguration=_1e28.instance;this._currentListConfiguration.isNonEntityBased=_1e28.isNonEntityBased;this._currentListConfiguration.entityName=_1e28.entityName;},getCurrentListConfig:function(){this._setListConfig();return this._currentListConfiguration;},getKeyField:function(tabid){this._ensureConfigsHash();var _1e29="$key";if(this.configsHash[tabid]){_1e29=this.configsHash[tabid]["keyField"]||"$key";}return _1e29;},getGroupName:function(tabid){this._ensureConfigsHash();var name="default";if(this.configsHash[tabid]){name=this.configsHash[tabid]["descriptor"]||"default";}return name;},onCurrentGroupChanged:function(_1e2a){this._clearFilterManager();var self=this;this._onDefaultFilterLoad(function(){dojo.publish("/group/context/changed",[_1e2a,self]);self._saveToLocalStorage(self._STORE_KEY_LASTAB,self.getContext().CurrentGroupID);});},_clearFilterManager:function(){dojo.publish("/ui/filters/default/apply",[{},{},this]);},setContext:function(id,name){this._currentContext.CurrentGroupID=id;this._currentContext.CurrentName=name;this._currentContext.AppliedFilterInfo={};this._currentContext.filtersForEntity="";this._setListConfig();this._currentContext.CurrentEntity=this._currentListConfiguration.entityName;this._currentContext.isNonEntityBased=this._currentListConfiguration.isNonEntityBased;this._isRetrievingContext=false;this.onContextSet(this._currentContext);},isContextRequired:function(){return !(Sage&&Sage.Groups&&Sage.Groups._groupContext);},_onDefaultFilterLoad:function(_1e2b){this._requestFilters(_1e2b);},_requestFilters:function(_1e2c){var _1e2d=[{"id":"DisplayName","propertyName":"$descriptor","$descriptor":"DisplayName","propertyDataTypeId":"ccc0f01d-7ba5-408e-8526-a3f942354b3a","displayName":this.filterDisplayName,"filterName":"DisplayName","filterType":"lookupFilter","characters":0},{"id":"EntityName","propertyName":"name","$descriptor":"EntityName","propertyDataTypeId":"ccc0f01d-7ba5-408e-8526-a3f942354b3a","displayName":this.filterName,"filterName":"EntityName","filterType":"lookupFilter","characters":0},{"id":"ModifiedDate","displayName":this.filterModifiedDate,"filterName":"ModifiedDate","propertyName":"$updated","$descriptor":"ModifiedDate","filterType":"rangeFilter","propertyDataTypeId":"1f08f2eb-87c8-443b-a7c2-a51f590923f5","characters":0},{"id":"HasMeasure","displayName":this.filterHasMetric,"filterName":"HasMeasure","propertyName":"filters.filterType","$descriptor":"HasMeasure","filterType":"checkedList","propertyDataTypeId":"ccc0f01d-7ba5-408e-8526-a3f942354b3a","characters":0},{"id":"HasFilter","displayName":this.filterHasFilter,"filterName":"HasFilter","propertyName":"filters.filterType","$descriptor":"HasFilter","filterType":"checkedList","propertyDataTypeId":"ccc0f01d-7ba5-408e-8526-a3f942354b3a","characters":0}];var _1e2e=Sage.Services.getService("UserOptions");this._indirectSelection="false";if(_1e2e&&_1e2e.get){_1e2e.get("FilterSearchCriteria","EntityManager",lang.hitch(this,function(data){if(data&&data.value){this._currentContext.AppliedFilterInfo.applied=JSON.parse(data&&data.value);}this._currentContext.AppliedFilterInfo.definitionSet=_1e2d;}),null,this,false);}},_onDefaultFilterRefresh:function(_1e2f,_1e30,_1e31){var _1e32=dojo.toJson(_1e31.createEntityManagerValueSet());var _1e33=Sage.Services.getService("UserOptions");if(_1e33){_1e33.set("FilterSearchCriteria","EntityManager",_1e32,null,null,this);}},_saveToLocalStorage:function(key,value,_1e34){this._saveToSessionStorage(key,value,_1e34);},_getFromLocalStorage:function(key,_1e35){return this._getFromSessionStorage(key,_1e35);},_getFromSessionStorage:function(key,_1e36){if(!_1e36){_1e36=this._LOCALSTORE_NAMESPACE;}var _1e37=_1e36+"_"+key;return sessionStorage.getItem(_1e37);},_saveToSessionStorage:function(key,value,_1e38){if(!_1e38){_1e38=this._LOCALSTORE_NAMESPACE;}var _1e39=_1e38+"_"+key;sessionStorage.setItem(_1e39,value);},_getDefaultTabId:function(){var _1e3a=this._getUrlTabId();if(_1e3a){_1e3a=this._validateTabId(_1e3a);if(_1e3a){return _1e3a;}}var _1e3b=this._getFromLocalStorage(this._STORE_KEY_LASTAB);if(_1e3b){this.defaultTabId=_1e3b;}else{}if(!this._configsHash){for(var i=0;i<this.staticTabsConfiguration;i++){if(this.defaultTabId===this.staticTabsConfiguration[i]["key"]){return this.defaultTabId;}}}return this.defaultTabId;},_getUrlTabId:function(){var tabId=false,_1e3c="[\\?&]tabId=([^%#]*)",regex=new RegExp(_1e3c),_1e3d=regex.exec(window.location.href);if(_1e3d!==null){tabId=_1e3d[1];}return tabId;},_validateTabId:function(tabId){if(tabId){for(var i=0;i<this.staticTabsConfiguration.length;i++){var cfg=this.staticTabsConfiguration[i];if(cfg.key.toUpperCase()===tabId.toUpperCase()){return cfg.key;}}}return null;}});if(!Sage.Services.hasService("ClientGroupContext")){Sage.Services.addService("ClientGroupContext",new _1e26());}else{var _1e3e=Sage.Services.getService("ClientGroupContext");if(_1e3e.declaredClass!=="Sage.MainView.EntityMgr.EntityManagerGroupContextService"){_1e3e.unsubscribeConnects();Sage.Services.removeService("ClientGroupContext");Sage.Services.addService("ClientGroupContext",new _1e26());}}return _1e26;});},"Sage/MainView/EntityMgr/EntityListPanelConfig":function(){define(["Sage/MainView/_BaseListPanelConfig","Sage/MainView/EntityMgr/EntitySDataSummaryFormatterScope","dojo/_base/declare","dojo/i18n!./nls/EntityListPanelConfig","Sage/Data/SDataServiceRegistry","Sage/UI/Columns/DateTime","dojo/_base/lang","dojo/i18n!./templates/nls/EntityListSummary","dojo/i18n!./templates/nls/EntityDetailSummary","Sage/MainView/EntityMgr/EntityManagerFormatter"],function(_1e3f,_1e40,_1e41,_1e42,_1e43,_1e44,_1e45,_1e46,_1e47,_1e48){var _1e49=_1e41("Sage.MainView.EntityMgr.EntityListPanelConfig",[_1e3f],{keyField:"$key",_listId:"Entity",_resourceKind:"entities",_contextMenu:"EntityManagerListContextMenu",_currentListContextSubMenu:"EntityListContextMenu",constructor:function(){_1e45.mixin(this,_1e42);this._service="";var svc=Sage.Services.getService("RoleSecurityService");if(svc){if(svc.hasAccess("Administration/EntityManager/Entities/View")){this._service=_1e43.getSDataService("metadata");}else{return;}}this._structure=this._getStructure();this._select=this._getSelect();this._sort=this._getSort();this._where=this._getWhere();this._include=this._getInclude();this._store=this._getStore();this.list=this._getListConfig();this.detail=this._getDetailConfig();this.toolBar=this._getToolBars();this.list.selectionMode="single";dojo.subscribe("/sage/ui/grid/gridLoadComplete",function(){var _1e4a=dijit.byId("list");if(_1e4a){var _1e4b=_1e4a._listGrid.selection.getSelected();if(_1e4b.length===0){_1e4a._onSelectedInList(0);_1e4a._listGrid.selection.setSelected(0,true);}}});},_getStructure:function(){return [{field:"$descriptor",name:this.colNameEntityDisplayName,width:"100px"},{field:"name",name:this.colNameEntityName,width:"100px"},{field:"tableName",name:this.colNameEntityTableName,width:"100px",formatter:Sage.MainView.EntityMgr.EntityManagerFormatter.formatProperCaseValue},{field:"$updated",name:this.colNameModifyDate,width:"100px",type:_1e44},{field:"properties",name:this.colNamePropertyCount,width:"50px",formatter:Sage.MainView.EntityMgr.EntityManagerFormatter.formatCountProps,nosort:true},{field:"filters",name:this.colNameFilterCount,width:"50px",formatter:Sage.MainView.EntityMgr.EntityManagerFormatter.formatCountFilter,nosort:true},{field:"filters",name:this.colNameMetricCount,width:"50px",formatter:Sage.MainView.EntityMgr.EntityManagerFormatter.formatCountMetric,nosort:true},{field:"package",name:this.colNamePackage,width:"100px",formatter:Sage.MainView.EntityMgr.EntityManagerFormatter.GetKey,nosort:true}];},_getSelect:function(){return ["$descriptor","name","tableName","properties","filters","package","filters/filterType"];},_getWhere:function(){return "";},_getSort:function(){var sort=[{attribute:"$descriptor",descending:false}];return sort;},_getInclude:function(){var _1e4c=[];return _1e4c;},_getSummaryListRequestConfig:function(){var _1e4d={resourceKind:this._resourceKind,serviceName:"metadata",keyField:"$key",include:[],sort:this._getSort(),useBatchRequest:false};return _1e4d;},_getFormatterScope:function(){var _1e4e=this._getSummaryListRequestConfig();var _1e4f=new _1e40({templateLocation:"MainView/EntityMgr/templates/EntityListSummary.html",resetDataManager:true,requestConfiguration:_1e4e});return _1e4f;},_getSummaryDetailRequestConfig:function(){var _1e50={resourceKind:this._resourceKind,serviceName:"metadata",keyField:"$key",select:["$key","filterName","displayName","propertyName","filterType","analyticsAvailable","$updated","details"],sort:[{attribute:"filterName",descending:true}],include:[],useBatchRequest:false};return _1e50;},_getDetailConfig:function(){var _1e51=this._getFormatterScope();var _1e52=this._getSummaryDetailRequestConfig();var _1e53={resourceKind:this._resourceKind,requestConfiguration:_1e52};return _1e53;},_getToolBars:function(){var _1e54={items:[]};return _1e54;}});return _1e49;});},"Sage/MainView/EntityMgr/EntitySDataSummaryFormatterScope":function(){define(["Sage/UI/SummaryContainer","dojo/i18n","Sage/UI/SummaryFormatterScope","Sage/MainView/EntityMgr/EntitySDataDetailViewDataManager","Sage/UI/Controls/SummaryAggregate","dojo/_base/declare"],function(_1e55,i18n,_1e56,_1e57,_1e58,_1e59){var _1e5a=_1e59("Sage.MainView.EntityMgr.EntitySDataSummaryFormatterScope",[_1e56],{constructor:function(args){dojo.mixin(this,args);this.widgets=[];this.preFetchResources();this._setupDataManager();},_setupDataManager:function(){this.dataManager=new _1e57(this.requestConfiguration);if(Sage.Services.hasService("SummaryViewDataManager")){Sage.Services.removeService("SummaryViewDataManager");}Sage.Services.addService("SummaryViewDataManager",this.dataManager);}});return _1e5a;});},"Sage/MainView/EntityMgr/EntitySDataDetailViewDataManager":function(){define(["Sage/Data/SDataServiceRegistry","Sage/Data/SDataStore","dojo/_base/declare","dojo/_base/lang","Sage/MainView/EntityMgr/EntityDetailTabManager"],function(_1e5b,_1e5c,_1e5d,lang,_1e5e){var _1e5f=_1e5d("Sage.MainView.EntityMgr.ReportsSDataDetailRequestQueue",null,{select:[],resourceKind:"",fetching:false,include:[],service:null,detailTabManager:null,constructor:function(_1e60){lang.mixin(this,_1e60);this.requestHash={};this.fetching=false;this.service=Sage.Data.SDataServiceRegistry.getSDataService("metadata");},add:function(_1e61,_1e62){var _1e63=this.requestHash[_1e61];if((_1e63)&&(_1e63.id!==_1e62.id)){if(!_1e63.duplicates){_1e63.duplicates=[];}var found=false;for(var i=0;i<_1e63.duplicates.length;i++){if(_1e63.duplicates[i].context.id===_1e62.id){found=true;}}if(!found){_1e63.duplicates.push({id:_1e62.id,context:_1e62});}}else{this.requestHash[_1e61]=_1e62;}},send:function(_1e64,_1e65){this.fetching=true;var _1e66=this;var _1e67=new Sage.SData.Client.SDataSingleResourceRequest(this.service);_1e67.setResourceKind(this.resourceKind);for(var id in this.requestHash){_1e67.setResourceSelector("'"+id+"'");}_1e67.setQueryArg("include",this.include.join(","));_1e67.read({success:lang.hitch(_1e65,_1e64,_1e66),failure:lang.hitch(this,this.requestFailed,_1e66)});},requestFailed:function(a,b,c){console.error("Request failed %o %o %o",a,b,c);}});var _1e68=_1e5d("Sage.MainView.EntityMgr.EntitySDataDetailViewDataManager",null,{keyField:"$key",entity:null,constructor:function(){this.queue=new _1e5f();this.requestTimeout=false;},requestDataNoWait:function(_1e69,_1e6a,_1e6b){if(this.entity===_1e69){var _1e6c=dijit.byId("tabContainer");if(_1e6c){_1e6c.resize();}return;}this.entity=_1e69;var _1e6d=new _1e5f();if(_1e6b.keyField){this.keyField=_1e6b.keyField;}_1e6d.select=_1e6b.select;_1e6d.resourceKind=_1e6b.resourceKind;_1e6d.serviceName=_1e6b.serviceName;_1e6d.include=_1e6b.include;_1e6d.useBatchRequest=_1e6b.useBatchRequest;if(_1e6b.expandRecurrences!==null){_1e6d.expandRecurrences=_1e6b.expandRecurrences;}_1e6d.add(_1e69,_1e6a);_1e6d.send(this.receiveData,this);},receiveData:function(_1e6e,data){if(this.detailTabManager){this.detailTabManager.destroyRecursive();}var _1e6f=dijit.byId("Sage_UI_SummaryDetailPane_0");this.detailTabManager=new _1e5e(data);dojo.place(this.detailTabManager.domNode,_1e6f.domNode,"only");var _1e70=dijit.byId("tabContainer");if(_1e70){_1e70.startup();_1e70.resize();_1e70.resize();}}});return _1e68;});},"Sage/MainView/EntityMgr/EntityDetailTabManager":function(){define(["dijit/_Widget","Sage/_Templated","dojo/text!./templates/EntityDetailTabManager.html","dojo/_base/declare","Sage/MainView/EntityMgr/EntityDetailContentFilterGrid","dojo/dom-style","dojo/i18n!./nls/_BaseEntityDetailContent","Sage/MainView/EntityMgr/EntityFilterUtility","dijit/Tooltip","dijit/popup","dojo/on","dojo/dom","dojo/mouse"],function(_1e71,_1e72,_1e73,_1e74,_1e75,_1e76,_1e77,_1e78,_1e79,popup,on,dom,mouse){var _1e7a=_1e74("Sage.MainView.EntityMgr.EntityDetailTabManager",[_1e71,_1e72],{workspace:"TabWorkspace",widgetsInTemplate:true,widgetTemplate:new Simplate(eval(_1e73)),filterGrid:false,metricGrid:false,propertiesGrid:false,calculatedFieldsGrid:false,entityGrid:false,mainListItemSelected:"",edtmdataStore:false,filterUtility:false,constructor:function(_1e7b){if(dijit.byId("tabContainer_tablist_menuBtn")&&dijit.byId("tabContainer_tablist_menuBtn").destroy){dijit.byId("tabContainer_tablist_menuBtn").destroy();}if(dijit.byId("tabContainer_tablist_leftBtn")&&dijit.byId("tabContainer_tablist_leftBtn").destroy){dijit.byId("tabContainer_tablist_leftBtn").destroy();}if(dijit.byId("tabContainer_tablist_filterDetailGridPane")&&dijit.byId("tabContainer_tablist_filterDetailGridPane").destroy){dijit.byId("tabContainer_tablist_filterDetailGridPane").destroy();}if(dijit.byId("tabContainer_tablist_metricDetailGridPane")&&dijit.byId("tabContainer_tablist_metricDetailGridPane").destroy){dijit.byId("tabContainer_tablist_metricDetailGridPane").destroy();}if(dijit.byId("tabContainer_tablist_rightBtn")&&dijit.byId("tabContainer_tablist_rightBtn").destroy){dijit.byId("tabContainer_tablist_rightBtn").destroy();}if(dijit.byId("filterGrid_Account_addFilter")&&dijit.byId("filterGrid_Account_addFilter").destroy){dijit.byId("filterGrid_Account_addFilter").destroy();}if(dijit.byId("filterGrid_Account_editFilter")&&dijit.byId("filterGrid_Account_editFilter").destroy){dijit.byId("filterGrid_Account_editFilter").destroy();}if(dijit.byId("filterGrid_Account_removeFilter")&&dijit.byId("filterGrid_Account_removeFilter").destroy){dijit.byId("filterGrid_Account_removeFilter").destroy();}if(dijit.byId("filterGrid_Account_helpFilter")&&dijit.byId("filterGrid_Account_helpFilter").destroy){dijit.byId("filterGrid_Account_helpFilter").destroy();}if(dijit.byId("filters_Account")&&dijit.byId("filters_Account").destroy){dijit.byId("filters_Account").destroy();}if(dijit.byId("filters_Account_HeaderBar")&&dijit.byId("filters_Account_HeaderBar").destroy){dijit.byId("filters_Account_HeaderBar").destroy();}if(dijit.byId("filters_Account_HeaderBar_splitter")&&dijit.byId("filters_Account_HeaderBar_splitter").destroy){dijit.byId("filters_Account_HeaderBar_splitter").destroy();}if(dijit.byId("tp1f")&&dijit.byId("tp1f").destroy){dijit.byId("tp1f").destroy();}if(dijit.byId("tp2m")&&dijit.byId("tp2m").destroy){dijit.byId("tp2m").destroy();}if(dijit.byId("tabContainer")&&dijit.byId("tabContainer").destroy){dijit.byId("tabContainer").destroy();}if(dijit.byId("filterDetailGridPane")&&dijit.byId("filterDetailGridPane").destroy){dijit.byId("filterDetailGridPane").destroy();}if(dijit.byId("metricDetailGridPane")&&dijit.byId("metricDetailGridPane").destroy){dijit.byId("metricDetailGridPane").destroy();}if(dijit.byId("filters")&&dijit.byId("filters").destroy){dijit.byId("filters").destroy();}if(dijit.byId("Metrics")&&dijit.byId("Metrics").destroy){dijit.byId("Metrics").destroy();}this.mainListItemSelected=_1e7b;this.filterUtility=new _1e78();this.filterUtility.getSchemasInformationFromSData();this.filterUtility.getPropertiesAssociatedWithFilters(_1e7b);this.filterUtility.getSpecialValues();this.filterGrid=new _1e75({id:"filterGrid",entityName:_1e7b.name});this.metricGrid=new _1e75({id:"metricGrid",entityName:_1e7b.name});},postCreate:function(){var _1e7c=this.$descriptor;if(this.filterGrid){dijit.byId("filterDetailGridPane").set("title",_1e77.FilterTabTitle);dojo.connect(dijit.byId("filterDetailGridPane"),"onShow",dojo.partial(this.loadfilters,this));window.setTimeout(function(){dijit.byId("tabContainer_tablist_filterDetailGridPane").set("title",_1e77.filtersFor+" "+_1e7c);});}if(this.metricGrid){dijit.byId("metricDetailGridPane").set("title",_1e77.MetricTabTitle);dojo.connect(dijit.byId("metricDetailGridPane"),"onShow",dojo.partial(this.loadmetrics,this));window.setTimeout(function(){dijit.byId("tabContainer_tablist_metricDetailGridPane").set("title",_1e77.metricsFor+" "+_1e7c);});}if(this.propertiesGrid){dijit.byId("entitiesDetailGridPane").set("title",_1e77.PropertyTabTitle);dojo.connect(dijit.byId("entitiesDetailGridPane"),"onShow",dojo.partial(this.loadentity,this.mainListItemSelected));}if(this.calculatedFieldsGrid){dijit.byId("calcFieldsDetailGridPane").set("title",_1e77.CalcFieldTabTitle);dojo.connect(dijit.byId("calcFieldsDetailGridPane"),"onShow",dojo.partial(this.loadcalculatedFields,this.mainListItemSelected));}if(this.entityGrid){dijit.byId("propertiesDetailGridPane").set("title",_1e77.EntityTabTitle);dojo.connect(dijit.byId("propertiesDetailGridPane"),"onShow",dojo.partial(this.loadproperties,this.mainListItemSelected));}},loadfilters:function(_1e7d){_1e7d.filterGrid.setUtility(_1e7d.filterUtility);_1e7d.filterGrid.placeAt(this.containerNode);_1e7d.filterGrid._where="filterType ne 'analyticsMetric'";_1e7d.filterGrid.onOpen(this.id,"filters",_1e7d.mainListItemSelected);_1e7d.filterGrid.startup();},loadmetrics:function(_1e7e){_1e7e.metricGrid.setUtility(_1e7e.filterUtility);_1e7e.metricGrid.placeAt(this.containerNode);_1e7e.metricGrid._where="filterType eq 'analyticsMetric'";_1e7e.metricGrid.onOpen(this.id,"metrics",_1e7e.mainListItemSelected);_1e7e.metricGrid.startup();},loadproperties:function(_1e7f){this.propertiesGrid.onOpen(this.parentListName,this.currentTabName);dojo.place(this.propertiesGrid.domNode,this.detailproperties_Grid,"only");},loadcalculatedFields:function(_1e80){this.calcFieldsGrid.onOpen(this.parentListName,this.currentTabName);dojo.place(this.calcFieldsGrid.domNode,this.detailCalcFields_Grid,"only");},loadentity:function(_1e81){this.entityGrid.onOpen(this.parentListName,this.currentTabName);dojo.place(this.entityGrid.domNode,this.detailsEntities_Grid,"only");}});return _1e7a;});},"Sage/MainView/EntityMgr/EntityDetailContentFilterGrid":function(){define(["dijit/_Widget","Sage/_Templated","Sage/UI/EditableGrid","Sage/Utility","dojo/string","dojo/_base/declare","dojo/text!./templates/DetailTabContentGrid.html","Sage/UI/Columns/DateTime","Sage/UI/Columns/Boolean","dojo/i18n!./nls/_BaseEntityDetailContent","dojo/dom-style","Sage/MainView/EntityMgr/AddEditEntityFilter/AddEditFiltersDialog","dgrid/Grid","dgrid/Selection","dgrid/OnDemandGrid","dgrid/Keyboard","dojo/store/Memory","dgrid/extensions/ColumnHider","dgrid/editor","Sage/UI/ImageButton","Sage/Data/SDataServiceRegistry","dojo/_base/array","Sage/UI/Dialogs","dojo/dom-class"],function(_1e82,_1e83,_1e84,_1e85,_1e86,_1e87,_1e88,_1e89,_1e8a,_1e8b,_1e8c,_1e8d,dGrid,_1e8e,_1e8f,_1e90,_1e91,_1e92,_1e93,_1e94,_1e95,_1e96,_1e97,_1e98){var _1e99=_1e87("Sage.MainView.EntityMgr.EntityDetailContentFilterGrid",[_1e82,_1e83],{_dataRequested:false,widgetsInTemplate:true,isOpen:false,entityName:"",grid:null,dataStore:null,widgetTemplate:new Simplate(eval(_1e88)),service:null,filterUtility:null,content:false,_where:false,containerid:false,entityDisplayName:false,constructor:function(obj){this.service=Sage.Data.SDataServiceRegistry.getSDataService("metadata",false,true,false);if(obj&&obj.id){this.containerid=obj.id;if(dijit.byId(obj.id)){if(dijit.byId(obj.id).destroy){dijit.byId(obj.id).destroy(true);}}}},setUtility:function(_1e9a){this.filterUtility=_1e9a;},onOpen:function(tabId,_1e9b,_1e9c){this.isOpen=true;this.entityName=_1e9c.name;this.entityDisplayName=_1e9c.$descriptor;this._createToolbar();this._createDetailsGrid();},getSelectedItem:function(){for(var i=0;i<this.grid.store.data.length;i++){var ele=this.grid.selection[this.grid.store.data[i]["$key"]];if(ele){return this.grid.store.data[i];}}_1e97.showWarning(_1e8b.lblWarning,"Infor CRM");return null;},_createToolbar:function(){var _1e9d=false;if(dojo.byId(this.dojoAttachPoint+this.id+"_"+this.entityName+"_helpFilter")){_1e9d=true;}if(_1e9d===false){var svc=Sage.Services.getService("RoleSecurityService");var _1e9e=[],_1e9f;if(svc){if(svc.hasAccess("Administration/EntityManager/Filters/Add")){var add=new _1e94({icon:"~/ImageResource.axd?scope=global&type=Global_Images&key=plus_16x16",tooltip:this.id.search("metric")<0?_1e8b.FilterGridAdd:_1e8b.MetricGridAdd,onClick:dojo.partial(this.addFilter,this),id:this.dojoAttachPoint+this.id+"_"+this.entityName+"_addFilter",scope:this});dojo.place(add.domNode,this.filterGridToolbarContainer,"1");}if(svc.hasAccess("Administration/EntityManager/Filters/Edit")){_1e9e.push(_1e9f);var edit=new _1e94({icon:"~/ImageResource.axd?scope=global&type=Global_Images&key=Edit_Item_16x16",tooltip:this.id.search("metric")<0?_1e8b.FilterGridEdit:_1e8b.MetricGridEdit,onClick:dojo.partial(this.editFilter,this),id:this.dojoAttachPoint+this.id+"_"+this.entityName+"_editFilter",scope:this});dojo.place(edit.domNode,this.filterGridToolbarContainer,"1");}if(svc.hasAccess("Administration/EntityManager/Filters/Delete")){var _1ea0=new _1e94({icon:"~/ImageResource.axd?scope=global&type=Global_Images&key=Delete_16x16",tooltip:this.id.search("metric")<0?_1e8b.FilterGridRemove:_1e8b.MetricGridRemove,onClick:dojo.partial(this.removeFilter,this),id:this.dojoAttachPoint+this.id+"_"+this.entityName+"_removeFilter",});dojo.place(_1ea0.domNode,this.filterGridToolbarContainer,"1");}}var help=new _1e94({icon:"~/ImageResource.axd?scope=global&type=Global_Images&key=Help_16x16",tooltip:_1e8b.GridHelp,onClick:this._showHelp,id:this.dojoAttachPoint+this.id+"_"+this.entityName+"_helpFilter",});dojo.place(help.domNode,this.filterGridToolbarContainer,"1");this.filterGridToolbarContainerLabel.innerHTML=(this.id.search("metric")<0?_1e8b.filtersFor:_1e8b.metricsFor)+" "+this.entityDisplayName;}},_createDetailsGrid:function(_1ea1,_1ea2){var self=_1ea2||this;var _1ea3=new Sage.SData.Client.SDataResourcePropertyRequest(self.service).setResourceKind("entities("+"'"+self.entityName+"'"+")/filters").setQueryArg("_expandSpecialRanges","false").setQueryArg("where",dojo.string.substitute("${0}",[self._where])).setQueryArg("select","$key,filterName,displayName,propertyName,filterType,analyticsAvailable,$updated,details").setQueryArg("format","json").setQueryArg("Count","200");_1ea3.readFeed({success:function(_1ea4){if(_1ea1){self.grid.set("store",dojo.data.ObjectStore(dojo.store.Memory({idProperty:"$key",data:_1ea4.$resources})));}else{self._loadDetailsGrid(dojo.data.ObjectStore(dojo.store.Memory({idProperty:"$key",data:_1ea4.$resources})));}},error:function(error){if(error){console.error(error);}},scope:this,async:true});},_createCustomchkBox:function(){var _1ea5=_1e87("Sage.MainView.EntityMgr.AddEditEntityFilter.chkBox",Sage.UI.Controls.CheckBox,{shouldPublishMarkDirty:false,readonly:true,disabled:true,constructor:function(){},postCreate:function(){if(this.hotKey!==""){this.focusNode.accessKey=this.hotKey;}this.connect(this,"onChange",this.onChanged);},_onClick:function(){}});return _1ea5;},_loadDetailsGrid:function(_1ea6){var _1ea7=[{field:"$key",label:"Id",editable:false,hidden:true,unhidable:true},{field:"displayName",label:_1e8b.FilterGridColumnDisplay,editable:false,hidden:false,unhidable:true},{field:"filterName",label:this.id.search("metric")>=0?_1e8b.MetricGridColumnMetric:_1e8b.FilterGridColumnFilter,editable:false,hidden:false,unhidable:false},{field:"propertyName",label:_1e8b.FilterGridColumnProperty,editable:false,hidden:false,unhidable:true},_1e93({field:"analyticsAvailable",label:_1e8b.FilterGridColumnIsMetric,editable:false,hidden:false,unhidable:true},this._createCustomchkBox()),{field:"$updated",label:_1e8b.FilterGridColumnLastUpdated,formatter:function(date){if(typeof (date)!=="undefined"){var d=_1e85.Convert.toDateFromString(date,true);if(typeof (d)!=="undefined"){return dojo.date.locale.format(d,{selector:"date/time",fullYear:true});}}return dojo.date.locale.format(new Date(),{selector:"date/time",fullYear:true});},editable:false,hidden:false,unhidable:true},{field:"details",label:_1e8b.FilterGridColumnDetails,context:this,formatter:function(_1ea8){return this.context.filterUtility.formatDetails(_1ea8).detailsLocalizedName;},editable:false,hidden:false,unhidable:true}];var grid=new (_1e87([_1e8f,_1e90,_1e8e,_1e93,_1e92]))({columns:_1ea7,store:_1ea6,selectionMode:"single",allowSelectAll:false,cellNavigation:false,queryOptions:{sort:[{attribute:"displayName"}]}},this.entityFilter_Grid);grid.startup();this.grid=grid;dojo.connect(dijit.byId("list_listGrid"),"resize",dojo.partial(this.GridResize,grid));this.grid.updateSortArrow([{attribute:"displayName",descending:false}],true);var _1ea9=this;window.setTimeout(function(){_1ea9.filterUtility.fixToolbarIcons(_1ea9.filterGridToolbarContainer);});this.setGridCount(this);},setGridCount:function(_1eaa){if(_1eaa.recordCountLabel){_1eaa.recordCountLabel.innerHTML=dojo.string.substitute(_1e8b.totalRecordCountLabel,[_1eaa.grid.store.data.length]);}},GridResize:function(grid){var _1eab=dijit.byId("tabContainer");_1eab.resize();grid.resize();},addFilter:function(_1eac){var box=new _1e8d(_1eac.entityName,_1eac._getDialogTitleMarker(),_1eac.filterUtility);_1eac._displayAddEditDialogue(box,_1eac);},editFilter:function(_1ead){var _1eae=_1ead.getSelectedItem();if(_1eae){var box=new _1e8d(_1ead.entityName,_1ead._getDialogTitleMarker(),_1ead.filterUtility,_1eae);_1ead._displayAddEditDialogue(box,_1ead);}},_displayAddEditDialogue:function(_1eaf,_1eb0){_1eaf._Wstore=this.grid.store;_1eaf.service=this.service;_1eaf.show();dojo.connect(_1eaf._dialog,"hide",dojo.partial(_1eb0.onReset,_1eb0));},onReset:function(_1eb1){dijit.popup.close();_1eb1.grid.refresh();_1eb1._createDetailsGrid(true,_1eb1);_1eb1.setGridCount(_1eb1);},_getDialogTitleMarker:function(){return this.id.search("metric")<0?"Filter":"Metric";},removeFilter:function(_1eb2){var self=this;var opts={title:"Infor CRM",query:dojo.string.substitute(_1e8b.confirmDeleteFmtTxt,[1]),callbackFn:function(_1eb3){if(_1eb3===true){var item=_1eb2.getSelectedItem();if(item){var _1eb4=new Sage.SData.Client.SDataSingleResourceRequest(_1eb2.service).setResourceKind("entities("+"'"+_1eb2.entityName+"'"+")/filters");_1eb4.setResourceSelector("'"+item["$key"]+"'");_1eb4["delete"]({},{scope:_1eb2,ignoreETag:true,success:function(){var item=this.getSelectedItem();this.grid.store.remove(item["$key"]);this.grid.refresh();},failure:function(xhr,sdata){}});}}},yesText:_1e8b.lblOkButton,noText:_1e8b.lblCancelButton};_1e97.raiseQueryDialogExt(opts);},_onDblClick:function(){},onClose:function(){this.isOpen=false;},startup:function(){this.inherited(arguments);},_showHelp:function(){if(this.id.search("metric")<0){_1e85.openHelp("FiltersInDetailGrid","MCWebHelp");}else{_1e85.openHelp("MetricsInDetailGrid","MCWebHelp");}},});return _1e99;});},"Sage/UI/Columns/Boolean":function(){define(["dojox/grid/cells/_base","dojo/i18n","Sage/Utility","dojo/i18n!../nls/Boolean","dojo/_base/declare"],function(_1eb5,i18n,_1eb6,_1eb7,_1eb8){var _1eb9=_1eb8("Sage.UI.Columns.Boolean",_1eb5,{constructor:function(){var _1eba=i18n.getLocalization("Sage.UI","Boolean");dojo.mixin(this,_1eba);this.inherited(arguments);},formatter:function(val,index){var _1ebb={"T":true,"t":true,"Y":true,"y":true,"1":true,"+":true,"true":true};if(!this.formatString){return (val in _1ebb)?this.yesText:this.noText;}var _1ebc=this.formatString.split("/");if(_1ebc.length&&_1ebc.length===2){var _1ebd=(val in _1ebb)?_1ebc[0]:_1ebc[1];if(!_1ebd){return (val in _1ebb)?this.yesText:this.noText;}else{return _1eb6.htmlEncode(_1ebd);}}return (val in _1ebb)?this.yesText:this.noText;}});return _1eb9;});},"Sage/MainView/EntityMgr/AddEditEntityFilter/AddEditFiltersDialog":function(){define(["dijit/_Widget","Sage/_Templated","Sage/UI/EditableGrid","Sage/Utility","dojo/string","dojo/_base/declare","dojo/text!./templates/AddEditFiltersDialogMain.html","Sage/UI/Columns/DateTime","Sage/UI/Columns/Boolean","dojo/i18n!./nls/AddEditFiltersDialog","dojo/dom-style","Sage/UI/Dialogs","Sage/UI/FilteringSelect","Sage/UI/Controls/TextBox","Sage/UI/Controls/CheckBox","dojo/data/ItemFileWriteStore","dojo/store/Memory","Sage/Data/BaseSDataStore","Sage/Data/SDataServiceRegistry","dojo/store/JsonRest","dijit/Tree","dojo/json","dijit/registry","dojo/_base/Deferred","dojo/DeferredList","dojo/_base/lang","dojo/request","dojo/query","Sage/UI/Controls/_DialogHelpIconMixin","Sage/UI/_DialogLoadingMixin","Sage/MainView/EntityMgr/PropertyStore","dojo/dom-class","dijit/form/DropDownButton","dojo/dom","dijit/TooltipDialog","dijit/form/Button"],function(_1ebe,_1ebf,_1ec0,_1ec1,_1ec2,_1ec3,_1ec4,_1ec5,_1ec6,_1ec7,_1ec8,_1ec9,_1eca,_1ecb,_1ecc,_1ecd,_1ece,_1ecf,_1ed0,_1ed1,Tree,json,_1ed2,_1ed3,_1ed4,lang,_1ed5,query,_1ed6,_1ed7,_1ed8,_1ed9,_1eda,dom,_1edb,_1edc){var _1edd=_1ec3("Sage.MainView.EntityMgr.AddEditEntityFilter.AddEditFiltersDialog",[_1ebe,_1ebf],{_dialog:null,widgetTemplate:new Simplate(eval(_1ec4)),_nlsResources:_1ec7,widgetsInTemplate:true,filterNameTextBox:false,displayNameTextBox:false,analyticsCheckBox:false,propertiesDropDowns:false,propertyValueHolder:"",propertyDataLoad:false,typeDropDowns:false,typeDataLoad:false,detailContent:false,_EditData:false,entityName:false,filterUtility:false,service:false,_Wstore:false,_title:false,_idForTypeDropDown:"typeDpItems",_idForPropertyDropDown:"filtersDpItems",isMetric:false,myTooltipDialog:null,tree:null,constructor:function(_1ede,title,_1edf,data){this._title=title||"Filter";this.isMetric=this._title=="Metric";this._title=this.isMetric?this._nlsResources.lblMetric:this._nlsResources.lblFilter;this.entityName=_1ede;if(dijit.byId(this._idForTypeDropDown)){this.destroy(dijit.byId(this._idForTypeDropDown));}if(dijit.byId(this._idForPropertyDropDown)){this.destroy(dijit.byId(this._idForPropertyDropDown));}if(dijit.byId("propertyDp")){this.destroy(dijit.byId("propertyDp"));}this._EditData=data;this.filterUtility=_1edf;dojo.connect(dijit.byId("filterDetailGridPane"),"onShow",dojo.partial(this.loadfilters,this));},destroy:function(_1ee0){_1ee0.destroy();dijit.popup.close();},postCreate:function(){this._createFilterNameController();this._createDisplayNameController();this._createTypeController();this._createPropertyController();this.setUpDetailsSection(this,true);this.cmdSave.containerNode.innerHTML=this._nlsResources.lblSaveButton;this.cmdCancel.containerNode.innerHTML=this._nlsResources.lblCancelButton;dojo.mixin(this._dialog,new _1ed6({titleBar:this._dialog.titleBar}));this._dialog.createHelpIconByTopic(this.isMetric?"Adding_Editing_Metrics":"Adding_Editing_Filters");dojo.mixin(this._dialog,new _1ed7());dojo.connect(this._dialog,"onCancel",dojo.partial(this._cmdCancel_OnClick,this));this.startup();query(".dijitDialog").on("click",function(e){var _1ee1=e.target||e.srcElement;if(_1ee1.type!=="button"){dijit.popup.close();}});},_createFilterNameController:function(){this.lblFilterName.innerHTML=this.filterUtility.colonizeLabels(this.isMetric?this._nlsResources.lblMetricName:this._nlsResources.lblFilterName);this.filterNameTextBox=new _1ecb({shouldPublishMarkDirty:false,required:true,validator:this._filterNameValidator,invalidMessage:this._nlsResources.InvalidFilterName});dojo.place(this.filterNameTextBox.domNode,this.filterName,"only");var _1ee2="";if(this._EditData&&this._EditData.filterName){_1ee2=this._EditData.filterName;}this.filterNameTextBox.textbox.value=_1ee2;},_filterNameValidator:function(value,_1ee3){var regex="^([a-z]|[A-Z]|_)(\\w)*";var _1ee4=value.match(regex,"g");if(_1ee4){if(dojo.isArray(_1ee4)){return _1ee4[0].length==value.length;}else{return _1ee4[0].length==value.length;}}return false;},_createDisplayNameController:function(){this.lblDisplayName.innerHTML=this.filterUtility.colonizeLabels(this._nlsResources.lblDisplayName);this.displayNameTextBox=new _1ecb({shouldPublishMarkDirty:false});dojo.place(this.displayNameTextBox.domNode,this.displayName,"only");var _1ee5="";if(this._EditData&&this._EditData.displayName){_1ee5=this._EditData.displayName;}this.displayNameTextBox.textbox.value=_1ee5;},_createPropertyController:function(){this.lblFilterDp.innerHTML=this.filterUtility.colonizeLabels(this._nlsResources.lblFilterDp);var self=this;this.tree=new Tree({model:new _1ed8(this.entityName,false).store,showRoot:false,style:{overflow:"auto",height:"250px",width:"auto"},onClick:function(item){self.entitySelected.set("value",item.property);dijit.popup.close();}});var _1ee6=" ";if(this._EditData&&this._EditData.propertyName){_1ee6=this._EditData.propertyName;this.entitySelected.set("value",_1ee6);}},_showDDTree:function(){var ele=dojo.query(".entitySelected");var width=_1ec8.getComputedStyle(ele[ele.length-1]).width;this.myTooltipDialog=new _1edb({style:"width:"+width+";",content:this.tree});dojo.addClass(this.myTooltipDialog.domNode,"propertyDialog");dijit.popup.open({popup:this.myTooltipDialog,around:ele[ele.length-1]});},_createTypeController:function(){this.lblTypeDp.innerHTML=this.filterUtility.colonizeLabels(this._nlsResources.lblTypeDp);var _1ee7=this.isMetric?"metricFilter":"distinctFilter";if(this._EditData&&this._EditData.details){_1ee7=this.filterUtility.formatDetails(this._EditData.details).detailsKey;}this.typeDropDowns=new _1eca({id:this._idForTypeDropDown,name:"types",value:_1ee7,store:this.filterUtility.filterTypeDataLoad,searchAttr:"name",query:{type:this.isMetric?"metric":"filter"},fetchProperties:{sort:[{attribute:"name",descending:false}]}},this._idForTypeDropDown);if(this._EditData&&this._EditData.details){this.typeDropDowns.set("disabled",true);}dojo.place(this.typeDropDowns.domNode,this.typeDp,"only");dojo.connect(this.typeDropDowns,"onChange",dojo.partial(this.setUpDetailsSection,this,false));},startup:function(){this.inherited(arguments);},setUpDetailsSection:function(_1ee8,_1ee9){_1ee8.detailContent=_1ee8.filterUtility.getDetailsSection(_1ee8,_1ee9).detailsObject;if(typeof (_1ee8.detailContent)!=="undefined"){dojo.place(_1ee8.detailContent.domNode,_1ee8._TypeSpecificDetailsSection,"only");if(_1ee8.detailContent!==false&&typeof (_1ee8.detailContent)!=="undefined"&&_1ee8.detailContent.hasProperties===false){_1ed9.add(_1ee8.entitySelected.domNode,"dijitTextBoxDisabled");_1ee8.entitySelected.set("value","");_1ee8.entitySelected.set("disabled",true);_1ee8.transparentDropDown.set("disabled",true);}else{if(_1ee8.entitySelected!==false&&typeof (_1ee8.entitySelected)!=="undefined"){_1ed9.remove(_1ee8.entitySelected.domNode,"dijitTextBoxDisabled");_1ee8.entitySelected.set("disabled",false);}if(_1ee8.transparentDropDown!==false&&typeof (_1ee8.transparentDropDown)!=="undefined"){_1ee8.transparentDropDown.set("disabled",false);}}}},show:function(){if(this._EditData){this._dialog.titleNode.innerHTML=this._nlsResources.lblEdit+" "+this._title;}else{this._dialog.titleNode.innerHTML=this._nlsResources.lblAdd+" "+this._title;}this._dialog.show();this.inherited(arguments);},_cmdSave_OnClick:function(){if(!this.isValid()){this._dialog.hideLoading();}},_onSaveSuccess:function(data){_1ed0._removeFromLocalStorage(this.entityName);this._dialog.hideLoading();this._dialog.hide();},_cmdCancel_OnClick:function(_1eea){if(this._dialog){this._dialog.hideLoading();this._dialog.hide();}else{if(_1eea._dialog){_1eea._dialog.hideLoading();_1eea._dialog.hide();}}},isValid:function(){var _1eeb=false;this.divValidationMessage.innerHTML="";this.addEditFiltersForm.validate();_1eeb=!this.filterNameTextBox.isValid(true);this.filterNameTextBox.onChanged();if(!_1eeb){var _1eec=this;_1ed5=new Sage.SData.Client.SDataResourceCollectionRequest(this.service);_1ed5.setResourceKind("entities("+"'"+this.entityName+"'"+")/filters");_1ed5.setQueryArg("startIndex",0);_1ed5.setQueryArg("count",1);_1ed5.setQueryArg("where","filterName eq '"+this.filterNameTextBox.value+"'");_1eec._dialog.showLoading();_1ed5.read({success:function(data){if(typeof (data)!=="undefined"&&typeof (data.$resources)!=="undefined"&&data.$resources.length==1){_1eec.divValidationMessage.innerHTML="<div>"+_1eec.lblFilterName.innerHTML+"Is not unique for "+_1eec.entityName+"</div>";_1eec._dialog.hideLoading();return false;}return _1eec._continueValidation(_1eec);},failure:function(data){_1eec._dialog.hideLoading();return false;}});}return !_1eeb;},_continueValidation:function(_1eed){var _1eee=!_1eed.filterNameTextBox.isValid(true);_1eed.filterNameTextBox.onChanged();if(!_1eed.entitySelected.disabled){_1eee=_1eee||!_1eed.entitySelected.isValid(true);_1eed.entitySelected.onChange();}if(!_1eee){var value=_1eed.detailContent.isValid();if(typeof (value)!=="boolean"){_1eed.divValidationMessage.innerHTML=_1eed.divValidationMessage.innerHTML+"<div>"+value+"</div>";_1eee=true;}else{_1eee=!value;}}if(!_1eee){_1eed._continueSaveEdit(_1eed);}else{_1eed._dialog.hideLoading();}},_continueSaveEdit:function(_1eef){var _1ef0=new Sage.SData.Client.SDataSingleResourceRequest(_1eef.service).setResourceKind("entities("+"'"+_1eef.entityName+"'"+")/filters");if(_1eef._EditData){_1eef._EditData.filterName=_1eef.filterNameTextBox.textbox.value;if(_1eef.displayNameTextBox.textbox.value.length>0){_1eef._EditData.displayName=_1eef.displayNameTextBox.textbox.value;}_1eef._EditData.details=_1eef.detailContent.getDetails();var _1ef1=true;if(!(_1eef._EditData.details&&_1eef._EditData.details.dateDiffMetricFilter)){_1eef._EditData.propertyName=_1eef.entitySelected.value;_1ef1=false;}var _1ef2=_1eef._EditData;if(_1ef1){delete _1ef2.propertyName;}_1ef0.setResourceSelector("'"+_1ef2["$key"]+"'");_1ef0["update"](_1ef2,{isSecurityManager:true,scope:_1eef,ignoreETag:false,success:_1eef._onSaveSuccess,failure:function(xhr,sdata){var _1ef3=JSON.parse(xhr.response);var _1ef4=xhr.statusText+"("+xhr.status+")";if(_1ef3.length>0&&typeof (_1ef3[0].message)!=="undefined"){_1ef4=_1ef4+": "+_1ef3[0].message;}_1eef.divValidationMessage.innerHTML=_1eef.divValidationMessage.innerHTML+"<div>"+_1ef4+"</div>";_1eef._dialog.hideLoading();}});}else{var _1ef5={filterName:_1eef.filterNameTextBox.textbox.value,details:_1eef.detailContent.getDetails()};if(_1eef.displayNameTextBox.textbox.value.length>0){_1ef5.displayName=_1eef.displayNameTextBox.textbox.value;_1ef5.analyticsDescription=_1eef.displayNameTextBox.textbox.value;}if(!_1ef5.details.dateDiffMetricFilter){_1ef5.propertyName=_1eef.entitySelected.value;}if(_1eef.detailContent.declaredClass.indexOf("LookupDetailsView")===-1){_1ef5.analyticsAvailable=true;}_1ef0["create"](_1ef5,{scope:_1eef,ignoreETag:true,success:_1eef._onSaveSuccess,failure:function(xhr,sdata){var _1ef6=JSON.parse(xhr.response);var _1ef7=xhr.statusText+"("+xhr.status+")";if(_1ef6.length>0&&typeof (_1ef6[0].message)!=="undefined"){_1ef7=_1ef7+": "+_1ef6[0].message;}_1eef.divValidationMessage.innerHTML=_1eef.divValidationMessage.innerHTML+"<div>"+_1ef7+"</div>";_1eef._dialog.hideLoading();}});}}});return _1edd;});},"Sage/UI/FilteringSelect":function(){define(["dijit/form/FilteringSelect","dojo/_base/declare"],function(_1ef8,_1ef9){return _1ef9("Sage.UI.FilteringSelect",_1ef8,{valueAttr:false,_getValueField:function(){return this.valueAttr||"value";}});});},"Sage/UI/Controls/CheckBox":function(){define(["dijit/form/CheckBox","dojo/_base/declare"],function(_1efa,_1efb){var _1efc=_1efb("Sage.UI.Controls.CheckBox",_1efa,{hotKey:"",autoPostBack:false,labelText:"",labelPlacement:"",shouldPublishMarkDirty:true,constructor:function(){},postCreate:function(){if(this.hotKey!==""){this.focusNode.accessKey=this.hotKey;}this.connect(this,"onChange",this.onChanged);this._insertLabel();this.inherited(arguments);},_insertLabel:function(){var _1efd="before",_1efe=null;if(this.labelPlacement==="right"){_1efd="after";}if(this.labelPlacement!=="none"){_1efe=dojo.create("label",{"for":this.id,innerHTML:this.labelText},this.domNode,_1efd);if(this.labelPlacement==="top"){dojo.create("br",null,_1efe,"after");}}},onChanged:function(e){if(this.shouldPublishMarkDirty){dojo.publish("Sage/events/markDirty");}if(this.autoPostBack){if(Sys){Sys.WebForms.PageRequestManager.getInstance()._doPostBack(this.id,"");}}}});return _1efc;});},"dojo/store/JsonRest":function(){define(["../_base/xhr","../_base/lang","../json","../_base/declare","./util/QueryResults"],function(xhr,lang,JSON,_1eff,_1f00){var base=null;return _1eff("dojo.store.JsonRest",base,{constructor:function(_1f01){this.headers={};_1eff.safeMixin(this,_1f01);},headers:{},target:"",idProperty:"id",ascendingPrefix:"+",descendingPrefix:"-",_getTarget:function(id){var _1f02=this.target;if(typeof id!="undefined"){if(_1f02.charAt(_1f02.length-1)=="/"){_1f02+=id;}else{_1f02+="/"+id;}}return _1f02;},get:function(id,_1f03){_1f03=_1f03||{};var _1f04=lang.mixin({Accept:this.accepts},this.headers,_1f03.headers||_1f03);return xhr("GET",{url:this._getTarget(id),handleAs:"json",headers:_1f04});},accepts:"application/javascript, application/json",getIdentity:function(_1f05){return _1f05[this.idProperty];},put:function(_1f06,_1f07){_1f07=_1f07||{};var id=("id" in _1f07)?_1f07.id:this.getIdentity(_1f06);var hasId=typeof id!="undefined";return xhr(hasId&&!_1f07.incremental?"PUT":"POST",{url:this._getTarget(id),postData:JSON.stringify(_1f06),handleAs:"json",headers:lang.mixin({"Content-Type":"application/json",Accept:this.accepts,"If-Match":_1f07.overwrite===true?"*":null,"If-None-Match":_1f07.overwrite===false?"*":null},this.headers,_1f07.headers)});},add:function(_1f08,_1f09){_1f09=_1f09||{};_1f09.overwrite=false;return this.put(_1f08,_1f09);},remove:function(id,_1f0a){_1f0a=_1f0a||{};return xhr("DELETE",{url:this._getTarget(id),headers:lang.mixin({},this.headers,_1f0a.headers)});},query:function(query,_1f0b){_1f0b=_1f0b||{};var _1f0c=lang.mixin({Accept:this.accepts},this.headers,_1f0b.headers);var _1f0d=this.target.indexOf("?")>-1;if(query&&typeof query=="object"){query=xhr.objectToQuery(query);query=query?(_1f0d?"&":"?")+query:"";}if(_1f0b.start>=0||_1f0b.count>=0){_1f0c["X-Range"]="items="+(_1f0b.start||"0")+"-"+(("count" in _1f0b&&_1f0b.count!=Infinity)?(_1f0b.count+(_1f0b.start||0)-1):"");if(this.rangeParam){query+=(query||_1f0d?"&":"?")+this.rangeParam+"="+_1f0c["X-Range"];_1f0d=true;}else{_1f0c.Range=_1f0c["X-Range"];}}if(_1f0b&&_1f0b.sort){var _1f0e=this.sortParam;query+=(query||_1f0d?"&":"?")+(_1f0e?_1f0e+"=":"sort(");for(var i=0;i<_1f0b.sort.length;i++){var sort=_1f0b.sort[i];query+=(i>0?",":"")+(sort.descending?this.descendingPrefix:this.ascendingPrefix)+encodeURIComponent(sort.attribute);}if(!_1f0e){query+=")";}}var _1f0f=xhr("GET",{url:this.target+(query||""),handleAs:"json",headers:_1f0c});_1f0f.total=_1f0f.then(function(){var range=_1f0f.ioArgs.xhr.getResponseHeader("Content-Range");if(!range){range=_1f0f.ioArgs.xhr.getResponseHeader("X-Content-Range");}return range&&(range=range.match(/\/(.*)/))&&+range[1];});return _1f00(_1f0f);}});});},"Sage/MainView/EntityMgr/PropertyStore":function(){define(["Sage/Utility","dojo/string","dojo/_base/declare","dojo/store/Memory","Sage/Data/BaseSDataStore","Sage/Data/SDataServiceRegistry","dojo/store/JsonRest","dojo/json","dojo/_base/Deferred","dojo/DeferredList","dojo/request","dojo/query","dijit/registry"],function(_1f10,_1f11,_1f12,_1f13,_1f14,_1f15,_1f16,json,_1f17,_1f18,_1f19,query,_1f1a){var _1f1b=_1f12("Sage.MainView.EntityMgr.PropertyStore",null,{constructor:function(id,_1f1c,addin){this.store.selectedEntity=id;this.store.dateTimePropOnly=_1f1c;this.store.addins=addin;},store:new _1f16({target:"",selectedEntity:"",dateTimePropOnly:false,addins:false,getChildren:function(_1f1d,_1f1e){var items=new _1f13();var _1f1f,_1f20;var _1f21=this.dateTimePropOnly;var _1f22="1f08f2eb-87c8-443b-a7c2-a51f590923f5";if(_1f1d.name=="rootNode"){_1f1f=this.selectedEntity;_1f20="";}else{_1f1f=_1f1d.relatedEntity;_1f20=_1f1d.property+".";}var wait=[],_1f23;_1f23=new _1f17();var _1f24=_1f19(new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("metadata")).setResourceKind("entities").setResourceSelector("\""+_1f1f+"\"").setQueryArg("select","properties/*").setQueryArg("format","json").setQueryArg("Count","200")).then(function(_1f25){var _1f26=json.parse(_1f25);var _1f27=_1f26.properties.$resources;for(var i=0;i<=_1f27.length-1;i++){if(_1f27[i].isIncluded===true){if(_1f21){if(_1f27[i].dataTypeId===_1f22){items.add({id:_1f27[i].id,name:_1f27[i].propertyName,property:_1f20+_1f27[i].propertyName});}}else{items.add({id:_1f27[i].id,name:_1f27[i].propertyName,property:_1f20+_1f27[i].propertyName});}}}});var _1f28=_1f11.substitute("(parentEntity.name eq \"${0}\") or (childEntity.name eq \"${0}\")",[_1f1f]);if(_1f21){_1f28=_1f11.substitute("(parentEntity.name eq \"${0}\" and cardinality eq \"M:1\") or (childEntity.name eq \"${0}\" and cardinality eq \"1:M\")",[_1f1f]);}var _1f29=_1f19(new Sage.SData.Client.SDataResourceCollectionRequest(Sage.Data.SDataServiceRegistry.getSDataService("metadata")).setResourceKind("relationships").setQueryArg("where",_1f28).setQueryArg("format","json").setQueryArg("Count","200")).then(function(_1f2a){var _1f2b=json.parse(_1f2a);var _1f2c=_1f2b.$resources;for(var i=0;i<=_1f2c.length-1;i++){if(_1f1f==_1f2c[i]["parentEntity"]["$key"]&&_1f2c[i]["parentProperty"]["isIncluded"]){items.add({name:_1f2c[i]["parentProperty"]["propertyName"],id:_1f2c[i]["parentProperty"]["id"],relatedEntity:_1f2c[i]["childEntity"]["$key"],"children":"test",property:_1f20+_1f2c[i]["parentProperty"]["propertyName"]});}else{if(_1f1f==_1f2c[i]["childEntity"]["$key"]&&_1f2c[i]["childProperty"]["isIncluded"]){items.add({name:_1f2c[i]["childProperty"]["propertyName"],id:_1f2c[i]["childProperty"]["id"],"children":"test",property:_1f20+_1f2c[i]["childProperty"]["propertyName"],relatedEntity:_1f2c[i]["parentEntity"]["$key"]});}}}});var _1f2d=_1f19(new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("metadata")).setResourceKind("entities").setQueryArg("where",_1f11.substitute("extendedEntity.name eq \"${0}\"",[_1f1f])).setQueryArg("select","extendedEntityPropertyName").setQueryArg("format","json").setQueryArg("Count","200")).then(function(_1f2e){var _1f2f=json.parse(_1f2e);var _1f30=_1f2f.$resources;for(var i=0;i<=_1f30.length-1;i++){items.add({name:_1f30[i].$key,id:_1f30[i].$key,"children":"test",property:_1f20+_1f30[i].$key,relatedEntity:_1f30[i].$key});}});var list=new _1f18([_1f24,_1f29,_1f2d]);list.then(function(_1f31){var _1f32="name";items.data.sort(function(a,b){var nameA=a[_1f32],nameB=b[_1f32];return (nameA<nameB)?-1:(nameA>nameB)?1:0;});_1f1e(items.data);});},getRoot:function(_1f33){var data={"name":"rootNode","id":"root"};_1f33(data);},mayHaveChildren:function(item){return "children" in item;},getLabel:function(_1f34){return _1f34.name;},})});return _1f1b;});},"dgrid/Grid":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/on","dojo/has","put-selector/put","./List","./util/misc","dojo/_base/sniff"],function(_1f35,_1f36,_1f37,has,put,List,_1f38){var _1f39=has("ie")<8&&!has("quirks");function _1f3a(_1f3b,_1f3c){if(_1f3c&&_1f3c.nodeType){_1f3b.appendChild(_1f3c);}};function _1f3d(str){return _1f38.escapeCssIdentifier(str,"-");};var Grid=_1f36(List,{columns:null,cellNavigation:true,tabableHeader:true,showHeader:true,column:function(_1f3e){if(typeof _1f3e!="object"){return this.columns[_1f3e];}else{return this.cell(_1f3e).column;}},listType:"grid",cell:function(_1f3f,_1f40){if(_1f3f.column&&_1f3f.element){return _1f3f;}if(_1f3f.target&&_1f3f.target.nodeType){_1f3f=_1f3f.target;}var _1f41;if(_1f3f.nodeType){var _1f42;do{if(this._rowIdToObject[_1f3f.id]){break;}var colId=_1f3f.columnId;if(colId){_1f40=colId;_1f41=_1f3f;break;}_1f3f=_1f3f.parentNode;}while(_1f3f&&_1f3f!=this.domNode);}if(!_1f41&&typeof _1f40!="undefined"){var row=this.row(_1f3f),_1f43=row&&row.element;if(_1f43){var _1f44=_1f43.getElementsByTagName("td");for(var i=0;i<_1f44.length;i++){if(_1f44[i].columnId==_1f40){_1f41=_1f44[i];break;}}}}if(_1f3f!=null){return {row:row||this.row(_1f3f),column:_1f40&&this.column(_1f40),element:_1f41};}},createRowCells:function(tag,each,_1f45,_1f46){var row=put("table.dgrid-row-table[role=presentation]"),_1f47=this.cellNavigation,tbody=(has("ie")<9||has("quirks"))?put(row,"tbody"):row,tr,si,sl,i,l,_1f48,_1f49,id,_1f4a,_1f4b,cell,_1f4c,_1f4d,_1f4e;_1f45=_1f45||this.subRows;for(si=0,sl=_1f45.length;si<sl;si++){_1f48=_1f45[si];tr=put(tbody,"tr");if(_1f48.className){put(tr,"."+_1f48.className);}for(i=0,l=_1f48.length;i<l;i++){_1f49=_1f48[i];id=_1f49.id;_1f4a=_1f49.field?".field-"+_1f3d(_1f49.field):"";_1f4b=typeof _1f49.className==="function"?_1f49.className(_1f46):_1f49.className;if(_1f4b){_1f4a+="."+_1f4b;}cell=put(tag+(".dgrid-cell.dgrid-cell-padding"+(id?".dgrid-column-"+_1f3d(id):"")+_1f4a.replace(/ +/g,"."))+"[role="+(tag==="th"?"columnheader":"gridcell")+"]");cell.columnId=id;if(_1f39){_1f4c=put(cell,"!dgrid-cell-padding div.dgrid-cell-padding");cell.contents=_1f4c;}else{_1f4c=cell;}_1f4d=_1f49.colSpan;if(_1f4d){cell.colSpan=_1f4d;}_1f4e=_1f49.rowSpan;if(_1f4e){cell.rowSpan=_1f4e;}each(_1f4c,_1f49);tr.appendChild(cell);}}return row;},left:function(cell,steps){if(!cell.element){cell=this.cell(cell);}return this.cell(this._move(cell,-(steps||1),"dgrid-cell"));},right:function(cell,steps){if(!cell.element){cell=this.cell(cell);}return this.cell(this._move(cell,steps||1,"dgrid-cell"));},renderRow:function(_1f4f,_1f50){var self=this;var row=this.createRowCells("td",function(td,_1f51){var data=_1f4f;if(_1f51.get){data=_1f51.get(_1f4f);}else{if("field" in _1f51&&_1f51.field!="_item"){data=data[_1f51.field];}}if(_1f51.renderCell){_1f3a(td,_1f51.renderCell(_1f4f,data,td,_1f50));}else{_1f52.call(_1f51,_1f4f,data,td,_1f50);}},_1f50&&_1f50.subRows,_1f4f);return put("div[role=row]>",row);},renderHeader:function(){var grid=this,_1f53=this.columns,_1f54=this.headerNode,i=_1f54.childNodes.length;_1f54.setAttribute("role","row");while(i--){put(_1f54.childNodes[i],"!");}var row=this.createRowCells("th",function(th,_1f55){var _1f56=_1f55.headerNode=th;if(_1f39){th=th.parentNode;}var field=_1f55.field;if(field){th.field=field;}if(_1f55.renderHeaderCell){_1f3a(_1f56,_1f55.renderHeaderCell(_1f56));}else{if("label" in _1f55||_1f55.field){_1f56.appendChild(document.createTextNode("label" in _1f55?_1f55.label:_1f55.field));}}if(_1f55.sortable!==false&&field&&field!="_item"){th.sortable=true;th.className+=" dgrid-sortable";}},this.subRows&&this.subRows.headerRows);this._rowIdToObject[row.id=this.id+"-header"]=this.columns;_1f54.appendChild(row);if(this._sortListener){this._sortListener.remove();}this._sortListener=_1f37(row,"click,keydown",function(event){if(event.type=="click"||event.keyCode==32||(!has("opera")&&event.keyCode==13)){var _1f57=event.target,field,sort,_1f58,_1f59;do{if(_1f57.sortable){_1f58=[{attribute:(field=_1f57.field||_1f57.columnId),descending:(sort=grid._sort[0])&&sort.attribute==field&&!sort.descending}];_1f59={bubbles:true,cancelable:true,grid:grid,parentType:event.type,sort:_1f58};if(_1f37.emit(event.target,"dgrid-sort",_1f59)){grid._sortNode=_1f57;grid.set("sort",_1f58);}break;}}while((_1f57=_1f57.parentNode)&&_1f57!=_1f54);}});},resize:function(){var _1f5a=this.headerNode.firstChild,_1f5b=this.contentNode,width;this.inherited(arguments);if(!has("ie")||(has("ie")>7&&!has("quirks"))){_1f5b.style.width="";if(_1f5b&&_1f5a){if((width=_1f5a.offsetWidth)!=_1f5b.offsetWidth){_1f5b.style.width=width+"px";}}}},destroy:function(){this._destroyColumns();if(this._sortListener){this._sortListener.remove();}this.inherited(arguments);},_setSort:function(_1f5c,_1f5d){this.inherited(arguments);this.updateSortArrow(this._sort);},_findSortArrowParent:function(field){var _1f5e=this.columns;for(var i in _1f5e){var _1f5f=_1f5e[i];if(_1f5f.field==field){return _1f5f.headerNode;}}},updateSortArrow:function(sort,_1f60){if(this._lastSortedArrow){put(this._lastSortedArrow,"<!dgrid-sort-up!dgrid-sort-down");put(this._lastSortedArrow,"!");delete this._lastSortedArrow;}if(_1f60){this._sort=sort;}if(!sort[0]){return;}var prop=sort[0].attribute,desc=sort[0].descending,_1f61=this._sortNode||this._findSortArrowParent(prop),_1f62;delete this._sortNode;if(_1f61){_1f61=_1f61.contents||_1f61;_1f62=this._lastSortedArrow=put("div.dgrid-sort-arrow.ui-icon[role=presentation]");_1f62.innerHTML="&nbsp;";_1f61.insertBefore(_1f62,_1f61.firstChild);put(_1f61,desc?".dgrid-sort-down":".dgrid-sort-up");this.resize();}},styleColumn:function(colId,css){return this.addCssRule("#"+_1f38.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+_1f3d(colId),css);},_configColumns:function(_1f63,_1f64){var _1f65=[],_1f66=_1f64 instanceof Array;function _1f67(_1f68,_1f69){if(typeof _1f68=="string"){_1f64[_1f69]=_1f68={label:_1f68};}if(!_1f66&&!_1f68.field){_1f68.field=_1f69;}_1f69=_1f68.id=_1f68.id||(isNaN(_1f69)?_1f69:(_1f63+_1f69));if(this._configColumn){this._configColumn(_1f68,_1f69,_1f64,_1f63);_1f69=_1f68.id;}if(_1f66){this.columns[_1f69]=_1f68;}_1f68.grid=this;if(typeof _1f68.init==="function"){_1f68.init();}_1f65.push(_1f68);};_1f38.each(_1f64,_1f67,this);return _1f66?_1f64:_1f65;},_destroyColumns:function(){var _1f6a=this.subRows,_1f6b=_1f6a&&_1f6a.length,i,j,_1f6c,len;this.cleanup();for(i=0;i<_1f6b;i++){for(j=0,len=_1f6a[i].length;j<len;j++){_1f6c=_1f6a[i][j];if(typeof _1f6c.destroy==="function"){_1f6c.destroy();}}}},configStructure:function(){var _1f6d=this.subRows,_1f6e=this._columns=this.columns;this.columns=!_1f6e||_1f6e instanceof Array?{}:_1f6e;if(_1f6d){for(var i=0;i<_1f6d.length;i++){_1f6d[i]=this._configColumns(i+"-",_1f6d[i]);}}else{this.subRows=[this._configColumns("",_1f6e)];}},_getColumns:function(){return this._columns||this.columns;},_setColumns:function(_1f6f){this._destroyColumns();this.subRows=null;this.columns=_1f6f;this._updateColumns();},_setSubRows:function(_1f70){this._destroyColumns();this.subRows=_1f70;this._updateColumns();},setColumns:function(_1f71){_1f35.deprecated("setColumns(...)","use set(\"columns\", ...) instead","dgrid 0.4");this.set("columns",_1f71);},setSubRows:function(_1f72){_1f35.deprecated("setSubRows(...)","use set(\"subRows\", ...) instead","dgrid 0.4");this.set("subRows",_1f72);},_updateColumns:function(){this.configStructure();this.renderHeader();this.refresh();this._lastCollection&&this.renderArray(this._lastCollection);if(this._started){if(this._sort&&this._sort.length){this.updateSortArrow(this._sort);}else{this.resize();}}}});function _1f52(_1f73,data,td,_1f74){if(this.formatter){var _1f75=this.formatter,_1f76=this.grid.formatterScope;td.innerHTML=typeof _1f75==="string"&&_1f76?_1f76[_1f75](data,_1f73):this.formatter(data,_1f73);}else{if(data!=null){td.appendChild(document.createTextNode(data));}}};Grid.appendIfNode=_1f3a;Grid.defaultRenderCell=_1f52;return Grid;});},"dgrid/OnDemandGrid":function(){define(["dojo/_base/declare","./Grid","./OnDemandList"],function(_1f77,Grid,_1f78){return _1f77([Grid,_1f78],{});});},"dgrid/extensions/ColumnHider":function(){define(["dojo/_base/declare","dojo/has","dojo/on","../util/misc","put-selector/put","dojo/i18n!./nls/columnHider","xstyle/css!../css/extensions/ColumnHider.css"],function(_1f79,has,_1f7a,_1f7b,put,i18n){var _1f7c,_1f7d,hasIE=has("ie"),_1f7e=hasIE&&has("quirks"),_1f7f=hasIE<8||_1f7e?"htmlFor":"for";function _1f80(cb,grid){return cb.id.substr(grid.id.length+18);};return _1f79(null,{hiderMenuNode:null,hiderToggleNode:null,i18nColumnHider:i18n,_hiderMenuOpened:false,_columnHiderRules:null,_columnHiderCheckboxes:null,_renderHiderMenuEntries:function(){var _1f81=this.subRows,first=true,_1f82,_1f83,sr,c;delete this._columnHiderFirstCheckbox;for(sr=0,_1f82=_1f81.length;sr<_1f82;sr++){for(c=0,_1f83=_1f81[sr].length;c<_1f83;c++){this._renderHiderMenuEntry(_1f81[sr][c]);if(first){first=false;this._columnHiderFirstCheckbox=this._columnHiderCheckboxes[_1f81[sr][c].id];}}}},_renderHiderMenuEntry:function(col){var id=col.id,_1f84=_1f7b.escapeCssIdentifier(id,"-"),div,_1f85,_1f86,label;if(col.hidden){col.hidden=false;this._hideColumn(id);col.hidden=true;}if(col.unhidable){return;}div=put("div.dgrid-hider-menu-row");_1f85=this.domNode.id+"-hider-menu-check-"+_1f84;_1f86=this._columnHiderCheckboxes[id]=put(div,"input.dgrid-hider-menu-check.hider-menu-check-"+_1f84+"[type=checkbox]");_1f86.id=_1f85;label=put(div,"label.dgrid-hider-menu-label.hider-menu-label-"+_1f84+"["+_1f7f+"="+_1f85+"]",col.label||col.field||"");put(this.hiderMenuNode,div);if(!col.hidden){_1f86.checked=true;}},renderHeader:function(){var grid=this,_1f87=this.hiderMenuNode,_1f88=this.hiderToggleNode,id;function _1f89(event){event.stopPropagation();};this.inherited(arguments);if(!_1f87){_1f88=this.hiderToggleNode=put(this.domNode,"button.ui-icon.dgrid-hider-toggle[type=button]");this._listeners.push(_1f7a(_1f88,"click",function(e){grid._toggleColumnHiderMenu(e);}));_1f87=this.hiderMenuNode=put("div.dgrid-hider-menu[role=dialog][aria-label="+this.i18nColumnHider.popupLabel+"]");_1f87.id=this.id+"-hider-menu";this._listeners.push(_1f7a(_1f87,"keyup",function(e){var _1f8a=e.charCode||e.keyCode;if(_1f8a===27){grid._toggleColumnHiderMenu(e);_1f88.focus();}}));_1f87.style.display="none";put(this.domNode,_1f87);this._listeners.push(_1f7a(_1f87,".dgrid-hider-menu-check:"+(hasIE<9||_1f7e?"click":"change"),function(e){grid._updateColumnHiddenState(_1f80(e.target,grid),!e.target.checked);}));this._listeners.push(_1f7a(_1f87,"mousedown",_1f89),_1f7a(_1f88,"mousedown",_1f89));if(!_1f7d){_1f7d=_1f7a.pausable(document,"mousedown",function(e){_1f7c&&_1f7c._toggleColumnHiderMenu(e);});_1f7d.pause();}}else{for(id in this._columnHiderRules){this._columnHiderRules[id].remove();}_1f87.innerHTML="";}this._columnHiderCheckboxes={};this._columnHiderRules={};this._renderHiderMenuEntries();},destroy:function(){this.inherited(arguments);for(var id in this._columnHiderRules){this._columnHiderRules[id].remove();}},left:function(cell,steps){return this.right(cell,-steps);},right:function(cell,steps){if(!cell.element){cell=this.cell(cell);}var _1f8b=this.inherited(arguments),_1f8c=cell;while(_1f8b.column.hidden){_1f8b=this.inherited(arguments,[_1f8b,steps>0?1:-1]);if(_1f8c.element===_1f8b.element){return cell;}_1f8c=_1f8b;}return _1f8b;},isColumnHidden:function(id){return !!this._columnHiderRules[id];},_toggleColumnHiderMenu:function(){var _1f8d=this._hiderMenuOpened,_1f8e=this.hiderMenuNode,_1f8f=this.domNode,_1f90;_1f8e.style.display=(_1f8d?"none":"");if(_1f8d){_1f8e.style.height="";}else{if(_1f8e.offsetHeight>_1f8f.offsetHeight-12){_1f8e.style.height=(_1f8f.offsetHeight-12)+"px";}(_1f90=this._columnHiderFirstCheckbox)&&_1f90.focus();}_1f7d[_1f8d?"pause":"resume"]();_1f7c=_1f8d?null:this;this._hiderMenuOpened=!_1f8d;},_hideColumn:function(id){var grid=this,_1f91="#"+_1f7b.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-",_1f92;if(this._columnHiderRules[id]){return;}this._columnHiderRules[id]=_1f7b.addCssRule(_1f91+_1f7b.escapeCssIdentifier(id,"-"),"display: none;");if(has("ie")===8&&!has("quirks")){_1f92=_1f7b.addCssRule(".dgrid-row-table","display: inline-table;");window.setTimeout(function(){_1f92.remove();grid.resize();},0);}},_showColumn:function(id){if(this._columnHiderRules[id]){this._columnHiderRules[id].remove();delete this._columnHiderRules[id];}},_updateColumnHiddenState:function(id,_1f93){this[_1f93?"_hideColumn":"_showColumn"](id);this.columns[id].hidden=_1f93;_1f7a.emit(this.domNode,"dgrid-columnstatechange",{grid:this,column:this.columns[id],hidden:_1f93,bubbles:true});this.resize();},toggleColumnHiddenState:function(id,_1f94){if(typeof _1f94==="undefined"){_1f94=!this._columnHiderRules[id];}this._updateColumnHiddenState(id,_1f94);this._columnHiderCheckboxes[id].checked=!_1f94;}});});},"dgrid/editor":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/on","dojo/aspect","dojo/has","dojo/query","./Grid","put-selector/put","dojo/_base/sniff"],function(_1f95,lang,_1f96,_1f97,on,_1f98,has,query,Grid,put){var _1f99,_1f9a,_1f9b,_1f9c;function _1f9d(input,value){input.value=value;if(input.type=="radio"||input.type=="checkbox"){input.checked=input.defaultChecked=!!value;}};function _1f9e(value,_1f9f){if(typeof _1f9f=="number"){value=isNaN(value)?value:parseFloat(value);}else{if(typeof _1f9f=="boolean"){value=value=="true"?true:value=="false"?false:value;}else{if(_1f9f instanceof Date){var _1fa0=new Date(value);value=isNaN(_1fa0.getTime())?value:_1fa0;}}}return value;};function _1fa1(_1fa2,cmp){if(typeof cmp.get=="function"){return _1f9e(cmp.get("value"));}else{return _1f9e(cmp[cmp.type=="checkbox"||cmp.type=="radio"?"checked":"value"]);}};function _1fa3(grid,cell,_1fa4,value,_1fa5){var _1fa6,row,_1fa7,_1fa8;if((_1fa4&&_1fa4.valueOf())!=(value&&value.valueOf())){_1fa6=cell.element;row=cell.row;_1fa7=cell.column;if(_1fa7.field&&row){_1fa8={grid:grid,cell:cell,rowId:row.id,oldValue:_1fa4,value:value,bubbles:true,cancelable:true};if(_1fa5&&_1fa5.type){_1fa8.parentType=_1fa5.type;}if(on.emit(_1fa6,"dgrid-datachange",_1fa8)){if(grid.updateDirty){grid.updateDirty(row.id,_1fa7.field,value);_1fa7.autoSave&&setTimeout(function(){grid._trackError("save");},0);}else{row.data[_1fa7.field]=value;}}else{var cmp;if((cmp=_1fa6.widget)){cmp._dgridIgnoreChange=true;cmp.set("value",_1fa4);setTimeout(function(){cmp._dgridIgnoreChange=false;},0);}else{if((cmp=_1fa6.input)){_1f9d(cmp,_1fa4);}}return _1fa4;}}}return value;};function _1fa9(grid,cmp,_1faa){var cell=grid.cell(cmp.domNode||cmp),_1fab=cell.column,value,id,_1fac;if(!cmp.isValid||cmp.isValid()){value=_1fa3(grid,cell,_1f99?_1f9a:cmp._dgridLastValue,_1fa1(_1fab,cmp),_1faa);if(_1f99){_1f9a=value;}else{cmp._dgridLastValue=value;}if(cmp.type==="radio"&&cmp.name&&!_1fab.editOn&&_1fab.field){_1fac=grid.row(cmp);query("input[type=radio][name="+cmp.name+"]",grid.contentNode).forEach(function(_1fad){var row=grid.row(_1fad);if(_1fad!==cmp&&_1fad._dgridLastValue){_1fad._dgridLastValue=false;if(grid.updateDirty){grid.updateDirty(row.id,_1fab.field,false);}else{row.data[_1fab.field]=false;}}});for(id in grid.dirty){if(_1fac.id!==id&&grid.dirty[id][_1fab.field]){grid.updateDirty(id,_1fab.field,false);}}}}};function _1fae(_1faf){var _1fb0=_1faf.editor,_1fb1=_1faf.editOn,grid=_1faf.grid,_1fb2=typeof _1fb0!="string",args,cmp,node,_1fb3,_1fb4;args=_1faf.editorArgs||{};if(typeof args=="function"){args=args.call(grid,_1faf);}if(_1fb2){cmp=new _1fb0(args);node=cmp.focusNode||cmp.domNode;node.className+=" dgrid-input";cmp.connect(cmp,_1fb1?"onBlur":"onChange",function(){if(!cmp._dgridIgnoreChange){_1fa9(grid,this,{type:"widget"});}});}else{_1fb4=function(evt){var _1fb5=evt.target;if("_dgridLastValue" in _1fb5&&_1fb5.className.indexOf("dgrid-input")>-1){_1fa9(grid,_1fb5,evt);}};if(!_1faf.grid._hasInputListener){grid._hasInputListener=true;grid.on("change",function(evt){_1fb4(evt);});}_1fb3=_1fb0=="textarea"?"textarea":"input[type="+_1fb0+"]";cmp=node=put(_1fb3+".dgrid-input",lang.mixin({name:_1faf.field,tabIndex:isNaN(_1faf.tabIndex)?-1:_1faf.tabIndex},args));if(has("ie")<9||(has("ie")&&has("quirks"))){if(_1fb0=="radio"||_1fb0=="checkbox"){on(cmp,"click",function(evt){_1fb4(evt);});}else{on(cmp,"change",function(evt){_1fb4(evt);});}}}return cmp;};function _1fb6(_1fb7,_1fb8){var cmp=_1fae(_1fb7),grid=_1fb7.grid,_1fb9=cmp.domNode,node=cmp.domNode||cmp,_1fba=cmp.focusNode||node,reset=_1fb9?function(){cmp.set("value",cmp._dgridLastValue);}:function(){_1f9d(cmp,cmp._dgridLastValue);_1fa9(_1fb7.grid,cmp);},_1fbb;function blur(){var _1fbc=_1f99;_1fba.blur();if(typeof grid.focus==="function"){setTimeout(function(){grid.focus(_1fbc);},_1fb9&&has("ie")<9?15:0);}};function _1fbd(){var _1fbe=node.parentNode,i=_1fbe.children.length-1,_1fbf={alreadyHooked:true},cell=grid.cell(node);on.emit(cell.element,"dgrid-editor-hide",{grid:grid,cell:cell,column:_1fb7,editor:cmp,bubbles:true,cancelable:false});_1fb7._editorBlurHandle.pause();_1fbe.removeChild(node);put(cell.element,"!dgrid-cell-editing");while(i--){put(_1fbe.firstChild,"!");}Grid.appendIfNode(_1fbe,_1fb7.renderCell(_1fb7.grid.row(_1fbe).data,_1f9a,_1fbe,_1f9b?lang.delegate(_1fbf,_1f9b):_1fbf));_1f99=_1f9a=_1f9b=_1f9c=null;};function _1fc0(evt){var key=evt.keyCode||evt.which;if(key==27){reset();_1f9a=cmp._dgridLastValue;blur();}else{if(key==13&&_1fb7.dismissOnEnter!==false){blur();}}};_1fbb=on(_1fba,"keydown",_1fc0);(_1fb7._editorBlurHandle=on.pausable(cmp,"blur",_1fbd)).pause();return cmp;};function _1fc1(cmp,_1fc2,_1fc3,value){var _1fc4=cmp.domNode,grid=_1fc2.grid;if(!_1fc4){_1f9d(cmp,value);}_1fc3.innerHTML="";put(_1fc3,".dgrid-cell-editing");put(_1fc3,cmp.domNode||cmp);if(_1fc4){if(!cmp._started){cmp.startup();}cmp._dgridIgnoreChange=true;cmp.set("value",value);setTimeout(function(){cmp._dgridIgnoreChange=false;},0);}cmp._dgridLastValue=value;if(_1f99){_1f9a=value;on.emit(_1fc3,"dgrid-editor-show",{grid:grid,cell:grid.cell(_1fc3),column:_1fc2,editor:cmp,bubbles:true,cancelable:false});}};function edit(cell){var row,_1fc5,_1fc6,dirty,field,value,cmp,dfd;if(!cell.column){cell=this.cell(cell);}if(!cell||!cell.element){return null;}_1fc5=cell.column;field=_1fc5.field;_1fc6=cell.element.contents||cell.element;if((cmp=_1fc5.editorInstance)){if(_1f99!=_1fc6){row=cell.row;dirty=this.dirty&&this.dirty[row.id];value=(dirty&&field in dirty)?dirty[field]:_1fc5.get?_1fc5.get(row.data):row.data[field];if(!_1fc5.canEdit||_1fc5.canEdit(cell.row.data,value)){_1f99=_1fc6;_1fc1(_1fc5.editorInstance,_1fc5,_1fc6,value);dfd=new _1f97();setTimeout(function(){if(cmp.focus){cmp.focus();}if(_1fc5._editorBlurHandle){_1fc5._editorBlurHandle.resume();}dfd.resolve(cmp);},0);return dfd.promise;}}}else{if(_1fc5.editor){cmp=_1fc6.widget||_1fc6.input;if(cmp){dfd=new _1f97();if(cmp.focus){cmp.focus();}dfd.resolve(cmp);return dfd.promise;}}}return null;};return function(_1fc7,_1fc8,_1fc9){var _1fca=_1fc7.renderCell||Grid.defaultRenderCell,_1fcb=[],_1fcc;function _1fcd(_1fce){var grid=_1fce.grid,_1fcf;if(!grid.edit){grid.edit=edit;_1fcb.push(on(grid.domNode,".dgrid-input:focusin",function(){_1f9c=grid.cell(this);}));_1fcf=grid._editorFocusoutHandle=on.pausable(grid.domNode,".dgrid-input:focusout",function(){_1f9c=null;});_1fcb.push(_1fcf);_1fcb.push(_1f98.before(grid,"removeRow",function(row){row=grid.row(row);if(_1f9c&&_1f9c.row.id===row.id){_1fcf.pause();setTimeout(function(){_1fcf.resume();},0);}}));_1fcb.push(_1f98.after(grid,"insertRow",function(_1fd0){var row=grid.row(_1fd0);if(_1f9c&&_1f9c.row.id===row.id){grid.edit(grid.cell(row,_1f9c.column.id));}return _1fd0;}));}};if(!_1fc7){_1fc7={};}_1fc7.editor=_1fc8=_1fc8||_1fc7.editor||"text";_1fc7.editOn=_1fc9=_1fc9||_1fc7.editOn;_1fcc=typeof _1fc8!="string";if(_1fc7.widgetArgs){_1f95.deprecated("column.widgetArgs","use column.editorArgs instead","dgrid 0.4");_1fc7.editorArgs=_1fc7.widgetArgs;}_1f98.after(_1fc7,"init",_1fc9?function(){_1fcd(_1fc7);_1fc7.editorInstance=_1fb6(_1fc7,_1fca);}:function(){var grid=_1fc7.grid;_1fcd(_1fc7);if(_1fcc){_1fcb.push(_1f98.before(grid,"removeRow",function(_1fd1){var _1fd2=grid.cell(_1fd1,_1fc7.id).element,_1fd3=_1fd2&&(_1fd2.contents||_1fd2).widget;if(_1fd3){grid._editorFocusoutHandle.pause();_1fd3.destroyRecursive();}}));}});_1f98.after(_1fc7,"destroy",function(){_1f96.forEach(_1fcb,function(l){l.remove();});if(_1fc7._editorBlurHandle){_1fc7._editorBlurHandle.remove();}if(_1fc9&&_1fcc){_1fc7.editorInstance.destroyRecursive();}_1fc7.grid.edit=null;});_1fc7.renderCell=_1fc9?function(_1fd4,value,cell,_1fd5){if(!_1fd5||!_1fd5.alreadyHooked){on(cell.tagName=="TD"?cell:cell.parentNode,_1fc9,function(){_1f9b=_1fd5;_1fc7.grid.edit(this);});}return _1fca.call(_1fc7,_1fd4,value,cell,_1fd5);}:function(_1fd6,value,cell,_1fd7){if(!_1fc7.canEdit||_1fc7.canEdit(_1fd6,value)){var cmp=_1fae(_1fc7);_1fc1(cmp,_1fc7,cell,value);cell[_1fcc?"widget":"input"]=cmp;}else{return _1fca.call(_1fc7,_1fd6,value,cell,_1fd7);}};return _1fc7;};});},"Sage/MainView/EntityMgr/EntityFilterUtility":function(){define(["Sage/Data/BaseSDataStore","Sage/Utility","dojo/_base/declare","dojo/store/Memory","Sage/Data/SDataServiceRegistry","dojo/string","dgrid/editor","dojo/_base/array","dojo/i18n!./nls/_BaseEntityDetailContent","Sage/MainView/EntityMgr/AddEditEntityFilter/DistinctDetailsView","Sage/MainView/EntityMgr/AddEditEntityFilter/RangeDetailsView","Sage/MainView/EntityMgr/AddEditEntityFilter/AMDDetailsView","Sage/MainView/EntityMgr/AddEditEntityFilter/ADDMDDetailsView","Sage/MainView/EntityMgr/AddEditEntityFilter/UserLookupDetailsView","dojo/date","dojo/dom-class"],function(_1fd8,_1fd9,_1fda,_1fdb,_1fdc,_1fdd,_1fde,_1fdf,_1fe0,_1fe1,_1fe2,_1fe3,_1fe4,_1fe5,_1fe6,_1fe7){var _1fe8=_1fda("Sage.MainView.EntityMgr.EntityFilterUtility",null,{filterTypeDataLoad:false,aggregation:false,operation:false,propertyNameDataLoad:false,propertyIdDataLoad:false,rangeFilterGridCol:false,specialCharacters:false,service:false,_nlsResource:false,specialDates:[":today",":todaystart",":todayend",":yesterday",":yesterdaystart",":yesterdayend",":tomorrow",":tomorrowstart",":tomorrowend",":thisweekstart",":thisweekend",":thismonthstart",":thismonthend",":thisyearstart",":thisyearend",":thisquarterstart",":thisquarterend",":nextweekstart",":nextweekend",":nextmonthstart",":nextmonthend",":nextyearstart",":nextyearend",":nextquarterstart",":nextquarterend",":lastweekstart",":lastweekend",":lastmonthstart",":lastmonthend",":lastyearstart",":lastyearend",":lastquarterstart",":lastquarterend"],constructor:function(){this.service=Sage.Data.SDataServiceRegistry.getSDataService("metadata");this.propertyIdDataLoad=new _1fdb();this.propertyNameDataLoad=new _1fdb();this.filterTypeDataLoad=new _1fdb();this.aggregation=new _1fdb();this.operation=new _1fdb();this.rangeFilterGridCol=new _1fdb();this.specialCharacters=new _1fdb();this._nlsResource=_1fe0;},getPropertiesAssociatedWithFilters:function(_1fe9){this._grabEntityProperties(this,_1fe9,0,100);},_grabEntityProperties:function(_1fea,_1feb,start,count){var _1fec=100;count=count||100;start=start||0;var where="isIncluded ne False";var _1fed=new Sage.SData.Client.SDataResourceCollectionRequest(this.service);_1fed.setResourceKind("entities("+"'"+_1feb.name+"'"+")/properties");_1fed.setQueryArg("startIndex",start);_1fed.setQueryArg("count",count);_1fed.setQueryArg("where",where);var key=_1fed.read({success:function(data){var _1fee=data.$resources;for(var i=0;i<=_1fee.length-1;i++){_1fea.propertyNameDataLoad.add({id:_1fee[i].propertyName,name:_1fee[i].propertyName,type:Sage.Utility.Filters.resolveDataType(_1fee[i].dataTypeId)});_1fea.propertyIdDataLoad.add({id:_1fee[i].id,name:_1fee[i].propertyName,type:Sage.Utility.Filters.resolveDataType(_1fee[i].dataTypeId)});}var _1fef=data.$totalResults;var _1ff0=start+count;var _1ff1=_1fef-_1ff0;if(_1ff1>0){if(_1ff1>=100){_1fea.grabEntityProperties(_1fea,false,_1ff0,100);}else{_1fea.grabEntityProperties(_1fea,false,_1ff0,_1ff1);}}},failure:function(data){var apple=data;}});},getSpecialValues:function(){var arr=Object.getOwnPropertyNames(this.specialDates);if(typeof (arr)==="undefined"||(typeof (arr.length)!=="undefined"&&arr.length===0)){return this.specialDates;}for(var i=0;i<arr.length;i++){if(!this.specialCharacters.get(arr[i])){this.specialCharacters.add({name:arr[i],id:arr[i],property:arr[i]});}}},getSchemasInformationFromSData:function(){var _1ff2=new Sage.SData.Client.SDataResourceCollectionRequest(this.service);_1ff2.setResourceKind("$schema");_1ff2.setQueryArg("format","xml");var self=this;_1ff2.read({success:function(data){self._gSIFSSuccess(data);}});},_gSIFSSuccess:function(data){var _1ff3=data;var _1ff4=this;_1fdf.forEach(data["xs:schema"]["xs:simpleType"],function(curr){if(curr["@name"]=="OrmAnalyticsMetricAggregation--enum"){_1ff4._populateAggregationList(curr["xs:restriction"]["xs:enumeration"]);}if(curr["@name"]=="ComparisonValidatorOperator--enum"){_1ff4._populateOperationList(curr["xs:restriction"]["xs:enumeration"]);}});_1fdf.forEach(data["xs:schema"]["xs:complexType"],function(curr){if(curr["@name"]=="details--choice"){_1ff4._populateFilterTypesList(curr["xs:choice"]["xs:element"]);}if(curr["@name"]=="range--type"){_1ff4._createRangefilterCols(curr["xs:all"]["xs:element"]);}});dojo.publish("Sage/EntityManager/FilterUtilityDone");},_populateFilterTypesList:function(_1ff5){for(var i=0;i<_1ff5.length;i++){var item=_1ff5[i];var nm=item["@name"];this.filterTypeDataLoad.add(this._initialformatDetails(nm));}},_populateAggregationList:function(_1ff6){for(var i=0;i<_1ff6.length;i++){var item=_1ff6[i];this.aggregation.add({id:item["@value"],name:this._nlsResource[item["@value"]]});}},_populateOperationList:function(_1ff7){for(var i=0;i<_1ff7.length;i++){var item=_1ff7[i];this.operation.add({id:item["@value"],name:this._nlsResource[item["@value"]]});}this.operation.add({id:"Contains",name:this._nlsResource["Contains"]});this.operation.add({id:"StartsWith",name:this._nlsResource["StartsWith"]});this.operation.add({id:"EndsWith",name:this._nlsResource["EndsWith"]});},_createCustomTextBox:function(){var _1ff8=_1fda("Sage.MainView.EntityMgr.AddEditEntityFilter.customTxtBx",Sage.UI.Controls.TextBox,{shouldPublishMarkDirty:false,});return _1ff8;},_createCustomValidationTextBox:function(){var _1ff9=_1fda("Sage.MainView.EntityMgr.AddEditEntityFilter.customValTxtBx",Sage.UI.Controls.TextBox,{shouldPublishMarkDirty:false,required:true,placeHolder:this._nlsResource.defaultRangeRowValue});return _1ff9;},_createRangefilterCols:function(_1ffa){for(var i=0;i<_1ffa.length;i++){var item=_1ffa[i];var edit=false;if(item["@name"]=="rangeName"){edit=_1fde({label:this._nlsResource[item["@name"]],field:item["@name"],editOn:"",autoSave:item["@name"]!="rangeId",editable:item["@name"]!="rangeId",hidden:(item["@name"]=="rangeId"||item["@name"]=="customSql"),unhidable:item["@name"]!="displayName",id:"AA"+item["@name"],},this._createCustomValidationTextBox());}else{edit=_1fde({label:this._nlsResource[item["@name"]],field:item["@name"],editOn:"",autoSave:item["@name"]!="rangeId",editable:item["@name"]!="rangeId",hidden:(item["@name"]=="rangeId"||item["@name"]=="customSql"),unhidable:item["@name"]!="displayName",id:item["@name"],},this._createCustomTextBox());}this.rangeFilterGridCol.add(edit);}},_initialformatDetails:function(_1ffb){var name="";var type="";switch(_1ffb){case "distinctFilter":name=this._nlsResource.FilterGridDetailsDistinctFilter;type="filter";break;case "dateDiffMetricFilter":name=this._nlsResource.FilterGridDetailsDateDiffMetricFilter;type="metric";break;case "rangeFilter":name=this._nlsResource.FilterGridDetailsRangeFilter;type="filter";break;case "metricFilter":name=this._nlsResource.FilterGridDetailsMetricFilter;type="metric";break;case "userLookupFilter":name=this._nlsResource.FilterGridDetailsLookupFilter;type="filter";break;case "lookupFilter":name=this._nlsResource.FilterGridDetailsLookupFilter;type="filter";break;default:name=this._nlsResource.FilterGridDetailsCustom;type="filter";break;}return {id:_1ffb,name:name,type:type};},formatDetails:function(_1ffc,_1ffd,_1ffe){if(typeof (_1ffc)!=="undefined"){if(typeof (_1ffc.distinctFilter)!=="undefined"){return {detailsKey:"distinctFilter",detailsObject:_1ffd?new _1fe1({filterUtility:this,details:_1ffc,entityName:_1ffe}):false,detailsLocalizedName:this._nlsResource.FilterGridDetailsDistinctFilter,};}if(typeof (_1ffc.dateDiffMetricFilter)!=="undefined"){return {detailsKey:"dateDiffMetricFilter",detailsObject:_1ffd?new _1fe4({filterUtility:this,details:_1ffc,entityName:_1ffe}):false,detailsLocalizedName:this._nlsResource.FilterGridDetailsDateDiffMetricFilter,};}if(typeof (_1ffc.rangeFilter)!=="undefined"){return {detailsKey:"rangeFilter",detailsObject:_1ffd?new _1fe2({filterUtility:this,details:_1ffc,entityName:_1ffe}):false,detailsLocalizedName:this._nlsResource.FilterGridDetailsRangeFilter,};}if(typeof (_1ffc.metricFilter)!=="undefined"){return {detailsKey:"metricFilter",detailsObject:_1ffd?new _1fe3({filterUtility:this,details:_1ffc,entityName:_1ffe}):false,detailsLocalizedName:this._nlsResource.FilterGridDetailsMetricFilter,};}if(typeof (_1ffc.userLookupFilter)!=="undefined"){return {detailsKey:"userLookupFilter",detailsObject:_1ffd?new _1fe5({filterUtility:this,details:_1ffc,entityName:_1ffe}):false,detailsLocalizedName:this._nlsResource.FilterGridDetailsLookupFilter,};}if(typeof (_1ffc.lookupFilter)!=="undefined"){return {detailsKey:"lookupFilter",detailsObject:_1ffd?new _1fe5({filterUtility:this,details:_1ffc,entityName:_1ffe}):false,detailsLocalizedName:this._nlsResource.FilterGridDetailsLookupFilter,};}return {detailsKey:"custom",detailsObject:false,detailsLocalizedName:this._nlsResource.FilterGridDetailsCustom,};}return false;},getDetailsSection:function(_1fff,_2000){var _2001=_1fff._title==this._nlsResource.FilterGridDetailsMetricFilter?"metricFilter":"distinctFilter";var _2002=false;if(_1fff._EditData){_2002=true;}if(_2000&&_2002&&_1fff._EditData.details){return this.formatDetails(_1fff._EditData.details,true,_1fff.entityName);}if(_1fff.typeDropDowns&&_1fff.typeDropDowns.item&&_1fff.typeDropDowns.item.id){_2001=_1fff.typeDropDowns.item.id;}var _2003=false;if(_2002){_2003=_1fff._EditData.details;}switch(_2001){case "dateDiffMetricFilter":return {detailsKey:"dateDiffMetricFilter",detailsObject:new _1fe4({filterUtility:this,details:_2003,entityName:_1fff.entityName}),detailsLocalizedName:this._nlsResource.FilterGridDetailsDateDiffMetricFilter,};case "metricFilter":return {detailsKey:"metricFilter",detailsObject:new _1fe3({filterUtility:this,details:_2003,entityName:_1fff.entityName}),detailsLocalizedName:this._nlsResource.FilterGridDetailsMetricFilter,};case "distinctFilter":return {detailsKey:"distinctFilter",detailsObject:new _1fe1({filterUtility:this,details:_2003,entityName:_1fff.entityName}),detailsLocalizedName:this._nlsResource.FilterGridDetailsDistinctFilter,};case "rangeFilter":return {detailsKey:"rangeFilter",detailsObject:new _1fe2({filterUtility:this,details:_2003,entityName:_1fff.entityName}),detailsLocalizedName:this._nlsResource.FilterGridDetailsRangeFilter,};case "userLookupFilter":return {detailsKey:"userLookupFilter",detailsObject:new _1fe5({filterUtility:this,details:_2003,entityName:_1fff.entityName}),detailsLocalizedName:this._nlsResource.FilterGridDetailsLookupFilter,};default:return false;}},colonizeLabels:function(_2004){return _1fdd.substitute("${0}:",[_2004]);},grabReaderFriendlyVersionOfAggregationGivenId:function(id){for(var i=0;i<this.aggregation.data.length;i++){if(this.aggregation.data[i].id==id){return this.aggregation.data[i].name;}}return "";},grabItemOfAggregationGivenId:function(id){for(var i=0;i<this.aggregation.data.length;i++){if(this.aggregation.data[i].id==id){return this.aggregation.data[i];}}return "";},grabIdOfAggregationGivenName:function(name){for(var i=0;i<this.aggregation.data.length;i++){if(this.aggregation.data[i].name==name){return this.aggregation.data[i].id;}}return "";},fixToolbarIcons:function(_2005){var _2006=dojo.query("span.dijitButtonNode.imageButtonNode",_2005);for(var i=0;i<_2006.length;i++){_1fe7.remove(_2006[i],"dijitButtonNode imageButtonNode");_2006[i].style.cursor="pointer";}}});return _1fe8;});},"Sage/MainView/EntityMgr/AddEditEntityFilter/DistinctDetailsView":function(){define(["Sage/MainView/EntityMgr/AddEditEntityFilter/_DetailsAddEditDialogBase","dojo/_base/declare","dojo/text!./templates/DistinctDetailsView.html","dojo/i18n!./nls/AddEditFiltersDialog","Sage/UI/Controls/TextBox","Sage/Utility",],function(_2007,_2008,_2009,_200a,_200b,_200c){var _200d=_2008("Sage.MainView.EntityMgr.AddEditEntityFilter.DistinctDetailsView",[_2007],{widgetTemplate:new Simplate(eval(_2009)),_nlsResources:_200a,widgetsInTemplate:true,charactersTextBox:false,constructor:function(){this.hasProperties=true;this.isMetric=false;},postCreate:function(){this._createCharacterController();this.startup();},_createCharacterController:function(){this.lblEntityFiltersDetailsContains.innerHTML=this.filterUtility.colonizeLabels(this._nlsResources.lblCharacter);this.charactersTextBox=new _200b({shouldPublishMarkDirty:false,regExp:"^[0-9]+$",validator:function(value,_200e){var _200f=new RegExp("^0+","g");value=value.replace(_200f,"");if(value.length===0){value=0;}if(value>99){value=99;}if(value<0){value=0;}var str=""+value;var _2010=str.match(this.regExp,"g");if(_2010!==null){this.textbox.value=value;return true;}return false;},invalidMessage:this._nlsResources.FieldMustBeANumber,required:true});dojo.place(this.charactersTextBox.domNode,this.txtEntityFiltersDetailsContains,"only");this.charactersTextBox.textbox.value=0;if(typeof (this.details.distinctFilter)!=="undefined"){this.charactersTextBox.textbox.value=this.details.distinctFilter.characters;}if(typeof (this.details.rangeFilter)!=="undefined"){this.charactersTextBox.textbox.value=this.details.rangeFilter.characters;}this.connect(this.charactersTextBox,"onKeyPress",this._onKeyPress,true);},_onKeyPress:function(e){if(!_200c.restrictToNumberOnKeyPress(e,"number")){dojo.stopEvent(e);}},startup:function(){this.inherited(arguments);},getDetails:function(_2011){if(_2011){return this.charactersTextBox.textbox.value;}var _2012={distinctFilter:{characters:this.charactersTextBox.textbox.value}};return _2012;},isValid:function(){var val=this.charactersTextBox.isValid(true);this.charactersTextBox.onChanged();return val;}});return _200d;});},"Sage/MainView/EntityMgr/AddEditEntityFilter/_DetailsAddEditDialogBase":function(){define(["dijit/_Widget","Sage/_Templated","Sage/Utility","dojo/string","dojo/_base/declare","dojo/i18n!./nls/AddEditFiltersDialog","dojo/dom-style","Sage/UI/Dialogs","dojo/query","dojo/dom-class"],function(_2013,_2014,_2015,_2016,_2017,_2018,_2019,_201a,query,_201b){var _201c=_2017("Sage.MainView.EntityMgr.AddEditEntityFilter._DetailsAddEditDialogBase",[_2013,_2014],{widgetTemplate:new Simplate("<div>Not implemented</div>"),_nlsResources:_2018,Dialog:_201a,Query:query,DomClass:_201b,filterUtility:false,hasProperties:false,isMetric:false,editing:false,details:false,embedded:false,entityName:"",constructor:function(){var obj=arguments;if(obj[0]){var first=obj[0];if(first.filterUtility){this.filterUtility=first.filterUtility;}if(first.isMetric){this.isMetric=first.isMetric;}if(first.details){this.details=first.details;this.editing=first.details&&true;}if(first.hasProperties){this.hasProperties=first.hasProperties;}}},postCreate:function(){},startup:function(){this.inherited(arguments);},getDetails:function(){},isValid:function(){return true;}});return _201c;});},"Sage/MainView/EntityMgr/AddEditEntityFilter/RangeDetailsView":function(){define(["Sage/MainView/EntityMgr/AddEditEntityFilter/_DetailsAddEditDialogBase","dojo/_base/declare","dojo/text!./templates/RangeDetailsView.html","dojo/i18n!./nls/AddEditFiltersDialog","dgrid/Grid","dgrid/Selection","dgrid/OnDemandGrid","dgrid/Keyboard","dojo/store/Memory","dgrid/extensions/ColumnHider","dgrid/editor","dgrid/selector","Sage/UI/Controls/TextBox","Sage/UI/ImageButton","dojo/dom-class","Sage/MainView/EntityMgr/AddEditEntityFilter/DistinctDetailsView"],function(_201d,_201e,_201f,_2020,dGrid,_2021,_2022,_2023,_2024,_2025,_2026,_2027,_2028,_2029,_202a,_202b){var _202c=_201e("Sage.MainView.EntityMgr.AddEditEntityFilter.RangeDetailsView",[_201d],{widgetTemplate:new Simplate(eval(_201f)),_nlsResources:_2020,widgetsInTemplate:true,character:false,rangeGridsObj:false,lastSelectedRange:false,addBtnId:"rangeGrid_addBtn",rmvBtnId:"rangeGrid_removeBtn",tmpRwId:0,constructor:function(obj){this.hasProperties=true;this.isMetric=false;if(dijit.byId(this.addBtnId)){dijit.byId(this.addBtnId).destroy();}if(dijit.byId(this.rmvBtnId)){dijit.byId(this.rmvBtnId).destroy();}},postCreate:function(){this.labelSection.innerHTML=this._nlsResources.lblRange;this._createCharacter();this._createToolbar();this._createRangeGrid();this.startup();},_createToolbar:function(){var add=new _2029({icon:"~/ImageResource.axd?scope=global&type=Global_Images&key=plus_16x16",tooltip:this._nlsResources.lblAdd,onClick:dojo.partial(this._addItemToGrid,this),id:this.addBtnId});dojo.place(add.domNode,this.rangeGridToolbarContainer,"1");var _202d=new _2029({icon:"~/ImageResource.axd?scope=global&type=Global_Images&key=Delete_16x16",tooltip:this._nlsResources.lblRemove,onClick:dojo.partial(this._removeItemFromGrid,this),id:this.rmvBtnId});dojo.place(_202d.domNode,this.rangeGridToolbarContainer,"2");},_addItemToGrid:function(_202e){_202e.rangeGridsObj.store.add({rangeId:_202e.tmpRwId,rangeName:"",upper:"",lower:"",displayName:null,customSQL:null});_202e.tmpRwId++;_202e.rangeGridsObj.refresh();_202e.setGridCount(_202e);},_removeItemFromGrid:function(_202f){if(typeof (_202f.rangeGridsObj.selection)==="undefined"){_202f.Dialog.showWarning(_202f._nlsResources.SelectAnItem,"Infor CRM");return;}var _2030=false;for(var i=0;i<_202f.rangeGridsObj.store.data.length;i++){var _2031=_202f.rangeGridsObj.store.data[i];var _2032=false;var id;var _2033;if(typeof (_2031.id)!=="undefined"){id=_2031.id;_2033=_202f.rangeGridsObj.selection[id];if(typeof (_2033)!=="undefined"){if(_202f.rangeGridsObj.store.remove(id)){_2030=true;i--;_2032=true;}}}if(!_2032&&typeof (_2031.rangeId)!=="undefined"){id=_2031.rangeId;_2033=_202f.rangeGridsObj.selection[id];if(typeof (_2033)!=="undefined"){if(_202f.rangeGridsObj.store.remove(id)){_2030=true;i--;}}}}if(_2030){_202f.rangeGridsObj.refresh();}else{_202f.Dialog.showWarning(_202f._nlsResources.SelectAnItem,"Infor CRM");}_202f.setGridCount(_202f);},_createRangeGrid:function(){var _2034=dojo.data.ObjectStore(dojo.store.Memory({data:[]}));if(this.details&&this.details.rangeFilter&&this.details.rangeFilter.ranges){_2034=dojo.data.ObjectStore(dojo.store.Memory({idProperty:"rangeId",data:this.details.rangeFilter.ranges}));}var cols=this.filterUtility.rangeFilterGridCol.data.sort(function(a,b){var nameA=a["id"],nameB=b["id"];return (nameA<nameB)?-1:(nameA>nameB)?1:0;});var grid=new (_201e([_2022,_2023,_2021,_2026,_2025]))({columns:cols,store:_2034,selectionMode:"extended",allowSelectAll:false,cellNavigation:false,fetchProperties:{sort:[{attribute:"AArangeName",descending:false}]}},this.rangeGridContainer);grid.startup();var _2035=this;window.setTimeout(function(){var obj=dojo.query("div.dgrid-header.dgrid-header-row",grid.domNode);var num=grid._columns[0].headerNode.parentNode.clientHeight;if(typeof (obj)!=="undefined"&&typeof (obj[0])!=="undefined"&&typeof (obj[0].clientHeight)!=="undefined"){num=obj[0].clientHeight;}dojo.query("div.dgrid-scroller",grid.domNode).style("margin-top",num+"px");_2035.filterUtility.fixToolbarIcons(_2035.rangeGridToolbarContainer);grid.startup();});this.rangeGridsObj=grid;this.setGridCount(this);},_createCharacter:function(){this.character=new _202b({embedded:true,isMetric:false,hasProperty:this.hasProperty,details:this.details,filterUtility:this.filterUtility});dojo.place(this.character.domNode,this.characterContainer,"only");},startup:function(){this.inherited(arguments);},getDetails:function(){var _2036={rangeFilter:{characters:this.character.getDetails(true),ranges:[]}};var store=this.rangeGridsObj.store.data;for(var i=0;i<store.length;i++){var range={range:store[i]};range.range.rangeId=this._stripoutNonRangeIds(range);_2036.rangeFilter.ranges.push(range.range);}return _2036;},setGridCount:function(_2037){if(_2037.recordCountLabel){_2037.recordCountLabel.innerHTML=dojo.string.substitute(_2037._nlsResources.totalRecordCountLabel,[_2037.rangeGridsObj.store.data.length]);}},_stripoutNonRangeIds:function(obj){var _2038="[A-Z|0-9|a-z]+[-][A-Z|0-9|a-z]+[-][A-Z|0-9|a-z]+[-][A-Z|0-9|a-z]+[-][A-Z|0-9|a-z]+";var _2039=_2038.match(obj.range.rangeId,"g");if(_2039){if(dojo.isArray(_2039)){if(_2039[0].length==obj.range.rangeId.length){return obj.range.rangeId;}}}return "";},isValid:function(){var list=dojo.query("td.dgrid-cell.dgrid-cell-padding.dgrid-column-AArangeName",this.rangeGridsObj.bodyNode);var _203a=dojo.query("td.dgrid-cell.dgrid-cell-padding.dgrid-column-lower",this.rangeGridsObj.bodyNode);var _203b=dojo.query("td.dgrid-cell.dgrid-cell-padding.dgrid-column-upper",this.rangeGridsObj.bodyNode);var _203c=this.character.isValid();var bool=true;for(var i=0;i<list.length;i++){list[i].widget.isValid(true);list[i].widget.onChanged();var _203d=list[i].widget.state!=="Error"&&!(list[i].widget.state==="Incomplete"&&list[i].widget.required);if(!_203d){list[i].widget.set("state","Error");}if(_203a[i].widget.value>_203b[i].widget.value){_203a[i].widget.set("message",this._nlsResources.LowerMustBeLessThanUpper);_203b[i].widget.set("message",this._nlsResources.LowerMustBeLessThanUpper);_203a[i].widget.set("state","Error");_203b[i].widget.set("state","Error");_203d=false;}bool=bool&&_203d;}return bool&&_203c;}});return _202c;});},"dgrid/selector":function(){define(["dojo/_base/kernel","dojo/_base/array","dojo/on","dojo/aspect","dojo/_base/sniff","put-selector/put"],function(_203e,_203f,on,_2040,has,put){return function(_2041,type){var _2042=[],grid,_2043;if(!_2041){_2041={};}if(_2041.type){_2041.selectorType=_2041.type;_203e.deprecated("columndef.type","use columndef.selectorType instead","dgrid 0.4");}_2041.selectorType=type=type||_2041.selectorType||"checkbox";_2041.sortable=false;function _2044(item){return !grid.allowSelect(grid.row(item));};function _2045(value){return function(event){var rows=event.rows,len=rows.length,state="false",_2046,mixed,i;for(i=0;i<len;i++){var _2047=grid.cell(rows[i],_2041.id).element;if(!_2047){continue;}_2047=(_2047.contents||_2047).input;if(_2047&&!_2047.disabled){_2047.checked=value;_2047.setAttribute("aria-checked",value);}}if(_2043.type=="checkbox"){_2046=grid.selection;mixed=false;for(i in _2046){if(_2046[i]!=grid.allSelected){mixed=true;break;}}_2043.indeterminate=mixed;_2043.checked=grid.allSelected;if(mixed){state="mixed";}else{if(grid.allSelected){state="true";}}_2043.setAttribute("aria-checked",state);}};};function _2048(event){if(event.type=="click"||event.keyCode==32||(!has("opera")&&event.keyCode==13)||event.keyCode===0){var row=grid.row(event);grid._selectionTriggerEvent=event;if(row){if(grid.allowSelect(row)){var _2049=grid._lastSelected&&grid.row(grid._lastSelected);if(type=="radio"){if(!_2049||_2049.id!=row.id){grid.clearSelection();grid.select(row,null,true);grid._lastSelected=row.element;}}else{if(row){if(event.shiftKey){_2045(true)({rows:[row]});}else{_2049=null;}_2049=event.shiftKey?_2049:null;grid.select(_2049||row,row,_2049?undefined:null);grid._lastSelected=row.element;}}}}else{put(this,(grid.allSelected?"!":".")+"dgrid-select-all");grid[grid.allSelected?"clearSelection":"selectAll"]();}grid._selectionTriggerEvent=null;}};function _204a(){grid._hasSelectorInputListener=true;_2042.push(grid.on(".dgrid-selector:click,.dgrid-selector:keydown",_2048));var _204b=grid._handleSelect;grid._handleSelect=function(event){if(this.cell(event).column!=_2041){_204b.apply(this,arguments);}};if(typeof _2041.disabled=="function"){var _204c=grid.allowSelect,_204d=_2041.disabled;grid.allowSelect=function(row){var allow=_204c.call(this,row);if(_204d===_2044){return allow;}else{return allow&&!_204d.call(_2041,row.data);}};_2041.disabled=_2044;}else{_2041.disabled=_2044;}_2042.push(grid.on("dgrid-select",_2045(true)));_2042.push(grid.on("dgrid-deselect",_2045(false)));};var _204e=typeof type=="function"?type:function(value,cell,_204f){var _2050=cell.parentNode,_2044;if(!grid._hasSelectorInputListener){_204a();}_2044=_2041.disabled;put(_2050&&_2050.contents?_2050:cell,".dgrid-selector");var input=cell.input||(cell.input=put(cell,"input[type="+type+"]",{tabIndex:isNaN(_2041.tabIndex)?-1:_2041.tabIndex,disabled:_2044&&(typeof _2044=="function"?_2044.call(_2041,_204f):_2044),checked:value}));input.setAttribute("aria-checked",!!value);return input;};_2040.after(_2041,"init",function(){grid=_2041.grid;});_2040.after(_2041,"destroy",function(){_203f.forEach(_2042,function(l){l.remove();});grid._hasSelectorInputListener=false;});_2041.renderCell=function(_2051,value,cell,_2052,_2053){var row=_2051&&grid.row(_2051);value=row&&grid.selection[row.id];_204e(value,cell,_2051);};_2041.renderHeaderCell=function(th){var label="label" in _2041?_2041.label:_2041.field||"";if(type=="radio"||!grid.allowSelectAll){th.appendChild(document.createTextNode(label));if(!grid._hasSelectorInputListener){_204a();}}else{_204e(false,th,{});}_2043=th.lastChild;};return _2041;};});},"Sage/MainView/EntityMgr/AddEditEntityFilter/AMDDetailsView":function(){define(["Sage/MainView/EntityMgr/AddEditEntityFilter/_DetailsAddEditDialogBase","dojo/_base/declare","dojo/text!./templates/AMDDetailsView.html","dojo/i18n!./nls/AddEditFiltersDialog","Sage/UI/FilteringSelect"],function(_2054,_2055,_2056,_2057,_2058){var _2059=_2055("Sage.MainView.EntityMgr.AddEditEntityFilter.AMDDetailsView",[_2054],{widgetTemplate:new Simplate(eval(_2056)),_nlsResources:_2057,widgetsInTemplate:true,aggregationDropDown:false,_idForAggregtDropDown:"aggregationDpItems",constructor:function(obj){if(!this.embedded){this.hasProperties=true;this.isMetric=true;}if(dijit.byId(this._idForAggregtDropDown)){this.destroy(dijit.byId(this._idForAggregtDropDown));}},destroy:function(_205a){_205a.destroy();},postCreate:function(){this._createAggregateController();this.startup();},_populateDefaultAggregate:function(){var _205b="";if(this.details){if(this.details.metricFilter&&this.details.metricFilter.aggregation){_205b=this.details.metricFilter.aggregation;}if(this.details.dateDiffMetricFilter&&this.details.dateDiffMetricFilter.aggregation){_205b=this.details.dateDiffMetricFilter.aggregation;}if(this.details.aggregation){_205b=this.details.aggregation;}}if(this.aggregation){_205b=this.aggregation;}var obj={context:this,idValue:_205b};dojo.subscribe("Sage/EntityManager/FilterUtilityDone",obj,function(){dijit.byId(this.context._idForAggregtDropDown).item=this.context.filterUtility.grabItemOfAggregationGivenId(this.idValue);dijit.byId(this.context._idForAggregtDropDown).focusNode.value=dijit.byId(this.context._idForAggregtDropDown).item.name||"";});return _205b;},_createAggregateController:function(){this.lblEntityFiltersDetailsAggregation.innerHTML=this.filterUtility.colonizeLabels(this._nlsResources.lblAggregation);this.aggregationDropDown=new _2058({id:this._idForAggregtDropDown,name:"aggregations",value:this._populateDefaultAggregate(),store:this.filterUtility.aggregation,searchAttr:"name",fetchProperties:{sort:[{attribute:"name",descending:false}]}},this._idForAggregtDropDown);dojo.place(this.aggregationDropDown.domNode,this.dpEntityFiltersDetailsAggregation,"only");},startup:function(){this.inherited(arguments);},getDetails:function(_205c){var _205d=this.aggregationDropDown.displayedValue;if(this.aggregationDropDown.item&&this.aggregationDropDown.item.id){_205d=this.aggregationDropDown.item.id;}if(_205c){return _205d;}else{var _205e={metricFilter:{aggregation:_205d}};return _205e;}},isValid:function(){var val=this.aggregationDropDown.isValid(true);if(!val){this.aggregationDropDown.set("state","Error");}else{this.aggregationDropDown.set("state","");}return val;}});return _2059;});},"Sage/MainView/EntityMgr/AddEditEntityFilter/ADDMDDetailsView":function(){define(["Sage/MainView/EntityMgr/AddEditEntityFilter/_DetailsAddEditDialogBase","dojo/_base/declare","dojo/text!./templates/ADDMDDetailsView.html","dojo/i18n!./nls/AddEditFiltersDialog","Sage/UI/ComboBox","Sage/MainView/EntityMgr/AddEditEntityFilter/AMDDetailsView","dojo/dom-style","dojo/store/JsonRest","dijit/Tree","Sage/MainView/EntityMgr/PropertyStore","dijit/TooltipDialog","dijit/form/Button"],function(_205f,_2060,_2061,_2062,_2063,_2064,_2065,_2066,Tree,_2067,_2068,_2069){var _206a=_2060("Sage.MainView.EntityMgr.AddEditEntityFilter.ADDMDDetailsView",[_205f],{widgetTemplate:new Simplate(eval(_2061)),_nlsResources:_2062,widgetsInTemplate:true,aggregation:false,from:false,to:false,myTooltipDialogFrom:null,myTooltipDialogTo:null,treeFrom:null,treeTo:null,constructor:function(obj){this.hasProperties=false;this.isMetric=true;this.entityName=obj.entityName;},postCreate:function(){this._createAggregation();this._createFromFS();this._createToFS();this.startup();},_createFromFS:function(){var self=this;this.treeFrom=new Tree({model:new _2067(this.entityName,true).store,showRoot:false,style:{overflow:"auto",height:"250px",width:"auto"},onClick:function(item){self.propertyDpButtonFrom.set("value",item.property);dijit.popup.close();}});this.lblMetricRangeFrom.innerHTML=this.filterUtility.colonizeLabels(this._nlsResources.lblFrom);var _206b="";if(this.details.dateDiffMetricFilter&&this.details.dateDiffMetricFilter.fromPropertyName){_206b=this.details.dateDiffMetricFilter.fromPropertyName;}this.propertyDpButtonFrom.set("value",_206b);},_showDDFrom:function(){var ele=dojo.query(".propertyDpButtonFrom");var width=_2065.getComputedStyle(ele[ele.length-1]).width;this.myTooltipDialogFrom=new _2068({style:"width:"+width+";",content:this.treeFrom});dojo.addClass(this.myTooltipDialogFrom.domNode,"propertyDialog");dijit.popup.open({popup:this.myTooltipDialogFrom,around:ele[ele.length-1]});},_showDDTo:function(){var ele=dojo.query(".propertyDpButtonTo");var width=_2065.getComputedStyle(ele[ele.length-1]).width;this.myTooltipDialogTo=new _2068({style:"width:"+width+";",content:this.treeTo});dojo.addClass(this.myTooltipDialogTo.domNode,"propertyDialog");dijit.popup.open({popup:this.myTooltipDialogTo,around:ele[ele.length-1]});},_createToFS:function(){var self=this;this.treeTo=new Tree({model:new _2067(this.entityName,true).store,showRoot:false,style:{overflow:"auto",height:"250px",width:"auto"},onClick:function(item){self.propertyDpButtonTo.set("value",item.property);dijit.popup.close();}});this.lblMetricRangeTo.innerHTML=this.filterUtility.colonizeLabels(this._nlsResources.lblTo);var defTo="";if(this.details.dateDiffMetricFilter&&this.details.dateDiffMetricFilter.toPropertyName){defTo=this.details.dateDiffMetricFilter.toPropertyName;}this.propertyDpButtonTo.set("value",defTo);},_createAggregation:function(){this.aggregation=new _2064({embedded:true,isMetric:true,hasProperty:this.hasProperty,details:this.details,filterUtility:this.filterUtility});dojo.place(this.aggregation.domNode,this.aggregate,"only");},startup:function(){this.inherited(arguments);},getDetails:function(){var _206c={dateDiffMetricFilter:{aggregation:this.aggregation.getDetails(true),fromPropertyName:this.propertyDpButtonFrom.value,toPropertyName:this.propertyDpButtonTo.value}};return _206c;},isValid:function(){var _206d=this.aggregation.isValid();if(_206d===true){var val=this.propertyDpButtonFrom.isValid(true);this.propertyDpButtonFrom.onChange();val=val&&this.propertyDpButtonTo.isValid(true);this.propertyDpButtonTo.onChange();return val;}else{return _206d;}}});return _206a;});},"Sage/MainView/EntityMgr/AddEditEntityFilter/UserLookupDetailsView":function(){define(["Sage/MainView/EntityMgr/AddEditEntityFilter/_DetailsAddEditDialogBase","dojo/_base/declare","dojo/text!./templates/UserLookupDetailsView.html","dojo/i18n!./nls/AddEditFiltersDialog","dgrid/Grid","dgrid/Selection","dgrid/OnDemandGrid","dgrid/Keyboard","dojo/store/Memory","dgrid/extensions/ColumnHider","dgrid/editor","Sage/UI/Controls/CheckBox"],function(_206e,_206f,_2070,_2071,dGrid,_2072,_2073,_2074,_2075,_2076,_2077,_2078){var _2079=_206f("Sage.MainView.EntityMgr.AddEditEntityFilter.UserLookupDetailsView",[_206e],{widgetTemplate:new Simplate(eval(_2070)),_nlsResources:_2071,constructor:function(){this.hasProperties=true;this.isMetric=false;},postCreate:function(){this.labelSection.innerHTML=this._nlsResources.lblOperators;this._createOperationsGrid();this.startup();},_createCustomCheckBox:function(){var _207a=_206f("Sage.MainView.EntityMgr.AddEditEntityFilter.customChkBx",Sage.UI.Controls.CheckBox,{shouldPublishMarkDirty:false,constructor:function(){},postCreate:function(){if(this.hotKey!==""){this.focusNode.accessKey=this.hotKey;}this.connect(this,"onChange",this.onChanged);},});return _207a;},_createDataForList:function(){var list=this.filterUtility.operation.data;var _207b=new _2075();for(var i=0;i<list.length;i++){var _207c=false;if(this.details&&this.details.userLookupFilter&&this.details.userLookupFilter.operators&&list[i].id){_207c=this.details.userLookupFilter.operators.indexOf(list[i].id)>=0;}_207b.add({id:list[i].id,data:_207c,label:list[i].name});}return _207b;},_createOperationsGrid:function(){var _207d=this._createDataForList();var grid=new (_206f([_2073,_2074,_2072,_2077]))({columns:[_2077({label:"",field:"data",autoSave:true,editable:true,id:"col1",},this._createCustomCheckBox()),{label:"",field:"label",autoSave:true,editable:false,id:"col2",}],showHeader:false,store:_207d,selectionMode:"extended",allowSelectAll:true,cellNavigation:false},this.operatorsListContainer);this.Query("div.dgrid-scroller",grid.domNode).style("overflow-y","auto");this.rangeGridsObj=grid;var self=this;grid.startup();},startup:function(){this.inherited(arguments);},getDetails:function(){var list=this.rangeGridsObj.store.data;var _207e=[];for(var i=0;i<list.length;i++){if(list[i].data){_207e.push(list[i].id);}}return {userLookupFilter:{operators:_207e}};}});return _2079;});},"Sage/MainView/EntityMgr/EntityManagerFormatter":function(){define(["Sage/Utility","dojo/date/locale","dojo/number","dojo/string","dojo/_base/array","dojo/i18n!./nls/EntityManagerFormatter","Sage/Reporting/Enumerations"],function(_207f,_2080,_2081,_2082,_2083,_2084,_2085){Sage.namespace("Sage.MainView.EntityMgr.EntityManagerFormatter");dojo.mixin(Sage.MainView.EntityMgr.EntityManagerFormatter,{GetKey:function(value){return value.$key;},formatCountProps:function(value){return value.$resources.length;},formatCountFilter:function(value){var _2086=0,_2087=0;for(var i=0;i<value.$resources.length;i++){if(value.$resources[i].filterType.indexOf("analyticsMetric")>-1){++_2086;}else{++_2087;}}return _2087;},formatCountMetric:function(value){var _2088=0,_2089=0;for(var i=0;i<value.$resources.length;i++){if(value.$resources[i].filterType.indexOf("analyticsMetric")>-1){++_2088;}else{++_2089;}}return _2088;},formatProperCaseValue:function(value){try{if(typeof value==="string"){return value.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase();});}else{return "";}}catch(error){}return "";}});return Sage.MainView.EntityMgr.EntityManagerFormatter;});},"Sage/MainView/EntityMgr/EntityFilterConfigurationProvider":function(){define(["Sage/Services/_ServiceMixin","Sage/_ConfigurationProvider","Sage/MainView/EntityMgr/EntityManagerGroupContextService","dijit/registry","dojo/_base/declare","Sage/Utility/Filters","dojo/_base/lang","dojo/json"],function(_208a,_208b,_208c,_208d,_208e,_208f,lang,json){var _2090=_208e("Sage.MainView.EntityMgr.EntityFilterConfigurationProvider",[_208b,_208a],{_configuration:null,_hasLayoutConfiguration:false,_hasFilterHiddenConfiguration:false,_currentUserId:false,serviceMap:{"groupContextService":"ClientGroupContext","metaDataService":{type:"sdata",name:"metadata"},"systemDataService":{type:"sdata",name:"system"}},constructor:function(_2091){this.inherited(arguments);if(this.groupContextService.declaredClass!=="Sage.MainView.EntityMgr.EntityManagerGroupContextService"){Sage.Services.removeService("ClientGroupContext");this.groupContextService=new _208c();Sage.Services.addService("ClientGroupContext",this.groupContextService);}this._subscribes.push(dojo.subscribe("/group/context/changed",this,this._onGroupContextChanged));},requestConfiguration:function(_2092){this._configuration={};this._hasLayoutConfiguration=false;this._hasFilterHiddenConfiguration=false;this._onRequestConfigurationSuccess(_2092,null);this._getHiddenFilters(_2092);},onConfigurationChange:function(){},getFilterFormatter:function(_2093){if(_2093){if(_2093.filterName==="ExecutionType"){}}return false;},_onGroupContextChanged:function(){this.onConfigurationChange();},_createConfiguration:function(entry,_2094){var _2095=this.groupContextService.getCurrentListConfig();if(this.groupContextService._currentContext.isNonEntityBased){this._configuration=_2095.getNonEntityBasedFilterConfig(_2094);}else{this._configuration=_2095.getFilterConfig(this.metaDataService,entry,_2094);}if(!this._configuration){this._configuration={};}this._configuration.getFilterManager=function(){var _2096=_208d.byId("list");return _2096&&_2096.get("filterManager");};this._hasLayoutConfiguration=true;},_onRequestConfigurationSuccess:function(_2097,entry){this._createConfiguration(entry,_2097);this._callOptionsSuccess(_2097);},_onRequestConfigurationFailure:function(_2098,_2099){if(_2098.failure){_2098.failure.call(_2098.scope||this,_2099,_2098,this);}},_getHiddenFilters:function(_209a){var key=this._getHiddenFiltersKey();if(key){_208f.getHiddenFilters(key,lang.hitch(this,this._onHiddenFiltersFetchComplete,_209a||{}),function(err){console.error(err);});}},_getHiddenFiltersKey:function(){var key=_208f.getHiddenFiltersKey();return key;},_onHiddenFiltersFetchComplete:function(_209b,_209c){if(_209c&&_209c.response&&_209c.response.value){this._configuration._hiddenFilters=json.parse(_209c.response.value);if(this._configuration._hiddenFilters&&this._configuration._hiddenFilters.constructor===Array){this._configuration._hiddenFilters={};}}this._configuration._hiddenFiltersKey=this._getHiddenFiltersKey();this._hasFilterHiddenConfiguration=true;this._callOptionsSuccess(_209b);},_callOptionsSuccess:function(_209d){if(!this._hasLayoutConfiguration||!this._hasFilterHiddenConfiguration){return;}if(_209d.success){_209d.success.call(_209d.scope||this,this._configuration,_209d,this);this._hasLayoutConfiguration=false;this._hasFilterHiddenConfiguration=false;}}});return _2090;});},"Sage/MainView/Options/OptionsDialog":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/topic","Sage/UI/Controls/_DialogHelpIconMixin","dojo/text!./templates/OptionsDialog.html","dojo/i18n!./nls/OptionsDialog","Sage/Utility","dijit/_Widget","Sage/_Templated","dijit/Dialog","dijit/form/Form","dijit/form/Select"],function(_209e,_209f,lang,topic,_20a0,_20a1,_20a2,_20a3,_20a4,_20a5){var _20a6=_20a3.makeTemplateFromString(_20a1);var _20a7=_209e("Sage.MainView.Options.OptionsDialog",[_20a4,_20a5],{id:"dlgOptions",_nlsResources:_20a2,_dialog:null,widgetsInTemplate:true,_helpIconTopic:"GroupListOptions",widgetTemplate:_20a6,constructor:function(){},destroy:function(){this.inherited(arguments);},show:function(){this._dialog.show();if(this._helpIconTopic){if(!this._dialog.helpIcon){lang.mixin(this._dialog,new _20a0());this._dialog.createHelpIconByTopic(this._helpIconTopic);}}},startup:function(){var svc=Sage.Services.getService("UserOptions");if(svc){svc.get("FieldCount","ExtendedGroupList",lang.hitch(this,function(_20a8){if(_20a8&&_20a8.value){this.txtFieldCount.set("value",_20a8.value);this.txtFieldCount.focusNode.textbox.value=_20a8.value;}else{this.txtFieldCount.set("value",0);this.txtFieldCount.focusNode.textbox.value=0;}}));svc.get("HideOnSelection","ExtendedGroupList",lang.hitch(this,function(_20a9){if(_20a9&&_20a9.value){if(_20a9.value==="T"){this.chkHideOnSelection.set("checked",true);}else{this.chkHideOnSelection.set("checked",false);}}else{this.chkHideOnSelection.set("checked",false);}}));svc.get("ShowOnLookup","ExtendedGroupList",lang.hitch(this,function(_20aa){if(_20aa&&_20aa.value){if(_20aa.value==="T"){this.chkShowOnLookup.set("checked",true);}else{this.chkShowOnLookup.set("checked",false);}}else{this.chkShowOnLookup.set("checked",false);}}));svc.get("StayInDetailView","GroupLookup",lang.hitch(this,function(_20ab){if(_20ab&&_20ab.value){if(_20ab.value==="T"){this.chkStayInDetailView.set("checked",true);}else{this.chkStayInDetailView.set("checked",false);}}else{this.chkStayInDetailView.set("checked",false);}}));}},_cmdOk_OnClick:function(){this._saveUserOptions();this._dialog.hide();},_cmdCancel_OnClick:function(){this._dialog.hide();},_dialog_OnCancel:function(){this._dialog.hide();},_saveUserOptions:function(){var svc=Sage.Services.getService("UserOptions");if(svc){var _20ac={extendedGroupList:{},groupLookup:{}};if(this.frmOptions.attr("value").rbLayout==="all"){_20ac.extendedGroupList.fieldCount=0;}else{_20ac.extendedGroupList.fieldCount=parseInt(this.txtFieldCount.focusNode.textbox.value);}svc.set("FieldCount","ExtendedGroupList",_20ac.extendedGroupList.fieldCount);var value=(this.chkHideOnSelection.checked)?"T":"F";svc.set("HideOnSelection","ExtendedGroupList",value);_20ac.extendedGroupList.hideOnSelection=this.chkHideOnSelection.checked;value=(this.chkShowOnLookup.checked)?"T":"F";svc.set("ShowOnLookup","ExtendedGroupList",value);_20ac.extendedGroupList.showOnLookup=this.chkShowOnLookup.checked;value=(this.chkStayInDetailView.checked)?"T":"F";svc.set("StayInDetailView","GroupLookup",value);_20ac.groupLookup.stayInDetailView=this.chkStayInDetailView.checked;topic.publish("userOptions/changed",_20ac);}}});return _20a7;});},"Sage/MainView/FormManager":function(){define(["dojo/string","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/dom-construct","dojo/topic","dojo/i18n","dijit/registry","Sage/Services/_ServiceMixin","Sage/UI/Columns/SlxLink","Sage/UI/SDataMainViewConfigurationProvider","Sage/QuickForms/Design/DesignPanel","dojo/i18n!./nls/FormManager"],function(_20ad,_20ae,lang,array,_20af,topic,i18n,_20b0,_20b1,_20b2,_20b3,_20b4,_20b5){return _20ae("Sage.MainView.FormManager",[_20b3,_20b1],{serviceMap:{"dataService":{type:"sdata",name:"metadata"}},constructor:function(){lang.mixin(this,_20b5);this._designGroupTopics=[topic.subscribe("/quickforms/design/default/load",lang.hitch(this,this._onQuickFormLoad))];},_onQuickFormLoad:function(entry,panel){var _20b6=dijit.byId("titlePane");if(_20b6){_20b6.set("title",lang.getObject("entity.Name",false,entry));}document.title=this.pageTitle;},requestConfiguration:function(_20b7){if(_20b7.success){_20b7.success.call(_20b7.scope||this,this._createListConfiguration(),this);}},_createListConfiguration:function(){var store=new Sage.Data.SDataStore({service:this.dataService,resourceKind:"forms"}),_20b8=[{field:"entity.Name",name:"Name",width:"200px",type:_20b2,idField:"entity.Name",nosort:true}];this.listPanelConfiguration={list:{structure:_20b8,store:store,id:"formManagerListConfig"},detail:false,summary:false,toolBar:{}};return this.listPanelConfiguration;},requestTitlePaneConfiguration:function(_20b9){if(_20b9.success){_20b9.success.call(_20b9.scope||this,this._createTitlePaneConfiguration(),this);}},_createTitlePaneConfiguration:function(){this.titlePaneConfiguration={tabs:false,menu:false,titleFmtString:this.titleFmtString};return this.titlePaneConfiguration;},requestDetailModeConfiguration:function(_20ba){if(_20ba.success){_20ba.success.call(_20ba.scope||this,this._createDetailModeConfiguration(),this);}if(this.designPanel){this.designPanel.read(this._getQueryStringParam("entityid"));}},_createDetailModeConfiguration:function(){var _20bb=this.designPanel=new _20b4();return {content:_20bb,toolBar:false};},_getQueryStringParam:function(param){var query=document.location.href.split("?")[1];if(typeof query==="undefined"){return false;}var _20bc=query.split("&");for(var i=0;i<_20bc.length;i++){var parts=_20bc[i].split("=");if(parts[0].toLowerCase()===param.toLowerCase()){return parts[1];}}return false;}});});},"Sage/QuickForms/Design/DesignPanel":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/json","dojo/string","dojo/topic","dojo/dom-construct","dojo/dom-class","dojo/dom-attr","dijit/layout/BorderContainer","dijit/layout/ContentPane","dijit/form/Select","Sage/Services/_ServiceMixin","Sage/_Templated","Sage/Utility","Sage/UI/ImageButton","./Help","./DesignSurface","./FormDesigner","./NonVisibleControlContainer","./PropertyEditorContainer","dojo/i18n!./nls/DesignPanel"],function(_20bd,array,lang,json,_20be,topic,_20bf,_20c0,_20c1,_20c2,_20c3,_20c4,_20c5,_20c6,_20c7,_20c8,Help,_20c9,_20ca,_20cb,_20cc,_20cd){return _20bd("Sage.QuickForms.Design.DesignPanel",[_20c2,_20c5,_20c6],{serviceMap:{"dataService":{type:"sdata",name:"metadata"}},widgetsInTemplate:true,contentTemplate:new Simplate(["<div class=\"design-panel-toolbar\" data-dojo-type=\"dijit.Toolbar\" data-dojo-props=\"region: 'top', align: 'right', splitter: false\">","<span class=\"design-panel-culture-label\">{%: $.cultureText %}</span><div class=\"design-panel-culture\" data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_cultureSelect\" data-dojo-attach-event=\"onChange:_onCultureChange\"></div>","<div data-dojo-type=\"Sage.UI.ImageButton\" icon=\"images/icons/Save_16x16.gif\" tooltip=\"{%: $.saveText %}\" data-dojo-attach-point=\"saveIcon\" data-dojo-attach-event=\"onClick:save\" class=\"design-panel-save\"></div>","<div data-dojo-type=\"Sage.UI.ImageButton\" icon=\"images/icons/Help_16x16.png\" tooltip=\"{%: $.helpText %}\" data-dojo-attach-event=\"onClick:help\" class=\"design-panel-help\"></div>","</div>","<div class=\"design-panel-surface\" data-dojo-type=\"Sage.QuickForms.Design.DesignSurface\"  data-dojo-attach-point=\"designSurface\" data-dojo-props=\"region: 'center'\"></div>","<div class=\"design-panel-hidden\" data-dojo-type=\"Sage.QuickForms.Design.NonVisibleControlContainer\" data-dojo-attach-point=\"nonVisibleContainer\" data-dojo-props=\"region: 'bottom', layoutPriority:2, splitter: true\"></div>","<div class=\"design-panel-editor\" data-dojo-type=\"Sage.QuickForms.Design.PropertyEditorContainer\" data-dojo-attach-point=\"editorContainer\" data-dojo-props=\"region: 'bottom', layoutPriority:1, splitter: true\"></div>"]),loadingTemplate:new Simplate(["<div class=\"design-panel-loading-indicator\"><span>{%: $.loadingText %}</span></div>"]),savingTemplate:new Simplate(["<div class=\"design-panel-saving-indicator\"><span>{%: $.savingText %}</span></div>"]),_designGroup:null,_designGroupTopics:null,_cultureSelect:null,_previousName:null,_previousEntry:null,currentCulture:"iv",designSurface:null,nonVisibleContainer:null,editorContainer:null,form:null,formDirty:false,helpTopicName:"Working_with_forms",helpSubSystemName:"WebForms",designGroup:"default",_saveMode:false,cultureList:["iv","de-DE","fr-FR","it-IT","ru-RU"],cultureListText:{"iv":"[invariant]","de_DE":"de-DE","fr_FR":"fr-FR","it_IT":"it-IT","ru_RU":"ru-RU"},helpText:"Help",saveText:"Save",cultureText:"Culture:",loadingText:"Loading...",savingText:"Saving...",saveErrorText:"An error occurred saving the form.",readErrorText:"Could not load the requested form.",cultureReloadConfirmText:"You have unsaved changes.  Are you sure you want to reload the form with a different culture?",constructor:function(){lang.mixin(this,_20cd);},_getDesignGroupAttr:function(){return this._designGroup;},_setDesignGroupAttr:function(value){if(this._designGroupTopics){array.forEach(this._designGroupTopics,function(topic){this.unsubscribe(topic);},this);}this._designGroup=value;this._designGroupTopics=[this.subscribe("/quickforms/design/designerModified",this._onDesignerModified)];},_ignoreModifiedOn:{"focused":true},_onDesignerModified:function(_20ce,name,value,_20cf,_20d0){if(!this._ignoreModifiedOn[name]&&_20ce.get("form")===this.form){this.formDirty=true;}},buildRendering:function(){this.inherited(arguments);_20c0.add(this.domNode,"design-panel");_20bf.place(this.loadingTemplate.apply(this),this.designSurface.domNode);_20bf.place(this.savingTemplate.apply(this),this.designSurface.domNode);},startup:function(){this.inherited(arguments);array.forEach(this.cultureList,function(item){this._cultureSelect.addOption({value:item,label:this.cultureListText[item.replace("-","_")]||item,selected:item==this.currentCulture});},this);},_onCultureChange:function(value){if(this.currentCulture===value){return;}if(this.form&&this.formDirty){if(!confirm(this.cultureReloadConfirmText)){this._cultureSelect._onChangeActive=false;this._cultureSelect.set("value",this.currentCulture);this._cultureSelect._onChangeActive=true;return;}}this.currentCulture=value;if(this._previousName){this.read(this._previousName);}else{if(this._previousEntry){this.load(this._previousEntry);}}},help:function(){Help.open(this.helpTopicName,this.helpSubSystemName);},save:function(){if(this._saveMode){return;}this._saveMode=true;var _20d1=new Sage.SData.Client.SDataSingleResourceRequest(this.dataService).setResourceKind("forms").setResourceSelector(_20be.substitute("\"${0}\"",[this.form.get("name")])).setQueryArg("language",this.currentCulture!="iv"?this.currentCulture:"");var entry=lang.clone(this.form.get("entry"));entry["$etag"]=entry["etag"];delete entry["etag"];delete entry["ifMatch"];delete entry["httpStatus"];this._showSavingIndicator();_20d1.update(entry,{success:lang.hitch(this,this._onSaveFormSuccess,this.form),failure:lang.hitch(this,this._onSaveFormFailure,this.form)});},_onSaveFormSuccess:function(form,entry){this._hideSavingIndicator();this._saveMode=false;form.set("etag",entry["etag"]);this.formDirty=false;},_onSaveFormFailure:function(form,xhr){this._hideSavingIndicator();this._saveMode=false;alert(this.saveErrorText);},_showLoadingIndicator:function(){_20c0.add(this.domNode,"design-panel-loading");},_showSavingIndicator:function(){_20c1.set(this.saveIcon,"disabled",true);_20c0.add(this.domNode,"design-panel-saving");},_hideLoadingIndicator:function(){_20c0.remove(this.domNode,"design-panel-loading");},_hideSavingIndicator:function(){_20c0.remove(this.domNode,"design-panel-saving");_20c1.set(this.saveIcon,"disabled",false);},read:function(form){this.clear();this._previousName=form;this._previousEntry=null;var _20d2=new Sage.SData.Client.SDataSingleResourceRequest(this.dataService).setResourceKind("forms").setResourceSelector(_20be.substitute("\"${0}\"",[form])).setQueryArg("language",this.currentCulture!="iv"?this.currentCulture:"");this._showLoadingIndicator();_20d2.read({success:lang.hitch(this,this._onRequestFormSuccess),failure:lang.hitch(this,this._onRequestFormFailure)});},_onRequestFormSuccess:function(entry){this._hideLoadingIndicator();this._apply(entry);},_onRequestFormFailure:function(xhr){this._hideLoadingIndicator();alert(this.readErrorText);},clear:function(){topic.publish(_20be.substitute("/quickforms/design/${0}/clear",[this._designGroup]),this);this.designSurface.clear();this.nonVisibleContainer.clear();this.editorContainer.clear();if(this.form){this.form.destroy();}this.form=null;this.formDirty=false;},load:function(entry){this.clear();this._previousName=null;this._previousEntry=entry;this._apply(entry);},_apply:function(entry){this.original=entry;this.form=new _20ca({entry:lang.clone(entry)});this.designSurface.set("form",this.form);array.forEach(this.form.get("controls"),function(_20d3){if(_20d3.designSupport&&_20d3.designSupport.visible){this.designSurface.addChild(_20d3);}else{this.nonVisibleContainer.addChild(_20d3);}},this);this.designSurface.layout();this.nonVisibleContainer.layout();topic.publish(_20be.substitute("/quickforms/design/${0}/load",[this._designGroup]),entry,this);topic.publish(_20be.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),this.form,false,this);}});});},"Sage/QuickForms/Design/Help":function(){define(["dojo/string"],function(_20d4){return {defaultTarget:"MCWebHelp",defaultTopic:null,defaultSubSystem:null,defaultUrlFormat:"help/WebClient_CSH.htm#${0}",subSystemUrlFormat:"help/Subsystems/${1}/${1}_CSH.htm#${0}",open:function(topic,_20d5,_20d6){var url=Sage.Link.getHelpUrl(topic,_20d5);window.open(url,_20d6||this.defaultTarget);}};});},"Sage/QuickForms/Design/DesignSurface":function(){define(["dojo/query","dojo/keys","dojo/string","dojo/topic","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/event","dojo/dom-attr","dojo/dom-class","dojo/dom-style","dojo/dom-geometry","dojo/dom-construct","dojo/NodeList-traverse","dojo/NodeList-manipulate","dijit/registry","dijit/focus","dijit/layout/_LayoutWidget","dijit/Menu","dijit/MenuItem","dijit/MenuSeparator","dijit/PopupMenuItem","Sage/_EventMapMixin","dojo/dnd/Source","dojo/dnd/Manager","./ControlDesignerRegistry","./ControlDesigner","./FormDesigner","./RowDesigner","./ColumnDesigner","dojo/i18n!./nls/DesignSurface"],function(query,keys,_20d7,topic,_20d8,array,lang,event,_20d9,_20da,_20db,_20dc,_20dd,_20de,_20df,_20e0,focus,_20e1,Menu,_20e2,_20e3,_20e4,_20e5,_20e6,_20e7,_20e8,_20e9,_20ea,_20eb,_20ec,_20ed){var _20ee=_20d8([_20e6],{owner:null,accept:["designer","property"],constructor:function(){this.creator=true;},checkAcceptance:function(_20ef,nodes){if(_20ef==this){return false;}return this.inherited(arguments);},onDropInternal:function(_20f0,nodes,copy){},onDropExternal:function(_20f1,nodes,copy){var node,item;if(_20f1.isInstanceOf(_20ee)){node=nodes[0];item=node&&_20f1.getItem(node.id);if(item){_20f1.selectNone();this.selectNone();this.onDropDesigner(this,_20e0.byId(item.data));}}else{node=nodes[0];item=node&&_20f1.getItem(node.id);if(item&&array.indexOf(item.type,"property")>=0){_20f1.selectNone();this.selectNone();this.onDropProperty(this,item.context);}}},onDropProperty:function(_20f2,_20f3){},onDropDesigner:function(_20f4,_20f5){},onDndStart:function(_20f6,nodes,copy){this.inherited(arguments);},onDndCancel:function(){this.inherited(arguments);},_normalizedCreator:function(data,hint){var _20f7=_20e0.byId(data),_20f8=_20dd.toDom(_20f7.domNode.parentNode.innerHTML),_20f9=_20dd.create("div",{"class":"design-surface-dnd-avatar"});_20dd.place(_20f8,_20f9);return {node:_20f9};},onDraggingOver:function(){this.inherited(arguments);if(this.empty){var _20fa=_20e7.manager();if(_20fa.source.isInstanceOf(_20ee)){var _20fb=this.owner.validateMoveFromSource(this,_20fa.source);_20fa.canDrop(!_20fb);}else{}}},onMouseMove:function(e){var _20fc,_20fd;if(this.isDragging&&!this.empty){_20fc=this.before;_20fd=this.targetAnchor;}this.inherited(arguments);if(this.isDragging&&!this.empty){if(this.targetAnchor!=_20fd||this.before!=_20fc){var _20fe=_20e7.manager();if(_20fe.source.isInstanceOf(_20ee)){var _20ff=this.owner.validateMoveFromSource(this,_20fe.source);_20fe.canDrop(!_20ff);}else{}}}}});var _2100=_20d8([Menu],{owner:null,aboveText:"Above",belowText:"Below",leftText:"Left",rightText:"Right",insertRowText:"Insert Row",insertColumnText:"Insert Column",constructor:function(){lang.mixin(this,_20ed);},postCreate:function(){this.inherited(arguments);var _2101=new Menu(),_2102=new Menu();_2101.addChild(new _20e2({label:this.aboveText,onClick:lang.hitch(this,this._insertRow,true)}));_2101.addChild(new _20e2({label:this.belowText,onClick:lang.hitch(this,this._insertRow,false)}));_2102.addChild(new _20e2({label:this.leftText,onClick:lang.hitch(this,this._insertColumn,true)}));_2102.addChild(new _20e2({label:this.rightText,onClick:lang.hitch(this,this._insertColumn,false)}));this.addChild(new _20e4({label:this.insertRowText,popup:_2101}));this.addChild(new _20e4({label:this.insertColumnText,popup:_2102}));},_insertColumn:function(_2103){if(this.owner){this.owner.insertColumnAround(this.target,_2103);}},_insertRow:function(_2104){if(this.owner){this.owner.insertRowAround(this.target,_2104);}},open:function(_2105,node,_2106){this.target=_2105;if(this.target){this._scheduleOpen(node,null,_2106);}}});var _2107=_20d8([Menu],{owner:null,aboveText:"Above",belowText:"Below",insertRowText:"Insert Row",deleteRowText:"Delete Row",constructor:function(){lang.mixin(this,_20ed);},postCreate:function(){this.inherited(arguments);var _2108=new Menu();_2108.addChild(new _20e2({label:this.aboveText,onClick:lang.hitch(this,this._insertRow,true)}));_2108.addChild(new _20e2({label:this.belowText,onClick:lang.hitch(this,this._insertRow,false)}));this.addChild(new _20e4({label:this.insertRowText,popup:_2108}));this.addChild((this._delete=new _20e2({label:this.deleteRowText,onClick:lang.hitch(this,this._deleteRow,false)})));},open:function(_2109,node,_210a){this.target=_2109;if(this.target){this._delete.set("disabled",this.owner.validateDeleteRowAt(this.target.index));this._scheduleOpen(node,null,_210a);}},_insertRow:function(_210b){if(this.owner){var index=_210b?this.target.get("index"):this.target.get("index")+1;this.owner.insertRowAt(index);}},_deleteRow:function(){if(this.owner){this.owner.deleteRowAt(this.target.index);}}});var _210c=_20d8([Menu],{owner:null,leftText:"Left",rightText:"Right",insertColumnText:"Insert Column",deleteColumnText:"Delete Column",constructor:function(){lang.mixin(this,_20ed);},postCreate:function(){this.inherited(arguments);var _210d=new Menu();_210d.addChild(new _20e2({label:this.leftText,onClick:lang.hitch(this,this._insertColumn,true)}));_210d.addChild(new _20e2({label:this.rightText,onClick:lang.hitch(this,this._insertColumn,false)}));this.addChild(new _20e4({label:this.insertColumnText,popup:_210d}));this.addChild((this._delete=new _20e2({label:this.deleteColumnText,onClick:lang.hitch(this,this._deleteColumn)})));},open:function(_210e,node,_210f){this.target=_210e;if(this.target){this._delete.set("disabled",!!this.owner.validateDeleteColumnAt(this.target.index));this._scheduleOpen(node,null,_210f);}},_insertColumn:function(_2110){if(this.owner){var index=_2110?this.target.get("index"):this.target.get("index")+1;this.owner.insertColumnAt(index);}},_deleteColumn:function(){if(this.owner){this.owner.deleteColumnAt(this.target.index);}}});var _2111=_20d8("Sage.QuickForms.Design.DesignSurface",[_20e1,_20e5],{events:{"click":"_onClick","keydown":"_onKeyDown",".design-surface-selector-cell[data-select-row]:contextmenu":"_onRowContextMenu",".design-surface-selector-cell[data-select-column]:contextmenu":"_onColumnContextMenu",".dojoDndSource:contextmenu":"_onCellContextMenu"},_designGroup:null,_designGroupTopics:null,_rowContextMenu:null,_columnContextMenu:null,_cellContextMenu:null,baseClass:"design-surface",selections:null,form:null,columns:null,rows:null,columnCount:3,currentLayout:null,tableNode:null,singleSelection:true,designGroup:"default",bisectionErrorText:"The placement will cause another control to be bisected.",rowBoundsErrorText:"The chosen row is out of bounds.",columnBoundsErrorText:"The chosen column is out of bounds.",rowSpanBoundsErrorText:"The chosen row span is out of bounds.",columnSpanBoundsErrorText:"The chosen column span is out of bounds.",occupiedErrorText:"There is not enough empty space for the chosen size.",_getDesignGroupAttr:function(){return this._designGroup;},_setDesignGroupAttr:function(value){if(this._designGroupTopics){array.forEach(this._designGroupTopics,function(topic){this.unsubscribe(topic);},this);}this._designGroup=value;this._designGroupTopics=[this.subscribe(_20d7.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),this._onDesignerSelected)];},_onRowContextMenu:function(evt){event.stop(evt);if(this._rowContextMenu){this._rowContextMenu.open(this.findDesignerByNode(evt.target),evt.target,{x:evt.pageX,y:evt.pageY});}},_onColumnContextMenu:function(evt){event.stop(evt);if(this._columnContextMenu){this._columnContextMenu.open(this.findDesignerByNode(evt.target),evt.target,{x:evt.pageX,y:evt.pageY});}},_onCellContextMenu:function(evt){event.stop(evt);if(this._cellContextMenu){this._cellContextMenu.open(this.findDesignerByNode(evt.target),evt.target,{x:evt.pageX,y:evt.pageY});}},constructor:function(){this.selections=[];lang.mixin(this,_20ed);},buildRendering:function(){this.inherited(arguments);_20d9.set(this.domNode,"tabIndex",0);},createContextMenus:function(){this._rowContextMenu=new _2107({owner:this});this._rowContextMenu.startup();this._columnContextMenu=new _210c({owner:this});this._columnContextMenu.startup();this._cellContextMenu=new _2100({owner:this});this._cellContextMenu.startup();},postCreate:function(){this.inherited(arguments);},uninitialize:function(){if(this._sources){array.forEach(this._sources,function(_2112){_2112.destroy();});}if(this._contextMenu){this._contextMenu.destroyRecursive();}this._sources=[];this.inherited(arguments);},startup:function(){if(this._started){return;}this.inherited(arguments);this.createContextMenus();},resize:function(){this.inherited(arguments);array.forEach(this.getChildren(),function(child){if(typeof child.resize=="function"){child.resize();}});if(this._sources){array.forEach(this._sources,function(_2113){_2113.sync();});}},_buildKeyHandlerMap:function(){var map={};map[this.isLeftToRight()?keys.LEFT_ARROW:keys.RIGHT_ARROW]="_onLeftArrow";map[this.isLeftToRight()?keys.RIGHT_ARROW:keys.LEFT_ARROW]="_onRightArrow";map[keys.UP_ARROW]="_onUpArrow";map[keys.DOWN_ARROW]="_onDownArrow";return map;},_onKeyDown:function(evt){var key=evt.keyCode,map=this._keyHandlerMap||(this._keyHandlerMap=this._buildKeyHandlerMap());if(map[key]&&this[map[key]]){this[map[key]](evt);event.stop(evt);}},_onLeftArrow:function(evt){this._moveSelectionIndicator("l");},_onRightArrow:function(evt){this._moveSelectionIndicator("r");},_onUpArrow:function(evt){this._moveSelectionIndicator("u");},_onDownArrow:function(evt){this._moveSelectionIndicator("d");},_moveSelectionIndicator:function(_2114){var _2115=this.selections.length==1?this.selections[0]:null,_2116=_2115&&_2115.designer;if(_2116&&_2116.isInstanceOf(_20e9)){var next=this._findNextWidget(_2116,_2114),cell=next&&query(next.domNode).closest(".design-surface-cell")[0];if(next){this._handleSelectionOf(next,false,cell,next.domNode);}}},_findNextWidget:function(_2117,_2118){var _2119=this.currentLayout,_211a=_2117.get("row")||0,_211b=_2117.get("column")||0,_211c=_2117.get("rowSpan")||1,_211d=_2117.get("columnSpan")||1,spanV=[_211a,_211a+_211c-1],spanH=[_211b,_211b+_211d-1],_211e,_211f,_2120,_2121;switch(_2118){case "u":_211e=[_211a-1,0];_211f=-1;_2120=spanH;_2121=1;break;case "d":_211e=[_211a+_211c,_2119.rows.length-1];_211f=1;_2120=spanH;_2121=1;break;case "l":_211e=spanV;_211f=1;_2120=[_211b-1,0];_2121=-1;break;case "r":_211e=spanV;_211f=1;_2120=[_211b+_211d,_2119.columnCount-1];_2121=1;break;}for(var row=_211e[0];_211f*row<=_211e[1];row+=_211f){for(var _2122=_2120[0];_2121*_2122<=_2120[1];_2122+=_2121){var data=this._readFromLayout(_2119,row,_2122);if(!data){continue;}var _2123=data.widget;if(_2123===_2117){continue;}return _2123;}}return null;},_handleSelectionOf:function(_2124,_2125,_2126,_2127){if(_2124){var _2128=array.some(this.selections,function(_2129){return (_2129.designer===_2124);});if(_2125&&!this.singleSelection){if(!_2128){array.forEach(this.selections,function(_212a){if(_212a.focusNode){_20d9.set(_212a.focusNode,"tabIndex","-1");}});this.selections.push({designer:_2124,styleNode:_2126,focusNode:_2127});if(_2127){_20d9.set(_2127,"tabIndex",0);focus.focus(_2127);}if(_2126){_20da.add(_2126,"design-surface-cell-selected");}this.onSelectionChanged(this.selections,true);topic.publish(_20d7.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),_2124,true,this);}}else{this._clearSelectionDom();this._clearSelectionState(false);this.selections=[{designer:_2124,styleNode:_2126,focusNode:_2127}];if(_2127){_20d9.set(_2127,"tabIndex",0);focus.focus(_2127);}if(_2126){_20da.add(_2126,"design-surface-cell-selected");}this.onSelectionChanged(this.selections,false);topic.publish(_20d7.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),_2124,false,this);}}else{if(this.singleSelection||!_2125){this._clearSelectionDom();this._clearSelectionState();}}},findDesignerByNode:function(_212b){var _212c=this._findSelectableDesignerByNode(_212b);return _212c&&_212c.designer;},_findSelectableDesignerByNode:function(_212d){var cell=query(_212d).closest(".design-surface-cell")[0],node=cell&&query(".dojoDndItem > *",cell)[0],_212e=node&&_20e0.byNode(node);if(_212e){return {designer:_212e,styleNode:cell,focusNode:_212e.domNode};}if(cell&&_20d9.has(cell,"data-select-row")){return {designer:this.form&&this.form.get("rows")[parseInt(_20d9.get(cell,"data-select-row"))],styleNode:cell,focusNode:cell};}if(cell&&_20d9.has(cell,"data-select-column")){return {designer:this.form&&this.form.get("columns")[parseInt(_20d9.get(cell,"data-select-column"))],styleNode:cell,focusNode:cell};}return null;},_onClick:function(evt){var _212f=evt.shiftKey,_2130=this._findSelectableDesignerByNode(evt.target);if(_2130){if(_2130.designer.isInstanceOf(_20e9)){this._handleSelectionOf(_2130.designer,_212f,_2130.styleNode,_2130.focusNode);}else{this._handleSelectionOf(_2130.designer,false,_2130.styleNode,_2130.focusNode);}}else{this._handleSelectionOf(this.form,_212f);}},onSelectionChanged:function(_2131,_2132){},_clearSelectionDom:function(){if(this.selections.length>0){array.forEach(this.selections,function(_2133){if(_2133.focusNode){_20d9.set(_2133.focusNode,"tabIndex","-1");}if(_2133.styleNode){_20da.remove(_2133.styleNode,"design-surface-cell-selected");}});}},_clearSelectionState:function(_2134){if(this.selections.length>0){this.selections=[];if(_2134!==false){this.onSelectionChanged(this.selections);topic.publish(_20d7.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),false,false,this);}}},_syncDomWithSelectionState:function(){array.forEach(this.selections,function(_2135){var _2136=_2135.designer;if(_2136.isInstanceOf(_20e9)){_2135.styleNode=query(_2136.domNode).closest(".design-surface-cell")[0];_2135.focusNode=_2136.domNode;}else{if(_2136.isInstanceOf(_20eb)){_2135.styleNode=query(_20d7.substitute(".design-surface-selector-cell[data-select-row=\"${0}\"]",[_2136.index]),this.domNode)[0];_2135.focusNode=_2135.styleNode;}else{if(_2136.isInstanceOf(_20ec)){_2135.styleNode=query(_20d7.substitute(".design-surface-selector-cell[data-select-column=\"${0}\"]",[_2136.index]),this.domNode)[0];_2135.focusNode=_2135.styleNode;}}}_20d9.set(_2135.focusNode,"tabIndex",0);focus.focus(_2135.focusNode);_20da.add(_2135.styleNode,"design-surface-cell-selected");},this);},_onDesignerSelected:function(_2137,_2138,_2139){if(_2137&&_2139!==this){this._clearSelectionDom();this._clearSelectionState(false);}},_buildLayoutFor:function(_213a){var rows=[],_213b=this.form?this.form.get("columnCount"):this.columnCount;array.forEach(_213a,function(child){var _213c=child.get("row")||0,_213d=child.get("column")||0,_213e=child.get("rowSpan")||1,_213f=child.get("columnSpan")||1,row,edge,i,j;if(_213e>1||_213f>1){edge=[_213d,_213d+(_213f-1)];for(i=0;i<_213e;i++){row=rows[_213c+i]||(rows[_213c+i]=[]);for(j=0;j<_213f;j++){row[_213d+j]={widget:child,span:(i>0||j>0),edge:edge};}}}else{row=rows[_213c]||(rows[_213c]=[]);row[_213d]={widget:child,span:false,edge:[_213d,_213d]};}if((_213d+_213f)>_213b){_213b=(_213d+_213f);}},this);return {rows:rows,columnCount:_213b,children:_213a};},_syncNonVisibleDesigners:function(_2140){if(!this.form){return;}var _2141=_2140.rows,_2142=_2141.length,_2143=_2140.columnCount,rows,count,_2144,i;if(this.form.get("rowCount")>_2142){rows=this.form.get("rows");for(i=(rows.length-1);i>(_2142-1);i--){if(rows[i].added){this.form.removeRow(i);}else{break;}}}else{if(this.form.get("rowCount")<_2142){rows=this.form.get("rows");count=rows.length;for(i=0;i<(_2142-count);i++){this.form.addRow(new _20eb({entry:{"Height":35,"SizeType":"Absolute"},form:this.form,index:count+i,added:true}));}}}if(this.form.get("columnCount")>_2143){_2144=this.form.get("columns");for(i=(_2144.length-1);i>(_2143-1);i--){if(_2144[i].added){this.form.removeColumn(i);}else{break;}}}else{if(this.form.get("columnCount")<_2143){_2144=this.form.get("columns");count=_2144.length;for(i=0;i<(_2143-count);i++){this.form.addColumn(new _20ec({entry:{"Width":10,"SizeType":"Percent"},form:this.form,index:count+i,added:true}));}}}},_renderLayout:function(_2145){if(this._sources){array.forEach(this._sources,function(_2146){_2146.destroy();});}this._sources=[];var rows=_2145.rows,_2147=_2145.children,_2148=Math.max((this.form&&this.form.get("rowCount"))||0,rows.length),_2149=Math.max((this.form&&this.form.get("columnCount"))||0,_2145.columnCount),_214a=_20dd.create("table",{"class":"design-surface-table"},this.domNode),_214b=_20dd.create("colgroup",null,_214a),_214c=_20dd.create("tbody",null,_214a),_214d,_214e,_214f,_2150,j,i;_20dd.create("col",{},_214b);var _2151=100/_2149;for(j=0;j<_2149;j++){_20dd.create("col",{"width":_2151+"%"},_214b);}var _2152=[];if(rows.length>0){_214d=_20dd.create("tr",{"class":"design-surface-selector-row"},_214c);for(i=0;i<_2149+1;i++){_214e=_20dd.create("td",{"class":"design-surface-cell design-surface-selector-cell","data-select-column":i-1},_214d);}}for(j=0;j<_2148;j++){var row=rows[j];_214d=_20dd.create("tr",{"class":"design-surface-row"},_214c);_214e=_20dd.create("td",{"class":"design-surface-cell design-surface-selector-cell","data-select-row":j},_214d);for(i=0;i<_2149;i++){var cell=row&&row[i];if(cell){if(cell.span){continue;}var _2153=cell.widget,_2154=_2153.get("row")||0,_2155=_2153.get("rowSpan")||1,_2156=_2153.get("column")||0,_2157=_2153.get("columnSpan")||1;_214e=_20dd.create("td",{"colspan":_2157,"rowspan":_2155,"class":"design-surface-cell","data-design-row":_2154,"data-design-column":_2156},_214d);_2152.push({node:_214e,widget:_2153});}else{_214e=_20dd.create("td",{"class":"design-surface-cell design-surface-cell-empty"},_214d);}_2150=new _2111.Source(_214e,{owner:this,empty:!cell,row:j,column:i,copyOnly:true,selfAccept:false,onDropProperty:lang.hitch(this,this._onDropProperty),onDropDesigner:lang.hitch(this,this._onDropDesigner)});_2150.startup();this._sources.push(_2150);}}array.forEach(_2152,function(_2158){var _2159=_20db.getComputedStyle(_2158.node),_215a=_20dc.getMarginBox(_2158.node,_2159),_215b=_20dc.getPadExtents(_2158.node,_2159),_215c=_20dc.getBorderExtents(_2158.node,_2159);_214f=_20dd.create("div",{"dndType":"designer","dndData":_2158.widget.id,"class":"dojoDndItem","style":{"padding":"0px"}},_2158.node);var _215d=_20db.getComputedStyle(_214f),_215e=_20dc.getBorderExtents(_214f,_215d);_20dc.setContentSize(_214f,{h:(_215a.h-_215b.h-_215c.h-_215e.h)});_214f.appendChild(_2158.widget.domNode);},this);if(this.tableNode){this.tableNode.parentNode.removeChild(this.tableNode);}array.forEach(_2147,function(child){if(typeof child.layout=="function"){child.layout();}});this.currentLayout=_2145;this.tableNode=_214a;if(this._sources){array.forEach(this._sources,function(_215f){_215f.sync();});}},_readFromLayout:function(_2160,row,_2161){return (_2160.rows[row]&&_2160.rows[row][_2161]);},_applyPushToConnectionTree:function(_2162,_2163,_2164){_2164=_2164||{};for(var i=0;i<_2163.children.length;i++){var _2165=_2163.children[i],_2166=_2162-_2165.distance,node=_2165.node;if(_2164[node.id]){if(_2166>_2164[node.id].value){_2164[node.id].value=_2166;}}else{_2164[node.id]={widget:node.widget,value:_2166};}this._applyPushToConnectionTree(_2166,node,_2164);}return _2164;},_buildConnectionTree:function(_2167,_2168,_2169,rootp){var span=[_2168.column,_2168.column+_2168.columnSpan],_216a=_2167.rows.length,_216b=_2167.columnCount,_216c={},nodes=_2169||{},root=rootp||_2168;for(var _216d=span[0];_216d<span[1];_216d++){for(var row=(_2168.row+_2168.rowSpan);row<_216a;row++){var data=this._readFromLayout(_2167,row,_216d);if(!data){continue;}var _216e=data.widget;if(_216e===_2168.widget){continue;}if(_216e===root.widget){continue;}if(_216c[_216e.id]){continue;}_216c[_216e.id]=true;if(nodes[_216e.id]){_2168.children.push({distance:row-(_2168.row+_2168.rowSpan),node:nodes[_216e.id]});}else{var node={id:_216e.id,widget:_216e,row:_216e.get("row"),rowSpan:_216e.get("rowSpan")||1,column:_216e.get("column"),columnSpan:_216e.get("columnSpan")||1,children:[]};nodes[_216e.id]=node;_2168.children.push({distance:row-(_2168.row+_2168.rowSpan),node:node});this._buildConnectionTree(_2167,node,nodes,root);}break;}}},moveWidget:function(_216f,_2170,_2171){var _2172=this.currentLayout,_2173=_216f.get("rowSpan")||1,_2174=_216f.get("columnSpan")||1,root={id:_216f.id,widget:_216f,row:_2170,rowSpan:0,column:_2171,columnSpan:_2174,children:[]};this._buildConnectionTree(_2172,root);var push=this._applyPushToConnectionTree(_2173,root);for(var name in push){var _2175=push[name].widget,value=push[name].value;if(value>0){_2175.unchecked(function(){this.set("row",this.get("row")+value);});}}_216f.unchecked(function(){this.set("row",_2170);this.set("column",_2171);});topic.publish(_20d7.substitute("/quickforms/design/${0}/designerMoved",[this._designGroup]),_216f,this);setTimeout(lang.hitch(this,function(){this.layout(true);}),50);},_onDropProperty:function(_2176,_2177){var ctor=_20e8.getDesignerForDataType(_2177.data["dataTypeId"]);if(!ctor){return;}var _2178=new ctor({form:this.form});_2178.setupFor(_2177);this.form.addControl(_2178);this.addChild(_2178);this._handleSelectionOf(_2178,false);this._onDropDesigner(_2176,_2178);},_onDropDesigner:function(_2179,_217a){var _217b=this.currentLayout,_217c=_217b.columnCount,_217d=this._readFromLayout(_217b,_2179.row,_2179.column),_217e=_217d&&_217d.widget,_217f=(_217e&&_217e.get("rowSpan"))||1,_2180=(_217a&&_217a.get("rowSpan"))||1,_2181=(_217a&&_217a.get("columnSpan"))||1,_2182=(!_217d||_2179.before)?_2179.row:_2179.row+_217f,_2183=((_2179.column+_2181)>_217c)?_217c-_2181:_2179.column;this.moveWidget(_217a,_2182,_2183);},insertRowAround:function(_2184,_2185){var _2186=_2184.get("row")||0,_2187=_2184.get("rowSpan")||1,_2188=_2185?_2186:_2186+_2187;this.insertRowAt(_2188);},insertRowAt:function(_2189){this.form.addRow(new _20eb({entry:{"Height":35,"SizeType":"Absolute"},form:this.form,index:_2189}),_2189);array.forEach(this.getChildren(),function(_218a){var _218b=_218a.get("row")||0;if(_218b>=_2189){_218a.unchecked(function(){this.set("row",this.get("row")+1);});topic.publish(_20d7.substitute("/quickforms/design/${0}/designerMoved",[this._designGroup]),_218a,this);}},this);setTimeout(lang.hitch(this,function(){this.layout(true);}),50);},deleteRowAt:function(_218c){var _218d=this.currentLayout,_218e=_218d.rows.length,_218f=_218d.columnCount;for(var _2190=0;_2190<_218f;_2190++){var _2191=this._readFromLayout(_218d,_218c,_2190);if(_2191){return;}}this.form.removeRow(_218c);array.forEach(this.getChildren(),function(_2192){var _2193=_2192.get("row")||0;if(_2193>=_218c){_2192.unchecked(function(){this.set("row",this.get("row")-1);});topic.publish(_20d7.substitute("/quickforms/design/${0}/designerMoved",[this._designGroup]),_2192,this);}},this);setTimeout(lang.hitch(this,function(){this.layout(true);}),50);},validateDeleteRowAt:function(_2194){var _2195=this.currentLayout,_2196=_2195.rows.length,_2197=_2195.columnCount;for(var _2198=0;_2198<_2197;_2198++){var _2199=this._readFromLayout(_2195,_2194,_2198);if(_2199){return {error:"occupied"};}}return false;},insertColumnAround:function(_219a,_219b){var _219c=_219a.get("column")||0,_219d=_219a.get("columnSpan")||1,_219e=_219b?_219c:_219c+_219d;this.insertColumnAt(_219e);},insertColumnAt:function(_219f){this.form.addColumn(new _20ec({entry:{"Width":10,"SizeType":"Percent"},form:this.form,index:_219f}),_219f);array.forEach(this.getChildren(),function(_21a0){var _21a1=_21a0.get("column")||0;if(_21a1>=_219f){_21a0.unchecked(function(){this.set("column",this.get("column")+1);});topic.publish(_20d7.substitute("/quickforms/design/${0}/designerMoved",[this._designGroup]),_21a0,this);}},this);setTimeout(lang.hitch(this,function(){this.layout(true);}),50);},deleteColumnAt:function(_21a2){var _21a3=this.currentLayout,_21a4=_21a3.rows.length,_21a5=_21a3.columnCount;for(var row=0;row<_21a4;row++){var _21a6=this._readFromLayout(_21a3,row,_21a2);if(_21a6){return;}}this.form.removeColumn(_21a2);array.forEach(this.getChildren(),function(_21a7){var _21a8=_21a7.get("column")||0;if(_21a8>=_21a2){_21a7.unchecked(function(){this.set("column",this.get("column")-1);});topic.publish(_20d7.substitute("/quickforms/design/${0}/designerMoved",[this._designGroup]),_21a7,this);}},this);setTimeout(lang.hitch(this,function(){this.layout(true);}),50);},validateDeleteColumnAt:function(_21a9){var _21aa=this.currentLayout,_21ab=_21aa.rows.length,_21ac=_21aa.columnCount;for(var row=0;row<_21ab;row++){var _21ad=this._readFromLayout(_21aa,row,_21a9);if(_21ad){return {error:"occupied"};}}return false;},validateSize:function(_21ae,_21af,_21b0){var _21b1=this.currentLayout,_21b2=_21b1.rows.length,_21b3=_21b1.columnCount,_21b4=_21ae.get("row")||0,_21b5=_21ae.get("rowSpan")||1,_21b6=_21ae.get("column")||0,_21b7=_21ae.get("columnSpan")||1;if(_21af<1){return {error:"bounds",what:"rowSpan",message:this.rowSpanBoundsErrorText};}if(_21b0<1){return {error:"bounds",what:"columnSpan",message:this.columnSpanBoundsErrorText};}if(_21af<=_21b5&&_21b0<=_21b7){return false;}if(_21b3<(_21b6+_21b0)){return {error:"bounds",what:"column",message:this.columnBoundsErrorText};}for(var row=_21b4;row<(_21b4+_21af)&&row<_21b2;row++){var span=[row<(_21b4+_21b5)?_21b6+_21b7:_21b6,_21b6+_21b0];for(var _21b8=span[0];_21b8<span[1];_21b8++){var _21b9=this._readFromLayout(_21b1,row,_21b8);if(!_21b9){continue;}var _21ba=_21b9.widget;if(_21ba===_21ae){continue;}return {error:"occupied",what:_21ba.id,message:this.occupiedErrorText};}}return false;},validateMove:function(_21bb,_21bc,_21bd){var _21be=this.currentLayout,_21bf=_21be.columnCount,_21c0=_21bb.get("columnSpan")||1,_21c1={};if(_21bc<0){return {error:"bounds",what:"row",message:this.rowBoundsErrorText};}if(_21bd<0){return {error:"bounds",what:"column",message:this.columnBoundsErrorText};}if(_21bf<(_21bd+_21c0)){return {error:"bounds",what:"column",message:this.columnBoundsErrorText};}for(var _21c2=_21bd;_21c2<(_21bd+_21c0);_21c2++){var _21c3=this._readFromLayout(_21be,_21bc,_21c2);if(!_21c3){continue;}var _21c4=_21c3.widget;if(_21c4===_21bb){continue;}if(_21c3.span){if(_21c1[_21c4.id]){continue;}return {error:"bisection",what:_21c4.id,message:this.bisectionErrorText};}_21c1[_21c4.id]=true;}return false;},validateMoveFromSource:function(_21c5,_21c6){var _21c7=this.currentLayout,_21c8=_21c7.columnCount,_21c9=this._readFromLayout(_21c7,_21c5.row,_21c5.column),_21ca=_21c9&&_21c9.widget,_21cb=(_21ca&&_21ca.get("rowSpan"))||1,_21cc=_21c6.row,_21cd=_21c6.column,_21ce=this._readFromLayout(_21c7,_21cc,_21cd),_21cf=_21ce&&_21ce.widget,_21d0=(_21cf&&_21cf.get("rowSpan"))||1,_21d1=(_21cf&&_21cf.get("columnSpan"))||1,_21d2=(!_21c9||_21c5.before)?_21c5.row:_21c5.row+_21cb,_21d3=((_21c5.column+_21d1)>_21c8)?_21c8-_21d1:_21c5.column;return this.validateMove(_21cf,_21d2,_21d3);},clearSelections:function(){this._clearSelectionDom();this._clearSelectionState();},clear:function(){this._clearSelectionState();array.forEach(this.getChildren(),function(child){this.removeChild(child);},this);this.form=null;this.layout();},layout:function(force){if(!this._borderBox||!this._borderBox.h){return;}var _21d4=this.currentLayout,_21d5=this.getChildren(),_21d6={},_21d7=false;if(_21d4){array.forEach(_21d4.children,function(child){_21d6[child.id]=true;});for(var i=0;i<_21d5.length;i++){if(!_21d6[_21d5[i].id]){break;}}_21d7=(_21d5.length!=i)||(_21d5.length!=_21d4.children.length);}else{_21d7=true;}if(_21d7||force){_21d4=this._buildLayoutFor(_21d5);this._syncNonVisibleDesigners(_21d4);this._renderLayout(_21d4);this._syncDomWithSelectionState();}}});_2111.Source=_20ee;_2111.RowContextMenu=_2107;_2111.ColumnContextMenu=_210c;_2111.CellContextMenu=_2100;return _2111;});},"Sage/_EventMapMixin":function(){define(["dojo/on","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-attr","dojo/query"],function(on,_21d8,array,lang,_21d9,query){var proxy=function(fn,scope){return function(evt){fn.call(scope,evt,this);};};return _21d8("Sage._EventMapMixin",null,{events:null,_eventSignals:null,postCreate:function(){this.inherited(arguments);this._eventSignals=(this._eventSignals||[]);if(this.events){for(var name in this.events){var item=this.events[name];if(item){var event=null,fn=null;if(lang.isObject(item)){event=item.selector?on.selector(item.selector,item.event||name):item.event||name;fn=lang.isFunction(this[item.action])?this[item.action]:this._invokeDynamicAction;}else{event=name;fn=lang.isFunction(this[item])?this[item]:this._invokeDynamicAction;}this._eventSignals.push(on(this.domNode,event,proxy(fn,this)));}}}},_invokeDynamicAction:function(evt,node){var _21da=_21d9.get(node,"data-action"),fn=lang.isFunction(this[_21da])?this[_21da]:null;if(fn){fn.call(this,evt,node);}},uninitialize:function(){this.inherited(arguments);array.forEach(this._eventSignals,function(_21db){_21db.remove();});}});});},"Sage/QuickForms/Design/ControlDesignerRegistry":function(){define(["dojo/_base/lang","./GenericControlDesigner","./HiddenControlDesigner","./TextBoxControlDesigner","./UrlControlDesigner","./PhoneControlDesigner","./EmailControlDesigner","./CheckBoxControlDesigner","./PickListControlDesigner","./ComboBoxControlDesigner","./UserControlDesigner","./OwnerControlDesigner","./DateTimePickerControlDesigner","./DataGridControlDesigner","./NumericControlDesigner","./DataSourceDesigner","./CurrencyControlDesigner","./EditableGridControlDesigner"],function(lang,_21dc,_21dd,_21de,_21df,_21e0,_21e1,_21e2,_21e3,_21e4,_21e5,_21e6,_21e7,_21e8,_21e9,_21ea,_21eb,_21ec){var _21ed={"Sage.Platform.QuickForms.Controls.QFTextBox, Sage.Platform.QuickForms":_21de,"Sage.Platform.QuickForms.QFControls.QFHidden, Sage.Platform.QuickForms.QFControls":_21dd,"Sage.SalesLogix.QuickForms.QFControls.QFSLXUrl, Sage.SalesLogix.QuickForms.QFControls":_21df,"Sage.SalesLogix.QuickForms.QFControls.QFSLXPhone, Sage.SalesLogix.QuickForms.QFControls":_21e0,"Sage.SalesLogix.QuickForms.QFControls.QFSLXEmail, Sage.SalesLogix.QuickForms.QFControls":_21e1,"Sage.Platform.QuickForms.QFControls.QFCheckBox, Sage.Platform.QuickForms.QFControls":_21e2,"Sage.SalesLogix.QuickForms.QFControls.QFSLXPickList, Sage.SalesLogix.QuickForms.QFControls":_21e3,"Sage.Platform.QuickForms.QFControls.QFListBox, Sage.Platform.QuickForms.QFControls":_21e4,"Sage.SalesLogix.QuickForms.QFControls.QFSLXUser, Sage.SalesLogix.QuickForms.QFControls":_21e5,"Sage.SalesLogix.QuickForms.QFControls.QFSLXOwner, Sage.SalesLogix.QuickForms.QFControls":_21e6,"Sage.SalesLogix.QuickForms.QFControls.QFDateTimePicker, Sage.SalesLogix.QuickForms.QFControls":_21e7,"Sage.SalesLogix.QuickForms.QFControls.QFDataGrid, Sage.SalesLogix.QuickForms.QFControls":_21e8,"Sage.SalesLogix.QuickForms.QFControls.QFSLXNumeric, Sage.SalesLogix.QuickForms.QFControls":_21e9,"Sage.Platform.QuickForms.QFControls.QFDataSource, Sage.Platform.QuickForms.QFControls":_21ea,"Sage.Platform.QuickForms.QFControls.QFHqlDataSource, Sage.Platform.QuickForms.QFControls":_21ea,"Sage.Platform.QuickForms.QFControls.QFMashupDataSource, Sage.Platform.QuickForms.QFControls":_21ea,"Sage.Platform.QuickForms.QFControls.QFSDataDataSource, Sage.Platform.QuickForms.QFControls":_21ea,"Sage.SalesLogix.QuickForms.QFControls.QFSLXCurrency, Sage.SalesLogix.QuickForms.QFControls":_21eb,"Sage.SalesLogix.QuickForms.QFControls.SDataGrid.QFSDataGrid, Sage.SalesLogix.QuickForms.QFControls":_21ec};var _21ee={"ccc0f01d-7ba5-408e-8526-a3f942354b3a":_21de,"f4ca6023-9f5f-4e41-8571-50ba94e8f233":_21de,"76c537a8-8b08-4b35-84cf-fa95c6c133b0":_21de,"b2ed309e-ea89-4eef-8051-6244987953a4":_21de,"47f90249-e4c8-4564-9ae6-e1fa9904f8b8":_21e9,"f37c635c-9fbf-40d8-98d5-750a54a3cca1":_21e9,"a6bf2690-3477-4a18-9849-56abf8693934":_21e9,"2596d57d-89d6-4b72-9036-b18c64c5324c":_21e9,"6b0b3d51-0728-4b67-9473-52836a81da53":_21e9,"30053f5a-8d40-4db1-b185-1e4128eb26cc":_21de,"92432b4d-8206-4a96-ba7b-e4cbd374f148":_21e2,"95ca9d52-6f0b-4a96-bd40-43583f41faf8":_21e2,"3edc7c52-e711-431d-b150-969d88ebabf4":_21e2,"1f08f2eb-87c8-443b-a7c2-a51f590923f5":_21e7,"31e8638d-4232-4c61-8827-d94132a33887":_21e1,"85f2bba5-1fb7-4ecf-941a-d98d4739c305":_21e0,"b71918bf-fac1-4b62-9ed5-0b0294bc9900":_21e3,"17541523-fc31-4269-ac97-df63290d0e31":_21e6,"a3b52518-801b-44be-96bf-fdca3de84f7f":null,"517d5e69-9efa-4d0a-8e7a-1c7691f921ba":null,"189a1a4e-396c-4146-95c0-93b5d9e7d160":null,"8edd8fce-2be5-4d3d-bedd-ea667e78a8af":null,"3ca925e1-4b76-4621-a39c-a0d4cb7327d5":null,"68e04249-f7e2-4b63-90be-55fbb1f4aa77":null,"07370ef3-ad24-409f-86a8-ff2db5ee6d69":null,"5685161e-5f0a-4a36-83fe-89e8e462e9e7":_21df};return lang.setObject("Sage.QuickForms.Design.ControlDesignerRegistry",{fromType:_21ed,fromDataType:_21ee,getDesignerFor:function(entry,_21ef){var name=entry&&entry["$type"];return this.fromType[name]||((_21ef!==false)&&_21dc);},getDesignerForDataType:function(_21f0,_21f1){return this.fromDataType[_21f0]||((_21f1!==false)&&_21de);}});});},"Sage/QuickForms/Design/GenericControlDesigner":function(){define(["dojo/string","dojo/_base/declare","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/GenericBasicPropertyEditor","./Editors/GenericAdvancedPropertyEditor","dojo/i18n!./nls/GenericControlDesigner"],function(_21f2,_21f3,lang,_21f4,_21f5,_21f6,_21f7,_21f8,_21f9,_21fa,_21fb){return _21f3("Sage.QuickForms.Design.GenericControlDesigner",[_21f5,_21f6,_21f4,_21f7],{designSupport:{visible:true},editors:[_21f9,_21fa,_21f8],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div data-dojo-attach-point=\"containerNode\">","<span data-dojo-attach-point=\"designCaptionNode\"></span>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},helpTopicName:"visual_control",displayNameText:"Unknown",constructor:function(){lang.mixin(this,_21fb);},_setControlIdAttr:function(value){this.inherited(arguments);this.set("designCaption",value);},getFormattedType:function(){var type=lang.getObject("$type",false,this.entry)||this.displayNameText,name=(type.indexOf(", ")!==-1)?type.split(", ")[0]:type,parts=(type.indexOf(".")!==-1)?name.split("."):[name];return parts[parts.length-1];},startup:function(){this.inherited(arguments);this.displayNameText=this.getFormattedType();this.set("designCaption",this.get("controlId"));this.applyVisibility();}});});},"Sage/QuickForms/Design/ControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","require","dojo/string","dojo/topic","dojo/dom-class","dojo/query","dijit/_Contained","./PropertyValueError","dojo/NodeList-traverse","dojo/i18n!./nls/ControlDesigner"],function(_21fc,lang,array,_21fd,_21fe,topic,_21ff,query,_2200,_2201,_2202,_2203){return _21fc("Sage.QuickForms.Design.ControlDesigner",[_2200],{designSupport:{visible:true},_checked:true,entry:null,editors:null,form:null,helpTopicName:"",column:0,row:0,displayNameText:null,constructor:function(){lang.mixin(this,_2203);},set:function(name,value){var _2204=this.inherited(arguments);var names=this._getAttrNames(name),_2205=this[names.s];if(lang.isFunction(_2205)){topic.publish("/quickforms/design/designerModified",this,name,value,_2204,this);}return _2204;},_isOnDesignSurface:function(){var _2206=this._surfaceType||(this._surfaceType=_21fd("./DesignSurface"));var _2207=this.getParent();return (_2207&&_2207.isInstanceOf(_2206));},_getControlIdAttr:function(){return lang.getObject("ControlId",false,this.entry);},_setControlIdAttr:function(value){lang.setObject("ControlId",value,this.entry);},_getCaptionAttr:function(){return lang.getObject("Caption",false,this.entry);},_setCaptionAttr:function(value){lang.setObject("Caption",value,this.entry);},_getCaptionAlignmentAttr:function(){return lang.getObject("CaptionAlignment",false,this.entry);},_setCaptionAlignmentAttr:function(value){lang.setObject("CaptionAlignment",value,this.entry);this.applyCaptionAlignment(value);},_getControlNameAttr:function(){return this.displayNameText;},_getEnabledAttr:function(){return lang.getObject("Enabled",false,this.entry);},_setEnabledAttr:function(value){lang.setObject("Enabled",value,this.entry);},_getFormAttr:function(){return this.form;},_getIsReadOnlyAttr:function(){return lang.getObject("IsReadOnly",false,this.entry);},_setIsReadOnlyAttr:function(value){lang.setObject("IsReadOnly",value,this.entry);},_getToolTipAttr:function(){return lang.getObject("ToolTip",false,this.entry);},_setToolTipAttr:function(value){lang.setObject("ToolTip",value,this.entry);},_getVisibleAttr:function(){return lang.getObject("Visible",false,this.entry);},_setVisibleAttr:function(value){lang.setObject("Visible",value,this.entry);this.applyVisibility(value);},_getRowAttr:function(){return lang.getObject("Row",false,this.entry);},_setRowAttr:function(value){if(value===this.get("row")){return;}if(this._checked&&this._isOnDesignSurface()){var _2208=this.getParent().validateMove(this,value,this.get("column"));if(_2208){throw new _2201(_2208,this.get("row"));}}if(this._checked&&this._isOnDesignSurface()){this.getParent().moveWidget(this,value,this.get("column"));}else{lang.setObject("Row",value,this.entry);}},_getRowSpanAttr:function(){return lang.getObject("RowSpan",false,this.entry);},_setRowSpanAttr:function(value){if(value===this.get("rowSpan")){return;}if(this._checked&&this._isOnDesignSurface()){var _2209=this.getParent().validateSize(this,value,this.get("columnSpan"));if(_2209){throw new _2201(_2209,this.get("rowSpan"));}}lang.setObject("RowSpan",value,this.entry);if(this._checked&&this._isOnDesignSurface()){this.getParent().layout(true);}},_getColumnAttr:function(){return lang.getObject("Column",false,this.entry);},_setColumnAttr:function(value){if(value===this.get("column")){return;}if(this._checked&&this._isOnDesignSurface()){var _220a=this.getParent().validateMove(this,this.get("row"),value);if(_220a){throw new _2201(_220a,this.get("column"));}}if(this._checked&&this._isOnDesignSurface()){this.getParent().moveWidget(this,this.get("row"),value);}else{lang.setObject("Column",value,this.entry);}},_getColumnSpanAttr:function(){return lang.getObject("ColumnSpan",false,this.entry);},_setColumnSpanAttr:function(value){if(value===this.get("columnSpan")){return;}if(this._checked&&this._isOnDesignSurface()){var _220b=this.getParent().validateSize(this,this.get("rowSpan"),value);if(_220b){throw new _2201(_220b,this.get("columnSpan"));}}lang.setObject("ColumnSpan",value,this.entry);if(this._checked&&this._isOnDesignSurface()){this.getParent().layout(true);}},_getDataBindingsAttr:function(){return lang.getObject("DataBindings",false,this.entry);},_setDataBindingsAttr:function(value){lang.setObject("DataBindings",value,this.entry);},findDataBinding:function(_220c){var _220d=this.get("dataBindings");if(_220d){for(var i=0;i<_220d.length;i++){if(_220c&&_220c(_220d[i])){return _220d[i];}}}return null;},unchecked:function(fn){this._checked=false;try{fn.call(this,this);}finally{this._checked=true;}},applyCaptionAlignment:function(_220e){if(!this.designCaptionNode||!this.fieldClass){return;}_220e=_220e||this.get("captionAlignment");_21ff.remove(this.designCaptionNode,_21fe.substitute("${0}-left ${0}-center ${0}-right",[this.fieldClass+"-caption"]));_21ff.add(this.designCaptionNode,_21fe.substitute("${0}-caption-${1}",[this.fieldClass,_220e]));},applyVisibility:function(_220f){if(!(this.containerNode)){return;}if(typeof _220f==="undefined"){_220f=this.get("visible");}_21ff.toggle(this.containerNode,"design-visible-false",!_220f);},setupFor:function(_2210){this.entry={"$type":this.quickFormControlType,"Row":0,"RowSpan":1,"Column":0,"ColumnSpan":1};this.set("caption",_2210["displayName"]);this.set("captionAlignment","left");this.set("controlId",this.form.createUniqueId(_2210["propertyName"]));this.set("controlLabelPlacement","left");this.set("enabled",true);this.set("isReadOnly",false);this.set("toolTip","");this.set("visible",true);}});});},"Sage/QuickForms/Design/PropertyValueError":function(){define(["dojo/string","dojo/_base/lang"],function(_2211,lang){var _2212=function(_2213,value,_2214){this.result=_2213;this.value=value;this.message=_2214||_2211.substitute(this.messageText,[value]);};lang.extend(_2212,{messageText:"The value ${0} is not allowed.",toString:function(){return this.message;}});return lang.setObject("Sage.QuickForms.Design.PropertyValueError",_2212);});},"Sage/QuickForms/Design/Editors/LayoutPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/LayoutPropertyEditor"],function(_2215,lang,_2216,_2217,_2218,_2219,_221a,_221b,_221c,_221d){return _2215("Sage.QuickForms.Design.Editors.LayoutPropertyEditor",[_2216,_221b,_221a],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.positionText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.rowTooltipText %}\">","<label>{%= $.rowText %}</label>","<div data-dojo-type=\"dijit.form.NumberTextBox\" data-dojo-attach-point=\"_row\" data-dojo-attach-event=\"onChange:_onRowChange\" required=\"true\" data-dojo-props=\"constraints:{min:0,max:100,places:0}\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.columnTooltipText %}\">","<label>{%= $.columnText %}</label>","<div data-dojo-type=\"dijit.form.NumberTextBox\" data-dojo-attach-point=\"_column\" data-dojo-attach-event=\"onChange:_onColumnChange\" required=\"true\" data-dojo-props=\"constraints:{min:0,max:100,places:0}\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.sizeText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.rowSpanTooltipText %}\">","<label>{%= $.rowSpanText %}</label>","<div data-dojo-type=\"dijit.form.NumberTextBox\" data-dojo-attach-point=\"_rowSpan\" data-dojo-attach-event=\"onChange:_onRowSpanChange\" required=\"true\" data-dojo-props=\"constraints:{min:1,max:100,places:0}\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.columnSpanTooltipText %}\">","<label>{%= $.columnSpanText %}</label>","<div data-dojo-type=\"dijit.form.NumberTextBox\" data-dojo-attach-point=\"_columnSpan\" data-dojo-attach-event=\"onChange:_onColumnSpanChange\" required=\"true\" data-dojo-props=\"constraints:{min:1,max:100,places:0}\"></div>","</div>","</div>","</fieldset>"]),_row:null,_column:null,_rowSpan:null,_columnSpan:null,titleText:"Layout",positionText:"Position",sizeText:"Size",rowText:"Row:",rowTooltipText:"Row number of the control.",columnText:"Column:",columnTooltipText:"Column number of the control.",rowSpanText:"Row Span:",rowSpanTooltipText:"Number of cells the control occupies vertically.",columnSpanText:"Column Span:",columnSpanTooltipText:"Number of cells the control occupies horizontally.",constructor:function(){lang.mixin(this,_221d);},setup:function(){this.inherited(arguments);this._row.set("value",this._designer.get("row"));this._column.set("value",this._designer.get("column"));this._rowSpan.set("value",this._designer.get("rowSpan"));this._columnSpan.set("value",this._designer.get("columnSpan"));},_onRowChange:function(value){if(this.isSuspended()||!this._row.isValid()){return;}try{this._designer.set("row",parseInt(value)||0);}catch(e){this._row.setValue(e.value);if(console){console.error(e.message,e);}}},_onColumnChange:function(value){if(this.isSuspended()||!this._column.isValid()){return;}try{this._designer.set("column",parseInt(value)||0);}catch(e){this._column.setValue(e.value);if(console){console.error(e.message);}}},_onRowSpanChange:function(value){if(this.isSuspended()||!this._rowSpan.isValid()){return;}try{this._designer.set("rowSpan",parseInt(value)||1);}catch(e){this._rowSpan.setValue(e.value);if(console){console.error(e.message);}}},_onColumnSpanChange:function(value){if(this.isSuspended()||!this._columnSpan.isValid()){return;}try{this._designer.set("columnSpan",parseInt(value)||1);}catch(e){this._columnSpan.setValue(e.value);if(console){console.error(e.message);}}}});});},"Sage/QuickForms/Design/Editors/_PropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/dom-class","../PropertyValueError","dojo/i18n!./nls/_PropertyEditor"],function(_221e,lang,array,_221f,_2220,_2221){return _221e("Sage.QuickForms.Design.Editors._PropertyEditor",null,{_designer:null,_suspended:false,titleText:"Properties",_setTitleTextAttr:function(value){this.set("title",value);},designer:null,constructor:function(){lang.mixin(this,_2221);},buildRendering:function(){this.inherited(arguments);_221f.add(this.domNode,"design-property-editor");},suspend:function(){this._suspended=true;},resume:function(){this._suspended=false;},isSuspended:function(){return this._suspended;},setup:function(_2222){},_setDesignerAttr:function(value){this.suspend();this._designer=value;this.setup(value);setTimeout(lang.hitch(this,this.resume),0);},_getDesignerAttr:function(){return this._designer;}});});},"Sage/QuickForms/Design/Editors/GenericBasicPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/GenericBasicPropertyEditor"],function(_2223,lang,_2224,_2225,_2226,_2227,_2228,_2229,_222a,_222b,_222c,_222d){return _2223("Sage.QuickForms.Design.Editors.GenericBasicPropertyEditor",[_2224,_222b,_222a],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.captionTooltipText %}\">","<label>{%= $.captionText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_caption\" data-dojo-attach-event=\"onChange:_onCaptionChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.captionAlignmentTooltipText %}\">","<label>{%= $.captionAlignmentText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_captionAlignment\" data-dojo-attach-event=\"onChange:_onCaptionAlignmentChange\">","{% for (var alignment in $.alignmentText) { %}","<span value=\"{%= alignment %}\">{%= $.alignmentText[alignment] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>"]),_caption:null,_captionAlignment:null,titleText:"Basic",appearanceText:"Appearance",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",alignmentText:{"left":"Left","center":"Center","right":"Right"},constructor:function(){lang.mixin(this,_222d);},setup:function(){this.inherited(arguments);this._caption.set("value",this._designer.get("caption"));this._captionAlignment.set("value",this._designer.get("captionAlignment"));},_onCaptionChange:function(value){if(this.isSuspended()){return;}this._designer.set("caption",value);},_onCaptionAlignmentChange:function(value){if(this.isSuspended()){return;}this._designer.set("captionAlignment",value);}});});},"Sage/QuickForms/Design/Editors/GenericAdvancedPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/GenericAdvancedPropertyEditor"],function(_222e,lang,_222f,_2230,_2231,_2232,_2233,_2234,_2235,_2236,_2237){return _222e("Sage.QuickForms.Design.Editors.GenericAdvancedPropertyEditor",[_222f,_2235,_2234],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.visibleTooltipText %}\">","<label>{%= $.visibleText %}</label>","<div data-dojo-attach-point=\"_visible\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onVisibleChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlIdTooltipText %}\">","<label>{%= $.controlIdText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlId\" data-dojo-attach-event=\"onChange:_onControlIdChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlTypeTooltipText %}\">","<label>{%= $.controlTypeText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlType\" data-dojo-attach-event=\"onChange:_onControlTypeChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","</fieldset>"]),_controlType:null,_controlId:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",controlInfoText:"Control Info",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Saleslogix control type.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",constructor:function(){lang.mixin(this,_2237);},setup:function(){this.inherited(arguments);this._controlType.set("value",this._designer.get("controlName"));this._controlId.set("value",this._designer.get("controlId"));this._visible.set("value",this._designer.get("visible"));},_onControlTypeChange:function(value){},_onControlIdChange:function(value){},_onVisibleChange:function(value){if(this.isSuspended()){return;}this._designer.set("visible",value);}});});},"Sage/QuickForms/Design/HiddenControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/NonVisibleAdvancedPropertyEditor","dojo/i18n!./nls/HiddenControlDesigner"],function(_2238,array,lang,_2239,_223a,_223b,_223c,_223d,_223e){return _2238("Sage.QuickForms.Design.HiddenControlDesigner",[_223a,_223b,_2239,_223c],{designSupport:{visible:false},editors:[_223d],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div data-dojo-attach-point=\"containerNode\">","<span data-dojo-attach-point=\"designCaptionNode\"></span>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},helpTopicName:"Hidden_Text_control",quickFormControlType:"Sage.Platform.QuickForms.QFControls.QFHidden, Sage.Platform.QuickForms.QFControls",displayNameText:"Hidden Text",constructor:function(){lang.mixin(this,_223e);},_setControlIdAttr:function(value){this.inherited(arguments);this.set("designCaption",value);},startup:function(){this.inherited(arguments);this.set("designCaption",this.get("controlId"));}});});},"Sage/QuickForms/Design/Editors/NonVisibleAdvancedPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/NonVisibleAdvancedPropertyEditor"],function(_223f,lang,_2240,_2241,_2242,_2243,_2244,_2245,_2246,_2247,_2248){return _223f("Sage.QuickForms.Design.Editors.NonVisibleAdvancedPropertyEditor",[_2240,_2246,_2245],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.controlInfoText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlIdTooltipText %}\">","<label>{%= $.controlIdText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlId\" data-dojo-attach-event=\"onChange:_onControlIdChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlTypeTooltipText %}\">","<label>{%= $.controlTypeText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlType\" data-dojo-attach-event=\"onChange:_onControlTypeChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","</fieldset>"]),_controlType:null,_controlId:null,titleText:"Advanced",controlInfoText:"Control Info",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Saleslogix control type.",constructor:function(){lang.mixin(this,_2248);},setup:function(){this.inherited(arguments);this._controlType.set("value",this._designer.get("controlName"));this._controlId.set("value",this._designer.get("controlId"));},_onControlTypeChange:function(value){},_onControlIdChange:function(value){}});});},"Sage/QuickForms/Design/TextBoxControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/TextBoxBasicPropertyEditor","./Editors/TextBoxAdvancedPropertyEditor","dojo/i18n!./nls/TextBoxControlDesigner"],function(_2249,array,lang,_224a,_224b,_224c,_224d,_224e,_224f,_2250,_2251){return _2249("Sage.QuickForms.Design.TextBoxControlDesigner",[_224b,_224c,_224a,_224d],{designSupport:{visible:true},editors:[_224f,_2250,_224e],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div class=\"{%= $.fieldClass %}\" data-dojo-attach-point=\"containerNode\">","<div class=\"{%= $.fieldClass %}-caption\" data-dojo-attach-point=\"designCaptionNode\"></div>","<div class=\"{%= $.fieldClass %}-field\">","<span data-dojo-attach-point=\"designBindingNode\"></span>","</div>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},_setDesignBindingAttr:{node:"designBindingNode",type:"innerText"},fieldClass:"design-textbox",helpTopicName:"Textbox_control",quickFormControlType:"Sage.Platform.QuickForms.Controls.QFTextBox, Sage.Platform.QuickForms",displayNameText:"TextBox",constructor:function(){lang.mixin(this,_2251);},_setCaptionAttr:function(value){this.inherited(arguments);this.set("designCaption",value);},_getDefaultDataBindingAttr:function(){return this.findDataBinding(function(_2252){return (_2252["ControlItemName"]=="Text");});},_getLinesAttr:function(){return lang.getObject("Lines",false,this.entry);},_setLinesAttr:function(value){lang.setObject("Lines",value,this.entry);},_getControlLabelPlacementAttr:function(){return lang.getObject("ControlLabelPlacement",false,this.entry);},_setControlLabelPlacementAttr:function(value){lang.setObject("ControlLabelPlacement",value,this.entry);},_getMaxLengthAttr:function(){return lang.getObject("MaxLength",false,this.entry);},_setMaxLengthAttr:function(value){lang.setObject("MaxLength",value,this.entry);},_getRequiredAttr:function(){return lang.getObject("Required",false,this.entry);},_setRequiredAttr:function(value){lang.setObject("Required",value,this.entry);},setupFor:function(_2253){this.inherited(arguments);this.set("lines",1);this.set("maxLength",parseInt(_2253["data"].length,10)||-1);this.set("required",false);this.set("dataBindings",[{$type:"Sage.Platform.QuickForms.Controls.QuickFormPropertyDataBindingDefinition, Sage.Platform.QuickForms",BindingType:"Property",ControlItemName:"Text",DataItemName:_2253.propertyPath,DataSourceID:"MainEntity",FormatString:"",NullValueString:""}]);this.set("designBinding",_2253.propertyPath||"");},startup:function(){this.inherited(arguments);var _2254=this.get("defaultDataBinding");this.set("designCaption",this.get("caption"));this.set("designBinding",(_2254&&_2254["DataItemName"])||"");this.applyCaptionAlignment();this.applyVisibility();}});});},"Sage/QuickForms/Design/Editors/TextBoxBasicPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-style","dijit/layout/ContentPane","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/TextBoxBasicPropertyEditor"],function(_2255,lang,_2256,_2257,_2258,_2259,_225a,_225b,_225c,_225d,_225e,_225f){return _2255("Sage.QuickForms.Design.Editors.TextBoxBasicPropertyEditor",[_2257,_225d,_225c],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.captionTooltipText %}\">","<label>{%= $.captionText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_caption\" data-dojo-attach-event=\"onChange:_onCaptionChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.captionAlignmentTooltipText %}\">","<label>{%= $.captionAlignmentText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_captionAlignment\" data-dojo-attach-event=\"onChange:_onCaptionAlignmentChange\">","{% for (var alignment in $.alignmentText) { %}","<span value=\"{%= alignment %}\">{%= $.alignmentText[alignment] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.linesTooltipText %}\">","<label>{%= $.linesText %}</label>","<div data-dojo-type=\"dijit.form.NumberTextBox\" data-dojo-attach-point=\"_lines\" data-dojo-props=\"constraints:{min:0,max:1000,places:0}\" data-dojo-attach-event=\"onChange:_onLinesChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.toolTipTooltipText %}\">","<label>{%= $.toolTipText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_toolTip\" data-dojo-attach-event=\"onChange:_onToolTipChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.isReadOnlyTooltipText %}\">","<label>{%= $.isReadOnlyText %}</label>","<div data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"_isReadOnly\" data-dojo-attach-event=\"onChange:_onIsReadOnlyChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_lines:null,_isReadOnly:null,_tooltip:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",linesText:"Lines:",linesTooltipText:"Number of lines of text displayed.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{"left":"Left","center":"Center","right":"Right"},constructor:function(){lang.mixin(this,_225f);},setup:function(){this.inherited(arguments);this._caption.set("value",this._designer.get("caption"));this._captionAlignment.set("value",this._designer.get("captionAlignment"));this._lines.set("value",this._designer.get("lines"));this._isReadOnly.set("value",this._designer.get("isReadOnly"));this._toolTip.set("value",this._designer.get("toolTip"));var D=Sage.QuickForms.Design,_2260=this._designer;if(_2260 instanceof D.PhoneControlDesigner||_2260 instanceof D.UrlControlDesigner||_2260 instanceof D.EmailControlDesigner){_2256.set(this._lines.domNode.parentNode,"display","none");}},_onCaptionChange:function(value){if(this.isSuspended()){return;}this._designer.set("caption",value);},_onCaptionAlignmentChange:function(value){if(this.isSuspended()){return;}this._designer.set("captionAlignment",value);},_onLinesChange:function(value){if(this.isSuspended()||!this._lines.isValid()){return;}this._designer.set("lines",value);},_onIsReadOnlyChange:function(value){if(this.isSuspended()){return;}this._designer.set("isReadOnly",value);},_onToolTipChange:function(value){if(this.isSuspended()){return;}this._designer.set("toolTip",value);}});});},"Sage/QuickForms/Design/Editors/TextBoxAdvancedPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/TextBoxAdvancedPropertyEditor"],function(_2261,lang,_2262,_2263,_2264,_2265,_2266,_2267,_2268,_2269){return _2261("Sage.QuickForms.Design.Editors.TextBoxAdvancedPropertyEditor",[_2262,_2267,_2266],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlLabelPlacementTooltipText %}\">","<label>{%= $.controlLabelPlacementText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_controlLabelPlacement\" data-dojo-attach-event=\"onChange:_onControlLabelPlacementChange\">","{% for (var placement in $.labelPlacementText) { %}","<span value=\"{%= placement %}\">{%= $.labelPlacementText[placement] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.visibleTooltipText %}\">","<label>{%= $.visibleText %}</label>","<div data-dojo-attach-point=\"_visible\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onVisibleChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.enabledTooltipText %}\">","<label>{%= $.enabledText %}</label>","<div data-dojo-attach-point=\"_enabled\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onEnabledChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.maxLengthTooltipText %}\">","<label>{%= $.maxLengthText %}</label>","<div data-dojo-type=\"dijit.form.NumberTextBox\" data-dojo-attach-point=\"_maxLength\" data-dojo-attach-event=\"onChange:_onMaxLengthChange\" data-dojo-props=\"constraints:{min:-1,places:0}\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.requiredTooltipText %}\">","<label>{%= $.requiredText %}</label>","<div data-dojo-attach-point=\"_required\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onRequiredChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.defaultDataBindingTooltipText %}\">","<label>{%= $.defaultDataBindingText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_defaultDataBinding\" data-dojo-attach-event=\"onChange:_onDefaultDataBindingChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlIdTooltipText %}\">","<label>{%= $.controlIdText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlId\" data-dojo-attach-event=\"onChange:_onControlIdChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlTypeTooltipText %}\">","<label>{%= $.controlTypeText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlType\" data-dojo-attach-event=\"onChange:_onControlTypeChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","</fieldset>"]),_controlType:null,_controlId:null,_enabled:null,_controlLabelPlacement:null,_defaultDataBinding:null,_maxLength:null,_required:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Saleslogix control type.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",maxLengthText:"Max Length:",maxLengthTooltipText:"Maximum number of characters user can enter.",requiredText:"Required:",requiredTooltipText:"Requires a value when saving data.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",labelPlacementText:{"left":"Left","right":"Right","top":"Top","none":"None"},constructor:function(){lang.mixin(this,_2269);},setup:function(){this.inherited(arguments);this._controlType.set("value",this._designer.get("controlName"));this._controlId.set("value",this._designer.get("controlId"));this._enabled.set("value",this._designer.get("enabled"));this._controlLabelPlacement.set("value",this._designer.get("controlLabelPlacement"));this._maxLength.set("value",this._designer.get("maxLength"));this._required.set("value",this._designer.get("required"));this._visible.set("value",this._designer.get("visible"));var _226a=this._designer.get("defaultDataBinding");this._defaultDataBinding.set("value",(_226a&&_226a["DataItemName"])||"");},_onControlTypeChange:function(value){},_onControlIdChange:function(value){},_onDefaultDataBindingChange:function(value){},_onEnabledChange:function(value){if(this.isSuspended()){return;}this._designer.set("enabled",value);},_onControlLabelPlacementChange:function(value){if(this.isSuspended()){return;}this._designer.set("controlLabelPlacement",value);},_onMaxLengthChange:function(value){if(this.isSuspended()||!this._maxLength.isValid()){return;}this._designer.set("maxLength",value);},_onRequiredChange:function(value){if(this.isSuspended()){return;}this._designer.set("required",value);},_onVisibleChange:function(value){if(this.isSuspended()){return;}this._designer.set("visible",value);}});});},"Sage/QuickForms/Design/UrlControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","./TextBoxControlDesigner","./Editors/LayoutPropertyEditor","./Editors/TextBoxBasicPropertyEditor","./Editors/TextBoxAdvancedPropertyEditor","dojo/i18n!./nls/UrlControlDesigner"],function(_226b,array,lang,_226c,_226d,_226e,_226f,_2270){return _226b("Sage.QuickForms.Design.UrlControlDesigner",[_226c],{designSupport:{visible:true},editors:[_226e,_226f,_226d],widgetTemplate:new Simplate(["<div class=\"{%= $.fieldClass %} design-url\" data-dojo-attach-point=\"containerNode\">","<div class=\"{%= $.fieldClass %}-caption\" data-dojo-attach-point=\"designCaptionNode\"></div>","<div class=\"{%= $.fieldClass %}-field\">","<span data-dojo-attach-point=\"designBindingNode\"></span>","<div class=\"design-url-icon\"></div>","</div>","</div>"]),helpTopicName:"URL_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFSLXUrl, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"Url",constructor:function(){lang.mixin(this,_2270);}});});},"Sage/QuickForms/Design/PhoneControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","./TextBoxControlDesigner","./Editors/LayoutPropertyEditor","./Editors/TextBoxBasicPropertyEditor","./Editors/TextBoxAdvancedPropertyEditor","dojo/i18n!./nls/PhoneControlDesigner"],function(_2271,array,lang,_2272,_2273,_2274,_2275,_2276){return _2271("Sage.QuickForms.Design.PhoneControlDesigner",[_2272],{designSupport:{visible:true},editors:[_2274,_2275,_2273],widgetTemplate:new Simplate(["<div class=\"{%= $.fieldClass %} design-phone\" data-dojo-attach-point=\"containerNode\">","<div class=\"{%= $.fieldClass %}-caption\" data-dojo-attach-point=\"designCaptionNode\"></div>","<div class=\"{%= $.fieldClass %}-field\">","<span data-dojo-attach-point=\"designBindingNode\"></span>","<div class=\"design-phone-icon\"></div>","</div>","</div>"]),helpTopicName:"Phone_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFSLXPhone, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"Phone",constructor:function(){lang.mixin(this,_2276);}});});},"Sage/QuickForms/Design/EmailControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","./TextBoxControlDesigner","./Editors/LayoutPropertyEditor","./Editors/TextBoxBasicPropertyEditor","./Editors/TextBoxAdvancedPropertyEditor","dojo/i18n!./nls/EmailControlDesigner"],function(_2277,array,lang,_2278,_2279,_227a,_227b,_227c){return _2277("Sage.QuickForms.Design.EmailControlDesigner",[_2278],{designSupport:{visible:true},editors:[_227a,_227b,_2279],widgetTemplate:new Simplate(["<div class=\"{%= $.fieldClass %} design-email\" data-dojo-attach-point=\"containerNode\">","<div class=\"{%= $.fieldClass %}-caption\" data-dojo-attach-point=\"designCaptionNode\"></div>","<div class=\"{%= $.fieldClass %}-field\">","<span data-dojo-attach-point=\"designBindingNode\"></span>","<div class=\"design-email-icon\"></div>","</div>","</div>"]),helpTopicName:"Email_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFSLXEmail, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"Email",constructor:function(){lang.mixin(this,_227c);}});});},"Sage/QuickForms/Design/CheckBoxControlDesigner":function(){define(["dojo/dom-class","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/CheckBoxBasicPropertyEditor","./Editors/CheckBoxAdvancedPropertyEditor","dojo/i18n!./nls/CheckBoxControlDesigner"],function(_227d,_227e,array,lang,_227f,_2280,_2281,_2282,_2283,_2284,_2285,_2286){return _227e("Sage.QuickForms.Design.CheckBoxControlDesigner",[_2280,_2281,_227f,_2282],{designSupport:{visible:true},editors:[_2284,_2285,_2283],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div class=\"design-checkbox\" data-dojo-attach-point=\"containerNode\">","<span class=\"{%= $.fieldClass %}-icon\" data-dojo-attach-point=\"designCheckedNode\"></span>","<div class=\"{%= $.fieldClass %}-caption\" data-dojo-attach-point=\"designCaptionNode\"></div>","<div class=\"{%= $.fieldClass %}-field\" data-dojo-attach-point=\"designBindingNode\"></div>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},_setDesignBindingAttr:{node:"designBindingNode",type:"innerText"},fieldClass:"design-checkbox",helpTopicName:"Checkbox_control",quickFormControlType:"Sage.Platform.QuickForms.QFControls.QFCheckBox, Sage.Platform.QuickForms.QFControls",displayNameText:"CheckBox",constructor:function(){lang.mixin(this,_2286);},_setCaptionAttr:function(value){this.inherited(arguments);this.set("designCaption",value);},_getDefaultDataBindingAttr:function(){return this.findDataBinding(function(_2287){return (_2287["ControlItemName"]=="Checked");});},_getControlLabelPlacementAttr:function(){return lang.getObject("ControlLabelPlacement",false,this.entry);},_setControlLabelPlacementAttr:function(value){lang.setObject("ControlLabelPlacement",value,this.entry);},_getCheckedAttr:function(){return lang.getObject("Checked",false,this.entry);},_setCheckedAttr:function(value){lang.setObject("Checked",value,this.entry);if(value){_227d.add(this.designCheckedNode,"design-checkbox-icon-checked");}else{_227d.remove(this.designCheckedNode,"design-checkbox-icon-checked");}},setupFor:function(_2288){this.inherited(arguments);this.set("checked",false);this.set("dataBindings",[{$type:"Sage.Platform.QuickForms.Controls.QuickFormPropertyDataBindingDefinition, Sage.Platform.QuickForms",BindingType:"Property",ControlItemName:"Checked",DataItemName:_2288.propertyPath,DataSourceID:"MainEntity",FormatString:"",NullValueString:""}]);this.set("designBinding",_2288.propertyPath||"");},startup:function(){this.inherited(arguments);var _2289=this.get("defaultDataBinding");this.set("designCaption",this.get("caption"));this.set("designBinding",(_2289&&_2289["DataItemName"])||"");this.applyCaptionAlignment();this.applyVisibility();}});});},"Sage/QuickForms/Design/Editors/CheckBoxBasicPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/CheckBoxBasicPropertyEditor"],function(_228a,lang,_228b,_228c,_228d,_228e,_228f,_2290,_2291,_2292,_2293){return _228a("Sage.QuickForms.Design.Editors.CheckBoxBasicPropertyEditor",[_228b,_2291,_2290],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.captionTooltipText %}\">","<label>{%= $.captionText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_caption\" data-dojo-attach-event=\"onChange:_onCaptionChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.captionAlignmentTooltipText %}\">","<label>{%= $.captionAlignmentText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_captionAlignment\" data-dojo-attach-event=\"onChange:_onCaptionAlignmentChange\">","{% for (var alignment in $.alignmentText) { %}","<span value=\"{%= alignment %}\">{%= $.alignmentText[alignment] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.toolTipTooltipText %}\">","<label>{%= $.toolTipText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_toolTip\" data-dojo-attach-event=\"onChange:_onToolTipChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.isReadOnlyTooltipText %}\">","<label>{%= $.isReadOnlyText %}</label>","<div data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"_isReadOnly\" data-dojo-attach-event=\"onChange:_onIsReadOnlyChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_isReadOnly:null,_toolTip:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{"left":"Left","center":"Center","right":"Right"},constructor:function(){lang.mixin(this,_2293);},setup:function(){this.inherited(arguments);this._caption.set("value",this._designer.get("caption"));this._captionAlignment.set("value",this._designer.get("captionAlignment"));this._isReadOnly.set("value",this._designer.get("isReadOnly"));this._toolTip.set("value",this._designer.get("toolTip"));},_onCaptionChange:function(value){if(this.isSuspended()){return;}this._designer.set("caption",value);},_onCaptionAlignmentChange:function(value){if(this.isSuspended()){return;}this._designer.set("captionAlignment",value);},_onIsReadOnlyChange:function(value){if(this.isSuspended()){return;}this._designer.set("isReadOnly",value);},_onToolTipChange:function(value){if(this.isSuspended()){return;}this._designer.set("toolTip",value);}});});},"Sage/QuickForms/Design/Editors/CheckBoxAdvancedPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/CheckBoxAdvancedPropertyEditor"],function(_2294,lang,_2295,_2296,_2297,_2298,_2299,_229a,_229b,_229c,_229d){return _2294("Sage.QuickForms.Design.Editors.CheckBoxAdvancedPropertyEditor",[_2295,_229b,_229a],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlLabelPlacementTooltipText %}\">","<label>{%= $.controlLabelPlacementText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_controlLabelPlacement\" data-dojo-attach-event=\"onChange:_onControlLabelPlacementChange\">","{% for (var placement in $.labelPlacementText) { %}","<span value=\"{%= placement %}\">{%= $.labelPlacementText[placement] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.visibleTooltipText %}\">","<label>{%= $.visibleText %}</label>","<div data-dojo-attach-point=\"_visible\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onVisibleChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" style=\"display:none;\" title=\"{%= $.checkedTooltipText %}\">","<label>{%= $.checkedText %}</label>","<div data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"_checked\" data-dojo-attach-event=\"onChange:_onCheckedChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.enabledTooltipText %}\">","<label>{%= $.enabledText %}</label>","<div data-dojo-attach-point=\"_enabled\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onEnabledChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.defaultDataBindingTooltipText %}\">","<label>{%= $.defaultDataBindingText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_defaultDataBinding\" data-dojo-attach-event=\"onChange:_onDefaultDataBindingChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlIdTooltipText %}\">","<label>{%= $.controlIdText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlId\" data-dojo-attach-event=\"onChange:_onControlIdChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlTypeTooltipText %}\">","<label>{%= $.controlTypeText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlType\" data-dojo-attach-event=\"onChange:_onControlTypeChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","</fieldset>"]),_checked:null,_controlType:null,_controlId:null,_enabled:null,_controlLabelPlacement:null,_defaultDataBinding:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",checkedText:"Checked:",checkedTooltipText:"Sets default state of checkbox to selected.",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Saleslogix control type.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",labelPlacementText:{"left":"Left","right":"Right","top":"Top","none":"None"},constructor:function(){lang.mixin(this,_229d);},setup:function(){this.inherited(arguments);this._checked.set("value",this._designer.get("checked"));this._controlType.set("value",this._designer.get("controlName"));this._controlId.set("value",this._designer.get("controlId"));this._enabled.set("value",this._designer.get("enabled"));this._controlLabelPlacement.set("value",this._designer.get("controlLabelPlacement"));this._visible.set("value",this._designer.get("visible"));var _229e=this._designer.get("defaultDataBinding");this._defaultDataBinding.set("value",(_229e&&_229e["DataItemName"])||"");},_onCheckedChange:function(value){if(this.isSuspended()){return;}this._designer.set("checked",value);},_onControlTypeChange:function(value){},_onControlIdChange:function(value){},_onDefaultDataBindingChange:function(value){},_onEnabledChange:function(value){if(this.isSuspended()){return;}this._designer.set("enabled",value);},_onControlLabelPlacementChange:function(value){if(this.isSuspended()){return;}this._designer.set("controlLabelPlacement",value);},_onVisibleChange:function(value){if(this.isSuspended()){return;}this._designer.set("visible",value);}});});},"Sage/QuickForms/Design/PickListControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/PickListBasicPropertyEditor","./Editors/PickListAdvancedPropertyEditor","dojo/i18n!./nls/PickListControlDesigner"],function(_229f,array,lang,_22a0,_22a1,_22a2,_22a3,_22a4,_22a5,_22a6,_22a7){return _229f("Sage.QuickForms.Design.PickListControlDesigner",[_22a1,_22a2,_22a0,_22a3],{designSupport:{visible:true},editors:[_22a5,_22a6,_22a4],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div class=\"{%= $.fieldClass %}\" data-dojo-attach-point=\"containerNode\">","<div class=\"{%= $.fieldClass %}-caption\" data-dojo-attach-point=\"designCaptionNode\"></div>","<div class=\"{%= $.fieldClass %}-field\">","<span data-dojo-attach-point=\"designBindingNode\"></span>","<div class=\"{%= $.fieldClass %}-icon\">...</div>","</div>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},_setDesignBindingAttr:{node:"designBindingNode",type:"innerText"},fieldClass:"design-picklist",helpTopicName:"Pick_List_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFSLXPickList, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"Pick List",constructor:function(){lang.mixin(this,_22a7);},_setCaptionAttr:function(value){this.inherited(arguments);this.set("designCaption",value);},_getDefaultDataBindingAttr:function(){return this.findDataBinding(function(_22a8){return (_22a8["ControlItemName"]=="PickListValue");});},_getStorageModeAttr:function(){var mode=lang.getObject("StorageMode",false,this.entry);if(mode==="ID"){return "Id";}else{return mode;}},_setStorageModeAttr:function(value){lang.setObject("StorageMode",value,this.entry);},_getRequiredAttr:function(){return lang.getObject("Required",false,this.entry);},_setRequiredAttr:function(value){lang.setObject("Required",value,this.entry);},_getPickListNameAttr:function(){return lang.getObject("PickListName",false,this.entry);},_setPickListNameAttr:function(value){lang.setObject("PickListName",value,this.entry);},_getPickListIdAttr:function(){return lang.getObject("PickListId",false,this.entry);},_setPickListIdAttr:function(value){lang.setObject("PickListId",value,this.entry);},_getMustExistInListAttr:function(){return lang.getObject("MustExistInList",false,this.entry);},_setMustExistInListAttr:function(value){lang.setObject("MustExistInList",value,this.entry);},_getMaxLengthAttr:function(){return lang.getObject("MaxLength",false,this.entry);},_setMaxLengthAttr:function(value){lang.setObject("MaxLength",value,this.entry);},_getDisplayModeAttr:function(){return lang.getObject("DisplayMode",false,this.entry);},_setDisplayModeAttr:function(value){lang.setObject("DisplayMode",value,this.entry);},_getCanEditTextAttr:function(){return lang.getObject("CanEditText",false,this.entry);},_setCanEditTextAttr:function(value){lang.setObject("CanEditText",value,this.entry);},_getControlLabelPlacementAttr:function(){return lang.getObject("ControlLabelPlacement",false,this.entry);},_setControlLabelPlacementAttr:function(value){lang.setObject("ControlLabelPlacement",value,this.entry);},_getAllowMultiplesAttr:function(){return lang.getObject("AllowMultiples",false,this.entry);},_setAllowMultiplesAttr:function(value){lang.setObject("AllowMultiples",value,this.entry);},setupFor:function(_22a9){this.inherited(arguments);this.set("allowMultiples",false);this.set("canEditText",true);this.set("displayMode","AsControl");this.set("maxLength",_22a9["data"].length||-1);this.set("mustExistInList",false);this.set("required",false);this.set("storageMode","Id");this.set("pickListName",_22a9["dataTypeData"]["PickListName"]);this.set("dataBindings",[{$type:"Sage.Platform.QuickForms.Controls.QuickFormPropertyDataBindingDefinition, Sage.Platform.QuickForms",BindingType:"Property",ControlItemName:"PickListValue",DataItemName:_22a9.propertyPath,DataSourceID:"MainEntity",FormatString:"",NullValueString:""}]);this.set("designBinding",_22a9.propertyPath||"");},startup:function(){this.inherited(arguments);var _22aa=this.get("defaultDataBinding");this.set("designCaption",this.get("caption"));this.set("designBinding",(_22aa&&_22aa["DataItemName"])||"");this.applyCaptionAlignment();this.applyVisibility();}});});},"Sage/QuickForms/Design/Editors/PickListBasicPropertyEditor":function(){define(["dojo/string","dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","dijit/form/ComboBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","Sage/Services/_ServiceMixin","dojo/i18n!./nls/PickListBasicPropertyEditor"],function(_22ab,_22ac,lang,_22ad,_22ae,_22af,_22b0,_22b1,_22b2,_22b3,_22b4,_22b5,_22b6,_22b7,_22b8){return _22ac("Sage.QuickForms.Design.Editors.PickListBasicPropertyEditor",[_22ad,_22b5,_22b4,_22b7],{serviceMap:{"dataService":{type:"sdata",name:"system"}},widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.captionTooltipText %}\">","<label>{%= $.captionText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_caption\" data-dojo-attach-event=\"onChange:_onCaptionChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.captionAlignmentTooltipText %}\">","<label>{%= $.captionAlignmentText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_captionAlignment\" data-dojo-attach-event=\"onChange:_onCaptionAlignmentChange\">","{% for (var alignment in $.alignmentText) { %}","<span value=\"{%= alignment %}\">{%= $.alignmentText[alignment] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.toolTipTooltipText %}\">","<label>{%= $.toolTipText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_toolTip\" data-dojo-attach-event=\"onChange:_onToolTipChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.isReadOnlyTooltipText %}\">","<label>{%= $.isReadOnlyText %}</label>","<div data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"_isReadOnly\" data-dojo-attach-event=\"onChange:_onIsReadOnlyChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_isReadOnly:null,_toolTip:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{"left":"Left","center":"Center","right":"Right"},constructor:function(){lang.mixin(this,_22b8);},setup:function(){this.inherited(arguments);this._caption.set("value",this._designer.get("caption"));this._captionAlignment.set("value",this._designer.get("captionAlignment"));this._isReadOnly.set("value",this._designer.get("isReadOnly"));this._toolTip.set("value",this._designer.get("toolTip"));},_onCaptionChange:function(value){if(this.isSuspended()){return;}this._designer.set("caption",value);},_onCaptionAlignmentChange:function(value){if(this.isSuspended()){return;}this._designer.set("captionAlignment",value);},_onIsReadOnlyChange:function(value){if(this.isSuspended()){return;}this._designer.set("isReadOnly",value);},_onToolTipChange:function(value){if(this.isSuspended()){return;}this._designer.set("toolTip",value);}});});},"Sage/QuickForms/Design/Editors/PickListAdvancedPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/string","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dojo/data/ItemFileWriteStore","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/PickListAdvancedPropertyEditor"],function(_22b9,lang,_22ba,_22bb,_22bc,_22bd,_22be,_22bf,_22c0,_22c1,_22c2,_22c3,_22c4){return _22b9("Sage.QuickForms.Design.Editors.PickListAdvancedPropertyEditor",[_22bb,_22c2,_22c1],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.displayModeTooltipText %}\">","<label>{%= $.displayModeText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_displayMode\" data-dojo-attach-event=\"onChange:_onDisplayModeChange\">","{% for (var mode in $.displayModeTypeText) { %}","<span value=\"{%= mode %}\">{%= $.displayModeTypeText[mode] %}</span>","{% } %}","</div>","</div>","<div class=\"editor-field\" title=\"{%= $.controlLabelPlacementTooltipText %}\">","<label>{%= $.controlLabelPlacementText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_controlLabelPlacement\" data-dojo-attach-event=\"onChange:_onControlLabelPlacementChange\">","{% for (var placement in $.labelPlacementText) { %}","<span value=\"{%= placement %}\">{%= $.labelPlacementText[placement] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.visibleTooltipText %}\">","<label>{%= $.visibleText %}</label>","<div data-dojo-attach-point=\"_visible\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onVisibleChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.allowMultiplesTooltipText %}\">","<label>{%= $.allowMultiplesText %}</label>","<div data-dojo-attach-point=\"_allowMultiples\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onAllowMultiplesChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.canEditTextTooltipText %}\">","<label>{%= $.canEditTextText %}</label>","<div data-dojo-attach-point=\"_canEditText\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onCanEditTextChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.enabledTooltipText %}\">","<label>{%= $.enabledText %}</label>","<div data-dojo-attach-point=\"_enabled\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onEnabledChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.mustExistInListTooltipText %}\">","<label>{%= $.mustExistInListText %}</label>","<div data-dojo-attach-point=\"_mustExistInList\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onMustExistInListChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.maxLengthTooltipText %}\">","<label>{%= $.maxLengthText %}</label>","<div data-dojo-type=\"dijit.form.NumberTextBox\" data-dojo-attach-point=\"_maxLength\" data-dojo-attach-event=\"onChange:_onMaxLengthChange\" data-dojo-props=\"constraints:{min:-1,places:0}\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.requiredTooltipText %}\">","<label>{%= $.requiredText %}</label>","<div data-dojo-attach-point=\"_required\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onRequiredChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.defaultDataBindingTooltipText %}\">","<label>{%= $.defaultDataBindingText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_defaultDataBinding\" data-dojo-attach-event=\"onChange:_onDefaultDataBindingChange\" data-dojo-props=\"disabled:true\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.pickListNameTooltipText %}\">","<label>{%= $.pickListNameText %}</label>","<div data-dojo-type=\"dijit.form.ComboBox\" data-dojo-attach-point=\"_pickListName\" data-dojo-attach-event=\"onChange:_onPickListNameChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.storageModeTooltipText %}\">","<label>{%= $.storageModeText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_storageMode\" data-dojo-attach-event=\"onChange:_onStorageModeChange\" data-dojo-props=\"disabled:true\">","{% for (var mode in $.storageModeTypeText) { %}","<span value=\"{%= mode %}\">{%= $.storageModeTypeText[mode] %}</span>","{% } %}","</div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlIdTooltipText %}\">","<label>{%= $.controlIdText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlId\" data-dojo-attach-event=\"onChange:_onControlIdChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlTypeTooltipText %}\">","<label>{%= $.controlTypeText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlType\" data-dojo-attach-event=\"onChange:_onControlTypeChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","</fieldset>"]),_allowMultiples:null,_canEditText:null,_controlType:null,_controlId:null,_controlLabelPlacement:null,_defaultDataBinding:null,_displayMode:null,_enabled:null,_maxLength:null,_mustExistInList:null,_pickListName:null,_required:null,_storageMode:null,_visible:null,pickListRequest:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",allowMultiplesText:"Allow Multiple Selections:",allowMultiplesTooltipText:"Allows user to select more than one item.",canEditTextText:"Can Edit Text:",canEditTextTooltipText:"Allows user to type value.",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Saleslogix control type.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",displayModeText:"Display Mode:",displayModeTooltipText:"Mode of display of control: text box, hyperlink, or plain text.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",maxLengthText:"Max Length:",maxLengthTooltipText:"Maximum number of characters user can enter.",mustExistInListText:"Item Must Exist:",mustExistInListTooltipText:"Requires typed value to be on list.",pickListNameText:"Pick List Name:",pickListNameTooltipText:"Name of the list of values the user can select from when entering data.",requiredText:"Required:",requiredTooltipText:"Requires a value when saving data.",storageModeText:"Storage Mode:",storageModeTooltipText:"How the value is stored: Text, Id, or Code.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",labelPlacementText:{"left":"Left","right":"Right","top":"Top","none":"None"},displayModeTypeText:{"AsControl":"As Control","AsText":"As Text","AsHyperlink":"As Hyperlink"},storageModeTypeText:{"Text":"Text","Id":"ID","Code":"Code"},pickListRequestErrorText:"Unable to retrieve picklists from server.",constructor:function(){lang.mixin(this,_22c4);},setup:function(){this.inherited(arguments);this._allowMultiples.set("value",this._designer.get("allowMultiples"));this._canEditText.set("value",this._designer.get("canEditText"));this._controlType.set("value",this._designer.get("controlName"));this._controlId.set("value",this._designer.get("controlId"));this._controlLabelPlacement.set("value",this._designer.get("controlLabelPlacement"));this._displayMode.set("value",this._designer.get("displayMode"));this._enabled.set("value",this._designer.get("enabled"));this._maxLength.set("value",this._designer.get("maxLength"));this._mustExistInList.set("value",this._designer.get("mustExistInList"));this._pickListName.set("value",this._designer.get("pickListName"));this._required.set("value",this._designer.get("required"));this._storageMode.set("value",this._designer.get("storageMode"));this._visible.set("value",this._designer.get("visible"));var _22c5=this._designer.get("defaultDataBinding");this._defaultDataBinding.set("value",(_22c5&&_22c5["DataItemName"])||"");},destroy:function(){if(this.pickListRequest){this.pickListRequest.abort();}this.inherited(arguments);},createPickListRequest:function(){var _22c6=new Sage.SData.Client.SDataResourceCollectionRequest(this.dataService).setCount(300).setStartIndex(0);_22c6.setResourceKind("picklists");_22c6.setQueryArg(Sage.SData.Client.SDataUri.QueryArgNames.OrderBy,"name asc");return _22c6;},requestPickListNames:function(){var _22c7=this.createPickListRequest();if(_22c7){this.pickListRequest=_22c7.read({success:this.onRequestPickListNamesSuccess,failure:this.onRequestPickListNamesFailure,scope:this});}},onRequestPickListNamesSuccess:function(feed){this.pickListRequest=null;this.processPickListFeed(feed);},onRequestPickListNamesFailure:function(_22c8,o){this.pickListRequest=null;alert(_22ba.substitute(this.pickListRequestErrorText,[_22c8,o]));},processPickListFeed:function(feed){if(!feed["$resources"]){return;}var _22c9=new _22c0({data:{identifier:"$key",label:"name",items:[]}});for(var i=0;i<feed["$resources"].length;i++){var entry=feed["$resources"][i];if(entry.name){_22c9.newItem(entry);}}this._pickListName.set({store:_22c9,disabled:false});},_onAllowMultiplesChange:function(value){if(this.isSuspended()){return;}this._designer.set("allowMultiples",value);},_onCanEditTextChange:function(value){if(this.isSuspended()){return;}this._designer.set("canEditText",value);},_onControlTypeChange:function(value){},_onControlIdChange:function(value){},_onControlLabelPlacementChange:function(value){if(this.isSuspended()){return;}this._designer.set("controlLabelPlacement",value);},_onDefaultDataBindingChange:function(value){},_onDisplayModeChange:function(value){if(this.isSuspended()){return;}this._designer.set("displayMode",value);},_onEnabledChange:function(value){if(this.isSuspended()){return;}this._designer.set("enabled",value);},_onMaxLengthChange:function(value){if(this.isSuspended()){return;}this._designer.set("maxLength",value);},_onMustExistInListChange:function(value){if(this.isSuspended()){return;}this._designer.set("mustExistInList",value);},_onPickListNameChange:function(value){if(this.isSuspended()){return;}this._designer.set("pickListName",value);var _22ca=this._pickListName.get("item");this._designer.set("pickListId",_22ca["$key"][0]);},_onRequiredChange:function(value){if(this.isSuspended()){return;}this._designer.set("required",value);},_onStorageModeChange:function(value){if(this.isSuspended()){return;}this._designer.set("storageMode",value);},_onVisibleChange:function(value){if(this.isSuspended()){return;}this._designer.set("visible",value);}});});},"Sage/QuickForms/Design/ComboBoxControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/ComboBoxBasicPropertyEditor","./Editors/ComboBoxAdvancedPropertyEditor","dojo/i18n!./nls/ComboBoxControlDesigner"],function(_22cb,array,lang,_22cc,_22cd,_22ce,_22cf,_22d0,_22d1,_22d2,_22d3){return _22cb("Sage.QuickForms.Design.ComboBoxControlDesigner",[_22cd,_22ce,_22cc,_22cf],{designSupport:{visible:true},editors:[_22d1,_22d2,_22d0],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div class=\"{%= $.fieldClass %}\" data-dojo-attach-point=\"containerNode\">","<div class=\"{%= $.fieldClass %}-caption\" data-dojo-attach-point=\"designCaptionNode\"></div>","<div class=\"{%= $.fieldClass %}-field\">","<span data-dojo-attach-point=\"designBindingNode\"></span>","<div class=\"{%= $.fieldClass %}-icon\"></div>","</div>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},_setDesignBindingAttr:{node:"designBindingNode",type:"innerText"},fieldClass:"design-combobox",helpTopicName:"ComboBox_control",quickFormControlType:"Sage.Platform.QuickForms.QFControls.QFListBox, Sage.Platform.QuickForms.QFControls",displayNameText:"ComboBox",constructor:function(){lang.mixin(this,_22d3);},_setCaptionAttr:function(value){this.inherited(arguments);this.set("designCaption",value);},_getDefaultDataBindingAttr:function(){return this.findDataBinding(function(_22d4){return (_22d4["ControlItemName"]=="SelectedValue");});},_getControlLabelPlacementAttr:function(){return lang.getObject("ControlLabelPlacement",false,this.entry);},_setControlLabelPlacementAttr:function(value){lang.setObject("ControlLabelPlacement",value,this.entry);},_getDataSourceAttr:function(){return lang.getObject("DataSource",false,this.entry);},_setDataSourceAttr:function(value){lang.setObject("DataSource",value,this.entry);},_getHasItemsAttr:function(){var items=lang.getObject("ItemValues",false,this.entry);return (lang.isArray(items)&&items.length>0);},_getItemValuesAttr:function(){return lang.getObject("ItemValues",false,this.entry);},_setItemValuesAttr:function(value){lang.setObject("ItemValues",value,this.entry);},_getTextFieldAttr:function(){return lang.getObject("TextField",false,this.entry);},_setTextFieldAttr:function(value){lang.setObject("TextField",value,this.entry);},_getValueFieldAttr:function(){return lang.getObject("ValueField",false,this.entry);},_setValueFieldAttr:function(value){lang.setObject("ValueField",value,this.entry);},setupFor:function(_22d5){this.inherited(arguments);this.set("dataSource",null);this.set("textField","");this.set("valueField","");this.set("dataBindings",[{$type:"Sage.Platform.QuickForms.Controls.QuickFormPropertyDataBindingDefinition, Sage.Platform.QuickForms",BindingType:"Property",ControlItemName:"SelectedValue",DataItemName:_22d5.propertyPath,DataSourceID:"MainEntity",FormatString:"",NullValueString:""}]);this.set("designBinding",_22d5.propertyPath||"");},startup:function(){this.inherited(arguments);var _22d6=this.get("defaultDataBinding");this.set("designCaption",this.get("caption"));this.set("designBinding",(_22d6&&_22d6["DataItemName"])||"");this.applyCaptionAlignment();this.applyVisibility();}});});},"Sage/QuickForms/Design/Editors/ComboBoxBasicPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/ComboBoxBasicPropertyEditor"],function(_22d7,lang,_22d8,_22d9,_22da,_22db,_22dc,_22dd,_22de,_22df,_22e0,_22e1){return _22d7("Sage.QuickForms.Design.Editors.ComboBoxBasicPropertyEditor",[_22d8,_22df,_22de],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.captionTooltipText %}\">","<label>{%= $.captionText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_caption\" data-dojo-attach-event=\"onChange:_onCaptionChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.captionAlignmentTooltipText %}\">","<label>{%= $.captionAlignmentText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_captionAlignment\" data-dojo-attach-event=\"onChange:_onCaptionAlignmentChange\">","{% for (var alignment in $.alignmentText) { %}","<span value=\"{%= alignment %}\">{%= $.alignmentText[alignment] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.toolTipTooltipText %}\">","<label>{%= $.toolTipText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_toolTip\" data-dojo-attach-event=\"onChange:_onToolTipChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.isReadOnlyTooltipText %}\">","<label>{%= $.isReadOnlyText %}</label>","<div data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"_isReadOnly\" data-dojo-attach-event=\"onChange:_onIsReadOnlyChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_isReadOnly:null,_toolTip:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{"left":"Left","center":"Center","right":"Right"},constructor:function(){lang.mixin(this,_22e1);},setup:function(){this.inherited(arguments);this._caption.set("value",this._designer.get("caption"));this._captionAlignment.set("value",this._designer.get("captionAlignment"));this._isReadOnly.set("value",this._designer.get("isReadOnly"));this._toolTip.set("value",this._designer.get("toolTip"));},_onCaptionChange:function(value){if(this.isSuspended()){return;}this._designer.set("caption",value);},_onCaptionAlignmentChange:function(value){if(this.isSuspended()){return;}this._designer.set("captionAlignment",value);},_onIsReadOnlyChange:function(value){if(this.isSuspended()){return;}this._designer.set("isReadOnly",value);},_onToolTipChange:function(value){if(this.isSuspended()){return;}this._designer.set("toolTip",value);}});});},"Sage/QuickForms/Design/Editors/ComboBoxAdvancedPropertyEditor":function(){define(["dojo/string","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dojo/store/Memory","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/ComboBoxAdvancedPropertyEditor"],function(_22e2,_22e3,lang,array,_22e4,_22e5,_22e6,_22e7,_22e8,_22e9,_22ea,_22eb,_22ec,_22ed){return _22e3("Sage.QuickForms.Design.Editors.ComboBoxAdvancedPropertyEditor",[_22e4,_22eb,_22ea],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlLabelPlacementTooltipText %}\">","<label>{%= $.controlLabelPlacementText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_controlLabelPlacement\" data-dojo-attach-event=\"onChange:_onControlLabelPlacementChange\">","{% for (var placement in $.labelPlacementText) { %}","<span value=\"{%= placement %}\">{%= $.labelPlacementText[placement] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.visibleTooltipText %}\">","<label>{%= $.visibleText %}</label>","<div data-dojo-attach-point=\"_visible\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onVisibleChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.enabledTooltipText %}\">","<label>{%= $.enabledText %}</label>","<div data-dojo-attach-point=\"_enabled\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onEnabledChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>","<fieldset><legend>{%= $.itemGroupText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.dataSourceTooltipText %}\">","<label>{%= $.dataSourceText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_dataSource\" data-dojo-attach-event=\"onChange:_onDataSourceChange\" data-dojo-props=\"disabled:true\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.itemsTooltipText %}\">","<label>{%= $.itemsText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_items\" data-dojo-attach-event=\"onChange:_onItemsChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.textFieldTooltipText %}\">","<label>{%= $.textFieldText %}</label>","<div data-dojo-type=\"dijit.form.ComboBox\" data-dojo-attach-point=\"_textField\" data-dojo-attach-event=\"onChange:_onTextFieldChange\" data-dojo-props=\"disabled:true\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.valueFieldTooltipText %}\">","<label>{%= $.valueFieldText %}</label>","<div data-dojo-type=\"dijit.form.ComboBox\" data-dojo-attach-point=\"_valueField\" data-dojo-attach-event=\"onChange:_onValueFieldChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.defaultDataBindingTooltipText %}\">","<label>{%= $.defaultDataBindingText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_defaultDataBinding\" data-dojo-attach-event=\"onChange:_onDefaultDataBindingChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlIdTooltipText %}\">","<label>{%= $.controlIdText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlId\" data-dojo-attach-event=\"onChange:_onControlIdChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlTypeTooltipText %}\">","<label>{%= $.controlTypeText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlType\" data-dojo-attach-event=\"onChange:_onControlTypeChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","</fieldset>"]),_controlId:null,_controlLabelPlacement:null,_controlType:null,_dataSource:null,_defaultDataBinding:null,_enabled:null,_items:null,_textField:null,_valueField:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",itemGroupText:"Items",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Saleslogix control type.",dataSourceText:"Data Source:",dataSourceTooltipText:"Source of the data for this control such as another control or an entity.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",itemsText:"Items:",itemsTooltipText:"Values the user can select.",textFieldText:"Text Field:",textFieldTooltipText:"The name of the data source field used to populate the visible text portion of the list items.",valueFieldText:"Value Field:",valueFieldTooltipText:"The name of the data source field used to populate the value portion of the list items.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",labelPlacementText:{"left":"Left","right":"Right","top":"Top","none":"None"},hasItemsText:"Set",noItemsText:"Not Set",constructor:function(){lang.mixin(this,_22ed);},setup:function(){this.inherited(arguments);this._controlId.set("value",this._designer.get("controlId"));this._controlLabelPlacement.set("value",this._designer.get("controlLabelPlacement"));this._controlType.set("value",this._designer.get("controlName"));this._enabled.set("value",this._designer.get("enabled"));this._items.set("value",this._designer.get("hasItems")?this.hasItemsText:this.noItemsText);this._visible.set("value",this._designer.get("visible"));var _22ee=this._designer.get("defaultDataBinding");this._defaultDataBinding.set("value",(_22ee&&_22ee["DataItemName"])||"");this.setDataSources();this._dataSource.set("value",this._designer.get("dataSource"));this._textField.set("value",this._designer.get("textField"));this._valueField.set("value",this._designer.get("valueField"));},setDataSources:function(){var _22ef=this.getDataSources(),_22f0=this._dataSource;_22f0.removeOption(_22f0.getOptions());_22f0.addOption({label:"",value:"_-1"});_22f0.addOption({label:"MainEntity",value:"MainEntity"});array.forEach(_22ef,function(_22f1){this.addOption(lang.mixin({label:_22f1.get("controlId"),value:_22f1.get("controlId")},_22f1.entry));},_22f0);},getDataSources:function(){var _22f2=this._designer.get("form").get("controls"),_22f3=[];array.forEach(_22f2,function(_22f4){if(_22f4 instanceof Sage.QuickForms.Design.DataSourceDesigner){this.push(_22f4);}},_22f3);return _22f3;},getSelectedItem:function(value){var _22f5=this._dataSource;for(var i=0;i<_22f5.options.length;i++){var item=_22f5.options[i];if(item.value===value){return item||null;}}return null;},updateFieldStore:function(field,store,_22f6){if(field.store.destroy){field.store.destroy();}field.set("store",store);field.set("searchAttr",_22f6);field.set("disabled",false);},createSDataPropertyStore:function(_22f7){return new Sage.Data.SDataStore({service:Sage.Data.SDataServiceRegistry.getService("metadata"),collection:"$resources.0.properties.$resources",resourceKind:"entities",resourcePredicate:_22e2.substitute("'${0}'",[_22f7])});},_onControlIdChange:function(value){},_onControlLabelPlacementChange:function(value){if(this.isSuspended()){return;}this._designer.set("controlLabelPlacement",value);},_onControlTypeChange:function(value){},_onDefaultDataBindingChange:function(value){},_onDataSourceChange:function(value){},_onEnabledChange:function(value){if(this.isSuspended()){return;}this._designer.set("enabled",value);},_onItemsChange:function(value){},_onTextFieldChange:function(value){if(this.isSuspended()){return;}this._designer.set("textField",value);},_onValueFieldChange:function(value){if(this.isSuspended()){return;}this._designer.set("valueField",value);},_onVisibleChange:function(value){if(this.isSuspended()){return;}this._designer.set("visible",value);}});});},"Sage/QuickForms/Design/UserControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/UserBasicPropertyEditor","./Editors/UserAdvancedPropertyEditor","dojo/i18n!./nls/UserControlDesigner"],function(_22f8,array,lang,_22f9,_22fa,_22fb,_22fc,_22fd,_22fe,_22ff,_2300){return _22f8("Sage.QuickForms.Design.UserControlDesigner",[_22fa,_22fb,_22f9,_22fc],{designSupport:{visible:true},editors:[_22fe,_22ff,_22fd],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div class=\"{%= $.fieldClass %}\" data-dojo-attach-point=\"containerNode\">","<div class=\"{%= $.fieldClass %}-caption\" data-dojo-attach-point=\"designCaptionNode\"></div>","<div class=\"{%= $.fieldClass %}-field\">","<span data-dojo-attach-point=\"designBindingNode\"></span>","<div class=\"{%= $.fieldClass %}-icon\"></div>","</div>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},_setDesignBindingAttr:{node:"designBindingNode",type:"innerText"},fieldClass:"design-user",helpTopicName:"User_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFSLXUser, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"User",constructor:function(){lang.mixin(this,_2300);},_setCaptionAttr:function(value){this.inherited(arguments);this.set("designCaption",value);},_getDefaultDataBindingAttr:function(){return this.findDataBinding(function(_2301){return (_2301["ControlItemName"]=="LookupResultValue");});},_getControlLabelPlacementAttr:function(){return lang.getObject("ControlLabelPlacement",false,this.entry);},_setControlLabelPlacementAttr:function(value){lang.setObject("ControlLabelPlacement",value,this.entry);},_getRequiredAttr:function(){return lang.getObject("Required",false,this.entry);},_setRequiredAttr:function(value){lang.setObject("Required",value,this.entry);},_getLookupBindingModeAttr:function(){return lang.getObject("LookupBindingMode",false,this.entry);},_setLookupBindingModeAttr:function(value){lang.setObject("LookupBindingMode",value,this.entry);},setupFor:function(_2302){this.inherited(arguments);this.set("lookupBindingMode","Object");this.set("required",false);this.set("dataBindings",[{$type:"Sage.Platform.QuickForms.Controls.QuickFormPropertyDataBindingDefinition, Sage.Platform.QuickForms",BindingType:"Property",ControlItemName:"LookupResultValue",DataItemName:_2302.propertyPath,DataSourceID:"MainEntity",FormatString:"",NullValueString:"null"}]);this.set("designBinding",_2302.propertyPath||"");},startup:function(){this.inherited(arguments);var _2303=this.get("defaultDataBinding");this.set("designCaption",this.get("caption"));this.set("designBinding",(_2303&&_2303["DataItemName"])||"");this.applyCaptionAlignment();this.applyVisibility();}});});},"Sage/QuickForms/Design/Editors/UserBasicPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/UserBasicPropertyEditor"],function(_2304,lang,_2305,_2306,_2307,_2308,_2309,_230a,_230b,_230c,_230d,_230e){return _2304("Sage.QuickForms.Design.Editors.UserBasicPropertyEditor",[_2305,_230c,_230b],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.captionTooltipText %}\">","<label>{%= $.captionText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_caption\" data-dojo-attach-event=\"onChange:_onCaptionChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.captionAlignmentTooltipText %}\">","<label>{%= $.captionAlignmentText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_captionAlignment\" data-dojo-attach-event=\"onChange:_onCaptionAlignmentChange\">","{% for (var alignment in $.alignmentText) { %}","<span value=\"{%= alignment %}\">{%= $.alignmentText[alignment] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.toolTipTooltipText %}\">","<label>{%= $.toolTipText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_toolTip\" data-dojo-attach-event=\"onChange:_onToolTipChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.isReadOnlyTooltipText %}\">","<label>{%= $.isReadOnlyText %}</label>","<div data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"_isReadOnly\" data-dojo-attach-event=\"onChange:_onIsReadOnlyChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_isReadOnly:null,_toolTip:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{"left":"Left","center":"Center","right":"Right"},constructor:function(){lang.mixin(this,_230e);},setup:function(){this.inherited(arguments);this._caption.set("value",this._designer.get("caption"));this._captionAlignment.set("value",this._designer.get("captionAlignment"));this._isReadOnly.set("value",this._designer.get("isReadOnly"));this._toolTip.set("value",this._designer.get("toolTip"));},_onCaptionChange:function(value){if(this.isSuspended()){return;}this._designer.set("caption",value);},_onCaptionAlignmentChange:function(value){if(this.isSuspended()){return;}this._designer.set("captionAlignment",value);},_onIsReadOnlyChange:function(value){if(this.isSuspended()){return;}this._designer.set("isReadOnly",value);},_onToolTipChange:function(value){if(this.isSuspended()){return;}this._designer.set("toolTip",value);}});});},"Sage/QuickForms/Design/Editors/UserAdvancedPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/UserAdvancedPropertyEditor"],function(_230f,lang,_2310,_2311,_2312,_2313,_2314,_2315,_2316,_2317,_2318){return _230f("Sage.QuickForms.Design.Editors.UserAdvancedPropertyEditor",[_2310,_2316,_2315],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlLabelPlacementTooltipText %}\">","<label>{%= $.controlLabelPlacementText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_controlLabelPlacement\" data-dojo-attach-event=\"onChange:_onControlLabelPlacementChange\">","{% for (var placement in $.labelPlacementText) { %}","<span value=\"{%= placement %}\">{%= $.labelPlacementText[placement] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.visibleTooltipText %}\">","<label>{%= $.visibleText %}</label>","<div data-dojo-attach-point=\"_visible\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onVisibleChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.enabledTooltipText %}\">","<label>{%= $.enabledText %}</label>","<div data-dojo-attach-point=\"_enabled\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onEnabledChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.requiredTooltipText %}\">","<label>{%= $.requiredText %}</label>","<div data-dojo-attach-point=\"_required\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onRequiredChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.defaultDataBindingTooltipText %}\">","<label>{%= $.defaultDataBindingText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_defaultDataBinding\" data-dojo-attach-event=\"onChange:_onDefaultDataBindingChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.lookupBindingModeTooltipText %}\">","<label>{%= $.lookupBindingModeText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_lookupBindingMode\" data-dojo-attach-event=\"onChange:_onLookupBindingModeChange\">","{% for (var mode in $.bindingModeText) { %}","<span value=\"{%= mode %}\">{%= $.bindingModeText[mode] %}</span>","{% } %}","</div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlIdTooltipText %}\">","<label>{%= $.controlIdText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlId\" data-dojo-attach-event=\"onChange:_onControlIdChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlTypeTooltipText %}\">","<label>{%= $.controlTypeText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlType\" data-dojo-attach-event=\"onChange:_onControlTypeChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","</fieldset>"]),_controlType:null,_controlId:null,_enabled:null,_controlLabelPlacement:null,_defaultDataBinding:null,_lookupBindingMode:null,_required:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Saleslogix control type.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",lookupBindingModeText:"Lookup Binding Mode:",lookupBindingModeTooltipText:"Indicates whether you want to bind to an entity object or to a string value.",requiredText:"Required:",requiredTooltipText:"Requires a value when saving data.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",labelPlacementText:{"left":"Left","right":"Right","top":"Top","none":"None"},bindingModeText:{"Object":"Object","String":"String"},constructor:function(){lang.mixin(this,_2318);},setup:function(){this.inherited(arguments);this._controlType.set("value",this._designer.get("controlName"));this._controlId.set("value",this._designer.get("controlId"));this._enabled.set("value",this._designer.get("enabled"));this._controlLabelPlacement.set("value",this._designer.get("controlLabelPlacement"));this._lookupBindingMode.set("value",this._designer.get("lookupBindingMode"));this._required.set("value",this._designer.get("required"));this._visible.set("value",this._designer.get("visible"));var _2319=this._designer.get("defaultDataBinding");this._defaultDataBinding.set("value",(_2319&&_2319["DataItemName"])||"");},_onControlTypeChange:function(value){},_onControlIdChange:function(value){},_onDefaultDataBindingChange:function(value){},_onEnabledChange:function(value){if(this.isSuspended()){return;}this._designer.set("enabled",value);},_onControlLabelPlacementChange:function(value){if(this.isSuspended()){return;}this._designer.set("controlLabelPlacement",value);},_onLookupBindingModeChange:function(value){if(this.isSuspended()){return;}this._designer.set("lookupBindingMode",value);},_onRequiredChange:function(value){if(this.isSuspended()){return;}this._designer.set("required",value);},_onVisibleChange:function(value){if(this.isSuspended()){return;}this._designer.set("visible",value);}});});},"Sage/QuickForms/Design/OwnerControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/OwnerBasicPropertyEditor","./Editors/OwnerAdvancedPropertyEditor","dojo/i18n!./nls/OwnerControlDesigner"],function(_231a,array,lang,_231b,_231c,_231d,_231e,_231f,_2320,_2321,_2322){return _231a("Sage.QuickForms.Design.OwnerControlDesigner",[_231c,_231d,_231b,_231e],{designSupport:{visible:true},editors:[_2320,_2321,_231f],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div class=\"{%= $.fieldClass %}\" data-dojo-attach-point=\"containerNode\">","<div class=\"{%= $.fieldClass %}-caption\" data-dojo-attach-point=\"designCaptionNode\"></div>","<div class=\"{%= $.fieldClass %}-field\">","<span data-dojo-attach-point=\"designBindingNode\"></span>","<div class=\"{%= $.fieldClass %}-icon\"></div>","</div>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},_setDesignBindingAttr:{node:"designBindingNode",type:"innerText"},fieldClass:"design-owner",helpTopicName:"Owner_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFSLXOwner, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"Owner",constructor:function(){lang.mixin(this,_2322);},_setCaptionAttr:function(value){this.inherited(arguments);this.set("designCaption",value);},_getDefaultDataBindingAttr:function(){return this.findDataBinding(function(_2323){return (_2323["ControlItemName"]=="LookupResultValue");});},_getControlLabelPlacementAttr:function(){return lang.getObject("ControlLabelPlacement",false,this.entry);},_setControlLabelPlacementAttr:function(value){lang.setObject("ControlLabelPlacement",value,this.entry);},_getRequiredAttr:function(){return lang.getObject("Required",false,this.entry);},_setRequiredAttr:function(value){lang.setObject("Required",value,this.entry);},setupFor:function(_2324){this.inherited(arguments);this.set("required",false);this.set("dataBindings",[{$type:"Sage.Platform.QuickForms.Controls.QuickFormPropertyDataBindingDefinition, Sage.Platform.QuickForms",BindingType:"Property",ControlItemName:"LookupResultValue",DataItemName:_2324.propertyPath,DataSourceID:"MainEntity",FormatString:"",NullValueString:"null"}]);this.set("designBinding",_2324.propertyPath||"");},startup:function(){this.inherited(arguments);var _2325=this.get("defaultDataBinding");this.set("designCaption",this.get("caption"));this.set("designBinding",(_2325&&_2325["DataItemName"])||"");this.applyCaptionAlignment();this.applyVisibility();}});});},"Sage/QuickForms/Design/Editors/OwnerBasicPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/OwnerBasicPropertyEditor"],function(_2326,lang,_2327,_2328,_2329,_232a,_232b,_232c,_232d,_232e,_232f,_2330){return _2326("Sage.QuickForms.Design.Editors.OwnerBasicPropertyEditor",[_2327,_232e,_232d],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.captionTooltipText %}\">","<label>{%= $.captionText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_caption\" data-dojo-attach-event=\"onChange:_onCaptionChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.captionAlignmentTooltipText %}\">","<label>{%= $.captionAlignmentText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_captionAlignment\" data-dojo-attach-event=\"onChange:_onCaptionAlignmentChange\">","{% for (var alignment in $.alignmentText) { %}","<span value=\"{%= alignment %}\">{%= $.alignmentText[alignment] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.toolTipTooltipText %}\">","<label>{%= $.toolTipText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_toolTip\" data-dojo-attach-event=\"onChange:_onToolTipChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.isReadOnlyTooltipText %}\">","<label>{%= $.isReadOnlyText %}</label>","<div data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"_isReadOnly\" data-dojo-attach-event=\"onChange:_onIsReadOnlyChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_isReadOnly:null,_toolTip:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{"left":"Left","center":"Center","right":"Right"},constructor:function(){lang.mixin(this,_2330);},setup:function(){this.inherited(arguments);this._caption.set("value",this._designer.get("caption"));this._captionAlignment.set("value",this._designer.get("captionAlignment"));this._isReadOnly.set("value",this._designer.get("isReadOnly"));this._toolTip.set("value",this._designer.get("toolTip"));},_onCaptionChange:function(value){if(this.isSuspended()){return;}this._designer.set("caption",value);},_onCaptionAlignmentChange:function(value){if(this.isSuspended()){return;}this._designer.set("captionAlignment",value);},_onIsReadOnlyChange:function(value){if(this.isSuspended()){return;}this._designer.set("isReadOnly",value);},_onToolTipChange:function(value){if(this.isSuspended()){return;}this._designer.set("toolTip",value);}});});},"Sage/QuickForms/Design/Editors/OwnerAdvancedPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/OwnerAdvancedPropertyEditor"],function(_2331,lang,_2332,_2333,_2334,_2335,_2336,_2337,_2338,_2339,_233a){return _2331("Sage.QuickForms.Design.Editors.OwnerAdvancedPropertyEditor",[_2332,_2338,_2337],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlLabelPlacementTooltipText %}\">","<label>{%= $.controlLabelPlacementText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_controlLabelPlacement\" data-dojo-attach-event=\"onChange:_onControlLabelPlacementChange\">","{% for (var placement in $.labelPlacementText) { %}","<span value=\"{%= placement %}\">{%= $.labelPlacementText[placement] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.visibleTooltipText %}\">","<label>{%= $.visibleText %}</label>","<div data-dojo-attach-point=\"_visible\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onVisibleChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.enabledTooltipText %}\">","<label>{%= $.enabledText %}</label>","<div data-dojo-attach-point=\"_enabled\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onEnabledChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.requiredTooltipText %}\">","<label>{%= $.requiredText %}</label>","<div data-dojo-attach-point=\"_required\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onRequiredChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.defaultDataBindingTooltipText %}\">","<label>{%= $.defaultDataBindingText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_defaultDataBinding\" data-dojo-attach-event=\"onChange:_onDefaultDataBindingChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlIdTooltipText %}\">","<label>{%= $.controlIdText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlId\" data-dojo-attach-event=\"onChange:_onControlIdChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlTypeTooltipText %}\">","<label>{%= $.controlTypeText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlType\" data-dojo-attach-event=\"onChange:_onControlTypeChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","</fieldset>"]),_controlType:null,_controlId:null,_enabled:null,_controlLabelPlacement:null,_defaultDataBinding:null,_required:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Saleslogix control type.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",requiredText:"Required:",requiredTooltipText:"Requires a value when saving data.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",labelPlacementText:{"left":"Left","right":"Right","top":"Top","none":"None"},constructor:function(){lang.mixin(this,_233a);},setup:function(){this.inherited(arguments);this._controlType.set("value",this._designer.get("controlName"));this._controlId.set("value",this._designer.get("controlId"));this._enabled.set("value",this._designer.get("enabled"));this._controlLabelPlacement.set("value",this._designer.get("controlLabelPlacement"));this._required.set("value",this._designer.get("required"));this._visible.set("value",this._designer.get("visible"));var _233b=this._designer.get("defaultDataBinding");this._defaultDataBinding.set("value",(_233b&&_233b["DataItemName"])||"");},_onControlTypeChange:function(value){},_onControlIdChange:function(value){},_onDefaultDataBindingChange:function(value){},_onEnabledChange:function(value){if(this.isSuspended()){return;}this._designer.set("enabled",value);},_onControlLabelPlacementChange:function(value){if(this.isSuspended()){return;}this._designer.set("controlLabelPlacement",value);},_onRequiredChange:function(value){if(this.isSuspended()){return;}this._designer.set("required",value);},_onVisibleChange:function(value){if(this.isSuspended()){return;}this._designer.set("visible",value);}});});},"Sage/QuickForms/Design/DateTimePickerControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/DateTimePickerBasicPropertyEditor","./Editors/DateTimePickerAdvancedPropertyEditor","dojo/i18n!./nls/DateTimePickerControlDesigner"],function(_233c,array,lang,_233d,_233e,_233f,_2340,_2341,_2342,_2343,_2344){return _233c("Sage.QuickForms.Design.DateTimePickerControlDesigner",[_233e,_233f,_233d,_2340],{designSupport:{visible:true},editors:[_2342,_2343,_2341],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div class=\"{%= $.fieldClass %}\" data-dojo-attach-point=\"containerNode\">","<div class=\"{%= $.fieldClass %}-caption\" data-dojo-attach-point=\"designCaptionNode\"></div>","<div class=\"{%= $.fieldClass %}-field\">","<span data-dojo-attach-point=\"designBindingNode\"></span>","<div class=\"{%= $.fieldClass %}-icon\"></div>","</div>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},_setDesignBindingAttr:{node:"designBindingNode",type:"innerText"},fieldClass:"design-datetimepicker",helpTopicName:"DateTime_Picker_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFDateTimePicker, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"DateTime Picker",constructor:function(){lang.mixin(this,_2344);},_setCaptionAttr:function(value){this.inherited(arguments);this.set("designCaption",value);},_getDefaultDataBindingAttr:function(){return this.findDataBinding(function(_2345){return (_2345["ControlItemName"]=="DateTimeValue");});},_getButtonToolTipAttr:function(){return lang.getObject("ButtonToolTip",false,this.entry);},_setButtonToolTipAttr:function(value){lang.setObject("ButtonToolTip",value,this.entry);},_getControlLabelPlacementAttr:function(){return lang.getObject("ControlLabelPlacement",false,this.entry);},_setControlLabelPlacementAttr:function(value){lang.setObject("ControlLabelPlacement",value,this.entry);},_getDisplayDateAttr:function(){return lang.getObject("DisplayDate",false,this.entry);},_setDisplayDateAttr:function(value){lang.setObject("DisplayDate",value,this.entry);},_getDisplayModeAttr:function(){return lang.getObject("DisplayMode",false,this.entry);},_setDisplayModeAttr:function(value){lang.setObject("DisplayMode",value,this.entry);},_getDisplayTimeAttr:function(){return lang.getObject("DisplayTime",false,this.entry);},_setDisplayTimeAttr:function(value){lang.setObject("DisplayTime",value,this.entry);},_getRequiredAttr:function(){return lang.getObject("Required",false,this.entry);},_setRequiredAttr:function(value){lang.setObject("Required",value,this.entry);},_getTimelessAttr:function(){return lang.getObject("Timeless",false,this.entry);},_setTimelessAttr:function(value){lang.setObject("Timeless",value,this.entry);},setupFor:function(_2346){this.inherited(arguments);this.set("displayDate",true);this.set("displayTime",false);this.set("buttonToolTip","");this.set("displayMode","AsControl");this.set("required",false);this.set("timeless",false);this.set("dataBindings",[{$type:"Sage.Platform.QuickForms.Controls.QuickFormPropertyDataBindingDefinition, Sage.Platform.QuickForms",BindingType:"Property",ControlItemName:"DateTimeValue",DataItemName:_2346.propertyPath,DataSourceID:"MainEntity",FormatString:"",NullValueString:""}]);this.set("designBinding",_2346.propertyPath||"");},startup:function(){this.inherited(arguments);var _2347=this.get("defaultDataBinding");this.set("designCaption",this.get("caption"));this.set("designBinding",(_2347&&_2347["DataItemName"])||"");this.applyCaptionAlignment();this.applyVisibility();}});});},"Sage/QuickForms/Design/Editors/DateTimePickerBasicPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/DateTimePickerBasicPropertyEditor"],function(_2348,lang,_2349,_234a,_234b,_234c,_234d,_234e,_234f,_2350,_2351,_2352){return _2348("Sage.QuickForms.Design.Editors.DateTimePickerBasicPropertyEditor",[_2349,_2350,_234f],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.captionTooltipText %}\">","<label>{%= $.captionText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_caption\" data-dojo-attach-event=\"onChange:_onCaptionChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.captionAlignmentTooltipText %}\">","<label>{%= $.captionAlignmentText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_captionAlignment\" data-dojo-attach-event=\"onChange:_onCaptionAlignmentChange\">","{% for (var alignment in $.alignmentText) { %}","<span value=\"{%= alignment %}\">{%= $.alignmentText[alignment] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.displayDateTooltipText %}\">","<label>{%= $.displayDateText %}</label>","<div data-dojo-attach-point=\"_displayDate\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onDisplayDateChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.displayTimeTooltipText %}\">","<label>{%= $.displayTimeText %}</label>","<div data-dojo-attach-point=\"_displayTime\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onDisplayTimeChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.toolTipTooltipText %}\">","<label>{%= $.toolTipText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_toolTip\" data-dojo-attach-event=\"onChange:_onToolTipChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.isReadOnlyTooltipText %}\">","<label>{%= $.isReadOnlyText %}</label>","<div data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"_isReadOnly\" data-dojo-attach-event=\"onChange:_onIsReadOnlyChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_displayDate:null,_displayTime:null,_isReadOnly:null,_toolTip:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",displayDateText:"Display Date:",displayDateTooltipText:"Display the date portion.",displayTimeText:"Display Time:",displayTimeTooltipText:"Display the time portion.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{"left":"Left","center":"Center","right":"Right"},constructor:function(){lang.mixin(this,_2352);},setup:function(){this.inherited(arguments);this._caption.set("value",this._designer.get("caption"));this._captionAlignment.set("value",this._designer.get("captionAlignment"));this._displayDate.set("value",this._designer.get("displayDate"));this._displayTime.set("value",this._designer.get("displayTime"));this._isReadOnly.set("value",this._designer.get("isReadOnly"));this._toolTip.set("value",this._designer.get("toolTip"));},_onCaptionChange:function(value){if(this.isSuspended()){return;}this._designer.set("caption",value);},_onCaptionAlignmentChange:function(value){if(this.isSuspended()){return;}this._designer.set("captionAlignment",value);},_onDisplayDateChange:function(value){if(this.isSuspended()){return;}this._designer.set("displayDate",value);},_onDisplayTimeChange:function(value){if(this.isSuspended()){return;}this._designer.set("displayTime",value);},_onIsReadOnlyChange:function(value){if(this.isSuspended()){return;}this._designer.set("isReadOnly",value);},_onToolTipChange:function(value){if(this.isSuspended()){return;}this._designer.set("toolTip",value);}});});},"Sage/QuickForms/Design/Editors/DateTimePickerAdvancedPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/DateTimePickerAdvancedPropertyEditor"],function(_2353,lang,_2354,_2355,_2356,_2357,_2358,_2359,_235a,_235b,_235c){return _2353("Sage.QuickForms.Design.Editors.DateTimePickerAdvancedPropertyEditor",[_2354,_235a,_2359],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.buttonToolTipTooltipText %}\">","<label>{%= $.buttonToolTipText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_buttonToolTip\" data-dojo-attach-event=\"onChange:_onButtonToolTipChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.displayModeTooltipText %}\">","<label>{%= $.displayModeText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_displayMode\" data-dojo-attach-event=\"onChange:_onDisplayModeChange\">","{% for (var mode in $.displayModeTypeText) { %}","<span value=\"{%= mode %}\">{%= $.displayModeTypeText[mode] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlLabelPlacementTooltipText %}\">","<label>{%= $.controlLabelPlacementText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_controlLabelPlacement\" data-dojo-attach-event=\"onChange:_onControlLabelPlacementChange\">","{% for (var placement in $.labelPlacementText) { %}","<span value=\"{%= placement %}\">{%= $.labelPlacementText[placement] %}</span>","{% } %}","</div>","</div>","<div class=\"editor-field\" title=\"{%= $.visibleTooltipText %}\">","<label>{%= $.visibleText %}</label>","<div data-dojo-attach-point=\"_visible\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onVisibleChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.enabledTooltipText %}\">","<label>{%= $.enabledText %}</label>","<div data-dojo-attach-point=\"_enabled\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onEnabledChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.requiredTooltipText %}\">","<label>{%= $.requiredText %}</label>","<div data-dojo-attach-point=\"_required\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onRequiredChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.defaultDataBindingTooltipText %}\">","<label>{%= $.defaultDataBindingText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_defaultDataBinding\" data-dojo-attach-event=\"onChange:_onDefaultDataBindingChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.timelessTooltipText %}\">","<label>{%= $.timelessText %}</label>","<div data-dojo-attach-point=\"_timeless\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onTimelessChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlIdTooltipText %}\">","<label>{%= $.controlIdText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlId\" data-dojo-attach-event=\"onChange:_onControlIdChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlTypeTooltipText %}\">","<label>{%= $.controlTypeText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlType\" data-dojo-attach-event=\"onChange:_onControlTypeChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","</fieldset>"]),_buttonToolTip:null,_controlType:null,_controlId:null,_enabled:null,_controlLabelPlacement:null,_defaultDataBinding:null,_displayMode:null,_required:null,_timeless:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",buttonToolTipText:"Button Tooltip:",buttonToolTipTooltipText:"The tooltip  to display when the user's mouse hovers over the button part of the control.",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Saleslogix control type.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",displayModeText:"Display Mode:",displayModeTooltipText:"Mode of display of control: text box, hyperlink, or plain text.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",requiredText:"Required:",requiredTooltipText:"Requires a value when saving data.",timelessText:"Timeless:",timelessTooltipText:"Use date without time and no DST conversion.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",labelPlacementText:{"left":"Left","right":"Right","top":"Top","none":"None"},displayModeTypeText:{"AsControl":"As Control","AsText":"As Text","AsHyperlink":"As Hyperlink"},constructor:function(){lang.mixin(this,_235c);},setup:function(){this.inherited(arguments);this._buttonToolTip.set("value",this._designer.get("buttonToolTip"));this._controlType.set("value",this._designer.get("controlName"));this._controlId.set("value",this._designer.get("controlId"));this._displayMode.set("value",this._designer.get("displayMode"));this._enabled.set("value",this._designer.get("enabled"));this._controlLabelPlacement.set("value",this._designer.get("controlLabelPlacement"));this._required.set("value",this._designer.get("required"));this._timeless.set("value",this._designer.get("timeless"));this._visible.set("value",this._designer.get("visible"));var _235d=this._designer.get("defaultDataBinding");this._defaultDataBinding.set("value",(_235d&&_235d["DataItemName"])||"");},_onButtonToolTipChange:function(value){if(this.isSuspended()){return;}this._designer.set("buttonToolTip",value);},_onControlTypeChange:function(value){},_onControlIdChange:function(value){},_onDefaultDataBindingChange:function(value){},_onDisplayModeChange:function(value){if(this.isSuspended()){return;}this._designer.set("displayMode",value);},_onEnabledChange:function(value){if(this.isSuspended()){return;}this._designer.set("enabled",value);},_onControlLabelPlacementChange:function(value){if(this.isSuspended()){return;}this._designer.set("controlLabelPlacement",value);},_onRequiredChange:function(value){if(this.isSuspended()){return;}this._designer.set("required",value);},_onTimelessChange:function(value){if(this.isSuspended()){return;}this._designer.set("timeless",value);},_onVisibleChange:function(value){if(this.isSuspended()){return;}this._designer.set("visible",value);}});});},"Sage/QuickForms/Design/DataGridControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-construct","dojo/dom-style","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/DataGridBasicPropertyEditor","./Editors/DataGridAdvancedPropertyEditor","dojo/i18n!./nls/DataGridControlDesigner"],function(_235e,array,lang,_235f,_2360,_2361,_2362,_2363,_2364,_2365,_2366,_2367,_2368){return _235e("Sage.QuickForms.Design.DataGridControlDesigner",[_2362,_2363,_2361,_2364],{designSupport:{visible:true},editors:[_2366,_2367,_2365],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div class=\"{%= $.fieldClass %}\" data-dojo-attach-point=\"containerNode\">","<table class=\"{%= $.fieldClass %}-table\" data-dojo-attach-point=\"tableNode\">","</table>","</div>"]),tableHeaderTemplate:new Simplate(["<th style=\"width:{%= $.widthStyle %}\">{%: $.ColumnHeading || $.Text %}</th>"]),fieldClass:"design-datagrid",helpTopicName:"Data_Grid_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFDataGrid, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"Data Grid",emptyTableRowStringText:"No records match the selection criteria.",constructor:function(){lang.mixin(this,_2368);},_getDataSourceAttr:function(){return lang.getObject("DataSource",false,this.entry);},_setDataSourceAttr:function(value){lang.setObject("DataSource",value,this.entry);},_getPageSizeAttr:function(){return lang.getObject("PageSize",false,this.entry);},_setPageSizeAttr:function(value){lang.setObject("PageSize",value,this.entry);},_getResizableColumnsAttr:function(){return lang.getObject("ResizableColumns",false,this.entry);},_setResizableColumnsAttr:function(value){lang.setObject("ResizableColumns",value,this.entry);},_getColumnsAttr:function(){return lang.getObject("Columns",false,this.entry);},_setColumnsAttr:function(value){lang.setObject("Columns",value,this.entry);},_getEmptyTableRowTextAttr:function(){return lang.getObject("EmptyTableRowText",false,this.entry);},_setEmptyTableRowTextAttr:function(value){lang.setObject("EmptyTableRowText",value,this.entry);},_getExpandableRowsAttr:function(){return lang.getObject("ExpandableRows",false,this.entry);},_setExpandableRowsAttr:function(value){lang.setObject("ExpandableRows",value,this.entry);},_getRenderVerticalAttr:function(){return lang.getObject("RenderVertical",false,this.entry);},_setRenderVerticalAttr:function(value){lang.setObject("RenderVertical",value,this.entry);},_getShowSortIconAttr:function(){return lang.getObject("ShowSortIcon",false,this.entry);},_setShowSortIconAttr:function(value){lang.setObject("ShowSortIcon",value,this.entry);},renderColumns:function(){var _2369=this.get("columns"),row=_235f.create("tr");for(var i=0;i<_2369.length;i++){var _236a=lang.clone(_2369[i]);_236a.widthStyle=_236a.Width>0?_236a.Width+"em":"auto";_235f.place(this.tableHeaderTemplate.apply(_236a,this),row,"last");}_235f.place(row,this.tableNode,"only");},setupFor:function(_236b){this.inherited(arguments);this.set("dataSource",null);this.set("pageSize",20);this.set("resizableColumns",true);this.set("emptyTableRowString",this.emptyTableRowStringText);this.set("expandableRows",false);this.set("renderVertical",false);this.set("showSortIcon",true);},startup:function(){this.inherited(arguments);this.renderColumns();this.applyVisibility();}});});},"Sage/QuickForms/Design/Editors/DataGridBasicPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/DataGridBasicPropertyEditor"],function(_236c,lang,_236d,_236e,_236f,_2370,_2371,_2372,_2373,_2374,_2375,_2376){return _236c("Sage.QuickForms.Design.Editors.DataGridBasicPropertyEditor",[_236d,_2374,_2373],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.captionTooltipText %}\">","<label>{%= $.captionText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_caption\" data-dojo-attach-event=\"onChange:_onCaptionChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.captionAlignmentTooltipText %}\">","<label>{%= $.captionAlignmentText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_captionAlignment\" data-dojo-attach-event=\"onChange:_onCaptionAlignmentChange\">","{% for (var alignment in $.alignmentText) { %}","<span value=\"{%= alignment %}\">{%= $.alignmentText[alignment] %}</span>","{% } %}","</div>","</div>","</div>","</fieldset>","<fieldset style=\"display:none;\"><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.pageSizeTooltipText %}\">","<label>{%= $.pageSizeText %}</label>","<div data-dojo-type=\"dijit.form.NumberTextBox\" data-dojo-attach-point=\"_pageSize\" data-dojo-attach-event=\"onChange:_onPageSizeChange\" data-dojo-props=\"constraints:{min:0,max:1000,places:0}\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.resizableColumnsTooltipText %}\">","<label>{%= $.resizableColumnsText %}</label>","<div data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"_resizableColumns\" data-dojo-attach-event=\"onChange:_onResizableColumnsChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_pageSize:null,_resizableColumns:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",dataText:"Data",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",pageSizeText:"Page Size:",pageSizeTooltipText:"The number of grid records to display on a single page.",resizableColumnsText:"Resizable Columns:",resizableColumnsTooltipText:"Allows user to resize columns.",alignmentText:{"left":"Left","center":"Center","right":"Right"},constructor:function(){lang.mixin(this,_2376);},setup:function(){this.inherited(arguments);this._caption.set("value",this._designer.get("caption"));this._captionAlignment.set("value",this._designer.get("captionAlignment"));this._pageSize.set("value",this._designer.get("pageSize"));this._resizableColumns.set("value",this._designer.get("resizableColumns"));},_onCaptionChange:function(value){if(this.isSuspended()){return;}this._designer.set("caption",value);},_onCaptionAlignmentChange:function(value){if(this.isSuspended()){return;}this._designer.set("captionAlignment",value);},_onPageSizeChange:function(value){if(this.isSuspended()||!this._pageSize.isValid()){return;}this._designer.set("pageSize",value);},_onResizableColumnsChange:function(value){if(this.isSuspended()){return;}this._designer.set("resizableColumns",value);}});});},"Sage/QuickForms/Design/Editors/DataGridAdvancedPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/DataGridAdvancedPropertyEditor"],function(_2377,lang,_2378,_2379,_237a,_237b,_237c,_237d,_237e,_237f,_2380){return _2377("Sage.QuickForms.Design.Editors.DataGridAdvancedPropertyEditor",[_2378,_237e,_237d],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.renderVerticalTooltipText %}\">","<label>{%= $.renderVerticalText %}</label>","<div data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"_renderVertical\" data-dojo-attach-event=\"onChange:_onRenderVerticalChange\"></div>","</div>","<div class=\"editor-field\" style=\"display:none;\" title=\"{%= $.showSortIconTooltipText %}\">","<label>{%= $.showSortIconText %}</label>","<div data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"_showSortIcon\" data-dojo-attach-event=\"onChange:_onShowSortIconChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.visibleTooltipText %}\">","<label>{%= $.visibleText %}</label>","<div data-dojo-attach-point=\"_visible\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onVisibleChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.emptyTableRowTooltipText %}\">","<label>{%= $.emptyTableRowText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_emptyTableRowString\" data-dojo-attach-event=\"onChange:_onEmptyTableRowStringChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.expandableRowsTooltipText %}\">","<label>{%= $.expandableRowsText %}</label>","<div data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"_expandableRows\" data-dojo-attach-event=\"onChange:_onExpandableRowsChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.dataSourceTooltipText %}\">","<label>{%= $.dataSourceText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_dataSource\" data-dojo-attach-event=\"onChange:_onDataSourceChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlIdTooltipText %}\">","<label>{%= $.controlIdText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlId\" data-dojo-attach-event=\"onChange:_onControlIdChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlTypeTooltipText %}\">","<label>{%= $.controlTypeText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlType\" data-dojo-attach-event=\"onChange:_onControlTypeChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","</fieldset>"]),_controlId:null,_controlType:null,_dataSource:null,_emptyTableRowString:null,_expandableRows:null,_renderVertical:null,_showSortIcon:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Saleslogix control type.",dataSourceText:"Data Source:",dataSourceTooltipText:"Source of the data for this control such as another control or an entity.",emptyTableRowText:"Empty Table Row Text:",emptyTableRowTooltipText:"Text to display if grid shows no data.",expandableRowsText:"Expandable Rows:",expandableRowsTooltipText:"Allows user to expand grid rows to show more text.",renderVerticalText:"Render Vertically:",renderVerticalTooltipText:"Show grid rows as columns.",showSortIconText:"Show Sort Icon:",showSortIconTooltipText:"Show sort icon on columns that are sortable.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",constructor:function(){lang.mixin(this,_2380);},setup:function(){this.inherited(arguments);this._controlType.set("value",this._designer.get("controlName"));this._controlId.set("value",this._designer.get("controlId"));this._dataSource.set("value",this._designer.get("dataSource"));this._emptyTableRowString.set("value",this._designer.get("emptyTableRowText"));this._expandableRows.set("value",this._designer.get("expandableRows"));this._renderVertical.set("value",this._designer.get("renderVertical"));this._showSortIcon.set("value",this._designer.get("showSortIcon"));this._visible.set("value",this._designer.get("visible"));},_onControlTypeChange:function(value){},_onControlIdChange:function(value){},_onDataSourceChange:function(value){},_onEmptyTableRowStringChange:function(value){if(this.isSuspended()){return;}this._designer.set("emptyTableRowText",value);},_onExpandableRowsChange:function(value){if(this.isSuspended()){return;}this._designer.set("expandableRows",value);},_onRenderVerticalChange:function(value){if(this.isSuspended()){return;}this._designer.set("renderVertical",value);},_onShowSortIconChange:function(value){if(this.isSuspended()){return;}this._designer.set("showSortIcon",value);},_onVisibleChange:function(value){if(this.isSuspended()){return;}this._designer.set("visible",value);}});});},"Sage/QuickForms/Design/NumericControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/NumericBasicPropertyEditor","./Editors/NumericAdvancedPropertyEditor","dojo/i18n!./nls/NumericControlDesigner"],function(_2381,array,lang,_2382,_2383,_2384,_2385,_2386,_2387,_2388,_2389){return _2381("Sage.QuickForms.Design.NumericControlDesigner",[_2383,_2384,_2382,_2385],{designSupport:{visible:true},editors:[_2387,_2388,_2386],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div class=\"{%= $.fieldClass %}\" data-dojo-attach-point=\"containerNode\">","<div class=\"{%= $.fieldClass %}-caption\" data-dojo-attach-point=\"designCaptionNode\"></div>","<div class=\"{%= $.fieldClass %}-field\">","<span data-dojo-attach-point=\"designBindingNode\"></span>","</div>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},_setDesignBindingAttr:{node:"designBindingNode",type:"innerText"},fieldClass:"design-numeric",helpTopicName:"Numeric_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFSLXNumeric, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"Numeric",constructor:function(){lang.mixin(this,_2389);},_setCaptionAttr:function(value){this.inherited(arguments);this.set("designCaption",value);},_getDefaultDataBindingAttr:function(){return this.findDataBinding(function(_238a){return (_238a["ControlItemName"]=="Text");});},_getControlLabelPlacementAttr:function(){return lang.getObject("ControlLabelPlacement",false,this.entry);},_setControlLabelPlacementAttr:function(value){lang.setObject("ControlLabelPlacement",value,this.entry);},_getDecimalDigitsAttr:function(){return lang.getObject("DecimalDigits.DecimalDigits",false,this.entry);},_setDecimalDigitsAttr:function(value){lang.setObject("DecimalDigits.DecimalDigits",value,this.entry);},_getFormatTypeAttr:function(){return lang.getObject("FormatType",false,this.entry);},_setFormatTypeAttr:function(value){lang.setObject("FormatType",value,this.entry);},_getMaxLengthAttr:function(){return lang.getObject("MaxLength",false,this.entry);},_setMaxLengthAttr:function(value){lang.setObject("MaxLength",value,this.entry);},_getRequiredAttr:function(){return lang.getObject("Required",false,this.entry);},_setRequiredAttr:function(value){lang.setObject("Required",value,this.entry);},_getStrictAttr:function(){return lang.getObject("DecimalDigits.Strict",false,this.entry);},_setStrictAttr:function(value){lang.setObject("DecimalDigits.Strict",value,this.entry);},setupFor:function(_238b){this.inherited(arguments);this.set("decimalDigits",-1);this.set("formatType","Number");this.set("maxLength",_238b["data"].length||-1);this.set("strict",false);this.set("required",false);this.set("dataBindings",[{$type:"Sage.Platform.QuickForms.Controls.QuickFormPropertyDataBindingDefinition, Sage.Platform.QuickForms",BindingType:"Property",ControlItemName:"Text",DataItemName:_238b.propertyPath,DataSourceID:"MainEntity",FormatString:"",NullValueString:""}]);this.set("designBinding",_238b.propertyPath||"");},startup:function(){this.inherited(arguments);var _238c=this.get("defaultDataBinding");this.set("designCaption",this.get("caption"));this.set("designBinding",(_238c&&_238c["DataItemName"])||this.get("text")||"");this.applyCaptionAlignment();this.applyVisibility();}});});},"Sage/QuickForms/Design/Editors/NumericBasicPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/NumericBasicPropertyEditor"],function(_238d,lang,_238e,_238f,_2390,_2391,_2392,_2393,_2394,_2395,_2396,_2397){return _238d("Sage.QuickForms.Design.Editors.NumericBasicPropertyEditor",[_238e,_2395,_2394],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.captionTooltipText %}\">","<label>{%= $.captionText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_caption\" data-dojo-attach-event=\"onChange:_onCaptionChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.captionAlignmentTooltipText %}\">","<label>{%= $.captionAlignmentText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_captionAlignment\" data-dojo-attach-event=\"onChange:_onCaptionAlignmentChange\">","{% for (var alignment in $.alignmentText) { %}","<span value=\"{%= alignment %}\">{%= $.alignmentText[alignment] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.toolTipTooltipText %}\">","<label>{%= $.toolTipText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_toolTip\" data-dojo-attach-event=\"onChange:_onToolTipChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.isReadOnlyTooltipText %}\">","<label>{%= $.isReadOnlyText %}</label>","<div data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"_isReadOnly\" data-dojo-attach-event=\"onChange:_onIsReadOnlyChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_isReadOnly:null,_toolTip:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{"left":"Left","center":"Center","right":"Right"},constructor:function(){lang.mixin(this,_2397);},setup:function(){this.inherited(arguments);this._caption.set("value",this._designer.get("caption"));this._captionAlignment.set("value",this._designer.get("captionAlignment"));this._isReadOnly.set("value",this._designer.get("isReadOnly"));this._toolTip.set("value",this._designer.get("toolTip"));},_onCaptionChange:function(value){if(this.isSuspended()){return;}this._designer.set("caption",value);},_onCaptionAlignmentChange:function(value){if(this.isSuspended()){return;}this._designer.set("captionAlignment",value);},_onIsReadOnlyChange:function(value){if(this.isSuspended()){return;}this._designer.set("isReadOnly",value);},_onToolTipChange:function(value){if(this.isSuspended()){return;}this._designer.set("toolTip",value);}});});},"Sage/QuickForms/Design/Editors/NumericAdvancedPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/NumericAdvancedPropertyEditor"],function(_2398,lang,_2399,_239a,_239b,_239c,_239d,_239e,_239f,_23a0,_23a1){return _2398("Sage.QuickForms.Design.Editors.NumericAdvancedPropertyEditor",[_2399,_239f,_239e],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlLabelPlacementTooltipText %}\">","<label>{%= $.controlLabelPlacementText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_controlLabelPlacement\" data-dojo-attach-event=\"onChange:_onControlLabelPlacementChange\">","{% for (var placement in $.labelPlacementText) { %}","<span value=\"{%= placement %}\">{%= $.labelPlacementText[placement] %}</span>","{% } %}","</div>","</div>","<div class=\"editor-field\" title=\"{%= $.formatTypeTooltipText %}\">","<label>{%= $.formatTypeText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_formatType\" data-dojo-attach-event=\"onChange:_onFormatTypeChange\">","{% for (var format in $.numberFormatText) { %}","<span value=\"{%= format %}\">{%= $.numberFormatText[format] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.visibleTooltipText %}\">","<label>{%= $.visibleText %}</label>","<div data-dojo-attach-point=\"_visible\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onVisibleChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.enabledTooltipText %}\">","<label>{%= $.enabledText %}</label>","<div data-dojo-attach-point=\"_enabled\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onEnabledChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.maxLengthTooltipText %}\">","<label>{%= $.maxLengthText %}</label>","<div data-dojo-type=\"dijit.form.NumberTextBox\" data-dojo-attach-point=\"_maxLength\" data-dojo-attach-event=\"onChange:_onMaxLengthChange\" data-dojo-props=\"constraints:{min:-1,places:0}\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.requiredTooltipText %}\">","<label>{%= $.requiredText %}</label>","<div data-dojo-attach-point=\"_required\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onRequiredChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.decimalDigitsTooltipText %}\">","<label>{%= $.decimalDigitsText %}</label>","<div data-dojo-type=\"dijit.form.NumberTextBox\" data-dojo-attach-point=\"_decimalDigits\" data-dojo-props=\"constraints:{min:-1,max:100,places:0}\" data-dojo-attach-event=\"onChange:_onDecimalDigitsChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.strictTooltipText %}\">","<label>{%= $.strictText %}</label>","<div data-dojo-attach-point=\"_strict\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onStrictChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.defaultDataBindingTooltipText %}\">","<label>{%= $.defaultDataBindingText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_defaultDataBinding\" data-dojo-attach-event=\"onChange:_onDefaultDataBindingChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlIdTooltipText %}\">","<label>{%= $.controlIdText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlId\" data-dojo-attach-event=\"onChange:_onControlIdChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlTypeTooltipText %}\">","<label>{%= $.controlTypeText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlType\" data-dojo-attach-event=\"onChange:_onControlTypeChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","</fieldset>"]),_controlType:null,_controlId:null,_enabled:null,_controlLabelPlacement:null,_isReadOnly:null,_defaultDataBinding:null,_formatType:null,_maxLength:null,_required:null,_strict:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Saleslogix control type.",decimalDigitsText:"Decimal Digits:",decimalDigitsTooltipText:"The number of digits after the decimal to display and allow for data entry.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",formatTypeText:"Format Type:",formatTypeTooltipText:"Type of format to use when converting number to string.",maxLengthText:"Max Length:",maxLengthTooltipText:"Maximum number of characters user can enter.",requiredText:"Required:",requiredTooltipText:"Requires a value when saving data.",strictText:"Strict:",strictTooltipText:"Pads display of number with trailing zeros as necessary.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",numberFormatText:{"Number":"Number","Percent":"Percent","Decimal":"Decimal","Scientific":"Scientific"},labelPlacementText:{"left":"Left","right":"Right","top":"Top","none":"None"},constructor:function(){lang.mixin(this,_23a1);},setup:function(){this.inherited(arguments);this._controlId.set("value",this._designer.get("controlId"));this._controlLabelPlacement.set("value",this._designer.get("controlLabelPlacement"));this._controlType.set("value",this._designer.get("controlName"));this._decimalDigits.set("value",this._designer.get("decimalDigits"));this._enabled.set("value",this._designer.get("enabled"));this._formatType.set("value",this._designer.get("formatType"));this._maxLength.set("value",this._designer.get("maxLength"));this._required.set("value",this._designer.get("required"));this._strict.set("value",this._designer.get("strict"));this._visible.set("value",this._designer.get("visible"));var _23a2=this._designer.get("defaultDataBinding");this._defaultDataBinding.set("value",(_23a2&&_23a2["DataItemName"])||"");},_onControlTypeChange:function(value){},_onControlIdChange:function(value){},_onDefaultDataBindingChange:function(value){},_onEnabledChange:function(value){if(this.isSuspended()){return;}this._designer.set("enabled",value);},_onDecimalDigitsChange:function(value){if(this.isSuspended()||!this._decimalDigits.isValid()){return;}this._designer.set("decimalDigits",value);},_onFormatTypeChange:function(value){if(this.isSuspended()){return;}this._designer.set("formatType",value);},_onControlLabelPlacementChange:function(value){if(this.isSuspended()){return;}this._designer.set("controlLabelPlacement",value);},_onMaxLengthChange:function(value){if(this.isSuspended()||!this._maxLength.isValid()){return;}this._designer.set("maxLength",value);},_onRequiredChange:function(value){if(this.isSuspended()){return;}this._designer.set("required",value);},_onStrictChange:function(value){if(this.isSuspended()){return;}this._designer.set("strict",value);},_onVisibleChange:function(value){if(this.isSuspended()){return;}this._designer.set("visible",value);}});});},"Sage/QuickForms/Design/DataSourceDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/NonVisibleAdvancedPropertyEditor","dojo/i18n!./nls/DesignPanel"],function(_23a3,array,lang,_23a4,_23a5,_23a6,_23a7,_23a8,_23a9){return _23a3("Sage.QuickForms.Design.DataSourceDesigner",[_23a5,_23a6,_23a4,_23a7],{designSupport:{visible:false},editors:[_23a8],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div data-dojo-attach-point=\"containerNode\">","<span data-dojo-attach-point=\"designCaptionNode\"></span>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},helpTopicName:"Data_Source_control",quickFormControlType:"Sage.Platform.QuickForms.QFControls.QFDataSource, Sage.Platform.QuickForms.QFControls",displayNameText:"Data Source",constructor:function(){lang.mixin(this,_23a9);},_setControlIdAttr:function(value){this.inherited(arguments);this.set("designCaption",value);},startup:function(){this.inherited(arguments);this.set("designCaption",this.get("controlId"));}});});},"Sage/QuickForms/Design/CurrencyControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/CurrencyBasicPropertyEditor","./Editors/CurrencyAdvancedPropertyEditor","dojo/i18n!./nls/CurrencyControlDesigner"],function(_23aa,array,lang,_23ab,_23ac,_23ad,_23ae,_23af,_23b0,_23b1,_23b2){return _23aa("Sage.QuickForms.Design.CurrencyControlDesigner",[_23ac,_23ad,_23ab,_23ae],{designSupport:{visible:true},editors:[_23b0,_23b1,_23af],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div class=\"{%= $.fieldClass %}\" data-dojo-attach-point=\"containerNode\">","<div class=\"{%= $.fieldClass %}-caption\" data-dojo-attach-point=\"designCaptionNode\"></div>","<div class=\"{%= $.fieldClass %}-field\">","<span data-dojo-attach-point=\"designBindingNode\"></span>","</div>","</div>"]),_setDesignCaptionAttr:{node:"designCaptionNode",type:"innerText"},_setDesignBindingAttr:{node:"designBindingNode",type:"innerText"},fieldClass:"design-currency",helpTopicName:"Currency_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.QFSLXCurrency, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"Currency",constructor:function(){lang.mixin(this,_23b2);},_setCaptionAttr:function(value){this.inherited(arguments);this.set("designCaption",value);},_getDefaultDataBindingAttr:function(){return this.findDataBinding(function(_23b3){return (_23b3["ControlItemName"]=="Text");});},_getControlLabelPlacementAttr:function(){return lang.getObject("ControlLabelPlacement",false,this.entry);},_setControlLabelPlacementAttr:function(value){lang.setObject("ControlLabelPlacement",value,this.entry);},_getDecimalDigitsAttr:function(){return lang.getObject("DecimalDigits",false,this.entry);},_setDecimalDigitsAttr:function(value){lang.setObject("DecimalDigits",value,this.entry);},_getDisplayCurrencyCodeAttr:function(){return lang.getObject("DisplayCurrencyCode",false,this.entry);},_setDisplayCurrencyCodeAttr:function(value){lang.setObject("DisplayCurrencyCode",value,this.entry);},_getDisplayModeAttr:function(){return lang.getObject("DisplayMode",false,this.entry);},_setDisplayModeAttr:function(value){lang.setObject("DisplayMode",value,this.entry);},_getExchangeRateTypeAttr:function(){return lang.getObject("ExchangeRateType",false,this.entry);},_setExchangeRateTypeAttr:function(value){lang.setObject("ExchangeRateType",value,this.entry);},_getMaxLengthAttr:function(){return lang.getObject("MaxLength",false,this.entry);},_setMaxLengthAttr:function(value){lang.setObject("MaxLength",value,this.entry);},_getRequiredAttr:function(){return lang.getObject("Required",false,this.entry);},_setRequiredAttr:function(value){lang.setObject("Required",value,this.entry);},setupFor:function(_23b4){this.inherited(arguments);this.set("decimalDigits",-1);this.set("currentCode",null);this.set("displayCurrencyCode",true);this.set("displayMode","AsControl");this.set("exchangeRateType","BaseRate");this.set("maxLength",_23b4["data"].length||"");this.set("required",false);this.set("dataBindings",[{$type:"Sage.Platform.QuickForms.Controls.QuickFormPropertyDataBindingDefinition, Sage.Platform.QuickForms",BindingType:"Property",ControlItemName:"Text",DataItemName:_23b4.propertyPath,DataSourceID:"MainEntity",FormatString:"",NullValueString:""}]);this.set("designBinding",_23b4.propertyPath||"");},startup:function(){this.inherited(arguments);var _23b5=this.get("defaultDataBinding");this.set("designCaption",this.get("caption"));this.set("designBinding",(_23b5&&_23b5["DataItemName"])||"");this.applyCaptionAlignment();this.applyVisibility();}});});},"Sage/QuickForms/Design/Editors/CurrencyBasicPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/CurrencyBasicPropertyEditor"],function(_23b6,lang,_23b7,_23b8,_23b9,_23ba,_23bb,_23bc,_23bd,_23be,_23bf,_23c0){return _23b6("Sage.QuickForms.Design.Editors.CurrencyBasicPropertyEditor",[_23b7,_23be,_23bd],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.captionTooltipText %}\">","<label>{%= $.captionText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_caption\" data-dojo-attach-event=\"onChange:_onCaptionChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.captionAlignmentTooltipText %}\">","<label>{%= $.captionAlignmentText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_captionAlignment\" data-dojo-attach-event=\"onChange:_onCaptionAlignmentChange\">","{% for (var alignment in $.alignmentText) { %}","<span value=\"{%= alignment %}\">{%= $.alignmentText[alignment] %}</span>","{% } %}","</div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.toolTipTooltipText %}\">","<label>{%= $.toolTipText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_toolTip\" data-dojo-attach-event=\"onChange:_onToolTipChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.isReadOnlyTooltipText %}\">","<label>{%= $.isReadOnlyText %}</label>","<div data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"_isReadOnly\" data-dojo-attach-event=\"onChange:_onIsReadOnlyChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>"]),_caption:null,_captionAlignment:null,_isReadOnly:null,_toolTip:null,titleText:"Basic",appearanceText:"Appearance",behaviorText:"Behavior",captionText:"Caption:",captionTooltipText:"The label to display on the form for this control.",captionAlignmentText:"Caption Alignment:",captionAlignmentTooltipText:"Justification of the label text.",isReadOnlyText:"Read Only:",isReadOnlyTooltipText:"Does not allow edits.",toolTipText:"Tooltip:",toolTipTooltipText:"Short help text about control.",alignmentText:{"left":"Left","center":"Center","right":"Right"},constructor:function(){lang.mixin(this,_23c0);},setup:function(){this.inherited(arguments);this._caption.set("value",this._designer.get("caption"));this._captionAlignment.set("value",this._designer.get("captionAlignment"));this._isReadOnly.set("value",this._designer.get("isReadOnly"));this._toolTip.set("value",this._designer.get("toolTip"));},_onCaptionChange:function(value){if(this.isSuspended()){return;}this._designer.set("caption",value);},_onCaptionAlignmentChange:function(value){if(this.isSuspended()){return;}this._designer.set("captionAlignment",value);},_onIsReadOnlyChange:function(value){if(this.isSuspended()){return;}this._designer.set("isReadOnly",value);},_onToolTipChange:function(value){if(this.isSuspended()){return;}this._designer.set("toolTip",value);}});});},"Sage/QuickForms/Design/Editors/CurrencyAdvancedPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/CurrencyAdvancedPropertyEditor"],function(_23c1,lang,_23c2,_23c3,_23c4,_23c5,_23c6,_23c7,_23c8,_23c9,_23ca){return _23c1("Sage.QuickForms.Design.Editors.CurrencyAdvancedPropertyEditor",[_23c2,_23c8,_23c7],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.displayModeTooltipText %}\">","<label>{%= $.displayModeText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_displayMode\" data-dojo-attach-event=\"onChange:_onDisplayModeChange\">","{% for (var type in $.displayTypeText) { %}","<span value=\"{%= type %}\">{%= $.displayTypeText[type] %}</span>","{% } %}","</div>","</div>","<div class=\"editor-field\" title=\"{%= $.visibleTooltipText %}\">","<label>{%= $.visibleText %}</label>","<div data-dojo-attach-point=\"_visible\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onVisibleChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlLabelPlacementTooltipText %}\">","<label>{%= $.controlLabelPlacementText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_controlLabelPlacement\" data-dojo-attach-event=\"onChange:_onControlLabelPlacementChange\">","{% for (var placement in $.labelPlacementText) { %}","<span value=\"{%= placement %}\">{%= $.labelPlacementText[placement] %}</span>","{% } %}","</div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.behaviorText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.decimalDigitsTooltipText %}\">","<label>{%= $.decimalDigitsText %}</label>","<div data-dojo-type=\"dijit.form.NumberTextBox\" data-dojo-attach-point=\"_decimalDigits\" data-dojo-props=\"constraints:{min:-1,max:100,places:0}\" data-dojo-attach-event=\"onChange:_onDecimalDigitsChange\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.enabledTooltipText %}\">","<label>{%= $.enabledText %}</label>","<div data-dojo-attach-point=\"_enabled\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onEnabledChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.maxLengthTooltipText %}\">","<label>{%= $.maxLengthText %}</label>","<div data-dojo-attach-point=\"_maxLength\" data-dojo-type=\"dijit.form.NumberTextBox\" data-dojo-attach-event=\"onChange:_onMaxLengthChange\" data-dojo-props=\"constraints:{min:-1,places:0}\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.requiredTooltipText %}\">","<label>{%= $.requiredText %}</label>","<div data-dojo-attach-point=\"_required\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onRequiredChange\"></div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.dataText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.defaultDataBindingTooltipText %}\">","<label>{%= $.defaultDataBindingText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_defaultDataBinding\" data-dojo-attach-event=\"onChange:_onDefaultDataBindingChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.exchangeRateTypeTooltipText %}\">","<label>{%= $.exchangeRateTypeText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_exchangeRateType\" data-dojo-attach-event=\"onChange:_onExchangeRateTypeChange\">","{% for (var rate in $.exchangeTypeText) { %}","<span value=\"{%= rate %}\">{%= $.exchangeTypeText[rate] %}</span>","{% } %}","</div>","</div>","</div>","</fieldset>","<fieldset><legend>{%= $.controlInfoText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlIdTooltipText %}\">","<label>{%= $.controlIdText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlId\" data-dojo-attach-event=\"onChange:_onControlIdChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.controlTypeTooltipText %}\">","<label>{%= $.controlTypeText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_controlType\" data-dojo-attach-event=\"onChange:_onControlTypeChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","</fieldset>"]),_controlId:null,_controlLabelPlacement:null,_controlType:null,_decimalDigits:null,_defaultDataBinding:null,_displayCurrencyCode:null,_displayMode:null,_enabled:null,_exchangeRateType:null,_maxLength:null,_required:null,_visible:null,titleText:"Advanced",appearanceText:"Appearance",behaviorText:"Behavior",controlInfoText:"Control Info",dataText:"Data",controlIdText:"Control Id:",controlIdTooltipText:"Identifier for this control.",controlLabelPlacementText:"Label Placement:",controlLabelPlacementTooltipText:"Label position in relation to the control.",controlTypeText:"Control Type:",controlTypeTooltipText:"Saleslogix control type.",decimalDigitsText:"Decimal Digits:",decimalDigitsTooltipText:"The number of digits after the decimal to display and allow for data entry.",defaultDataBindingText:"Data Bindings:",defaultDataBindingTooltipText:"Data field(s) in the database used by this control.",displayModeText:"Display Mode:",displayModeTooltipText:"Mode of display of control: text box, hyperlink, or plain text.",enabledText:"Enabled:",enabledTooltipText:"Allows user to interact with this control.",exchangeRateTypeText:"Exchange Rate Type:",exchangeRateTypeTooltipText:"Type of exchange rate to show in currency fields.",maxLengthText:"Max Length:",maxLengthTooltipText:"Maximum number of characters user can enter.",requiredText:"Required:",requiredTooltipText:"Requires a value when saving data.",visibleText:"Visible:",visibleTooltipText:"Show or hide this control on the form.",displayTypeText:{"AsHyperlink":"As Hyperlink","AsControl":"As Control","AsText":"As Text"},exchangeTypeText:{"BaseRate":"Base Rate","OpportunityRate":"Opportunity Rate (Deprecated)","MyRate":"My Rate","SalesOrderRate":"Sales Order Rate (Deprecated)","EntityRate":"Entity Rate"},labelPlacementText:{"left":"Left","right":"Right","top":"Top","none":"None"},constructor:function(){lang.mixin(this,_23ca);},setup:function(){this.inherited(arguments);this._controlId.set("value",this._designer.get("controlId"));this._controlLabelPlacement.set("value",this._designer.get("controlLabelPlacement"));this._controlType.set("value",this._designer.get("controlName"));this._decimalDigits.set("value",this._designer.get("decimalDigits"));this._displayMode.set("value",this._designer.get("displayMode"));this._enabled.set("value",this._designer.get("enabled"));this._exchangeRateType.set("value",this._designer.get("exchangeRateType"));this._maxLength.set("value",this._designer.get("maxLength"));this._required.set("value",this._designer.get("required"));this._visible.set("value",this._designer.get("visible"));var _23cb=this._designer.get("defaultDataBinding");this._defaultDataBinding.set("value",(_23cb&&_23cb["DataItemName"])||"");},_onControlIdChange:function(value){},_onControlLabelPlacementChange:function(value){if(this.isSuspended()){return;}this._designer.set("controlLabelPlacement",value);},_onControlTypeChange:function(value){},_onDecimalDigitsChange:function(value){if(this.isSuspended()||!this._decimalDigits.isValid()){return;}this._designer.set("decimalDigits",value);},_onDefaultDataBindingChange:function(value){},_onDisplayModeChange:function(value){if(this.isSuspended()){return;}this._designer.set("displayMode",value);},_onEnabledChange:function(value){if(this.isSuspended()){return;}this._designer.set("enabled",value);},_onExchangeRateTypeChange:function(value){if(this.isSuspended()){return;}this._designer.set("exchangeRateType",value);},_onMaxLengthChange:function(value){if(this.isSuspended()||!this._maxLength.isValid()){return;}this._designer.set("maxLength",value);},_onRequiredChange:function(value){if(this.isSuspended()){return;}this._designer.set("required",value);},_onVisibleChange:function(value){if(this.isSuspended()){return;}this._designer.set("visible",value);}});});},"Sage/QuickForms/Design/EditableGridControlDesigner":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-construct","dojo/dom-style","Sage/_Templated","dijit/_Widget","dijit/_Contained","./ControlDesigner","./Editors/LayoutPropertyEditor","./Editors/GenericBasicPropertyEditor","./Editors/GenericAdvancedPropertyEditor","dojo/i18n!./nls/EditableGridControlDesigner"],function(_23cc,array,lang,_23cd,_23ce,_23cf,_23d0,_23d1,_23d2,_23d3,_23d4,_23d5,_23d6){return _23cc("Sage.QuickForms.Design.EditableGridControlDesigner",[_23d0,_23d1,_23cf,_23d2],{designSupport:{visible:true},editors:[_23d4,_23d5,_23d3],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div class=\"{%= $.fieldClass %}\" data-dojo-attach-point=\"containerNode\">","<table class=\"{%= $.fieldClass %}-table\" data-dojo-attach-point=\"tableNode\">","</table>","</div>"]),tableHeaderTemplate:new Simplate(["<th>{%: $.ColumnHeading || $.Text %}</th>"]),fieldClass:"design-editablegrid",helpTopicName:"visual_control",quickFormControlType:"Sage.SalesLogix.QuickForms.QFControls.SDataGrid.QFSDataGrid, Sage.SalesLogix.QuickForms.QFControls",displayNameText:"Editable Grid",constructor:function(){lang.mixin(this,_23d6);},_getColumnsAttr:function(){return lang.getObject("Columns",false,this.entry);},_setColumnsAttr:function(value){lang.setObject("Columns",value,this.entry);},renderColumns:function(){var _23d7=this.get("columns"),row=_23cd.create("tr");for(var i=0;i<_23d7.length;i++){var _23d8=lang.clone(_23d7[i]);_23d8.widthStyle=_23d8.Width>0?_23d8.Width+"em":"auto";_23cd.place(this.tableHeaderTemplate.apply(_23d8,this),row,"last");}_23cd.place(row,this.tableNode,"only");},startup:function(){this.inherited(arguments);this.renderColumns();}});});},"Sage/QuickForms/Design/FormDesigner":function(){define(["dojo/string","dojo/topic","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dijit/_WidgetBase","./ControlDesignerRegistry","./RowDesigner","./ColumnDesigner","./Editors/FormBasicPropertyEditor","./Editors/FormAdvancedPropertyEditor","./Editors/FormUsagesPropertyEditor","dojo/i18n!./nls/FormDesigner"],function(_23d9,topic,_23da,lang,array,_23db,_23dc,_23dd,_23de,_23df,_23e0,_23e1,_23e2){return _23da("Sage.QuickForms.Design.FormDesigner",[_23db],{entry:null,editors:[_23df,_23e0,_23e1],helpTopicName:"Form_properties",_controls:null,_rows:null,_columns:null,displayNameText:"Form",constructor:function(){lang.mixin(this,_23e2);},uninitialize:function(){this.inherited(arguments);array.forEach(this._controls,function(_23e3){_23e3.destroyRecursive();});array.forEach(this._rows,function(_23e4){_23e4.destroyRecursive();});array.forEach(this._columns,function(_23e5){_23e5.destroyRecursive();});},set:function(name,value){var _23e6=this.inherited(arguments);var names=this._getAttrNames(name),_23e7=this[names.s];if(lang.isFunction(_23e7)){topic.publish("/quickforms/design/designerModified",this,name,value,_23e6,this);}return _23e6;},_getNameAttr:function(){return lang.getObject("entity.Name",false,this.entry);},_setNameAttr:function(value){lang.setObject("entity.Name",value,this.entry);},_getDescriptionAttr:function(){return lang.getObject("entity.Description",false,this.entry);},_setDescriptionAttr:function(value){lang.setObject("entity.Description",value,this.entry);},_getActiveControlAttr:function(){return lang.getObject("entity.ActiveControl",false,this.entry);},_setActiveControlAttr:function(value){lang.setObject("entity.ActiveControl",value,this.entry);},_getUseEntityNameAsTitleAttr:function(){return lang.getObject("entity.UseEntityNameAsTitle",false,this.entry);},_setUseEntityNameAsTitleAttr:function(value){lang.setObject("entity.UseEntityNameAsTitle",value,this.entry);},_getEtagAttr:function(){return lang.getObject("etag",false,this.entry);},_setEtagAttr:function(value){lang.setObject("etag",value,this.entry);},_getRowsAttr:function(){return this._rows||(this._rows=this._createRowDesigners());},_getRowCountAttr:function(){return this.get("rows").length;},_createRowDesigners:function(){var raw=lang.getObject("entity.Rows",false,this.entry),_23e8=[];array.forEach(raw,function(row,index){var _23e9=new _23dd({entry:row,form:this,index:index});_23e8.push(_23e9);},this);return _23e8;},_getColumnsAttr:function(){return this._columns||(this._columns=this._createColumnDesigners());},_getColumnCountAttr:function(){return this.get("columns").length;},_createColumnDesigners:function(){var raw=lang.getObject("entity.Columns",false,this.entry),_23ea=[];array.forEach(raw,function(_23eb,index){var _23ec=new _23de({entry:_23eb,form:this,index:index});_23ea.push(_23ec);},this);return _23ea;},_getControlsAttr:function(){return this._controls||(this._controls=this._createControlDesigners());},_createControlDesigners:function(){var raw=lang.getObject("entity.Controls",false,this.entry),_23ed=[];array.forEach(raw,function(_23ee){var ctor=_23dc.getDesignerFor(_23ee);if(ctor){var _23ef=new ctor({entry:_23ee,form:this});_23ed.push(_23ef);}else{throw new Error("Could not find designer for type: \""+_23ee["$type"]+"\".");}},this);return _23ed;},addControl:function(_23f0){var _23f1=this.get("controls"),raw=lang.getObject("entity.Controls",false,this.entry)||[];_23f1.push(_23f0);raw.push(_23f0.get("entry"));lang.setObject("entity.Controls",raw,this.entry);},addRow:function(_23f2,at){var _23f3=this.get("rows"),raw=lang.getObject("entity.Rows",false,this.entry)||[];_23f2.index=at||_23f2.index||_23f3.length;for(var i=_23f2.index;i<_23f3.length;i++){_23f3[i].index+=1;}_23f3.splice(_23f2.index,0,_23f2);raw.splice(_23f2.index,0,_23f2.get("entry"));lang.setObject("entity.Rows",raw,this.entry);},removeRow:function(at){var _23f4=this.get("rows"),raw=lang.getObject("entity.Rows",false,this.entry)||[];for(var i=at;i<_23f4.length;i++){_23f4[i].index-=1;}_23f4.splice(at,1);raw.splice(at,1);},addColumn:function(_23f5,at){var _23f6=this.get("columns"),raw=lang.getObject("entity.Columns",false,this.entry)||[];_23f5.index=at||_23f5.index||_23f6.length;for(var i=_23f5.index;i<_23f6.length;i++){_23f6[i].index+=1;}_23f6.splice(_23f5.index,0,_23f5);raw.splice(_23f5.index,0,_23f5.get("entry"));lang.setObject("entity.Columns",raw,this.entry);},removeColumn:function(at){var _23f7=this.get("columns"),raw=lang.getObject("entity.Columns",false,this.entry)||[];for(var i=at;i<_23f7.length;i++){_23f7[i].index-=1;}_23f7.splice(at,1);raw.splice(at,1);},createUniqueId:function(_23f8){var _23f9={},next=_23f8,count=1;array.forEach(this.get("controls"),function(_23fa){var id=_23fa.get("controlId");if(next==id){do{next=_23f8+count++;}while(_23f9[next]);}_23f9[id]=true;});return next;}});});},"Sage/QuickForms/Design/RowDesigner":function(){define(["dojo/string","dojo/topic","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dijit/_WidgetBase","./Editors/RowBasicPropertyEditor","dojo/i18n!./nls/RowDesigner"],function(_23fb,topic,_23fc,lang,array,_23fd,_23fe,_23ff){return _23fc("Sage.QuickForms.Design.RowDesigner",[_23fd],{entry:null,editors:[_23fe],helpTopicName:"Row_properties",displayNameText:"Row",constructor:function(){lang.mixin(this,_23ff);},set:function(name,value){var _2400=this.inherited(arguments);var names=this._getAttrNames(name),_2401=this[names.s];if(lang.isFunction(_2401)){topic.publish("/quickforms/design/designerModified",this,name,value,_2400,this);}return _2400;}});});},"Sage/QuickForms/Design/Editors/RowBasicPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dojox/layout/ContentPane","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/RowBasicPropertyEditor"],function(_2402,lang,_2403,_2404,_2405,_2406,_2407,_2408,_2409,_240a,_240b){return _2402("Sage.QuickForms.Design.Editors.RowBasicPropertyEditor",[_2403,_2409,_2408],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.indexTooltipText %}\">","<label>{%= $.indexText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_index\" data-dojo-attach-event=\"onChange:_onIndexChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>"]),_index:null,titleText:"Basic",appearanceText:"Appearance",indexText:"Index:",indexTooltipText:"Number of the row or column, beginning with zero.",constructor:function(){lang.mixin(this,_240b);},setup:function(){this.inherited(arguments);this._index.set("value",this._designer.get("index"));},_onIndexChange:function(value){}});});},"Sage/QuickForms/Design/ColumnDesigner":function(){define(["dojo/string","dojo/topic","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dijit/_WidgetBase","./Editors/ColumnBasicPropertyEditor","dojo/i18n!./nls/ColumnDesigner"],function(_240c,topic,_240d,lang,array,_240e,_240f,_2410){return _240d("Sage.QuickForms.Design.ColumnDesigner",[_240e],{entry:null,editors:[_240f],helpTopicName:"Column_properties",displayNameText:"Column",constructor:function(){lang.mixin(this,_2410);},set:function(name,value){var _2411=this.inherited(arguments);var names=this._getAttrNames(name),_2412=this[names.s];if(lang.isFunction(_2412)){topic.publish("/quickforms/design/designerModified",this,name,value,_2411,this);}return _2411;},_getWidthAttr:function(){return lang.getObject("Width",false,this.entry);},_setWidthAttr:function(value){lang.setObject("Width",value,this.entry);},_getSizeTypeAttr:function(){return lang.getObject("SizeType",false,this.entry);},_setSizeTypeAttr:function(value){lang.setObject("SizeType",value,this.entry);}});});},"Sage/QuickForms/Design/Editors/ColumnBasicPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dojox/layout/ContentPane","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","dijit/form/CheckBox","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/ColumnBasicPropertyEditor"],function(_2413,lang,_2414,_2415,_2416,_2417,_2418,_2419,_241a,_241b,_241c){return _2413("Sage.QuickForms.Design.Editors.ColumnBasicPropertyEditor",[_2414,_241a,_2419],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.appearanceText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.indexTooltipText %}\">","<label>{%= $.indexText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_index\" data-dojo-attach-event=\"onChange:_onIndexChange\" data-dojo-props=\"disabled:true\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.widthTooltipText %}\">","<label>{%= $.widthText %}</label>","<div data-dojo-type=\"dijit.form.NumberTextBox\" data-dojo-attach-point=\"_width\" data-dojo-attach-event=\"onChange:_onWidthChange\" required=\"true\" data-dojo-props=\"constraints:{min:0}\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.sizeTypeTooltipText %}\">","<label>{%= $.sizeTypeText %}</label>","<div data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"_sizeType\" data-dojo-attach-event=\"onChange:_onSizeTypeChange\">","{% for (var type in $.rowSizeTypeText) { %}","<span value=\"{%= type %}\">{%= $.rowSizeTypeText[type] %}</span>","{% } %}","</div>","</div>","</div>","</fieldset>"]),_index:null,_width:null,_sizeType:null,titleText:"Basic",appearanceText:"Appearance",indexText:"Index:",indexTooltipText:"Number of the row or column, beginning with zero.",widthText:"Width:",widthTooltipText:"Width of this column of controls.",sizeTypeText:"Size Type:",sizeTypeTooltipText:"Method of sizing: Absolute, AutoSize, or Percent.",rowSizeTypeText:{"Absolute":"Absolute","Percent":"Percent","AutoSize":"AutoSize"},constructor:function(){lang.mixin(this,_241c);},setup:function(){this.inherited(arguments);this._index.set("value",this._designer.get("index"));this._width.set("value",this._designer.get("width"));this._sizeType.set("value",this._designer.get("sizeType"));},_onWidthChange:function(value){if(this.isSuspended()){return;}this._designer.set("width",value);},_onSizeTypeChange:function(value){if(this.isSuspended()){return;}this._designer.set("sizeType",value);},_onIndexChange:function(value){if(this.isSuspended()){return;}this._designer.set("index",value);}});});},"Sage/QuickForms/Design/Editors/FormBasicPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dijit/form/TextBox","dojo/data/ItemFileWriteStore","Sage/_Templated","./_PropertyEditor","dojo/i18n!./nls/FormBasicPropertyEditor"],function(_241d,lang,_241e,_241f,_2420,_2421,_2422,_2423){return _241d("Sage.QuickForms.Design.Editors.FormBasicPropertyEditor",[_241e,_2422,_2421],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.generalText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.activeControlTooltipText %}\">","<label>{%= $.activeControlText %}</label>","<div data-dojo-type=\"dijit.form.ComboBox\" data-dojo-attach-point=\"_activeControl\" data-dojo-attach-event=\"onChange:_onActiveControlChange\" data-dojo-props=\"disabled:true\"></div>","</div>","<div class=\"editor-field\" title=\"{%= $.nameTooltipText %}\">","<label>{%= $.nameText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_name\" data-dojo-attach-event=\"onChange:_onNameChange\" data-dojo-props=\"disabled:true\"></div>","</div>","</div>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.descriptionTooltipText %}\">","<label>{%= $.descriptionText %}</label>","<div data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"_description\" data-dojo-attach-event=\"onChange:_onDescriptionChange\"></div>","</div>","</div>","</fieldset>"]),_activeControl:null,_description:null,_name:null,titleText:"Basic",generalText:"General",activeControlText:"Active Control:",activeControlTooltipText:"The control the user's cursor starts on.",descriptionText:"Description:",descriptionTooltipText:"Optional description of the purpose of the form.",nameText:"Name:",nameTooltipText:"Form identifier used by the system.",constructor:function(){lang.mixin(this,_2423);},setup:function(){this.inherited(arguments);this.setActiveControlList();this._activeControl.set("value",this._designer.get("activeControl"));this._description.set("value",this._designer.get("description"));this._name.set("value",this._designer.get("name"));},setActiveControlList:function(){var _2424=this._designer.get("controls"),_2425=new _2420({data:{identifier:"key",label:"name",items:[]}});for(var i=0;i<_2424.length;i++){var _2426=_2424[i];if(_2426.entry&&_2426.entry["ControlId"]){_2425.newItem({key:"control_"+i,name:_2426.entry["ControlId"]});}}this._activeControl.set({store:_2425,disabled:false});},_onActiveControlChange:function(value){if(this.isSuspended()){return;}this._designer.set("activeControl",value);},_onNameChange:function(value){},_onDescriptionChange:function(value){if(this.isSuspended()){return;}this._designer.set("description",value);}});});},"Sage/QuickForms/Design/Editors/FormAdvancedPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/layout/ContentPane","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/Select","Sage/_Templated","./_PropertyEditor","../PropertyValueError","dojo/i18n!./nls/FormAdvancedPropertyEditor"],function(_2427,lang,_2428,_2429,_242a,_242b,_242c,_242d,_242e,_242f){return _2427("Sage.QuickForms.Design.Editors.FormAdvancedPropertyEditor",[_2428,_242d,_242c],{widgetsInTemplate:true,contentTemplate:new Simplate(["<fieldset><legend>{%= $.generalText %}</legend>","<div class=\"editor-content-half\">","<div class=\"editor-field\" title=\"{%= $.useEntityNameAsTitleTooltipText %}\">","<label>{%= $.useEntityNameAsTitleText %}</label>","<div data-dojo-attach-point=\"_useEntityNameAsTitle\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-event=\"onChange:_onUseEntityNameAsTitleChange\"></div>","</div>","</div>","<div class=\"editor-content-half\">","</div>","</fieldset>"]),_useEntityNameAsTitle:null,titleText:"Advanced",generalText:"General",useEntityNameAsTitleText:"Use Entity Name As Title:",useEntityNameAsTitleTooltipText:"Use name of current entity in form title.",constructor:function(){lang.mixin(this,_242f);},setup:function(){this.inherited(arguments);this._useEntityNameAsTitle.set("value",this._designer.get("useEntityNameAsTitle"));},_onUseEntityNameAsTitleChange:function(value){if(this.isSuspended()){return;}this._designer.set("useEntityNameAsTitle",value);}});});},"Sage/QuickForms/Design/Editors/FormUsagesPropertyEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/string","dojox/grid/EnhancedGrid","./_PropertyEditor","Sage/Services/_ServiceMixin","dojo/i18n!./nls/FormUsagesPropertyEditor"],function(_2430,lang,_2431,_2432,_2433,_2434,_2435){return _2430("Sage.QuickForms.Design.Editors.FormUsagesPropertyEditor",[_2432,_2433,_2434],{serviceMap:{"dataService":{type:"sdata",name:"metadata"}},titleText:"Usage",portalText:"Portal",viewText:"View",modesText:"Modes",descriptionText:"Description",selectionMode:"none",canSort:function(){return false;},constructor:function(){lang.mixin(this,_2435);},setup:function(){this.inherited(arguments);var name=this._designer.get("name")||"";var store=new Sage.Data.SDataStore({service:this.dataService,resourceKind:"formUsages",select:["showInMode","portalPage/portalAlias","portalPage/pagetitle","portalPage/description"],where:_2431.substitute("smartPartId eq \"${0}\"",[name])});this.setStore(store);this.set("structure",[{field:"portalPage.portalAlias",name:this.portalText,width:"auto"},{field:"portalPage.pagetitle",name:this.viewText,width:"auto"},{field:"showInMode",name:this.modesText,formatter:this.formatModes,width:"auto"},{field:"portalPage.description",name:this.descriptionText,width:"auto"}]);},formatModes:function(modes){if(!modes){return "";}return (lang.isArray(modes))?modes.join(", "):modes;}});});},"Sage/QuickForms/Design/NonVisibleControlContainer":function(){define(["dojo/query","dojo/topic","dojo/string","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/event","dojo/dom-attr","dojo/dom-class","dojo/NodeList-traverse","dojo/NodeList-manipulate","dijit/registry","dijit/focus","dijit/layout/_LayoutWidget","Sage/_EventMapMixin","Sage/_Templated","dojo/i18n!./nls/NonVisibleControlContainer"],function(query,topic,_2436,_2437,array,lang,event,_2438,_2439,_243a,_243b,_243c,focus,_243d,_243e,_243f,_2440){return _2437("Sage.QuickForms.Design.NonVisibleControlContainer",[_243d,_243e,_243f],{events:{"click":"_onClick","keydown":"_onKeyDown"},widgetsInTemplate:true,widgetTemplate:new Simplate(["<div class=\"design-hidden-container\">","<div class=\"design-hidden-container-header dijit dijitToolbar\">{%: $.headerText %}</div>","<div class=\"design-hidden-container-content\" data-dojo-attach-point=\"containerNode\"></div>","<div>"]),_designGroup:null,_designGroupTopics:null,selections:null,singleSelection:false,designGroup:"default",headerText:"Non-Visual Controls",_getDesignGroupAttr:function(){return this._designGroup;},_setDesignGroupAttr:function(value){if(this._designGroupTopics){array.forEach(this._designGroupTopics,function(topic){this.unsubscribe(topic);},this);}this._designGroup=value;this._designGroupTopics=[this.subscribe(_2436.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),this._onDesignerSelected)];},constructor:function(){this.selections=[];lang.mixin(this,_2440);},buildRendering:function(){this.inherited(arguments);_2438.set(this.domNode,"tabIndex",0);},_onKeyDown:function(evt){},_handleSelectionFor:function(_2441,_2442){if(_2441){var _2443=(array.indexOf(this.selections,_2441)>-1);if(_2442&&!this.singleSelection){if(!_2443){array.forEach(this.selections,function(_2444){query(_2444.domNode).attr("tabIndex","-1");});this.selections.push(_2441);_2438.set(_2441.domNode,"tabIndex",0);focus.focus(_2441.domNode);_2439.add(_2441.domNode,"design-hidden-item-selected");this.onSelectionChanged(this.selections,true);topic.publish(_2436.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),_2441,true,this);}}else{this._clearSelectionDom();this._clearSelectionState(false);this.selections=[_2441];_2438.set(_2441.domNode,"tabIndex",0);focus.focus(_2441.domNode);_2439.add(_2441.domNode,"design-hidden-item-selected");this.onSelectionChanged(this.selections);topic.publish(_2436.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),_2441,true,this);}}else{if(this.singleSelection||!_2442){this._clearSelectionDom();this._clearSelectionState();}}},_onClick:function(evt){var node=query(evt.target).closest(".dijitLayoutContainer-child")[0],_2445=node&&_243c.byNode(node),_2446=evt.shiftKey;this._handleSelectionFor(_2445,_2446);},onSelectionChanged:function(_2447,_2448){},_clearSelectionDom:function(){if(this.selections.length>0){array.forEach(this.selections,function(_2449){query(_2449.domNode).attr("tabIndex","-1").removeClass("design-hidden-item-selected");});}},_clearSelectionState:function(_244a){if(this.selections.length>0){this.selections=[];if(_244a!==false){this.onSelectionChanged(this.selections);topic.publish(_2436.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),false,false,this);}}},_onDesignerSelected:function(_244b,_244c,_244d){if(_244b&&_244d!==this){this._clearSelectionDom();this._clearSelectionState(false);}},clearSelections:function(){this._clearSelectionDom();this._clearSelectionState();},clear:function(){this._clearSelectionState();array.forEach(this.getChildren(),function(child){this.removeChild(child);},this);this.layout();}});});},"Sage/QuickForms/Design/PropertyEditorContainer":function(){define(["dojo/string","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-class","dojo/dom-construct","dijit/layout/TabContainer","dijit/layout/BorderContainer","Sage/_EventMapMixin","Sage/_Templated","Sage/Utility","./ControlDesigner","./Help","dojo/i18n!./nls/PropertyEditorContainer"],function(_244e,_244f,array,lang,_2450,_2451,_2452,_2453,_2454,_2455,_2456,_2457,Help,_2458){return _244f("Sage.QuickForms.Design.PropertyEditorContainer",[_2453,_2455],{widgetsInTemplate:true,contentTemplate:new Simplate(["<div class=\"design-editor-container-toolbar\" data-dojo-type=\"dijit.Toolbar\" data-dojo-props=\"region: 'top', align: 'right', splitter: false\">","<span class=\"design-editor-title\" data-dojo-attach-point=\"titleNode\"></span>","<div data-dojo-type=\"Sage.UI.ImageButton\" icon=\"images/icons/Help_16x16.png\" tooltip=\"{%: $.helpText %}\" data-dojo-attach-event=\"onClick:help\" class=\"design-panel-help\"></div>","</div>","<div data-dojo-type=\"dijit.layout.TabContainer\" data-dojo-attach-point=\"editorTabContainer\" data-dojo-props=\"region: 'center'\"></div>"]),_setTitleAttr:{node:"titleNode",type:"innerText"},_designGroup:null,_designGroupTopics:null,_designer:null,_designerSource:null,editorTabContainer:null,titleNode:null,helpTopicName:"webFormDesigner",helpSubSystemName:"WebForms",designGroup:"default",specificTitleFormatText:"${0} Properties (${1})",genericTitleFormatText:"${0} Properties",constructor:function(){lang.mixin(this,_2458);},_getDesignGroupAttr:function(){return this._designGroup;},_setDesignGroupAttr:function(value){if(this._designGroupTopics){array.forEach(this._designGroupTopics,function(topic){this.unsubscribe(topic);},this);}this._designGroup=value;this._designGroupTopics=[this.subscribe(_244e.substitute("/quickforms/design/${0}/designerSelected",[this._designGroup]),this._onDesignerSelected),this.subscribe(_244e.substitute("/quickforms/design/${0}/designerMoved",[this._designGroup]),this._onDesignerMoved)];},help:function(){if(this._designer){Help.open(this._designer.helpTopicName,this.helpSubSystemName);}else{Help.open(this.helpTopicName,this.helpSubSystemName);}},buildRendering:function(){this.inherited(arguments);_2450.add(this.domNode,"design-editor-container");},uninitialize:function(){this.inherited(arguments);},clear:function(){array.forEach(this.editorTabContainer.getChildren(),function(child){this.editorTabContainer.removeChild(child);child.destroyRecursive(false);},this);this._designer=null;this.set("title","");this.layout();},_setDesignerAttr:function(value,_2459){if(value===this._designer){return;}var _245a=this.editorTabContainer.selectedChildWidget&&this.editorTabContainer.selectedChildWidget.constructor,_245b;this.clear();array.forEach(value.editors,function(_245c){var _245d=new _245c({});this.editorTabContainer.addChild(_245d);if(_245c===_245a){_245b=_245d;}},this);if(value.get("controlId")){this.set("title",_244e.substitute(this.specificTitleFormatText,[value.displayNameText,value.get("controlId")]));}else{this.set("title",_244e.substitute(this.genericTitleFormatText,[value.displayNameText]));}this._designer=value;this._designerSource=_2459;if(_245b){this.editorTabContainer.selectChild(_245b);}this.layout();array.forEach(this.editorTabContainer.getChildren(),function(_245e){_245e.set("designer",this._designer);},this);},_getDesignerAttr:function(){return this._designer;},_onDesignerSelected:function(_245f,_2460,_2461){if(_245f&&_245f.editors){this.set("designer",_245f,_2461);}else{this.clear();}},_onDesignerMoved:function(_2462,_2463){if(_2462!==this._designer){return;}array.forEach(this.editorTabContainer.getChildren(),function(_2464){_2464.set("designer",this._designer);},this);}});});},"Sage/MainView/GroupManager":function(){define(["Sage/UI/SDataMainViewConfigurationProvider","Sage/MainView/GroupMgr/GroupManagerGroupContextService","Sage/MainView/GroupMgr/FilterConfigurationProvider","dojo/_base/declare","Sage/MainView/GroupMgr/GroupManagerActions"],function(_2465,_2466,_2467,_2468){var _2469=_2468("Sage.MainView.GroupManager",_2465,{_currentTabId:false,_currentTabDescription:false,_mainViewName:"GroupManager",store:false,constructor:function(_246a){var _246b=Sage.Services.getService("ClientGroupContext");if(!_246b||_246b.declaredClass!=="Sage.MainView.GroupMgr.GroupManagerGroupContextService"){_246b=new _2466();Sage.Services.removeService("ClientGroupContext");Sage.Services.addService("ClientGroupContext",_246b);}var ctx=_246b.getContext();this._currentTabId=ctx.CurrentGroupID;this._currentTabDescription=ctx.CurrentName;this.titlePaneConfiguration={tabs:this._getTabsConfig(),menu:this._getMenuConfig(),titleFmtString:"${0}"};dojo.subscribe("/group/context/changed",this,"_onCurrentGroupChanged");},_getListPanelConfig:function(){var _246c=Sage.Services.getService("ClientGroupContext");if(_246c){this.listPanelConfiguration=_246c.getCurrentListConfig();this.store=this.listPanelConfiguration.list.store;this.service=this.listPanelConfiguration.list.store.service;}return this.listPanelConfiguration;},requestConfiguration:function(_246d){if(_246d.success){_246d.success.call(_246d.scope||this,this._getListPanelConfig(),this);}},requestTitlePaneConfiguration:function(_246e){if(_246e.success){_246e.success.call(_246e.scope||this,this.titlePaneConfiguration,this);}},_getTabsConfig:function(){var _246f={store:false,selectedTabId:this._currentTabId,tabKeyProperty:"key",tabNameProperty:"descriptor",fetchParams:{},staticTabs:this._getStaticTabs(),onTabSelect:dojo.hitch(this,"_onTabSelected"),onTabClose:false,showTabContextMenus:false};return _246f;},_getStaticTabs:function(){var _2470=Sage.Services.getService("ClientGroupContext");return _2470.getStaticTabs();},_onTabSelected:function(tab){var _2471=Sage.Services.getService("ClientGroupContext");if(_2471){var ctx=_2471.getContext();var id=tab.id||tab;if(ctx.CurrentGroupID===id){return;}_2471._currentListConfiguration=null;_2471.setCurrentGroup(id,tab.title);}},_onCurrentGroupChanged:function(args){var _2472=args.current;this._currentTabId=_2472.CurrentGroupID;this._currentTabDescription=_2472.CurrentName;if(dijit.byId("GroupTabs").selectedChildWidget.id!==_2472.CurrentGroupID){dijit.byId("GroupTabs").selectChild(_2472.CurrentGroupID);}},_getMenuConfig:function(){return false;}});return _2469;});},"Sage/MainView/GroupMgr/GroupManagerGroupContextService":function(){define(["Sage/Groups/BaseGroupContextService","dojo/string","Sage/Data/SDataServiceRegistry","dojo/_base/lang","Sage/MainView/GroupMgr/GroupsListPanelConfig","Sage/MainView/GroupMgr/ReleasesListPanelConfig","Sage/MainView/GroupMgr/StatisticsListPanelConfig","dojo/_base/declare","dojo/i18n!./nls/GroupManagerGroupContextService","Sage/Services/RoleSecurityService"],function(_2473,_2474,_2475,lang,_2476,_2477,_2478,_2479,_247a){var _247b=_2479("Sage.MainView.GroupMgr.GroupManagerGroupContextService",_2473,{_currentContext:null,_currentTabId:false,_currentTabDescription:false,_currentListConfiguration:false,defaultTabId:"all_groups",staticTabsConfiguration:[],_configsHash:false,_LOCALSTORE_NAMESPACE:"GroupManagerView",_STORE_KEY_LASTAB:"_GroupManagerLASTTAB",_Group_FILTERS_KEY:"_GroupManagerFILTERS",_tabNameCache:{},constructor:function(){this.inherited(arguments);var svc=Sage.Services.getService("RoleSecurityService");if(svc){if(svc.hasAccess("Administration/GroupManager/View")){this._addConfig(0);this._addConfig(1);this._addConfig(2);}else{if(svc.hasAccess("Administration/GroupManager/Groups/View")){this._addConfig(0);}if(svc.hasAccess("Administration/GroupManager/Shared/View")){this._addConfig(1);}if(svc.hasAccess("Administration/GroupManager/UsageStatistics/View")){this._addConfig(2);}}}else{this._addConfig(0);this._addConfig(1);this._addConfig(2);}this._currentContext={};dojo.mixin(this._currentContext,this._emptyContext);this._currentContext.CurrentTableKeyField="$key";this._currentContext.AppliedFilterInfo={};this._currentContext.CurrentFamily=null;this._currentContext.notGroupBased=true;this.setContext(this._getDefaultTabId(),"default");this.unsubscribeConnects();this._subscribes=[];this._subscribes.push(dojo.subscribe(_2474.substitute("/ui/filters/default/refresh"),this,this._onDefaultFilterRefresh));this._onDefaultFilterLoad();},getStaticTabs:function(){return this.staticTabsConfiguration;},setCurrentGroup:function(id,name,_247c){if(this._currentContext.CurrentGroupID===id){return;}this._currentContext.CurrentTableKeyField=_247c?_247c:this.getKeyField(id);this.setContext(id,name?name:this.getGroupName(id));this.onCurrentGroupChanged({current:this._currentContext});},getContext:function(){return this._currentContext;},_addConfig:function(id){switch(id){case 0:this.staticTabsConfiguration.push({key:"all_groups",descriptor:_247a.AllGroups,keyField:"$key",configProviderType:_2476,entityName:"groups",isNonEntityBased:true});break;case 1:this.staticTabsConfiguration.push({key:"releases",descriptor:_247a.Shares,keyField:"$key",configProviderType:_2477,entityName:"groupReleasesView",isNonEntityBased:false});break;case 2:this.staticTabsConfiguration.push({key:"statistics",descriptor:_247a.UsageStatistics,keyField:"$key",configProviderType:_2478,entityName:"groupStatisticsView",isNonEntityBased:false});break;}},_ensureConfigsHash:function(){if(!this._configsHash){var hash={};for(var i=0;i<this.staticTabsConfiguration.length;i++){var cfg=this.staticTabsConfiguration[i];hash[cfg.key]=lang.mixin(cfg,{instance:false});}this.configsHash=hash;}},_setListConfig:function(){this._ensureConfigsHash();var tabId=this._currentContext.CurrentGroupID;var _247d=(this.configsHash.hasOwnProperty(tabId))?this.configsHash[tabId]:this.configsHash["groups"];if(typeof _247d==="undefined"||!_247d){return;}if(!_247d.instance){_247d.instance=new _247d.configProviderType();}else{_247d.instance.rebuild();}this._currentListConfiguration=_247d.instance;this._currentListConfiguration.isNonEntityBased=_247d.isNonEntityBased;this._currentListConfiguration.entityName=_247d.entityName;},getCurrentListConfig:function(){this._setListConfig();return this._currentListConfiguration;},getKeyField:function(tabid){this._ensureConfigsHash();var _247e="$key";if(this.configsHash[tabid]){_247e=this.configsHash[tabid]["keyField"]||"$key";}return _247e;},getGroupName:function(tabid){this._ensureConfigsHash();var name="default";if(this.configsHash[tabid]){name=this.configsHash[tabid]["descriptor"]||"default";}return name;},onCurrentGroupChanged:function(_247f){this._clearFilterManager();var self=this;this._onDefaultFilterLoad(function(){dojo.publish("/group/context/changed",[_247f,self]);self._saveToLocalStorage(self._STORE_KEY_LASTAB,self.getContext().CurrentGroupID);});},_clearFilterManager:function(){dojo.publish("/ui/filters/default/apply",[{},{},this]);},setContext:function(id,name){this._currentContext.CurrentGroupID=id;this._currentContext.CurrentName=name;this._currentContext.AppliedFilterInfo={};this._currentContext.filtersForEntity="";this._setListConfig();this._currentContext.CurrentEntity=this._currentListConfiguration.entityName;this._currentContext.isNonEntityBased=this._currentListConfiguration.isNonEntityBased;this._isRetrievingContext=false;this.onContextSet(this._currentContext);},isContextRequired:function(){return !(Sage&&Sage.Groups&&Sage.Groups._groupContext);},_onDefaultFilterLoad:function(_2480){this._requestGroupFilters(_2480);},_requestGroupFilters:function(_2481){var _2482=this.getContext();var self=this;var _2483=_2475.getSDataService("system");var _2484=new Sage.SData.Client.SDataResourcePropertyRequest(_2483);_2484.setResourceKind("groups");_2484.setResourceProperty("$queries/filters");_2484.setQueryArg("count",20);_2484.readFeed({success:function(_2485){if(_2485){_2482.filtersForEntity=dojo.toJson(_2485.$resources);self._requestFilters(_2481);}},error:function(error){if(error){console.error(error);}},scope:this,async:false});},_requestFilters:function(_2486){var _2487=this.getContext();var _2488=_2475.getSDataService("system");var entry={"$name":"getEntityFilters","request":{"entityName":_2487.CurrentEntity,"key":_2487.CurrentGroupID,"isNonEntityBased":_2487.isNonEntityBased,"filtersForEntity":_2487.filtersForEntity}};var _2489=new Sage.SData.Client.SDataServiceOperationRequest(_2488);_2489.setOperationName("getEntityFilters");_2489.execute(entry,{success:lang.hitch(this,function(_248a){try{if(_248a.response.appliedFilterInfo){this._currentContext.AppliedFilterInfo.applied=_248a.response.appliedFilterInfo.applied;this._currentContext.AppliedFilterInfo.definitionSet=_248a.response.appliedFilterInfo.definitionSet;}if(_2486){_2486();}}catch(err){console.error(err);}}),failure:function(_248b){console.error(_248b);},async:false});},_onDefaultFilterRefresh:function(_248c,_248d,_248e){var _248f=this.getContext();var _2490=_2475.getSDataService("system"),entry={"$name":"applyFilterToEntity","request":{"entityName":_248f.CurrentEntity,"filter":dojo.toJson(_248e.createValueSet()),"key":_248f.CurrentGroupID,"isNonEntityBased":_248f.isNonEntityBased,"filtersForEntity":_248f.filtersForEntity}},_2491=new Sage.SData.Client.SDataServiceOperationRequest(_2490).setOperationName("applyFilterToEntity");_2491.execute(entry,{});},_saveToLocalStorage:function(key,value,_2492){this._saveToSessionStorage(key,value,_2492);},_getFromLocalStorage:function(key,_2493){return this._getFromSessionStorage(key,_2493);},_getFromSessionStorage:function(key,_2494){if(!_2494){_2494=this._LOCALSTORE_NAMESPACE;}var _2495=_2494+"_"+key;return sessionStorage.getItem(_2495);},_saveToSessionStorage:function(key,value,_2496){if(!_2496){_2496=this._LOCALSTORE_NAMESPACE;}var _2497=_2496+"_"+key;sessionStorage.setItem(_2497,value);},_getDefaultTabId:function(){var _2498=this._getUrlTabId();if(_2498){_2498=this._validateTabId(_2498);if(_2498){return _2498;}}var _2499=this._getFromLocalStorage(this._STORE_KEY_LASTAB);if(_2499){this.defaultTabId=_2499;}else{}if(!this._configsHash){for(var i=0;i<this.staticTabsConfiguration;i++){if(this.defaultTabId===this.staticTabsConfiguration[i]["key"]){return this.defaultTabId;}}}return this.defaultTabId;},_getUrlTabId:function(){var tabId=false,_249a="[\\?&]tabId=([^%#]*)",regex=new RegExp(_249a),_249b=regex.exec(window.location.href);if(_249b!==null){tabId=_249b[1];}return tabId;},_validateTabId:function(tabId){if(tabId){for(var i=0;i<this.staticTabsConfiguration.length;i++){var cfg=this.staticTabsConfiguration[i];if(cfg.key.toUpperCase()===tabId.toUpperCase()){return cfg.key;}}}return null;}});if(!Sage.Services.hasService("ClientGroupContext")){Sage.Services.addService("ClientGroupContext",new _247b());}else{var _249c=Sage.Services.getService("ClientGroupContext");if(_249c.declaredClass!=="Sage.MainView.GroupMgr.GroupManagerGroupContextService"){_249c.unsubscribeConnects();Sage.Services.removeService("ClientGroupContext");Sage.Services.addService("ClientGroupContext",new _247b());}}return _247b;});},"Sage/MainView/GroupMgr/GroupsListPanelConfig":function(){define(["Sage/MainView/_BaseListPanelConfig","Sage/MainView/GroupMgr/GroupsSDataSummaryFormatterScope","dojo/_base/declare","dojo/i18n!./nls/GroupsListPanelConfig","Sage/Data/SDataServiceRegistry","Sage/UI/Columns/Boolean","Sage/UI/Columns/DateTime","Sage/UI/Columns/Numeric","Sage/UI/Columns/SlxUser","dojo/_base/lang","Sage/MainView/GroupMgr/GroupManagerActions","Sage/MainView/GroupMgr/GroupManagerFormatter","Sage/Utility/_LocalStorageMixin","dojo/i18n!./templates/nls/GroupsListSummary","dojo/i18n!./templates/nls/GroupDetailSummary"],function(_249d,_249e,_249f,_24a0,_24a1,_24a2,_24a3,_24a4,_24a5,_24a6,_24a7,_24a8){var _24a9=_249f("Sage.MainView.GroupMgr.GroupsListPanelConfig",[_249d],{keyField:"$key",_listId:"all_groups",_resourceKind:"groups",_contextMenu:"GroupManagerListContextMenu",_currentListContextSubMenu:"GroupsListContextMenu",constructor:function(){this.inherited(arguments);_24a6.mixin(this,_24a0);this.detailStateKey="GroupMgrShowDetail";this._service=_24a1.getSDataService("system");this._structure=this._getStructure();this._select=this._getSelect();this._where=this._getWhere();this._sort=this._getSort();this._include=this._getInclude();this._store=this._getStore();this.list=this._getListConfig();this.detail=this._getDetailConfig();this.toolBar=this._getToolBars();this.list.selectionMode="multiple";_24a7.initShowHideDetail(this);},_getShowDetail:function(){if(this.detailStateKey){var value=sessionStorage.getItem(this.detailStateKey);if(value===null){return "true";}return value;}return "true";},_getStructure:function(){return [{field:"family",name:_24a0.Family,width:"50px",formatter:_24a8.formatProperCase},{field:"name",name:_24a0.Name,width:"100px"},{field:"displayName",name:_24a0.DisplayName,width:"100px"},{field:"isAdHoc",name:_24a0.AdHoc,width:"30px",type:_24a2},{field:"createDate",name:_24a0.CreateDate,width:"75px",type:_24a3},{field:"modifyDate",name:_24a0.ModifyDate,width:"75px",type:_24a3},{field:"releasedDate",name:_24a0.SharedDate,width:"75px",type:_24a3},{field:"userId",name:_24a0.Owner,width:"50px",formatter:_24a8.formatOwnerName},{field:"groupAuthor",name:_24a0.Author,width:"50px"},{field:"company",name:_24a0.Company,width:"50px"},{field:"companyVersion",name:_24a0.Version,width:"50px",type:_24a4},{field:"isDeveloperVersion",name:_24a0.Dev,width:"30px",type:_24a2},{field:"released",name:_24a0.Rel,width:"30px",type:_24a2}];},_getSelect:function(){return ["isDeveloperVersion","released","family","name","displayName","createDate","modifyDate","releasedDate","groupAuthor","company","companyVersion","userId","maintable","dataCode","isAdHoc","basedOn","entityName"];},_getWhere:function(){return "";},_getSort:function(){var sort=[{attribute:"isDeveloperVersion",descending:true},{attribute:"family",descending:false},{attribute:"displayName",descending:false},{attribute:"name",descending:false}];return sort;},_getInclude:function(){var _24aa=[];return _24aa;},_getSummaryListRequestConfig:function(){var _24ab={resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["legacyType","displayName","mainTable","createUser","createDate","modifyUser","modifyDate","releasedDate","name"],include:[],sort:this._getSort(),useBatchRequest:false};return _24ab;},_getFormatterScope:function(){var _24ac=this._getSummaryListRequestConfig();var _24ad=new _249e({templateLocation:"MainView/GroupMgr/templates/GroupsListSummary.html",resetDataManager:true,requestConfiguration:_24ac,serviceName:"system"});return _24ad;},_getSummaryDetailRequestConfig:function(){var _24ae={resourceKind:this._resourceKind,serviceName:"system",keyField:"$key",select:["isDeveloperVersion","released","family","displayName","createDate","createUser","modifyDate","modifyUser","releasedDate","groupAuthor","company","companyVersion","userId","legacyType","mainTable","dataCode","keyField","entityName","isHidden","isAdHoc","description","installationDate"],include:[],useBatchRequest:false};return _24ae;},_getDetailConfig:function(){var _24af=this._getFormatterScope();var _24b0=this._getSummaryDetailRequestConfig();var _24b1={resourceKind:this._resourceKind,requestConfiguration:_24b0,templateLocation:"MainView/GroupMgr/templates/GroupDetailSummary.html",serviceName:"system"};return _24b1;},_getToolBars:function(){var _24b2={items:[]};return _24b2;}});return _24a9;});},"Sage/MainView/GroupMgr/GroupsSDataSummaryFormatterScope":function(){define(["Sage/UI/SummaryContainer","dojo/i18n","Sage/UI/SummaryFormatterScope","Sage/MainView/GroupMgr/GroupsSDataDetailViewDataManager","Sage/UI/Controls/SummaryAggregate","dojo/_base/declare"],function(_24b3,i18n,_24b4,_24b5,_24b6,_24b7){var _24b8=_24b7("Sage.MainView.GroupMgr.GroupsSDataSummaryFormatterScope",[_24b4],{constructor:function(args){this.inherited(arguments);dojo.mixin(this,args);this.widgets=[];this.preFetchResources();this._setupDataManager();},_setupDataManager:function(){this.dataManager=new _24b5(this.requestConfiguration);if(Sage.Services.hasService("SummaryViewDataManager")){Sage.Services.removeService("SummaryViewDataManager");}Sage.Services.addService("SummaryViewDataManager",this.dataManager);}});return _24b8;});},"Sage/MainView/GroupMgr/GroupsSDataDetailViewDataManager":function(){define(["Sage/Data/SDataServiceRegistry","Sage/Data/SDataStore","dojo/_base/declare","dojo/_base/lang"],function(_24b9,_24ba,_24bb,lang){var _24bc=_24bb("Sage.MainView.GroupMgr.GroupsSDataDetailRequestQueue",null,{select:[],resourceKind:"",fetching:false,include:[],service:null,constructor:function(_24bd){lang.mixin(this,_24bd);this.requestHash={};this.fetching=false;var _24be=typeof _24bd!=="undefined"&&_24bd!==null?_24bd.serviceName||"system":"system";this.service=Sage.Data.SDataServiceRegistry.getSDataService(_24be);},add:function(_24bf,_24c0){var _24c1=this.requestHash[_24bf];if((_24c1)&&(_24c1.id!==_24c0.id)){if(!_24c1.duplicates){_24c1.duplicates=[];}var found=false;for(var i=0;i<_24c1.duplicates.length;i++){if(_24c1.duplicates[i].context.id===_24c0.id){found=true;}}if(!found){_24c1.duplicates.push({id:_24c0.id,context:_24c0});}}else{this.requestHash[_24bf]=_24c0;}},send:function(_24c2,_24c3){this.fetching=true;var _24c4=this;var _24c5=new Sage.SData.Client.SDataSingleResourceRequest(this.service);_24c5.setResourceKind(this.resourceKind);for(var id in this.requestHash){_24c5.setResourceSelector("'"+id+"'");}_24c5.setQueryArg("include",this.include.join(","));_24c5.read({success:lang.hitch(_24c3,_24c2,_24c4),failure:lang.hitch(this,this.requestFailed,_24c4)});},requestFailed:function(a,b,c){console.error("Request failed %o %o %o",a,b,c);}});var _24c6=_24bb("Sage.MainView.GroupMgr.GroupsSDataDetailViewDataManager",null,{keyField:"$key",constructor:function(){this.queue=new _24bc();this.requestTimeout=false;},requestDataNoWait:function(_24c7,_24c8,_24c9){var _24ca=new _24bc(_24c9);if(_24c9.keyField){this.keyField=_24c9.keyField;}_24ca.select=_24c9.select;_24ca.resourceKind=_24c9.resourceKind;_24ca.serviceName=_24c9.serviceName;_24ca.include=_24c9.include;_24ca.useBatchRequest=_24c9.useBatchRequest;if(_24c9.expandRecurrences!==null){_24ca.expandRecurrences=_24c9.expandRecurrences;}_24ca.add(_24c7,_24c8);_24ca.send(this.receiveData,this);},receiveData:function(_24cb,data){var _24cc=data;var id=_24cc.id;if(!id){id=_24cc[this.keyField];_24cc.id=id;}var _24cd=_24cb.requestHash[_24cc.id];if(_24cd){try{if(!_24cd.applied){_24cd.applied=true;_24cd.set("entity",_24cc);}}catch(err){console.error(err);}}}});return _24c6;});},"Sage/UI/Columns/Numeric":function(){define(["Sage/UI/Controls/Numeric","dojox/grid/cells/dijit","dojo/_base/declare","dojo/_base/lang"],function(_24ce,_24cf,_24d0,lang){var _24d1=_24d0("Sage.UI.Columns.Numeric",dojox.grid.cells._Widget,{widgetClass:_24ce,isWholeNumberPercent:false,getWidgetProps:function(_24d2){var _24d3=this.getControlId();return lang.mixin({},this.widgetProps||{},{constraints:this.constraints,value:_24d2,width:this.width,maxLength:this.maxLength,style:this.style,hotKey:this.hotKey,tabIndex:this.tabIndex,field:this.field,name:this.name,sortable:this.sortable,editable:this.editable,required:this.required,formatType:this.formatType,textAlign:this.getAlignment()});},getAlignment:function(){var _24d4="right";_24d4=(this.cellClasses.indexOf("aligncenter")>-1)?"center":_24d4;_24d4=(this.cellClasses.indexOf("alignleft")>-1)?"left":_24d4;return _24d4;},formatNode:function(_24d5,_24d6,_24d7){if(!this.widgetClass){return _24d6;}var _24d8=dijit.byId(this.getControlId());if(!_24d8){this.widget=this.createWidget.apply(this,arguments);}else{this.widget=_24d8;if(_24d8.value!==_24d6||this.widget.focusNode.value!==_24d6){this.widget.focusNode.attr("value",_24d6);}this.attachWidget.apply(this,arguments);}this.sizeWidget.apply(this,arguments);this.grid.views.renormalizeRow(_24d7);this.grid.scroller.rowHeightChanged(_24d7,true);if(this.formatType=="Percent"){this.widget.focusNode.constraints["type"]="percent";}this.widget.focusNode.focus();return undefined;},formatter:function(value,index){var vals=[];if(value===0||value===null){return "";}if(this.isWholeNumberPercent&&this.formatType==="Percent"){value=Math.round(value*100)/10000;}if((this.displayFormatString)&&(this.displayFormatString!=="")){if(this.displayFields.length<1){vals.push(value);}for(var idx=0;idx<this.displayFields.length;idx++){vals.push(Sage.Utility.getValue(this.grid._by_idx[index].item,this.displayFields[idx]));}value=Sage.Format.stringFromArray(this.displayFormatString,vals);return value;}if(this.formatType==="Percent"){this.constraints["type"]="percent";}value=dojo.number.format(value,lang.mixin(this.constraints,{locale:Sys.CultureInfo.CurrentCulture.name}));if(this.constraints&&this.constraints.places===0&&this.constraints.round===-1&&value.lastIndexOf(Sys.CultureInfo.CurrentCulture.numberFormat.NumberDecimalSeparator)>-1){value=value.slice(0,value.length-1);}if(this.abbreviationLength){var _24d9=Sage.Format.abbreviationFormatter(this.abbreviationLength);value=_24d9(value);}return value;},styles:"text-align: right;",setCurrentItems:function(){this.editInfo=this.grid.edit.info;this.item=this.grid.getItem(this.editInfo.rowIndex);},getControlId:function(){this.setCurrentItems();return [this.item.$key,this.editInfo.cell.field,this.index].join("_");},getValue:function(index){if(this.formatType=="Percent"){this.widget.focusNode._onBlur();}var _24da=this.widget.focusNode.valueNode.value;if((typeof _24da==="undefined")||(_24da==="")){_24da=0;}if(this.widget&&this.widget.state==="Error"){var item=this.grid.getItem(index);var _24db=this.grid.store.getValue(item,this.grid.edit.info.cell.field);return _24db;}return _24da;}});return _24d1;});},"Sage/UI/Columns/SlxUser":function(){define(["dijit/_Widget","dijit/form/FilteringSelect","dojo/_base/declare","Sage/Utility"],function(_24dc,_24dd,_24de,_24df){var _24e0=_24de("Sage.UI.Columns.SlxUser",dojox.grid.cells.Cell,{format:function(_24e1,_24e2){if(_24e2){var _24e3=_24e2[this.field];var name=_24e3?_24df.getUserName(_24e3):"";return _24df.htmlEncode(name);}}});return _24e0;});},"Sage/MainView/GroupMgr/GroupManagerActions":function(){define(["dojo/_base/declare","dojo/_base/lang","Sage/UI/Dialogs","dojo/i18n!./nls/GroupManagerActions","dojo/string","dojo/_base/Deferred","Sage/Groups/GroupManager","Sage/Utility/Jobs","Sage/UI/SDataLookup","Sage/Data/SDataServiceRegistry","Sage/Services/RoleSecurityService"],function(_24e4,lang,_24e5,_24e6,_24e7,_24e8,_24e9,_24ea,_24eb,_24ec){Sage.namespace("Sage.MainView.GroupMgr.GroupManagerActions");dojo.mixin(Sage.MainView.GroupMgr.GroupManagerActions,{_currentUserId:false,DeleteKind:{Group:0,Release:1,Statistics:2},_batchDelete:function(_24ed,_24ee,_24ef,_24f0,_24f1){var _24f2=_24ec.getSDataService(_24ed,false,true,false);var _24f3=new Sage.SData.Client.SDataBatchRequest(_24f2);_24f3.setResourceKind(_24ee);_24f3.setQueryArg("_allowBasedOn","T");_24f3.using(function(){for(var i=0;i<_24f0.selections.length;i++){var _24f4=new Sage.SData.Client.SDataSingleResourceRequest(_24f2);_24f4.setResourceKind(_24ee);_24f4.setResourceSelector(_24e7.substitute("${0}'${1}'",[_24ef||"",_24f0.selections[i].id]));_24f4["delete"]({},{scope:this,ignoreETag:true});}});_24f3.commit({scope:this,ignoreETag:true,success:function(data){if(_24f1){_24f1.callback(data);}},failure:function(xhr,sdata){if(_24f1){_24f1.errback(xhr,sdata);}}});},_canModifyGroup:function(_24f5){if(_24f5&&_24f5.selectionCount>=1){var _24f6=_24f5.selections[0];if(_24f6.entity){if(_24f6.entity.basedOn&&_24f6.entity.basedOn!==""){_24e5.showInfo(_24e6.InvalidSelectedGroup);return false;}if(_24f6.entity.isDeveloperVersion===false){_24e5.showInfo(_24e6.NotDeveloperGroup);return false;}var _24f7=this._getCurrentUserId();if(_24f7&&_24f7.toUpperCase()!=="ADMIN"&&_24f6.entity.userId&&_24f7!==_24f6.entity.userId.toUpperCase()){_24e5.showInfo(_24e6.NotGroupOwner);return false;}return true;}}return false;},_delete:function(_24f8){var panel=dijit.byId("list");if(panel){var _24f9=panel.getSelectionInfo(true);if(_24f9&&_24f9.selectionCount>=1){var _24fa,_24fb,_24fc,_24fd,_24fe;switch(_24f8){case this.DeleteKind.Group:if(!this._canModifyGroup(_24f9)){return;}_24fa="system";_24fb="groups";_24fc=null;_24fd=_24e6.Delete;_24fe=_24e6.SelectedGroups;break;case this.DeleteKind.Release:_24fa="system";_24fb="groups";_24fc=null;_24fd=_24e6.Delete;_24fe=_24e6.SelectedReleases;break;case this.DeleteKind.Statistics:_24fa="dynamic";_24fb="groupStatistics";_24fc="PluginId eq ";_24fd=_24e6.Reset;_24fe=_24e6.SelectedStatistics;break;default:return;}var self=this;_24e5.raiseQueryDialog("Infor CRM",_24e7.substitute(_24e6.ConfirmDeletionMsg,[_24fd,_24fe]),function(_24ff){if(_24ff){var def=new _24e8();self._batchDelete(_24fa,_24fb,_24fc,_24f9,def);def.then(function(data){if(panel){panel.refreshView("groups");}},function(xhr,sdata){console.error("_batchDelete failed: xhr=%o; sdata=%o",xhr,sdata);});}},_24e6.Yes,_24e6.No);}else{_24e5.showInfo(_24e6.SelectRecordMsg);}}},_getSelectedId:function(){var _2500=Sage.Utility.getSelectionInfo();if(_2500){if(_2500.selectedIds.length===1){return _2500.selectedIds[0];}}return null;},_getCurrentGroupId:function(){var svc=Sage.Services.getService("ClientGroupContext");var _2501=svc.getContext();return _2501.CurrentGroupID;},_getCurrentUserId:function(){if(this._currentUserId){return this._currentUserId;}var _2502=Sage.Services.getService("ClientContextService");if(_2502&&_2502.containsKey("userID")){var _2503=_2502.getValue("userID");if(_2503){this._currentUserId=_2503.trim();}}return this._currentUserId;},_assignOwner:function(_2504,_2505){var _2506=_24ec.getSDataService("system");var _2507=new Sage.SData.Client.SDataServiceOperationRequest(_2506);var _2508="assignOwner";_2507.setResourceKind("groups");_2507.setOperationName(_2508);var entry={"$name":_2508,request:{userId:_2504,groupIds:_2505.selectedIds}};_2507.execute(entry,{success:function(data){var panel=dijit.byId("list");if(panel){panel.refreshView("groups");}},failure:function(xhr,sdata){console.error(xhr);},scope:this});},assignGroupOwner:function(){var panel=dijit.byId("list");if(panel){var _2509=panel.getSelectionInfo(true);if(_2509&&_2509.selectionCount>=1){if(!this._canModifyGroup(_2509)){return;}var _250a=_2509.selections[0];if(_250a.entity){var _250b;var _250c={id:"UserLookup",structure:[{cells:[{name:_24e6.FirstName,field:"UserInfo.FirstName",sortable:true,width:"150px",editable:false,propertyType:"System.String",excludeFromFilters:false,defaultValue:""},{name:_24e6.LastName,field:"UserInfo.LastName",sortable:true,width:"150px",editable:false,propertyType:"System.String",excludeFromFilters:false,defaultValue:""},{name:_24e6.UserName,field:"UserName",sortable:true,width:"75px",editable:false,propertyType:"System.String",excludeFromFilters:false,defaultValue:""},{name:_24e6.Type,field:"Type",sortable:true,width:"100px",editable:false,propertyType:"System.String",excludeFromFilters:false,defaultValue:""}]}],gridOptions:{contextualCondition:function(){return "Type ne 5 and Type ne 6";},contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"users",include:["UserInfo"],sort:[{attribute:"UserInfo.UserName"}]},isModal:true,preFilters:[],returnPrimaryKey:true,dialogTitle:_24e6.SelectOwner,dialogButtonText:_24e6.OK};var self=this;var _250d=function(items){_250b.destroy();if(dojo.isArray(items)){self._assignOwner(items[0].$key,_2509);}};var _250e=function(){_250b.destroy();};_250b=dijit.byId("UserLookup");if(_250b){_250b.destroyRecursive();}_250b=new _24eb(_250c);_250b.onDoubleClick=function(e){dojo.stopEvent(e);var btnOk=dijit.byId("UserLookup-GridSelectButton");if(btnOk){btnOk.onClick();}};_250b.doSelected=function(items){dojo.disconnect(_250f);_250d(items);if(dojo.isObject(_250b.lookupDialog)&&dojo.isFunction(_250b.lookupDialog.hide)){_250b.lookupDialog.hide();}_250b.destroy();};_250b.showLookup();var _250f=dojo.connect(_250b.lookupDialog,"onHide",function(){dojo.disconnect(_250f);_250e();_250b.destroy();});}}else{_24e5.showInfo(_24e6.SelectRecordMsg);}}},deleteGroup:function(){this._delete(this.DeleteKind.Group);},deleteReleases:function(){this._delete(this.DeleteKind.Release);},deleteStatistics:function(){this._delete(this.DeleteKind.Statistics);},disableStatistics:function(){_24e5.showInfo("Not implemented.");},editGroup:function(){var panel=dijit.byId("list");if(panel){var _2510=panel.getSelectionInfo(true);if(_2510&&_2510.selectionCount==1){if(!this._canModifyGroup(_2510)){return;}var url=_24e7.substitute("QueryBuilderMain.aspx?gid=${groupid}&mode=${family}",{groupid:_2510.selections[0].id,family:_2510.selections[0].entity.family});var width=Sage.Groups.GroupManager.QB_WIDTH;var _2511=Sage.Groups.GroupManager.QB_HEIGHT;window.open(url,"EditGroup",_24e7.substitute("resizable=yes,centerscreen=yes,width=${width},height=${height},status=no,toolbar=no,scrollbars=yes",{width:width,height:_2511}));}else{_24e5.showInfo(_24e6.SelectRecordMsgSingle);}}},exportToExcel:function(){_24e5.showInfo("Not implemented.");},exportToPdf:function(){_24e5.showInfo("Not implemented.");},initShowHideDetail:function(owner){var _2512=dijit.byId("list");if(_2512){var _2513=dojo.connect(_2512._listGrid,"_onFetchComplete",_2512,lang.hitch(_2512,function(){dojo.disconnect(_2513);var _2514=owner._getShowDetail();if(_2514==="true"){if(!_2512.detailVisible){_2512.toggleDetail();}_2512._onSelectedInList(0);}else{if(_2512.detailVisible){_2512.toggleDetail();}}}));}},shareGroup:function(){var panel=dijit.byId("list");if(panel){var _2515=panel.getSelectionInfo(true);if(_2515&&_2515.selectionCount==1){if(!this._canModifyGroup(_2515)){return;}var url=_24e7.substitute("ShareGroup.aspx?gid=${groupid}",{groupid:_2515.selections[0].id});window.open(url,"ShareGroup","resizable=yes,centerscreen=yes,width=500,height=450,status=no,toolbar=no,scrollbars=yes");}else{_24e5.showInfo(_24e6.SelectRecordMsgSingle);}}},viewGroup:function(){var panel=dijit.byId("list");if(panel){var _2516=panel.getSelectionInfo(true);if(_2516&&_2516.selectionCount==1){window.location.href=_24e7.substitute("${mainTable}.aspx?gid=${groupid}&mode=list",{mainTable:_2516.selections[0].entity.entityName,groupid:_2516.selections[0].id});}else{_24e5.showInfo(_24e6.SelectRecordMsgSingle);}}}});return Sage.MainView.GroupMgr.GroupManagerActions;});},"Sage/MainView/GroupMgr/GroupManagerFormatter":function(){define(["Sage/Utility","dojo/date/locale","dojo/i18n!./nls/GroupManagerFormatter"],function(_2517,_2518,_2519){Sage.namespace("Sage.MainView.GroupMgr.GroupManagerFormatter");dojo.mixin(Sage.MainView.GroupMgr.GroupManagerFormatter,{_isNumeric:function(value){return !isNaN(parseFloat(value))&&isFinite(value);},formatLegacyType:function(value){if(value&&Sage.MainView.GroupMgr.GroupManagerFormatter._isNumeric(value)){switch(value){case 8:return _2519.ACOGroup;case 23:return _2519.Group;}}return _2519.Unknown;},formatDate:function(value){if(_2517.Convert.isDateString(value)){var date=_2517.Convert.toDateFromString(value);return _2518.format(date,{selector:"datetime",fullYear:true});}return "";},formatBoolean:function(value){return (value&&(value===true||value==="True"))?_2519.Yes:_2519.No;},formatGetUserById:function(item){if(!item){return "";}else{return _2517.getUserName(item);}},formatProperCase:function(value){if(typeof value==="string"){return value.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase();});}else{return "";}},formatOwnerName:function(value){if(value){var owner=_2517.getOwnerName(value);if(owner!==value){return _2517.htmlEncode(owner);}var user=_2517.getUserName(value);return user?_2517.htmlEncode(user):value;}return value;},formatInteger:function(value){if(!value||isNaN(value)){return 0;}return value;}});return Sage.MainView.GroupMgr.GroupManagerFormatter;});},"Sage/MainView/GroupMgr/ReleasesListPanelConfig":function(){define(["Sage/MainView/_BaseListPanelConfig","Sage/MainView/GroupMgr/GroupsSDataSummaryFormatterScope","dojo/_base/declare","dojo/i18n!./nls/ReleasesListPanelConfig","Sage/Data/SDataServiceRegistry","Sage/UI/Columns/Boolean","Sage/UI/Columns/DateTime","Sage/UI/Columns/Numeric","Sage/UI/Columns/SlxUser","dojo/_base/lang","Sage/MainView/GroupMgr/GroupManagerActions","Sage/MainView/GroupMgr/GroupManagerFormatter","dojo/i18n!./templates/nls/ReleasesListSummary","dojo/i18n!./templates/nls/ReleasesDetailSummary"],function(_251a,_251b,_251c,_251d,_251e,_251f,_2520,_2521,_2522,_2523,_2524,_2525){var _2526=_251c("Sage.MainView.GroupMgr.ReleasesListPanelConfig",[_251a],{keyField:"$key",_listId:"releases",_resourceKind:"groupReleasesView",_contextMenu:"GroupManagerListContextMenu",_currentListContextSubMenu:"SharesListContextMenu",constructor:function(){this.inherited(arguments);_2523.mixin(this,_251d);this.detailStateKey="GroupMgrShowDetail";this._service=_251e.getSDataService("dynamic");this._structure=this._getStructure();this._select=this._getSelect();this._where=this._getWhere();this._sort=this._getSort();this._include=this._getInclude();this._store=this._getStore();this.list=this._getListConfig();this.detail=this._getDetailConfig();this.toolBar=this._getToolBars();this.list.selectionMode="multiple";_2524.initShowHideDetail(this);},_getShowDetail:function(){if(this.detailStateKey){var value=sessionStorage.getItem(this.detailStateKey);if(value===null){return "true";}return value;}return "true";},_getStructure:function(){return [{field:"Family",name:_251d.Family,width:"50px",formatter:_2525.formatProperCase},{field:"Name",name:_251d.Name,width:"100px"},{field:"DisplayName",name:_251d.DisplayName,width:"100px"},{field:"CreateDate",name:_251d.CreateDate,width:"75px",type:_2520},{field:"ModifyDate",name:_251d.ModifyDate,width:"75px",type:_2520},{field:"ReleasedDate",name:_251d.SharedDate,width:"75px",type:_2520},{field:"ReleasedTo",name:_251d.SharedToName,width:"50px"},{field:"ReleasedToType",name:_251d.SharedToType,width:"50px"},{field:"UserType",name:_251d.UserType,width:"50px"},{field:"Company",name:_251d.Company,width:"50px"},{field:"CompanyVersion",name:_251d.Version,width:"50px",type:_2521},{field:"BasedOn",name:_251d.BasedOn,width:"60px"},{field:"IsDeveloperVersion",name:_251d.Dev,width:"30px",type:_251f}];},_getSelect:function(){return ["Family","Name","BasedOn","DisplayName","CreateDate","ModifyDate","ReleasedDate","ReleasedToType","ReleasedTo","Company","CompanyVersion","ReleasedTo","DataCode","UserType","IsDeveloperVersion"];},_getWhere:function(){return "";},_getSort:function(){var sort=[{attribute:"Family",descending:false},{attribute:"DisplayName",descending:false},{attribute:"Name",descending:false}];return sort;},_getInclude:function(){var _2527=[];return _2527;},_getSummaryListRequestConfig:function(){var _2528={resourceKind:this._resourceKind,serviceName:"dynamic",keyField:"$key",select:["DisplayName","CreateUser","CreateDate","ModifyUser","ModifyDate","Name"],include:[],sort:this._getSort(),useBatchRequest:false};return _2528;},_getFormatterScope:function(){var _2529=this._getSummaryListRequestConfig();var _252a=new _251b({templateLocation:"MainView/GroupMgr/templates/ReleasesListSummary.html",resetDataManager:true,requestConfiguration:_2529,serviceName:"dynamic"});return _252a;},_getSummaryDetailRequestConfig:function(){var _252b={resourceKind:this._resourceKind,serviceName:"dynamic",keyField:"$key",select:["Family","DisplayName","CreateDate","CreateUser","ModifyDate","ModifyUser","Company","CompanyVersion","OwnerId","DataCode","IsAdHoc","Description"],include:[],useBatchRequest:false};return _252b;},_getDetailConfig:function(){var _252c=this._getFormatterScope();var _252d=this._getSummaryDetailRequestConfig();var _252e={resourceKind:this._resourceKind,requestConfiguration:_252d,templateLocation:"MainView/GroupMgr/templates/ReleasesDetailSummary.html",serviceName:"dynamic"};return _252e;},_getToolBars:function(){var _252f={items:[]};return _252f;}});return _2526;});},"Sage/MainView/GroupMgr/StatisticsListPanelConfig":function(){define(["Sage/MainView/_BaseListPanelConfig","Sage/MainView/GroupMgr/GroupsSDataSummaryFormatterScope","dojo/_base/declare","dojo/i18n!./nls/StatisticsListPanelConfig","Sage/Data/SDataServiceRegistry","Sage/UI/Columns/Boolean","Sage/UI/Columns/DateTime","Sage/UI/Columns/Numeric","Sage/UI/Columns/Owner","Sage/UI/Columns/SlxUser","dojo/_base/lang","Sage/MainView/GroupMgr/GroupManagerActions","Sage/MainView/GroupMgr/GroupManagerFormatter","dojo/i18n!./templates/nls/StatisticsListSummary","dojo/i18n!./templates/nls/StatisticsDetailSummary"],function(_2530,_2531,_2532,_2533,_2534,_2535,_2536,_2537,_2538,_2539,_253a,_253b,_253c){var _253d=_2532("Sage.MainView.GroupMgr.StatisticsListPanelConfig",[_2530],{keyField:"$key",_listId:"statistics",_resourceKind:"groupStatisticsView",_contextMenu:"GroupManagerListContextMenu",_currentListContextSubMenu:"SharesListContextMenu",constructor:function(){this.inherited(arguments);_253a.mixin(this,_2533);this.detailStateKey="GroupMgrShowDetail";this._service=_2534.getSDataService("dynamic");this._structure=this._getStructure();this._select=this._getSelect();this._where=this._getWhere();this._sort=this._getSort();this._include=this._getInclude();this._store=this._getStore();this.list=this._getListConfig();this.detail=this._getDetailConfig();this.toolBar=this._getToolBars();this.list.selectionMode="multiple";_253b.initShowHideDetail(this);},_getShowDetail:function(){if(this.detailStateKey){var value=sessionStorage.getItem(this.detailStateKey);if(value===null){return "true";}return value;}return "true";},_getStructure:function(){return [{field:"Family",name:_2533.Family,width:"50px",formatter:_253c.formatProperCase},{field:"Name",name:_2533.Name,width:"100px"},{field:"DisplayName",name:_2533.DisplayName,width:"100px"},{field:"UserId",name:_2533.Owner,width:"50px",type:_2538},{field:"OwnerUsageCount",name:_2533.OwnerUsage,width:"50px",type:_2537},{field:"ReleaseUsageCount",name:_2533.ShareUsage,width:"50px",type:_2537},{field:"ReleasedDate",name:_2533.SharedDate,width:"75px",type:_2536},{field:"FirstUser",name:_2533.FirstUsedBy,width:"50px",type:_2539},{field:"FirstUseDate",name:_2533.FirstUsed,width:"75px",type:_2536},{field:"LastUser",name:_2533.LastUsedBy,width:"50px",type:_2539},{field:"LastUseDate",name:_2533.LastUsed,width:"75px",type:_2536},{field:"Development",name:_2533.Dev,width:"30px",type:_2535},{field:"Released",name:_2533.Rel,width:"30px",type:_2535}];},_getSelect:function(){return ["Family","Name","UserId","OwnerUsageCount","ReleaseUsageCount","Development","Released","ReleasedDate","DataCode","Description","DisplayName","FirstUser","FirstUseDate","LastUser","LastUseDate","CreateDate"];},_getWhere:function(){return "";},_getSort:function(){var sort=[{attribute:"Development",descending:false},{attribute:"Family",descending:false},{attribute:"DisplayName",descending:false},{attribute:"Name",descending:false}];return sort;},_getInclude:function(){var _253e=[];return _253e;},_getSummaryListRequestConfig:function(){var _253f={resourceKind:this._resourceKind,serviceName:"dynamic",keyField:"$key",select:["Family","Name","Type","UserId","OwnerUsageCount","ReleaseUsageCount","Development","Released","ReleasedDate","DataCode","Description","DisplayName","FirstUser","FirstUseDate","LastUser","LastUseDate","CreateDate"],include:[],sort:this._getSort(),useBatchRequest:false};return _253f;},_getFormatterScope:function(){var _2540=this._getSummaryListRequestConfig();var _2541=new _2531({templateLocation:"MainView/GroupMgr/templates/StatisticsListSummary.html",resetDataManager:true,requestConfiguration:_2540,serviceName:"dynamic"});return _2541;},_getSummaryDetailRequestConfig:function(){var _2542={resourceKind:this._resourceKind,serviceName:"dynamic",keyField:"$key",select:["Family","Name","Type","UserId","OwnerUsageCount","ReleaseUsageCount","Development","Released","ReleasedDate","DataCode","Description","DisplayName","FirstUser","FirstUseDate","LastUser","LastUseDate","CreateDate"],include:[],useBatchRequest:false};return _2542;},_getDetailConfig:function(){var _2543=this._getFormatterScope();var _2544=this._getSummaryDetailRequestConfig();var _2545={resourceKind:this._resourceKind,requestConfiguration:_2544,templateLocation:"MainView/GroupMgr/templates/StatisticsDetailSummary.html",serviceName:"dynamic"};return _2545;},_getToolBars:function(){var _2546={items:[]};return _2546;}});return _253d;});},"Sage/UI/Columns/Owner":function(){define(["dojo/_base/declare","Sage/Utility"],function(_2547,_2548){var _2549=_2547("Sage.UI.Columns.Owner",dojox.grid.cells.Cell,{formatter:function(value,idx){if(value){var owner=_2548.getOwnerName(value);if(owner!==value){return _2548.htmlEncode(owner);}var user=_2548.getUserName(value);return user?_2548.htmlEncode(user):value;}return value;}});return _2549;});},"Sage/MainView/GroupMgr/FilterConfigurationProvider":function(){define(["Sage/Services/_ServiceMixin","Sage/_ConfigurationProvider","Sage/MainView/GroupMgr/GroupManagerGroupContextService","Sage/MainView/GroupMgr/GroupManagerFormatter","dijit/registry","dojo/_base/declare","Sage/Utility/Filters","dojo/_base/lang","dojo/json"],function(_254a,_254b,_254c,_254d,_254e,_254f,_2550,lang,json){var _2551=_254f("Sage.MainView.GroupMgr.FilterConfigurationProvider",[_254b,_254a],{_configuration:null,_hasLayoutConfiguration:false,_hasFilterHiddenConfiguration:false,_currentUserId:false,serviceMap:{"groupContextService":"ClientGroupContext","metaDataService":{type:"sdata",name:"metadata"},"systemDataService":{type:"sdata",name:"system"}},constructor:function(_2552){this.inherited(arguments);if(this.groupContextService.declaredClass!=="Sage.MainView.GroupMgr.GroupManagerGroupContextService"){Sage.Services.removeService("ClientGroupContext");this.groupContextService=new _254c();Sage.Services.addService("ClientGroupContext",this.groupContextService);}this._subscribes.push(dojo.subscribe("/group/context/changed",this,this._onGroupContextChanged));},requestConfiguration:function(_2553){this._configuration={};this._hasLayoutConfiguration=false;this._hasFilterHiddenConfiguration=false;this._onRequestConfigurationSuccess(_2553,null);this._getHiddenFilters(_2553);},onConfigurationChange:function(){},getFilterFormatter:function(_2554){if(_2554){if(_2554.filterName==="Owner"&&_2554.$key==="4493728e-4874-49ce-8b92-fa73eb0ce19e"){return _254d.formatOwnerName;}if((_2554.filterName==="Dev"&&(_2554.$key==="88834cef-0de9-4eeb-b3e1-a88df70a9801"||_2554.$key==="1771b223-501f-4002-99f4-bba7ea0fb381"))||(_2554.filterName==="Released"&&_2554.$key==="d5b8084e-8758-4921-999a-018b7283becb")||(_2554.filterName==="Adhoc"&&_2554.$key==="89c6c3b2-7c94-45d8-a5e2-35931d70d236")||(_2554.filterName==="Shared"&&_2554.$key==="e6d6c56c-b861-4b52-9b70-9446d0a2f483")){return _254d.formatBoolean;}}return false;},_onGroupContextChanged:function(){this.onConfigurationChange();},_createConfiguration:function(entry,_2555){var _2556=this.groupContextService.getCurrentListConfig();if(this.groupContextService._currentContext.isNonEntityBased){this._configuration=_2556.getNonEntityBasedFilterConfig(_2555);}else{this._configuration=_2556.getFilterConfig(this.metaDataService,entry,_2555);}if(!this._configuration){this._configuration={};}this._configuration.getFilterManager=function(){var _2557=_254e.byId("list");return _2557&&_2557.get("filterManager");};this._hasLayoutConfiguration=true;},_onRequestConfigurationSuccess:function(_2558,entry){this._createConfiguration(entry,_2558);this._callOptionsSuccess(_2558);},_onRequestConfigurationFailure:function(_2559,_255a){if(_2559.failure){_2559.failure.call(_2559.scope||this,_255a,_2559,this);}},_getHiddenFilters:function(_255b){var key=this._getHiddenFiltersKey();if(key){_2550.getHiddenFilters(key,lang.hitch(this,this._onHiddenFiltersFetchComplete,_255b||{}),function(err){console.error(err);});}},_getHiddenFiltersKey:function(){var key=_2550.getHiddenFiltersKey();return key;},_onHiddenFiltersFetchComplete:function(_255c,_255d){if(_255d&&_255d.response&&_255d.response.value){this._configuration._hiddenFilters=json.parse(_255d.response.value);if(this._configuration._hiddenFilters&&this._configuration._hiddenFilters.constructor===Array){this._configuration._hiddenFilters={};}}this._configuration._hiddenFiltersKey=this._getHiddenFiltersKey();this._hasFilterHiddenConfiguration=true;this._callOptionsSuccess(_255c);},_callOptionsSuccess:function(_255e){if(!this._hasLayoutConfiguration||!this._hasFilterHiddenConfiguration){return;}if(_255e.success){_255e.success.call(_255e.scope||this,this._configuration,_255e,this);this._hasLayoutConfiguration=false;this._hasFilterHiddenConfiguration=false;}}});return _2551;});},"Sage/MainView/IntegrationContract/SyncResultsHistory":function(){define(["dojo/_base/declare","dojo/i18n!./nls/SyncResultsHistory","dijit/_Widget","Sage/UI/SLXPreviewGrid","Sage/UI/Columns/DateTime","Sage/UI/DateTextBox","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","Sage/Utility/Workspace"],function(_255f,_2560,_2561,_2562,_2563,_2564,_2565,lang,_2566){var _2567=_255f("Sage.MainView.IntegrationContract.SyncResultsHistory",[_2561],{workspace:"",tabId:"",grid:"",globalSyncId:"",constructor:function(){dojo.mixin(this,_2560);},loadSyncResults:function(){var self=this;var _2568={readOnly:true,rowsPerPage:20,slxContext:{workspace:this.workspace,tabId:this.tabId},columns:[{width:10,field:"Stamp",type:_2563,formatType:"date/time",name:this.grdSyncHistory_StampDate,sortable:true,style:"text-align:left;width:auto;",editable:false},{width:10,field:"HttpStatus",name:this.grdSyncHistory_Status,sortable:true,style:"text-align:left;width:auto;",editable:false},{width:10,field:"ErrorMessage",name:this.grdSyncHistory_SyncNote,sortable:true,style:"text-align:left;width:auto;",editable:false,hidden:function(){return true;}}],storeOptions:{resourceKind:"syncResults",include:[],select:[],},contextualCondition:function(){return dojo.string.substitute("$uuid eq '${0}'",[self.globalSyncId]);},tools:[]};var _2569=new _2562.Grid(_2568,this.placeHolder);_2569.startup();var _256a=_2566.getDetailTabWorkspaceContainer();_256a.resize();_256a.resize();this.grid=_2569;}});return _2567;});},"Sage/MainView/Lead/ImportLeadsWizard":function(){define(["dojo/_base/declare","dojo/i18n!./nls/ImportLeadsWizard","dijit/_Widget","Sage/_Templated","Sage/UI/Dialogs","dojo/text!./templates/ImportLeadsProgressDisplay.html","dijit/ProgressBar","dojo/string","dijit/form/Form","dijit/layout/ContentPane","dojox/layout/TableContainer"],function(_256b,_256c,_256d,_256e,_256f,_2570,_2571,_2572){var _2573=_256b("Sage.MainView.Lead.ImportLeadsWizard",[_256d,_256e],{importHistoryId:"",startProcessCtrlId:"",isActualImport:true,widgetsInTemplate:true,progressBar:"",secondaryProgressBar:null,secondaryProgressCounter:0,widgetTemplate:new Simplate(eval(_2570)),constructor:function(){dojo.mixin(this,_256c);},onAddHocGroupChecked:function(_2574,_2575){var _2576=dojo.byId(_2575);if(_2576){var value=_2576.checked;var _2577=dojo.byId(_2574);if(value){dojo.style(_2577,"display","");}else{dojo.style(_2577,"display","none");}}},onGridViewRowSelected:function(_2578,_2579,_257a){var _257b=dojo.byId(_2579);var _257c=dojo.byId(_257a);var _257d=this.getSelectedRow(_257c.value,_257b);if(_257d){_257d.style.backgroundColor="#ffffff";}_257d=this.getSelectedRow(_2578,_257b);if(null!==_257d){_257c.value=_2578;_257d.style.backgroundColor="#E3F2FF";}},getSelectedRow:function(_257e,_257f){if(_257f){return _257f.rows[_257e];}return null;},enableDisableControl:function(_2580,value){if(_2580){_2580.disabled=value;}},showImportProcess:function(_2581){this.isActualImport=true;this.startProcessCtrlId=_2581;this.showProcess();},showTestImportProcess:function(_2582){this.isActualImport=false;this.startProcessCtrlId=_2582;this.showProcess();},showProcess:function(){this.clearResults();this._dialog.show();var self=this;setTimeout(function(){self.getImportHistory();},1000);},setDisplayProperty:function(_2583,_2584){if(_2583&&_2584){dojo.removeClass(_2583,"display-none");}else{if(_2583){dojo.addClass(_2583,"display-none");}}},getImportHistory:function(){if(this.importHistoryId===""){this.invokeClickEvent(dojo.byId(this.startProcessCtrlId));var _2585=Sage.Services.getService("ClientContextService");if((_2585)&&(_2585.containsKey("ImportHistoryId"))){this.importHistoryId=_2585.getValue("ImportHistoryId");}}if(this.importHistoryId!==""){var _2586="select=ImportNumber,Status,RecordCount,ProcessedCount,DuplicateCount,ImportedCount,MergeCount,ErrorCount,WarningCount";var self=this;var sUrl=_2572.substitute("slxdata.ashx/slx/dynamic/-/importHistory('${0}')?${1}&format=json",[this.importHistoryId,_2586]);dojo.xhrGet({cache:false,preventCache:true,handleAs:"json",url:sUrl,load:function(_2587){self.updateProgress(_2587);},data:{},error:function(_2588,_2589,error){_256f.showError(this.errorRequestImportHistory);}});}},updateProgress:function(_258a){var self,_258b,_258c,_258d,_258e;if(_258a!==null){self=this;this.totalRecordCount.set("value",_258a.RecordCount);if(_258a.ProcessedCount>0){this.processedCount.set("value",_258a.ProcessedCount);this.duplicateCount.set("value",_258a.DuplicateCount);this.importedCount.set("value",_258a.ImportedCount);this.mergedCount.set("value",_258a.MergeCount);if(_258a.ProcessedCount>0){_258c=_258a.DuplicateCount/_258a.ProcessedCount;}else{_258c=0;}_258d=(_258c*_258a.RecordCount);this.projectedDuplicateCount.set("value",_258d);this.duplicateRate.focusNode.set("value",_258c);this.errorCount.set("value",_258a.ErrorCount);if(!this.progressBar){this.setDisplayProperty(this.lblProcessingLabelContainer,false);this.progressBar=new _2571({id:"importPrimaryProgressBar",maximum:_258a.RecordCount});dojo.place(this.progressBar.domNode,this.importPrimaryProgressBarContainer,"only");this.importHistoryLink.href=_2572.substitute("ImportHistory.aspx?entityid=${0}&modeid=Detail",[this.importHistoryId]);this.importHistoryLink.innerHTML=_258a.ImportNumber;this.setDisplayProperty(this.importHistoryLinkContainer,this.isActualImport);}if(!this.secondaryProgressBar){this.secondaryProgressBar=new _2571({id:"secondaryImportProgressBar",maximum:10});dojo.place(this.secondaryProgressBar.domNode,this.importSecondaryProgressBarContainer,"only");this.secondaryProgressBar.set("label","");}if(_258a.RecordCount>0){_258b=((this.processedCount.value/_258a.RecordCount)*100);}else{_258b=100;}if(this.secondaryProgressCounter<10){this.secondaryProgressCounter++;}else{this.secondaryProgressCounter=0;}this.progressBar.set("value",_258a.ProcessedCount);this.secondaryProgressBar.set("value",this.secondaryProgressCounter);this.secondaryProgressBar.set("label",this.importStatusProcessing);}if(_258a.Status===this.importStatusProcessing){_258e=500;if(_258a.RecordCount>100){_258e=1000;}setTimeout(function(){self.getImportHistory();},_258e);}else{if(_258a.Status===this.importStatusCompleted){this.progressBar.set("value",this.progressBar.maximum);this.secondaryProgressBar.set("value",this.secondaryProgressBar.maximum);this.setDisplayProperty(this.secondaryProgressBar,false);this.secondaryProgressBar.set("label",this.importStatusCompleted);this.setDisplayProperty(this.btn_Cancel.domNode,false);if(!this.isActualImport){this.deleteImportHistory();}}}}},deleteImportHistory:function(){var sUrl=_2572.substitute("slxdata.ashx/slx/dynamic/-/importHistory('${0}')",[this.importHistoryId]);dojo.xhrDelete({handleAs:"json",url:sUrl,error:function(_258f,_2590,error){}});},invokeClickEvent:function(_2591){if(dojo.isIE){_2591.click();}else{var e=document.createEvent("MouseEvents");e.initEvent("click",true,true);_2591.dispatchEvent(e);}},clearResults:function(){this.setDisplayProperty(this.btn_Cancel.domNode,this.isActualImport);this.setDisplayProperty(this.importHistoryLinkContainer,false);this.totalRecordCount.set("value",this.calculatingText);this.processedCount.set("value",this.calculatingText);this.importedCount.set("value",this.calculatingText);this.mergedCount.set("value",this.calculatingText);this.duplicateCount.set("value",this.calculatingText);this.projectedDuplicateCount.set("value",this.calculatingText);this.duplicateRate.focusNode.set("value",0);this.duplicateCount.set("value",this.calculatingText);this.errorCount.set("value",this.calculatingText);},_cancel:function(){this.abortImport();this._close();},abortImport:function(){var _2592=Sage.Data.SDataServiceRegistry.getSDataService("dynamic",false,true,true);var _2593=new Sage.SData.Client.SDataSingleResourceRequest(_2592);if(this.importHistoryId!==""){_2593.setResourceSelector(dojo.string.substitute("'${0}'",[this.importHistoryId]));_2593.setResourceKind("importHistory");var _2594=this.abortImportProcessStatus;_2593.update({Status:_2594,ProcessState:_2594},{scope:this,success:function(_2595){},failure:function(_2596){}});}},_close:function(){this._dialog.hide();if(this.progressBar){this.progressBar.destroy();}if(this.secondaryProgressBar){this.secondaryProgressBar.destroy();}}});return _2573;});},"Sage/QuickForms/Design/main":function(){define(["Sage/QuickForms/Design/CheckBoxControlDesigner","Sage/QuickForms/Design/ColumnDesigner","Sage/QuickForms/Design/ComboBoxControlDesigner","Sage/QuickForms/Design/ControlDesigner","Sage/QuickForms/Design/ControlDesignerRegistry","Sage/QuickForms/Design/CurrencyControlDesigner","Sage/QuickForms/Design/DataGridControlDesigner","Sage/QuickForms/Design/DataSourceDesigner","Sage/QuickForms/Design/DataSourcePanel","Sage/QuickForms/Design/DateTimePickerControlDesigner","Sage/QuickForms/Design/DesignPanel","Sage/QuickForms/Design/DesignSurface","Sage/QuickForms/Design/EmailControlDesigner","Sage/QuickForms/Design/FormDesigner","Sage/QuickForms/Design/GenericControlDesigner","Sage/QuickForms/Design/Help","Sage/QuickForms/Design/HiddenControlDesigner","Sage/QuickForms/Design/NonVisibleControlContainer","Sage/QuickForms/Design/NumericControlDesigner","Sage/QuickForms/Design/OwnerControlDesigner","Sage/QuickForms/Design/PhoneControlDesigner","Sage/QuickForms/Design/PickListControlDesigner","Sage/QuickForms/Design/PropertyEditorContainer","Sage/QuickForms/Design/PropertyValueError","Sage/QuickForms/Design/RowDesigner","Sage/QuickForms/Design/TextBoxControlDesigner","Sage/QuickForms/Design/UrlControlDesigner","Sage/QuickForms/Design/UserControlDesigner","Sage/QuickForms/Design/EditableGridControlDesigner"],function(){});},"Sage/QuickForms/Design/DataSourcePanel":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","dojo/string","dojo/dom","dojo/on","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/DeferredList","dijit/_Widget","Sage/Services/_ServiceMixin","Sage/_EventMapMixin","Sage/_Templated","dojo/dnd/Source","dojo/dnd/Manager","dojo/i18n!./nls/DataSourcePanel"],function(_2597,array,lang,_2598,_2599,dom,on,_259a,_259b,_259c,_259d,_259e,_259f,_25a0,_25a1,_25a2,_25a3,_25a4){var _25a5=_2597("Sage.QuickForms.Design.DataSourcePanelDnDSource",[_25a2],{avatarTemplate:new Simplate(["<div class=\"design-property\" data-property-type=\"{%: $.data.dataTypeId %}\">","<div class=\"design-property-icon\"></div>","<span>{%: $.propertyPath %}</span>","</div>"]),owner:null,accept:["none"],constructor:function(){this.creator=true;lang.mixin(this,_25a4);var _25a6=dojo.byId("TaskPane_taskPaneHelp");if(_25a6){_25a6.target="";_25a6.href="javascript:Sage.Utility.openHelp(\"Adding_Data_Field\");";}},checkAcceptance:function(_25a7,nodes){if(_25a7==this){return false;}return this.inherited(arguments);},onDropInternal:function(_25a8,nodes,copy){},onDropExternal:function(_25a9,nodes,copy){},onDndStart:function(_25aa,nodes,copy){this.inherited(arguments);},onDndCancel:function(){this.inherited(arguments);},getItem:function(key){var value=this.inherited(arguments),node=dom.byId(key),path=_259a.get(node,"data-property"),_25ab=node&&this.owner._context[path];return lang.mixin({context:_25ab},value);},_normalizedCreator:function(data,hint){var _25ac=this.owner._context[data],_25ad=_259c.toDom(this.avatarTemplate.apply(_25ac,this)),_25ae=_259c.create("div",{"class":"design-surface-dnd-avatar"});_259c.place(_25ad,_25ae);return {node:_25ae};}});var _25af=_2597("Sage.QuickForms.Design.DataSourcePanel",[_259e,_259f,_25a0,_25a1],{events:{"li:click":true},serviceMap:{"dataService":{type:"sdata",name:"metadata"}},widgetsInTemplate:true,widgetTemplate:new Simplate(["<div class=\"design-property-panel\">","<div class=\"design-property-panel-search\">","<div>","<input type=\"text\" data-dojo-attach-point=\"queryNode\" />","</div>","<input type=\"button\" />","</div>","<div class=\"design-property-panel-tree\" data-dojo-attach-point=\"treeNode\">","</div>","</div>"]),containerTemplate:new Simplate(["<ul></ul>"]),propertyTemplate:new Simplate(["<li class=\"design-property\" data-property=\"{%: $.propertyPath %}\" data-property-category=\"{%: $.type %}\" data-property-type=\"{%: $.data.dataTypeId %}\" data-action=\"_toggle\">","<div class=\"design-property-expando\"></div>","<div class=\"design-property-icon\"></div>","<span>{%: $.displayName %}</span>","</li>"]),loadingTemplate:new Simplate(["<ul class=\"design-property-loading\"><li>{%: $.loadingText %}</li></ul>"]),_context:null,_designGroup:null,_designGroupTopics:null,designGroup:"default",queryNode:null,treeNode:null,sortProperty:"propertyName",loadingText:"Loading...",_getDesignGroupAttr:function(){return this._designGroup;},_setDesignGroupAttr:function(value){if(this._designGroupTopics){array.forEach(this._designGroupTopics,function(topic){this.unsubscribe(topic);},this);}this._designGroup=value;this._designGroupTopics=[this.subscribe(_2599.substitute("/quickforms/design/${0}/clear",[this._designGroup]),this._onFormCleared),this.subscribe(_2599.substitute("/quickforms/design/${0}/load",[this._designGroup]),this._onFormLoaded)];},constructor:function(){this._context={};this._sources=[];},uninitialize:function(){if(this._sources){array.forEach(this._sources,function(_25b0){_25b0.destroy();});}this._sources=[];},clear:function(){_259c.empty(this.treeNode);this._context={};},_onFormCleared:function(){this.clear();},_onFormLoaded:function(entry){var _25b1=entry["entity"]["EntityTypeName"].substr(1);this._load(_25b1,this.treeNode);},_toggle:function(evt,node){var path=_259a.get(node,"data-property"),_25b2=this._context[path];if(_25b2&&_25b2.data["entityName"]){if(_25b2["loaded"]){_259b.toggle(node,"design-property-expanded");}else{_259b.add(node,"design-property-expanded");_25b2["loaded"]=true;this._load(_25b2.data["entityName"],node);}}},_load:function(_25b3,node){var _25b4=_259c.place(this.loadingTemplate.apply(this,this),node);var wait=[],_25b5;_25b5=new _2598();new Sage.SData.Client.SDataSingleResourceRequest(this.dataService).setResourceKind("entities").setResourceSelector("\""+_25b3+"\"").setQueryArg("select","properties/*").read({success:lang.hitch(this,this._onPropertyRequestSuccess,_25b5,_25b3),failure:lang.hitch(this,this._onRequestFailure,_25b5)});wait.push(_25b5);_25b5=new _2598();new Sage.SData.Client.SDataResourceCollectionRequest(this.dataService).setResourceKind("relationships").setQueryArg("where",_2599.substitute("(parentEntity.name eq \"${0}\" and cardinality eq \"M:1\") or (childEntity.name eq \"${0}\" and cardinality eq \"1:M\")",[_25b3])).read({success:lang.hitch(this,this._onRelationshipRequestSuccess,_25b5,_25b3),failure:lang.hitch(this,this._onRequestFailure,_25b5)});wait.push(_25b5);_25b5=new _2598();new Sage.SData.Client.SDataResourceCollectionRequest(this.dataService).setResourceKind("entities").setQueryArg("where",_2599.substitute("extendedEntity.name eq \"${0}\"",[_25b3])).setQueryArg("select","extendedEntityPropertyName").read({success:lang.hitch(this,this._onExtendedRequestSuccess,_25b5,_25b3),failure:lang.hitch(this,this._onRequestFailure,_25b5)});wait.push(_25b5);new _259d(wait,false,true,true).then(lang.hitch(this,this._process,node,_25b4),lang.hitch(this,this._error,node,_25b4));},_onPropertyRequestSuccess:function(_25b6,_25b7,feed){_25b6.resolve(feed["properties"]["$resources"]);},_onExtendedRequestSuccess:function(_25b8,_25b9,feed){var _25ba=array.map(feed["$resources"],function(entry){return {displayName:entry["$descriptor"],propertyName:entry["$key"],entityName:entry["$key"]};});_25b8.resolve(_25ba);},_onRelationshipRequestSuccess:function(_25bb,_25bc,feed){var _25bd=[],_25be=feed["$resources"];array.forEach(_25be,function(entry){if(_25bc==entry["parentEntity"]["$key"]&&entry["parentProperty"]["isIncluded"]){_25bd.push({displayName:entry["parentProperty"]["displayName"],propertyName:entry["parentProperty"]["propertyName"],propertyId:entry["parentProperty"]["id"],entityName:entry["childEntity"]["$key"],includes:array.map(entry["columns"]["$resources"],function(_25bf){return _25bf["parentPropertyId"];})});}else{if(_25bc==entry["childEntity"]["$key"]&&entry["childProperty"]["isIncluded"]){_25bd.push({displayName:entry["childProperty"]["displayName"],propertyName:entry["childProperty"]["propertyName"],propertyId:entry["childProperty"]["id"],entityName:entry["parentEntity"]["$key"],includes:array.map(entry["columns"]["$resources"],function(_25c0){return _25c0["childPropertyId"];})});}}},this);_25bb.resolve(_25bd);},_onRequestFailure:function(_25c1,_25c2){_25c1.reject(_25c2);},_error:function(node,_25c3,error){_259c.destroy(_25c3);},_process:function(node,_25c4,_25c5){var _25c6=_259a.get(node,"data-property"),_25c7={},_25c8=[],_25c9=[],_25ca;array.forEach(_25c5[1][1],function(_25cb){array.forEach(_25cb["includes"],function(id){_25c7[id]=true;});_25c8.push({propertyPath:_25c6?_25c6+"."+_25cb["propertyName"]:_25cb["propertyName"],propertyName:_25cb["propertyName"],displayName:_25cb["displayName"]||_25cb["propertyName"],type:"relationship",data:_25cb});});array.forEach(_25c5[0][1],function(_25cc){if(_25c7[_25cc["id"]]){return;}if(_25cc["isIncluded"]){_25c9.push({propertyPath:_25c6?_25c6+"."+_25cc["propertyName"]:_25cc["propertyName"],propertyName:_25cc["propertyName"],displayName:_25cc["displayName"]||_25cc["propertyName"],type:"standard",data:_25cc,dataTypeData:_25cc["dataTypeData"]?dojo.fromJson(_25cc["dataTypeData"]):{}});}});_25ca=array.map(_25c5[2][1],function(_25cd){return {propertyPath:_25c6?_25c6+"."+_25cd["propertyName"]:_25cd["propertyName"],propertyName:_25cd["propertyName"],displayName:_25cd["displayName"]||_25cd["propertyName"],type:"extended",data:_25cd};});var all=_25c9.concat(_25c8,_25ca),_25ce=this.sortProperty;all.sort(function(a,b){var nameA=a[_25ce],nameB=b[_25ce];return (nameA<nameB)?-1:(nameA>nameB)?1:0;});_259c.destroy(_25c4);this.render(node,all);},render:function(node,_25cf){var _25d0=_259c.place(this.containerTemplate.apply(this,this),node);var self=this;array.forEach(_25cf,function(_25d1){this._context[_25d1.propertyPath]=_25d1;var _25d2=_259c.place(this.propertyTemplate.apply(_25d1,this),_25d0);if(_25d2&&_25d1["type"]=="standard"){_259a.set(_25d2,"dndType","property");_259a.set(_25d2,"dndData",_25d1.propertyPath);_259b.add(_25d2,"dojoDndItem");}else{on(_25d2,"mousedown",function(){if(self._sources&&self._sources.length>0){self._sources[0].selectNone();}});}},this);var _25d3=new _25af.Source(_25d0,{owner:this,copyOnly:true,selfAccept:false});_25d3.startup();this._sources.push(_25d3);}});_25af.Source=_25a5;return _25af;});},"Sage/TaskPane/main":function(){define(["Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/UserTasklet","Sage/TaskPane/AccountingTasksTasklet","Sage/TaskPane/ActivityManagerTasklet","Sage/TaskPane/ActivityTaskConfigurationProvider","Sage/TaskPane/ActivityTaskContents","Sage/TaskPane/ActivityTaskPaneActions","Sage/TaskPane/ActivityTaskPaneItem","Sage/TaskPane/CommonTasksTasklet","Sage/TaskPane/ContactTasksTasklet","Sage/TaskPane/GroupListTasklet","Sage/TaskPane/LeadTasksTasklet","Sage/TaskPane/LiteratureManagementTasks","Sage/TaskPane/OpportunityTasksTasklet","Sage/TaskPane/SecuredActionTasklet","Sage/TaskPane/TaskPaneContent","Sage/TaskPane/TaskPaneItem","Sage/TaskPane/SecurityManagerTasksTasklet","Sage/TaskPane/JobManagerTasksTasklet","Sage/TaskPane/ReportManagerTasksTasklet","Sage/TaskPane/GroupManagerTasksTasklet"],function(){});},"Sage/TaskPane/_BaseTaskPaneTasklet":function(){define(["Sage/UI/Dialogs","dojo/i18n!./nls/_BaseTaskPaneTasklet","dojo/_base/declare"],function(_25d4,_25d5,_25d6){var _25d7=_25d6("Sage.TaskPane._BaseTaskPaneTasklet",null,{currentEntityId:"",currentEntityTableName:"",currentEntityType:"",contextService:null,selectedRecordActionCallback:"",selectionContainer:"_hfSelections",constructor:function(args){dojo.mixin(this,args);dojo.mixin(this,_25d5);},getSelectionInfo:function(){try{var _25d8=Sage.Utility.getSelectionInfo();if(!_25d8){this.getCurrentEntity();if(this.currentEntityId){_25d8={};_25d8.key=this.currentEntityId;_25d8.mode="selection";_25d8.ranges=[];_25d8.recordCount=1;_25d8.selectedIds=[];_25d8.selectedIds.push(this.currentEntityId);_25d8.selectionCount=1;_25d8.selections=[];var obj={};obj.id=this.currentEntityId;obj.rn=0;_25d8.selections.push(obj);}}return _25d8;}catch(e){_25d4.alert(this.errorNoData);return null;}},prepareSelectedRecords:function(_25d9){this.selectedRecordActionCallback=_25d9;var self=this;try{this.selectionInfo=this.getSelectionInfo();}catch(e){_25d4.showInfo(this.errorNoData);}if(this.selectionInfo.selectionCount===0&&this.selectionInfo.recordCount>0){var _25da=dojo.string.substitute(this.noRecordsSelectedProcessAll,[this.selectionInfo.recordCount]);_25d4.raiseQueryDialog(this.salesLogixPageTitle,_25da,function(_25db){self.storeAllSelectionsOrCancel(_25db,self.selectionInfo);},this.yesButtonText,this.noButtonText);}else{if(this.selectionInfo.recordCount>0){this.saveSelections(this.selectedRecordActionCallback,this.selectionInfo);}else{_25d4.showInfo(this.errorNoData);}}},storeAllSelectionsOrCancel:function(agree,_25dc){if(agree){_25dc.mode="selectAll";this.saveSelections(this.selectedRecordActionCallback,_25dc);}else{var _25dd=dojo.byId([this.clientId,this.selectionContainer].join(""));if(_25dd){_25dd.value="cancel";}}},saveSelections:function(_25de,_25df){if(_25df!==null){var svc=Sage.Services.getService("SelectionContextService");svc.setSelectionContext(_25df.key,_25df,_25de);var _25e0=dojo.byId([this.clientId,this.selectionContainer].join(""));if(_25e0){_25e0.value=_25df.key;}}},verifySelection:function(_25e1){if(_25e1!==null){return (_25e1.selectionCount!==0);}return false;},verifySingleSelection:function(_25e2){if(_25e2!==null){return (_25e2.selectionCount===1);}return false;},getCurrentEntity:function(){if(Sage.Services.hasService("ClientEntityContext")){this.contextService=Sage.Services.getService("ClientEntityContext");this.context=this.contextService.getContext();this.currentEntityId=this.context.EntityId;this.currentEntityType=this.context.EntityType;this.currentEntityTableName=this.context.EntityTableName;var _25e3=this.currentEntityType.split("Sage.Entity.Interfaces.I");if(_25e3){this.currentEntityPrettyName=_25e3[1];}}},setSelectionCount:function(){try{var panel=dijit.byId("list");if(panel){dojo.byId("selectionCount").text(panel.getTotalSelectionCount());}}catch(e){}},getSelectionCount:function(){return Sage.Services.getService("ClientGroupContext").getContext().CurrentGroupCount;},getCurrentGroupId:function(){var _25e4=Sage.Services.getService("ClientGroupContext");if(_25e4){var _25e5=_25e4.getContext();return _25e5.CurrentGroupID;}return "";},getCurrentGroupName:function(){var _25e6=Sage.Services.getService("ClientGroupContext");if(_25e6){var _25e7=_25e6.getContext();return _25e7.CurrentDisplayName;}return "";},getDefaultGroupId:function(){var _25e8=Sage.Services.getService("ClientGroupContext");if(_25e8){var _25e9=_25e8.getContext();return _25e9.DefaultGroupID;}return "";}});return _25d7;});},"Sage/TaskPane/UserTasklet":function(){define(["dojo/i18n!./nls/UserTasklet","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneContent","Sage/Utility","dojo/_base/declare","Sage/TaskPane/User/ContactUserAssociationEditor","Sage/Data/SingleEntrySDataStore","Sage/UI/Dialogs"],function(_25ea,_25eb,_25ec,_25ed,_25ee,_25ef,_25f0,_25f1){var _25f2=_25ee("Sage.TaskPane.UserTasklet",[_25eb,_25ec],{addToRoleTitle:"Add to Role",resetUsersTitle:"Reset Users",taskItems:[],constructor:function(){dojo.mixin(this,_25ea);this.taskItems=[{taskId:"AddToRole",type:"Link",displayName:this.addToRoleTitle,clientAction:"userTaskletActions.addUsersToRole();",securedAction:"Entities/User/Add"},{taskId:"ResetUsers",type:"Link",displayName:this.resetUsersTitle,clientAction:"userTaskletActions.resetUsers();",securedAction:"Entities/User/Add"},{taskId:"Associate Contact",type:"Link",displayName:this.associateContactTitle,clientAction:"userTaskletActions.associateContact();",securedAction:"Entities/User/AssociateUser"},{taskId:"Disassociate Contact",type:"Link",displayName:this.disAssociateContactTitle,clientAction:"userTaskletActions.disAssociateContact();",securedAction:"Entities/User/DisAssociateUser"}];},resetUsers:function(){if(_25ed.getModeId()==="detail"){this.onResetUsersClick();}else{this.prepareSelectedRecords(this.resetUsersAction(this));}},addUsersToRole:function(){if(_25ed.getModeId()==="detail"){this.onAddUserClick();}else{this.prepareSelectedRecords(this.actionItem(this));}},actionItem:function(self){return function(){self.onAddUserClick();};},resetUsersAction:function(self){return function(){self.onResetUsersClick();};},onAddUserClick:function(){var _25f3=dojo.byId([this.clientId,"_tskAddUserToRole"].join(""));if(_25f3){_25f3.click();}},onResetUsersClick:function(){var _25f4=dojo.byId([this.clientId,"_tskResetUsers"].join(""));if(_25f4){_25f4.click();}},associateContact:function(_25f5){var self=this;if(!_25f5){_25f5="associate";}this._selectionInfo=this.getSelectionInfo();if(this._selectionInfo.selectionCount===0){Sage.UI.Dialogs.showError(this.singleSelectionErrorMessage);}else{if(this._selectionInfo.selectionCount>1){Sage.UI.Dialogs.showError(this.multipleSelectionErrorMessage);}else{var _25f6={"selectionInfo":this._selectionInfo,"action":_25f5};this._setupStore();this._contactUserStore.fetch({predicate:"UserId eq '"+this._selectionInfo.selectedIds[0]+"'",onComplete:function(_25f7){Sage.UI.Dialogs.showError(self.associationExistsMessage);},onError:function(){self.prepareSelectedRecords(this.associateContactActionItem(_25f6));},scope:this});}}},_setupStore:function(){if(!this._contactUserStore){this._contactUserStore=new _25f0({include:[],resourceKind:"contactUsers",service:Sage.Data.SDataServiceRegistry.getSDataService("dynamic")});}},associateContactActionItem:function(_25f8,_25f9){return function(){var _25fa=dijit.byId("dlgContactUserAssociation");if(!_25fa){_25fa=new _25ef(_25f8,_25f9);}else{_25fa.setSelectionInfo(_25f8,_25f9);}_25fa.show();};},disAssociateContact:function(){this._selectionInfo=this.getSelectionInfo();if(this._selectionInfo.selectionCount===0){Sage.UI.Dialogs.showError(this.noSelectionErrorMessage);}else{this.prepareSelectedRecords(this.confirmDisassociate(this));}},confirmDisassociate:function(self){return function(){var _25fb=self.confirmDisAssociate;if(self._selectionInfo.selectionCount>1){_25fb=self.confirmDisAssociateMultiple;}_25f1.raiseQueryDialog(self.disAssociateDialogTitle,dojo.string.substitute(_25fb,[self._selectionInfo.selectionCount]),function(_25fc){self.disAssociateActionItem(_25fc,self);},self.okButtonText,self.cancelButtonText);};},disAssociateActionItem:function(_25fd,self){if(_25fd){self.getSelectionInfo();var _25fe=this.selectionInfo.selectedIds.join();this._removeContactUsers(_25fe,self._successfulContactUserDelete,self);}},_removeContactUsers:function(_25ff,_2600,scope){var _2601=Sage.Data.SDataServiceRegistry.getSDataService("dynamic");var _2602=new Sage.SData.Client.SDataServiceOperationRequest(_2601).setResourceKind("ContactUsers").setOperationName("RemoveContactUserAssociations");var entry={"$name":"RemoveContactUserAssociations","request":{"ContactUserId":null,"contactIds":null,"userIds":_25ff}};_2602.execute(entry,{success:function(){},failure:function(){},scope:scope||this});}});return _25f2;});},"Sage/TaskPane/TaskPaneContent":function(){define(["dijit/_Widget","Sage/_Templated","Sage/TaskPane/TaskPaneItem","dojo/_base/declare"],function(_2603,_2604,_2605,_2606){var _2607=_2606("Sage.TaskPane.TaskPaneContent",[_2603,_2604],{widgetsInTemplate:true,widgetTemplate:new Simplate(["<div dojoAttachPoint=\"taskletContainerNode\" class=\"task-pane-item-common-tasklist\">","{% for (var i = 0; i < $.taskItems.length; i++) { ","var task = $.taskItems[i]; %}","<div data-dojo-type=\"Sage.TaskPane.TaskPaneItem\" linkText=\"{%= task.displayName %}\" securedAction=\"{%= task.securedAction %}\" action=\"javascript: {%= task.clientAction %}\"></div>","<br />","{% } %}","</div>"])});return _2607;});},"Sage/TaskPane/TaskPaneItem":function(){define(["dijit/_Widget","dijit/_TemplatedMixin","dojo/_base/declare"],function(_2608,_2609,_260a){var _260b=_260a("Sage.TaskPane.TaskPaneItem",[_2608,_2609],{securedAction:"",linkText:"",confirmMsg:"",clientAction:"",serverAction:"",currentActionIndex:-1,actions:[],selectedItemList:{},action:"",type:"",postCreate:function(_260c){this.checkSecurityAccess();},templateString:"<a dojoAttachPoint=\"linkTextNode\" href=\"#\"></a>",attributeMap:dojo.delegate(_2608.prototype.attributeMap,{linkText:{node:"linkTextNode",type:"innerHTML"},action:{node:"linkTextNode",type:"attribute",attribute:"href"}}),setActionList:function(){this.actions.push(this.startConfirm);this.actions.push(this.startGetSelectedItems);this.actions.push(this.startClientAction);this.actions.push(this.startServerAction);},doNextAction:function(){this.currentActionIndex++;this.actions[this.currentActionIndex].call();},startConfirm:function(){var _260d=true;if(this.confirmMsg){_260d=confirm(this.confirmMsg);}this.processConfirmResult(_260d);},processConfirmResult:function(_260e){if(_260e===true){this.doNextAction();}},startClientAction:function(){var _260f=true;if(this.clientAction){if(typeof (this.clientAction)==="function"){_260f=this.clientAction.call();}}this.processClientActionResult(_260f);},processClientActionResult:function(_2610){this.doNextAction();},startServerAction:function(){if(this.serverAction){if(this.selectedItemList.length>0){__doPostBack(this.serverAction,this.selectedItemList);}}},startGetSelectedItems:function(){var _2611={key:"selectAll"};var _2612=Sage.Services.getService("SelectionContextService");if(_2612){_2612.getSelectedIds(_2611,this.processGetSelectedItemsResult);}},processGetSelectedItemsResult:function(_2613){this.selectedItemList=_2613;this.doNextAction();},getCurrentUserId:function(){var _2614="";var _2615=Sage.Services.getService("ClientContextService");if(_2615){_2614=_2615.getValue("userID");}return _2614;},checkSecurityAccess:function(){var _2616="none";if(this.securedAction.length>0){var _2617=Sage.Services.getService("RoleSecurityService");_2617.hasAccess(this.securedAction,function(_2618){if(_2618){_2616="inline";}});}dojo.style(this.domNode,{"display":_2616});if(_2616==="none"&&this.domNode.nextSibling&&this.domNode.nextSibling.nodeName==="BR"){dojo.style(this.domNode.nextSibling,{"display":_2616});}}});return _260b;});},"Sage/TaskPane/User/ContactUserAssociationEditor":function(){define(["dojo/_base/declare","dojo/i18n!./nls/ContactUserAssociationEditor","Sage/Data/SingleEntrySDataStore","Sage/Data/WritableSDataStore","Sage/Data/SDataServiceRegistry","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dojo/string","dijit/Dialog","dijit/_Widget","Sage/_Templated","Sage/UI/Dialogs","Sage/UI/Controls/Lookup","dojo/text!./templates/ContactUserAssociationEditor.html","Sage/UI/Controls/SingleSelectPickList","dijit/layout/ContentPane","dojox/layout/TableContainer","dijit/form/Form"],function(_2619,_261a,_261b,_261c,_261d,_261e,_261f,_2620,_2621,_2622,_2623,_2624,_2625,_2626){var _2627=_2619("Sage.TaskPane.User.ContactUserAssociationEditor",[_2622,_2623],{id:"dlgContactUserAssociation",actionType:false,_dialog:false,_updateableProperties:false,selectedFieldIndex:1,lup_User:false,_selectionInfo:false,widgetsInTemplate:true,widgetTemplate:new Simplate(eval(_2626)),constructor:function(info){this._selectionInfo=info.selectionInfo.selectedIds;this.actionType=info.action;dojo.mixin(this,_261a);if(this.actionType=="disassociate"){}},associationExists:function(_2628,_2629,_262a,scope){this._setupStore();var _262b=_2620.substitute("UserId eq '${0}' ",[_262a.UserId]);this._contactUserStore.fetch({query:_262b,onComplete:function(_262c){if(_262c&&_262c.length>0){_2629.call(scope,_262c,_262a);}else{_2628.call(scope,_262a);}},onError:function(){_2628.call(scope,_262a);},scope:this});},loadContactData:function(_262d,_262e,scope){if(!_262d){return;}this._setupStore();var _262f=_2620.substitute("ContactId in ['${0}'] ",[this._selectionInfo.join("','")]);this._contactUserStore.fetch({query:_262f,onComplete:function(_2630){_262e.call(scope,_2630);},onError:function(){_262e.call(scope,null);},scope:this});this._contactUserStore.fetch({predicate:"'"+_262d+"'",onComplete:function(_2631){_262e.call(scope,_2631);},onError:function(){_262e.call(scope,null);},scope:this});},setSelectionInfo:function(info){this._selectionInfo=info.selectionInfo.selectedIds;this.actionType=info.action;},show:function(){this._dialog.show();if(!this.lup_User){this.createContactLookup();}},createContactLookup:function(){this.contactLookupConfig={id:"_contactLookup",structure:[{defaultCell:{"sortable":true,"width":"150px","editable":false,"propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"pickListName":null,"defaultValue":""},cells:[{"name":this.lookupFirstNameColText,"field":"FirstName","sortable":true},{"name":this.lookupLastNameColText,"field":"LastName","sortable":true},{"name":this.lookupTitleColText,"field":"Title","sortable":true},{"name":this.lookupAccountColText,"field":"AccountName","sortable":true},{"name":this.lookupWorkPhoneColText,"field":"WorkPhone","sortable":true},{"name":this.lookupEmailText,"field":"Email","sortable":true}]}],gridOptions:{contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"contacts",sort:[{attribute:"LastName"}]},isModal:true,initialLookup:true,returnPrimaryKey:true,dialogTitle:this.lookupContactText,dialogButtonText:this.btnOK_Caption};this.lup_Contact=new _2625({id:"lu_Contact",config:this.contactLookupConfig,style:"width:100%"});dojo.place(this.lup_Contact.domNode,this.contactLookup_Container.domNode,"only");},_setupStore:function(){if(!this._contactUserStore){this._contactUserStore=new _261c({include:[],resourceKind:"contactUsers",service:Sage.Data.SDataServiceRegistry.getSDataService("dynamic")});}},_okClick:function(){var _2632=this.lup_Contact.selectedObject.$key;if(this._selectionInfo&&_2632){this._setupStore();if(this.actionType==="associate"){var _2633={"UserId":this._selectionInfo[0],"ContactId":_2632};this.associationExists(this._insertAssociation,function(){Sage.UI.Dialogs.showError(this.associationExistsMessage);},_2633,this);}else{if(this.actionType==="disassociate"){for(var i=0;i<this._selectionInfo.count;i++){}}}}},_insertAssociation:function(_2634,self){this._contactUserStore.saveNewEntity(_2634,this._successfulContactUserSave,this._failedContactUserSave,this);},_successfulContactUserSave:function(data){this._dialog.hide();},_failedContactUserSave:function(er){this._dialog.hide();},_close:function(){this._dialog.hide();}});return _2627;});},"Sage/TaskPane/AccountingTasksTasklet":function(){define(["Sage/TaskPane/_BaseTaskPaneTasklet","Sage/UI/Dialogs","dojo/i18n!./nls/AccountingTasksTasklet","dojo/_base/declare"],function(_2635,_2636,_2637,_2638){var _2639=_2638("Sage.TaskPane.AccountingTasksTasklet",_2635,{nlsAccountingResources:_2637,linkAccount:function(){if(Sage.Utility.getModeId()==="detail"){return true;}var _263a=this.getSelectionInfo();if(this.verifySingleSelection(_263a)){this.saveSelections(this.actionItem,_263a);return true;}else{_2636.showInfo(this.selectSingleRecord,this.invalidSelectionTitle);return false;}},actionItem:function(){},checkPrices:function(){if(Sage.Utility.getModeId()==="detail"){return true;}var _263b=this.getSelectionInfo();if(this.verifySingleSelection(_263b)){this.saveSelections(this.actionItem,_263b);}else{_2636.showInfo(this.nlsAccountingResources.updatePricingRecords,this.invalidSelectionTitle);return false;}},submitSalesOrder:function(){if(Sage.Utility.getModeId()==="detail"){return true;}var _263c=this.getSelectionInfo();if(this.verifySingleSelection(_263c)){this.saveSelections(this.actionItem,_263c);}else{_2636.showInfo(this.nlsAccountingResources.updatePricingRecords,this.invalidSelectionTitle);return false;}}});return _2639;});},"Sage/TaskPane/ActivityManagerTasklet":function(){define(["dijit/_Widget","dijit/_Container","Sage/_Templated","Sage/Services/_ServiceMixin","Sage/UI/Dialogs","Sage/Services/ActivityService","dojo/_base/declare"],function(_263d,_263e,_263f,_2640,_2641,_2642,_2643){var _2644=_2643("Sage.TaskPane.ActivityManagerTasklet",[_263d,_263e,_2640,_263f],{serviceMap:{"groupContextService":"ClientGroupContext","metaDataService":{type:"sdata",name:"metadata"}},widgetsInTemplate:false,widgetTemplate:new Simplate(["<div class=\"activityTask-panel\"  dojoAttachPoint=\"containerNode\">","</div>"]),_configuration:null,_configurationConnects:null,_configurationProvider:null,_configurationProviderType:null,_appliedSet:null,configurationProvider:null,configurationProviderType:null,autoConfigure:true,taskGroup:"default",paneContents:null,constructor:function(){},postCreate:function(){this.inherited(arguments);if(!this._configurationProvider&&this._configurationProviderType){this.set("configurationProvider",new this._configurationProviderType());}if(this.autoConfigure){this.requestConfiguration();}},uninitialize:function(){this.inherited(arguments);if(this._configurationProvider){this._configurationProvider.destroy();}},_handleConfigurationChange:function(){this.requestConfiguration();},_setConfigurationProviderAttr:function(_2645){if(this._configurationConnects){dojo.forEach(this._configurationConnects,function(_2646){this.disconnect(_2646);},this);}if(this._configurationProvider){this._configurationProvider.destroy();}this._configurationProvider=_2645;this._configurationConnects=[];if(this._configurationProvider){this._configurationConnects.push(this.connect(this._configurationProvider,"onConfigurationChange",this._handleConfigurationChange));this._configurationProvider.set("owner",this);if(this._created){if(this.autoConfigure){this.requestConfiguration();}}}},_getConfigurationProviderAttr:function(){return this._configurationProvider;},_setConfigurationProviderTypeAttr:function(value){this._configurationProviderType=value;},_getConfigurationProviderTypeAttr:function(){return this._configurationProviderType;},requestConfiguration:function(){if(this._configurationProvider){this._configurationProvider.requestConfiguration({success:dojo.hitch(this,this._applyConfiguration)});}},_applyConfiguration:function(_2647){this._configuration=_2647;if(!this._configuration){return;}if(this.paneContents){this.paneContents.destroyRecursive();}dojo.place(this._configuration.taskPane.domNode,this.containerNode,"only");this.paneContents=this._configuration.taskPane;}});return _2644;});},"Sage/TaskPane/ActivityTaskConfigurationProvider":function(){define(["Sage/Services/_ServiceMixin","Sage/_ConfigurationProvider","Sage/Services/ActivityService","Sage/TaskPane/ActivityTaskContents","Sage/TaskPane/ActivityTaskPaneItem","dojo/on","dojo/_base/lang","dojo/i18n!./nls/ActivityTaskConfigurationProvider","dojo/_base/declare"],function(_2648,_2649,_264a,_264b,_264c,on,lang,_264d,_264e){var _264f=_264e("Sage.TaskPane.ActivityTaskConfigurationProvider",[_2649,_2648],{serviceMap:{"groupContextService":"ClientGroupContext"},_roleSecurityService:null,_currentUserId:null,scheduleText:"Schedule",eventText:"Event",phoneCallText:"Phone Call",toDoText:"To-Do",meetingText:"Meeting",personalActivityText:"Personal Activity",deleteConfirmationText:"Delete Confirmation",acceptConfirmationText:"Accept Confirmation",declineConfirmationText:"Decline Confirmation",completeActivityText:"Complete Activity",deleteActivityText:"Delete Activity",deleteEventText:"Delete Event",scheduleEventText:"Schedule Event",scheduleRequestText:"Schedule Request",deleteRequestText:"Delete Request",recordsSelectedText:"record(s) selected",clearText:"Clear",actionNameSpace:"Sage.TaskPane.ActivityTaskPaneActions",_taskConfigs:false,constructor:function(_2650){lang.mixin(this,_264d);this.inherited(arguments);this._subscribes.push(dojo.subscribe("/group/context/changed",this,this._onGroupContextChanged));var _2651=Sage.Services.getService("ClientContextService");if(_2651){if(_2651.containsKey("userID")){this._currentUserId=_2651.getValue("userID");}}this._roleSecurityService=Sage.Services.getService("RoleSecurityService");},_onGroupContextChanged:function(){this.onConfigurationChange();},onConfigurationChange:function(){},_createConfiguration:function(){var _2652;var _2653=this.groupContextService&&this.groupContextService.getContext();var _2654=_2653&&_2653["CurrentGroupID"];var _2655=this.getTaskConfiguration(_2654);var _2656=new _264b({taskTemplate:_2655.configuration.taskTemplate});_2656.startup();var _2657={tabId:_2655.configuration.key,taskPane:_2656};return _2657;},getTaskConfiguration:function(key){var _2658=this.getTaskConfigurations();for(var i=0;i<_2658.length;i++){if(_2658[i].key.toUpperCase()===key.toUpperCase()){return _2658[i];}}var _2659={key:"default",configuration:this._getDefaultConfig()};return _2659;},getTaskConfigurations:function(){if(this._taskConfigs){return this._taskConfigs;}this._taskConfigs=[{key:"activities",configuration:this._getActivityConfig()},{key:"allopen",configuration:this._getActivityConfig()},{key:"pastdue",configuration:this._getPastDueConfig()},{key:"alarms",configuration:this._getAlarmConfig()},{key:"events",configuration:this._getEventConfig()},{key:"confirmations",configuration:this._getConfirmConfig()},{key:"literature",configuration:this._getLitRequestConfig()}];return this._taskConfigs;},_getTaskTemplateString:function(_265a,_265b){var ts=[];ts.push("<div class=\"task-pane-item-common-tasklist\">");ts.push("<span id=\"selectionCount\" class=\"task-pane-item-common-selectionText\"> 0 </span><span id=\"selectionText\"> "+this.recordsSelectedText+"</span><br>");ts.push("<a id=\"clearSelection\" href=\"#\" class=\"task-pane-item-common-clearselection\" dojoAttachEvent=\"click:_clearSelection\">"+this.clearText+"</a><br>");ts.push("<hr>");for(var i=0;i<_265a.length;i++){var task=_265a[i];var _265c=this.actionNameSpace;if(task.actionNameSpace){_265c=task.actionNameSpace;}if(task.template){ts.push(task.template);}else{ts.push("<li>");var style="";if(task.style){style=task.style;}ts.push(dojo.string.substitute("<div dojotype=\"Sage.TaskPane.ActivityTaskPaneItem\" class=\"task-pane-item-common-tasklist\" style=\"${4}\"  linkText=\"${3}\" securedAction=\"${4}\" action=\"javascript: ${1}.${2}\"></div>",[task.taskId,_265c,task.action,task.displayName,task.securedAction,style]));}}ts.push("</div>");return ts;},_getCommonTasks:function(){var _265d=[];return _265d;},_getCommonActivityTasks:function(){var _265e=this._getCommonTasks();_265e.push({template:"<div class='slxLabel'>"+this.scheduleText+"</div>"});_265e.push({template:"<div>"});_265e.push({taskId:"SchedulePhoneCall",type:"Link",displayName:this.phoneCallText,action:"schedulePhoneCall();",securedAction:"",style:"padding-left:15px;"});_265e.push({taskId:"ScheduleMeeting",displayName:this.meetingText,action:"scheduleMeeting()",securedAction:"",style:"padding-left:15px;"});_265e.push({taskId:"ScheduleToDo",type:"Link",displayName:this.toDoText,action:"scheduleToDo();",securedAction:"",style:"padding-left:15px;"});_265e.push({taskId:"SchedulePersonal",type:"Link",displayName:this.personalActivityText,action:"schedulePerosnalActivity();",securedAction:"",style:"padding-left:15px;"});_265e.push({template:"</div>"});_265e.push({taskId:"Complete",type:"Link",displayName:this.completeActivityText,action:"completeActivity();",securedAction:""});_265e.push({taskId:"Delete",type:"Link",displayName:this.deleteActivityText,action:"deleteActivity();",securedAction:""});return _265e;},_getActivityConfig:function(entry,_265f){var _2660=this._getCommonActivityTasks();var _2661="Activities";var _2662=this._getTaskTemplateString(_2660,_2661);var _2663=new Simplate(_2662);var _2664={key:"activities",taskTemplate:_2663};return _2664;},_getPastDueConfig:function(entry,_2665){var _2666=this._getCommonActivityTasks();var _2667="Past Due";var _2668=this._getTaskTemplateString(_2666,_2667);var _2669=new Simplate(_2668);var _266a={key:"PastDue",taskTemplate:_2669};return _266a;},_getAlarmConfig:function(entry,_266b){var _266c="<div>Test</div>";var _266d=this._getCommonActivityTasks();var _266e="Alarms";var _266f=this._getTaskTemplateString(_266d,_266e);var _2670=new Simplate(_266f);var _2671={key:"Alarms",taskTemplate:_2670};return _2671;},_getLitRequestConfig:function(entry,_2672){var _2673=this._getCommonTasks();_2673.push({taskId:"ScheduleLitRequest",displayName:this.scheduleRequestText,action:"scheduleLitRequest();",securedAction:"",style:"padding-left:15px;"});_2673.push({taskId:"DeleteRequest",displayName:this.deleteRequestText,action:"deleteLitRequest();",securedAction:""});var _2674="Litature Requests";var _2675=this._getTaskTemplateString(_2673,_2674);var _2676=new Simplate(_2675);var _2677={key:"LitRequests",taskTemplate:_2676};return _2677;},_getEventConfig:function(entry,_2678){var _2679=this._getCommonTasks();_2679.push({taskId:"ScheduleEvent",displayName:this.scheduleEventText,action:"scheduleEvent();",securedAction:"",style:"padding-left:15px;"});_2679.push({taskId:"DeleteEvent",displayName:this.deleteEventText,action:"deleteEvent();",securedAction:""});var _267a="Events";var _267b=this._getTaskTemplateString(_2679,_267a);var _267c=new Simplate(_267b);var _267d={key:"Events",taskTemplate:_267c};return _267d;},_getConfirmConfig:function(entry,_267e){var _267f=this._getCommonTasks();_267f.push({taskId:"AcceptConfirmation",displayName:this.acceptConfirmationText,action:"acceptConfirmation();",securedAction:""});_267f.push({taskId:"DeclineConfirmation",displayName:this.declineConfirmationText,action:"declineConfirmation();",securedAction:""});_267f.push({taskId:"DeleteConfirmation",displayName:this.deleteConfirmationText,action:"deleteConfirmation();",securedAction:""});var _2680="Confirmations";var _2681=this._getTaskTemplateString(_267f,_2680);var _2682=new Simplate(_2681);var _2683={key:"Confirmations",taskTemplate:_2682};return _2683;},_getDefaultConfig:function(entry,_2684){var _2685={};var _2686="Default";var _2687=this._getTaskTemplateString(_2685,_2686);var _2688=new Simplate(_2687);var _2689={key:"Default",taskTemplate:_2688};return _2689;},buildTaskConfiguration:function(key,_268a,_268b){var _268c=this._getTaskTemplateString(_268b,_268a);var _268d=new Simplate(_268c);var _268e={key:key,taskTemplate:_268d};return _268e;},addTaskConfiguration:function(_268f){var _2690=this.getTaskConfiguration(_268f.key);if(_2690.key==="default"){var _2691={key:_268f.key,configuration:_268f};var _2692=this.getTaskConfigurations();_2692.push(_2691);}else{_2690.configuration=_268f;}},requestConfiguration:function(_2693){this._onRequestConfigurationSuccess(_2693,null);},_onRequestConfigurationSuccess:function(_2694,entry){if(_2694.success){_2694.success.call(_2694.scope||this,this._createConfiguration(entry,_2694),_2694,this);}this._createConfiguration(entry,_2694);},_onRequestConfigurationFailure:function(_2695,_2696){if(_2695.failure){_2695.failure.call(_2695.scope||this,_2696,_2695,this);}},_scheduleMeeting:function(event){}});return _264f;});},"Sage/TaskPane/ActivityTaskContents":function(){define(["dijit/_Widget","Sage/_Templated","dojo/_base/declare"],function(_2697,_2698,_2699){var _269a=_2699("Sage.TaskPane.ActivityTaskContents",[_2697,_2698],{widgetsInTemplate:true,templateLocation:"",templateString:"",widgetTemplate:"",constructor:function(_269b){this.widgetTemplate=_269b.taskTemplate;dojo.subscribe("/sage/ui/list/selectionChanged",function(_269c){var _269d=dojo.byId("selectionCount");if(_269d){_269d.innerHTML=_269c.getTotalSelectionCount();}});},_clearSelection:function(e){var _269e=dijit.byId("list");if(_269e){_269e._listGrid.selection.clear();}}});return _269a;});},"Sage/TaskPane/ActivityTaskPaneItem":function(){define(["dijit/_Widget","dijit/_TemplatedMixin","dojo/_base/declare"],function(_269f,_26a0,_26a1){var _26a2=_26a1("Sage.TaskPane.ActivityTaskPaneItem",[_269f,_26a0],{securedAction:"",linkText:"",action:"",postCreate:function(){this.checkSecurityAccess();},templateString:"<a dojoAttachPoint=\"linkTextNode\" href=\"#\"></a>",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{linkText:{node:"linkTextNode",type:"innerHTML"},action:{node:"linkTextNode",type:"attribute",attribute:"onclick"}}),_getCurrentUserId:function(){var _26a3="";var _26a4=Sage.Services.getService("ClientContextService");if(_26a4){_26a3=_26a4.getValue("userID");}return _26a3;},checkSecurityAccess:function(){if(this.securedAction.length>0){var _26a5=this._getCurrentUserId();var _26a6=this.linkTextNode;var _26a7=Sage.Services.getService("RoleSecurityService");_26a7.hasAccess(this.securedAction,function(_26a8){var _26a9="none";if(_26a8){_26a9="inline";}dojo.style(_26a6,{"display":_26a9});});}else{dojo.style(this.linkTextNode,{"display":"inline"});}}});return _26a2;});},"Sage/TaskPane/ActivityTaskPaneActions":function(){define(["dojo/parser","dojo/ready"],function(_26aa,ready){Sage.namespace("TaskPane.ActivityTaskPaneActions");Sage.TaskPane.ActivityTaskPaneActions={scheduleMeeting:function(){this._getActivityService().scheduleActivity({type:"Meeting"});},scheduleToDo:function(){this._getActivityService().scheduleActivity({type:"ToDo"});},schedulePhoneCall:function(){this._getActivityService().scheduleActivity({type:"PhoneCall"});},schedulePerosnalActivity:function(){this._getActivityService().scheduleActivity({type:"Personal"});},completeActivity:function(){this._getActivityService().completeActivity();},deleteActivity:function(){this._getActivityService().deleteActivity();},acceptConfirmation:function(){this._getActivityService().acceptConfirmation();},declineConfirmation:function(){this._getActivityService().declineConfirmation();},deleteConfirmation:function(){this._getActivityService().deleteConfirmation();},scheduleEvent:function(){this._getActivityService().scheduleEvent();},deleteEvent:function(){this._getActivityService().deleteEvent();},scheduleLitRequest:function(){this._getActivityService().scheduleLitRequest();},deleteLitRequest:function(){this._getActivityService().deleteLitRequest();},_getActivityService:function(){return Sage.Services.getService("ActivityService");}};return Sage.TaskPane.ActivityTaskPaneActions;});},"Sage/TaskPane/CommonTasksTasklet":function(){define(["dijit/Menu","dijit/Dialog","dijit/form/Button","dijit/form/CheckBox","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/UI/MenuItem","Sage/UI/Dialogs","Sage/Utility","Sage/Utility/Email","Sage/Groups/GroupManager","dojo/_base/xhr","dojo/_base/lang","dojo/_base/declare","dojo/string","dojo/i18n!./nls/CommonTasksTasklet","dojo/dom-class","dojo/topic","Sage/Utility/Jobs","Sage/MainView/Import/ImportWizardController"],function(_26ab,_26ac,_26ad,_26ae,_26af,_26b0,_26b1,_26b2,email,_26b3,xhr,lang,_26b4,_26b5,_26b6,_26b7,topic,jobs,_26b8){var _26b9=_26b4("Sage.TaskPane.CommonTasksTasklet",_26af,{_exportToFile:function(){var _26ba=0;if(_26b2.isIE){_26ba=3000;}var self=this;window.setTimeout(function(){self.onExportToFileClick();},_26ba);},constructor:function(args){lang.mixin(this,_26b6);},removeCurrentFromGroup:function(){this.getCurrentEntity();var svc=Sage.Services.getService("ClientGroupContext"),_26bb,_26bc;if(svc!==null){_26bb=svc.getContext();_26bc=_26bb.FirstEntityID;if(_26bc===this.currentEntityId){_26bc=_26bb.NextEntityID;}if(_26bc!==""){if(this.contextService){this.contextService.navigateSLXGroupEntity(_26bc,this.currentEntityId);}}Sage.Groups.GroupManager.removeIds(_26bb.CurrentGroupID,_26bb.CurrentName,_26bb.CurrentFamily,[this.currentEntityId],function(){__doPostBack("MainContent","");},function(err){console.error(err);},this);}},removeSelectionsFromGroup:function(){_26b3.removeSelectionsFromGroup();},saveSelectionsAsNewGroup:function(){_26b3.saveSelectionsAsNewGroup();},showAdHocList:function(e){var svc=Sage.Services.getService("ClientGroupContext"),i,item,_26bd;if(typeof (GroupAdHocListMenu)==="undefined"){GroupAdHocListMenu=new _26ab({id:"GroupAdHocList"});GroupAdHocListMenu.addChild(new _26b0({label:this.loadingText}));}svc.getAdHocGroupList(function(list){GroupAdHocListMenu.destroyDescendants();for(i=0;i<list.length;i++){item=list[i];GroupAdHocListMenu.addChild(new _26b0({label:item.$descriptor||item.name,ref:_26b5.substitute("javascript:Sage.Groups.GroupManager.addSelectionsToGroup('${0}')",[item.$key]),onClick:function(){if(this.ref!==""){try{window.location.href=this.ref;dijit.popup.close(GroupAdHocListMenu);}catch(err){}}}}));}GroupAdHocListMenu.on("blur",function(){dijit.popup.close(GroupAdHocListMenu);});GroupAdHocListMenu.startup();},this);if(!e.pageX&&!e.pageY){e.pageX=e.clientX+document.body.scrollLeft;e.pageY=e.clientY+document.body.scrollTop;}dijit.popup.open({popup:GroupAdHocListMenu,x:e.pageX||250,y:e.pageY||250});_26bd=GroupAdHocListMenu.domNode.parentNode;if(_26bd&&!_26b7.contains(_26bd,"commonTaskAdHoc")){_26b7.add(_26bd,"commonTaskAdHoc");}},exportToExcel:function(){this.prepareSelectedRecords(this.triggerExportToExcelJob(this.getSelectionInfo(),this));},triggerExportToExcelJob:function(_26be,self){var _26bf=this.getCurrentGroupId();if(_26bf==="LOOKUPRESULTS"){_26bf=this.getDefaultGroupId();}return function(){var _26c0=[{"name":"SelectedIds","value":(_26be.selectionCount>0)?_26be.selectedIds.join(",")||"":""},{"name":"GroupId","value":_26bf},{"name":"AppliedFilters","value":Sys.Serialization.JavaScriptSerializer.serialize(jobs.getFiltersForJob())},{"name":"LookupConditions","value":Sys.Serialization.JavaScriptSerializer.serialize(jobs.getLookupConditionsForJob())}];var _26c1=self.getCurrentGroupName();var _26c2=dojo.date.locale.format(new Date(),{selector:"date",datePattern:"yyyy_MM_dd_hhmm"});var user="";var _26c3=Sage.Services.getService("ClientContextService");if(_26c3){if(_26c3.containsKey("userPrettyName")){user=_26c3.getValue("userPrettyName");}}var _26c4=_26b5.substitute("${0}_${1}_${2}",[_26c1,user,_26c2]);var _26c5={descriptor:_26c4,closable:true,title:self.exportToExcel_Caption,key:"Sage.SalesLogix.BusinessRules.Jobs.ExportToExcelJob",parameters:_26c0,infoMessage:self.exportProcessingJobMsg,success:function(_26c6){},failure:function(_26c7){_26b1.showError(dojo.string.substitute(self.errorRequestingJobMgr,[_26c7.result]));},ensureZeroFilters:true};jobs.triggerJobAndDisplayProgressDialog(_26c5);};},exportToFile:function(){this.getCurrentEntity();this.prepareSelectedRecords(this.fileFormatCheck(this));},fileFormatCheck:function(self){return function(){var _26c8=cookie.getCookie("formatIsSaved"),_26c9=cookie.getCookie("format");if(_26c8==="true"&&_26c9.length>0){dojo.byId([self.clientId,"_tskExportToExcel"].join("")).click();}else{self.promptForFileFormat();}};},promptForFileFormat:function(){var self=this,_26ca="promptForFileFormat-Dialog",_26cb=dijit.byId(_26ca);if(!_26cb){_26cb=new _26ac({id:_26ca,title:self.exportToFile_DialogTitle});}_26cb.attr("content",this.getPromptForFileFormatTemplate().apply({dialogId:_26ca}));_26cb.show();},getPromptForFileFormatTemplate:function(){return new Simplate(["<div>","<label style=\"padding-left:5px\">{%= commonTaskActions.selectFileFormat %}</label>","<br />","<div style=\"padding-left:10px; padding-top:7px\">","<input id=\"radioCSV\" name=\"format_type\" type=\"radio\" data-dojo-type=\"dijit.form.RadioButton\" value=\"csv\" checked=\"true\" />{%= commonTaskActions.exportToFile_OptionCSV %}","</div>","<div style=\"padding-left:10px; padding-top:7px\">","<input id=\"radioTab\" name=\"format_type\" type=\"radio\" data-dojo-type=\"dijit.form.RadioButton\" value=\"tab\" />{%= commonTaskActions.exportToFile_OptionTab %}","</div>","<div style=\"padding-left:11px; padding-top:7px\">","<input id=\"exportFormatSaved\" dojoAttachPoint=\"exportFormatSaved\" data-dojo-type=\"dijit.form.CheckBox\" value=\"true\" />{%= commonTaskActions.exportToFile_OptionSaveFormat %}","</div>","<div style=\"padding-right:5px; padding-bottom:5px; text-align:right;\">","<button data-dojo-type=\"dijit.form.Button\" type=\"submit\" class=\"ok-button\" onClick=\"commonTaskActions._exportToFile();\">{%= commonTaskActions.exportToFile_OK %}</button>","<button data-dojo-type=\"dijit.form.Button\" type=\"button\" class=\"cancel-button\" onClick=\"dijit.byId('promptForFileFormat-Dialog').hide();\">{%= commonTaskActions.exportToFile_Cancel %}</button>","</div>","</div>"]);},onExportToFileClick:function(){var _26cc=dojo.byId("exportFormatSaved");var _26cd;if(_26cc!==undefined&&_26cc.checked){document.cookie="formatIsSaved=true; expires=1/01/2020";}if(dojo.byId("radioCSV").checked){_26cd="csv";}else{_26cd="tab";}document.cookie="format="+_26cd+"; expires=1/01/2020";dojo.byId([this.clientId,"_tskExportToExcel"].join("")).click();},emailSend:function(){this.getCurrentEntity();var url="slxdata.ashx/slx/crm/-/namedqueries?columnaliases=email&format=json&hql=";var sHql=this.getURL(this.currentEntityTableName);if(sHql===null){_26b1.showError(this.noPrimaryEmail);return;}url=url+sHql;var self=this;dojo.xhrGet({url:url,handleAs:"json",load:function(data){self.sendEmail(data);},error:function(error){_26b1.showError(error.StatusText);}});},getURL:function(_26ce){var url=null;switch(_26ce){case "CONTACT":url=dojo.string.substitute("select con.Email from Contact con where con.id like '${0}'",[this.currentEntityId]);break;case "ACCOUNT":url=dojo.string.substitute("select con.Email from Contact as con where con.Account.id like '${0}' and con.IsPrimary like 'T'",[this.currentEntityId]);break;case "OPPORTUNITY":url=dojo.string.substitute("select con.Email from Opportunity as opp left join opp.Contacts as oppCon left join oppCon.Contact as con where opp.id like '${0}' and oppCon.IsPrimary like 'T'",[this.currentEntityId]);break;case "LEAD":url=dojo.string.substitute("select le.Email from Lead le where le.id like '${0}'",[this.currentEntityId]);break;case "CAMPAIGN":url=dojo.string.substitute("select ufo.Email from Campaign as cam left join cam.AccountManager as usr left join usr.UserInfo as ufo where cam.id like '${0}'",[this.currentEntityId]);break;case "TICKET":url=dojo.string.substitute("select ufo.Email from User as usr left join usr.UserInfo as ufo where usr.DefaultOwner in  (select own.id from Ticket as tic left join tic.AssignedTo as own where tic.id like '${0}')",[this.currentEntityId]);break;case "DEFECT":url=dojo.string.substitute("select ufo.Email from User as usr left join usr.UserInfo as ufo where usr.DefaultOwner in (select own.id from Defect as def left join def.AssignedTo as own where def.id like '${0}')",[this.currentEntityId]);break;case "CONTRACT":url=dojo.string.substitute("select con.Email from Contract as crt left join crt.Contact as con where crt.id like '${0}'",[this.currentEntityId]);break;case "SALESORDER":url=dojo.string.substitute("select so.ShippingContact.Email from SalesOrder as so where so.Id eq '${0}'",[this.currentEntityId]);break;case "RMA":url=dojo.string.substitute("select con.Email from Return as ret left join ret.ReturnedBy as con where ret.id like '${0}'",[this.currentEntityId]);break;}return url;},sendEmail:function(email){if(email.count>0){var _26cf=email.items[0].email;if(_26cf){_26cf="mailto:"+_26cf;document.location.href=_26cf;return;}}_26b1.showError(this.noPrimaryEmail);},copyUser:function(){var _26d0=dojo.byId([commonTaskActions.clientId,"_hfSelections"].join("")).value;Sage.ClientLinkHandler.request({request:"Administration",type:"CopyUser",selectionInfoKey:_26d0});},copyUserProfile:function(){var _26d1=dojo.byId([commonTaskActions.clientId,"_hfSelections"].join("")).value;Sage.ClientLinkHandler.request({request:"Administration",type:"CopyUserProfile",selectionInfoKey:_26d1});},deleteUsers:function(){var _26d2=dojo.byId([commonTaskActions.clientId,"_hfSelections"].join("")).value;Sage.ClientLinkHandler.request({request:"Administration",type:"DeleteUsers",selectionInfoKey:_26d2});},addToTeam:function(){var _26d3=dojo.byId([commonTaskActions.clientId,"_hfSelections"].join("")).value;Sage.ClientLinkHandler.request({request:"Administration",type:"AddToTeam",selectionInfoKey:_26d3});},removeFromTeam:function(){var _26d4=dojo.byId([commonTaskActions.clientId,"_hfSelections"].join("")).value;Sage.ClientLinkHandler.request({request:"Administration",type:"RemoveFromTeam",selectionInfoKey:_26d4});},removeFromAllTeams:function(){var _26d5=dojo.byId([commonTaskActions.clientId,"_hfSelections"].join("")).value;Sage.ClientLinkHandler.request({request:"Administration",type:"RemoveFromAllTeams",selectionInfoKey:_26d5});},assignRole:function(){var _26d6=dojo.byId([commonTaskActions.clientId,"_hfSelections"].join("")).value;Sage.ClientLinkHandler.request({request:"Administration",type:"AssignRole",selectionInfoKey:_26d6});},replaceTeamMember:function(){var _26d7=dojo.byId([commonTaskActions.clientId,"_hfSelections"].join("")).value;Sage.ClientLinkHandler.request({request:"Administration",type:"ReplaceTeamMember",selectionInfoKey:_26d7});},deleteTeam:function(){var _26d8=dojo.byId([commonTaskActions.clientId,"_hfSelections"].join("")).value;Sage.ClientLinkHandler.request({request:"Administration",type:"DeleteTeam",selectionInfoKey:_26d8});},deleteDepartment:function(){var _26d9=dojo.byId([commonTaskActions.clientId,"_hfSelections"].join("")).value;Sage.ClientLinkHandler.request({request:"Administration",type:"DeleteDepartment",selectionInfoKey:_26d9});},copyTeam:function(){var _26da=dojo.byId([commonTaskActions.clientId,"_hfSelections"].join("")).value;Sage.ClientLinkHandler.request({request:"Administration",type:"CopyTeam",selectionInfoKey:_26da});},copyDepartment:function(){var _26db=dojo.byId([commonTaskActions.clientId,"_hfSelections"].join("")).value;Sage.ClientLinkHandler.request({request:"Administration",type:"CopyDepartment",selectionInfoKey:_26db});},showDetailReport:function(){var _26dc=Sage.Services.getService("ReportingService");if(_26dc){_26dc.showDefaultReport();}},writeEmailToGroupSelection:function(){email.writeEmailToGroupSelection();},importFromFile:function(){this.getCurrentEntity();if(this.currentEntityPrettyName){var _26dd=new _26b8(this.currentEntityPrettyName,_26b5.substitute("${0}, Sage.Entity.Interfaces",[this.currentEntityType]));_26dd.startWizard();}},bulkDeleteJob:function(){this.getCurrentEntity();this.prepareSelectedRecords(this.confirmBulkDelete(this.getSelectionInfo()));},confirmBulkDelete:function(_26de){return dojo.hitch(this,function(){_26b1.raiseQueryDialog(_26b5.substitute(this.deleteSelectedRecords,[this.currentEntityPrettyName]),_26b5.substitute("${0}",[this.confirmBulkDeleteJob]),dojo.hitch(this,function(_26df){this.deleteBulkActionItem(_26df,_26de);}),this.yesButtonText,this.noButtonText);});},deleteBulkActionItem:function(_26e0,_26e1){if(_26e0){var _26e2=this.getCurrentGroupId();if(_26e2==="LOOKUPRESULTS"){_26e2=this.getDefaultGroupId();}if(this.currentEntityPrettyName){var _26e3=[{"name":"EntityName","value":this.currentEntityPrettyName},{"name":"SelectedIds","value":(_26e1.selectionCount>0)?_26e1.selectedIds.join(",")||"":""},{"name":"GroupId","value":_26e2},{"name":"AppliedFilters","value":Sys.Serialization.JavaScriptSerializer.serialize(jobs.getFiltersForJob())},{"name":"LookupConditions","value":Sys.Serialization.JavaScriptSerializer.serialize(jobs.getLookupConditionsForJob())}];var _26e4={closable:true,title:_26b5.substitute(this.deleteBulkJobTitle,[this.currentEntityPrettyName]),key:"Sage.SalesLogix.BusinessRules.Jobs.DeleteEntityJob",parameters:_26e3,success:function(){},failure:function(_26e5){_26b1.showError(_26b5.substitute(this.deleteJobError,[this.currentEntityPrettyName,_26e5.statusText]));},ensureZeroFilters:true};jobs.triggerJobAndDisplayProgressDialog(_26e4);}}}});return _26b9;});},"Sage/MainView/Import/ImportWizardController":function(){define(["dojo/_base/declare","dojo/string","dojo/_base/array","Sage/MainView/Import/_WizardDialogBase","Sage/MainView/Import/ImportManagerUtility","Sage/MainView/Import/SelectFile","Sage/MainView/Import/DefineDelimiter","Sage/MainView/Import/MapFields","Sage/MainView/Import/ManageImportOptions","Sage/MainView/Import/AddActions","Sage/MainView/Import/Review","dojo/topic"],function(_26e6,_26e7,_26e8,_26e9,_26ea,_26eb,_26ec,_26ed,_26ee,_26ef,_26f0,topic){var _26f1=_26e6("Sage.MainView.Import.ImportWizardController",[_26e9],{wizardOptions:null,constructor:function(_26f2,_26f3){this._initializeImportOptions(_26f2,_26f3);this.wizardOptions=this.wizardOptions?this.wizardOptions:this._getDefaultWizardOptions();this.subscriptions.push(topic.subscribe("/importController/importWizard/nextStep",dojo.hitch(this,function(_26f4){this._nextStep(_26f4);})));this.subscriptions.push(topic.subscribe("/importController/importWizard/previousStep",dojo.hitch(this,function(_26f5){this._previousStep(_26f5);})));this.subscriptions.push(topic.subscribe("/importController/importWizard/cancel",dojo.hitch(this,function(){this._cancel();})));},startWizard:function(){this._goToStep(_26ea.importWizardStep.SelectFile,null);},_initializeImportOptions:function(_26f6,_26f7){this.importOptions.isInitialized=false;this.importOptions.importEntity=_26f6;this.importOptions.importEntityType=_26f7;this.importOptions.attachmentId=null;this.importOptions.importTemplateId=null;this.importOptions.sourceModel=null;this.importOptions.sourceColumns=null;this._assignDefaultAdHocGroupName();this.importOptions.metaDataObject=null;this.importOptions.defaultOwnerId=null;this.importOptions.matchOptions=null;this.importOptions.targetList=null;this.importOptions.engineOptions=null;this.importOptions.mappings=null;},_assignDefaultAdHocGroupName:function(){this.importOptions.groupSettings={};this.importOptions.groupSettings.id=null;this.importOptions.groupSettings.name=null;var _26f8=Sage.Services.getService("ClientContextService");if(_26f8){var user=_26f8.containsKey("userPrettyName")?_26f8.getValue("userPrettyName"):"";var _26f9=_26f8.containsKey("userDateFmtStr")?_26f8.getValue("userDateFmtStr"):"yyyy_MM_dd_hhmm";var _26fa=dojo.date.locale.format(new Date(),{datePattern:_26e7.substitute("${0} h:mm:ss",[_26f9])});this.importOptions.groupSettings.name=_26e7.substitute(this.defaultAdHoc_Caption,[_26fa,user]);}},_nextStep:function(_26fb){var _26fc=this._getNextStep(_26fb);this._goToStep(_26fc);},_previousStep:function(_26fd){var _26fe=this._getPreviousStep(_26fd);this._goToStep(_26fe);},_cancel:function(){setTimeout(dojo.hitch(this,function(){this._destroyObjects();}),dijit.defaultDuration+100);},_getDefaultWizardOptions:function(){return {hiddenSteps:[_26ea.importWizardStep.AddActions]};},_isStepVisible:function(step){var _26ff=true;if(this.wizardOptions&&this.wizardOptions.hiddenSteps){_26e8.some(this.wizardOptions.hiddenSteps,function(_2700,i){if(step===_2700){_26ff=false;return true;}});}if(!_26ff){return false;}return true;},_getNextStep:function(_2701){for(var step in _26ea.importWizardStep){var _2702=_26ea.importWizardStep[step];if(_2702>_2701&&this._isStepVisible(_2702)){return _2702;}}return null;},_getPreviousStep:function(_2703){var _2704=[];for(var step in _26ea.importWizardStep){_2704.unshift(_26ea.importWizardStep[step]);}var _2705=null;_26e8.some(_2704,dojo.hitch(this,function(_2706){if(_2706<_2703&&this._isStepVisible(_2706)){_2705=_2706;return true;}}));return _2705;},_goToStep:function(step){var _2707=this._getNextStep(step);var _2708=(_2707===null||_2707===_26ea.importWizardStep.Review);var _2709=this._getPreviousStep(step);var _270a=(_2709===null||_2709===_26ea.importWizardStep.ImportFile);var _270b={isLastStep:_2708,isFirstStep:_270a,currentStep:null};var _270c;switch(step){case _26ea.importWizardStep.SelectFile:_270c=dijit.byId("dlgSelectFile");if(!_270c){_270b.currentStep=_26ea.importWizardStep.SelectFile;_270c=new _26eb(_270b);_270c.startup();}_270c.show();break;case _26ea.importWizardStep.DefineDelimiter:_270c=dijit.byId("dlgDefineDelimiter");if(!_270c){_270b.currentStep=_26ea.importWizardStep.DefineDelimiter;_270c=new _26ec(_270b);}_270c.show();break;case _26ea.importWizardStep.MapFields:_270c=dijit.byId("dlgMapFields");if(!_270c){_270b.currentStep=_26ea.importWizardStep.MapFields;_270c=new _26ed(_270b);_270c.startup();}_270c.show();break;case _26ea.importWizardStep.ManageImportOptions:_270c=dijit.byId("dlgManageImportOptions");if(!_270c){_270b.currentStep=_26ea.importWizardStep.ManageImportOptions;_270c=new _26ee(_270b);_270c.startup();}_270c.show();break;case _26ea.importWizardStep.AddActions:_270c=dijit.byId("dlgAddActions");if(!_270c){_270b.currentStep=_26ea.importWizardStep.AddActions;_270c=new _26ef(_270b);_270c.startup();}_270c.show();break;case _26ea.importWizardStep.Review:_270c=dijit.byId("dlgReview");if(!_270c){_270b.currentStep=_26ea.importWizardStep.Review;_270c=new _26f0(_270b);}_270c.show();break;}}});return _26f1;});},"Sage/MainView/Import/_WizardDialogBase":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/topic","dojo/_base/lang","dojo/store/Memory","dijit/_Widget","Sage/_Templated","Sage/MainView/Import/ImportManagerUtility","dojo/i18n!./nls/_WizardDialogBase","Sage/UI/Controls/_DialogHelpIconMixin","dijit/form/FilteringSelect"],function(_270d,_270e,topic,_270f,_2710,_2711,_2712,_2713,_2714,_2715,_2716){var _2717=_270d("Sage.MainView.Import._WizardDialogBase",[_2711,_2712],{_dialog:null,_currentStep:null,_isFirstStep:false,_isLastStep:false,_helpIconTopic:"ImportingRecords",widgetsInTemplate:true,subscriptions:[],importOptions:[],lookupTypeField:"LookupField",_dialogIds:["dlgSelectFile","dlgDefineDelimiter","dlgMapFields","dlgManageImportOptions","dlgAddActions","dlgReview","dlgManageImportTemplate"],constructor:function(){this.subscriptions=[];dojo.mixin(this,_2714);},show:function(){this._dialog.show();if(this._helpIconTopic){if(!this._dialog.helpIcon){_270f.mixin(this._dialog,new _2715());this._dialog.createHelpIconByTopic(this._helpIconTopic);this._dialog.helpIcon.tabIndex="-1";}}},startup:function(){this.inherited(arguments);this._initializeWizardButtons();},isValid:function(){return true;},_initializeTemplates:function(data){var _2718=new _2716({store:new _2710({data:data,idProperty:"$key"}),maxHeight:150,searchAttr:"$descriptor",labelAttr:"$descriptor",placeHolder:this.selectOption_Caption,required:false});if(this.importOptions.importTemplateId){_2718.attr("value",this.importOptions.importTemplateId);}return _2718;},getConfigurationOptions:function(){return this._commonConfigurationOptions();},getTemplateConfigurationOptions:function(isNew){var _2719=this._commonConfigurationOptions();if(!isNew){_2719.importTemplateId=this.importOptions.importTemplateId;}_2719.templateName=this.importOptions.templateName;_2719.isNew=isNew;return _2719;},_commonConfigurationOptions:function(){return {importEntity:this.importOptions.importEntity,importEntityType:this.importOptions.importEntityType,defaultOwnerId:this.importOptions.defaultOwnerId,mappings:this.importOptions.mappings,groupSettings:this.importOptions.groupSettings,metaDataObject:this.importOptions.metaDataObject,sourceModel:this.importOptions.sourceModel,sourceColumns:this.importOptions.sourceColumns,targetColumns:this.importOptions.targetList?this.importOptions.targetList.data:this.importOptions.targetList,matchOptions:this.importOptions.matchOptions,engineOptions:this.importOptions.engineOptions,importTemplateId:this.importOptions.importTemplateId,attachmentId:this.importOptions.attachmentId};},getTargetProperty:function(_271a,_271b,_271c,_271d){var _271e={dataType:_271a.dataType,displayName:_271a.displayName,value:_271a.value,name:_271b,required:_271a.required,fieldType:_271a.fieldType,entityDisplayName:_271a.entityDisplayName,maxLength:_271a.maxLength};if(_271a.fieldType.indexOf(this.lookupTypeField)>0){_271e.entityName=_271a.entityName;_271e.searchProperty=_271c?_271c:null;_271e.searchValue=_271d?_271d:null;_271e.entityDisplayName=_271a.entityDisplayName;}return _271e;},saveImportJobTemplate:function(_271f){var _2720={importTemplateId:_271f.importTemplateId,entry:{"$name":"SaveImportJobTemplate","request":{"ImportTemplateId":_271f.importTemplateId,"templateOptions":Sys.Serialization.JavaScriptSerializer.serialize(_271f)}},businessRuleMethod:"SaveImportJobTemplate",onSuccess:dojo.hitch(this,function(_2721){if(_271f.isNew){this.importOptions.importTemplateId=_2721;topic.publish("/importController/importWizard/savedImportTemplate",_2721);}}),onFailure:function(_2722){if(_271f.onFailure){_271f.onFailure(_2722);}}};_2713.importRuleRequest(_2720,"importTemplates");},_dialog_OnCancel:function(){this._btnCancel_OnClick();},_btnBack_OnClick:function(){this._checkCurrentStep();this._dialog.hide();topic.publish("/importController/importWizard/previousStep",this._currentStep);},_btnNext_OnClick:function(){if(this.isValid()){this._checkCurrentStep();this._dialog.hide();topic.publish("/importController/importWizard/nextStep",this._currentStep);}},_btnCancel_OnClick:function(){this._checkCurrentStep();this._dialog.hide();topic.publish("/importController/importWizard/cancel",null);},_initializeWizardButtons:function(){if(this._isFirstStep){_2713.setDomNodeVisible(this.btnBack.domNode,false);}if(this._isLastStep){this.btnNext.setLabel(_2714.txtFinish);}},_checkCurrentStep:function(){if(this._currentStep===null){console.error("_currentStep has not been defined");}},finishWizard:function(){this._destroyObjects();},_destroyObjects:function(){_270e.forEach(this._dialogIds,function(_2723){var _2724=dijit.byId(_2723);if(_2724){_2724.destroyRecursive();}});_270e.forEach(this.subscriptions,function(_2725){_2725.remove();});}});return _2717;});},"Sage/MainView/Import/ImportManagerUtility":function(){define(["dojo/_base/xhr","dojo/string","dojo/date/locale","Sage/Data/SDataServiceRegistry","Sage/Utility"],function(_2726,_2727,_2728,_2729,_272a){Sage.namespace("Sage.MainView.Import.ImportManagerUtility");dojo.mixin(Sage.MainView.Import.ImportManagerUtility,{importWizardStep:{SelectFile:0,DefineDelimiter:1,ManageImportOptions:2,MapFields:3,AddActions:4,Review:5},getUserName:function(_272b){var user=null;_2726("GET",{url:"slxdata.ashx/slx/dynamic/-/users('"+_272b+"')?format=json&select=$key,$descriptor",handleAs:"json",sync:true}).then(function(data){user=data;});return user;},getOwner:function(_272c,_272d){if(_272c){var _272e=new Sage.SData.Client.SDataSingleResourceRequest(_2729.getSDataService("dynamic"));_272e.setResourceKind("owners");_272e.setResourceSelector(_2727.substitute("'${0}'",[_272c]));_272e.setQueryArg("select","$key,$description");_272e.read({success:function(owner){_272d.set("selectedObject",owner);},scope:this,failure:function(){}});}},getCurrentEntityContext:function(){if(Sage.Services.hasService("ClientEntityContext")){var _272f=Sage.Services.getService("ClientEntityContext");if(_272f){return _272f.getContext();}}return null;},setDomNodeVisible:function(_2730,_2731){if(_2730&&_2731){dojo.removeClass(_2730,"display-none");}else{if(_2730){dojo.addClass(_2730,"display-none");}}},requestImportTemplates:function(_2732){var _2733=new Sage.SData.Client.SDataResourceCollectionRequest(_2729.getSDataService("dynamic"));_2733.setResourceKind("importTemplates");_2733.setQueryArg("select","TemplateName,EntityName,IsSystemTemplate,CreateUser,CreateDate,ModifyUser,ModifyDate");if(_2732.where){_2733.setQueryArg("where",_2732.where);}_2733.read({preventCache:true,scope:this,success:function(_2734){if(_2732.onSuccess){_2732.onSuccess(_2734.$resources);}},failure:function(error){if(_2732.onFailure){_2732.onFailure(error);}}});},importRuleRequest:function(_2735,_2736){var _2737=_2729.getSDataService("dynamic");var _2738=new Sage.SData.Client.SDataServiceOperationRequest(_2737).setResourceKind(_2736).setOperationName(_2735.businessRuleMethod);_2738.execute(_2735.entry,{success:function(_2739){if(_2735.onSuccess){_2735.onSuccess(Sys.Serialization.JavaScriptSerializer.deserialize(_2739.response.Result));}},failure:function(_273a){if(_2735.onFailure){_2735.onFailure(_273a);}}});},formatDate:function(value){if(_272a.Convert.isDateString(value)){var date=_272a.Convert.toDateFromString(value);return _2728.format(date,{selector:"date",fullYear:true});}return "";}});return Sage.MainView.Import.ImportManagerUtility;});},"Sage/MainView/Import/SelectFile":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/number","dojo/string","Sage/MainView/Import/_WizardDialogBase","dojo/text!./templates/SelectFile.html","dojo/i18n!./nls/SelectFile","Sage/MainView/Import/ImportManagerUtility","Sage/Utility","Sage/Utility/File/Attachment"],function(_273b,_273c,_273d,_273e,_273f,_2740,_2741,_2742,_2743,_2744){var _2745=_2743.makeTemplateFromString(_2740);var _2746=_273b("Sage.MainView.Import.SelectFile",[_273f],{id:"dlgSelectFile",widgetTemplate:_2745,_nlsResources:_2741,_currentStep:_2742.importWizardStep.SelectFile,_fileInputOnChange:null,constructor:function(){this.inherited(arguments);},startup:function(){this._initializeFileUploadControl();this._initializeTemplateList();this.inherited(arguments);},isValid:function(){var msg="";dojo.addClass(this.errorNoUploadFile,"display-none");if(!this.importOptions.attachmentId){msg=_2741.errorNoUploadFile;dojo.removeClass(this.errorNoUploadFile,"display-none");this.spanValidationMessage.innerHTML=_2743.htmlEncode(msg);}_2742.setDomNodeVisible(this.divValidationMessage,(msg!==""));if(msg===""){this._updateImportOptions();return true;}return false;},destroy:function(){this.importTemplates.destroyRecursive();this.inherited(arguments);},_initializeFileUploadControl:function(){this._fileInputOnChange=dojo.hitch(this,_273c.connect(this.fileInputBtn,"onchange",this,this._handleFiles));this.subscriptions.push(dojo.subscribe("/entity/attachment/create",this,this._onNewFileUpload));},_initializeTemplateList:function(){var _2747={where:_273e.substitute("EntityName eq '${0}'",[this.importOptions.importEntity]),onSuccess:dojo.hitch(this,function(_2748){this.importTemplates=this._initializeTemplates(_2748);this.importTemplates.placeAt(this.templates_Container);})};_2742.requestImportTemplates(_2747);},_btnUploadFile_OnClick:function(){this.fileInputBtn.click();},_handleFiles:function(e){this._createAttachments(this.fileInputBtn.files);},_createAttachments:function(files){if(files.length>0){this.importOptions.isInitialized=false;this.lblFileUpload.textContent=_273e.substitute(_2741.txtFileContents_Caption,[files[0].name,_273d.round(files[0].size/1024,0)]);this.txtFakeUploadFile.set("value",files[0].name);_2744.createAttachmentSilent(files[0],{});}},_onNewFileUpload:function(_2749){this.importOptions.attachmentId=_2749.$key;this.importOptions.attachmentName=_2749.$descriptor;this.importOptions.fileName=_2749.fileName;this.importOptions.refreshDelimiterPage=true;this.importOptions.refreshMapFieldsPage=true;this.isValid();},_updateImportOptions:function(){if(!this.importOptions.refreshDelimiterPage){this.importOptions.refreshDelimiterPage=this.importTemplates.value!==this.importOptions.importTemplateId;}var _274a=!!this.importOptions.refreshMapFiledsPage||this.importTemplates.value!==this.importOptions.importTemplateId;if(_274a){var _274b=dijit.byId("dlgMapFields");if(_274b){_274b.destroyRecursive();}this.importOptions.refreshMapFieldsPage=false;}this.importOptions.refreshMapFieldsPage=this.importTemplates.value!==this.importOptions.importTemplateId;this.importOptions.importTemplateId=this.importTemplates.value!==""?this.importTemplates.value:null;this.importOptions.isSystemTemplate=!!(this.importTemplates.item&&this.importTemplates.item.IsSystemTemplate);}});return _2746;});},"Sage/MainView/Import/DefineDelimiter":function(){define(["dojo/_base/declare","dojo/string","dojo/on","dojo/_base/array","dojo/store/Memory","Sage/MainView/Import/_WizardDialogBase","dojo/text!./templates/DefineDelimiter.html","dojo/i18n!./nls/DefineDelimiter","Sage/MainView/Import/ImportManagerUtility","Sage/Utility","Sage/UI/Dialogs","dgrid/Grid","dgrid/Selection","dgrid/extensions/ColumnHider"],function(_274c,_274d,dOn,_274e,_274f,_2750,_2751,_2752,_2753,_2754,_2755,dGrid,_2756,_2757){var _2758=_2754.makeTemplateFromString(_2751);var _2759=_274c("Sage.MainView.Import.DefineDelimiter",[_2750],{id:"dlgDefineDelimiter",previewGrid:null,widgetTemplate:_2758,_nlsResources:_2752,_currentStep:_2753.importWizardStep.DefineDelimiter,constructor:function(){this.inherited(arguments);},show:function(){if(this.importOptions.refreshDelimiterPage){this.btnNext.setDisabled(true);_2753.setDomNodeVisible(this.divLoadingMessage,true);this._requestPreviewData();dOn(this.cmbQualifiers,"change",dojo.hitch(this,this._requestPreviewData));this.importOptions.refreshDelimiterPage=false;}this.inherited(arguments);},isValid:function(){return true;},_requestPreviewData:function(){this._updateImportOptions();var _275a={importEntity:this.importOptions.importEntity,importEntityType:this.importOptions.importEntityType,attachmentId:this.importOptions.attachmentId,importTemplateId:this.importOptions.importTemplateId,delimiter:this.importOptions.sourceModel?this.importOptions.sourceModel.Options.delimiter.value:null,qualifier:this.importOptions.sourceModel?this.importOptions.sourceModel.Options.qualifier.value:null,firstRowFieldNames:this.importOptions.firstRowFieldNames,numberRecordBack:"5",isInitialized:this.importOptions.isInitialized,sourceModel:this.importOptions.sourceModel,sourceColumns:this.importOptions.sourceColumns,defaultOwnerId:this.importOptions.defaultOwnerId,groupSettings:this.importOptions.groupSettings,metaDataObject:this.importOptions.metaDataObject,targetColumns:this.importOptions.targetList?this.importOptions.targetList.data:this.importOptions.targetList,matchOptions:this.importOptions.matchOptions,engineOptions:this.importOptions.engineOptions,defaultAdHocGroupName:this.importOptions.groupSettings.name};var _275b={entry:{"$name":"ReadImportData","request":{"ImportHistoryId":null,"importOptions":Sys.Serialization.JavaScriptSerializer.serialize(_275a)}},businessRuleMethod:"ReadImportData",onSuccess:dojo.hitch(this,function(_275c){this.importOptions.defaultOwnerId=_275c.defaultOwnerId;this.importOptions.groupSettings=_275c.groupSettings?_275c.groupSettings:{};this.importOptions.isInitialized=true;this.importOptions.metaDataObject=_275c.metaDataObject;this.importOptions.mappings=_275c.mappings;this.importOptions.sourceColumns=JSON.parse(JSON.stringify(_275c.sourceColumns));this.importOptions.sourceModel=_275c.sourceModel;this.importOptions.targetList=new _274f({data:_275c.targetColumns,idProperty:"name"});this.importOptions.matchOptions=_275c.matchOptions;this.importOptions.totalRecordCount=_275c.totalRecordCount;this.importOptions.engineOptions=_275c.engineOptions;this.lblPreviewData.textContent=_274d.substitute(_2752.txtPreview,[_275c.totalRecordCount,_275c.sourceColumns.length]);this._loadDefaults(_275c.sourceModel.Options);_2753.setDomNodeVisible(this.divLoadingMessage,false);this._loadPreviewData(_275c);this.btnNext.setDisabled(false);}),onFailure:function(_275d){_2755.showError(_274d.substitute(_2752.errorRequestFileOptions,[_275d]));}};_2753.importRuleRequest(_275b,"importHistory");},_loadDefaults:function(_275e){this.cmbQualifiers.attr("value",_275e.qualifier.value,false);switch(_275e.delimiter.value){case ",":this.rdoCommaOption.set("checked",true);break;case "\t":this.rdoTabOption.set("checked",true);break;case ";":this.rdoSemiColonOption.set("checked",true);break;case " ":this.rdoSpaceOption.set("checked",true);break;default:this.rdoOtherOption.set("checked",true);}},_loadPreviewData:function(_275f){var _2760={};_274e.forEach(_275f.sourceColumns,function(_2761,i){_2760[i]=_2761.displayName;});var grd=new (_274c([dGrid,_2756,_2757]))({className:"dgrid-autoheight dgrid-loading",columns:_2760,loadingMessage:this.gridLoading_Caption,selectionMode:"single"});grd.renderArray(_275f.records);if(this.previewGrid){this.previewGrid_Container.removeChild(this.previewGrid);this.previewGrid.destroy();}this.previewGrid_Container.addChild(grd);this.previewGrid=grd;},_rdoOption_OnClick:function(args){this.txtOtherOption.attr("disabled",!this.rdoOtherOption.checked);if(this.rdoOtherOption.checked&&this.txtOtherOption.value===""){return;}this.importOptions.sourceModel.Options.delimiter.value=args.currentTarget.getAttribute("value");this._requestPreviewData();},_txtOtherOption_OnChange:function(){if(this.txtOtherOption.value!==""){this.importOptions.sourceModel.Options.delimiter.value=this.txtOtherOption.get("value");this._requestPreviewData();}},_txtQualifier_OnChange:function(){this._requestPreviewData();},_chkFirstRowFieldNames_OnChange:function(){this._requestPreviewData();},_updateImportOptions:function(){if(this.cmbQualifiers.value!=="None"){this.importOptions.sourceModel.Options.qualifier.value=this.cmbQualifiers.value;}this.importOptions.firstRowFieldNames=this.chkFirstRowFieldNames.checked.toString();}});return _2759;});},"Sage/MainView/Import/MapFields":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/string","dojo/store/Memory","dojo/store/Observable","Sage/MainView/Import/_WizardDialogBase","dojo/text!./templates/MapFields.html","dojo/i18n!./nls/MapFields","Sage/MainView/Import/ImportManagerUtility","Sage/Utility","Sage/UI/Dialogs","dgrid/OnDemandGrid","dgrid/Keyboard","dgrid/Selection","dgrid/editor","dgrid/extensions/ColumnHider","dijit/form/FilteringSelect"],function(_2762,_2763,_2764,_2765,_2766,_2767,_2768,_2769,_276a,_276b,_276c,_276d,_276e,_276f,_2770,_2771,_2772){var _2773=_276b.makeTemplateFromString(_2768);var _2774=_2762("Sage.MainView.Import.MapFields",[_2767],{id:"dlgMapFields",widgetTemplate:_2773,_nlsResources:_2769,_currentStep:_276a.importWizardStep.MapFields,_grid:"",_mappingCount:0,constructor:function(){this.inherited(arguments);},startup:function(){this._requestMappings();},show:function(){this._setRequiredMappingsMsg();this.inherited(arguments);},btnMapped_OnClick:function(){this._setEntityColumnState(false,"entityDisplayName");this._grid.set({query:function(item){return item.targetProperty!=="";}});},btnAll_OnClick:function(){this._setEntityColumnState(false,"entityDisplayName");this._grid.set({query:{}});this._grid.columns.entityDisplayName.hidden=false;},isValid:function(){var msg="";this._generateMappings();if(!this._generateMatchMappings()){msg=_2769.errorRequiredMappings;this.spanValidationMessage.innerHTML=_276b.htmlEncode(msg);}_276a.setDomNodeVisible(this.divValidationMessage,(msg!==""));return msg==="";},_requestMappings:function(){var _2775={entry:{"$name":"GetImportMappings","request":{"ImportHistoryId":null,"importOptions":Sys.Serialization.JavaScriptSerializer.serialize(this.getConfigurationOptions())}},businessRuleMethod:"GetImportMappings",onSuccess:dojo.hitch(this,function(_2776){this._mappingCount=this._getMappingCount(_2776.defaultMappings);this._updateCaptions();this._loadMappingsData(_2776);this._resolveDefaultMappings();this._setRequiredMappingsMsg();}),onFailure:function(_2777){_276c.showError(_2764.substitute(_2769.errorRequestMappings,[_2777]));}};_276a.importRuleRequest(_2775,"importHistory");},_getMappingCount:function(_2778){var _2779=_2778.filter(dojo.hitch(this,function(_277a){return _277a.target.fieldType.indexOf(this.lookupTypeField)===-1;}));return _2778?_2779.length:0;},_loadMappingsData:function(_277b){var data=[];var _277c=new _2765({data:this._removeRelationshipProperties(),idProperty:"name"});this.importOptions.defaultMappings=_277b.defaultMappings;_2763.forEach(this.importOptions.sourceColumns,function(_277d,i){data.push({id:i,sourceProperty:_277d.displayName,targetProperty:"",entityDisplayName:"",});});this._grid=new (_2762([_276d,_276e,_276f,_2770,_2771]))({store:new _2766(new _2765({data:data,idProperty:"sourceProperty"})),sort:"id",columns:{id:{field:"id",hidden:true,unhidable:true},sourceProperty:_2769.colImportField_Caption,targetProperty:_2770({selectedValue:"FirstName",label:_2769.colInforField_Caption,field:"targetProperty",autoSave:true,autoSelect:true,editorArgs:{store:_277c,maxHeight:150,required:false,searchAttr:"displayName",labelAttr:"displayName"}},_2772),entityDisplayName:{label:_2769.colType_Caption,hidden:true}}},this.mappingsGrid);this._grid.on("dgrid-datachange",dojo.hitch(this,function(evt){var cell=this._grid.cell(evt);if(cell.column.field==="targetProperty"){if(evt.value===""){this._mappingCount--;}else{this._mappingCount++;}var _277e=this.importOptions.targetList.get(evt.value);var _277f=this._grid.cell(evt);var key=_277f.row.data.sourceProperty;var _2780=this._grid.store.get(key);_2780.entityDisplayName=_277e.entityDisplayName;_2780.targetProperty=_277e.name;_277e=dojo.byId(cell.element.children[0].id);this._grid.store.put(_2780);_277e.setAttribute("value",evt.value);this._updateCaptions();this._setRequiredMappingsMsg();}}));this._grid.set({query:{targetProperty:""}});this._grid.startup();},_setRequiredMappingsMsg:function(){var _2781="";if(this._grid.store){_2763.forEach(this.importOptions.selectedMatchOptions,dojo.hitch(this,function(_2782){if(_2782.property!==""){var _2783=this.importOptions.importEntity;_2783=_2783!==_2782.entity?_2764.substitute("${0}.${1}",[_2782.entity,_2782.property]):_2782.property;var row=this._grid.store.query({targetProperty:_2783});if(!row[0]){if(_2781===""){_2781=_2782.displayValue;}else{_2781+=_2764.substitute(", ${0}",[_2782.displayValue]);}}}}));}this.lblRequiredFields.textContent=_2764.substitute(_2769.txtRequired_Caption,[_2781]);_276a.setDomNodeVisible(this.divRequiredFields,(_2781!==""));},_getMapping:function(_2784){var _2785=null;_2763.some(this.importOptions.mappings,function(map){if(map.target.name===_2784){_2785=map;return true;}return false;});return _2785;},btnUnMapped_OnClick:function(){this._setEntityColumnState(true,"entityDisplayName");this._grid.set({query:{targetProperty:""}});},_updateCaptions:function(){this.lblMatchedFields.textContent=_2764.substitute(_2769.txtHeader_Caption,[this._mappingCount,this.importOptions.sourceColumns.length]);this.btnMapped.setAttribute("label",_2764.substitute(_2769.btnMapped_Caption,[this._mappingCount]));this.btnUnMapped.setAttribute("label",_2764.substitute(_2769.btnUnMapped_Caption,[this.importOptions.sourceColumns.length-this._mappingCount]));this.btnAll.setAttribute("label",_2764.substitute(_2769.btnAll_Caption,[this.importOptions.sourceColumns.length]));},_removeRelationshipProperties:function(){var _2786=[];_2763.forEach(this.importOptions.targetList.data,dojo.hitch(this,function(_2787){if(_2787.fieldType.indexOf(this.lookupTypeField)===-1){_2786.push(_2787);}}));return _2786;},_setEntityColumnState:function(_2788,_2789){this._grid.columns.entityDisplayName.hidden=_2788;this._grid._columnHiderCheckboxes.entityDisplayName.checked=!_2788;if(_2788){this._grid.styleColumn(_2789,"display: none;");}else{this._grid.styleColumn(_2789,"display: table-cell;");}},_resolveDefaultMappings:function(){_2763.forEach(this.importOptions.defaultMappings,dojo.hitch(this,function(map){var row=this._grid.store.get(map.source.name);if(row){var _278a=this.importOptions.targetList.get(map.target.name);if(_278a&&(_278a.fieldType.indexOf(this.lookupTypeField)===-1)){row.targetProperty=_278a.name;row.dataType=_278a.dataType;row.entityDisplayName=_278a.entityDisplayName;}}}));this._grid.refresh();},_generateMappings:function(){if(this._grid&&this._grid.store){var maps=[];_2763.forEach(this._grid.store.data,dojo.hitch(this,function(data){if(data.targetProperty!==""){maps.push({source:{name:data.sourceProperty,value:data.sourceProperty,displayName:""},target:this.getTargetProperty(this.importOptions.targetList.get(data.targetProperty),data.targetProperty)});}}));this.importOptions.mappings=maps;}},_generateMatchMappings:function(){var valid=true;_2763.forEach(this.importOptions.selectedMatchOptions,dojo.hitch(this,function(_278b){if(_278b.property!==""){var _278c=this.importOptions.importEntity;_278c=_278c!==_278b.entity?_2764.substitute("${0}.${1}",[_278b.entity,_278b.property]):_278b.property;var row=this._grid.store.query({targetProperty:_278c});if(row[0]){var map=this._getMapping(_278b.entity);if(map){map.target.searchProperty=_278b.property;}else{this.importOptions.mappings.push({source:{name:row[0].sourceProperty,value:row[0].sourceProperty,displayName:""},target:this.getTargetProperty(this.importOptions.targetList.get(_278b.entity),_278b.entity,_278b.property)});}}else{valid=false;}}else{_2763.some(this.importOptions.mappings,dojo.hitch(this,function(_278d,i){if(_278d.target.name===_278b.entity){this.importOptions.mappings.splice(i,1);return true;}return false;}));}}));return valid;}});return _2774;});},"Sage/MainView/Import/ManageImportOptions":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/string","dojo/store/Memory","Sage/MainView/Import/_WizardDialogBase","dojo/text!./templates/ManageImportOptions.html","dojo/i18n!./nls/ManageImportOptions","Sage/MainView/Import/ImportManagerUtility","Sage/Utility","Sage/UI/Controls/Lookup","dijit/form/FilteringSelect","dojox/layout/TableContainer"],function(_278e,_278f,_2790,_2791,_2792,_2793,_2794,_2795,_2796,_2797,_2798,_2799){var _279a=_2796.makeTemplateFromString(_2793);var _279b=_278e("Sage.MainView.Import.ManageDuplicates",[_2792],{id:"dlgManageImportOptions",widgetTemplate:_279a,_nlsResources:_2794,_currentStep:_2795.importWizardStep.ManageImportOptions,constructor:function(){this.inherited(arguments);},startup:function(){_2795.setDomNodeVisible(this.divAssociations,this.importOptions.matchOptions&&this.importOptions.matchOptions.length>0);this._loadMatchOptions();this._initializeDefaultOwner();this._assignDefaultValues();},show:function(){_2795.setDomNodeVisible(this.divValidationMessage,false);_278f.forEach(this.importOptions.matchOptions,function(_279c){var error=dojo.byId(_2790.substitute("${0}_ErrorTag",[_279c.name]));if(error){_2795.setDomNodeVisible(error,false);}});this.inherited(arguments);},isValid:function(){var msg="";dojo.addClass(this.errorNoAddHocGroupName,"display-none");if(this.rdoCreateAdHoc.checked&&this.txtAdHocGroupName.value===""){msg=_2794.errorNoAddHocGroupName;dojo.removeClass(this.errorNoAddHocGroupName,"display-none");this.spanValidationMessage.innerHTML=_2796.htmlEncode(msg);}_2795.setDomNodeVisible(this.divValidationMessage,(msg!==""));this._updateImportOptions();return msg==="";},destroy:function(){this.associations_Container.destroyRecursive();this.lueDefaultOwner.destroy();this.inherited(arguments);},_loadMatchOptions:function(){_278f.forEach(this.importOptions.matchOptions,dojo.hitch(this,function(_279d){this._addMatchOption(_279d);}));},_addMatchOption:function(item){var _279e=new _2799({showLabels:true,orientation:"horiz",style:"display:inline-block;padding-right:25px",});var _279f=new _2798({id:_2790.substitute("${0}_Association",[item.name]),store:new _2791({data:item.properties,idProperty:"name"}),maxHeight:150,searchAttr:"displayName",labelAttr:"displayName",placeHolder:this.selectOption_Caption,required:false,title:_2790.substitute("${0} ${1}",[item.displayName,_2794.match_Caption])});var _27a0=this._getDefaultValue(item);if(_27a0){_279f.attr("value",_27a0);}var _27a1=new dojo.create("span",{id:_2790.substitute("${0}_ErrorTag",[item.name]),style:"color: red;padding:25px 25px;",innerHTML:"*","class":"display-none"});_279e.addChild(_279f);this.associations_Container.addChild(_279e);this.associations_Container.containerNode.appendChild(_27a1);},_getDefaultValue:function(item){switch(item.name){case "Account":return !this.importOptions.importTemplateId&&!item.selectedValue?"AccountName":item.selectedValue;case "Contact":return !this.importOptions.importTemplateId&&!item.selectedValue?"Email":item.selectedValue;}return item.selectedValue;},_initializeDefaultOwner:function(){this.defaultOwnerLookupConfig={id:"_defaultOwner",structure:[{defaultCell:{sortable:true,width:"150px",editable:false,styles:"text-align: left;",propertyType:"System.String",excludeFromFilters:false,useAsResult:false,pickListName:null,defaultValue:""},cells:[{name:_2794.lookupDescriptionColText,field:"Description"},{name:_2794.lookupTypeColText,field:"Type"}]}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"ownerViews",sort:[{attribute:"Description"}]},isModal:true,initialLookup:true,preFilters:[],returnPrimaryKey:true,dialogTitle:_2794.lookupDefaultOwner_Caption,dialogButtonText:this.btnOK_Caption};this.lueDefaultOwner=new _2797({id:"lu_DefaultOwner",config:this.defaultOwnerLookupConfig,allowClearingResult:true,style:"width:100%"});dojo.place(this.lueDefaultOwner.domNode,this.defaultOwner_Container.domNode,"only");},_assignDefaultValues:function(){_2795.getOwner(this.importOptions.defaultOwnerId,this.lueDefaultOwner);this.lblImportOption.textContent=_2794.txtOption_Insert;this._initializeAdHocGroups();},_initializeAdHocGroups:function(){if(!this.adHocGroups){var svc=Sage.Services.getService("ClientGroupContext");svc.getAdHocGroupList(function(list){this.adHocGroups=new _2798({store:new _2791({data:list,idProperty:"$key"}),maxHeight:150,searchAttr:"name",labelAttr:"name",required:false,placeHolder:this.selectOption_Caption});this.adHocGroups.startup();this.adHocGroups_Container.addChild(this.adHocGroups);if(this.importOptions.groupSettings){if(this.importOptions.groupSettings.id){this.rdoExistingAdHoc.set("checked",true);this.adHocGroups.attr("value",this.importOptions.groupSettings.id);}else{if(this.importOptions.groupSettings.name){this.rdoCreateAdHoc.set("checked",true);this.txtAdHocGroupName.set("value",this.importOptions.groupSettings.name);}}}},this);}},_updateImportOptions:function(){this.importOptions.previewDataMode=this.cmbImportTypes.attr("displayedValue");this.importOptions.defaultOwnerId=this.lueDefaultOwner.selectedObject?this.lueDefaultOwner.selectedObject.$key:null;this.importOptions.groupSettings.name=this.rdoCreateAdHoc.checked?this.txtAdHocGroupName.value:null;this.importOptions.groupSettings.id=this.rdoExistingAdHoc.checked&&this.adHocGroups.value?this.adHocGroups.value:null;this.importOptions.previewAdHocGroup=this.rdoExistingAdHoc.checked?this.adHocGroups.attr("displayedValue"):this.txtAdHocGroupName.value;this.importOptions.selectedMatchOptions=[];_278f.forEach(this.importOptions.matchOptions,dojo.hitch(this,function(_27a2){var _27a3=dijit.byId(_2790.substitute("${0}_Association",[_27a2.name]));_27a2.selectedValue=_27a3?_27a3.value:null;if(_27a3){var _27a4=this.importOptions.importEntity;var _27a5=_27a4!==_27a2.name?_2790.substitute("${0}.${1}",[_27a2.name,_27a3.displayedValue]):_27a3.displayedValue;this.importOptions.selectedMatchOptions.push({property:_27a3.value,entity:_27a2.name,displayValue:_27a5});}}));},_cmbImportTypes_OnChange:function(){switch(this.cmbImportTypes.value){case "insert":this.lblImportOption.textContent=_2794.txtOption_Insert;break;case "update":this.lblImportOption.textContent=_2794.txtOption_Update;break;case "insertAndUpdate":this.lblImportOption.textContent=_2794.txtOption_InsertUpdate;break;}}});return _279b;});},"Sage/MainView/Import/AddActions":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","Sage/MainView/Import/_WizardDialogBase","dojo/text!./templates/AddActions.html","dojo/i18n!./nls/AddActions","Sage/MainView/Import/ImportManagerUtility","Sage/Utility"],function(_27a6,_27a7,_27a8,_27a9,_27aa,_27ab,_27ac,_27ad){var _27ae=_27ad.makeTemplateFromString(_27aa);var _27af=_27a6("Sage.MainView.Import.AddActions",[_27a9],{id:"dlgAddActions",widgetTemplate:_27ae,_nlsResources:_27ab,_currentStep:_27ac.importWizardStep.AddActions,constructor:function(){this.inherited(arguments);},startup:function(){this.inherited(arguments);}});return _27af;});},"Sage/MainView/Import/Review":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/string","dojo/topic","Sage/MainView/Import/_WizardDialogBase","dojo/text!./templates/Review.html","dojo/i18n!./nls/Review","Sage/MainView/Import/ImportManagerUtility","Sage/MainView/Import/ManageImportTemplate","Sage/Utility","Sage/Utility/Jobs","Sage/UI/Dialogs"],function(_27b0,_27b1,_27b2,_27b3,topic,_27b4,_27b5,_27b6,_27b7,_27b8,_27b9,jobs,_27ba){var _27bb=_27b9.makeTemplateFromString(_27b5);var _27bc=_27b0("Sage.MainView.Import.Review",[_27b4],{id:"dlgReview",templateDialogId:"dlgManageImportTemplate",widgetTemplate:_27bb,_nlsResources:_27b6,_currentStep:_27b7.importWizardStep.Review,constructor:function(){this.inherited(arguments);},show:function(){this._initializeTemplateList();this.previewFileName.textContent=_27b3.substitute(_27b6.previewFileName_Caption,[this.importOptions.fileName]);this.previewImportDataMode.textContent=_27b3.substitute(_27b6.previewImportDataMode,[this.importOptions.previewDataMode]);this.previewRecordCount.textContent=_27b3.substitute(_27b6.previewRecordCount_Caption,[this.importOptions.totalRecordCount]);this.previewAdHocGroup.textContent=_27b3.substitute(_27b6.previewAdHocGroup_Caption,[this.importOptions.previewAdHocGroup]);this.btnSaveTemplate.setDisabled(this.importOptions.importTemplateId===null);this.subscriptions.push(topic.subscribe("/importController/importWizard/savedImportTemplate",dojo.hitch(this,function(){this._initializeTemplateList();})));this.inherited(arguments);},_initializeTemplateList:function(){var _27bd={where:_27b3.substitute("EntityName eq '${0}'",[this.importOptions.importEntity]),onSuccess:dojo.hitch(this,function(_27be){if(this.importTemplates&&this.templates_Container){this.templates_Container.removeChild(this.importTemplates);}this.importTemplates=this._initializeTemplates(_27be);this.importTemplates.placeAt(this.templates_Container);this.btnSaveTemplate.setAttribute("Disabled",this.importOptions.isSystemTemplate);})};_27b7.requestImportTemplates(_27bd);},_btnSaveTemplate_OnClick:function(){this.saveImportJobTemplate(this.getTemplateConfigurationOptions());},_btnSaveAsTemplate_OnClick:function(){var _27bf=dijit.byId("dlgManageImportTemplate");if(_27bf){_27bf.destroyRecursive();}_27bf=new _27b8();_27bf.startup();_27bf.show();},_btnFinish_OnClick:function(){this._createOwnerMapping();this._startImportJob();this._dialog.hide();this.finishWizard();},_createOwnerMapping:function(){if(this.importOptions.defaultOwnerId){var _27c0=this.importOptions.targetList.get("Owner");if(_27c0){this.importOptions.mappings.push({source:{name:"",value:"",displayName:""},target:this.getTargetProperty(_27c0,"Owner","Id",this.importOptions.defaultOwnerId)});}}},_startImportJob:function(){var _27c1={descriptor:_27b3.substitute("${0} import: ${1}",[this.importOptions.importEntity,this.importOptions.attachmentName]),closable:true,title:_27b3.substitute(_27b6.txtJobTitle_Caption,[this.importOptions.importEntity]),key:"Sage.SalesLogix.BusinessRules.Jobs.ImportJob",parameters:[{"name":"ImportConfiguration","value":Sys.Serialization.JavaScriptSerializer.serialize(this.getConfigurationOptions())}],failure:function(error){_27ba.showError(_27b3.substitute(_27b6.errorJobFailed,[error.responseText]));},ensureZeroFilters:true};jobs.triggerJobAndDisplayProgressDialog(_27c1);}});return _27bc;});},"Sage/MainView/Import/ManageImportTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/string","Sage/MainView/Import/_WizardDialogBase","dojo/text!./templates/ManageImportTemplate.html","dojo/i18n!./nls/ManageImportTemplate","Sage/Utility","Sage/UI/Dialogs","Sage/MainView/Import/ImportManagerUtility","dgrid/Selection","dgrid/OnDemandGrid","dgrid/Keyboard","dojo/store/Memory","dgrid/extensions/ColumnHider","dgrid/editor","Sage/Data/SDataServiceRegistry"],function(_27c2,dLang,_27c3,_27c4,_27c5,_27c6,_27c7,_27c8,_27c9,_27ca,_27cb,_27cc,_27cd,_27ce,_27cf,_27d0){var _27d1=_27c7.makeTemplateFromString(_27c5);var _27d2=_27c2("Sage.MainView.Import.ManageImportTemplate",[_27c4],{id:"dlgManageImportTemplate",widgetTemplate:_27d1,_nlsResources:_27c6,templatesGrd:"",constructor:function(){this.inherited(arguments);},startup:function(){this._requestImportTemplates();},_requestImportTemplates:function(){var _27d3={onSuccess:dojo.hitch(this,function(_27d4){_27c9.setDomNodeVisible(this.divLoadingMessage,false);this._loadImportTemplates(_27d4);})};_27c9.requestImportTemplates(_27d3);},_loadImportTemplates:function(_27d5){this.templatesGrd=new (_27c2([_27cb,_27cc,_27ca,_27cf,_27ce]))({className:".dgrid-autoheight .dgrid-no-data",store:new _27cd({data:_27d5,idProperty:"$key"}),columns:{Delete:{label:" ",field:"deletelink",renderCell:dLang.hitch(this,function(_27d6,value,node){var link=document.createElement("a");link.style.cursor="pointer";var _27d7=document.createTextNode(_27c6.colDelete);link.appendChild(_27d7);link.title=_27c6.colDelete;link.onclick=dLang.hitch(this,function(){this._removeImportTemplate(_27d6.$key);this._deleteImportTemplate(_27d6.$key);});node.appendChild(link);}),sortable:false},TemplateName:_27c6.colDescription,EntityName:_27c6.colEntityName,CreateUser:{label:_27c6.colCreatedBy,get:function(data){var user=_27c9.getUserName(data.CreateUser);if(user){return user.$descriptor;}return "";}},CreateDate:{label:_27c6.colCreatedDate,get:function(data){return _27c9.formatDate(data.CreateDate);}},ModifyUser:{label:_27c6.colModifiedBy,get:function(data){if(data.ModifyUser!==null){var user=_27c9.getUserName(data.ModifyUser);if(user){return user.$descriptor;}}return "";}},ModifyDate:{label:_27c6.colModifiedDate,get:function(data){return _27c9.formatDate(data.ModifyDate);}}},loadingMessage:this.gridLoading_Caption,noDataMessage:this.gridNoResults_Caption},this.templatesGrid);this.templatesGrd.startup();},_removeImportTemplate:function(_27d8){if(this.templatesGrd){this.templatesGrd.store.remove(_27d8);this.templatesGrd.refresh();}},_deleteImportTemplate:function(_27d9){var _27da=new Sage.SData.Client.SDataSingleResourceRequest(_27d0.getSDataService("dynamic"));_27da.setResourceKind("importTemplates");_27da.setResourceSelector(_27c3.substitute("'${0}'",[_27d9]));_27da["delete"]({},{scope:this,failure:function(error){_27c8.showError(_27c3.substitute(_27c6.errorDeletingTemplate,[error]));}});},_btnSave_OnClick:function(){if(this._isValid()){this.importOptions.templateName=this.txtTemplateDescription.get("value");this.saveImportJobTemplate(this.getTemplateConfigurationOptions(true));this._dialog.hide();}},_isValid:function(){var msg="";dojo.addClass(this.errorInvalidDescription,"display-none");if(this.txtTemplateDescription.value===""){msg=_27c6.errorNoTemplateDescription;dojo.removeClass(this.errorInvalidDescription,"display-none");this.spanValidationMessage.innerHTML=_27c7.htmlEncode(msg);}_27c9.setDomNodeVisible(this.divValidationMessage,(msg!==""));return msg==="";},_btnCancel_OnClick:function(){this._dialog.hide();}});return _27d2;});},"Sage/TaskPane/ContactTasksTasklet":function(){define(["dojo/i18n!./nls/ContactTasksTasklet","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneContent","Sage/Data/SingleEntrySDataStore","Sage/Data/WritableSDataStore","Sage/MainView/Contact/ContactUserAssociationEditor","dojo/_base/declare","Sage/UI/Dialogs"],function(_27db,_27dc,_27dd,_27de,_27df,_27e0,_27e1,_27e2){var _27e3=_27e1("Sage.TaskPane.ContactTasksTasklet",[_27dc,_27dd],{taskItems:[],oAuthProviders:null,endPointId:"",constructor:function(){dojo.mixin(this,_27db);this.taskItems=[{taskId:"Associate Contact",type:"Link",displayName:this.associateContactTitle,clientAction:"contactTasksActions.associateContact();",securedAction:"Entities/Contact/AssociateContact"},{taskId:"Disassociate Contact",type:"Link",displayName:this.disAssociateContactTitle,clientAction:"contactTasksActions.disAssociateContact();",securedAction:"Entities/Contact/DisAssociateContact"}];},associateContact:function(){var self=this;this._selectionInfo=this.getSelectionInfo();if(this._selectionInfo.selectionCount===0){_27e2.showError(this.singleSelectionErrorMessage);}else{if(this._selectionInfo.selectionCount>1){_27e2.showError(this.multipleSelectionErrorMessage);}else{var _27e4={"selectionInfo":this._selectionInfo,"action":"associate"};this._setupStore();this._contactUserStore.fetch({predicate:"ContactId eq '"+this._selectionInfo.selectedIds[0]+"'",onComplete:function(_27e5){_27e2.showError(self.associationExistsMessage);},onError:function(){self.prepareSelectedRecords(this.associateContactActionItem(_27e4));},scope:this});}}},disAssociateContact:function(){this._selectionInfo=this.getSelectionInfo();if(this._selectionInfo.selectionCount===0){_27e2.showError(this.noSelectionErrorMessage);}else{this.prepareSelectedRecords(this.confirmDisassociate(this));}},confirmDisassociate:function(self){return function(){var _27e6=self.confirmDisAssociate;if(self._selectionInfo.selectionCount>1){_27e6=self.confirmDisAssociateMultiple;}_27e2.raiseQueryDialog(self.disAssociateDialogTitle,dojo.string.substitute(_27e6,[self._selectionInfo.selectionCount]),function(_27e7){self.disAssociateActionItem(_27e7,self);},self.okButtonText,self.cancelButtonText);};},disAssociateActionItem:function(_27e8,self){if(_27e8){self.getSelectionInfo();var _27e9=this.selectionInfo.selectedIds.join();this._removeContactUsers(_27e9,self._successfulContactUserDelete,self);}},_removeContactUsers:function(_27ea,_27eb,scope){var _27ec=Sage.Data.SDataServiceRegistry.getSDataService("dynamic");var _27ed=new Sage.SData.Client.SDataServiceOperationRequest(_27ec).setResourceKind("ContactUsers").setOperationName("RemoveContactUserAssociations");var entry={"$name":"RemoveContactUserAssociations","request":{"ContactUserId":null,"contactIds":_27ea,"userIds":null}};_27ed.execute(entry,{success:function(){},failure:function(){},scope:scope||this});},_successfulContactUserDelete:function(){},_failedContactUserDelete:function(){},_setupStore:function(){if(!this._contactUserStore){this._contactUserStore=new _27de({include:[],resourceKind:"contactUsers",service:Sage.Data.SDataServiceRegistry.getSDataService("dynamic")});}},associateContactActionItem:function(_27ee,_27ef){return function(){var _27f0=dijit.byId("dlgContactUserAssociation");if(!_27f0){_27f0=new _27e0(_27ee,_27ef);}else{_27f0.setSelectionInfo(_27ee,_27ef);}_27f0.show();};}});return _27e3;});},"Sage/TaskPane/GroupListTasklet":function(){define(["dojox/grid/DataGrid","Sage/Data/SDataStore","Sage/Data/SDataServiceRegistry","dojo/string","Sage/Groups/GroupContextService","dojo/_base/declare","dijit/_Widget","dojo/_base/lang","Sage/UI/Filters/FilterManager","dojo/_base/array","Sage/Utility/_LocalStorageMixin","dojo/topic","dojo/_base/xhr","dojo/_base/array","dojo/dom-style","dojo/dom-construct","Sage/MainView/Options/OptionsDialog","dojo/query","dojo/dom-class","dojo/dom-attr","dojo/aspect","dojo/json","dojo/i18n!./nls/GroupListTasklet","dojo/dom-geometry","Sage/Utility/Groups"],function(_27f1,_27f2,_27f3,_27f4,_27f5,_27f6,_27f7,lang,_27f8,array,_27f9,topic,_27fa,_27fb,_27fc,_27fd,_27fe,_27ff,_2800,_2801,_2802,json,_2803,_2804,_2805){var _2806=_27f6("Sage.Groups.GroupListTasklet",[_27f7,_27f9],{_contextSetHandle:null,_groupChangedHandle:null,gridLoadedHandler:null,gridOnSelectedHandle:null,groupContextService:null,context:null,grid:null,store:null,query:"",service:null,id:"GroupListTasklet",keyAlias:"",columnDisplayName:"",allowOnSelectToFire:true,STORE_KEY_STORE_QUERY:"_STORE_QUERY_",fieldCount:0,mode:"Standard",hideExtendedGroupListOnSelection:true,showExtendedGroupListOnLookup:false,gridLoadedLookupResultsHandler:null,extendedGroupListTaskPaneWidth:400,changingGroup:false,SESSION_STORE_GROUP_LAYOUT_KEY:"EGL_GROUP_LAYOUT_",SESSION_STORE_USER_OPTIONS_KEY:"EGL_USER_OPTION_",LOCAL_STORE_EGL_NAMESPACE:"EGL",LOCAL_STORE_EGL_MODE_KEY:"MODE_",performingLookup:false,previousGroupId:null,standardWidth:200,_gridSelect:null,_gridStructure:null,shouldRecreateGrid:false,subscribesTo:{adhocGroupRemoved:"/group/adhoc/removed",groupNavFirst:"/group/nav/first",groupNavPrevious:"/group/nav/previous",groupNavNext:"/group/nav/next",groupNavLast:"/group/nav/last",userOptionsChanged:"userOptions/changed"},constructor:function(_2807){this.inherited(arguments);lang.mixin(this,_2807);lang.mixin(this,_2803);this.groupContextService=Sage.Services.getService("ClientGroupContext");this.context=this.groupContextService.getContext();topic.subscribe(this.subscribesTo.userOptionsChanged,lang.hitch(this,this._onUserOptionsChanged));this._loadUserOptions();this._createToolbarButtons();this._connectToCommonTasksToggleEvent();this.counter=0;this._loadMode();if(this.context.CurrentFamily===null){this._contextSetHandle=dojo.connect(this.groupContextService,"onContextSet",this,"_createList");}else{this.toggleMode(this.mode);}this._groupChangedHandle=dojo.connect(this.groupContextService,"onCurrentGroupChanged",this,"_groupChanged");topic.subscribe(this.subscribesTo.groupNavFirst,lang.hitch(this,this._onGroupNavFirst));topic.subscribe(this.subscribesTo.groupNavPrevious,lang.hitch(this,this._onGroupNavPrevious));topic.subscribe(this.subscribesTo.groupNavNext,lang.hitch(this,this._onGroupNavNext));topic.subscribe(this.subscribesTo.groupNavLast,lang.hitch(this,this._onGroupNavLast));topic.subscribe(this.subscribesTo.adhocGroupRemoved,lang.hitch(this,this._onRecordRemoved));},_onGroupNavFirst:function(args){this.selectGridRow(0);},_onGroupNavLast:function(args){this.selectGridRow(args.count-1);},_onGroupNavPrevious:function(args){var _2808=args.position-1;this.selectGridRow(_2808-1);},_onGroupNavNext:function(args){var _2809=args.position-1;this.selectGridRow(_2809+1);},_onRecordRemoved:function(args){var index,_280a;index=this.grid.selection.selectedIndex;if(index===0){_280a=index+1;}else{_280a=index-1;}this.selectGridRow(_280a);this._onSelected(_280a);this._onRecordRemovedRefresh(index===0?index:_280a);},_onRecordRemovedRefresh:function(index){if(this.grid){this.gridRefreshedHandler=dojo.connect(this.grid,"_onFetchComplete",this,function(){this.selectGridRow(index);});try{this.grid.setStore(this.get("store"));}catch(err){}}},_groupChanged:function(){this.counter++;if(this.performingLookup&&this.counter<2&&this.previousGroupId!=="LOOKUPRESULTS"){return;}this.changingGroup=true;if(this.grid&&!this.shouldNotUpdate){try{if(this.mode==="Extended"){this.toggleMode("Extended");this.gridLoadedHandler=dojo.connect(this.grid,"_onFetchComplete",this,"_groupChangedAndLoaded");}else{var _280b=this.groupContextService.getContext();if(_280b["CurrentGroupID"]==="LOOKUPRESULTS"&&this.showExtendedGroupListOnLookup){this.toggleMode("Extended");this.gridLoadedHandler=dojo.connect(this.grid,"_onFetchComplete",this,"_groupChangedAndLoaded");}else{this.gridLoadedHandler=dojo.connect(this.grid,"_onFetchComplete",this,"_groupChangedAndLoaded");this.grid.setStore(this.get("store"));}}}catch(err){}}},_groupChangedAndLoaded:function(){if(this.grid.rowCount===0){return;}if(!(this._getGroupID()==="LOOKUPRESULTS"&&this.mode==="Extended")){this.selectGridRow(0);this._onSelected(0);}if(this.gridLoadedHandler){dojo.disconnect(this.gridLoadedHandler);}this.changingGroup=false;this.counter=0;this.performingLookup=false;},_getStoreQueryKey:function(){var id=this.STORE_KEY_STORE_QUERY+this._getGroupID();return id;},_getGroupNS:function(){var ns=Sage.Groups.GroupManager.LOCALSTORE_NAMESPACE+"-"+this._getGroupID();return ns;},_getGroupID:function(){this.context=this.groupContextService.getContext();var _280c=-1;if(this.context){_280c=this.context.CurrentGroupID;}return _280c;},_getStoreAttr:function(){this.context=this.groupContextService.getContext();this.context.CurrentFamily=this.context.CurrentFamily.toUpperCase();var _280d="'"+this.context.CurrentGroupID+"'";if(this.context["CurrentGroupID"]==="LOOKUPRESULTS"){this.context["CurrentName"]="Lookup Results";}var temp=this.getFromLocalStorage(this._getStoreQueryKey(),this._getGroupNS()),_280e={resourceKind:"groups",service:this.service,queryName:"execute",resourcePredicate:_280d,select:this._getSelect()};if(temp&&temp.store&&temp.query){_280e.select=temp.store.select;_280e.resourcePredicate=temp.store.resourcePredicate;this.query=temp.query;if(this.query){_280e.where=this.query;}}this.store=new _27f2(_280e);return this.store;},refreshGrid:function(){this.context=this.groupContextService.getContext();var _280f=this.context.CurrentEntityPosition-1;this.selectGridRow(_280f);if(this.gridRefreshedHandler){dojo.disconnect(this.gridRefreshedHandler);}},selectGridRow:function(_2810){this.allowOnSelectToFire=false;if(this.grid.rowCount>0){this.grid.scrollToRow(_2810);this.grid.selection.clear();this.grid.selection.select(_2810);this.grid.onSelected(_2810);}else{Sage.Link.toListView();}this.allowOnSelectToFire=true;},uninitialize:function(){try{if(this.grid&&this.grid.destroy){this.grid.destroy();}if(this.gridOnSelectedHandle){this.gridOnSelectedHandle.remove();}}catch(err){}this.inherited(arguments);},_createList:function(){var self=this,_2811=this.id+"_grid",grid;this.service=_27f3.getSDataService("system");if(this.grid){this.grid.setStore(this.get("store"));}else{var _2812=this._getGridStructure();var _2813=this._getHeight();grid=new _27f1({store:this.get("store"),id:_2811,structure:_2812,showTitle:false,autoWidth:false,rowSelector:false,selectionMode:"single",width:"100%",height:_2813+"px",onHeaderCellClick:function(e){self.sorting=true;self.gridRefreshedOnSortHandler=dojo.connect(grid,"_onFetchComplete",self,"_onGridSorted");this.setSortIndex(e.cell.index);this.onHeaderClick(e);}});grid.rowsPerPage=100;dojo.byId(this.id+"_node").appendChild(grid.domNode);if(!this.changingGroup){this.gridRefreshedHandler=dojo.connect(grid,"_onFetchComplete",this,"refreshGrid");}grid.startup();this.grid=grid;}this.gridOnSelectedHandle=this.grid.on("selected",lang.hitch(this,this._onSelected));},_onSelected:function(index){if(!this.allowOnSelectToFire){return;}var cec,_2814,_2815;if(Sage.Services.hasService("ClientEntityContext")){cec=Sage.Services.getService("ClientEntityContext");_2814=cec.getContext().EntityId;_2815=this.grid.selection.getFirstSelected();if(_2815){cec.navigateSLXGroupEntity(_2815[this.keyAlias],_2814,index+1);}}if(this.hideExtendedGroupListOnSelection&&(this.mode==="Extended")&&!this.sorting&&!this.changingGroup){this.toggleMode("Standard");}this.sorting=false;},_createToolbarButtons:function(){var _2816=_27ff(".task-pane-header-tools");var _2817=_27f4.substitute("<a href=\"javascript:void(0)\" title=\"\"><div class=\"Global_Images icon16x16 icon_options_16x16\" id=\"ExtendedGroupList_options\" title=\"${0}\" style=\"cursor: pointer;\"></div></a>",[this.GroupListOptionsTitle]);_27fd.place(_2817,_2816[0],1);dojo.connect(dojo.byId("ExtendedGroupList_options"),"onclick",function(evt){var _2818=dijit.byId("dlgOptions");if(!_2818){_2818=new _27fe();}_2818.startup();_2818.show();});var _2819=this;var _281a=_27f4.substitute("<a href=\"javascript:void(0)\" title=\"\" id=\"xxxx\"><div class=\"Global_Images icon16x16 icon_Toggle_Maximize_16x16\" title=\"${0}\" id=\"ExtendedGroupList_toggle\" style=\"cursor: pointer;\"></div></a>",[this.maximizeTitle]);_27fd.place(_281a,_2816[0],3);dojo.connect(dojo.byId("ExtendedGroupList_toggle"),"onclick",function(evt){_2819.toggleMode();});},_loadUserOptions:function(){var svc=Sage.Services.getService("UserOptions");if(svc){var _281b=this.SESSION_STORE_USER_OPTIONS_KEY+"ExtendedGroupList_FieldCount";var value=this._getFromSessionStorage(_281b);if(value!==null&&typeof value!=="undefined"){this.fieldCount=value;}else{svc.get("FieldCount","ExtendedGroupList",lang.hitch(this,function(_281c){if(_281c&&_281c.value){this.fieldCount=parseInt(_281c.value);this._addToSessionStorage(_281b,this.fieldCount);}}),null,null,true);}_281b=this.SESSION_STORE_USER_OPTIONS_KEY+"ExtendedGroupList_HideOnSelection";value=this._getFromSessionStorage(_281b);if(value!==null&&typeof value!=="undefined"){this.hideExtendedGroupListOnSelection=value;}else{svc.get("HideOnSelection","ExtendedGroupList",lang.hitch(this,function(_281d){if(_281d){this.hideExtendedGroupListOnSelection=(_281d.value==="T")?true:false;this._addToSessionStorage(_281b,this.hideExtendedGroupListOnSelection);}}),null,null,true);}_281b=this.SESSION_STORE_USER_OPTIONS_KEY+"ExtendedGroupList_ShowOnLookup";value=this._getFromSessionStorage(_281b);if(value!==null&&typeof value!=="undefined"){this.showExtendedGroupListOnLookup=value;}else{svc.get("ShowOnLookup","ExtendedGroupList",lang.hitch(this,function(_281e){if(_281e){this.showExtendedGroupListOnLookup=(_281e.value==="T")?true:false;this._addToSessionStorage(_281b,this.showExtendedGroupListOnLookup);}}),null,null,true);}}},_onUserOptionsChanged:function(_281f){this.shouldRecreateGrid=false;if(this.fieldCount!==_281f.extendedGroupList.fieldCount){this.shouldRecreateGrid=true;}this.fieldCount=_281f.extendedGroupList.fieldCount;var _2820=this.SESSION_STORE_USER_OPTIONS_KEY+"ExtendedGroupList_FieldCount";this._addToSessionStorage(_2820,this.fieldCount);this.hideExtendedGroupListOnSelection=_281f.extendedGroupList.hideOnSelection;_2820=this.SESSION_STORE_USER_OPTIONS_KEY+"ExtendedGroupList_HideOnSelection";this._addToSessionStorage(_2820,this.hideExtendedGroupListOnSelection);this.showExtendedGroupListOnLookup=_281f.extendedGroupList.showOnLookup;_2820=this.SESSION_STORE_USER_OPTIONS_KEY+"ExtendedGroupList_ShowOnLookup";this._addToSessionStorage(_2820,this.showExtendedGroupListOnLookup);if(this.mode==="Extended"&&this.shouldRecreateGrid){this.toggleMode("Extended");}},_getCurrentFamily:function(){var _2821=Sage.Services.getService("ClientGroupContext");var _2822=_2821&&_2821.getContext();var _2823=_2822&&_2822.CurrentFamily;return _2823;},_getCurrentGroupLayout:function(){var _2824=this._getCurrentFamily();var _2825=this.SESSION_STORE_GROUP_LAYOUT_KEY+this._getGroupID();if(this._getGroupID()==="LOOKUPRESULTS"){_2825=_2825+"_"+_2824;}var _2826=this._getFromSessionStorage(_2825);if(!_2826){var url="slxdata.ashx/slx/system/-/groups('"+this._getGroupID()+"')?select=layout/dateTimeType,layout/alias,layout/caption,layout/width,layout/fieldType,layout/format,layout/formatString,layout/propertyPath,layout/visible,layout/webLink,layout/dataPath&format=json";_27fa("GET",{url:url,handleAs:"json",sync:true,preventCache:true}).then(function(data){_2826=data.layout;});this._addToSessionStorage(_2825,_2826);}var _2827=this.fieldCount>0?this.fieldCount:20;if(_2826.length>_2827){_2826=_2826.splice(0,_2827);}return _2826;},_getSelect:function(){var _2828=this._getCurrentGroupLayout();var _2829=[this.keyAlias,this.columnDisplayName];if(this.mode==="Extended"){if(!this._gridSelect){var _282a=_2805.getGridStructure(_2828,true);this._gridStructure=_282a.structure;this._gridSelect=_282a.select;}this._gridSelect.forEach(function(item,index){_2829.push(item);});}return _2829;},_addToSessionStorage:function(_282b,data){sessionStorage.setItem(_282b,json.stringify(data));},_getFromSessionStorage:function(_282c){var _282d=sessionStorage.getItem(_282c);var data;if(_282d!==null&&typeof _282d!=="undefined"){data=json.parse(_282d);}return data;},_getModeFromLocalStorage:function(){var _282e=this.LOCAL_STORE_EGL_MODE_KEY+this._getGroupID();var mode=this.getFromLocalStorage(_282e(),this.LOCAL_STORE_EGL_NAMESPACE);return mode;},_getGridStructure:function(){var self=this;var _282f=[];if(this.mode==="Standard"){_282f.push({field:"_item",headerClasses:"displaynone",width:"100%",formatter:function(item){return (item&&item.hasOwnProperty(self.columnDisplayName)?item[self.columnDisplayName]:dojo.string.substitute("(${0})",[item[self.keyAlias]]));}});_282f.push({field:this.keyAlias,hidden:true,headerClasses:"displaynone",width:"0px"});}else{var _2830=this._getCurrentGroupLayout();if(!this._gridStructure||this.shouldRecreateGrid||this.changingGroup){var _2831=_2805.getGridStructure(_2830,true);this._gridStructure=_2831.structure;this._gridSelect=_2831.select;}_282f=this._gridStructure;}return _282f;},_getHeight:function(){var _2832=dojo.marginBox(dojo.byId("TaskPane_item_CommonTasksTasklet")).h;var _2833=dojo.marginBox(dojo.byId("TaskPane")).h;var _2834=_2833-_2832-110;if(_2834<230){_2834=230;}return _2834;},toggleMode:function(mode){var _2835=dijit.byId("TaskPane");if(this.mode==="Standard"){this.standardWidth=_2804.getMarginBox(_2835.domNode).w;}this.uninitialize();this.grid=null;this.mode=mode?mode:(this.mode==="Standard")?"Extended":"Standard";this._resizeTaskPane();this._createList();this._setExtendedGroupListToggleIcon();this._saveMode();},_setExtendedGroupListToggleIcon:function(){if(this.mode==="Extended"){_2800.remove("ExtendedGroupList_toggle","icon_Toggle_Maximize_16x16");_2800.add("ExtendedGroupList_toggle","icon_Toggle_Minimize_16x16");_2801.set("ExtendedGroupList_toggle","title",this.minimizeTitle);}else{_2800.remove("ExtendedGroupList_toggle","icon_Toggle_Minimize_16x16");_2800.add("ExtendedGroupList_toggle","icon_Toggle_Maximize_16x16");_2801.set("ExtendedGroupList_toggle","title",this.maximizeTitle);}},_resizeTaskPane:function(){var _2836=dijit.byId("TaskPane");var _2837=_27fc.get(_2836.domNode,"width");if(this.mode==="Extended"){if(_2837<this.extendedGroupListTaskPaneWidth){var width=this.extendedGroupListTaskPaneWidth+"px";_27fc.set(_2836.domNode,"width",width);dijit.byId("innerBorder").resize();}}else{_2804.setMarginBox(_2836.domNode,{w:this.standardWidth});dijit.byId("innerBorder").resize();}if(this.mode==="Extended"){dijit.byId("TaskPane_item_CommonTasksTasklet").set("open",false);}else{dijit.byId("TaskPane_item_CommonTasksTasklet").set("open",true);}},_connectToCommonTasksToggleEvent:function(){var _2838=this;var _2839=dijit.byId("TaskPane_item_CommonTasksTasklet");if(_2839){dojo.connect(_2839,"toggle",function(){var _283a=dojo.byId("GroupList_grid");setTimeout(function(){var _283b=_2838._getHeight()+"px";_27fc.set(_283a,"height",_283b);_2838.grid.resize();_2838.grid.update();},250);});}},_onGridSorted:function(){this.selectGridRow(0);this._onSelected(0);if(this.gridRefreshedOnSortHandler){dojo.disconnect(this.gridRefreshedOnSortHandler);}},_loadMode:function(){var _283c=this._getCurrentFamily();var _283d=this.LOCAL_STORE_EGL_MODE_KEY+_283c;var value=this.getFromLocalStorage(_283d,this.LOCAL_STORE_EGL_NAMESPACE);if(value!==null&&typeof value!=="undefined"){this.mode=value;}else{this.mode="Standard";}},_saveMode:function(){var _283e=this._getCurrentFamily();var _283f=this.LOCAL_STORE_EGL_MODE_KEY+_283e;this.saveToLocalStorage(_283f,this.mode,this.LOCAL_STORE_EGL_NAMESPACE);}});return _2806;});},"Sage/Utility/Groups":function(){define(["Sage/Groups/GroupLookup","Sage/UI/Columns/Boolean","Sage/UI/Columns/DateTime","Sage/UI/Columns/Numeric","Sage/UI/Columns/OwnerType","Sage/UI/Columns/Phone","Sage/UI/Columns/UserType","Sage/UI/Columns/Currency","Sage/UI/Columns/SlxLink","dojo/_base/array","dojo/string"],function(_2840,_2841,_2842,_2843,_2844,_2845,_2846,_2847,_2848,_2849,_284a){Sage.namespace("Utility.Groups");dojo.mixin(Sage.Utility.Groups,{showMainLookupFor:function(_284b,page){var _284c=Sage.Services.getService("GroupLookupManager");if(_284c){if(typeof _284b==="undefined"){_284c.showLookup();}else{_284c.showLookup({family:_284b,returnTo:page||false});}}},getGridStructure:function(_284d,_284e){var _284f={};var _2850=[];var _2851=[];var _2852=Sage.Services.getService("ClientGroupContext"),_2853;if(_2852){_2853=_2852.getContext();}if(_284d.length>0){_2849.forEach(_284d,function(item,i){_2851.push(item["alias"]);if(item["visible"]){if(item["webLink"]&&!_284e){var _2854=item["dataPath"],_2855=_2854.lastIndexOf("!")>-1?_2854.substring(0,_2854.lastIndexOf("!")).substring(_2854.lastIndexOf(".")+1):_2854.substring(0,_2854.lastIndexOf(":")),_2856=_2855+"ID";if(item["alias"]==="ACCOUNT"||item["alias"].match(/A\d+_ACCOUNT/ig)){_2855="ACCOUNT";_2856="ACCOUNTID";}if((_2853)&&(_2855===_2853.CurrentTable)){_2855=_2853.CurrentEntity;_2856=_2853.CurrentTableKeyField;}if(item.alias.lastIndexOf("_")===2){var list=item.alias.split("_");_2856=_284a.substitute("${0}_${1}",[list[0],_2856]);}_2851.push(_2856);_2850.push({field:item["alias"],property:item["propertyPath"],name:item["caption"],type:_2848,pageName:_2855,idField:_2856,width:item["width"]+"px"});}else{if(item["alias"].match(/^email$/i)){item["format"]="Email";}if(item["fieldType"]==="DateTime"){item["format"]="DateTime";}switch(item["format"]){case "Owner":var _2857=item["alias"]+"NAME";_2851.push(_2857);_2850.push({field:_2857,styles:"text-align: "+item["align"]+";",name:item["caption"],width:item["width"]+"px"});break;case "User":var _2858=item["alias"]+"NAME";_2851.push(_2858);_2850.push({field:_2858,styles:"text-align: "+item["align"]+";",name:item["caption"],width:item["width"]+"px"});break;case "DateTime":_2850.push({field:item["alias"],property:item["propertyPath"],name:item["caption"],type:_2842,styles:"text-align: "+item["align"]+";",datePattern:item["formatString"],dateTimeType:item["dateTimeType"],width:item["width"]+"px"});break;case "Percent":_2850.push({field:item["alias"],property:item["propertyPath"],name:item["caption"],type:_2843,styles:"text-align: "+item["align"]+";",constraints:{places:Sage.Utility.getPrecision(item["formatString"]),round:-1},fercent:true,formatType:"Percent",width:item["width"]+"px",isWholeNumberPercent:false});break;case "Currency":_2850.push({field:item["alias"],property:item["caption"],name:item["caption"],type:_2847,styles:"text-align: "+item["align"]+";",width:item["width"]+"px"});break;case "Fixed":_2850.push({field:item["alias"],property:item["propertyPath"],name:item["caption"],type:_2843,styles:"text-align: "+item["align"]+";",constraints:{places:Sage.Utility.getPrecision(item["formatString"]),round:-1},fercent:true,formatType:item["formatString"][item["formatString"].length-1]==="%"?"Percent":"Number",width:item["width"]+"px",isWholeNumberPercent:item["format"]==="Percent"?false:true});break;case "Boolean":_2850.push({field:item["alias"],property:item["propertyPath"],name:item["caption"],type:_2841,styles:"text-align: "+item["align"]+";",formatString:item["formatString"],width:item["width"]+"px"});break;case "Email":_2850.push({field:item["alias"],property:item["propertyPath"],name:item["caption"],styles:"text-align: "+item["align"]+";",formatter:function(val){if(!val){return "";}return dojo.string.substitute("<a href=mailto:${0}>${0}</a>",[Sage.Utility.htmlEncode(val)]);},width:item["width"]+"px"});break;case "OwnerType":_2850.push({field:item["alias"],property:item["propertyPath"],name:item["caption"],type:_2844,styles:"text-align: "+item["align"]+";",width:item["width"]+"px"});break;case "Phone":_2850.push({field:item["alias"],property:item["propertyPath"],name:item["caption"],type:_2845,styles:"text-align: "+item["align"]+";",width:item["width"]+"px"});break;case "PickList Item":var _2859=item["alias"]+"TEXT";_2851.push(_2859);_2850.push({field:_2859,styles:"text-align: "+item["align"]+";",property:item["propertyPath"],name:item["caption"],width:item["width"]+"px"});break;case "User Type":_2850.push({field:item["alias"],property:item["propertyPath"],name:item["caption"],type:_2846,styles:"text-align: "+item["align"]+";",width:item["width"]+"px"});break;default:_2850.push({field:item["alias"],name:item["caption"],width:item["width"]+"px"});break;}}}});}_2850.push({field:this.keyAlias,hidden:true,width:"0px",name:""});_284f["structure"]=_2850;_284f["select"]=_2851;return _284f;}});return Sage.Utility.Groups;});},"Sage/UI/Columns/OwnerType":function(){define(["dojo/i18n","dojo/i18n!../nls/OwnerType","dojo/_base/declare"],function(i18n,_285a,_285b){var _285c=_285b("Sage.UI.Columns.OwnerType",dojox.grid.cells._Base,{constructor:function(){var _285d=i18n.getLocalization("Sage.UI","OwnerType");dojo.mixin(this,_285d);this.inherited(arguments);},formatter:function(val,index){var _285e={"G":this.teamText,"D":this.departmentText,"S":this.systemText,"U":this.userText};return _285e[val]?Sage.Utility.htmlEncode(_285e[val]):val;},styles:"text-align: right;"});return _285c;});},"Sage/UI/Columns/UserType":function(){define(["Sage/Utility","dojo/i18n!../nls/UserType","dojo/_base/declare"],function(_285f,_2860,_2861){var _2862=_2861("Sage.UI.Columns.UserType",dojox.grid.cells._Base,{constructor:function(){dojo.mixin(this,_2860);this.inherited(arguments);},formatter:function(val,index){var _2863={"W":this.administratorText,"P":this.templateText,"M":this.remoteText,"T":this.webOnlyText,"R":this.retiredText,"C":this.concurrentText,"V":this.webViewerText,"N":this.networkText,"A":this.addOnUserText};return (_2863[val]?_285f.htmlEncode(_2863[val]):val);}});return _2862;});},"Sage/UI/Columns/Currency":function(){define(["dojo/_base/declare","dojo/json","Sage/Data/SDataServiceRegistry","Sage/Utility/_LocalStorageMixin","Sage/Utility","dojo/_base/lang","dojox/grid/cells/dijit","Sage/UI/Controls/Currency"],function(_2864,json,_2865,_2866,_2867,lang,_2868,_2869){var _286a=_2864("Sage.UI.Columns.Currency",dojox.grid.cells._Widget,{widgetClass:_2869,exchangeRateLoaded:false,constructor:function(o){if(this.multiCurrency&&!this.exchangeRateLoaded){var _286b=Sage.Services.getService("SystemOptions");if(_286b){_286b.get("BaseCurrency",function(val){this.exchangeRateLoaded=true;this.currentCode=val;var _286c=Sage.Services.getService("ExchangeRateLoader");if(_286c){_286c.requestExchangeRate(this.getExchangeRate,this);}},function(){if(typeof console!=="undefined"){console.error("Unable to determine SystemOptions.BaseCurrency.");}},this);}else{if(typeof console!=="undefined"){console.error("Unable to load the SystemOptions service.");}}}},getExchangeRate:function(data){this.exchangeRate=data.Rate;},getWidgetProps:function(_286d){var _286e=this.getControlId();return dojo.mixin({},this.widgetProps||{},{id:_286e,value:_286d,width:this.width,maxLength:this.maxLength,style:this.style,hotKey:this.hotKey,tabIndex:this.tabIndex,field:this.field,constraints:this.constraints,name:this.name,sortable:this.sortable,editable:this.editable,required:this.required,displayMode:this.displayMode,displayCurrencyCode:this.displayCurrencyCode,multiCurrency:this.multiCurrency,currentCode:this.currentCode,exchangeRate:this.exchangeRate,currentUICulture:this.currentUICulture,textAlign:this.getAlignment()});},getAlignment:function(){var _286f="right";_286f=(this.cellClasses.indexOf("aligncenter")>-1)?"center":_286f;_286f=(this.cellClasses.indexOf("alignleft")>-1)?"left":_286f;return _286f;},formatNode:function(_2870,_2871,_2872){if(!this.widgetClass){return _2871;}if(this.multiCurrency){_2871=_2871*this.exchangeRate;}var _2873=dijit.byId(this.getControlId());if(!_2873){this.widget=this.createWidget.apply(this,arguments);}else{this.widget=_2873;if(_2873.value!==_2871||this.widget.focusNode.value!==_2871){this.widget.focusNode.attr("value",_2871);}this.attachWidget.apply(this,arguments);}this.sizeWidget.apply(this,arguments);this.grid.views.renormalizeRow(_2872);this.grid.scroller.rowHeightChanged(_2872,true);this.widget.focusNode.focus();return undefined;},formatter:function(_2874,_2875){var _2876=this.grid.getItem(_2875);var _2877="";var i;this.decimalDigit=(this.constraints&&this.constraints.places)?this.constraints.places:Sys.CultureInfo.CurrentCulture.numberFormat.CurrencyDecimalDigits;if(!this.multiCurrency){_2877=dojo.currency.format(_2874,{currency:[Sys.CultureInfo.CurrentCulture.numberFormat.CurrencySymbol],locale:Sys.CultureInfo.CurrentCulture.name,places:this.decimalDigit});_2877=_2877.replace(Sys.CultureInfo.CurrentCulture.numberFormat.CurrencySymbol,"");}else{if(this.exchangeRateType=="EntityRate"&&_2867.getModeId()!=="insert"){var _2878=1;if((typeof this.exchangeRateField!=="undefined")&&(this.exchangeRateField!==null)&&(this.exchangeRateField!=="")){var _2879=this.exchangeRateField.split(".");_2878=_2876;for(i=0;i<_2879.length;i++){if(_2878){_2878=_2878[_2879[i]];}else{_2878=_2867.getClientContextByKey(this.exchangeRateType);}}if((_2878===null)||(_2878===0)){_2878=1;}}var _287a=this.exchangeRateCodeField.split(".");var _287b=_2876;for(i=0;i<_287a.length;i++){if(_287b){_287b=_287b[_287a[i]];}else{_287b=_2867.getClientContextByKey([this.exchangeRateType,"Code"].join(""));}}this.exchangeRate=_2878;this.currentCode=_287b;}else{if(this.exchangeRateType==="MyRate"){this.exchangeRate=_2867.getClientContextByKey(this.exchangeRateType);this.currentCode=_2867.getClientContextByKey([this.exchangeRateType,"Code"].join(""));}}_2874=_2874*this.exchangeRate;_2877=dojo.currency.format(_2874,{currency:[],locale:Sys.CultureInfo.CurrentCulture.name,places:this.decimalDigit});_2877=[_2877,"   ",this.currentCode].join("");}if(this.abbreviationLength){var _287c=Sage.Format.abbreviationFormatter(this.abbreviationLength);_2877=_287c(_2877);}return _2877;},styles:"text-align: right;",setCurrentItems:function(){this.editInfo=this.grid.edit.info;this.item=this.grid.getItem(this.editInfo.rowIndex);},getControlId:function(){this.setCurrentItems();return [this.item.$key,this.editInfo.cell.field,this.index].join("_");},getValue:function(index){var _287d=this.widget.focusNode.valueNode.value;if(this.multiCurrency){_287d=_287d/this.exchangeRate;}if(this.widget.focusNode.state==="Error"){var item=this.grid.getItem(index);_287d=this.grid.store.getValue(item,this.grid.edit.info.cell.field);this.widget.focusNode.focusNode.value=_287d;}else{if(this.widget.focusNode.state==="Incomplete"){_287d=_2867.maximizeDecimalDigit(this.widget.focusNode.get("displayedValue"),this.constraints.places);this.widget.focusNode.focusNode.value=_287d;}}return _287d;}});var _287e=_2864("Sage.UI.Columns.Currency.BaseExchangeRateLoader",_2866,{_requests:[],_requestingData:false,_exchangeRate:false,_storageNamespace:"BaseCurrencyExchangeRate",constructor:function(){this._requests=[];this._requestingData=false;this._exchangeRate=false;},requestExchangeRate:function(_287f,scope){if(!this._exchangeRate){var data=sessionStorage.getItem(this._storageNamespace);if(data){this._exchangeRate=json.parse(data);}else{this._requests.push({fn:_287f,scope:scope||this});if(!this._requestingData){this._requestingData=true;var _2880=new Sage.SData.Client.SDataSingleResourceRequest(_2865.getSDataService("dynamic",false,true,true));_2880.setResourceSelector(dojo.string.substitute("'${0}'",[scope.currentCode]));_2880.setResourceKind("exchangeRates");_2880.read({success:lang.hitch(this,this._receiveData),failure:function(_2881){},async:false});}return;}}_287f.call(scope||this,this._exchangeRate);},_receiveData:function(data){sessionStorage.setItem(this._storageNamespace,json.stringify(data));this._exchangeRate=data;var len=this._requests.length;for(var i=0;i<len;i++){var clbk=this._requests.pop();clbk.fn.call(clbk.scope,data);}}});Sage.Services.addService("ExchangeRateLoader",new _287e());return _286a;});},"Sage/TaskPane/LeadTasksTasklet":function(){define(["dojo/i18n!./nls/LeadTasksTasklet","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneContent","Sage/MainView/Lead/UpdateLeads","Sage/UI/Dialogs","dojo/_base/declare"],function(_2882,_2883,_2884,_2885,_2886,_2887){var _2888=_2887("Sage.TaskPane.LeadTasksTasklet",[_2883,_2884],{taskItems:[],constructor:function(){dojo.mixin(this,_2882);this.taskItems=[{taskId:"UpdateLeads",type:"Link",displayName:this.updateLeadsTitle,clientAction:"leadTasksActions.updateLeads();",securedAction:"Entities/Lead/MultiUpdate"},{taskId:"DeleteLeads",type:"Link",displayName:this.deleteLeadsTitle,clientAction:"commonTaskActions.bulkDeleteJob();",securedAction:"Entities/Lead/MultiDelete"}];},updateLeads:function(){this.prepareSelectedRecords(this.updateLeadsActionItem(this.getSelectionInfo()));},updateLeadsActionItem:function(_2889){return function(){var _288a=dijit.byId("dlgUpdateMultipleLeads");if(!_288a){_288a=new _2885(_2889);}else{_288a.setSelectionInfo(_2889);}_288a.show();};},deleteLeads:function(){this.prepareSelectedRecords(this.confirmBulkDeleteJob(this,this.getSelectionInfo()));}});return _2888;});},"Sage/MainView/Lead/UpdateLeads":function(){define(["dojo/_base/declare","dojo/i18n!./nls/UpdateLeads","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dijit/Dialog","dijit/_Widget","Sage/_Templated","Sage/UI/Dialogs","Sage/UI/Controls/Lookup","Sage/Utility/Jobs"],function(_288b,_288c,_288d,_288e,_288f,_2890,_2891,_2892,_2893,jobs){var _2894=_288b("Sage.MainView.Lead.UpdateLeads",[_2890,_2891],{id:"dlgUpdateMultipleLeads",_dialog:false,_selectionInfo:false,_updateableProperties:false,selectedFieldIndex:1,lup_Owner:false,lup_AcctMgr:false,widgetsInTemplate:true,widgetTemplate:new Simplate(["<div>","<div data-dojo-type=\"dijit.Dialog\" title=\"{%= $.updateMultipleLeads_Caption %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onCancel:_close\">","<div data-dojo-type=\"dijit.form.Form\" id=\"{%= $.id %}_frmUpdateMultipleLeads\">","<table cellspacing=\"20\">","<tr>","<td>","<label>{%= $.update_Property_Caption %}</label>","</td>","<td>","<select title=\"{%= $.update_Property_Caption %}\" labelWidth=\"20\" name=\"{%= $.id %}_PropertyName\" dojoAttachPoint=\"propertyNameSelect\" dojoAttachEvent=\"onChange:_propertyChanged\" data-dojo-type=\"dijit.form.Select\" style=\"width:150px\">","{% for (var i=0; i < $._updateableProperties.length;i++) { %}","<option value=\"{%= $._updateableProperties[i].propertyName %}\" {% if ($.selectedFieldIndex == i ) { %} selected {% } %} >{%= $._updateableProperties[i].propertyDisplayName %}</option>","{% } %}","</select>","</td>","<td>","<div id=\"divUpdateLeadsTolbl\" dojoAttachPoint=\"divUpdateLeadsTolbl\">","<label>{%= $.update_To_Caption %}</label>","</div>","</td>","<td>","<div dojoAttachPoint=\"divOwnerContainer\" baseClass=\"lookup-container\">","<div data-dojo-type=\"dijit.layout.ContentPane\" label=\"{%= $.lookupOwnerText %}\" dojoAttachPoint=\"assignOwner_Container\" class=\"removePadding\"></div>","</div>","<div dojoAttachPoint=\"divAcctMgrContainer\" baseClass=\"lookup-container\" class=\"display-none\">","<div data-dojo-type=\"dijit.layout.ContentPane\" label=\"{%= $.update_To_Caption %}\" id=\"{%= $.id %}_luAccountMgr\" dojoAttachPoint=\"accountMgr_Container\" allowClearingResult=\"false\" class=\"removePadding\"></div>","</div>","</td>","</tr>","</table>","<div class=\"button-bar\" align=\"right\">","<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id%}_btn_OK\" name=\"btn_OK\" dojoAttachPoint=\"btn_OK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.ok_Text %}</div>","<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id%}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_close\">{%= $.btnCancel_Caption %}</div>","</div>","</div>","</div>","</div>"]),constructor:function(_2895){this._selectionInfo=_2895;dojo.mixin(this,_288c);if(!this._updateableProperties){this._updateableProperties=[{propertyName:"",propertyDisplayName:""}];this.loadUpdateableProperties("Owner",this.updateProp_Owner);this.loadUpdateableProperties("AcctMgr",this.updateProp_AcctMgr);}},loadUpdateableProperties:function(_2896,_2897){var _2898={propertyName:_2896,propertyDisplayName:_2897};this._updateableProperties.push(_2898);},setSelectionInfo:function(_2899){this._selectionInfo=_2899;},show:function(){if(!this.lup_Owner){this.createOwnerLookup();}if(!this.lup_AcctMgr){this.createAcctMgrLookup();}this._dialog.show();if(!this._dialog.helpIcon){_288e.mixin(this._dialog,new _288d());this._dialog.createHelpIconByTopic("updateleads");}},_propertyChanged:function(){if(this.propertyNameSelect){this.setDisplayProperty(this.divAcctMgrContainer,(this.propertyNameSelect.value=="AcctMgr"));this.setDisplayProperty(this.divOwnerContainer,(this.propertyNameSelect.value=="Owner"));}},setDisplayProperty:function(_289a,_289b){if(_289a&&_289b){dojo.removeClass(_289a,"display-none");}else{if(_289a){dojo.addClass(_289a,"display-none");}}},createOwnerLookup:function(){this.assignOwnerLookupConfig={id:"_assignOwner",structure:[{defaultCell:{sortable:true,width:"150px",editable:false,styles:"text-align: left;",propertyType:"System.String",excludeFromFilters:false,useAsResult:false,pickListName:null,defaultValue:""},cells:[{name:this.lookupDescriptionColText,field:"Description"},{name:this.lookupTypeColText,field:"Type",PropertyType:"Sage.Entity.Interfaces.OwnerType"}]}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"ownerViews",sort:[{attribute:"Description"}]},isModal:true,initialLookup:true,preFilters:[],returnPrimaryKey:true,dialogTitle:this.lookupOwnerText,dialogButtonText:this.ok_Text};this.lup_Owner=new _2893({id:"lu_AssignOwner",config:this.assignOwnerLookupConfig,style:"width:100%"});dojo.place(this.lup_Owner.domNode,this.assignOwner_Container.domNode,"only");},createAcctMgrLookup:function(){this.accountMgrLookupConfig={id:"_acctMgr",structure:[{defaultCell:{sortable:true,width:"150px",editable:false,styles:"text-align: left;",propertyType:"System.String",excludeFromFilters:false,useAsResult:false,pickListName:null,defaultValue:""},cells:[{name:this.lookupNameColText,field:"UserInfo.UserName"},{name:this.lookupTitleColText,field:"UserInfo.Title"},{name:this.lookupDepartmentColText,field:"UserInfo.Department"},{name:this.lookupRegionColText,field:"UserInfo.Region"},{name:this.lookupTypeColText,field:"Type",propertyType:"Sage.Entity.Interfaces.UserType"}]}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"users",sort:[{attribute:"UserInfo.UserName"}]},isModal:true,initialLookup:true,returnPrimaryKey:true,dialogTitle:this.lookupActMgrText,dialogButtonText:this.ok_Text,preFilters:[{propertyName:"type",propertyType:"Sage.Entity.Interfaces.UserType",conditionOperator:"!=",filterValue:"5"},{propertyName:"type",propertyType:"Sage.Entity.Interfaces.UserType",conditionOperator:"!=",filterValue:"6"},{propertyName:"type",propertyType:"Sage.Entity.Interfaces.UserType",conditionOperator:"!=",filterValue:"7"},{propertyName:"type",propertyType:"Sage.Entity.Interfaces.UserType",conditionOperator:"!=",filterValue:"8"}]};this.lup_AcctMgr=new _2893({id:"lu_AcctMgr",config:this.accountMgrLookupConfig,style:"width:100%"});dojo.place(this.lup_AcctMgr.domNode,this.accountMgr_Container.domNode,"only");},_okClick:function(){var _289c=this.getPropertySelectionValue();var self=this;if(!_289c&&!_289c.value){_2892.showError(this.errorUnspecifiedValue);return;}var _289d=this.getCurrentGroupId();if(_289d==="LOOKUPRESULTS"){_289d=this.getDefaultGroupId();}var _289e=[{"name":"EntityName","value":"Lead"},{"name":"PropertyNames","value":_289c.name},{"name":"PropertyValues","value":_289c.value},{"name":"SelectedIds","value":(this._selectionInfo.selectionCount>0)?this._selectionInfo.selectedIds.join(",")||"":""},{"name":"GroupId","value":_289d},{"name":"AppliedFilters","value":Sys.Serialization.JavaScriptSerializer.serialize(jobs.getFiltersForJob())},{"name":"LookupConditions","value":Sys.Serialization.JavaScriptSerializer.serialize(jobs.getLookupConditionsForJob())}];var _289f={closable:true,title:this.updateLeadsTitle,key:"Sage.SalesLogix.BusinessRules.Jobs.UpdateEntityJob",parameters:_289e,success:function(_28a0){},failure:function(_28a1){},ensureZeroFilters:true};jobs.triggerJobAndDisplayProgressDialog(_289f);self._close();},getCurrentGroupId:function(){var _28a2=Sage.Services.getService("ClientGroupContext");if(_28a2){var _28a3=_28a2.getContext();return _28a3.CurrentGroupID;}return "";},getDefaultGroupId:function(){var _28a4=Sage.Services.getService("ClientGroupContext");if(_28a4){var _28a5=_28a4.getContext();return _28a5.DefaultGroupID;}return "";},getPropertySelectionValue:function(){if(this.propertyNameSelect){switch(this.propertyNameSelect.value){case "AcctMgr":if(this.lup_AcctMgr.selectedObject){return {name:"AccountManager",value:this.lup_AcctMgr.selectedObject.$key};}return false;case "Owner":if(this.lup_Owner.selectedObject){return {name:"Owner",value:this.lup_Owner.selectedObject.$key};}return false;}}return false;},_close:function(){this._dialog.hide();}});return _2894;});},"Sage/TaskPane/LiteratureManagementTasks":function(){define(["Sage/TaskPane/_BaseTaskPaneTasklet","Sage/UI/Dialogs","dojo/i18n!./nls/LiteratureManagementTasks","dojo/_base/declare"],function(_28a6,_28a7,_28a8,_28a9){var _28aa=_28a9("Sage.TaskPane.LiteratureManagementTasks",_28a6,{nlsLitManagementResources:_28a8,selectionInfo:false,fulfillLiteratureTask:function(){this.selectionInfo=this.getSelectionInfo();if(this.verifySelection(this.selectionInfo)){this.saveSelections(this.actionItem,this.selectionInfo);return this.doFulfillment();}else{_28a7.showWarning(this.selectRecords,this.selectRecordsTitle);return false;}},validateLiteratureTask:function(){this.selectionInfo=this.getSelectionInfo();if(this.selectionInfo!==null){this.saveSelections(this.actionItem,this.selectionInfo);return true;}else{return false;}},doFulfillment:function(){var _28ab=0;var _28ac=this.selectionInfo.selectionCount;var _28ad=[];var _28ae=[];var sId=dojo.string.substitute("${0}_hfLastFulfilledIds",[this.clientId]);var _28af=$get(sId);if(_28af){_28af.value="";}var self=this;require(["Sage/MailMerge/Helper","Sage/MailMerge/Service"],function(_28b0,_28b1){var _28b2=_28b0.GetMailMergeService();var i;if(_28b2){for(i=0;i<_28ac;i++){var _28b3;var _28b4=self.selectionInfo.selections[i].id;var _28b5=_28b2.FulfillLitRequest(_28b4);if(dojo.isArray(_28b5)){var _28b6=_28b5[LitReqResult.lrSuccess];if(_28b6){_28ab++;_28ae.push(_28b4);continue;}var _28b7=_28b5[LitReqResult.lrCanceled];if(_28b7){_28b3=dojo.string.substitute(self.nlsLitManagementResources.errFulFillmentCancelled,[_28b4]);}else{_28b3=dojo.string.substitute(self.nlsLitManagementResources.errFulFillmentFailed,[_28b4]);_28b3+=dojo.string.substitute(" ${0}",[_28b5[LitReqResult.lrError]]);}}else{_28b3=dojo.string.substitute(self.nlsLitManagementResources.errFulFillmentFailed,[_28b4]);}if(_28b3===""){_28b3=dojo.string.substitute(self.nlsLitManagementResources.errFulFillmentFailed,[_28b4]);}_28ad.push(_28b3);}}else{_28a7.showError(self.nlsLitManagementResources.errMailMergeService);return false;}if(_28af){_28af.value=_28ae.join();}if(_28ab==_28ac){_28a7.showInfo(self.nlsLitManagementResources.fulFillmentSuccess);return true;}else{var _28b8=self.nlsLitManagementResources.errFulFillmentRequest;if(dojo.isArray(_28ad)&&_28ad.length>0){_28b8=self.nlsLitManagementResources.errFulFillmentRequestEx;for(i=0;i<_28ad.length;i++){_28b8+=dojo.string.substitute(" [${0}] ${1}",i+1,[_28ad[i]]);}}_28a7.showError(_28b8);return false;}});},refreshList:function(){var panel=dijit.byId("list");if(panel){panel.refreshGrid();}},printLabels:function(_28b9,_28ba){var _28bb=Sage.Services.getService("ReportingService");if(_28bb){_28bb.showReport(_28b9,"CONTACT",_28ba);}},actionItem:function(){}});return _28aa;});},"Sage/TaskPane/OpportunityTasksTasklet":function(){define(["dojo/i18n!./nls/OpportunityTasksTasklet","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneContent","Sage/MainView/Opportunity/UpdateOpportunities","Sage/MainView/Opportunity/OpportunityStatistics","dojo/_base/declare"],function(_28bc,_28bd,_28be,_28bf,_28c0,_28c1){var _28c2=_28c1("Sage.TaskPane.OpportunityTasksTasklet",[_28bd,_28be],{updateOpportunitiesTitle:"Update Opportunities",opportunityStatisticsTitle:"Opportunity Statistics",taskItems:[],constructor:function(){dojo.mixin(this,_28bc);this.taskItems=[{taskId:"UpdateOpportunities",type:"Link",displayName:this.updateOpportunitiesTitle,clientAction:"opportunityTasksActions.updateOpportunities();",securedAction:"Entities/Opportunity/MultiUpdate"},{taskId:"OpportunityStatistics",type:"Link",displayName:this.opportunityStatisticsTitle,clientAction:"opportunityTasksActions.opportunityStatistics();",securedAction:"Entities/Opportunity/OpportunityStatistics"}];},updateOpportunities:function(){this.prepareSelectedRecords(this.updateOpportunitiesActionItem(this.getSelectionInfo()));},updateOpportunitiesActionItem:function(_28c3){return function(){var _28c4=dijit.byId("dlgUpdateMultipleOpps");if(!_28c4){_28c4=new _28bf(_28c3);}else{_28c4.setSelectionInfo(_28c3);}_28c4.show();};},opportunityStatistics:function(){this.prepareSelectedRecords(this.opportunityStatisticsActionitem(this.getSelectionInfo()));},opportunityStatisticsActionitem:function(_28c5){return function(){var _28c6=new _28c0(_28c5);_28c6.show();};}});return _28c2;});},"Sage/MainView/Opportunity/UpdateOpportunities":function(){define(["dojo/_base/declare","dojo/i18n!./nls/UpdateOpportunities","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dijit/Dialog","dijit/_Widget","Sage/_Templated","Sage/UI/Dialogs","Sage/UI/Controls/Lookup","dojo/text!./templates/UpdateOpportunities.html","Sage/Utility/Jobs","dojo/string"],function(_28c7,_28c8,_28c9,_28ca,_28cb,_28cc,_28cd,_28ce,_28cf,_28d0,jobs,_28d1){var _28d2=_28c7("Sage.MainView.Opportunity.UpdateOpportunities",[_28cc,_28cd],{id:"dlgUpdateMultipleOpps",_dialog:false,_updateableProperties:false,selectedFieldIndex:1,lup_AcctMgr:false,_selectionInfo:false,widgetsInTemplate:true,widgetTemplate:new Simplate(eval(_28d0)),constructor:function(_28d3){this._selectionInfo=_28d3;dojo.mixin(this,_28c8);if(!this._updateableProperties){this._updateableProperties=[{propertyName:"",propertyDisplayName:""}];this.loadUpdateableProperties("AcctMgr",this.updateProp_AcctMgr);this.loadUpdateableProperties("Forecast",this.updateProp_Forecast);this.loadUpdateableProperties("CloseProb",this.updateProp_Probability);this.loadUpdateableProperties("EstClose",this.updateProp_EstClose);this.loadUpdateableProperties("Comments",this.updateProp_Comments);}},loadUpdateableProperties:function(_28d4,_28d5){var _28d6={propertyName:_28d4,propertyDisplayName:_28d5};this._updateableProperties.push(_28d6);},setSelectionInfo:function(_28d7){this._selectionInfo=_28d7;},show:function(){this._dialog.show();if(!this.lup_AcctMgr){this.createAcctMgrLookup();}this._propertyChanged();if(!this._dialog.helpIcon){_28ca.mixin(this._dialog,new _28c9());this._dialog.createHelpIconByTopic("updateopportunities");}},_propertyChanged:function(){if(this.propertyNameSelect){this.setDisplayProperty(this.divAcctMgrContainer,(this.propertyNameSelect.value=="AcctMgr"));this.setDisplayProperty(this.divCloseProbContainer,(this.propertyNameSelect.value=="CloseProb"));this.setDisplayProperty(this.divCommentsContainer,(this.propertyNameSelect.value=="Comments"));this.setDomDisplayProperty(this.divForecastContainer,(this.propertyNameSelect.value=="Forecast"));this.setDisplayProperty(this.divUpdateOppsTolbl,(this.propertyNameSelect.value!="EstClose"));this.setDomDisplayProperty(this.divEstCloseContainer,(this.propertyNameSelect.value=="EstClose"));}this.estimatedCloseDateChange();},setDisplayProperty:function(_28d8,_28d9){if(_28d8&&_28d9){dojo.removeClass(_28d8,"display-none");}else{if(_28d8){dojo.addClass(_28d8,"display-none");}}},setDomDisplayProperty:function(_28da,_28db){if(_28da&&_28db){dojo.removeClass(_28da.domNode,"display-none");}else{if(_28da){dojo.addClass(_28da.domNode,"display-none");}}},estimatedCloseDateChange:function(){var _28dc=this.rdoEstClose.get("checked");if(this.propertyNameSelect){this.setDisplayProperty(this.divEstCloseDateContainer,(_28dc&&this.propertyNameSelect.value=="EstClose"));this.setDisplayProperty(this.divMoveEstimatedCloseContainer,(!_28dc&&this.propertyNameSelect.value=="EstClose"));}},createAcctMgrLookup:function(){this.accountMgrLookupConfig={id:"_acctMgr",structure:[{defaultCell:{"sortable":true,"width":"150px","editable":false,"propertyType":"System.String","excludeFromFilters":false,"useAsResult":false,"pickListName":null,"defaultValue":""},cells:[{"name":this.lookupNameColText,"field":"UserInfo.UserName"},{"name":this.lookupTitleColText,"field":"UserInfo.Title"},{"name":this.lookupDepartmentColText,"field":"UserInfo.Department"},{"name":this.lookupRegionColText,"field":"UserInfo.Region"},{"name":this.lookupTypeColText,"field":"Type","propertyType":"Sage.Entity.Interfaces.UserType"}]}],gridOptions:{contextualCondition:"",contextualShow:"",selectionMode:"single"},storeOptions:{resourceKind:"users"},isModal:true,initialLookup:true,preFilters:[{propertyName:"type",propertyType:"Sage.Entity.Interfaces.UserType",conditionOperator:"!=",filterValue:"5"},{propertyName:"type",propertyType:"Sage.Entity.Interfaces.UserType",conditionOperator:"!=",filterValue:"6"},{propertyName:"type",propertyType:"Sage.Entity.Interfaces.UserType",conditionOperator:"!=",filterValue:"7"},{propertyName:"type",propertyType:"Sage.Entity.Interfaces.UserType",conditionOperator:"!=",filterValue:"8"}],returnPrimaryKey:true,dialogTitle:this.lookupActMgrText,dialogButtonText:this.btnOK_Caption};this.lup_AcctMgr=new _28cf({id:"lu_AcctMgr",config:this.accountMgrLookupConfig,style:"width:100%"});dojo.place(this.lup_AcctMgr.domNode,this.accountMgr_Container.domNode,"only");},_okClick:function(){var _28dd=this.getPropertySelectionValue();var self=this;if(!_28dd&&!_28dd.value){_28ce.showError(this.errorUnspecifiedValue);return;}var _28de=this.getCurrentGroupId();if(_28de==="LOOKUPRESULTS"){_28de=this.getDefaultGroupId();}var _28df=[{"name":"EntityName","value":"Opportunity"},{"name":"PropertyNames","value":_28dd.name},{"name":"PropertyValues","value":_28dd.value},{"name":"SelectedIds","value":(this._selectionInfo.selectionCount>0)?this._selectionInfo.selectedIds.join(",")||"":""},{"name":"GroupId","value":_28de},{"name":"BusinessRuleName","value":this.getBusinessRuleMethod()},{"name":"AppliedFilters","value":Sys.Serialization.JavaScriptSerializer.serialize(jobs.getFiltersForJob())},{"name":"LookupConditions","value":Sys.Serialization.JavaScriptSerializer.serialize(jobs.getLookupConditionsForJob())}];var _28e0={closable:true,title:_28c8.updateMultipleOpps_Caption,key:"Sage.SalesLogix.BusinessRules.Jobs.UpdateEntityJob",parameters:_28df,success:function(_28e1){},failure:function(_28e2){_28ce.showError(dojo.string.substitute(self.errorRequestingJobMgr,[_28e2.statusText]));},ensureZeroFilters:true};self._close();jobs.triggerJobAndDisplayProgressDialog(_28e0);},getCurrentGroupId:function(){var _28e3=Sage.Services.getService("ClientGroupContext");if(_28e3){var _28e4=_28e3.getContext();return _28e4.CurrentGroupID;}return "";},getDefaultGroupId:function(){var _28e5=Sage.Services.getService("ClientGroupContext");if(_28e5){var _28e6=_28e5.getContext();return _28e6.DefaultGroupID;}return "";},getPropertySelectionValue:function(){if(this.propertyNameSelect){switch(this.propertyNameSelect.value){case "AcctMgr":if(this.lup_AcctMgr.selectedObject){return {name:"AccountManager",value:this.lup_AcctMgr.selectedObject.$key};}return false;case "CloseProb":return {name:"CloseProbability",value:this.pkl_CloseProbability.get("value")};case "Forecast":return {name:"AddToForecast",value:this.rdoYesForecast.get("checked")};case "EstClose":if(this.rdoEstClose.get("checked")){return {name:"EstimatedClose",value:this.dtpEstCloseDate.focusNode.value};}else{return this.moveEstCloseDateList.value=="Forward"?{name:"EstimatedClose",value:this.daysToMove.value}:{name:"EstimatedClose",value:_28d1.substitute("-${0}",[this.daysToMove.value])};}break;case "Comments":return {name:"Notes",value:this.txtComments.value};}}return false;},getBusinessRuleMethod:function(){return this.propertyNameSelect.value==="EstClose"&&!this.rdoEstClose.get("checked")?"UpdateEstimatedCloseDate":"";},_close:function(){this._dialog.hide();}});return _28d2;});},"Sage/MainView/Opportunity/OpportunityStatistics":function(){define(["dojo/_base/declare","dojo/i18n!./nls/OpportunityStatistics","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dijit/Dialog","dijit/_Widget","Sage/_Templated","Sage/UI/Dialogs","Sage/UI/Controls/Currency","Sage/UI/Controls/Numeric","Sage/Data/SDataServiceRegistry","dojo/date/locale","Sage/Utility","dojo/text!./templates/OpportunityStatistics.html","dojo/html","dijit/form/Form","dijit/form/Select","dijit/form/Textarea","dijit/layout/ContentPane","dojox/layout/TableContainer"],function(_28e7,_28e8,_28e9,_28ea,_28eb,_28ec,_28ed,_28ee,_28ef,_28f0,_28f1,_28f2,_28f3,_28f4,html){var _28f5=_28e7("Sage.MainView.Opportunity.OpportunityStatistics",[_28ec,_28ed],{_dialog:false,_selectionInfo:false,selectedCount:0,resource:"",currencyDecimalDigits:2,currencyCode:"USD",locale:Sys.CultureInfo.CurrentCulture.name,isMultiCurrencyEnabled:false,widgetsInTemplate:true,widgetTemplate:new Simplate(eval(_28f4)),constructor:function(_28f6){this._selectionInfo=_28f6;this.currencyDecimalDigits=Sys.CultureInfo.CurrentCulture.numberFormat.CurrencyDecimalDigits;this.isMultiCurrencyEnabled=window.isMultiCurrencyEnabled();dojo.mixin(this,_28e8);},show:function(){this._dialog.show();if(!this._dialog.helpIcon){_28ea.mixin(this._dialog,new _28e9());this._dialog.createHelpIconByTopic("opportunitystatistics");}var _28f7=_28f1.getSDataService("mashups");var _28f8=new Sage.SData.Client.SDataNamedQueryRequest(_28f7);_28f8.setApplicationName("$app");_28f8.setResourceKind("mashups");_28f8.uri.setCollectionPredicate("'OpportunityStatistics'");_28f8.setQueryName("execute");_28f8.setQueryArg("_resultName","OpportunityStatisticsMashup");_28f8.setQueryArg("_selectionKey",this._selectionInfo.key);var self=this;_28f8.read({success:function(data){self.resource=data.$resources[0];self.selectedCount=self.resource.RecordCount;self.currencyCode=self.resource.CurrencyCode;html.set(self.opportunityCount,self.selectedCount);self.createControls();var _28f9=self.resource.DaysOpened;if(self.selectedCount>1){_28f9=Math.round(self.resource.DaysOpened/self.selectedCount);}html.set(self.daysOpen_Container,_28f9.toString());dojo.addClass(self.loadingContainer,"display-none");dojo.removeClass(self.statisticsContentsContainer,"display-none");},failure:function(_28fa,_28fb,error){_28ee.showError(self.errorRequestingStatistics);}});},formatCurrency:function(val){val=val.replace(" ","","gi");val=val.replace(Sys.CultureInfo.CurrentCulture.numberFormat.CurrencyDecimalSeparator,".","gi");return val;},createControls:function(){this.createSalesPotential();this.createCloseProbability();this.createWeightedPotential();this.createActualAmount();this.createRangeEstClose();},createSalesPotential:function(){this.salesPotentialTotal=new _28ef({id:"cur_SalesPotentialTotal",constraints:{places:this.currencyDecimalDigits,currency:this.currencyCode,locale:this.locale},exchangeRateType:"BaseRate",multiCurrency:this.isMultiCurrencyEnabled,disabled:true,"class":"textcontrol currency",value:this.formatCurrency(this.resource.SalesPotential)});dojo.place(this.salesPotentialTotal.domNode,this.salesPotentialTotal_Container,"replace");this.salesPotentialAverage=new _28ef({id:"cur_SalesPotentialAverage",constraints:{places:this.currencyDecimalDigits,currency:this.currencyCode,locale:this.locale},exchangeRateType:"BaseRate",multiCurrency:this.isMultiCurrencyEnabled,disabled:true,"class":"textcontrol currency",value:this.formatCurrency(this.resource.SalesPotential)/this.selectedCount});dojo.place(this.salesPotentialAverage.domNode,this.salesPotentialAverage_Container,"replace");},createCloseProbability:function(){this.closeProbability=new _28f0({id:"num_CloseProbability",constraints:{places:2},formatType:"percent",disabled:true,value:this.resource.CloseProbability/this.selectedCount});dojo.place(this.closeProbability.domNode,this.closeProbability_Container.domNode,"only");this.closeProbability_Container.value=this.resource.CloseProbability/this.selectedCount;},createWeightedPotential:function(){this.weightedPotentialTotal=new _28ef({id:"cur_WeightedPotentialTotal",constraints:{places:this.currencyDecimalDigits,currency:this.currencyCode,locale:this.locale},exchangeRateType:"BaseRate",multiCurrency:this.isMultiCurrencyEnabled,disabled:true,"class":"textcontrol currency",value:this.resource.CloseProbability});dojo.place(this.weightedPotentialTotal.domNode,this.weightedPotentialTotal_Container,"only");this.weightedPotentialAverage=new _28ef({id:"cur_WeightedPotentialAverage",constraints:{places:this.currencyDecimalDigits,currency:this.currencyCode,locale:this.locale},exchangeRateType:"BaseRate",multiCurrency:this.isMultiCurrencyEnabled,disabled:true,"class":"textcontrol currency",value:this.resource.CloseProbability/this.selectedCount});dojo.place(this.weightedPotentialAverage.domNode,this.weightedPotentialAverage_Container,"only");},createActualAmount:function(){this.actualAmountTotal=new _28ef({id:"cur_ActualAmount",constraints:{places:this.currencyDecimalDigits,currency:this.currencyCode,locale:this.locale},exchangeRateType:"BaseRate",multiCurrency:this.isMultiCurrencyEnabled,disabled:true,"class":"textcontrol currency",value:this.formatCurrency(this.resource.ActualAmount)});dojo.place(this.actualAmountTotal.domNode,this.actualAmountTotal_Container,"only");this.actualAmountAverage=new _28ef({id:"cur_ActualAmountAverage",constraints:{places:this.currencyDecimalDigits,currency:this.currencyCode,locale:this.locale},exchangeRateType:"BaseRate",multiCurrency:this.isMultiCurrencyEnabled,disabled:true,"class":"textcontrol currency",value:this.formatCurrency(this.resource.ActualAmount)/this.selectedCount});dojo.place(this.actualAmountAverage.domNode,this.actualAmountAverage_Container,"only");},createRangeEstClose:function(){var _28fc=_28f2.format(_28f3.Convert.toDateFromString(this.resource.MinDateEstClosed,true),{fullYear:true,selector:"date"});var _28fd=_28f2.format(_28f3.Convert.toDateFromString(this.resource.MaxDateEstClosed,true),{fullYear:true,selector:"date"});html.set(this.rangeEstClose_Container,dojo.string.substitute("${0} - ${1}",[_28fc,_28fd]));},_close:function(){this._dialog.hide();this._dialog.destroyRecursive();this.destroyRecursive();this.salesPotentialTotal.destroy();this.salesPotentialAverage.destroy();this.closeProbability.destroy();this.weightedPotentialTotal.destroy();this.weightedPotentialAverage.destroy();this.actualAmountTotal.destroy();this.actualAmountAverage.destroy();}});return _28f5;});},"Sage/TaskPane/SecuredActionTasklet":function(){define(["dojo/i18n!./nls/SecuredActionTasklet","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneContent","Sage/Utility","dojo/_base/declare"],function(_28fe,_28ff,_2900,_2901,_2902){var _2903=_2902("Sage.TaskPane.SecuredActionTasklet",[_28ff,_2900],{addToRoleTitle:"Add To Role",taskItems:[],constructor:function(){dojo.mixin(this,_28fe);this.taskItems=[{taskId:"AddToRole",type:"Link",displayName:this.addToRoleTitle,clientAction:"securedActionTaskletActions.addSecuredActionToRole();",securedAction:"Entities/SecuredAction/Add"}];},addSecuredActionToRole:function(){if(_2901.getModeId()==="detail"){dojo.byId([this.clientId,"_tskAddSecuredActionsToRole"].join("")).click();}else{this.prepareSelectedRecords(this.actionItem(this));}},actionItem:function(self){return function(){dojo.byId([self.clientId,"_tskAddSecuredActionsToRole"].join("")).click();};}});return _2903;});},"Sage/TaskPane/SecurityManagerTasksTasklet":function(){define(["dojo/i18n!./nls/SecurityManagerTasksTasklet","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneContent","Sage/MainView/SecurityMgr/SecurityProfile","dojo/_base/declare"],function(_2904,_2905,_2906,_2907,_2908){var _2909=_2908("Sage.TaskPane.SecurityManagerTasksTasklet",[_2905,_2906],{addSecurityProfileTitle:"Add Profile",editSecurityProfileTitle:"Edit Profile",taskItems:[],constructor:function(){dojo.mixin(this,_2904);this.taskItems=[{taskId:"AddSecurityProfile",type:"Link",displayName:this.addSecurityProfileTitle,clientAction:"securityManagerTasksActions.addSecurityProfile();",securedAction:"Entities/SecurityManager/AddProfile"},{taskId:"EditSecurityProfile",type:"Link",displayName:this.editSecurityProfileTitle,clientAction:"securityManagerTasksActions.editSecurityProfile();",securedAction:"Entities/SecurityManager/EditProfile"}];},addSecurityProfile:function(){var store=this.getStore();store.newItem({onComplete:this.receiveNewProfileToEdit,scope:this});},getStore:function(){if(this.store){return this.store;}var _290a=Sage.Data.SDataServiceRegistry.getSDataService("system");this.store=new Sage.Data.SingleEntrySDataStore({service:_290a,resourceKind:"securityProfiles",include:[],select:["profileDescription","defaultPermission","profileType"]});return this.store;},receiveNewProfileToEdit:function(_290b){this.receiveProfileToEdit(_290b,true);},receiveProfileToEdit:function(_290c,isNew){this._isNew=(isNew===true);var dlg=dijit.byId("secProfileDlg");if(dlg){dlg.show();var _290d=dijit.byId("secDlg_Description");var type=dijit.byId("secDlg_Type");if(_290c.profileDescription){_290d.set("value",_290c.profileDescription);}if(_290c.profileType){type.set("value",_290c.profileType);}else{type.set("value","UserDefined");}}},addSecurityProfileActionItem:function(isNew){return function(){var _290e=new _2907(isNew);_290e.show();};},editSecurityProfile:function(){var _290f;var _2910=Sage.Services.getService("ClientGroupContext");if(_2910){var ctx=_2910.getContext();_290f=ctx.CurrentGroupID;var st=this.getStore();st.fetch({predicate:"\""+_290f+"\"",onComplete:this.receiveProfileToEdit,scope:this});}},save:function(_2911){if(this.store){var _2912=dijit.byId("secDlg_Description");var _2913=dijit.byId("secDlg_Type");this.store.setValue(false,"profileDescription",_2912.value);this.store.setValue(false,"profileType",_2913.value);if(this._isNew){this.store.saveNewEntity(false,_2911.success,_2911.failure,this);}else{this.store.save(_2911);}}},saveAndClose:function(){this.save({success:function(_2914){var dlg=dijit.byId("secProfileDlg");dlg.hide();if(this._isNew){var _2915=new dijit.layout.ContentPane();_2915.id=_2914["$key"];_2915.title=_2914.profileDescription;var _2916=dijit.byId("GroupTabs");_2916.addChild(_2915);_2916.selectChild(_2915);}else{var _2917=dijit.byId(_2914["$key"]);_2917.set("title",_2914.profileDescription);}},failure:function(err){alert("The profile could not be saved: "+err);}});}});return _2909;});},"Sage/MainView/SecurityMgr/SecurityProfile":function(){define(["dojo/i18n!./nls/SecurityProfile","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/lang","dijit/Dialog","dijit/_Widget","Sage/_Templated","dojo/_base/declare","dijit/form/Form","dijit/form/Select","dijit/form/Textarea","dijit/layout/ContentPane","dojox/layout/TableContainer","dojo/i18n!./nls/SecurityProfile"],function(_2918,_2919,_291a,_291b,_291c,_291d,_291e){var _291f=_291e("Sage.MainView.SecurityMgr.SecurityProfile",[_291c,_291d],{_dialog:false,selectedFieldIndex:1,store:false,_isNew:false,widgetsInTemplate:true,widgetTemplate:new Simplate(["<div>","<div data-dojo-type=\"dijit.Dialog\" id=\"{%= $.id %}_dlgSecurityProfile\" title=\"{%= $.securityProfile_Caption %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onCancel:_close\">","<div data-dojo-type=\"dijit.form.Form\" id=\"{%= $.id %}_frmSecurityProfile\">","<table cellspacing=\"20\">","<tr>","<td>","<label>{%= $.description_Text %}</label>","</td>","<td>","<input type=\"text\" id=\"secDlg_Description\" dojoAttachPoint=\"profileDescription\" name=\"profileDescription\" required=\"true\" dojoType=\"dijit.form.TextBox\" />","</td>","<tr>","<td>","<label>{%= $.profileType_Text %}</label>","</td>","<td>","<select dojoType=\"dijit.form.Select\" name=\"profileType\" id=\"secDlg_Type\">","<option value=\"U\">User</option>","<option value=\"S\">System</option>","</select>","</td>","</tr>","</table>","<div align=\"right\">","<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id%}_btn_OK\" name=\"btn_OK\" dojoAttachPoint=\"btn_OK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.ok_Text %}</div>","<div data-dojo-type=\"dijit.form.Button\" style=\"margin-left:5px;\" id=\"{%= $.id%}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_close\">{%= $.btnCancel_Caption %}</div>","</div>","</div>","</div>","</div>"]),constructor:function(isNew){this._isNew=isNew;dojo.mixin(this,_2918);},show:function(){if(this._isNew){var store=this.getStore();store.newItem({onComplete:this.receiveNewProfileToEdit,scope:this});}this._dialog.show();if(!this._dialog.helpIcon){_291a.mixin(this._dialog,new _2919());this._dialog.createHelpIconByTopic("securityprofile");}},getStore:function(){if(this.store){return this.store;}var _2920=Sage.Data.SDataServiceRegistry.getSDataService("system");this.store=new Sage.Data.SingleEntrySDataStore({service:_2920,resourceKind:"securityProfiles",include:[],select:["profileDescription","defaultPermission","profileType"]});return this.store;},receiveNewProfileToEdit:function(_2921){this.receiveProfileToEdit(_2921,true);},receiveProfileToEdit:function(_2922,isNew){this._isNew=(isNew===true);var dlg=dijit.byId("secProfileDlg");if(dlg){dlg.set("value",_2922);dlg.show();}},_okClick:function(){},save:function(_2923){if(this.store){var dlg=dijit.byId("secProfileDlg");var _2924=dlg.get("value");for(var prop in _2924){this.store.setValue(false,prop,_2924[prop]);}if(this._isNew){this.store.saveNewEntity(false,_2923.success,_2923.failure,this);}else{this.store.save(_2923);}}},saveAndClose:function(){this.save({success:function(_2925){var dlg=dijit.byId("secProfileDlg");dlg.hide();var _2926=dijit.byId("titlePane");if(_2926){_2926.resetConfiguration();}},failure:function(err){alert("The profile could not be saved: "+err);}});},_close:function(){this._dialog.destroyRecursive();}});return _291f;});},"Sage/TaskPane/JobManagerTasksTasklet":function(){define(["dojo/i18n!./nls/JobManagerTasksTasklet","dojo/_base/declare","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneContent","Sage/TaskPane/TaskPaneItem","dojo/_base/array","dojo/string"],function(_2927,_2928,_2929,_292a,_292b,_292c,_292d){var _292e=_2928("Sage.TaskPane.JobManagerTasksTasklet",[_2929,_292a],{taskItems:[],constructor:function(){dojo.mixin(this,_2927);this.taskItems=this._getTaskletItems();dojo.subscribe("/group/context/changed",this,this._onGroupContextChanged);},_getTaskletItems:function(){var _292f=this._getCurrentGroupId();switch(_292f){case "jobDefinitions":return this._getDefinationsTasks();case "schedules":return this._getSchedulesTasks();default:return this._getExecutionsTasks();}},_getCurrentGroupId:function(){var svc=Sage.Services.getService("ClientGroupContext");var _2930=svc.getContext();return _2930.CurrentGroupID;},_getExecutionsTasks:function(){var _2931=[{taskId:"taskCancelExecution",type:"Link",displayName:this.taskCancelJob_Caption,clientAction:"Sage.MainView.JobMgr.JobManagerActions.showCancelExecutionDialog();",securedAction:"Entities/JobManager/CancelJob"}];return _2931;},_getDefinationsTasks:function(){var _2932=[{taskId:"taskRunJob",type:"Link",displayName:this.taskRunJob_Caption,clientAction:"Sage.MainView.JobMgr.JobManagerActions.showRunJobDialog(true);",securedAction:"Entities/JobManager/RunJob"}];return _2932;},_getSchedulesTasks:function(){var _2933=[{taskId:"taskRunJob",type:"Link",displayName:this.taskEditTrigger_Caption,clientAction:"Sage.MainView.JobMgr.JobManagerActions.showRunJobDialog(false);",securedAction:"Entities/JobManager/RunJob"},{taskId:"taskDeleteScheduledJob",type:"Link",displayName:this.taskDeleteScheduledJob_Caption,clientAction:"Sage.MainView.JobMgr.JobManagerActions.deleteScheduledJob();",securedAction:"Entities/JobManager/DeleteScheduledJob"}];return _2933;},_onGroupContextChanged:function(){var self=this;dojo.empty("JobManagerTasks");var _2934=this._getTaskletItems();if(_2934){_292c.forEach(_2934,function(_2935,i){dojo.place(_292d.substitute("<div dojotype=\"Sage.TaskPane.TaskPaneItem\" class=\"task-pane-item-common-tasklist\" linkText=\"${0}\" securedAction=\"${1}\" action=\"javascript: ${2}\"></div><br />",[_2935.displayName,_2935.securedAction,_2935.clientAction]),self.taskletContainerNode);});}dojo.parser.parse(self.taskletContainerNode);},});return _292e;});},"Sage/TaskPane/ReportManagerTasksTasklet":function(){define(["dojo/_base/declare","dojo/i18n!./nls/ReportManagerTasksTasklet","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneItem","dojo/_base/array","dojo/string","dijit/_Widget","Sage/_Templated"],function(_2936,_2937,_2938,_2939,_293a,_293b,_293c,_293d){var _293e=_2936("Sage.TaskPane.ReportManagerTasksTasklet",[_2938,_293c,_293d],{nlsResources:_2937,taskItems:[],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div dojoAttachPoint=\"taskletContainerNode\" class=\"task-pane-item-common-tasklist\">","<span id=\"selectionCount\" class=\"task-pane-item-common-selectionText\">0</span>&nbsp;<span id=\"selectionText\">"+_2937.txtRecordsSelected+"</span><br>","<a id=\"clearSelection\" href=\"#\" class=\"task-pane-item-common-clearselection\" dojoAttachEvent=\"click:_clearSelection\">"+_2937.txtClear+"</a><br>","<hr>","<div dojoAttachPoint=\"divTaskItems\">","{% for (var i = 0; i < $.taskItems.length; i++) { ","var task = $.taskItems[i]; %}","<div data-dojo-type=\"Sage.TaskPane.TaskPaneItem\" linkText=\"{%= task.displayName %}\" securedAction=\"{%= task.securedAction %}\" action=\"javascript: {%= task.clientAction %}\"></div>","<br />","{% } %}","</div>","</div>"]),constructor:function(){this.taskItems=this._getTaskItems();dojo.subscribe("/group/context/changed",this,this._onGroupContextChanged);dojo.subscribe("/group/context/changedTask",this,this._onGroupContextChanged);dojo.subscribe("/sage/ui/list/selectionChanged",function(_293f){var _2940=dojo.byId("selectionCount");if(_2940){_2940.innerHTML=_293f.getTotalSelectionCount();}});},_getTaskItems:function(){var _2941=[];var _2942=this._getCurrentGroupId();switch(_2942){case "reports":_2941=this._getReportsTasks();break;case "schedules":_2941=this._getSchedulesTasks();break;case "history":_2941=this._getHistoryTasks();break;}return _2941;},_onGroupContextChanged:function(){var self=this;dojo.empty(self.divTaskItems);var _2943=this._getTaskItems();if(_2943){_293a.forEach(_2943,function(_2944,i){dojo.place(_293b.substitute("<div dojotype=\"Sage.TaskPane.TaskPaneItem\" class=\"task-pane-item-common-tasklist\" linkText=\"${0}\" securedAction=\"${1}\" action=\"javascript: ${2}\"></div><br />",[_2944.displayName,_2944.securedAction,_2944.clientAction]),self.divTaskItems);});}dojo.parser.parse(self.taskletContainerNode);},_clearSelection:function(){var _2945=dijit.byId("list");if(_2945){_2945._listGrid.selection.clear();}},_getCurrentGroupId:function(){var svc=Sage.Services.getService("ClientGroupContext");var _2946=svc.getContext();return _2946.CurrentGroupID;},_getReportsTasks:function(){var _2947=[{taskId:"taskRunReport",type:"Link",displayName:this.nlsResources.taskRunReport_Caption,clientAction:"Sage.MainView.ReportMgr.ReportManagerActions.runReport();",securedAction:"Entities/ReportManager/RunReport"},{taskId:"taskScheduleReport",type:"Link",displayName:this.nlsResources.taskScheduleReport_Caption,clientAction:"Sage.MainView.ReportMgr.ReportManagerActions.scheduleReport();",securedAction:"Entities/ReportManager/ScheduleReport"}];return _2947;},_getSchedulesTasks:function(){var _2948=[{taskId:"taskEditSchedule",type:"Link",displayName:this.nlsResources.taskEditSchedule_Caption,clientAction:"Sage.MainView.ReportMgr.ReportManagerActions.editSchedule();",securedAction:"Entities/ReportManager/EditSchedule"},{taskId:"taskDeleteSchedule",type:"Link",displayName:this.nlsResources.taskDeleteSchedule_Caption,clientAction:"Sage.MainView.ReportMgr.ReportManagerActions.deleteSchedule();",securedAction:"Entities/ReportManager/DeleteSchedule"}];return _2948;},_getHistoryTasks:function(){var _2949=[{taskId:"taskDeleteHistory",type:"Link",displayName:this.nlsResources.taskDeleteHistory_Caption,clientAction:"Sage.MainView.ReportMgr.ReportManagerActions.deleteHistory();",securedAction:"Entities/ReportManager/DeleteHistory"}];return _2949;}});return _293e;});},"Sage/TaskPane/GroupManagerTasksTasklet":function(){define(["dojo/_base/declare","dojo/i18n!./nls/GroupManagerTasksTasklet","Sage/TaskPane/_BaseTaskPaneTasklet","Sage/TaskPane/TaskPaneItem","dojo/_base/array","dojo/string","dijit/_Widget","Sage/_Templated"],function(_294a,_294b,_294c,_294d,_294e,_294f,_2950,_2951){var _2952=_294a("Sage.TaskPane.GroupManagerTasksTasklet",[_294c,_2950,_2951],{nlsResources:_294b,taskItems:[],widgetsInTemplate:true,widgetTemplate:new Simplate(["<div dojoAttachPoint=\"taskletContainerNode\" class=\"task-pane-item-common-tasklist\">","<span id=\"selectionCount\" class=\"task-pane-item-common-selectionText\">0</span>&nbsp;<span id=\"selectionText\">"+_294b.txtRecordsSelected+"</span><br>","<a id=\"clearSelection\" href=\"#\" class=\"task-pane-item-common-clearselection\" dojoAttachEvent=\"click:_clearSelection\">"+_294b.txtClear+"</a><br>","<hr>","<div dojoAttachPoint=\"divTaskItems\">","{% for (var i = 0; i < $.taskItems.length; i++) { ","var task = $.taskItems[i]; %}","<div data-dojo-type=\"Sage.TaskPane.TaskPaneItem\" linkText=\"{%= task.displayName %}\" securedAction=\"{%= task.securedAction %}\" action=\"javascript: {%= task.clientAction %}\"></div>","<br />","{% } %}","</div>","</div>"]),constructor:function(){this.taskItems=this._getTaskItems();dojo.subscribe("/group/context/changed",this,this._onGroupContextChanged);dojo.subscribe("/group/context/changedTask",this,this._onGroupContextChanged);dojo.subscribe("/sage/ui/list/selectionChanged",function(_2953){var _2954=dojo.byId("selectionCount");if(_2954){_2954.innerHTML=_2953.getTotalSelectionCount();}});},_getTaskItems:function(){var _2955=[];var _2956=this._getCurrentGroupId();switch(_2956){case "all_groups":_2955=this._getGroupsTasks();break;case "releases":_2955=this._getReleasesTasks();break;case "statistics":_2955=this._getStatisticsTasks();break;}return _2955;},_onGroupContextChanged:function(){var self=this;dojo.empty(self.divTaskItems);var _2957=this._getTaskItems();if(_2957){_294e.forEach(_2957,function(_2958,i){dojo.place(_294f.substitute("<div dojotype=\"Sage.TaskPane.TaskPaneItem\" class=\"task-pane-item-common-tasklist\" linkText=\"${0}\" securedAction=\"${1}\" action=\"javascript: ${2}\"></div><br />",[_2958.displayName,_2958.securedAction,_2958.clientAction]),self.divTaskItems);});}dojo.parser.parse(self.taskletContainerNode);},_clearSelection:function(){var _2959=dijit.byId("list");if(_2959){_2959._listGrid.selection.clear();}},_getCurrentGroupId:function(){var svc=Sage.Services.getService("ClientGroupContext");var _295a=svc.getContext();return _295a.CurrentGroupID;},_getGroupsTasks:function(){var _295b=[{taskId:"taskViewGroup",type:"Link",displayName:_294b.txtView,clientAction:"Sage.MainView.GroupMgr.GroupManagerActions.viewGroup();",securedAction:"Administration/GroupManager/Groups/View"},{taskId:"taskEditGroup",type:"Link",displayName:_294b.txtEdit,clientAction:"Sage.MainView.GroupMgr.GroupManagerActions.editGroup();",securedAction:"Administration/GroupManager/Groups/Edit"},{taskId:"taskDeleteGroup",type:"Link",displayName:_294b.txtDelete,clientAction:"Sage.MainView.GroupMgr.GroupManagerActions.deleteGroup();",securedAction:"Administration/GroupManager/Groups/Delete"},{taskId:"taskShareGroup",type:"Link",displayName:_294b.txtShare,clientAction:"Sage.MainView.GroupMgr.GroupManagerActions.shareGroup();",securedAction:"Administration/GroupManager/Groups/Share"},{taskId:"taskAssignOwner",type:"Link",displayName:_294b.txtAssignOwner,clientAction:"Sage.MainView.GroupMgr.GroupManagerActions.assignGroupOwner();",securedAction:"Administration/GroupManager/Groups/AssignOwner"}];return _295b;},_getReleasesTasks:function(){var _295c=[{taskId:"taskDeleteReleases",type:"Link",displayName:_294b.txtDelete,clientAction:"Sage.MainView.GroupMgr.GroupManagerActions.deleteReleases();",securedAction:"Administration/GroupManager/Shared/Delete"}];return _295c;},_getStatisticsTasks:function(){var _295d=[{taskId:"taskDeleteStatistics",type:"Link",displayName:_294b.txtResetStatistics,clientAction:"Sage.MainView.GroupMgr.GroupManagerActions.deleteStatistics();",securedAction:"Administration/GroupManager/UsageStatistics/Delete"}];return _295d;}});return _2952;});},"Sage/UI/main":function(){define(["Sage/UI/Columns/main","Sage/UI/Controls/main","Sage/UI/Dashboard/main","Sage/UI/Alarms/main","Sage/UI/SLXPreviewGrid/main","Sage/UI/_DetailPane","Sage/UI/_DialogLoadingMixin","Sage/UI/widgetEditorLookup","Sage/UI/_DetailPanelConfigurationProvider","Sage/UI/_TitlePaneConfigProvider","Sage/UI/AttachmentList","Sage/UI/ActivityList","Sage/UI/NotesHistoryList","Sage/UI/ComboBox","Sage/UI/ConditionManager","Sage/UI/DashboardGroupListConfigurationProvider","Sage/UI/DateTextBox","Sage/UI/DetailPanel","Sage/UI/Dialogs","Sage/UI/EditableGrid","Sage/UI/EditorContainer","Sage/UI/Filters/CheckBoxFilter","Sage/UI/Filters/LookupFilter","Sage/UI/Filters/EditFilterItems","Sage/UI/Filters/EditFilters","Sage/UI/Filters/EntityManagerEditFilters","Sage/UI/FilteringSelect","Sage/UI/Filters/FilterManager","Sage/UI/Filters/FilterPanel","Sage/UI/Filters/EntityManagerFilterPanel","Sage/UI/Filters/GroupFilterConfigurationProvider","Sage/UI/GridContainer","Sage/UI/GridMenuItem","Sage/UI/GroupListConfigurationProvider","Sage/UI/GroupMenuFmtScope","Sage/UI/GroupsTitlePaneConfigProvider","Sage/UI/GroupTabPane","Sage/UI/ImageButton","Sage/UI/JsonPrintDetailPane","Sage/UI/ListPanel","Sage/UI/MenuBar","Sage/UI/MenuBarItem","Sage/UI/MenuItem","Sage/UI/NavBar","Sage/UI/NavBarPane","Sage/UI/NumberTextBox","Sage/UI/OrientableMenuBar","Sage/UI/PopupMenuBarItem","Sage/UI/PopupMenuItem","Sage/UI/SDataLookup","Sage/UI/SearchConditionWidget","Sage/UI/SLXPreviewGrid","Sage/UI/SpeedSearch","Sage/UI/SummaryContainer","Sage/UI/SummaryContents","Sage/UI/SummaryDetailPane","Sage/UI/SummaryFormatterScope","Sage/UI/TabContainer","Sage/UI/TabController","Sage/UI/TextBox","Sage/UI/TimeZoneItem","Sage/UI/TitleContentPane","Sage/UI/ToggleButton","Sage/UI/ToolBarLabel","Sage/UI/UniqueToListValidationTextBox","Sage/UI/URL","Sage/UI/WidgetEditor","Sage/UI/ActivityScheduler","Sage/UI/TimelessActivitiesPane","Sage/UI/Calendar","Sage/UI/CalendarUsersListPane","Sage/UI/TransferBoxWidget"],function(){});},"Sage/UI/Columns/main":function(){define(["Sage/UI/Columns/ActivityAlarm","Sage/UI/Columns/UserType","Sage/UI/Columns/ActivityType","Sage/UI/Columns/Boolean","Sage/UI/Columns/Cell","Sage/UI/Columns/CheckBox","Sage/UI/Columns/Currency","Sage/UI/Columns/DataType","Sage/UI/Columns/DateTime","Sage/UI/Columns/Dnd","Sage/UI/Columns/DndCell","Sage/UI/Columns/Email","Sage/UI/Columns/Lookup","Sage/UI/Columns/Numeric","Sage/UI/Columns/OwnerType","Sage/UI/Columns/Phone","Sage/UI/Columns/PickList","Sage/UI/Columns/RadioGroup","Sage/UI/Columns/SlxEdit","Sage/UI/Columns/SlxLink","Sage/UI/Columns/SlxUser","Sage/UI/Columns/TextBox"],function(){});},"Sage/UI/Columns/ActivityAlarm":function(){define(["dojox/grid/cells/_base","Sage/Utility","dojo/_base/declare"],function(_295e,util,_295f){var _2960=_295f("Sage.UI.Columns.ActivityAlarm",_295e,{format:function(_2961,_2962){var alarm=util.getValue(_2962,"Alarm");var html="<div><div>";if(alarm){html="<img src='images/icons/Alarm_16x16.gif'/>";}return html;}});return _2960;});},"Sage/UI/Columns/ActivityType":function(){define(["dojox/grid/cells/_base","Sage/Utility","Sage/Utility/Activity","dojo/string","dojo/_base/declare"],function(_2963,util,_2964,_2965,_2966){var _2967=_2966("Sage.UI.Columns.ActivityType",_2963,{keyField:false,format:function(_2968,_2969){var type=this.get(_2968,_2969);if(!type){return this.defaultValue;}var key=util.getValue(_2969,this.keyField||"$key");var fmt="<div class=\"Global_Images icon16x16 ${0}\"></div>&nbsp;<span onclick=\"javascript:Sage.Link.editActivity('${1}')\" class=\"activity-type-link\">${2}</span>";return _2965.substitute(fmt,[_2964.getActivityImageClass(type,"small"),key,_2964.getActivityTypeName(type)]);}});return _2967;});},"Sage/UI/Columns/DataType":function(){define(["dojox/grid/cells/_base","dojo/string","dojo/_base/declare","Sage/Utility/Filters"],function(_296a,_296b,_296c,_296d){var _296e=_296c("Sage.UI.Columns.DataType",_296a,{constructor:function(){this.inherited(arguments);},formatter:function(val,index){var t=_296d.resolveDataTypeQB(val),_296f="string";switch(t){case "Integer":_296f="int";break;case "Decimal":_296f="float";break;case "Date/Time":_296f="date";break;case "Memo/Blob":_296f="blob";break;default:_296f="string";break;}return _296b.substitute("<img src=\"images/ft_${0}.gif\" class=\"dataTypeColumnDimensions\" />",[_296f]);}});return _296e;});},"Sage/UI/Columns/Dnd":function(){define(["Sage/UI/Columns/DndCell","dojo/_base/declare"],function(_2970,_2971){var _2972=_2971("Sage.UI.Columns.Dnd",dojox.grid.cells._Base,{formatter:function(val,index){var item=this.grid.getItem(index);var _2973=item.displayName||item.columnName||this.defaultValue;var cell=new _2970({value:_2973,index:index});return cell;}});return _2972;});},"Sage/UI/Columns/DndCell":function(){define(["dijit/_Widget","dijit/_Templated","dojo/dnd/Source","dojo/text!./templates/DndCell.html","dojo/_base/declare"],function(_2974,_2975,_2976,_2977,_2978){var _2979=_2978("Sage.UI.Columns.DndCell",[_2974,_2975],{templateString:_2977,widgetsInTemplate:true,value:null,index:-1,constructor:function(_297a){this.inherited(arguments);},postCreate:function(){this.dndItem.innerHTML=this.get("value");this.dndItem.type="cell";this.dndItem.data={value:this.get("value"),index:this.index};this.inherited(arguments);}});return _2979;});},"Sage/UI/Columns/Email":function(){define(["Sage/UI/Controls/Email","Sage/UI/Columns/Cell","dojo/_base/declare"],function(Email,Cell,_297b){var _297c=_297b("Sage.UI.Columns.Email",Cell,{icon:"",defaultValue:"",widgetClass:Email,getWidgetProps:function(_297d){var _297e=this._getControlId();return dojo.mixin({},this.widgetProps||{},{emailId:_297e,email:_297d,width:this.width,maxLength:this.maxLength,style:this.style,hotKey:this.hotKey,tabIndex:this.tabIndex,field:this.field});},getValue:function(index){var _297f=this.widget.focusNode.value;if((typeof _297f==="undefined")||(_297f==="")){_297f=this.defaultValue;}if(this.widget&&this.widget.focusNode.state==="Error"){return this.widget.focusNode._resetValue;}return _297f;},formatter:function(val,index){if(!val){return "";}var _2980=val;if(this.icon&&this.icon!==""){_2980=(this.icon===true||this.icon==="true")?"<img src=\"images/icons/Send_Write_email_16x16.png\" />":"<img src=\""+this.icon+"\" />";}return dojo.string.substitute("<a href=\"mailto:${0}\">${1}</a>",[val,_2980]);},markupFactory:function(node,cell){dojox.grid.cells.Cell.markupFactory(node,cell);if(dojo.hasAttr(node,"icon")){cell["icon"]=dojo.trim(dojo.attr(node,"icon")||"");}}});return _297c;});},"Sage/UI/Controls/Email":function(){define(["dijit/_Widget","Sage/_Templated","Sage/UI/Controls/TextBox","dojox/validate/regexp","dojo/_base/declare","Sage/Utility"],function(_2981,_2982,_2983,_2984,_2985,_2986){var _2987=_2985("Sage.UI.Controls.Email",[_2981,_2982],{widgetTemplate:new Simplate(["<div class=\"email\" slxcompositecontrol=\"true\" id=\"{%= $.id %}\" >","<input data-dojo-type=\"Sage.UI.Controls.TextBox\" name=\"{%= $.name %}\" ","data-dojo-props=\"textWithIcons: {%= $.buttonVisible %}\"","dojoAttachPoint=\"focusNode\" type=\"text\" style=\"\" ","hotKey=\"{%= $.hotKey %}\" ","{% if($.disabled === \"disabled\") { %} ","disabled=\"disabled\" ","{% } %}","{% if($.readonly === \"readonly\") { %} ","readonly=\"readonly\" ","{% } %}","{% if ($.disabled !== \"disabled\") { %} "," dojoAttachEvent=\"onChange:_onChange, onDblClick:sendEmail, regExpGen:regExpGen\" ","{% } %}"," tabindex=\"{%= $.tabIndex %}\" ","value=\"{%= $.email %}\" required=\"{%= $.required %}\" ","id=\"{%= $.id %}_emailText\" maxlength=\"{%= $.maxLength %}\" > ","{% if ($.buttonVisible && $.disabled !== \"disabled\") { %}","<img alt=\"{%= $.buttonToolTip %}\" tabindex=\"{%= $.tabIndex %}\" data-dojo-attach-event=\"ondijitclick: sendEmail\" ","style=\"padding-left:0;cursor: pointer; vertical-align: left;\" ","src=\"{%= $.buttonImageUrl %}\" ","title=\"{%= $.buttonToolTip %}\" id=\"{%= $.id %}_emailButton\"> ","{% } %}","</div>"]),shouldPublishMarkDirty:true,name:"",autoPostBack:false,displayMode:"",_class:"",textboxToolTip:"",textboxStyle:"",readonly:"",disabled:"",hotKey:"",maxLength:128,buttonVisible:true,buttonImageUrl:"",buttonToolTip:"",buttonStyle:"",required:false,tabIndex:0,email:"",emailId:"",constructor:function(_2988){_2988.id=_2988.emailId;},postCreate:function(){this.formatEmail();this.inherited(arguments);},formatEmail:function(){dojo.style(this.focusNode.focusNode,"color","#000099");},widgetsInTemplate:true,_onChange:function(_2989){if(this.shouldPublishMarkDirty){dojo.publish("Sage/events/markDirty");}this.formatEmailChange();},regExpGen:function(){var _298a="[^< ]+@[^< ]+\\.+.[^< ]*?";return _298a;},formatEmailChange:function(){if(this.email!==this.focusNode.value){this.email=this.focusNode.value;}},sendEmail:function(){var email=this.email;email="mailto:"+email;document.location.href=email;}});return _2987;});},"Sage/UI/Columns/Lookup":function(){define(["Sage/Utility","dojox/grid/cells","dojo/_base/declare"],function(_298b,cells,_298c){var _298d=_298c("Sage.UI.Columns.Lookup",cells._Widget,{widgetClass:Sage.UI.SDataLookup,defaultValue:"",constructor:function(o){if(o.lookupOptions.returnObject){this.formatter=function(_298e,_298f,_2990){if(_298e!==null){var _2991=o.lookupOptions.field.split(".");var _2992=_298e;for(var i=0;i<_2991.length;i++){if(_2992){_2992=_2992[_2991[i]];}}return _2992;}return null;};}},getWidgetProps:function(_2993){var luId=this.LuId();var _2994="";if(this.lookupOptions.seedOnRelatedEntity){var oItem=this.item[this.lookupOptions.seedOnRelatedEntity];if(oItem&&typeof oItem.$key!=="undefined"){_2994=oItem.$key;}else{}}return dojo.mixin({},this.widgetProps||{},{id:luId,value:_2993,displayMode:this.lookupOptions.displayMode,seedOnRowEntity:this.lookupOptions.seedOnRowEntity,seedOnRelatedEntity:this.lookupOptions.seedOnRelatedEntity,relatedEntityId:_2994,rowEntityId:this.item.$key,returnObject:this.lookupOptions.returnObject,addEmptyListItem:this.lookupOptions.addEmptyListItem,field:this.lookupOptions.field,name:this.lookupOptions.name,structure:this.lookupStructure,storeOptions:this.lookupStoreOptions,gridOptions:this.lookupGridOptions,shouldPublishMarkDirty:false});},formatNode:function(_2995,_2996,_2997){if(!this.widgetClass){return _2996;}var _2998=dijit.byId(this.LuId());if(!_2998){this.widget=this.createWidget.apply(this,arguments);}else{this.widget=_2998;this.attachWidget.apply(this,arguments);}this.sizeWidget.apply(this,arguments);this.grid.views.renormalizeRow(_2997);this.grid.scroller.rowHeightChanged(_2997,true);this.widget.focusNode.focus();return undefined;},setCurrentItems:function(){this.editInfo=this.grid.edit.info;this.item=this.grid.getItem(this.editInfo.rowIndex);},LuId:function(){this.setCurrentItems();var _2999=[this.item.$key,this.editInfo.cell.field].join("_");if(_298b.getModeId()==="insert"){_2999=[this.item.$cacheID,this.editInfo.cell.field].join("_");}return _2999;},getValue:function(){this.setCurrentItems();if(this.lookupOptions.returnObject){return (this.widget.focusNode.item!==null)?this.widget.focusNode.item:this.widget.focusNode.value;}return this.widget.focusNode.value;}});return _298d;});},"Sage/UI/Columns/SlxEdit":function(){define(["dojo/i18n!./nls/SlxEdit","dojo/_base/declare"],function(_299a,_299b){var _299c=_299b("Sage.UI.Columns.SlxEdit",dojox.grid.cells.Cell,{field:"",entityType:"",cellValue:"",smartPart:"",appliedSecurity:"",dialogTitle:"",isCentered:true,dialogTop:0,dialogLeft:0,dialogHeight:0,dialogWidth:0,formObjectName:"",constructor:function(){dojo.mixin(this,_299a);if(!this.hidden){if(!this.appliedSecurity&&arguments.appliedSecurity){this.appliedSecurity=arguments.appliedSecurity;}if(this.appliedSecurity){var svc=Sage.Services.getService("RoleSecurityService");if(svc){this.hidden=!svc.hasAccess(this.appliedSecurity);}}}this.inherited(arguments);},format:function(_299d,_299e){if(_299e===null){return this.defaultValue;}var _299f=this.cellValue;if(this.cellValue===""&&this.field!==""){_299f=Sage.Utility.getValue(_299e,this.field);}if(this.cellValue===""&&_299f===""){_299f=this.editText;}var _29a0=Sage.Utility.getValue(_299e,"$key");if(_29a0.match(/[=]/)){_29a0=_29a0.match(/[=]\S{12}/g).join(",").replace(/=/g,"");}return String.format("<a href=\"{0}\">{1}</a>",String.format("javascript:Sage.Utility.loadDetailsDialog( {{ entityType:'{0}', smartPart:'{1}', entityId:'{2}', dialogTitle:'{3}', isCentered:{4}, dialogTop:{5}, dialogLeft:{6}, dialogHeight:{7}, dialogWidth:{8} }} );",this.entityType,this.smartPart,_29a0,this.dialogTitle,this.isCentered,this.dialogTop,this.dialogLeft,this.dialogHeight,this.dialogWidth),_299f);}});return _299c;});},"Sage/UI/Columns/TextBox":function(){define(["Sage/UI/Controls/TextBox","Sage/UI/Columns/Cell","dojo/_base/declare"],function(_29a1,Cell,_29a2){var _29a3=_29a2("Sage.UI.Columns.TextBox",Cell,{defaultValue:"",widgetClass:_29a1,getWidgetProps:function(_29a4){var _29a5=this._getControlId();this.defaultValue=_29a4;return dojo.mixin({},this.widgetProps||{},{value:"",maxLength:this.maxLength,regExp:this.regExp,shouldPublishMarkDirty:false});},getValue:function(index){var _29a6=this.widget.focusNode.value;var _29a7=dijit.byId(this.widget.focusNode.id);if(!_29a7.isValid()||(typeof _29a6==="undefined")||(_29a6==="")){_29a7.undo();_29a6=this.defaultValue;}else{this.defaultValue=_29a6;}return _29a6;}});return _29a3;});},"Sage/UI/Controls/main":function(){define(["Sage/UI/Controls/_customSelectMixin","Sage/UI/Controls/_DialogHelpIconMixin","Sage/UI/Controls/Address","Sage/UI/Controls/CheckBox","Sage/UI/Controls/CopyToClipboard","Sage/UI/Controls/Currency","Sage/UI/Controls/CurrencyTextBox","Sage/UI/Controls/DateTimePicker","Sage/UI/Controls/DependControl","Sage/UI/Controls/DependencyLookup","Sage/UI/Controls/DropDownSelectPickList","Sage/UI/Controls/DropDownSelectUser","Sage/UI/Controls/DurationSelect","Sage/UI/Controls/Email","Sage/UI/Controls/HelpMenu","Sage/UI/Controls/LogOffButton","Sage/UI/Controls/Lookup","Sage/UI/Controls/EntityInfoToolTip","Sage/UI/Controls/MultiSelectPickList","Sage/UI/Controls/MultiTab","Sage/UI/Controls/Name","Sage/UI/Controls/Numeric","Sage/UI/Controls/Phone","Sage/UI/Controls/PickList","Sage/UI/Controls/PickListAsText","Sage/UI/Controls/Select","Sage/UI/Controls/SimpleTextarea","Sage/UI/Controls/SingleSelectPickList","Sage/UI/Controls/SummaryAggregate","Sage/UI/Controls/TextBox"],function(){});},"Sage/UI/Controls/Address":function(){define(["dijit/_Widget","dojo/string","Sage/_Templated","Sage/Utility","Sage/UI/Controls/TextBox","Sage/UI/Controls/PickList","Sage/UI/Controls/DropDownSelectPickList","dijit/Dialog","Sage/UI/Controls/_DialogHelpIconMixin","dojo/i18n!./nls/Address","dojo/text!./templates/Address.html","dojo/text!./templates/AddressEdit.html","dojo/_base/declare","dojo/_base/array"],function(_29a8,_29a9,_29aa,_29ab,_29ac,_29ad,_29ae,_29af,_29b0,_29b1,_29b2,_29b3,_29b4,array){var _29b5=_29b4("Sage.UI.Controls.Address",[_29a8,_29aa],{widgetTemplate:new Simplate(_29b2.split("\r")),dialogContent:new Simplate(_29b3.split("\r")),templateOverridePath:"",widgetsInTemplate:true,clientId:"",tabIndex:0,autoPostBack:false,readOnly:false,enabled:true,showButton:true,displayValue:"",displayValueClientId:"",height:"",imageData:{imageEditUrl:"",imageEditToolTip:"",imageEditAltText:"",imageMapQuestUrl:"",imageMapQuestToolTip:"",imageMapQuestAltText:""},fields:[],mapQuestValues:{},editorChange:function(){this.isDirty=true;},isDirty:false,name:"",constructor:function(_29b6){dojo.mixin(this,_29b6);_29b6.id=_29b6.clientId;_29b6.displayValue=_29ab.htmlDecode(_29b6.displayValue);this.resources=_29b1;if(_29b6.templateOverridePath&&_29b6.templateOverridePath.length>0){try{this.dialogContent=new Simplate(dojo["cache"]("Sage.UI.Controls",_29b6.templateOverridePath).split("\r"));}catch(e){}}this.inherited(arguments);},setAttribute:function(attr,val){this.set(attr,val);},postCreate:function(){this.inherited(arguments);this.setAttribute("tabindex","-1");},showDialog:function(){this.editDialog=dijit.byId([this.id,"-Dialog"].join(""));if(!this.editDialog){this.editDialog=new _29af({title:this.resources.dialogTitle,id:[this.id,"-Dialog"].join(""),"class":"address-edit"});dojo.mixin(this.editDialog,new _29b0());this.editDialog.createHelpIconByTopic("accountaddresschange");}this.htmlEncodeForEditDialog();this.editDialog.set("content",this.dialogContent.apply({id:this.id,cancelText:this.resources.cancelText,okText:this.resources.okText,fields:this.fields}));this.isDirty=false;this.editDialog.show();if(this.modality==="modeless"){dojo.destroy([this.id,"-Dialog_underlay"].join(""));}},htmlEncodeForEditDialog:function(){array.forEach(this.fields,function(entry,i){if((entry.xtype==="picklistcombo"||entry.xtype==="textfield")&&entry.value.indexOf("\"")>-1){entry.value=_29ab.htmlEncode(entry.value);}});},showMap:function(){this.createFormItems();var _29b7=this.getAddressValues();var map={"streetaddress":"addr1","city":"city","state":"state","zip":"postalcode","country":"country"};var _29b8={};for(var key in map){if(_29b7[map[key]]){_29b8[key]=(typeof _29b7[map[key]]==="object")?_29b7[map[key]].text:_29b7[map[key]];}}_29b8.level=9;_29b8.iconid=0;_29b8.height=300;_29b8.width=500;var _29b9=[];for(var _29ba in _29b8){_29b9.push(_29ba+"="+encodeURIComponent(_29b8[_29ba]));}var url="http://www.mapquest.com/cgi-bin/ia_free?"+_29b9.join("&");var _29bb="directories=no,location=no,menubar=no,pageXOffset=0px,pageYOffset=0px,scrollbars=yes,status=no,titlebar=no,toolbar=yes";window.open(url,"",_29bb);},createFormItems:function(){var items=[];for(var i=0;i<this.fields.length;i++){if(this.fields[i].visible===false){continue;}this.mapQuestValues[this.fields[i].name]=this.fields[i];var f=$.extend(this.fields[i],this.fields[i].pickList,{id:this._clientId+"_field_"+this.fields[i].name,stateful:false,anchor:(this.fields[i].xtype!="checkbox")?"100%":false});if(f.maxLength>0){f.autoCreate={tag:"input",type:"text",maxlength:this.fields[i].maxLength};}f.tabIndex=i+1;items.push(f);}return items;},getAddressValues:function(){var _29bc={};for(var name in this.mapQuestValues){var field=this.mapQuestValues[name];if(field){_29bc[name]=field.value;}}return _29bc;},getEditFields:function(){this.setDataFields();},setDataFields:function(){var _29bd,_29be,xtype;for(var i=0;i<this.fields.length;i++){_29bd=dijit.byId([this.id,"-",this.fields[i].name].join(""));_29be=dojo.byId(this.fields[i].formClientId);xtype=this.fields[i].xtype;if(_29bd){if(xtype==="picklistcombo"){if(_29be){_29be.value=_29bd.get("value");}this.fields[i].value=_29bd.get("value");}if(xtype==="checkbox"){if(_29be){_29be.checked=_29bd.get("checked");}this.fields[i].value=_29bd.get("checked");}if(xtype==="textfield"){if(_29be){_29be.value=_29bd.get("value");}this.fields[i].value=_29bd.get("value");}}}},_okClicked:function(){var that=this;setTimeout((function(d){return function(){that._updateValues();};})(that),1);},_updateValues:function(){if(this.isDirty){this.getEditFields();var _29bf=dojo.byId(this.resultValueClientId);dijit.byId(this.clientId+"_displayText1").set("value",Sage.Format.Address.formatAddress(this.fields,true));_29bf.value=Sage.Format.Address.formatAddress(this.fields,true);dojo.publish("Sage/events/markDirty");if(this.autoPostBack){__doPostBack(_29bf.name,"");}}},_cancelClicked:function(){this.editDialog.hide();}});return _29b5;});},"Sage/UI/Controls/CopyToClipboard":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","dijit/Dialog","dijit/layout/TabContainer","dijit/layout/ContentPane","dijit/form/SimpleTextarea","dijit/form/Button","dojo/_base/lang","Sage/Format","Sage/Utility","Sage/Utility/Email","Sage/Data/SDataServiceRegistry","dojo/_base/sniff","dojo/text!./templates/CopyToClipboard.html","dojo/i18n!./nls/CopyToClipboard","dojo/_base/declare"],function(_29c0,_29c1,_29c2,_29c3,_29c4,_29c5,_29c6,_29c7,lang,_29c8,util,email,_29c9,has,_29ca,_29cb,_29cc){var _29cd=_29cc("Sage.UI.Controls.CopyToClipboard",[_29c2,_29c0,_29c1],{templateString:_29ca,widgetsInTemplate:true,textAlign:"left",calendarName:"calendar1",timeTextBoxName:"timeTextBox1",textNode:null,contentNode:null,closeText:"",dialogTitle:"",helpText:"",mashupName:"",queryName:"",service:null,template:"",entity:null,widgetTemplate:null,id:"copyToClipboard",constructor:function(_29ce){this.service=_29c9.getSDataService("mashups");this.inherited(arguments);},postMixInProperties:function(){lang.mixin(this,_29cb);this.inherited(arguments);},show:function(){if(!window.clipboardData){this.dialogNode.set("title",this.dialogTitle);this.dialogNode.show();}this._readMashupFeed();},_readMashupFeed:function(_29cf){var _29d0=new Sage.SData.Client.SDataNamedQueryRequest(this.service),_29d1=this.mashupName||"SummaryViewQueries",_29d2=Sage.Services.getService("ClientEntityContext"),_29d3=_29d2.getContext(),_29d4=_29d3.EntityId,self=this;_29d0.setApplicationName("$app");_29d0.setResourceKind("mashups");_29d0.uri.setCollectionPredicate("'"+this.mashupName+"'");_29d0.setQueryName("execute");_29d0.setQueryArg("_resultName",this.queryName);_29d0.setQueryArg("_ids","'"+_29d4+"'");_29d0.read({success:dojo.hitch(self,function(data){this._mixinTemplateLocale();this.entity=data.$resources[0];this._buildTemplateWidget();this._setContentToCopy();if(_29cf&&(typeof _29cf==="function")){_29cf.call(this,data);}}),failure:dojo.hitch(self,function(data){this.dialogNode.hide();})});},_mixinTemplateLocale:function(){var _29d5=["Sage"],_29d6=this.template.split("/"),i;for(i=0;i<_29d6.length-1;i++){_29d5.push(_29d6[i]);}var path="dojo/i18n!"+_29d5.join("/")+"/nls/"+_29d6[_29d6.length-1].replace(".html","");require([path],lang.hitch(this,function(nls){lang.mixin(this,nls);}));},_buildTemplateWidget:function(){var _29d7=dojo["cache"]("Sage",this.template),temp=eval(_29d7);this.widgetTemplate=new Simplate(temp);},_setContentToCopy:function(){var val=this.widgetTemplate.apply(this),_29d8;this.contentNode.innerHTML=val;this.textNode.set("value",val);if(window.clipboardData){try{_29d8=util.getPlainText(this.contentNode);window.clipboardData.setData("text",_29d8);this.dialogNode.hide();}catch(e){}}},_closeClicked:function(_29d9){this.onCloseClicked();},onCloseClicked:function(){},destroy:function(){var _29da=dijit.byId(this.dialogNode.id);if(_29da){setTimeout(function(){_29da.destroyRecursive(false);},1);this.inherited(arguments);}},OnEmailContentReady:function(_29db){this._readMashupFeed(function(){var _29dc=dojo.byId(_29db+"_to"),_29dd=(_29dc)?_29dc.value:"",_29de=dojo.byId(_29db+"_cc"),_29df=(_29de)?_29de.value:"",_29e0=dojo.byId(_29db+"_bcc"),_29e1=(_29e0)?_29e0.value:"",_29e2=dojo.byId(_29db+"_subject"),_29e3=(_29e2)?_29e2.value:"",_29e4=util.getPlainText(this.contentNode),recip={};if(_29dd!==""){recip.to=_29dd;}if(_29df!==""){recip.cc=_29df;}if(_29e1!==""){recip.bcc=_29e1;}email.writeEmail(recip,_29e3,_29e4,false);});}});return _29cd;});},"Sage/UI/Controls/DependControl":function(){define(["dojo/_base/declare"],function(_29e5){var _29e6=_29e5("Sage.UI.Controls.DependControl",null,{BaseId:"",ListId:"",TextId:"",Type:"",DisplayProperty:"",SeedProperty:"",CurrentValue:"",constructor:function(_29e7,_29e8,_29e9,type,_29ea,_29eb){this.BaseId=_29e7;this.ListId=_29e8;this.TextId=_29e9;this.Type=type;this.DisplayProperty=_29ea;this.SeedProperty=_29eb;this.CurrentValue="";},LoadList:function(_29ec){var _29ed="SLXDependencyHandler.aspx";dojo.xhrGet({url:_29ed,handleAs:"text",preventCache:true,sync:true,content:{cacheid:this.BaseId,type:this.Type,displayprop:this.DisplayProperty,seeds:_29ec,currentval:this.CurrentValue},load:dojo.hitch(this,function(data){var list=dojo.byId(this.ListId);list.innerHTML="";var items=data.split("|");for(var i=0;i<items.length;i++){if(items[i]===""){continue;}var parts=items[i].split(",");var _29ee=document.createElement("OPTION");list.options.add(_29ee);if(parts[0].charAt(0)=="@"){parts[0]=parts[0].substr(1);_29ee.selected=true;}_29ee.innerHTML=parts[1];_29ee.value=parts[0];}}),error:function(error){console.error(error);}});},ClearList:function(){var list=dojo.byId(this.ListId);list.innerHTML="";}});return _29e6;});},"Sage/UI/Controls/DependencyLookup":function(){define(["dijit/Dialog","Sage/UI/Controls/DependControl","dojo/_base/declare"],function(_29ef,_29f0,_29f1){var _29f2=_29f1("Sage.UI.Controls.DependencyLookup",null,{ClientId:"",PanelId:"",InitCall:null,LookupControls:null,CurrentIndex:0,AutoPostBack:false,panel:null,Title:"",Size:"",constructor:function(_29f3,_29f4,size,_29f5,title){this.ClientId=_29f3;this.PanelId=_29f3+"_Panel";this.InitCall=_29f4;this.LookupControls=[];this.CurrentIndex=0;this.Size=size+"px";this.AutoPostBack=_29f5;this.panel=null;this.Title=title;},CanShow:function(){var _29f6=false;if(Sys){var prm=Sys.WebForms.PageRequestManager.getInstance();_29f6=prm.get_isInAsyncPostBack();}if(!_29f6){return true;}else{var id=this.ClientId+"_obj";var _29f7=function(){window[id].Show("");};Sage.SyncExec.call(_29f7);return false;}},Show:function(){if(this.CanShow()){if(this.panel===null){this.panel=dijit.byId(this.PanelId+"_Dialog");var _29f8=dojo.byId(this.PanelId);if(!this.panel){_29f8.style.display="block";dojo.place(_29f8,dojo.byId("mainform"),"last");this.panel=new _29ef({id:this.PanelId+"_Dialog",content:_29f8,title:this.Title||""});this.panel.startup();dojo.place(this.panel.domNode,dojo.byId("mainform"),"last");}else{this.panel.setContent(_29f8);_29f8.style.display="block";}if((this.CurrentIndex===0)||(this.LookupControls[i]!==undefined)){this.Init();}for(var i=0;i<this.CurrentIndex;i++){if(this.LookupControls[i]!==undefined){var text=dojo.byId(this.LookupControls[i].TextId);var _29f9="";if(i>0){_29f9=this.GetSeeds(i);}if((text.value!=="")||(_29f9!=="")||(i===0)){this.LookupControls[i].CurrentValue=text.value;var _29fa=this.LookupControls[i].ListId;var list=dojo.byId(_29fa);if(list.options.length===0){this.LookupControls[i].LoadList(_29f9);}}}}}this.panel.show();}},AddControl:function(_29fb,_29fc,_29fd,type,_29fe,_29ff){var _2a00=new _29f0(_29fb,_29fc,_29fd,type,_29fe,_29ff);this.LookupControls[this.CurrentIndex]=_2a00;this.CurrentIndex++;},AddFilters:function(_2a01,_2a02){},SelectionChanged:function(index){if((index+1)<this.CurrentIndex){this.LookupControls[index+1].LoadList(this.GetSeeds(index+1));for(var i=index+2;i<this.CurrentIndex;i++){this.LookupControls[i].ClearList();}}},Ok:function(){this.panel.hide();for(var i=0;i<this.CurrentIndex;i++){var text=document.getElementById(this.LookupControls[i].TextId);var list=document.getElementById(this.LookupControls[i].ListId);if((list.selectedIndex!==undefined)&&(list.selectedIndex!=-1)){text.value=list.options[list.selectedIndex].text;}else{text.value="";}this.InvokeChangeEvent(text);}if(this.AutoPostBack){if(Sys){Sys.WebForms.PageRequestManager.getInstance()._doPostBack(this.ClientId,null);}else{document.forms(0).submit();}}},Init:function(){eval(this.InitCall);},InvokeChangeEvent:function(cntrl){if(document.createEvent){var evObj=document.createEvent("HTMLEvents");evObj.initEvent("change",true,true);cntrl.dispatchEvent(evObj);}else{cntrl.fireEvent("onchange");}},GetSeeds:function(index){var _2a03="";for(var i=index;i>0;i--){var _2a04=this.LookupControls[i-1];var _2a05=this.LookupControls[i];var list=dojo.byId(_2a04.ListId);if(list.selectedIndex==-1){return _2a03;}var seed=list.options[list.selectedIndex];_2a03+=_2a05.SeedProperty+","+seed.text+"|";}_2a03=_2a03.substr(0,_2a03.length-1);return _2a03;},close:function(){this.panel.hide();}});return _29f2;});},"Sage/UI/Controls/HelpMenu":function(){define(["dijit/MenuBar","Sage/UI/MenuItem","Sage/UI/PopupMenuBarItem","Sage/UI/OrientableMenuBar","dojo/i18n!./nls/HelpMenu","dojo/_base/declare","dojo/dom-class","Sage/Utility"],function(_2a06,_2a07,_2a08,_2a09,_2a0a,_2a0b,_2a0c,_2a0d){var _2a0e=_2a0b("Sage.UI.Controls.HelpMenu",_2a09,{orientation:{"BR":"TR","BL":"TL"},postMixInProperties:function(){this.inherited(arguments);},postCreate:function(){this.inherited(arguments);var menu=new dijit.Menu();menu.addChild(new _2a07({label:_2a0a.webClientHelpText,imageClass:"icon_Help_16x16",title:_2a0a.webClientHelpText,id:"helpRoot",onClick:function(){_2a0d.openHelp("slxoverview");}}));menu.addChild(new _2a07({label:_2a0a.gettingStartedText,imageClass:"icon_pdf_16x16",title:_2a0a.gettingStartedText,id:"helpGettingStarted",onClick:function(){_2a0d.openPdfDoc("Getting Started with Infor CRM Web Client.pdf");}}));menu.addChild(new _2a07({label:_2a0a.quickReferenceText,imageClass:"icon_pdf_16x16",title:_2a0a.quickReferenceText,id:"helpQuickReference",onClick:function(){Sage.Utility.openPdfDoc("Infor CRM Quick Reference for the Web User.pdf");}}));menu.addChild(new _2a07({label:_2a0a.aboutText,imageClass:"icon_Help_16x16",title:_2a0a.aboutText,id:"helpAbout",onClick:function(){Sage.Utility.openHelp("slxthirdparty");}}));var _2a0f=menu.getChildren();_2a0c.add(_2a0f[1].domNode,"hiddenHelpButton");_2a0c.add(_2a0f[2].domNode,"hiddenHelpButton");this.addChild(new _2a08({label:"",iconStyle:"width: 16px",imageClass:"fa fa-question",title:_2a0a.helpText,id:"btnHelpMenu",popup:menu}));}});return _2a0e;});},"Sage/UI/Controls/LogOffButton":function(){define(["dijit/MenuBar","Sage/UI/MenuItem","Sage/UI/MenuBarItem","dojo/i18n!./nls/LogOffButton","dojo/_base/declare"],function(_2a10,_2a11,_2a12,_2a13,_2a14){var _2a15=_2a14("Sage.UI.Controls.LogOffButton",_2a10,{postMixInProperties:function(){this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this.addChild(new _2a12({label:_2a13.logOffText,iconStyle:"width: 16px",icon:"images/icons/login_16.png",imageClass:"icon_login_16",title:_2a13.logOffText,id:"btnLogOff",onClick:function(){try{window.location.href="Shutdown.axd?Source=LogOffButton";}catch(e){}}}));}});return _2a15;});},"Sage/UI/Controls/MultiSelectPickList":function(){define(["dojo/_base/array","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","dijit/form/TextBox","dijit/form/DropDownButton","dijit/form/CheckBox","dijit/TooltipDialog","dijit/form/Button","Sage/UI/Controls/PickList","dojo/text!./templates/MultiSelectPickList.html","dojo/_base/declare","dojo/_base/lang"],function(array,_2a16,_2a17,_2a18,_2a19,_2a1a,_2a1b,_2a1c,_2a1d,_2a1e,_2a1f,_2a20,lang){var _2a21=_2a20("Sage.UI.Controls.MultiSelectPickList",[_2a1e,_2a18,_2a16,_2a17],{constructor:function(_2a22){if(_2a22.clientId){this.id=_2a22.clientId+"-MultipleSelectPickList";}this.inherited(arguments);},postCreate:function(){this._setupTooltips(this.dropDownButtonNode.domNode,this.textNode.domNode);var def=new dojo.Deferred(),len;this.getPickListData(def);def.then(lang.hitch(this,function(data){if(typeof data==="string"){this.textNode.set("value",data);this.dropDownButtonNode.disabled=true;}var items=[],len=data&&data.items&&data.items.$resources&&data.items.$resources.length,i,item,_2a23;for(i=0;i<len;i++){item=data.items.$resources[i];items.push({id:item.$key,code:item.code,number:item.number,text:item.text});}this.storeData={identifier:"id",label:"text",items:items};_2a23=dojo.byId(this._textId);if(_2a23){this.lastValidValue=_2a23.value;this.initialValue=this.lastValidValue;}else{if(items.length>0){this.lastValidValue=items[0].text;}}this.textNode.set("value",this.lastValidValue);this.initialValues=this.lastValidValue.split(",");this.lastValidValues=this.lastValidValue.split(",");this._renderFormElements(items);}),function(e){console.error(e);});if(this.get("canEditText")===false){this.textNode.disabled=true;}len=this.get("maxLength");if(len>0){this.textNode.set("maxLength",len);}if(this.get("itemMustExist")){this.textNode.isValid=lang.hitch(this,function(_2a24){var _2a25=this.textNode.get("value"),split=_2a25.split(","),valid=false;if(split.length===1&&split[0]===""&&!this.required){valid=true;}else{valid=array.every(split,function(_2a26){return array.some(this.storeData.items,function(item){return item.text.trim()===_2a26.trim();},this);},this);}if(valid){this.lastValidValue=_2a25;}if(_2a24){valid=true;}if(!valid){if(this.lastValidValue){this.textNode.set("value",this.lastValidValue);valid=true;}}return valid;});}else{this.textNode.isValid=function(_2a27){return true;};}this.inherited(arguments);},uninitialize:function(){this.inherited(arguments);},_isItemSelected:function(_2a28){var _2a29=this.textNode.get("value"),_2a2a=false,split=[];if(_2a29){split=_2a29.split(",");array.forEach(split,function(item,index,array){if(_2a28.text.trim()===item.trim()){_2a2a=true;}},this);}return _2a2a;},_storeHasItem:function(_2a2b){var _2a2c=false;_2a2c=array.some(this.storeData.items,function(item){if(item.text.trim()===_2a2b.trim()){return true;}return false;},this);return _2a2c;},_renderFormElements:function(items){var node=this.tooltipContainer;array.forEach(items,function(item,index,array){var _2a2d=new _2a1b({id:this.id+"_checkBox"+index,name:"checkBox_"+item.text,value:item.text,checked:this._isItemSelected(item)}),label;_2a2d.startup();dojo.place(_2a2d.domNode,node,"last");label=dojo.create("label",{"for":_2a2d.id},_2a2d.domNode,"after");label.innerHTML=item.text;dojo.create("br",{},label,"after");},this);},_onTextBlur:function(){this._updateASPNETFields();},_updateASPNETFields:function(){if(this.textNode.isValid()){var val=this.textNode.get("value");if(val.trim()!==this.initialValue.trim()){this.setASPNETInputs(val,"","");}}},_onTooltipClose:function(){var items=[];dojo.query("input",this.tooltipContainer).forEach(function(node){var wid=dijit.byId(node.id),val,_2a2e;if(wid){val=wid.get("value");_2a2e=wid.get("checked");if(_2a2e){items.push(val);}}});array.forEach(this.itemsNotInStore,function(_2a2f){items.push(_2a2f.trim());},this);this.textNode.set("value",items.join(", "));this._updateASPNETFields();},_onTooltipShow:function(){this._refreshCheckedItems();this._refreshItemsNotInStore();},_refreshItemsNotInStore:function(){var _2a30=this.textNode.get("value"),_2a31=_2a30.split(",");this.itemsNotInStore=[];array.forEach(_2a31,function(item,index,array){if(!this._storeHasItem(item.trim())){if(item.trim()!==""){this.itemsNotInStore.push(item.trim());}}},this);},_refreshCheckedItems:function(){dojo.query("input",this.tooltipContainer).forEach(function(node){var wid=dijit.byId(node.id);if(wid){wid.set("checked",false);}});array.forEach(this.storeData.items,function(item,index,array){if(this._isItemSelected(item)){dojo.query("input",this.tooltipContainer).forEach(function(node){var wid=dijit.byId(node.id);if(wid){if(node.value.trim()===item.text.trim()){wid.set("checked",true);}}});}},this);},templateString:_2a1f,widgetsInTemplate:true,storeData:null,lastValidValue:"",lastValidValues:null,initialValue:"",initialvalues:null,itemsNotInStore:null});return _2a21;});},"Sage/UI/Controls/MultiTab":function(){define(["dojo/_base/declare","dojo/dom","dojo/ready","dojo/aspect","dijit/layout/TabContainer","dijit/registry"],function(_2a32,dom,ready,_2a33,_2a34,_2a35){var _2a36=_2a32("Sage.UI.Controls.MultiTab",[_2a34],{region:"center",tabStrip:false,hiddenFieldId:"",destroyRecursive:function(){if(this.tablist){this.tablist.destroy();}this.inherited(arguments);},postCreate:function(){var _2a37=this.domNode.parentNode.id,_2a38=_2a35.byId(_2a37),that=this;_2a38.resize();setTimeout(function(){_2a38.resize();if(that.selectedChildWidget){that._showChild(that.selectedChildWidget);}},50);},startup:function(){this.hiddenFieldId=this.id+"_tabstate";var _2a39=dom.byId(this.hiddenFieldId);if(_2a39.value!==""){_2a35.byId(this.id).selectChild(_2a35.byId(_2a39.value));}this.inherited(arguments);}});return _2a36;});},"Sage/UI/Controls/Name":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/i18n","dijit/_Widget","Sage/_Templated","Sage/UI/Controls/TextBox","Sage/UI/Controls/PickList","Sage/UI/Controls/DropDownSelectPickList","dijit/Dialog","Sage/UI/Controls/_DialogHelpIconMixin","dojo/i18n!./nls/Name","dojo/text!./templates/Name.html","dojo/text!./templates/PersonName.html","dijit/registry"],function(lang,_2a3a,i18n,_2a3b,_2a3c,_2a3d,_2a3e,_2a3f,_2a40,_2a41,_2a42,_2a43,_2a44,_2a45){var _2a46=_2a3a("Sage.UI.Controls.Name",[_2a3b,_2a3c],{widgetTemplate:new Simplate(_2a43.split("\r")),dialogContent:new Simplate(_2a44.split("\r")),templateOverridePath:"templates/PersonName-Override.html",widgetsInTemplate:true,clientId:"",nameDesc:"",buttonImageUrl:"",buttonToolTip:"",buttonVisible:true,tabIndex:0,prefix:"",first:"",middle:"",last:"",suffix:"","Name Prefix":{},"Name Suffix":{},"LastName Prefix":{},name:"",prefixClientId:"",nameFirstClientId:"",nameMiddleClientId:"",nameLastClientid:"",suffixClientId:"",required:false,autoPostBack:false,constructor:function(_2a47){_2a47.id=_2a47.clientId;this.resources=i18n.getLocalization("Sage.UI.Controls","Name");if(_2a47.templateOverridePath&&_2a47.templateOverridePath.length>0){try{this.dialogContent=new Simplate(dojo["cache"]("Sage.UI.Controls",_2a47.templateOverridePath).split("\r"));}catch(e){}}},postCreate:function(){this.getDotNetData();if(!this["Name Prefix"].data||!this["Name Suffix"].data||!this["LastName Prefix"].data){this.loadPickLists();}this.inherited(arguments);},loadPickLists:function(){var _2a48=new dojo.Deferred();var _2a49=new dojo.Deferred();var _2a4a=new dojo.Deferred();var _2a4b={pickListName:"Name Prefix",canEditText:false,itemMustExist:true,maxLength:-1,storeMode:"text",sort:true,displayMode:"AsControl",required:false,autoPostBack:false};var _2a4c=new _2a3e(_2a4b);_2a4c.getPickListData(_2a48);_2a48.then(dojo.hitch(this,this.storePickListData),function(e){console.error(e);});_2a4b.pickListName="Name Suffix";var _2a4d=new _2a3e(_2a4b);_2a4d.getPickListData(_2a49);_2a49.then(dojo.hitch(this,this.storePickListData),function(e){console.error(e);});_2a4b.pickListName="LastName Prefix";var _2a4e=new _2a3e(_2a4b);_2a4e.getPickListData(_2a4a);_2a4a.then(dojo.hitch(this,this.storePickListData),function(e){console.error(e);});},storePickListData:function(data){this[data.name].data=data;},showDialog:function(){if(!this.buttonVisible){return;}this.editDialog=_2a45.byId([this.id,"-Dialog"].join(""));if(!this.editDialog){this.editDialog=new _2a40({title:this.resources.dialogTitle,id:[this.id,"-Dialog"].join("")});this.editDialog.set("content",this.dialogContent.apply({id:this.id,prefixText:this.resources.prefixText,nameFirstText:this.resources.nameFirstText,nameMiddleText:this.resources.nameMiddleText,nameLastText:this.resources.nameLastText,suffixText:this.resources.suffixText,cancelText:this.resources.cancelText,okText:this.resources.okText}));}this.setEditFields();lang.mixin(this.editDialog,new _2a41());this.editDialog.createHelpIconByTopic("editname");this.editDialog.show();if(this.modality==="modeless"){dojo.destroy([this.id,"-Dialog_underlay"].join(""));}},textBoxOnChange:function(value){if(value!==this.formatName()){this.parseName(value);this.setDotNetData();dojo.publish("Sage/events/markDirty");}},parseName:function(value){var _2a4f=value.split(" ");var i,item;var _2a50="";this.prefix="";this.first="";this.middle="";this.last="";this.suffix="";for(i=0;i<this["Name Prefix"].data.items.$resources.length;i++){item=this["Name Prefix"].data.items.$resources[i];if(item.text.toUpperCase()===_2a4f[0].toUpperCase()){this.prefix=_2a4f[0];_2a4f.shift();break;}}for(i=0;i<this["Name Suffix"].data.items.$resources.length;i++){item=this["Name Suffix"].data.items.$resources[i];if(item.text.toUpperCase()===_2a4f[_2a4f.length-1].toUpperCase()){this.suffix=_2a4f[_2a4f.length-1];_2a4f.pop();break;}}if(_2a4f.length>0){for(i=0;i<this["LastName Prefix"].data.items.$resources.length;i++){item=this["LastName Prefix"].data.items.$resources[i];if(item.text.toUpperCase()===_2a4f[_2a4f.length-1].toUpperCase()){_2a50=_2a4f[_2a4f.length-1]+" ";_2a4f.pop();break;}}}switch(_2a4f.length){case 3:this.first=_2a4f[0];this.middle=_2a4f[1];this.last=_2a50+_2a4f[2];break;case 2:this.first=_2a4f[0];this.last=_2a50+_2a4f[1];break;default:this.last=_2a50+_2a4f[0];}},getEditFields:function(){this.updateNameObj();this.setDotNetData();dojo.publish("Sage/events/markDirty");},updateNameObj:function(){if(_2a45.byId([this.id,"-Prefix"].join(""))){this.prefix=_2a45.byId([this.id,"-Prefix"].join("")).comboBox.get("value");}if(_2a45.byId([this.id,"-First"].join(""))){this.first=_2a45.byId([this.id,"-First"].join("")).get("value");}if(_2a45.byId([this.id,"-Middle"].join(""))){this.middle=_2a45.byId([this.id,"-Middle"].join("")).get("value");}if(_2a45.byId([this.id,"-Last"].join(""))){this.last=_2a45.byId([this.id,"-Last"].join("")).get("value");}if(_2a45.byId([this.id,"-Suffix"].join(""))){this.suffix=_2a45.byId([this.id,"-Suffix"].join("")).comboBox.get("value");}},getDotNetData:function(){if(this.prefixClientId!==""){this.prefix=dojo.byId(this.prefixClientId).value;}if(this.nameFirstClientId!==""){this.first=dojo.byId(this.nameFirstClientId).value;}if(this.nameMiddleClientId!==""){this.middle=dojo.byId(this.nameMiddleClientId).value;}if(this.nameLastClientid!==""){this.last=dojo.byId(this.nameLastClientid).value;}if(this.suffixClientId!==""){this.suffix=dojo.byId(this.suffixClientId).value;}},setDotNetData:function(){dojo.byId(this.prefixClientId).value=this.prefix;dojo.byId(this.nameFirstClientId).value=this.first;dojo.byId(this.nameMiddleClientId).value=this.middle;dojo.byId(this.nameLastClientid).value=this.last;dojo.byId(this.suffixClientId).value=this.suffix;},setEditFields:function(){if(_2a45.byId([this.id,"-Prefix"].join(""))){_2a45.byId([this.id,"-Prefix"].join("")).comboBox.set("value",this.prefix);}if(_2a45.byId([this.id,"-First"].join(""))){_2a45.byId([this.id,"-First"].join("")).set("value",this.first);_2a45.byId([this.id,"-First"].join("")).set("style","width:100%");}if(_2a45.byId([this.id,"-Middle"].join(""))){_2a45.byId([this.id,"-Middle"].join("")).set("value",this.middle);_2a45.byId([this.id,"-Middle"].join("")).set("style","width:100%");}if(_2a45.byId([this.id,"-Last"].join(""))){_2a45.byId([this.id,"-Last"].join("")).set("value",this.last);_2a45.byId([this.id,"-Last"].join("")).set("style","width:100%");}if(_2a45.byId([this.id,"-Suffix"].join(""))){_2a45.byId([this.id,"-Suffix"].join("")).comboBox.set("value",this.suffix);}},_okClicked:function(){this.getEditFields();if(this.focusNode.value!==this.formatName()){this.focusNode.set("value",this.formatName());dojo.publish("Sage/events/markDirty");}},_cancelClicked:function(){this.editDialog.hide();},formatName:function(){var name=((this.prefix==="")?"":this.prefix+" ");name+=((this.first==="")?"":this.first+" ");name+=((this.middle==="")?"":this.middle+" ");name+=((this.last==="")?"":this.last+" ");name+=((this.suffix==="")?"":this.suffix);name=name.trim();return name;}});return _2a46;});},"Sage/UI/Controls/PickListAsText":function(){define(["dijit/_Widget","dijit/_Templated","dojo/data/ItemFileReadStore","dojo/data/ObjectStore","dojo/store/Memory","Sage/UI/Controls/PickList","dojo/text!./templates/PickListAsText.html","dojo/_base/declare"],function(_2a51,_2a52,_2a53,_2a54,_2a55,_2a56,_2a57,_2a58){var _2a59=_2a58("Sage.UI.Controls.PickListAsText",[_2a56,_2a51,_2a52],{constructor:function(_2a5a){if(_2a5a.clientId){this.id=_2a5a.clientId+"-PickListAsText";}this.inherited(arguments);},_loadData:function(){var def=new dojo.Deferred();this.getPickListData(def);def.then(dojo.hitch(this,function(data){if(typeof data==="string"){this.textSpan.innerHTML=data;}var items=[];for(var i=0;i<data.items.$resources.length;i++){var item=data.items.$resources[i];items.push({id:item.$key,code:item.code,number:item.number,text:item.text});}this.storeData={identifier:"id",label:"text",items:items};var _2a5b=new _2a53({data:this.storeData});var _2a5c=dojo.byId(this.textId);var _2a5d=dojo.byId(this.codeId);if(_2a5c&&_2a5c.value){this.initialValue=_2a5c.value;this.textSpan.innerHTML=this.initialValue;}if(!this.initialCode&&_2a5d&&_2a5d.value){this.initialCode=_2a5d.value;}if(this.initialCode){var _2a5e=this.getStoreItemById(this.initialCode);if(_2a5e){this.initialValue=_2a5e.text;this.textSpan.innerHTML=this.initialValue;}}}),function(e){console.error(e);});},getStoreItemById:function(id){var _2a5f=null;if(this.storeData){dojo.forEach(this.storeData.items,function(item,index,array){if(item.id===id){_2a5f=item;}},this);}return _2a5f;},_setPickListNameAttr:function(value){this.inherited(arguments);this._loadData();},templateString:_2a57,widgetsInTemplate:true,storeData:null,initialValue:"",initialCode:"",textId:"",codeId:""});return _2a59;});},"Sage/UI/Controls/Select":function(){define(["dijit/form/Select","dojo/_base/declare","dojo/has","dojo/_base/sniff","dojo/_base/connect","dojo/dom-style","dojo/query","dojo/on","dojo/_base/lang"],function(_2a60,_2a61,has,_2a62,_2a63,_2a64,query,on,lang){var _2a65=_2a61("Sage.UI.Controls.Select",[_2a60],{_hClickBody:false,shouldPublishMarkDirty:true,autoPostBack:false,maxHeight:has("ie")?146:155,constructor:function(){this.own(on(document.body,"click",lang.hitch(this,this.ensureClosed)));},ensureClosed:function(){if(this.dropDown&&this.dropDown.isShowingNow){this.dropDown.onCancel();}},postCreate:function(){this.own(on(this,"change",lang.hitch(this,this.onChanged)));this.inherited(arguments);},destroy:function(){this.inherited(arguments);},_setDisplay:function(_2a66){this.inherited(arguments);this.trimDisplayValue();},onChanged:function(_2a67){if(this.shouldPublishMarkDirty){_2a63.publish("Sage/events/markDirty");}if(this.autoPostBack){__doPostBack(this.id,"");}},trimDisplayValue:function(){var nodes,i,len,node,_2a68;_2a68=this.focusNode.style.width;if(!_2a68){return;}nodes=query("span",this.containerNode);len=nodes&&nodes.length;for(i=0;i<len;i++){node=nodes[i];_2a64.set(node,{"width":_2a68,"text-overflow":"ellipsis","overflow":"hidden"});}}});return _2a65;});},"Sage/UI/Controls/SimpleTextarea":function(){define(["dijit/form/SimpleTextarea","dojo/_base/declare"],function(_2a69,_2a6a){var _2a6b=_2a6a("Sage.UI.Controls.SimpleTextarea",[_2a69],{baseClass:"dijitTextBox dijitTextArea sageTextArea",templateString:"<div><textarea ${!nameAttrSetting} dojoAttachPoint='focusNode,containerNode,textbox' autocomplete='off'></textarea></div>",hotKey:"",multiLineMaxLength:"",shouldPublishMarkDirty:true,_setHotKeyAttr:{node:"textbox",type:"attribute",attribute:"accessKey"},constructor:function(args){this.maxLength=args.multiLineMaxLength;},onChange:function(e){if(this.shouldPublishMarkDirty){dojo.publish("Sage/events/markDirty");}this.inherited(arguments);}});return _2a6b;});},"Sage/UI/Dashboard/main":function(){define(["Sage/UI/Dashboard/BaseWidget","Sage/UI/Dashboard/ChartingWidget","Sage/UI/Dashboard/Dashboard","Sage/UI/Dashboard/DashboardPage","Sage/UI/Dashboard/DashboardTabController","Sage/UI/Dashboard/DashboardWidget","Sage/UI/Dashboard/DashboardWidgetCell","Sage/UI/Dashboard/WidgetDefinition","Sage/UI/Dashboard/ChartingTheme"],function(){});},"Sage/UI/Dashboard/BaseWidget":function(){define(["Sage/UI/Dashboard/BaseWidget","Sage/Utility","dojo/i18n","Sage/UI/EditorContainer","dojo/_base/declare","dojo/i18n!./nls/WidgetDefinition"],function(_2a6c,util,i18n,_2a6d,_2a6e){var _2a6f=_2a6e("Sage.UI.Dashboard.BaseWidget",null,{constructor:function(def){dojo.safeMixin(this,def);},postMixInProperties:function(){dojo.mixin(this,i18n.getLocalization("Sage.UI.Dashboard","WidgetDefinition"));this.inherited(arguments);},family:"System",prefHeight:0.33,timestamp:true,_getEditorString:function(_2a70,_2a71){var _2a72=i18n.getLocalization("Sage.UI.Dashboard","WidgetDefinition");var _2a73=_2a72[this.name];if(_2a73){_2a73+=" "+_2a72["settingsText"];}else{_2a73=_2a72["defaultWidgetText"];}_2a70._pcid=_2a71;var cont=new _2a6d(_2a70);if(!cont){}if(this._editorTpl){return this._editorTpl.apply({title:_2a73,id:_2a71+"_editor",content:cont.doTemplate()});}return "";}});return _2a6f;});},"Sage/UI/EditorContainer":function(){define(["dojo/i18n","dijit/form/Button","dojo/_base/declare"],function(i18n,_2a74,_2a75){var _2a76=_2a75("Sage.UI.EditorContainer",null,{constructor:function(_2a77){dojo.safeMixin(this,_2a77);dojo.mixin(this,i18n.getLocalization("dijit","common"));},textCell:new Simplate("<td class=\"editor-text\">{%= $[0] %}</td>"),textCellWithLoading:new Simplate("<td class=\"editor-text\">{%= $.label %}<span style=\"display:none; float:right;\" id=\"{%= $.id %}_loading\">{%= $.loadingLabel %}</span></td>"),ctrlCell:new Simplate("<td class=\"editor-ctrl\">{%= $[0] %}</td>"),rowTpl:new Simplate("<tr>{%= $.cells %}</tr>"),btnRow:new Simplate("<tr><td></td><td id=\"{%= $.id %}_editor_tools\"><table width=\"100%\"><tr><td id=\"{%= $.id %}_custom_tools\" align=\"left\"></td><td align=\"right\">{%= $.btn %}</td></tr></table></td></tr>"),tableTpl:new Simplate(["<table class=\"editor-table\">","<tbody>{%= $.rows %}</tbody></table>"]),btnOk:new Simplate(["<button style=\"align:right;\" data-dojo-type=\"dijit.form.Button\" type=\"button\""," id=\"{%= $.id %}_btnOK\" title=\"{%= $.buttonOk %}\">{%= $.buttonOk %}</button>"]),btnCancel:new Simplate(["<button style=\"align:right;\" data-dojo-type=\"dijit.form.Button\" type=\"button\""," id=\"{%= $.id %}_btnCancel\" title=\"{%= $.buttonCancel %}\">{%= $.buttonCancel %}</button>"]),doTemplate:function(){var _2a78=[];for(var p in this.rows){if(this.rows.hasOwnProperty(p)){var _2a79=[];if(this.rows[p].loading){_2a79.push(this.textCellWithLoading.apply({label:this.rows[p].title,id:this._pcid,loadingLabel:this.rows[p].loading}),this.ctrlCell.apply([this.rows[p].control]));}else{_2a79.push(this.textCell.apply([this.rows[p].title]),this.ctrlCell.apply([this.rows[p].control]));}_2a78.push(this.rowTpl.apply({cells:_2a79.join("")}));}}var btns=[this.btnOk.apply({id:this._pcid,buttonOk:this.buttonOk}),this.btnCancel.apply({id:this._pcid,buttonCancel:this.buttonCancel})];_2a78.push(this.btnRow.apply({btn:btns.join(""),id:this._pcid}));return this.tableTpl.apply({rows:_2a78.join("")});}});return _2a76;});},"Sage/UI/Dashboard/ChartingWidget":function(){define(["Sage/UI/Dashboard/BaseWidget","Sage/Utility","dojo/i18n","dojo/_base/declare","dojo/i18n!./nls/WidgetDefinition","dojo/number"],function(_2a7a,util,i18n,_2a7b){var _2a7c=_2a7b("Sage.UI.Dashboard.ChartingWidget",[_2a7a],{_chartTpl:new Simplate(["<table border=\"0\" style=\"width:100%; height:100%\">","<tr>","<td id=\"{%= $.id %}_chart\" style=\"width:{%= $.chartWidth %}\"></td>","<td style=\"display:{%= $.legendDisplay %};font-size:10px;\"><div class=\"dojoxGridScrollbox\" style=\"height:{%= $.chartHeight %};overflow-y:auto;\"><span id=\"{%= $.id %}_legend\"></span></div></td>","</tr>","</table>"]),_noDataTable:new Simplate(["<table border=\"0\" style=\"width:100%; height:100%\">","<tr>","<td>{%= $.NoDataMessage %}</td>","</tr>","</table>"]),_baseEditor:function(_2a7d,_2a7e){var mkup=this._getEditorString(_2a7e,_2a7d.id);var frag=util.fragger(mkup);var _2a7f=util.fragToDijits(frag);_2a7d.addChild(_2a7f[0],0);if(_2a7d.isNew){_2a7d._editorAdded();}},_getPaneSize:function(){return {w:dojo.style(this.pane,"width"),h:dojo.style(this.pane,"height")};},html:function(_2a80,data){this.paneId=_2a80.id+"_pane";this.parentCellId=_2a80.id;this.pane=dojo.byId(this.paneId);this.chartId=_2a80.id+"_chart";this.legendId=_2a80.id+"_legend";this.options=_2a80.widgetOptions;this.showLegend=this.options.showLegend==="true";this.showLabels=this.options.showLabels==="true";var size=this._getPaneSize();var i,_2a81;this.paneWidth=size.w;var h=Math.floor(size.w*this.prefHeight)+"px";dojo.style(this.pane,"height",h);if(data){this.values=[];this._labels=[];if(this.name==="Pie Chart"){this.cumulativeValues=0;for(i=0;i<data.total_count;i++){data.items[i].value=Math.max(0,data.items[i].value);this.cumulativeValues+=Math.floor(data.items[i].value);}}for(i=0;i<data.total_count;i++){var curr=data.items[i];var fVal=Math.floor(curr.value);var tmp={};var _2a82;if(this.showLabels){tmp.text=this.options.truncLabels==="true"?this.truncate(curr.displayName,this.options.truncNum||7):curr.displayName;}if(this.name==="Pie Chart"){if(fVal<=0){continue;}tmp.y=fVal;var _2a83=0;if(this.cumulativeValues>0){_2a83=fVal/this.cumulativeValues*100;}tmp.tooltip=curr.displayName+", "+dojo.number.format(_2a83,{places:2})+"%";_2a82=fVal;if(_2a82>=1000000){_2a82=dojo.number.format((_2a82/1000000),{places:1})+"M";}else{_2a82=dojo.number.format(fVal);}tmp.legend="<label>"+curr.displayName+"</label><label style=\"float:right; margin-left:10px; margin-top:4px;\">"+_2a82+"</label>";}else{_2a82=fVal;if(_2a82>=1000000){_2a82=dojo.number.format((_2a82/1000000),{places:1})+"M";}else{_2a82=dojo.number.format(fVal);}tmp.value=i+1;tmp.y=fVal;tmp.tooltip=curr.displayName+", "+_2a82;}this._labels.push(tmp);this.values.push(fVal);}if(data.total_count>0){_2a80.set("content",this._chartTpl.apply({id:_2a80.id,chartWidth:_2a80.chartWidth,legendDisplay:_2a80.legendDisplay,chartHeight:h}));this._simplyLocalizeAxisSubTitle(_2a80);this._doChart(_2a80,data);}else{_2a81=Sage.UI.DataStore.Dashboard.WidgetResources;dojo.style(this.pane,"height","20px");_2a80.set("content",this._noDataTable.apply({NoDataMessage:_2a81.noDataToDisplay}));this.editor(_2a80);}}else{_2a81=Sage.UI.DataStore.Dashboard.WidgetResources;dojo.style(this.pane,"height","20px");_2a80.set("content",this._noDataTable.apply({NoDataMessage:_2a81.noDataToDisplay}));this.editor(_2a80);}this._addFooter();},_simplyLocalizeAxisSubTitle:function(_2a84){var _2a85,yAx,xAx,subT;_2a85=Sage.UI.DataStore.Dashboard.WidgetResources;if(this.options.yAxisName){yAx=this.options.yAxisName;yAx=yAx.replace(/ /g,"_");if(_2a85[yAx]){_2a84._dashboardWidget.options.yAxisName=_2a85[yAx];}}if(this.options.xAxisName){xAx=this.options.xAxisName;xAx=xAx.replace(/ /g,"_");if(_2a85[xAx]){_2a84._dashboardWidget.options.xAxisName=_2a85[xAx];}}if(this.options.subtitle){subT=this.options.subtitle;subT=subT.replace(/ /g,"_");if(_2a85[subT]){_2a84._dashboardWidget.options.subtitle=_2a85[subT];}}},_addFooter:function(){var _2a86=i18n.getLocalization("Sage.UI.Dashboard","WidgetDefinition");var _2a87=["#",this.parentCellId," .dijitTitlePaneContentOuter"].join("");if(this.options.groupname&&this.options.resource){var _2a88=String.format("<div class=\"dijitTitlePaneTitle\" id=\"{0}\" style=\"border:0;font-weight:normal;\">",this.parentCellId+"_footer");if(this.options.entity!=="Sage.Entity.Interfaces.IHistory"&&this.options.groupname&&this.options.resource){_2a88+=String.format("<span style=\"float:left; margin-top:3px;\"><a href=\"{0}.aspx?modeid=list&gname={1}\">{2}</a></span>",this.options.resource,this.options.groupname,_2a86.viewGroupText||"View Group");}_2a88+="<span style=\"float:right; margin-top:3px;\">"+dojo.date.locale.format(new Date(),{fullYear:true})+"</span>";_2a88+="</div>";var _2a89=dojo.byId(this.parentCellId+"_footer");if(!_2a89){dojo.place(_2a88,dojo.query(_2a87)[0],"last");}else{dojo.place(_2a88,_2a89,"replace");}}},truncate:function(str,n){return str.length>n?str.slice(0,n)+"...":str;}});return _2a7c;});},"Sage/UI/Dashboard/Dashboard":function(){define(["../TabContainer","dojo/i18n","Sage/UI/Dashboard/DashboardTabController","Sage/UI/Dashboard/DashboardPage","Sage/Utility","dijit/Menu","dijit/MenuItem","dojo/_base/declare","dojo/i18n!./nls/DashboardTabController","dojo/i18n!./nls/Dashboard"],function(_2a8a,i18n,_2a8b,_2a8c,_2a8d,Menu,_2a8e,_2a8f){var _2a90=_2a8f("Sage.UI.Dashboard.Dashboard",[_2a8a],{controllerWidget:_2a8b,_stTableOuter:new Simplate(["<div id=\"stTable\" class=\"show-tab-table\"><table>","{%= $.content %}","</table><div class=\"button-bar alignright\"><button data-dojo-type=\"dijit.form.Button\" type=\"button\""," id=\"btnSTOk\" title=\"{%= $.buttonOk %}\">{%= $.buttonOk %}</button>","</div></div>"]),_stTableInner:new Simplate(["<tr id=\"row_{%= $.id %}\"><td><button data-dojo-type=\"dijit.form.Button\"","type=\"button\" id=\"btn_{%= $.id %}\" class=\"btn-show-tab\">{%= $.showText %}</button></td>","<td><span>{%= $.title %}</span></td></tr>"]),_copyNameForm:new Simplate(["<div id=\"copyNameForm\"><table width=\"100%\">","<tr><td>{%= $.titleText %}</td><td><div data-dojo-type=\"dijit.form.ValidationTextBox\" id=\"txtCopyName\""," regExp=\"[^<>;]*\" value=\"\" required=\"true\" invalidMessage=\"{%= $.invalidMessage %}\"></div></td></tr>","<tr><td colspan=\"2\" align=\"right\"><div class=\"button-bar\"><button data-dojo-type=\"dijit.form.Button\" type=\"button\""," id=\"btnCNOK\" title=\"{%= $.buttonOk %}\">{%= $.buttonOk %}</button>","<button data-dojo-type=\"dijit.form.Button\" type=\"button\""," id=\"btnCNCancel\" title=\"{%= $.buttonCancel %}\" >{%= $.buttonCancel %}</button>","</div></td></tr></table></div>"]),resources:{},addRemovePageContextMenu:function(){var _2a91=true;for(var i=0;i<this._childPages.length;i++){if(!this._childPages[i]._beingDestroyed){var _2a92=dijit.byId("Dashboard_tablist_"+this._childPages[i].id);_2a91=false;if(_2a92&&_2a92.style.display==="none"){_2a91=true;}else{break;}}}if(_2a91){if(this._contextMenu){this._contextMenu.destroyRecursive();}this._contextMenu=new Menu({id:this.id+"_ContextMenu",dir:this.dir,targetNodeIds:[this.domNode]});this._contextMenu.addChild(new _2a8e({label:this.newTabText,dir:this.dir,onClick:function(){var db=dijit.byId("Dashboard");db._createPage(true,db.newTabText);}}));this._contextMenu.addChild(new _2a8e({label:this.showTabText,dir:this.dir,onClick:dojo.hitch(this,function(){var d=dijit.byId("Dashboard");d._showTabMenu();})}));this.selectShownTab=true;}else{if(this._contextMenu){this._contextMenu.destroyRecursive();this.selectShownTab=false;}}},postCreate:function(){if(!Sage.UI.WidgetDefinitions){Sage.UI.WidgetDefinitions={};}this._getUserOptions();this.subscribe("/ui/dashboard/pageDelete",function(pg){this.closeChild(pg);this._deletePage(pg);this.addRemovePageContextMenu();});this.inherited(arguments);},postMixInProperties:function(){dojo.mixin(this,i18n.getLocalization("Sage.UI.Dashboard","Dashboard"));dojo.mixin(this,i18n.getLocalization("Sage.UI.Dashboard","DashboardTabController"));dojo.mixin(this.resources,i18n.getLocalization("Sage.UI.Dashboard","WidgetDefinition"));dojo.mixin(this,i18n.getLocalization("dijit","common"));this.inherited(arguments);},_childPages:[],_createPage:function(ans,name){if(!ans){return;}var obj={closable:true,onClose:function(){return true;},name:name,title:name,family:"System",acceptTypes:["Portlet"],hasResizableColumns:false,_columns:[],_page:this._childPages.length,_parentId:this.id,permission:true,_childWidgets:[]};var _2a93=new _2a8c(obj);this._childPages.push(_2a93);this.addChild(this._childPages[this._childPages.length-1]);this.selectChild(this._childPages[this._childPages.length-1]);_2a93.isNew=true;_2a93._editOptionsMenu();},_showPage:function(_2a94){var _2a95=Sage.UI.DataStore.Dashboard.userOptions.hidden,pg=_2a95[_2a94],found=false,len;for(var i=0;i<this._childPages.length;i++){if(this._childPages[i].title==pg){var _2a96=dijit.byId("Dashboard_tablist_"+this._childPages[i].id);if(_2a96){dojo.style(_2a96,"display","block");found=true;if(this.selectShownTab){this.selectChild(this._childPages[i]);this._showChild(this._childPages[i]);}break;}}}if(!found){var _2a97=function(){return true;};for(i=0,len=this.info.userPages.length;i<len;i++){var ttl=Sage.Utility.htmlDecode(this.pages[i]["@title"]);var _2a98=ttl;while(_2a98.indexOf(" ")!==-1){_2a98=_2a98.replace(" ","_");}_2a98=_2a98.replace(/'/g,"_").replace(/"/g,"_");if(ttl==pg){var _2a99;if(this.pages[i]["@colWidths"]){_2a99=this.pages[i]["@colWidths"].split(",").length;}var _2a9a=this.info.permissions[_2a98];this.pages[i].Columns.Column=_2a8d.Convert.toArrayFromObject(this.pages[i].Columns.Column);this._childPages.push(new _2a8c({id:_2a98,closable:true,onClose:_2a97,name:ttl,title:this.resources[_2a98]||ttl,family:this.pages[i]["@family"]||"System",nbZones:_2a99||1,acceptTypes:["Portlet"],hasResizableColumns:false,firstButNotDefault:false,colWidths:this.pages[i]["@colWidths"],_columns:this.pages[i].Columns.Column,_page:i,_parentId:this.id,permission:_2a9a,_childWidgets:[]}));if(this.pages[i]["@colWidths"]){this._childPages[this._childPages.length-1]._colWidths=this.pages[i]["@colWidths"];}this.addChild(this._childPages[this._childPages.length-1]);if(this.selectShownTab){this.selectChild(this._childPages[this._childPages.length-1]);}break;}}}if(_2a94 in _2a95){delete _2a95[_2a94];this._updateUserOptions();}},_copyPageContent:function(pg,_2a9b){var page=pg.Dashboard;var len=this._childPages.length;var ttl=_2a9b?_2a9b:page["@title"];var _2a9c=page["@id"];while(_2a9c.indexOf(" ")!==-1){_2a9c=_2a9c.replace(" ","_");}var _2a9d;if(page["@colWidths"]){_2a9d=page["@colWidths"].split(",").length;}var _2a9e=false;if(_2a9b){_2a9e=true;}else{if(page["@permission"]){_2a9e=page["@permission"];}}this._childPages.push(new _2a8c({closable:true,onClose:function(){return true;},name:ttl,title:ttl,family:page["@family"]||"System",nbZones:_2a9d||1,acceptTypes:["Portlet"],hasResizableColumns:false,colWidths:page["@colWidths"],_columns:page.Columns.Column,_page:len,_parentId:this.id,permission:_2a9e,_childWidgets:[]}));if(page["@colWidths"]){this._childPages[len]._colWidths=page["@colWidths"];}this.addChild(this._childPages[len]);this._childPages[len]._init(true);this._childPages[len].copyNotDrawn=true;var uo=Sage.UI.DataStore.Dashboard.userOptions;if(uo.hidden&&_2a9c in uo.hidden){delete uo.hidden[_2a9c];this._updateUserOptions();}this._childPages[len]._setWidgetsToPage();this._childPages[len]._save();this._childPages[len].pageRendered=true;},_copyPage:function(pg){var d=new dijit.Dialog({title:this.copyTabText,style:"width:250px"});d.set("content",this._copyNameForm.apply({titleText:this.titleText,buttonOk:this.okButton,buttonCancel:this.buttonCancel,invalidMessage:this.invalidMessage}));var _2a9f=function(){dojo.disconnect(_2aa0);dojo.disconnect(ok);dojo.disconnect(_2aa1);d.destroyRecursive();};var ok=dojo.connect(dijit.byId("btnCNOK"),"onClick",this,function(){var _2aa2=dijit.byId("txtCopyName");if(!_2aa2.isValid()||!this._isTitleUnique(_2aa2.value)){return false;}if(!pg.pageRendered){pg.copyNotDrawn=true;pg._init();}var ttl=_2aa2.value;var clone=pg.copy();this._copyPageContent(clone,ttl);d.hide();});var _2aa1=dojo.connect(dijit.byId("btnCNCancel"),"onClick",this,function(){d.hide();});var _2aa0=dojo.connect(d,"hide",this,_2a9f);d.show();},_createPages:function(){this.pages={};var def=this.info.userOptions.defaultTab;var uo=Sage.UI.DataStore.Dashboard.userOptions;var _2aa3;var _2aa4=0;var _2aa5=function(){return true;};for(var i=0,len=this.info.userPages.length;i<len;i++){var page=dojo.fromJson(this.info.userPages[i]);this.pages[i]=page.Dashboard;var ttl=Sage.Utility.htmlDecode(this.pages[i]["@title"]);var _2aa6=ttl;while(_2aa6.indexOf(" ")!==-1){_2aa6=_2aa6.replace(" ","_");}_2aa6=_2aa6.replace(/'/g,"_").replace(/"/g,"_");if(!uo.hidden||!uo.hidden[_2aa6]){var _2aa7;if(this.pages[i]["@colWidths"]){_2aa7=this.pages[i]["@colWidths"].split(",").length;}else{this.pages[i]["@colWidths"]=0;_2aa7=1;}var _2aa8=this.info.permissions[_2aa6];this.pages[i].Columns.Column=_2a8d.Convert.toArrayFromObject(this.pages[i].Columns.Column);this._childPages.push(new _2a8c({id:_2aa6,closable:true,onClose:_2aa5,name:ttl,title:this.resources[_2aa6]||ttl,family:this.pages[i]["@family"]||"System",nbZones:_2aa7||1,acceptTypes:["Portlet"],hasResizableColumns:false,firstButNotDefault:i===0&&ttl!==def,colWidths:this.pages[i]["@colWidths"],_columns:this.pages[i].Columns.Column,_page:i,_parentId:this.id,permission:_2aa8,_childWidgets:[]}));if(this.pages[i]["@colWidths"]){this._childPages[_2aa4]._colWidths=this.pages[i]["@colWidths"];}this.addChild(this._childPages[_2aa4]);if(ttl===def){_2aa3=_2aa4;}_2aa4++;}}if(_2aa3){this._childPages[_2aa3].selected=true;this._childPages[_2aa3]._init();}else{if(this._childPages.length>0){this._childPages[0].selected=true;this._childPages[0]._init();}}this.addRemovePageContextMenu();},_deletePage:function(pg,_2aa9){var uo=Sage.UI.DataStore.Dashboard.userOptions;if(pg.title===uo.defaultTab){uo.defaultTab="";if(!_2aa9){this._updateUserOptions();}}var vURL="SLXGroupBuilder.aspx?method=GetGroupIdFromNameFamilyAndType&name="+pg.name+"&family=System&type=36";dojo.xhrGet({url:vURL,error:dojo.hitch(this,function(_2aaa){}),load:dojo.hitch(this,function(_2aab){Sage.Groups.GroupManager.GetFromServer(Sage.Groups.GroupManager.GMUrl+"DeleteGroup&gid="+_2aab,"text",function(){},function(req){});})});},_hidePage:function(pg){var uo=Sage.UI.DataStore.Dashboard.userOptions;this.closeChild(pg);if(this.selectedChildWidget==pg){this.selectFirstVisible();}if(!uo.hidden){uo.hidden={};}uo.hidden[pg.id]=pg._hide();this._updateUserOptions();this.addRemovePageContextMenu();},_showTabMenu:function(){var _2aac=Sage.UI.DataStore.Dashboard.userOptions.hidden;var inner=[];var id;if(_2aac&&Sage.Utility.size(_2aac)){for(id in _2aac){inner.push(this._stTableInner.apply({title:_2aac[id],id:id,buttonCancel:this.buttonCancel,showText:this.showText}));}}var d=new dijit.Dialog({title:this.showTabText,style:"width:350px"});d.set("content",this._stTableOuter.apply({content:inner.join(""),buttonOk:this.buttonOk}));d.show();var _2aad=[];if(_2aac){for(id in _2aac){var _2aae=dijit.byId("btn_"+id);_2aad.push(dojo.connect(_2aae,"onClick",_2aae,function(){var db=dijit.byId("Dashboard"),_2aaf=this.id.replace("btn_",""),_2ab0=dojo.byId("row_"+_2aaf);db._showPage(_2aaf);db.addRemovePageContextMenu();dojo.style(_2ab0,"display","none");}));}}var ok=dojo.connect(dijit.byId("btnSTOk"),"onClick",null,function(){d.hide();});var _2ab1=dojo.connect(d,"hide",null,function(){dojo.disconnect(ok);dojo.disconnect(_2ab1);dojo.forEach(_2aad,dojo.disconnect);d.destroyRecursive();});},_isTitleUnique:function(title,tabId){var _2ab2=true;var _2ab3=this._childPages;var _2ab4="";if(tabId){_2ab4=tabId;}for(var i=0;i<_2ab3.length;i++){if(_2ab3[i].id!==_2ab4&&!_2ab3[i]._destroyed&&_2ab3[i].title===title){_2ab2=false;var opts={title:this.warningText,query:this.invalidDuplicateMessage,yesText:this.okButton,style:{width:"300px"}};Sage.UI.Dialogs.raiseQueryDialogExt(opts);break;}}return _2ab2;},selectFirstVisible:function(){var found=false;for(var i=0;i<this._childPages.length;i++){var _2ab5=dijit.byId("Dashboard_tablist_"+this._childPages[i].id);if(_2ab5&&_2ab5.style.display!=="none"){found=true;this.selectChild(this._childPages[i]);break;}}if(!found){try{this.selectChild();}catch(err){}}},selectChild:function(child){this.inherited(arguments);if(child._init){child._init();}if(child.copyNotDrawn){child.copyNotDrawn=false;child._redrawWidgets();}},_getUserOptions:function(){if(Sage.UI.DataStore.Dashboard){this.info=Sage.UI.DataStore.Dashboard;this._createPages();}else{this.subscribe("/ui/dashboard/info",function(info){this.info=info;this._createPages();});}},_updateUserOptions:function(){var uo=Sage.UI.DataStore.Dashboard.userOptions;var uri="slxdata.ashx/slx/crm/-/dashboard/useroption?name=Options&category=Dashboard";var def=dojo.xhrPut({url:uri,handleAs:"text",postData:dojo.toJson(uo),load:function(data){},error:function(error){}});}});return _2a90;});},"Sage/UI/TabContainer":function(){define(["dijit/layout/TabContainer","dojo/_base/declare","dojo/_base/array","./TabController"],function(_2ab6,_2ab7,array,_2ab8){return _2ab7("Sage.UI.TabContainer",[_2ab6],{_menuItems:{},useMenu:false,useSlider:true,controllerWidget:_2ab8,addTabMenuItem:function(tabId,_2ab9){var entry;if(!this._menuItems[tabId]){this._menuItems[tabId]=[];}entry=this._menuItems[tabId];entry.push(_2ab9);},getTabMenuItems:function(tabId){return this._menuItems[tabId];},destroyDescendants:function(){this.inherited(arguments);var tabId,items;for(tabId in this._menuItems){if(this._menuItems.hasOwnProperty(tabId)){items=this._menuItems[tabId];array.forEach(items,function(item){item.destroy();});items=null;}}this._menuItems={};}});});},"Sage/UI/TabController":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/query","dijit/layout/ScrollingTabController","dijit/registry","dijit/Menu","dojo/dom-class","dojo/text!./templates/ScrollingTabController.html","dojo/aspect","dijit/popup"],function(lang,array,_2aba,query,_2abb,_2abc,Menu,_2abd,_2abe,_2abf,popup){var _2ac0=_2aba("Sage.UI.TabController",[_2abb],{templateString:_2abe,closeButton:false,tabMenu:null,postCreate:function(){this.inherited(arguments);var _2ac1,_2ac2;_2ac1=this.id+"_Menu";_2ac2=_2abc.byId(_2ac1);if(_2ac2){_2ac2.destroy();}this.tabMenu=new Menu({id:this.id+"_Menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,targetNodeIds:[this.domNode],selector:function(node){return _2abd.contains(node,"dijitClosable")&&!_2abd.contains(node,"dijitTabDisabled");}});this.own(this.tabMenu,_2abf.before(popup,"open",lang.hitch(this,this.onTabMenuOpen)),this.tabMenu.on("close",lang.hitch(this,this.onTabMenuClose)));this.own(this.on("mouseDown",lang.hitch(this,this.onTabMouseDown)));},onTabMouseDown:function(evt){var node,_2ac3;node=query("[role=\"tab\"]",evt.target)[0]||evt.target;_2ac3=_2abc.byId(node.id);this.menuOpenedOn=_2ac3;},onTabMenuOpen:function(){var _2ac4,page,_2ac5;_2ac4=this.getParent();page=(this.menuOpenedOn&&this.menuOpenedOn.page)||(_2ac4&&_2ac4.selectedChildWidget);if(_2ac4&&page){_2ac5=_2ac4.getTabMenuItems(page.id);array.forEach(_2ac5,function(_2ac6){this.tabMenu.addChild(_2ac6);},this);}},onTabMenuClose:function(){var _2ac7;_2ac7=this.tabMenu.getChildren();array.forEach(_2ac7,function(_2ac8){this.tabMenu.removeChild(_2ac8);},this);}});return _2ac0;});},"Sage/UI/Dashboard/DashboardTabController":function(){define(["dijit/layout/ScrollingTabController","dojo/i18n","dijit/Menu","dijit/MenuItem","dijit/MenuSeparator","dojo/i18n!./nls/DashboardTabController","dojo/i18n!../nls/Boolean","dojo/_base/declare"],function(_2ac9,i18n,menu,_2aca,_2acb,_2acc,_2acd,_2ace){var _2acf=_2ace("dijit.layout._TabButton",dijit.layout._ScrollingTabControllerButton,{baseClass:"dijitTab",postMixInProperties:function(){dojo.mixin(this,i18n.getLocalization("Sage.UI.Dashboard","DashboardTabController"));dojo.mixin(this,i18n.getLocalization("Sage.UI","Boolean"));},postCreate:function(){this.inherited(arguments);dojo.setSelectable(this.containerNode,false);},_setCloseButtonAttr:function(disp){var _2ad0=i18n.getLocalization("dijit","common");if(disp){if(this.closeNode){dojo.attr(this.closeNode,"title",_2ad0.itemClose);}this._closeMenu=new menu({dir:this.dir,targetNodeIds:[this.domNode]});this._closeMenu.addChild(new _2aca({label:this.newTabText,dir:this.dir,id:this._closeMenu.id+"_New",onClick:function(){var db=dijit.byId("Dashboard");db._createPage(true,db.newTabText);}}));this._closeMenu.addChild(new _2aca({label:this.addContentText,dir:this.dir,id:this._closeMenu.id+"_AddContent",onClick:dojo.hitch(this,function(){var id=this.id.replace("Dashboard_tablist_","");var d=dijit.byId(id);d._newWidgetMenu();})}));this._closeMenu.addChild(new _2aca({label:this.editOptionsText,dir:this.dir,id:this._closeMenu.id+"_Edit",onClick:dojo.hitch(this,function(){var id=this.id.replace("Dashboard_tablist_","");var d=dijit.byId(id);d._editOptionsMenu();})}));this._closeMenu.addChild(new _2aca({label:this.shareTabText,dir:this.dir,id:this._closeMenu.id+"_Share",onClick:dojo.hitch(this,function(){var id=this.id.replace("Dashboard_tablist_","");var d=dijit.byId(id);d._releaseManager.page=d;d._releaseManager.share();})}));this._closeMenu.addChild(new _2aca({label:this.hideTabText,dir:this.dir,id:this._closeMenu.id+"_Hide",onClick:dojo.hitch(this,function(){var id=this.id.replace("Dashboard_tablist_","");var d=dijit.byId(id);var db=dijit.byId("Dashboard");db._hidePage(d);})}));this._closeMenu.addChild(new _2aca({label:this.copyTabText,dir:this.dir,id:this._closeMenu.id+"_Copy",onClick:dojo.hitch(this,function(){var id=this.id.replace("Dashboard_tablist_","");var d=dijit.byId(id);var db=dijit.byId("Dashboard");db._copyPage(d);})}));this._closeMenu.addChild(new _2aca({label:this.showTabText,dir:this.dir,id:this._closeMenu.id+"_Show",onClick:dojo.hitch(this,function(){var d=dijit.byId("Dashboard");d._showTabMenu();})}));var id=this.id.replace("Dashboard_tablist_","");var d=dijit.byId(id);if(d.permission){this._closeMenu.addChild(new _2aca({label:this.deleteTabText,dir:this.dir,id:this._closeMenu.id+"_Delete",onClick:dojo.hitch(this,function(){var id=this.id.replace("Dashboard_tablist_","");var d=dijit.byId(id);var fn=function(ans){if(ans){if(d.permission){dojo.publish("/ui/dashboard/pageDelete",[d]);}else{var opts={title:d.resources.errorText,query:d.resources.permissionErrorText,yesText:d.resources.okButton,style:{width:"350px"},align:"right"};Sage.UI.Dialogs.raiseQueryDialogExt(opts);}}};var opts={title:this.deleteTabText,query:this.deleteTabConfirmText,callbackFn:fn,yesText:this.yesText,noText:this.noText,style:{width:"350px"},align:"right"};Sage.UI.Dialogs.raiseQueryDialogExt(opts);})}));}this._closeMenu.addChild(new _2acb());this._closeMenu.addChild(new _2aca({label:this.helpText,dir:this.dir,id:this._closeMenu.id+"_Help",onClick:dojo.hitch(this,function(){Sage.Utility.openHelp("Working_with_the_Dashboard","MCWebHelp");})}));}else{if(this._closeMenu){this._closeMenu.destroyRecursive();delete this._closeMenu;}}},_setLabelAttr:function(_2ad1){this.inherited(arguments);if(this.showLabel===false&&!this.params.title){this.iconNode.alt=dojo.trim(this.containerNode.innerText||this.containerNode.textContent||"");}},destroy:function(){if(this._closeMenu){this._closeMenu.destroyRecursive();delete this._closeMenu;}this.inherited(arguments);}});var _2ad2=_2ace("Sage.UI.Dashboard.DashboardTabController",_2ac9,{tabPosition:"top",buttonWidget:"dijit.layout._TabButton",addChild:function(){this.inherited(arguments);if(!this.perfomedHeightResizing){this.perfomedHeightResizing=true;dojo.style(this.containerNode,"height","37px");dojo.style(this.containerNode,"top","4px");}},_rectifyRtlTabList:function(){if(0>=this.tabPosition.indexOf("-h")){return;}if(!this.pane2button){return;}var _2ad3=0;for(var pane in this.pane2button){var ow=this.pane2button[pane].innerDiv.scrollWidth;_2ad3=Math.max(_2ad3,ow);}for(pane in this.pane2button){this.pane2button[pane].innerDiv.style.width=_2ad3+"px";}}});return _2ad2;});},"Sage/UI/Dashboard/DashboardPage":function(){define(["dojo/i18n","Sage/UI/GridContainer","Sage/UI/Dialogs","Sage/UI/Dashboard/DashboardWidgetCell","Sage/Utility","dijit/form/ValidationTextBox","Sage/UI/Controls/_DialogHelpIconMixin","dojo/dom-construct","Sage/Array","dojo/i18n!./nls/DashboardTabController","dojo/i18n!./nls/WidgetDefinition","dojo/_base/declare","dojo/_base/lang"],function(i18n,_2ad4,_2ad5,_2ad6,_2ad7,_2ad8,_2ad9,_2ada,_2adb,_2adc,_2add,_2ade,lang){var _2adf=_2ade("Sage.UI.Persistance.DashboardColumn",null,{constructor:function(_2ae0){dojo.safeMixin(this,_2ae0);}});var _2ae1=_2ade("Sage.UI.Dashboard.DashboardPage",_2ad4,{_nwTableOuter:new Simplate(["<div id=\"nwTable\" class=\"new-widget-table\"><div style=\"height:400px; overflow-y:auto;\"><table width=\"100%\">{%= $.content %}</table></div>","<div align=\"right\"><button data-dojo-type=\"dijit.form.Button\""," type=\"button\" id=\"btnAddContentClose\" class=\"ok-button\" title=\"{%= $.buttonCancel %}\" align=\"right\" style=\"margin-top:10px;\">{%= $.buttonCancel %}</button>","</div></div>"]),_nwTableInner:new Simplate(["<tr><td><b>{%= $.key %}</b><br />{%= $.value %}</td></tr>","<tr><td><button data-dojo-type=\"dijit.form.Button\"","type=\"button\" id=\"{%= $.btnId %}\" class=\"btn-add-new\">{%= $.addText %}</button></td></tr>","<tr><td><hr /></td></tr>"]),style:"z-index:500;",_eoTable:new Simplate(["<div id=\"eoTable\" class=\"edit-options-table\"><table width=\"100%\">","<tr><td>{%= $.titleText %}</td><td><div data-dojo-type=\"dijit.form.ValidationTextBox\" id=\"txtEO\""," regExp=\"[^-<>:;@#\\$!%\\^&\\*\\(\\)\\+=\\`\\[{},/?\\.~]*\" value=\"{%= $.title %}\" invalidMessage=\"{%= $.invalidMessage %}\"></div></td></tr>","<tr><td colspan=2>{%= $.chooseTemplateText %}</td></tr>","<tr><td><input type=\"radio\" id=\"rdoEO0\" data-dojo-type=\"dijit.form.RadioButton\""," value=\"one_column\" name=\"radioEO\" /></td><td><label for=\"rdoEO0\">{%= $.oneColumnText %}","</label></td></tr>","<tr><td><input type=\"radio\" id=\"rdoEO1\" data-dojo-type=\"dijit.form.RadioButton\""," value=\"two_even\" name=\"radioEO\" /></td><td><label for=\"rdoEO1\">{%= $.twoColumnText %}","</label></td></tr>","<tr><td><input type=\"radio\" id=\"rdoEO2\" data-dojo-type=\"dijit.form.RadioButton\""," value=\"fat_left\" name=\"radioEO\" /></td><td><label for=\"rdoEO2\">{%= $.fatLeftText %}","</label></td></tr>","<tr><td><input type=\"radio\" id=\"rdoEO3\" data-dojo-type=\"dijit.form.RadioButton\""," value=\"fat_right\" name=\"radioEO\" /></td><td><label for=\"rdoEO3\">{%= $.fatRightText %}","</label></td></tr>","<tr><td><input type=\"checkbox\" id=\"chkMD\" data-dojo-type=\"dijit.form.CheckBox\""," value=\"make_def\"/></td><td><label for=\"chkMD\">{%= $.makeDefaultText %}</label></td></tr>","<tr><td colspan=2 align=\"right\"><button data-dojo-type=\"dijit.form.Button\" type=\"button\""," id=\"btnEOK\" class=\"ok-button\" title=\"{%= $.buttonOk %}\" >{%= $.buttonOk %}</button>","<button data-dojo-type=\"dijit.form.Button\" type=\"button\""," id=\"btnEOCancel\" class=\"cancel-button\" title=\"{%= $.buttonCancel %}\">{%= $.buttonCancel %}</button>","</td></tr></table></div>"]),_raisePermissionInvalidMessage:function(){var _2ae2=this;var fn=function(ans){if(ans){var db=dijit.byId("Dashboard");db._copyPage(_2ae2);}};var opts={title:this.resources.errorText,query:[this.resources.permissionErrorText,this.resources.permissionErrorPerformCopyText],yesText:this.resources.yesText,noText:this.resources.noText,callbackFn:fn,style:{width:"350px"},align:"right"};Sage.UI.Dialogs.raiseQueryDialogExt(opts);},postCreate:function(){this.inherited(arguments);this.subscribe("/ui/dashboard/pageSave",function(page){if(typeof page==="string"){page=parseInt(page,10);}if(page===this._page){if(this.permission){this._save();}else{this._raisePermissionInvalidMessage();}}});this.subscribe("/dojox/mdnd/drop","_dropped");},resources:{},postMixInProperties:function(){dojo.mixin(this.resources,i18n.getLocalization("Sage.UI.Dashboard","DashboardTabController"));dojo.mixin(this.resources,i18n.getLocalization("dijit","common"));this._releaseManager.page=this;this.inherited(arguments);},_createChild:function(_2ae3,col,idx,page){var _2ae4=_2ae3.options.title||_2ae3["@name"],_2ae5=_2ae4;while(_2ae5.indexOf(" ")>=0){_2ae5=_2ae5.replace(" ","_");}while(_2ae5.indexOf(".")>=0){_2ae5=_2ae5.replace(".","_");}while(_2ae5.indexOf("'")>=0){_2ae5=_2ae5.replace("'","_");}if(_2add[_2ae5]){_2ae4=_2add[_2ae5];}this._childWidgets.push(new _2ad6({dndType:"Portlet",title:_2ae4,resizeChildren:false,column:col,index:idx,_page:page,_parentId:this.id,preventRender:this.toBeHidden,widgetOptions:_2ae3.options}));return this._childWidgets[this._childWidgets.length-1];},_addNewWidget:function(name){if(this.permission){var last=this._childWidgets[this._childWidgets.length-1];var col=last&&last.column?last.column:0;var idx=last&&last.index?last.index+1:0;var _2ae6=new _2ad6({dndType:"Portlet",isNew:true,title:this.resources[name]||name,resizeChildren:false,column:col,index:idx,_page:this._page,_parentId:this.id,widgetOptions:{name:name,title:name}});this._childWidgets.push(_2ae6);this.addChild(this._childWidgets[this._childWidgets.length-1],col,idx);this._save();}else{this._raisePermissionInvalidMessage();}},_editOptionsMenu:function(){var uo=Sage.UI.DataStore.Dashboard.userOptions;var _2ae7=false,_2ae8=false,_2ae9=false,_2aea=false;switch(this.colWidths.toString()){case "50,50":_2ae8=true;break;case "67,33":_2ae9=true;break;case "33,67":_2aea=true;break;default:_2ae7=true;}var d=new dijit.Dialog({title:this.resources.editOptionsText,style:"width:350px"});d.set("content",this._eoTable.apply({title:this.get("title"),buttonOk:this.resources.buttonOk,buttonCancel:this.resources.buttonCancel,addText:this.resources.addText,titleText:this.resources.titleText,chooseTemplateText:this.resources.chooseTemplateText,oneColumnText:this.resources.oneColumnText,twoColumnText:this.resources.twoColumnText,fatLeftText:this.resources.fatLeftText,fatRightText:this.resources.fatRightText,makeDefaultText:this.resources.makeDefaultText,invalidMessage:this.resources.invalidMessage}));dijit.byId("rdoEO0").set("checked",_2ae7);dijit.byId("rdoEO1").set("checked",_2ae8);dijit.byId("rdoEO2").set("checked",_2ae9);dijit.byId("rdoEO3").set("checked",_2aea);if(uo.defaultTab==this.title){dijit.byId("chkMD").set("checked",true);}d.show();var _2aeb=function(){if(this.isNew){var _2aec=dijit.byId("Dashboard");_2aec.closeChild(this);_2aec.selectFirstVisible();}dojo.disconnect(_2aed);dojo.disconnect(ok);dojo.disconnect(_2aee);d.destroyRecursive();};var _2aed=dojo.connect(d,"hide",this,_2aeb);var _2aee=dojo.connect(dijit.byId("btnEOCancel"),"onClick",this,function(){d.hide();});var ok=dojo.connect(dijit.byId("btnEOK"),"onClick",this,function(){if(this.permission){var txtEO=dijit.byId("txtEO");if(!txtEO.isValid()||!this.getParent()._isTitleUnique(txtEO.value,this.id)){return false;}var _2aef={};_2aef.ttl=txtEO.value;_2aef.one_column=dijit.byId("rdoEO0").get("value");_2aef.even_split=dijit.byId("rdoEO1").get("value");_2aef.fat_left=dijit.byId("rdoEO2").get("value");_2aef.fat_right=dijit.byId("rdoEO3").get("value");_2aef.make_def=dijit.byId("chkMD").get("value");if(this.isNew){this.isNew=false;}else{_2aef.oldName=this.name;}this._setOptions(_2aef);this._save();this._redrawWidgets();this.getParent().addRemovePageContextMenu();d.hide();}else{d.hide();this._raisePermissionInvalidMessage();}});},_redrawWidgets:function(){if(this._childWidgets){dojo.forEach(this._childWidgets,function(_2af0){_2af0.refresh(true);});}},_releaseManager:{share:function(){this.lookupOptions.callerId=this.page.id;if(!this.dialog){this.dialog=new dijit.Dialog({id:this.page.id+"-shareDialog",style:"width: 405px",title:this.page.resources.shareTabText});var _2af1=dojo.connect(this.dialog,"hide",this,this.fnHide);dojo.mixin(this.dialog,new _2ad9());this.dialog.createHelpIconByTopic("Working_with_the_Dashboard");}if(this.grid){this.grid.destroyRecursive();}this.grid=new dojox.grid.DataGrid({id:this.page.id+"-shareDialog-grid",structure:[{field:"$key",editable:false,hidden:true,id:"id",formatter:function(value,_2af2,cel){var id=[cel.grid.id,"-row",_2af2].join("");var _2af3=["<div id=",id," >",id,"</ div>"].join("");return _2af3;}},{field:"Text",name:this.page.resources.releasedToText,width:"185px"},{field:"Type",name:this.page.resources.typeText,width:"175px"}],height:"200px"},document.createElement("div"));var def=dojo.xhrGet({url:"slxdata.ashx/slx/crm/-/dashboard/release",preventCache:true,handleAs:"json",content:{name:this.page.name,family:this.page.family},load:dojo.hitch(this,this.releaseFetchSuccess),error:function(data){}});},releaseFetchSuccess:function(data,xhr){var _2af4={identifier:"Id",items:data};this.gridStore=new dojo.data.ItemFileWriteStore({data:_2af4});this.dialog.set("content",this.dialogContent.apply({id:this.dialog.id,pageId:this.page.id,closeText:this.page.resources.closeText,everyoneText:this.page.resources.everyoneText,headerText:this.page.resources.shareTabText}));this.initTools();this.dialog.show();dojo.place(this.grid.domNode,this.dialog.id+"-grid","replace");this.grid.setStore(this.gridStore);dojo.style(this.dialog.id,"top","130px");},fnHide:function(){this.release();},initTools:function(){var delid=this.dialog.id+"_delBtn";var _2af5=_2ada.create("img",{"id":delid,"alt":this.page.resources.deleteText,"title":this.page.resources.deleteText,"src":"images/icons/Delete_16x16.png","class":"tws-header-icon"});dojo.place(_2af5,dojo.query(["#",this.dialog.id,"-toolbar"].join(""))[0],"last");dojo.connect(dojo.byId(delid),"onclick",this,this.deleteSelected);delid=this.dialog.id+"_lookupBtn";_2af5=_2ada.create("img",{"id":delid,"alt":this.page.resources.addText,"title":this.page.resources.addText,"src":"images/icons/Plus_16x16.gif","class":"tws-header-icon"});dojo.place(_2af5,dojo.query(["#",this.dialog.id,"-toolbar"].join(""))[0],"last");dojo.connect(dojo.byId(delid),"onclick",this,this.startLookup);},deleteSelected:function(){var _2af6=this.grid.selection.getSelected();if(_2af6.length){var _2af7=this.gridStore;dojo.forEach(_2af6,function(item){if(item!==null){_2af7.deleteItem(item);}});this.gridStore.save();}},page:null,grid:null,gridStore:null,dialog:null,dialogContent:new Simplate(["<div width=\"560px\">","<div style=\"width:100%;\" align=\"right\" id=\"{%= $.id %}-toolbar\"></div>","<div id=\"{%= $.id %}-grid\" ></div>","<div style=\"width:100%;\" align=\"right\" ><button data-dojo-type=\"dijit.form.Button\" type=\"button\" style=\"margin-top:10px;\" ","data-dojo-props=\"onClick:function(){dijit.byId('{%= $.pageId %}')._releaseManager.everyoneClick();}\"",">{%= $.everyoneText %}</button>","<button data-dojo-type=\"dijit.form.Button\" type=\"button\" style=\"margin-left:10px; margin-top:10px;\" ","data-dojo-props=\"onClick:function(){dijit.byId('{%= $.pageId %}')._releaseManager.dialog.hide();}\"",">{%= $.closeText %}</button></div>","</div> "]),lookup:null,everyoneClick:function(){var item=[{$key:"SYST00000001",OwnerDescription:this.page.resources.everyoneText}];this.lookupOptions.doSelected(item);},release:function(){var ids="";var items=this.gridStore._arrayOfAllItems;for(var i=0;i<items.length;i++){if(items[i]){ids+=items[i].Id[0]+",";}}var vURL=dojo.string.substitute("SLXGroupBuilder.aspx?method=GetGroupIdFromNameFamilyAndType&name=${0}&family=System&type=36",[encodeURIComponent(this.page.name)]);dojo.xhrGet({url:vURL,error:dojo.hitch(this,function(_2af8){}),load:dojo.hitch(this,function(_2af9){vURL="SLXGroupBuilder.aspx?method=ReleaseGroup&gid="+_2af9+"&toids="+ids;dojo.xhrGet({url:vURL,error:dojo.hitch(this,function(_2afa){}),load:dojo.hitch(this,function(_2afb){})});})});},startLookup:function(){if(!this.lookup){this.lookup=new Sage.UI.SDataLookup(this.lookupOptions);this.lookup.dialogTitle=this.page.resources.addLookup;this.lookup.dialogButtonText=this.page.resources.okButton;this.lookup.structure[0].cells[0].name=this.page.resources.typeText;this.lookup.structure[0].cells[1].name=this.page.resources.descriptionText;}this.lookup.showLookup();},lookupOptions:{callerId:null,displayMode:5,structure:[{cells:[{name:"",field:"Type",sortable:true,width:"150px",editable:false,styles:null,propertyType:"Sage.Entity.Interfaces.OwnerType",excludeFromFilters:false,useAsResult:false},{"name":"","field":"OwnerDescription","sortable":true,"width":"500px","editable":false,"styles":null,"propertyType":"System.String","excludeFromFilters":false,"useAsResult":false}],"defaultCell":{"name":null,"field":null,"sortable":false,"width":"50px","editable":false,"styles":"text-align: left;","propertyType":null,"excludeFromFilters":false,"useAsResult":false}}],gridOptions:{},storeOptions:{"resourceKind":"owners"},dialogTitle:"",dialogButtonText:"",id:"MainContent_AccountDetails_Owner_Grid",modality:"modal",doSelected:function(items){var _2afc=dijit.byId(this.callerId)._releaseManager;for(var i=0,len=items.length;i<len;i++){if(!_2afc.gridStore._itemsByIdentity[items[i].$key]){_2afc.gridStore.newItem({Id:items[i].$key,Text:items[i].OwnerDescription,Type:items[i].Type});}}_2afc.gridStore.save();_2afc.grid.startup();if(_2afc.lookup&&_2afc.lookup.lookupDialog){_2afc.lookup.lookupDialog.hide();}}}},_joinColumnWidgets:function(){if(this.nbZones===2){for(var i=this._childWidgets.length-1;i>=0;i--){if(this._childWidgets[i].column===1){this.removeChild(this._childWidgets[i]);this._childWidgets[i].column=0;this._childWidgets[i].index+=this._childWidgets.length;this.addChild(this._childWidgets[i],0,this._childWidgets[i].index);}}this._deleteColumn(1);}},_setOptions:function(_2afd){var uo=Sage.UI.DataStore.Dashboard.userOptions;if(_2afd.ttl){this.title=_2afd.ttl;this.set("name",_2afd.ttl);var _2afe=dijit.byId("Dashboard_tablist_"+this.id);if(_2afe){_2afe._setLabelAttr(_2afd.ttl);}}if(_2afd.one_column){this._joinColumnWidgets();this.setColumns(1);this.set("colWidths","100");dojo.publish("ui/dashboard/columnResize");}if(_2afd.even_split){this.setColumns(2);this.set("colWidths","50,50");dojo.publish("/ui/dashboard/columnResize");}if(_2afd.fat_left){this.setColumns(2);this.set("colWidths","67,33");dojo.publish("/ui/dashboard/columnResize");}if(_2afd.fat_right){this.setColumns(2);this.set("colWidths","33,67");dojo.publish("/ui/dashboard/columnResize");}if(_2afd.make_def){var db=dijit.byId(this._parentId);if(this.title){uo.defaultTab=this.title;db._updateUserOptions();}}if(_2afd.oldName){this.oldName=_2afd.oldName;}else{this.oldName="";}},_newWidgetMenu:function(){var d=new dijit.Dialog({title:this.resources.addContentText,style:"width:365px;"});dojo.mixin(d,new _2ad9());var list=Sage.UI.DataStore.Dashboard.widgetsList;var inner=[];this._nwListeners=[];for(var item in list){if(list.hasOwnProperty(item)&&item!="Default"){var _2aff=item.replace(" ","_");inner.push(this._nwTableInner.apply({btnId:_2aff+"_label",key:_2add[_2aff]||item,value:_2add[_2aff+"_Description"]||list[item],addText:this.resources.addText}));}}var mkup=this._nwTableOuter.apply({content:inner.join(""),buttonCancel:this.resources.buttonCancel});d.createHelpIconByTopic("Introducing_Widgets");d.set("content",mkup);d.show();var _2b00=function(){dojo.forEach(this._nwListeners,dojo.disconnect);dojo.disconnect(_2b01);dojo.disconnect(_2b02);setTimeout((function(d){return function(){d.destroyDescendants();d.destroy(false);};})(d),1);};var _2b01=dojo.connect(d,"hide",this,_2b00);var _2b02=dojo.connect(dijit.byId("btnAddContentClose"),"onClick",this,function(){d.hide();});var adds=dijit.findWidgets(dojo.byId("nwTable"));for(var i=0,len=adds.length;i<len;i++){if(adds[i].id!="btnAddContentClose"){var cb=dojo.hitch(this,this._addNewClick,d,adds[i].id);this._nwListeners.push(dojo.connect(adds[i],"onClick",null,cb));}}},_addNewClick:function(d,_2b03,evt){var id=_2b03.replace("_label","").replace("_"," ");d.hide();this._addNewWidget(id);},_init:function(_2b04){if(this.pageRendered){if(this.firstButNotDefault){for(var k=0,llen=this._childWidgets.length;k<llen;k++){this._childWidgets[k]._redrawCharts();}this.firstButNotDefault=false;}return;}if(!_2b04){setTimeout(lang.hitch(this,function(){this._setWidgetsToPage();this.pageRendered=true;}),5);}},_setWidgetsToPage:function(){var num=this._numberOfWidgets();var _2b05=this.getChildren();if(typeof (this._columns)!=="undefined"&&typeof (_2b05)!=="undefined"&&_2b05.length!==num){var i;for(i=0;i<this.nbZones;i++){if(this._columns[i]){this._columns[i].Widgets.Widget=_2ad7.Convert.toArrayFromObject(this._columns[i].Widgets.Widget);var j;var len=this._columns[i].Widgets.Widget.length;for(j=0;j<len;j++){if(this._columns[i].Widgets.Widget[j]){this.addChild(this._createChild(this._columns[i].Widgets.Widget[j],i,j,this._page),i,j);}}}}}},_numberOfWidgets:function(){var count=0;if(this._columns){var i;var len=this._columns.length;for(i=0;i<len;i++){var _2b06=this._columns[i];if(_2b06){_2b06.Widgets.Widget=_2ad7.Convert.toArrayFromObject(_2b06.Widgets.Widget);count=count+_2b06.Widgets.Widget.length;}}}return count;},_dropped:function(drp,_2b07,i){var _2b08=dijit.byId(drp.id);if(this._page!==_2b08._page){return;}var col=_2b07.node.cellIndex;_2b08._setColumn(col);_2b08._setIndex(i);dojo.publish("/ui/widget/dropped",[drp.id,_2b08._page,col,i]);if(this.permission){this._save();}else{this._raisePermissionInvalidMessage();}},_hide:function(){return this.title;},copy:function(){var _2b09=this._stringifyColWidths();return this._prepForSave({"@name":this.name,"@title":this.name,"@id":this.id,"@family":this.family||"System","@permission":this.permission,"@colWidths":_2b09,Columns:{Column:[]}});},_contextSave:function(){if(!this.pageRendered){return;}this._save();},_stringifyColWidths:function(){var cw=this.colWidths;var _2b0a;if(cw){return typeof cw==="string"?cw:cw.join(",");}return cw;},_prepForSave:function(_2b0b){var _2b0c={};var i;for(i=0;i<this.nbZones;i++){_2b0c[i]=new _2adf({Widgets:{Widget:[]}});}var x;var len=this._childWidgets.length;for(x=0;x<len;x++){var col=this._childWidgets[x].column;var opts=this._childWidgets[x].widgetOptions;var w={index:this._childWidgets[x].index,"@name":opts.name,"@family":opts.family||"System",options:opts};_2b0c[col].Widgets.Widget.placeByAttr(w,"index");}var cols=Sage.Utility.size(_2b0c);var j;for(j=0;j<cols;j++){_2b0b.Columns.Column.push(_2b0c[j]);}var pg={Dashboard:{}};Sage.Utility.mixOwn(pg.Dashboard,_2b0b);return pg;},_save:function(){var _2b0d=this._stringifyColWidths();var pg=this._prepForSave({"@name":this.name,"@title":this.name,"@id":this.id,"@family":this.family||"System","@colWidths":_2b0d,Columns:{Column:[]}});var pgStr=dojo.toJson(pg);if(!this.oldName){this.oldName="";}var uri=dojo.string.substitute("slxdata.ashx/slx/crm/-/dashboard/page?name=${0}&family=${1}&oldName=${2}",[encodeURIComponent(this.name),encodeURIComponent(this.family),encodeURIComponent(this.oldName)]);var def=dojo.xhrPost({url:uri,handleAs:"text",postData:pgStr,load:function(data){},error:function(err){console.error(err);}});}});return _2ae1;});},"Sage/UI/GridContainer":function(){define(["dojox/layout/GridContainer","dojo/_base/declare"],function(_2b0e,_2b0f){var _2b10=_2b0f("Sage.UI.GridContainer",_2b0e,{_updateColumnsWidth:function(_2b11){if(!_2b11){var _2b12=[];_2b12.push(this._dragManager);_2b12.callee=arguments.callee;this.inherited(_2b12);}else{this.inherited(arguments);}}});return _2b10;});},"Sage/UI/Dashboard/DashboardWidgetCell":function(){define(["dojo/i18n","dojo/i18n!./nls/DashboardWidgetCell","Sage/UI/WidgetEditor","Sage/UI/Dashboard/DashboardWidget","dojox/data/dom","dojox/widget/Portlet","dojo/_base/declare"],function(i18n,_2b13,_2b14,_2b15,dom,_2b16,_2b17){var _2b18=_2b17("Sage.UI.Dashboard.DashboardWidgetCell",[_2b16],{onClose:function(evt){var pg=dijit.byId(this._parentId);pg._childWidgets.removeByAttr("id",this.id);dojo.publish("/ui/dashboard/pageSave",[pg._page]);this.inherited(arguments);},_onShow:function(){this.inherited(arguments);if(this.redrawOnShow){this.redrawOnShow=false;this.refresh(true);}},onHide:function(){this.redrawOnShow=true;this.inherited(arguments);},onDownloadEnd:function(data){if(data){var doc=data.documentElement;for(var i=0,len=doc.childNodes.length;i<len;i++){if(doc.childNodes[i].tagName==="Content"){var _2b19=dom.textContent(doc.childNodes[i]);Sage.UI.WidgetDefinitions[this.widgetOptions.name]=dojo.fromJson(_2b19);this.widgetDefined=true;dojo.publish("/ui/widget/defined");this._widgetInit();}}}else{}},postMixInProperties:function(){dojo.mixin(this,i18n.getLocalization("Sage.UI.Dashboard","DashboardWidgetCell"));if(this._page>=0){this.preload=true;}this.href="slxdata.ashx/slx/crm/-/dashboard/widget";this.ioArgs={handleAs:"xml",content:{name:this.widgetOptions.name,family:this.widgetOptions.family||"system"}};this._drawLegend();this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this.subscribe("/ui/widget/dropped",function(id,p,c,i){if(id===this.id){return;}if(p!==this._page){return;}if(c!==this.column){return;}if(i>this.index){return;}this._indexUp();});this.connect(this.containerNode,"onmousedown",function(evt){if(dojo.hasClass(evt.target,"dojoxGridScrollbox")){dojo.stopEvent(evt);return false;}return true;});this.arrowNode.title=this.minimizeTooltipText;},refresh:function(_2b1a){if(_2b1a){var _2b1b=this._dashboardWidget;if(_2b1b){dojo.disconnect(_2b1b._winResize);dojo.unsubscribe(_2b1b.dropSub);}this.destroyDescendants();this._removeIcons();}this.inherited(arguments);this._drawLegend();},_drawLegend:function(){if(this.widgetOptions.showLegend==="true"){this.chartWidth="67";this.legendDisplay="block";}else{this.chartWidth="100";this.legendDisplay="none";}},_redrawCharts:function(){if(this._dashboardWidget&&this._dashboardWidget.definition&&this._dashboardWidget.definition.declaredClass==="Sage.UI.Dashboard.ChartingWidget"){this.refresh(true);}},_createIcon:function(clazz,_2b1c,fn){var _2b1d="";if(clazz==="dojoxPortletSettingsIcon"){_2b1d=this.settingsTooltipText;}else{if(clazz==="dojoxCloseNode"){_2b1d=this.closeTooltipText;}}if(!this._tbarIcons){this._tbarIcons=[];}var icon=dojo.create("div",{"class":"dojoxPortletIcon "+clazz,"waiRole":"presentation","title":_2b1d});if(this.isNew){if(clazz==="dojoxPortletSettingsIcon"||this._tbarIcons.length<1){dojo.place(icon,this.arrowNode,"before");}else{dojo.place(icon,this._tbarIcons[0],"before");}}else{if(this._tbarIcons.length==1&&clazz==="dojoxPortletSettingsIcon"){try{dojo.place(icon,this._tbarIcons[0],"replace");}catch(e){dojo.place(icon,this.arrowNode,"before");}}else{dojo.place(icon,this.arrowNode,"before");}}if(_2b1c){this.iconMouseOverEvent=this.connect(icon,"onmouseover",function(){dojo.addClass(icon,_2b1c);});this.iconMouseOutEvent=this.connect(icon,"onmouseout",function(){dojo.removeClass(icon,_2b1c);});}if(clazz==="dojoxPortletSettingsIcon"){if(this._tbarIcons.length==1){this._tbarIcons[0]=icon;}else{this._tbarIcons.push(icon);}this.iconClickEvent=this.connect(icon,"onclick",fn);}else{this.connect(icon,"onclick",fn);}return icon;},_removeIcons:function(){if(this.iconClickEvent){this.disconnect(this.iconClickEvent);}if(this.iconMouseOverEvent){this.disconnect(this.iconMouseOverEvent);}if(this.iconMouseOutEvent){this.disconnect(this.iconMouseOutEvent);}if(this._tbarIcons.length>0){dojo.empty(this._tbarIcons[0]);}},_editorAdded:function(){var _2b1e=this.getChildren();this._placeSettingsWidgets();dojo.forEach(_2b1e,function(child){try{if(!child.started&&!child._started){child.startup();}}catch(e){}});},_load:function(){if(!this.preventRender){this._setContent(this.onDownloadStart(),true);if(!Sage.UI.WidgetDefinitions[this.widgetOptions.name]&&!this.requestPending){this.requestPending=true;var that=this;var _2b1f={preventCache:false,url:this.href};if(dojo.isObject(this.ioArgs)){dojo.mixin(_2b1f,this.ioArgs);}var hand=(this._xhrDfd=(this.ioMethod||dojo.xhrGet)(_2b1f));hand.addCallback(function(data){try{that._isDownloaded=true;that.requestPending=false;that._setContent(that.processingData||"",true);that.onDownloadEnd(data);}catch(err){that._onError("Content",err);}delete that._xhrDfd;});hand.addErrback(function(err){if(!hand.canceled){that._onError("Download",err);}delete that._xhrDfd;return err;});delete this._hrefChanged;}else{if(this.requestPending){this._waitForDefinition();}else{this.widgetDefined=true;this._widgetInit();}}}},_setColumn:function(n){this.column=n;},_setIndex:function(n){this.index=n;},_indexUp:function(){this.index+=1;},_waitForDefinition:function(){this.subscription=this.subscribe("/ui/widget/defined",this,function(){this.widgetDefined=true;this._widgetInit();});},_widgetInit:function(){if(this.widgetDefined&&!this._Widget){this._dashboardWidget=new _2b15({options:this.widgetOptions,parentCell:this});}}});return _2b18;});},"Sage/UI/WidgetEditor":function(){define(["dojo/data/ItemFileWriteStore","dojox/widget/Portlet","Sage/UI/Controls/_DialogHelpIconMixin","dojo/_base/declare","dojo/i18n!./Dashboard/nls/WidgetDefinition","dojo/dom-style","dojo/on","dojo/_base/lang","dojo/string","Sage/Data/BaseSDataStore","Sage/Data/SDataServiceRegistry"],function(_2b20,_2b21,_2b22,_2b23,_2b24,_2b25,on,lang,_2b26,_2b27,_2b28){var _2b29=_2b23("Sage.UI.WidgetEditor",[dojox.widget.PortletDialogSettings],{_grpUrl:{replace:"where",start:0,count:100,domain:"system",kind:"groups",include:null,service:Sage.Data.SDataServiceRegistry.getSDataService("system"),entityName:null,where:"upper(family) eq upper('${0}')",select:"name,displayName",orderBy:"name",format:"json",store:null},_dimUrl:{replace:"kind",start:0,count:100,domain:"metadata",kind:"entities('${0}')/filters",include:null,service:Sage.Data.SDataServiceRegistry.getSDataService("metadata"),entityName:null,where:"analyticsAvailable and filterType ne 'analyticsMetric'",select:"filterName,displayName,analyticsDescription",format:"json",orderBy:"filterName",store:null},_metUrl:{replace:"kind",start:0,count:100,domain:"metadata",kind:"entities('${0}')/filters",include:null,service:Sage.Data.SDataServiceRegistry.getSDataService("metadata"),entityName:null,where:"analyticsAvailable and filterType eq 'analyticsMetric'",select:"filterName,displayName,analyticsDescription",format:"json",orderBy:"filterName",store:null},_entityUrl:{replace:null,start:0,count:100,domain:"metadata",kind:"entities",include:"filters",service:Sage.Data.SDataServiceRegistry.getSDataService("metadata"),entityName:null,where:"filters.analyticsAvailable eq true and filters.filterType eq 'analyticsMetric'",select:"name,displayName,tableName",format:"json",orderBy:"name",store:null},_addEnt:function(str){return "Sage.Entity.Interfaces.I"+str;},_remEnt:function(str){return str.replace("Sage.Entity.Interfaces.I","");},_remAmp:function(str){return str[str.length-1]==="&"?str.slice(0,-1):str;},_pushEnt:function(val){this._entStr=_2b26.substitute("entity=${0}&",[encodeURIComponent(val)]);},_pushGrp:function(val){this._grpStr=_2b26.substitute("groupname=${0}&",[encodeURIComponent(val)]);},_pushDim:function(val){this._dimStr=_2b26.substitute("dimension=${0}&",[encodeURIComponent(val)]);},_pushMet:function(val){this._metStr=_2b26.substitute("metric=${0}&",[encodeURIComponent(val)]);},_pushLim:function(val){this._limStr=_2b26.substitute("limit=${0}&",[encodeURIComponent(val)]);},_pushOth:function(val){this._othStr=_2b26.substitute("combineother=${0}",[encodeURIComponent(val)]);},_checkHydrate:function(){var opts=this.portlet.widgetOptions;if(opts.groupname&&this._grpField){if(this._originalGroup){opts.groupname=this._originalGroup;}var _2b2a=this._grpField;_2b2a.store.fetch({query:{name:opts.groupname},onComplete:function(i,r){if(i.length>0){_2b2a.set("value",_2b2a.store.getValue(i[0],"$descriptor"));}},queryOptions:{deep:true}});this._originalGroup=opts.groupname;}if(opts.dimension&&this._dimField){if(this._originalDimension){opts.dimension=this._originalDimension;}var df=this._dimField;df.store.fetch({query:{filterName:opts.dimension},onComplete:function(i,r){if(i.length>0){var _2b2b=df.store.getValue(i[0],"$descriptor");df.set("value",_2b2b);}},queryOptions:{deep:true}});this._originalDimension=opts.dimension;}if(opts.metric&&this._metField){if(this._originalMetric){opts.metric=this._originalMetric;}var mf=this._metField;mf.store.fetch({query:{filterName:opts.metric},onComplete:function(i,r){if(i.length>0){var _2b2c=mf.store.getValue(i[0],"$descriptor");mf.set("value",_2b2c);}},queryOptions:{deep:true}});this._originalMetric=opts.metric;}this._hydrateChecked=true;},_setFields:function(child){switch(child.id){case this.portlet.id+"_ttlField":this._ttlField=child;break;case this.portlet.id+"_subField":this._subField=child;break;case this.portlet.id+"_entCombo":this._entField=child;on.once(this._entField._buttonNode,"click",lang.hitch(this,function(){var _2b2d=dojo.byId(this.portlet.id+"_loading");_2b25.set(_2b2d,"display","block");this._entField.set("store",this._entityUrl.store);if(this._entityUrl.store._arrayOfAllItems.length>0){_2b25.set(_2b2d,"display","none");this._entField.loadAndOpenDropDown();this._entField.focus();}}));break;case this.portlet.id+"_grpCombo":this._grpField=child;break;case this.portlet.id+"_dimCombo":this._dimField=child;break;case this.portlet.id+"_metCombo":this._metField=child;break;case this.portlet.id+"_goalField":this._goalField=child;break;case this.portlet.id+"_xField":this._xField=child;break;case this.portlet.id+"_yField":this._yField=child;break;case this.portlet.id+"_numberMaximum":this._numberMaximum=child;this._numberMaximum.constraints.min=1;break;case this.portlet.id+"_rdoOthY":this._rdoOthY=child;break;case this.portlet.id+"_rdoOthN":this._rdoOthN=child;break;case this.portlet.id+"_rdoLegY":this._rdoLegY=child;break;case this.portlet.id+"_rdoLegN":this._rdoLegN=child;break;case this.portlet.id+"_rdoLabY":this._rdoLabY=child;break;case this.portlet.id+"_rdoLabN":this._rdoLabN=child;break;case this.portlet.id+"_rdoTruY":this._rdoTruY=child;break;case this.portlet.id+"_rdoTruN":this._rdoTruN=child;break;case this.portlet.id+"_truncField":this._truncField=child;this._truncField.constraints.min=1;break;case this.portlet.id+"_btnOK":this._btnOK=child;break;case this.portlet.id+"_btnCancel":this._btnCancel=child;this._btnCancel.set("style","margin-left:10px;");break;default:this[child.id]=child;if(!this.customOptions){this.customOptions=[];}var _2b2e=child.id.split(this.portlet.id);if(_2b2e.length==2){if(_2b2e[1].indexOf("_")===0){_2b2e[1]=_2b2e[1].substring(1);}this.customOptions.push({id:child.id,option:_2b2e[1]});}break;}},_validateOOTBRequired:function(){var _2b2f=true;if(this._entField&&!this._entField.isValid()){this._entField.set("state","Error");_2b2f=false;}if(this._grpField&&!this._grpField.isValid()){this._grpField.set("state","Error");_2b2f=false;}if(this._dimField&&!this._dimField.isValid()){this._dimField.set("state","Error");_2b2f=false;}if(this._metField&&!this._metField.isValid()){this._metField.set("state","Error");_2b2f=false;}return _2b2f;},_getTableNameOfEntity:function(arg){var _2b30=null;var name=null;var _2b31=null;if(typeof (this._entField.item)!=="undefined"&&this._entField.item!==null){_2b30=this._entField.item.tableName[0];name=this._entField.item.name[0];_2b31=this._entField.item.displayName[0];return {name:name,tableName:_2b30,displayName:_2b31};}else{if(typeof (this._entField.store)!=="undefined"&&this._entityUrl.store._itemsByIdentity){if(arg.length>0&&this._entityUrl.store._itemsByIdentity[arg]){_2b30=this._entityUrl.store._itemsByIdentity[arg].tableName[0];name=this._entityUrl.store._itemsByIdentity[arg].name[0];_2b31=this._entityUrl.store._itemsByIdentity[arg].displayName[0];return {name:name,tableName:_2b30,displayName:_2b31};}}var i;for(i=0;i<this._entityUrl.store._arrayOfAllItems.length;i++){var _2b32=this._entityUrl.store._arrayOfAllItems[i];if(_2b32["$descriptor"][0]===arg){_2b30=_2b32["tableName"][0];name=_2b32["name"][0];_2b31=_2b32["displayName"][0];return {name:name,tableName:_2b30,displayName:_2b31};}}}return {name:name,tableName:_2b30,displayName:_2b31};},_updateGroupsDimensionsMetricsStores:function(arg){var opts=this.portlet.widgetOptions;arg=opts.resource?opts.resource:arg;var _2b33=this._getTableNameOfEntity(this._remEnt(arg));var _2b34=this._entField.item?this._entField.item.$descriptor[0]:this._addEnt(_2b33.displayName);if(_2b33!==null){var _2b35=_2b33.name;this._pushEnt(_2b35);opts.entity=_2b34;opts.resource=_2b35;if(this._grpField){this._grpUrl.entityName=_2b33.tableName;this._populate(this._grpUrl);this._grpField.store.urlPreventCache=true;this._grpField.set("builder",this._grpUrl);this._grpField.set("store",this._grpUrl.store);this._grpField.set("value","");}if(this._dimField){this._dimUrl.entityName=_2b33.name;this._populate(this._dimUrl);this._dimField.set("builder",this._dimUrl);this._dimField.set("store",this._dimUrl.store);this._dimField.set("value","");}if(this._metField){this._metUrl.entityName=_2b33.name;this._populate(this._metUrl);this._metField.set("builder",this._metUrl);this._metField.set("store",this._metUrl.store);this._metField.set("value","");}this._checkHydrate();}},toggle:function(){var that=this;var _2b36=dijit.byId(that.portlet._parentId);var i,len;if(_2b36.permission){if(!this._childWidgets){this._childWidgets=this.getChildren();for(i=0,len=this._childWidgets.length;i<len;i++){this._setFields(this._childWidgets[i]);}}if(!this.dialog){dojo.require("dijit.Dialog");this.dialog=new dijit.Dialog({title:this.title});this.dialog.containerNode.style.height=this.dimensions[1]+"px";if(!this.dialog.helpIcon){dojo.mixin(this.dialog,new _2b22());this.dialog.createHelpIconByTopic("Using_Widgets");}dojo.body().appendChild(this.dialog.domNode);this.dialog.containerNode.appendChild(this.domNode);dojo.style(this.dialog.domNode,{"width":this.dimensions[0]+"px","height":(this.dimensions[1]+50)+"px"});dojo.style(this.domNode,"display","");}if(this.dialog.open){this._hydrateChecked=false;this.dialog.hide();}else{var opts=this.portlet.widgetOptions;this.dialog.show(this.domNode);if(opts.title&&this._ttlField){var _2b37=opts.title.replace(/'/g,"_").replace(/ /g,"_");this._ttlField.set("value",_2b24[_2b37]||opts.title);}if(this._entField){this._populate(this._entityUrl);this._entField.store.urlPreventCache=true;this._entField.set("builder",this._entityUrl);this._entField.set("store",this._entityUrl.store);this._entField.set("value","");if(this._entField&&!this._entChange){this._entChange=dojo.connect(this._entField,"onChange",this,this._updateGroupsDimensionsMetricsStores);}}if(this._subField){if(opts.subtitle){this._subField.set("value",opts.subtitle);}else{this._subField.set("value","");}}if(this._xField){if(opts.xAxisName){this._xField.set("value",opts.xAxisName);}else{this._xField.set("value","");}}if(this._yField){if(opts.yAxisName){this._yField.set("value",opts.yAxisName);}else{this._yField.set("value","");}}if(this._numberMaximum){if(opts.numberMaximum){this._numberMaximum.set("value",opts.numberMaximum);}else{this._numberMaximum.set("value","10");}}if(this._goalField){if(opts.goal){this._goalField.set("value",opts.goal);}else{this._goalField.set("value","");}}if(this._rdoOthY){if(!opts.combineother){this._rdoOthN.set("checked",true);}else{if(opts.combineother==="true"){this._rdoOthY.set("checked",true);}else{this._rdoOthN.set("checked",true);}}}if(this._rdoLegY){if(!opts.showLegend){this._rdoLegN.set("checked",true);}else{if(opts.showLegend==="true"){this._rdoLegY.set("checked",true);}else{this._rdoLegN.set("checked",true);}}}if(this._rdoLabY){if(!opts.showLabels){this._rdoLabN.set("checked",true);}else{if(opts.showLabels==="true"){this._rdoLabY.set("checked",true);}else{this._rdoLabN.set("checked",true);}}}if(this._rdoTruY){if(!opts.truncLabels){this._rdoTruN.set("checked",true);}else{if(opts.truncLabels==="true"){this._rdoTruY.set("checked",true);}else{this._rdoTruN.set("checked",true);}}}if(this._truncField){if(opts.truncNum){this._truncField.set("value",opts.truncNum);}else{this._truncField.set("value","");}}if(this.customOptions){for(i=0;i<this.customOptions.length;i++){var _2b38=this.customOptions[i].option,_2b39=this.customOptions[i].id;if(opts[_2b38]){this[_2b39].set("value",opts[_2b38]);}}}for(i=0;i<this._childWidgets.length;i++){if(this._childWidgets[i]._myEditRowInit){this._childWidgets[i]._myEditRowInit(opts);}}if(!this._cancelClick){this._cancelClick=dojo.connect(this._btnCancel,"onClick",this,function(){for(i=0;i<this._childWidgets.length;i++){if(this._childWidgets[i]._myEditRowCancel){this._childWidgets[i]._myEditRowCancel(opts);}}this.toggle();if(this.portlet.isNew){this.portlet.onClose();this.portlet.destroy();}});}if(!this._okClick){this._okClick=dojo.connect(this._btnOK,"onClick",this,function(){var _2b3a=["slxdata.ashx/slx/crm/-/analytics?"];if(this._ttlField){if(!this._ttlField.isValid()){return false;}var _2b3b=this._ttlField.get("value");var _2b3c=opts.title.replace(/'/g,"_").replace(/ /g,"_");if(_2b3b){this.portlet.set("title",_2b3b);if(_2b3b!=_2b24[_2b3c]){opts.title=_2b3b;}}}if(this._subField){var sub=this._subField.get("value");if(sub){opts.subtitle=sub;}else{opts.subtitle="";}if(!this._subField.isValid()){return false;}}if(this._xField){var xa=this._xField.get("value");if(xa){opts.xAxisName=xa;}else{opts.xAxisName="";}if(!this._xField.isValid()){return false;}}if(this._yField){var ya=this._yField.get("value");if(ya){opts.yAxisName=ya;}else{opts.yAxisName="";}if(!this._yField.isValid()){return false;}}if(this._numberMaximum){var _2b3d=this._numberMaximum.get("value");if(_2b3d){opts.numberMaximum=_2b3d;}else{opts.numberMaximum="5";}this._pushLim(opts.numberMaximum);if(!this._numberMaximum.isValid()){return false;}}if(this._goalField){var gl=this._goalField.get("value");if(gl){opts.goal=gl;}else{opts.goal="";}if(!this._goalField.isValid()){return false;}}if(this._rdoLabY){var _2b3e=this._rdoLabY.get("value");if(_2b3e){opts.showLabels="true";}else{opts.showLabels="false";}}if(this._rdoTruY){var _2b3f=this._rdoTruY.get("value");if(_2b3f){opts.truncLabels="true";}else{opts.truncLabels="false";}}if(this._rdoOthY){var _2b40=this._rdoOthY.get("value");if(_2b40){opts.combineother="true";this._pushOth("true");}else{opts.combineother="false";this._pushOth("false");}}if(this._rdoLegY){var _2b41=this._rdoLegY.get("value");if(_2b41){opts.showLegend="true";}else{opts.showLegend="false";}}if(this._truncField){var num=this._truncField.get("value");if(num){opts.truncNum=num;}if(!this._truncField.isValid()){return false;}}if(!this._validateOOTBRequired()){return false;}if(this._grpField){if(!this._grpStr){this._grpField.store.fetch({query:{$descriptor:this._grpField.get("value")},onComplete:function(i,r){that._pushGrp(that._grpField.store.getValue(i[0],"name"));},queryOptions:{deep:true}});}}if(this._dimField){if(!this._dimStr){this._dimField.store.fetch({query:{$descriptor:this._dimField.get("value")},onComplete:function(i,r){that._pushDim(that._dimField.store.getValue(i[0],"filterName"));},queryOptions:{deep:true}});}}if(this._metField){if(!this._metStr){this._metField.store.fetch({query:{$descriptor:this._metField.get("value")},onComplete:function(i,r){that._pushMet(that._metField.store.getValue(i[0],"filterName"));},queryOptions:{deep:true}});}}if(this.customOptions){for(i=0;i<this.customOptions.length;i++){var _2b42=this.customOptions[i].option,_2b39=this.customOptions[i].id;opts[_2b42]=this[_2b39].value;}}for(i=0;i<this._childWidgets.length;i++){if(this._childWidgets[i]._myEditRowSave){this._childWidgets[i]._myEditRowSave(opts);}}if(this._dimStr){_2b3a.push(this._dimStr);}if(this._metStr){_2b3a.push(this._metStr);}if(this._entStr){_2b3a.push(this._entStr);}if(this._grpStr){_2b3a.push(this._grpStr);}if(this._limStr){_2b3a.push(this._limStr);}if(this._othStr){_2b3a.push(this._othStr);}opts.datasource=this._remAmp(_2b3a.join(""));dojo.publish("/ui/dashboard/pageSave",[this.portlet._page]);if(this.portlet.isNew){this.portlet.isNew=false;}this.portlet.refresh(true);this.toggle();});}}}else{_2b36._raisePermissionInvalidMessage();}},toggleContinued:function(){var that=this;var opts=this.portlet.widgetOptions;if(this._grpField&&!this._grpChange){this._grpChange=dojo.connect(this._grpField,"onChange",this,function(arg){if(!this._grpField.isValid()){return false;}var store=this._grpField.store;store.fetch({query:{$descriptor:arg},onComplete:function(i,r){var gn=store.getValue(i[0],"name");that._pushGrp(gn);opts.groupname=gn;},queryOptions:{deep:true}});});}if(this._dimField&&!this._dimChange){this._dimChange=dojo.connect(this._dimField,"onChange",this,function(arg){if(!this._dimField.isValid()){return false;}var store=this._dimField.store;store.fetch({query:{$descriptor:arg},onComplete:function(i,r){var n=store.getValue(i[0],"filterName");that._pushDim(n);opts.dimension=n;},queryOptions:{deep:true}});});}if(this._metField&&!this._metChange){this._metChange=dojo.connect(this._metField,"onChange",this,function(arg){if(!this._metField.isValid()){return false;}var store=this._metField.store;store.fetch({query:{$descriptor:arg},onComplete:function(i,r){var m=store.getValue(i[0],"filterName");that._pushMet(m);opts.metric=m;},queryOptions:{deep:true}});});}if(opts.entity){if(this._originalEntity){if(this._originalEntity===opts.entity){this._checkHydrate();}else{this._entField.set("value",this._remEnt(this._originalEntity));}}else{this._entField.set("value",this._remEnt(opts.entity));this._originalEntity=opts.entity;}}},_populate:function(value,start,count){value.store=new _2b20({data:{identifier:"$key",items:[]}});var _2b43=new Sage.SData.Client.SDataResourceCollectionRequest(value.service);var kind=value.kind;if(value.replace==="kind"){kind=_2b26.substitute(value.kind,[value.entityName]);}_2b43.setResourceKind(kind);if(typeof (value.start)!=="undefined"){value.start=start||value.start;_2b43.setQueryArg("startIndex",value.start);}else{value.start=start||0;_2b43.setQueryArg("startIndex",value.start);}if(typeof (value.count)!=="undefined"){value.count=count||value.count;_2b43.setQueryArg("count",value.count);}else{value.count=count||0;_2b43.setQueryArg("count",value.count);}if(typeof (value.where)!=="undefined"){var where=value.where;if(value.replace==="where"){where=_2b26.substitute(value.where,[value.entityName]);}_2b43.setQueryArg("where",where);}if(typeof (value.select)!=="undefined"){_2b43.setQueryArg("select",value.select);}if(typeof (value.orderBy)!=="undefined"){_2b43.setQueryArg("orderBy",value.orderBy);}if(typeof (value.format)!=="undefined"){_2b43.setQueryArg("format",value.format);}var _2b44=this;var key=_2b43.read({success:function(data){var _2b45=data.$resources;for(var i=0;i<=_2b45.length-1;i++){if(value.store._itemsByIdentity===null||!value.store._itemsByIdentity[_2b45[i].$key]){value.store.newItem(_2b45[i]);}}var _2b46=data.$totalResults;var _2b47=value.start+value.count;var _2b48=_2b46-_2b47;if(_2b48>0){if(_2b48>=value.count){_2b44._populate(_2b44,_2b47,value.count);}else{_2b44._populate(_2b44,_2b47,_2b48);}}else{_2b44._checkHydrate();if(value.entityName===null){var _2b49=dojo.byId(_2b44.portlet.id+"_loading");if(_2b49){_2b25.set(_2b49,"display","none");}_2b44.toggleContinued();}}},failure:function(data){}});}});return _2b29;});},"Sage/UI/Dashboard/DashboardWidget":function(){define(["dojo/_base/declare","Sage/UI/Dashboard/WidgetDefinition","dojo/i18n","dojo/_base/lang","dijit/form/TextBox","dijit/form/CheckBox","dojox/charting/widget/Chart2D","dojox/charting/action2d/Highlight","dojox/charting/action2d/MoveSlice","dojox/charting/action2d/Tooltip","dojox/charting/action2d/Magnify","dojox/charting/widget/Legend","Sage/UI/Dashboard/ChartingTheme","dojo/i18n!./nls/DashboardWidget"],function(_2b4a,_2b4b,i18n,lang){var _2b4c=_2b4a("Sage.UI.Dashboard.DashboardWidget",null,{constructor:function(_2b4d){dojo.safeMixin(this,_2b4d);this._setDefinition();this._winResize=dojo.connect(window,"onresize",this,function(){if(!this.parentCell.open||!this.parentCell._started){return;}if(this.parentCell.refresh){this.parentCell.refresh(true);}});this.dropSub=dojo.subscribe("/ui/widget/dropped",this,function(id,p,c,i){if(id===this.parentCell.id){if(!this.parentCell.open||!this.parentCell._started){return;}if(this.parentCell.refresh){this.parentCell.refresh(true);}}});},postMixInProperties:function(){dojo.mixin(this,i18n.getLocalization("Sage.UI.Dashboard","DashboardWidget"));},_getInstanceData:function(){if(this.parentCell.isNew&&this.definition.editor){this.definition.editor(this.parentCell);if(this.parentCell._settingsWidget){this.parentCell._settingsWidget.toggle();}else{this.parentCell._editorAdded();}return;}if(!this.definition.isStatic){var that=this;if(this.options.datasource){dojo.xhrGet({url:this.options.datasource,handleAs:"json",preventCache:true,load:function(data){if(data){that._setInstanceData(data);}else{that.parentCell.set("content",this.noQueryDataText+this.options.datasource);}},error:function(data){that._setInstanceData(null);}});}else{this.parentCell._setContent(this.initializingText||"",true);if(this.definition.isStaticXhr){this._setInstanceData(null);}if(this.definition.editor){this.definition.editor(this.parentCell);}}}else{this._setInstanceData();}},_setDefinition:function(){_2b4b(Sage.UI.WidgetDefinitions[this.options.name],lang.hitch(this,function(_2b4e){this.definition=_2b4e;this._getInstanceData();}));},_setInstanceData:function(data){if(this.definition.isStatic){this.parentCell.set("content",this.definition.html(this.parentCell));if(this.definition.editor){this.definition.editor(this.parentCell);}}else{this.definition.html(this.parentCell,data);}}});return _2b4c;});},"Sage/UI/Dashboard/WidgetDefinition":function(){define(["Sage/UI/widgetEditorLookup","Sage/UI/EditorContainer","dijit/form/ValidationTextBox","dijit/form/NumberTextBox","dijit/form/FilteringSelect","dojo/data/ItemFileReadStore","dojo/data/ItemFileWriteStore","dojox/grid/DataGrid","dojo/i18n","dojo/i18n!./nls/WidgetDefinition"],function(_2b4f,_2b50,_2b51,_2b52,_2b53,_2b54,_2b55,_2b56,i18n){return function(def,_2b57){if(!def.type){def.type="BaseWidget";}require(["Sage/UI/Dashboard/"+def.type],function(T){_2b57(new T(def));});};});},"Sage/UI/widgetEditorLookup":function(){define(["dijit/form/ValidationTextBox","dijit/form/RadioButton","dijit/form/ComboBox","dojo/data/ItemFileReadStore","dijit/form/NumberTextBox"],function(_2b58,_2b59,_2b5a,_2b5b,_2b5c){var _2b5d={};_2b5d.txtField=function(_2b5e){var _2b5f=new Simplate(["<div data-dojo-type=\"dijit.form.ValidationTextBox\" id=\"{%= $.id %}\""," regExp=\"[^<>;]*\" invalidMessage=\"{%= $.invMess %}\" style=\"width:100%;\"></div>"]);return _2b5f.apply(_2b5e);};_2b5d.rdoGroup=function(_2b60){var _2b61=new Simplate(["<table width=\"100%\"><tr><td align=\"left\" width=\"50%\"><input type=\"radio\" id=\"{%= $.idOne %}\" data-dojo-type=\"dijit.form.RadioButton\""," value=\"{%= $.valOne %}\" name=\"{%= $.name %}\"/><label for=\"${idOne}\">{%= $.lblOne %}","</label></td><td align=\"left\" width=\"50%\"><input type=\"radio\" id=\"{%= $.idTwo %}\"data-dojo-type=\"dijit.form.RadioButton\""," value=\"{%= $.valTwo %}\" name=\"{%= $.name %}\"/><label for=\"{%= $.idTwo %}\">{%= $.lblTwo %}","</label></td></tr></table>"]);return _2b61.apply(_2b60);};_2b5d.comboField=function(_2b62){var _2b63=new Simplate(["<input data-dojo-type=\"dijit.form.ComboBox\" id=\"{%= $.id %}\" style=\"width:100%;\""," required=\"true\" searchAttr=\"{%= $.searchAttr %}\"/>"]);return _2b63.apply(_2b62);};_2b5d.numberField=function(_2b64){var _2b65=new Simplate(["<input data-dojo-type=\"dijit.form.NumberTextBox\" id=\"{%= $.id %}\" style=\"width:100%;\""," invalidMessage=\"{%= $.invMess %}\"/>"]);return _2b65.apply(_2b64);};_2b5d.wholeNumberField=function(_2b66){var _2b67=new Simplate(["<input data-dojo-type=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" id=\"{%= $.id %}\""," invalidMessage=\"{%= $.invMess %}\" constraints=\"{places:0}\" style=\"width:100%;\" formatType=\"Number\"/>"]);return _2b67.apply(_2b66);};_2b5d._myEditRow=function(_2b68){var _2b69=new Simplate(["<div data-dojo-type=\"{%= $.type %}\" id=\"{%= $.id %}\" shouldPublishMarkDirty=\"false\" style=\"height:{%= $.height %};width:100%;\" ></div>"]);return _2b69.apply(_2b68);};Sage.UI.widgetEditorLookup=_2b5d;return _2b5d;});},"Sage/UI/Dashboard/ChartingTheme":function(){define(["dojox/charting/Theme","dojox/charting/themes/common"],function(Theme){var _2b6a=dojox.charting.themes;_2b6a.Julie=new Theme({seriesThemes:[{fill:"#005bb8",stroke:{color:"#005bb8"}},{fill:"#d5000e",stroke:{color:"#d5000e"}},{fill:"#157a13",stroke:{color:"#157a13"}},{fill:"#f96089",stroke:{color:"#f96089"}},{fill:"#47b2f0",stroke:{color:"#47b2f0"}},{fill:"#4fb521",stroke:{color:"#4fb521"}},{fill:"#ff8400",stroke:{color:"#ff8400"}},{fill:"#ffb8bd",stroke:{color:"#ffb8bd"}},{fill:"#bce8fc",stroke:{color:"#bce8fc"}},{fill:"#bff485",stroke:{color:"#bff485"}},{fill:"#ff8400",stroke:{color:"#ff8400"}},],chart:{fontColor:"#b3b3b3",font:"normal normal normal 8pt Helvetica, Arial, sans-serif"},series:{stroke:{width:2,color:"#b3b3b3"},position:"center",font:"normal normal normal 8pt Helvetica, Arial, sans-serif",fontColor:"#b3b3b3"},axis:{tick:{color:"#b3b3b3",outline:null,font:"normal normal normal 8pt Helvetica, Arial, sans-serif",fontColor:"#b3b3b3"}},});_2b6a.Julie.next=function(_2b6b,mixin,_2b6c){var s,theme;if(_2b6b==="line"||_2b6b==="area"){s=this.seriesThemes[this._current%this.seriesThemes.length];s.fill.space="plot";s.stroke.color="#005bb8";theme=Theme.prototype.next.apply(this,arguments);s.fill.space="shape";return theme;}if(_2b6b==="column"||_2b6b==="bar"){s=this.seriesThemes[this._current%this.seriesThemes.length];s.stroke.color="#fff";theme=Theme.prototype.next.apply(this,arguments);return theme;}else{s=this.seriesThemes[this._current%this.seriesThemes.length];return Theme.prototype.next.apply(this,arguments);}};_2b6a.Julie.post=function(theme,_2b6d){theme=Theme.prototype.post.apply(this,arguments);return theme;};return _2b6a.Julie;});},"Sage/UI/Alarms/main":function(){define(["Sage/UI/Alarms/ActivityAlarm","Sage/UI/Alarms/AlarmButton","Sage/UI/Alarms/AlarmCountDown","Sage/UI/Alarms/AlarmPane","Sage/UI/Alarms/AlarmPopup","Sage/UI/Alarms/AlertPane","Sage/UI/Alarms/UnconfirmedAlarm","Sage/UI/Alarms/UnconfirmedPane","Sage/UI/Alarms/JobNotificationButton","Sage/UI/Alarms/JobNotificationPopup"],function(){});},"Sage/UI/Alarms/ActivityAlarm":function(){define(["Sage/_Templated","dijit/_Widget","dijit/form/CheckBox","Sage/Utility/Activity","Sage/UI/Alarms/AlarmCountDown","Sage/Link","Sage/UI/Controls/EntityInfoToolTip","dojo/i18n","dojo/i18n!./nls/ActivityAlarm","dojo/_base/declare"],function(_2b6e,_2b6f,_2b70,_2b71,_2b72,link,_2b73,i18n,_2b74,_2b75){var _2b76=_2b75("Sage.UI.Alarms.ActivityAlarm",[_2b6f,_2b6e],{widgetsInTemplate:true,userActivity:null,selected:false,key:"",_tooltips:[],widgetTemplate:new Simplate(["<div class=\"alarm-item\">","<table style=\"width:100%\" dojoAttachPoint=\"_item\" dojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">","<col width=\"50px\" />","<col width=\"50%\" />","<col width=\"50%\" />","<col width=\"80px\" />","<tr>","{% var imageClass = Sage.Utility.Activity.getActivityImageClass($.userActivity.Activity.Type, \"medium\"); %}","<td class=\"alarm-icon\">","<div class=\"dijitIcon dijitMenuItemIcon Global_Images icon24x24 {%= imageClass %}\" title=\"{%= $.cleanText($.userActivity.Activity.Description) %}\"></div>","<input type=\"checkbox\" data-dojo-type=\"dijit.form.CheckBox\" size=\"30px\" dojoAttachPoint=\"_checkbox\" />","</td>","<td class=\"alarm-content\">","{% var desc = $.userActivity.Activity.Description;if (!desc) { desc = Sage.Utility.Activity.getActivityTypeName($.userActivity.Activity.Type); } %}","<div class=\"alarm-description\">","{% if ($.userActivity.Activity.Recurring) { %}<div class=\"Global_Images icon16x16 icon_recurring\" title=\"{%= $.recurringText %}\" > </div>&nbsp;&nbsp;{% } %}","{% if ($.userActivity.Status === \"asUnconfirmed\") { %}","<a href=\"javascript:Sage.Link.confirmActivityFor('{%= $.userActivity.Activity.$key %}', '{%= $.userActivity.User.$key %}')\">{%= desc %}</a>","{% } else { %}","<a href=\"javascript:Sage.Link.editActivity('{%= $.userActivity.Activity.$key %}', {%= $.userActivity.Activity.Recurring %})\">{%= desc %}</a>","{% } %}","</div>","<div>{%= Sage.Utility.Activity.formatActivityStartDate($.userActivity.Activity.StartDate) %}</div>","{% if (($.userActivity.Activity.LeadId) && ($.userActivity.Activity.LeadId.trim() !== \"\")) { %}","<div id=\"{%= $.userActivity.Activity.$key %}_lead\" dojoAttachPoint=\"_leadnode\">","{%= $.leadText %}: <a href=\"lead.aspx?entityid={%= $.userActivity.Activity.LeadId %}\">{%= $.userActivity.Activity.LeadName %}</a>","</div>","{% if ($.userActivity.Activity.AccountName !== \"\") { %}","<div>{%= $.companyText %}: {%= $.userActivity.Activity.AccountName %}</div>","{% } %}","{% } else { %}","{% if ($.userActivity.Activity.ContactName !== \"\") { %}","<div id=\"{%= $.userActivity.Activity.$key %}_con\" dojoAttachPoint=\"_connode\">","{%= $.contactText %}: <a href=\"Contact.aspx?entityid={%= $.userActivity.Activity.ContactId %}\">{%= $.userActivity.Activity.ContactName %}</a>","</div>","{% } %}","{% if ($.userActivity.Activity.AccountName !== \"\") { %}","<div id=\"{%= $.userActivity.Activity.$key %}_acc\" dojoAttachPoint=\"_accnode\">","{%= $.accountText %}: <a href=\"Account.aspx?entityid={%= $.userActivity.Activity.AccountId %}\">{%= $.userActivity.Activity.AccountName %}</a>","</div>","{% } %}","{% } %}","</td><td class=\"alarm-content\">","{% if ($.userActivity.Activity.Location) { %}","<div id=\"{%= $.userActivity.Activity.$key %}_Location\" dojoAttachPoint=\"_location\">","{%= $.locationText %}: {%= $.userActivity.Activity.Location %}&nbsp;","</div>","{% } %}","{% if ($.userActivity.Activity.OpportunityName) { %}","<div id=\"{%= $.userActivity.Activity.$key %}_opp\" dojoAttachPoint=\"_oppnode\">","{%= $.opportunityText %}: <a href=\"Opportunity.aspx?entityid={%= $.userActivity.Activity.OpportunityId %}\">{%= $.userActivity.Activity.OpportunityName %}</a>","</div>","{% } %}","{% if ($.userActivity.Activity.TicketNumber) { %}","<div id=\"{%= $.userActivity.Activity.$key %}_tick\" dojoAttachPoint=\"_ticknode\">","{%= $.ticketText %}: <a href=\"Ticket.aspx?entityid={%= $.userActivity.Activity.TicketId %}\">{%= $.userActivity.Activity.TicketNumber %}</a>","</div>","{% } %}","</td>","<td class=\"alarm-countdownContainer\">","<div data-dojo-type=\"Sage.UI.Alarms.AlarmCountDown\" startDate=\"{%= $.userActivity.Activity.StartDate %}\"></div>","</td>","</tr>","</table>","</div>"]),constructor:function(){dojo.mixin(this,_2b74);},postCreate:function(){this.inherited(arguments);this._checkbox.set("checked",this.selected);this._setupTooltips();},_setUserActivityAttr:function(ua){this.userActivity=ua;this.key=ua["$key"];},_setupTooltips:function(){if(this.userActivity.Activity.AccountName!==""){this._tooltips.push(new _2b73({connectId:this._accnode,position:["below"],entityName:"accounts",entityId:this.userActivity.Activity.AccountId}));}if(this.userActivity.Activity.ContactName!==""){this._tooltips.push(new _2b73({connectId:this._connode,position:["below"],entityName:"contacts",entityId:this.userActivity.Activity.ContactId}));}if(this.userActivity.Activity.LeadName!==""){this._tooltips.push(new _2b73({connectId:this._leadnode,position:["below"],entityName:"leads",entityId:this.userActivity.Activity.LeadId}));}},closeTooltips:function(){for(var i=0;i<this._tooltips.length;i++){this._tooltips[i].close();}},cleanText:function(str){if(!str){return "";}var _2b77=new RegExp("[/:\"*?<>|\r\n'\"`]+","g");return str.replace(_2b77,"");},_onHover:function(){dojo.addClass(this.domNode,"alarm-item-hover");},_onUnhover:function(){dojo.removeClass(this.domNode,"alarm-item-hover");},_onClick:function(){this.selected=!this.selected;this._checkbox.set("checked",this.selected);this._setSelectedStyle();},_setSelectedAttr:function(_2b78){this.selected=_2b78;this._checkbox.set("checked",this.selected);this._setSelectedStyle();},_getSelectedAttr:function(){return this.selected;},_setSelectedStyle:function(){if(this.selected){dojo.addClass(this.domNode,"alarm-item-selected");}else{dojo.removeClass(this.domNode,"alarm-item-selected");}}});return _2b76;});},"Sage/UI/Alarms/AlarmCountDown":function(){define(["Sage/_Templated","dijit/_Widget","Sage/Utility","dojo/date","dojo/html","dojo/i18n","dojo/i18n!./nls/AlarmCountDown","dojo/_base/declare"],function(_2b79,_2b7a,_2b7b,_2b7c,_2b7d,i18n,_2b7e,_2b7f){var _2b80=_2b7f("Sage.UI.Alarms.AlarmCountDown",[_2b7a,_2b79],{widgetsInTemplate:false,startDate:"",_isOverdue:false,_timer:false,widgetTemplate:new Simplate(["<div>","<div dojoAttachPoint=\"_startsIn\"></div>","<div>","<span dojoAttachPoint=\"_countDownAmount\" class=\"alarm-countdown\"></span>","<span dojoAttachPoint=\"_countDownTimeFrame\"></span>","</div>","<div dojoAttachPoint=\"_countDown2\">","<span dojoAttachPoint=\"_countDown2Amount\" class=\"alarm-countdown\"></span>","<span dojoAttachPoint=\"_countDown2TimeFrame\"></span>","</div>","</div>"]),constructor:function(){dojo.mixin(this,_2b7e);},postCreate:function(){this.inherited(arguments);var c=_2b7b.Convert;if(c.isDateString(this.startDate)){this.startDate=c.toDateFromString(this.startDate);}if(!this.startDate){return;}this._calculate();},_calculate:function(){var n=new Date();var _2b81,_2b82;if(_2b7c.difference(this.startDate,n,"minute")<0){_2b81=n;_2b82=this.startDate;this._isOverdue=false;}else{_2b81=this.startDate;_2b82=n;this._isOverdue=true;}var diff;if(_2b81.getFullYear()===_2b82.getFullYear()&&_2b81.getMonth()===_2b82.getMonth()&&_2b81.getDate()===_2b82.getDate()){diff=_2b7c.difference(_2b81,_2b82,"minute");if(diff<61){this._setUI(diff,(diff>1)?this.minutesText:this.minuteText);}else{var _2b83=diff%60;var hours=Math.floor(diff/60);this._setUI(hours,(hours>1)?this.hoursText:this.hourText,_2b83,(_2b83>1)?this.minutesText:this.minuteText);}var self=this;window.setTimeout(function(){self._update();},60000);return;}diff=_2b7c.difference(_2b81,_2b82,"day");if(diff<31){this._setUI(diff,(diff>1)?this.daysText:this.dayText,false,false);return;}diff=_2b7c.difference(_2b81,_2b82,"month");if(diff<13){this._setUI(diff,(diff>1)?this.monthsText:this.monthText,false,false);return;}diff=_2b7c.difference(_2b81,_2b82,"year");this._setUI(diff,(diff>1)?this.yearsText:this.yearText);},_setUI:function(amt,_2b84,amt2,_2b85){if(amt!==0){_2b7d.set(this._startsIn,(this._isOverdue)?this.overduebyText:this.startsInText);_2b7d.set(this._countDownAmount," "+amt+" ");if(amt2){_2b7d.set(this._countDown2Amount," "+amt2+" ");dojo.removeClass(this._countDown2,"display-none");}else{dojo.addClass(this._countDown2,"display-none");}}else{_2b7d.set(this._startsIn,"");_2b7d.set(this._countDownAmount,"");_2b84=this.startsNowText;}_2b7d.set(this._countDownTimeFrame,_2b84);if(_2b85){_2b7d.set(this._countDown2TimeFrame,_2b85);}if(this._isOverdue){dojo.addClass(this.domNode,"overdue-alarm");}else{dojo.removeClass(this.domNode,"overdue-alarm");}},_update:function(){this._calculate();},destroy:function(){if(this._timer){window.clearTimeout(this._timer);}this.inherited(arguments);}});return _2b80;});},"Sage/UI/Alarms/AlarmButton":function(){define(["dojo/_base/declare","Sage/_Templated","dijit/_Widget","Sage/Utility","Sage/Utility/Activity","dojo/string","dojox/storage/LocalStorageProvider","dojo/date","dijit/form/ComboButton","dojo/_base/event","dojo/_base/lang","dojo/dom-class","Sage/Data/SDataServiceRegistry","dojo/i18n","dojo/i18n!./nls/AlarmButton","Sage/UI/Alarms/AlarmPopup","Sage/UI/ImageButton","Sage/Services/UserOptions"],function(_2b86,_2b87,_2b88,_2b89,_2b8a,_2b8b,_2b8c,ddate,_2b8d,event,lang,_2b8e,_2b8f,i18n,_2b90){var _2b91=_2b86("Sage.UI.Alarms.AlarmButton",[_2b88,_2b87],{pastDueToolTipFmt:" You have ${0} activities that are past due.",pastDueButtonIconClass:"fa fa-exclamation-circle",widgetsInTemplate:true,options:{displayPastDueInToolbar:true,displayAlertsInToolbar:true,promptAlerts:true,includeAlarms:true,includeConfirmations:true,defaultSnooze:"5"},pollInterval:1,_localStore:null,_alertCountKey:"AlertsCount",_pastDueCountKey:"PastDueCount",_started:false,_pastDueVisible:false,_alertBtnVisible:false,widgetTemplate:new Simplate(["<span class=\"alarm-button-container\">","<button data-dojo-type=\"Sage.UI.ImageButton\" id=\"pastDueButton\" imageClass=\"{%= $.pastDueButtonIconClass %}\" class=\"past-due-button display-none\" data-dojo-attach-point=\"_pastDueBtn\" data-dojo-attach-event=\"onClick:_pastDueClick\" >","</button>","<span id=\"alertButton\" data-dojo-attach-point=\"_alertButton\" class=\"alarm-button-container alarm-button display-none\">","<span class=\"position-alarm-button\">","<i class=\"fa fa-bell-o\"></i>","</span>","<button data-dojo-type=\"dijit.form.ComboButton\" data-dojo-attach-point=\"_button\" data-dojo-attach-event=\"onClick:_cboClick\" class=\"\" >","<div data-dojo-type=\"Sage.UI.Alarms.AlarmPopup\" id=\"alarmPopup\" data-dojo-attach-point=\"_popup\" data-dojo-attach-event=\"onClose:_popupClosed\"></div>","</button>","</span>","</span>"]),constructor:function(){dojo.mixin(this,_2b90);},_setPollIntervalAttr:function(val){this.pollInterval=val;},_getPollIntervalAttr:function(){return this.pollInterval;},startup:function(){if(this._started){return;}this.inherited(arguments);this.connect(this._popup,"onAlertChanged",this._alarmChanged);var _2b92=Sage.Services.getService("UserOptions");if(_2b92){_2b92.getByCategory("ActivityAlarm",this._receivedOptions,this);}this._localStore=new _2b8c();this._localStore.initialize();if(this._button.valueNode){this.connect(this._button.valueNode,"click",function(e){event.stop(e);});}},_receivedOptions:function(_2b93){this._sortOptions(_2b93["$resources"]||_2b93);this._popup.set("options",this.options);if((this.options.displayPastDueInToolbar||this.options.displayAlertsInToolbar)&&(this.pollInterval>0)){var self=this;window.setTimeout(function(){self._poll();},15000);this._initializeButton();}this._started=true;},_sortOptions:function(_2b94){var _2b95=function(_2b96){return ((_2b96==="T")||(_2b96==="Y")||(_2b96==="1"));};for(var i=0;i<_2b94.length;i++){var _2b97=_2b94[i];switch(_2b97.name){case "DisplayPastDueInToolbar":this.options.displayPastDueInToolbar=_2b95(_2b97.value);break;case "DisplayAlertsInToolbar":this.options.displayAlertsInToolbar=_2b95(_2b97.value);break;case "PromptAlerts":this.options.promptAlerts=_2b95(_2b97.value);break;case "DisplayAlertAlarms":this.options.includeAlarms=_2b95(_2b97.value);break;case "DisplayAlertConfirmations":this.options.includeConfirmations=_2b95(_2b97.value);break;case "DefaultSnooze":this.options.defaultSnooze=_2b97.value;break;}}if(!this.options.includeAlarms&&!this.options.includeConfirmations){this.options.promptAlerts=false;}},_poll:function(){var req=new Sage.SData.Client.SDataNamedQueryRequest(_2b8f.getSDataService("mashups")).setApplicationName("$app").setResourceKind("mashups").setQueryName("execute").setQueryArg("_resultName","GetCounts").setQueryArg("_beforeDate",_2b89.Convert.toIsoStringFromDate(new Date())).setQueryArg("_timelessBeforeDate",_2b8a.formatTimelessEndDate(new Date(),"day",-1)).setQueryArg("_userId",_2b89.getClientContextByKey("userID"));req.uri.setCollectionPredicate("'RemindersAndAlarms'");req.read({success:lang.hitch(this,this._onReceiveCounts),failure:lang.hitch(this,this._countsFailed)});},_onReceiveCounts:function(data){var _2b98=data["$resources"];if(_2b98&&_2b98.length>0){var _2b99=_2b98[0];var _2b9a=(this.options.includeAlarms)?_2b99["ringingAlarms"]:0;var confs=(this.options.includeConfirmations)?_2b99["notifications"]:0;var _2b9b=_2b99["pastDue"];this._handlePastDueCount(_2b9b);this._handleAlertCount(_2b9a,confs);}var self=this;window.setTimeout(function(){self._poll();},this.pollInterval*60000);},_countsFailed:function(req){},_handlePastDueCount:function(_2b9c){if(_2b9c>0&&this.options.displayPastDueInToolbar){this._showPastDue();var _2b9d=this._getFromSessionStorage(this._pastDueCountKey)||0;if(_2b9c!=_2b9d){this._pastDueBtn.set("title",_2b8b.substitute(this.pastDueToolTipFmt,[_2b9c]));this._pastDueBtn.set("label",_2b9c);this._saveToSessionStorage(this._pastDueCountKey,_2b9c);}}else{this._hidePastDue();}},_showPastDue:function(){if(!this._pastDueVisible){_2b8e.remove(this._pastDueBtn.domNode,"display-none");this._pastDueVisible=true;}},_hidePastDue:function(){if(this._pastDueVisible){_2b8e.add(this._pastDueBtn.domNode,"display-none");this._pastDueVisible=false;this._pastDueBtn.set("title","");this._pastDueBtn.set("label","");}},_pastDueClick:function(){Sage.Link.toActivityListView("pastdue");},_initializeButton:function(){var _2b9e=this._getFromSessionStorage(this._pastDueCountKey)||0;if(this.options.displayPastDueInToolbar&&(_2b9e)>0){this._showPastDue();this._pastDueBtn.set("title",_2b8b.substitute(this.pastDueToolTipFmt,[_2b9e]));this._pastDueBtn.set("label",_2b9e);}var _2b9f=this._getFromSessionStorage(this._alertCountKey)||0;if(this.options.displayAlertsInToolbar&&(_2b9f)>0){this._button.set("label"," "+_2b9f+" ");this._showAlertButton();}},_handleAlertCount:function(_2ba0,confs){if(this.options.displayAlertsInToolbar){if(_2ba0>0||confs>0){var _2ba1=false;var _2ba2=this._getFromSessionStorage(this._alertCountKey)||0;if((_2ba2*1)!==(_2ba0+confs)){_2ba1=true;}_2ba2=_2ba0+confs;this._saveToSessionStorage(this._alertCountKey,_2ba2);this._button.set("label"," "+_2ba2+" ");this._showAlertButton();this._checkShowPopup(_2ba1,_2ba2);}else{this._hideAlertButton();}}},_showAlertButton:function(){if(!this._alertBtnVisible){_2b8e.remove(this._alertButton,"display-none");this._alertBtnVisible=true;}},_hideAlertButton:function(){if(this._alertBtnVisible){_2b8e.add(this._alertButton,"display-none");this._alertBtnVisible=false;}},_checkShowPopup:function(_2ba3,_2ba4){if(!this.options.promptAlerts){return;}if(_2ba3){this._popup._dataRequested=false;}if(!this._popup.isOpen&&_2ba4>0&&_2ba3){this._button.openDropDown();}},_cboClick:function(e){if(this._popup.isOpen){this._button.closeDropDown();}else{this._button.openDropDown();}return false;},_popupClosed:function(){},_alarmChanged:function(){var items=this._popup.getAlertCount();if(items===0){dijit.popup.hide(this._popup);this._hideAlertButton();}else{this._showAlertButton();}this._button.set("label"," "+items+" ");this._saveToSessionStorage(this._alertCountKey,items);},_saveToSessionStorage:function(key,value){sessionStorage.setItem(key,value);},_getFromSessionStorage:function(key){return sessionStorage.getItem(key);}});return _2b91;});},"Sage/UI/Alarms/AlarmPopup":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","dijit/layout/ContentPane","Sage/Data/WritableSDataStore","Sage/Data/SDataServiceRegistry","Sage/Utility","dojo/string","Sage/UI/Alarms/AlarmPane","Sage/UI/Alarms/UnconfirmedPane","Sage/UI/ImageButton","dojo/i18n","dojo/i18n!./nls/AlarmPopup","dojo/_base/declare"],function(_2ba5,_2ba6,_2ba7,_2ba8,_2ba9,_2baa,_2bab,_2bac,_2bad,_2bae,_2baf,i18n,_2bb0,_2bb1){var _2bb2=_2bb1("Sage.UI.Alarms.AlarmPopup",[_2ba7,_2ba5,_2ba6],{options:{displayPastDueInToolbar:true,displayAlertsInToolbar:true,promptAlerts:true,includeAlarms:true,includeConfirmations:true,pollInterval:1,defaultSnooze:"5"},_confirmCount:-1,_alarmCount:-1,_dataRequested:false,widgetsInTemplate:true,isOpen:false,templateString:["<div class=\"alarm-popup\">","<div class=\"alarm-title\"><span class=\"alarm-main-title\">&nbsp;${title}</span></div>","<div class=\"alarm-title\">","<span class=\"alarm-tab-head\">&nbsp;</span>","<span dojoAttachEvent=\"onclick:_showAlarmPane\" dojoAttachPoint=\"_alarmBtn\" class=\"alarm-tab alarm-tab-selected\">${alarmsText}</span>","<span dojoAttachEvent=\"click:_showUnconfirmedPane\" dojoAttachPoint=\"_confBtn\" class=\"alarm-tab\">${unconfirmedText}</span>","<span class=\"alarm-tab-tail\">&nbsp;</span>","<span class=\"alarm-title-tools\">","<span dojoType=\"Sage.UI.ImageButton\" id=\"compButton\" imageClass=\"icon_complete_activity_16x16\" title=\"${completeText}\" dojoAttachEvent=\"onClick:_completeClick\" dojoAttachPoint=\"compButton\"></span>","<span dojoType=\"Sage.UI.ImageButton\" id=\"delButton\" imageClass=\"icon_Delete_16x16\" title=\"${deleteText}\" dojoAttachEvent=\"onClick:_deleteClick\" dojoAttachPoint=\"delButton\"></span>","<span dojoType=\"Sage.UI.ImageButton\" imageClass=\"icon_Help_16x16\" title=\"${helpText}\" dojoAttachEvent=\"onClick:_showHelp\" ></span>","</span>","</div>","<div data-dojo-type=\"dijit.layout.StackContainer\" dojoAttachPoint=\"_panelContainer\" class=\"alarm-body\" >","<div data-dojo-type=\"dijit.layout.ContentPane\" dojoAttachPoint=\"_alarmPane\" class=\"alarm-pane\" title=\"alarms\" >","<div data-dojo-type=\"Sage.UI.Alarms.AlarmPane\" dojoAttachPoint=\"_alarms\" dojoAttachEvent=\"onAlertChanged:_alarmchange\"></div>","</div>","<div data-dojo-type=\"dijit.layout.ContentPane\" dojoAttachPoint=\"_confPane\" class=\"alarm-pane\" title=\"Unconfirmed\">","<div data-dojo-type=\"Sage.UI.Alarms.UnconfirmedPane\" dojoAttachPoint=\"_confirms\" dojoAttachEvent=\"onAlertChanged:_confchange\"></div>","</div>","</div>","</div>"].join(""),constructor:function(){dojo.mixin(this,_2bb0);},_setOptionsAttr:function(_2bb3){this.options=dojo.mixin(this.options,_2bb3);this._alarms.setDefaultSnooze(this.options.defaultSnooze||"5");},_getOptionsAttr:function(){return this.options;},drawAlerts:function(){this._dataRequested=true;if(this.options.includeAlarms){if(!this.alarmStore){this.alarmStore=new _2ba9({service:_2baa.getSDataService("system"),resourceKind:"useractivities",include:["Activity","User","$descriptors"],sort:[{attribute:"Activity.StartDate",descending:true}]});this._alarms.store=this.alarmStore;}this._fetchAlarms();}else{dojo.addClass(this._alarmBtn,"display-none");this._showUnconfirmedPane();}if(this.options.includeConfirmations){if(!this.confirmStore){this.confirmStore=new _2ba9({service:_2baa.getSDataService("dynamic"),resourceKind:"usernotifications",include:["Activity","$descriptors"],select:["Type","Notes","FromUserId","ToUserId","SendDate","Activity/AccountName","Activity/AccountId","Activity/ActivityId","Activity/ContactName","Activity/ContactId","Activity/Description","Activity/Duration","Activity/LeadId","Activity/LeadName","Activity/OpportunityName","Activity/OpportunityId","Activity/Recurring","Activity/StartDate","Activity/Timeless","Activity/Type","Activity/Location","Activity/Leader","Activity/TicketId","Activity/TicketNumber"],sort:[{attribute:"Activity.StartDate",descending:true}]});this._confirms.store=this.confirmStore;}this._fetchConfirms();}else{dojo.addClass(this._confBtn,"display-none");this._showAlarmPane();}},_fetchAlarms:function(){if(this.options.includeAlarms&&this.alarmStore){var where=_2bac.substitute("(User.Id eq '${0}' and Status ne 'asDeclned') and ((Alarm eq true and AlarmTime ne null and AlarmTime lt '${1}') or (Alarm eq null and AlarmTime eq null and Activity.Alarm eq true and Activity.AlarmTime lt '${1}'))",[_2bab.getClientContextByKey("userID"),_2bab.Convert.toIsoStringFromDate(new Date())]);this.alarmStore.fetch({query:where,count:80,start:0,onComplete:this._onAlarmRequestComplete,scope:this});}},_fetchConfirms:function(){if(this.options.includeConfirmations&&this.confirmStore){this.confirmStore.fetch({query:_2bac.substitute("ToUserId eq '${0}' and Type eq 'New'",[_2bab.getClientContextByKey("userID")]),count:40,start:0,onComplete:this._onConfirmRequestComplete,scope:this});}},_onAlarmRequestComplete:function(data){this._alarms._setAlertItemsAttr(data,this.isOpen);this._alarmCount=data.length;this._checkWhichVisible();},_onConfirmRequestComplete:function(data){this._confirms._setAlertItemsAttr(data,this.isOpen);this._confirmCount=data.length;this._checkWhichVisible();},_checkWhichVisible:function(){if(this._alarmCount>0&&this.options.includeAlarms){this._showAlarmPane();}else{if(this._alarmCount===0&&this._confirmCount>0&&this.options.includeConfirmations){this._showUnconfirmedPane();}}},_alarmchange:function(count){dojo.html.set(this._alarmBtn,this.alarmsText+" ("+count+") ");this._alarmCount=count;if(count<1){this._checkWhichVisible();}this.onAlertChanged();},_confchange:function(count){dojo.html.set(this._confBtn,this.unconfirmedText+" ("+count+") ");this._confirmCount=count;if(count<1){this._checkWhichVisible();}this.onAlertChanged();},onOpen:function(){this.isOpen=true;this._panelContainer.resize();if(!this._dataRequested){this.drawAlerts();}else{this._checkWhichVisible();}},onClose:function(){this.isOpen=false;this._alarms.closeTooltips();this._confirms.closeTooltips();},startup:function(){this.inherited(arguments);dojo.subscribe("/entity/activity/delete",this,this.reloadData);},reloadData:function(){this._fetchAlarms();this._fetchConfirms();},reloadAlarms:function(){this._fetchAlarms();},reloadConfirms:function(){this._fetchConfirms();},_showAlarmPane:function(){this._panelContainer.selectChild(this._alarmPane);dojo.addClass(this._alarmBtn,"alarm-tab-selected");dojo.removeClass(this._confBtn,"alarm-tab-selected");dojo.removeClass(this.compButton.domNode,"display-none");dojo.removeClass(this.delButton.domNode,"display-none");this._alarms.onShow();},_showUnconfirmedPane:function(){this._panelContainer.selectChild(this._confPane);dojo.removeClass(this._alarmBtn,"alarm-tab-selected");dojo.addClass(this._confBtn,"alarm-tab-selected");dojo.addClass(this.compButton.domNode,"display-none");dojo.addClass(this.delButton.domNode,"display-none");this._confirms.onShow();},_completeClick:function(){this._alarms.completeSelected();},_deleteClick:function(){this._alarms.deleteSelected();},_showHelp:function(){_2bab.openHelp("alerts");},getAlertCount:function(){return this._alarms.getUnhandledAlertCount()+this._confirms.getUnhandledAlertCount();},onAlertChanged:function(){},onChange:function(){}});return _2bb2;});},"Sage/UI/Alarms/AlarmPane":function(){define(["dijit/form/Button","dijit/form/FilteringSelect","dojo/date","Sage/Utility","Sage/UI/Alarms/AlertPane","Sage/UI/Alarms/ActivityAlarm","dojo/i18n","dojo/i18n!./nls/AlarmPane","dojo/_base/declare","dojo/topic"],function(_2bb4,_2bb5,_2bb6,_2bb7,_2bb8,_2bb9,i18n,_2bba,_2bbb,topic){var _2bbc=_2bbb("Sage.UI.Alarms.AlarmPane",_2bb8,{defaultSnooze:"5",_snoozeButton:false,templateString:["<div>","<div class=\"alarm-items-contents\" dojoAttachPoint=\"_alertContents\"></div>","<div class=\"alarm-snoozebar\" dojoAttachPoint=\"_snoozebar\">","<table>","<tr>","<td colspan=\"2\" class=\"dismissActions\">","<button data-dojo-type=\"dijit.form.Button\" type=\"button\" dojoAttachEvent=\"onClick:_dismissSelected\">${dismissText}</button>","<button data-dojo-type=\"dijit.form.Button\" type=\"button\" dojoAttachEvent=\"onClick:_dismissAll\">${dismissAllText}</button>","</td>","<td colspan=\"2\" class=\"calendar-link\">","<a href=\"calendar.aspx\" title=\"${showCalendarText}\">${showCalendarText}</a>","</td>","</tr><tr>","<td class=\"snoozeText\">${snoozeByText}</td>","<td colspan=\"2\" class=\"snoozeBy\">","<select name=\"selectSnoozeBy\" dojoAttachPoint=\"_selSnoozeBy\" data-dojo-type=\"dijit.form.FilteringSelect\">","<option value=\"5\" {% if ($.defaultSnooze == 5) { %} selected=\"selected\" {% } %}>${fiveMinText}</option>","<option value=\"10\" {% if ($.defaultSnooze == 10) { %} selected=\"selected\" {% } %}>${tenMinText}</option>","<option value=\"15\" {% if ($.defaultSnooze == 15) { %} selected=\"selected\" {% } %}>${fifteenMinText}</option>","<option value=\"30\" {% if ($.defaultSnooze == 30) { %} selected=\"selected\" {% } %}>${thirtyMinText}</option>","<option value=\"60\" {% if ($.defaultSnooze == 60) { %} selected=\"selected\" {% } %}>${oneHourText}</option>","<option value=\"120\" {% if ($.defaultSnooze == 120) { %} selected=\"selected\" {% } %}>${twoHourText}</option>","<option value=\"240\" {% if ($.defaultSnooze == 240) { %} selected=\"selected\" {% } %}>${fourHourText}</option>","<option value=\"480\" {% if ($.defaultSnooze == 480) { %} selected=\"selected\" {% } %}>${eightHourText}</option>","<option value=\"1440\" {% if ($.defaultSnooze == 1440) { %} selected=\"selected\" {% } %}>${oneDayText}</option>","<option value=\"2880\" {% if ($.defaultSnooze == 2880) { %} selected=\"selected\" {% } %}>${twoDayText}</option>","<option value=\"4320\" {% if ($.defaultSnooze == 4320) { %} selected=\"selected\" {% } %}>${threeDayText}</option>","<option value=\"10080\" {% if ($.defaultSnooze == 10080) { %} selected=\"selected\" {% } %}>${oneWeekText}</option>","<option value=\"20160\" {% if ($.defaultSnooze == 20160) { %} selected=\"selected\" {% } %}>${twoWeekText}</option>","</select>","</td>","<td class=\"snoozeActions\">","<button data-dojo-type=\"dijit.form.Button\" type=\"button\" dojoAttachEvent=\"onClick:_snooze\" dojoAttachPoint=\"_snoozeButton\">${snoozeText}</button>","<button data-dojo-type=\"dijit.form.Button\" type=\"button\" dojoAttachEvent=\"onClick:_snoozeAll\">${snoozeAllText}</button>","</td>","</tr>","</table>","</div>","</div>"].join(""),constructor:function(){dojo.mixin(this,_2bba);},_durByText:false,_textByDur:false,onShow:function(){this._snoozeButton.focus();},setDefaultSnooze:function(_2bbd){this.defaultSnooze=_2bbd;this._setSnoozeSelect(_2bbd);},_addAlert:function(item){if(this._alarmRinging(item)){var _2bbe=new _2bb9({userActivity:item,selected:this.selectedAlerts.hasOwnProperty(item["$key"])});this.alertWidgets.push(_2bbe);dojo.place(_2bbe.domNode,this._alertContents);}},_alarmRinging:function(_2bbf){var n=new Date();var _2bc0;var alarm;if((_2bbf.Alarm===null)&&(_2bbf.AlarmTime===null)){_2bc0=_2bb7.Convert.toDateFromString(_2bbf.Activity.AlarmTime);alarm=_2bbf.Activity.Alarm;_2bbf.Alarm=alarm;_2bbf.AlarmTime=_2bbf.Activity.AlarmTime;}else{_2bc0=_2bb7.Convert.toDateFromString(_2bbf.AlarmTime);alarm=_2bbf.Alarm;}return (alarm&&(_2bb6.compare(_2bc0,n)<1));},_snooze:function(){for(var i=0;i<this.alertWidgets.length;i++){var wid=this.alertWidgets[i];if(wid.selected){this._snoozeItem(wid.userActivity);}}this.store.save(this);},_snoozeAll:function(){for(var i=0;i<this.alertWidgets.length;i++){this._snoozeItem(this.alertWidgets[i].userActivity);}this.store.save(this);},_setSnoozeSelect:function(_2bc1){if(!this._textByDur){this._textByDur={"5":this.fiveMinText,"10":this.tenMinText,"15":this.fifteenMinText,"30":this.thirtyMinText,"60":this.oneHourText,"120":this.twoHourText,"240":this.fourHourText,"480":this.eightHourText,"1440":this.oneDayText,"2880":this.twoDayText,"4320":this.threeDayText,"10080":this.oneWeekText,"20160":this.twoWeekText};}this._selSnoozeBy.set("displayedValue",this._textByDur[_2bc1]);this._selSnoozeBy.set("value",_2bc1);},_snoozeItem:function(_2bc2){var _2bc3=this._selSnoozeBy.get("value");var dur=parseInt(_2bc3);var _2bc4=new Date();var _2bc5=_2bb6.add(_2bc4,"minute",dur);this.store.setValue(_2bc2,"AlarmTime",_2bb7.Convert.toIsoStringFromDate(_2bc5));},_dismissAll:function(){for(var i=0;i<this.alertWidgets.length;i++){this._dismissItem(this.alertWidgets[i].userActivity);}this.store.save(this);},_dismissSelected:function(){for(var i=0;i<this.alertWidgets.length;i++){var wid=this.alertWidgets[i];if(wid.selected){this._dismissItem(wid.userActivity);}}this.store.save(this);},_dismissItem:function(_2bc6){this.store.setValue(_2bc6,"Alarm",false);},deleteSelected:function(){var _2bc7=this._makeSelectionContext(false);if(_2bc7){var svc=Sage.Services.getService("ActivityService");if(_2bc7.count===1){var _2bc8=_2bc7.selectionInfo.selections[0].entity;svc.deleteActivity(_2bc8["$key"],_2bc8.Recurring);}else{svc.deleteActivitiesInSelectionContext(_2bc7,this._reloadAlarms,this);}}},_reloadAlarms:function(_2bc9){var _2bca=dijit.byId("alarmPopup");_2bca.reloadAlarms();},completeSelected:function(){var _2bcb=this._makeSelectionContext(false);if(_2bcb){var svc=Sage.Services.getService("ActivityService");var self=this;var _2bcc=topic.subscribe("/entity/activity/bulkComplete",function(_2bcd){self._reloadAlarms();_2bcc.remove();});if(_2bcb.count===1){var _2bce=_2bcb.selectionInfo.selections[0].entity;svc.completeActivity(_2bce["$key"],_2bce.Recurring);}else{svc.completeActivitiesInSelectionContext(_2bcb);}}},_makeSelectionContext:function(_2bcf){var ids=[],sels=[];var len=this.alertWidgets.length-1;for(var i=len;i>-1;i--){var wid=this.alertWidgets[i];if(wid.selected){var id=wid.userActivity.Activity["$key"];ids.push(id);sels.push({rn:0,id:id,entity:wid.userActivity.Activity});if(_2bcf){this.alertWidgets.splice(i,1);wid.destroy();}}}if(ids.length>0){return {count:ids.length,id:null,mode:"select",name:"activities",selectionInfo:{key:"alert",keyField:"$key",mode:"selection",ranges:[],recordCount:ids.length,selectedIds:ids,selectionCount:2,selections:sels,sortDirection:"",sortField:""}};}return false;},onComplete:function(){var len=this.alertWidgets.length-1;for(var i=len;i>-1;i--){var wid=this.alertWidgets[i];if(!this._alarmRinging(wid.userActivity)){this.alertWidgets.splice(i,1);wid.destroy();}}this._alertChanged(this.alertWidgets.length);},getUnhandledAlertCount:function(){var _2bd0=0;for(var i=0;i<this.alertItems.length;i++){if(this._alarmRinging(this.alertItems[i])){_2bd0++;}}return _2bd0;}});return _2bbc;});},"Sage/UI/Alarms/AlertPane":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","dojo/_base/declare"],function(_2bd1,_2bd2,_2bd3,_2bd4){var _2bd5=_2bd4("Sage.UI.Alarms.AlertPane",[_2bd3,_2bd1,_2bd2],{widgetsInTemplate:true,constructor:function(){this.alertItems=[];this.alertWidgets=[];this.store=null;this._drawn=false;this.selectedAlerts={};},onShow:function(){},_hasDifferentItems:function(items){if(items.length!==this.alertWidgets.length){return true;}if(this.alertItems.length===items.length){for(var i=0;i<items.length;i++){if(this.alertItems[i]["$key"]!==items[i]["$key"]){return true;}}return false;}return true;},_setAlertItemsAttr:function(items,_2bd6){if(!this._hasDifferentItems(items)){return;}this.alertItems=items;this._drawn=false;this.selectedAlerts={};var len=this.alertWidgets.length;for(var i=0;i<len;i++){var wid=this.alertWidgets.pop();if(wid.selected){this.selectedAlerts[wid.key]=1;}wid.destroy();}if(len===0&&this.alertItems.length>0){this.selectedAlerts[this.alertItems[0]["$key"]]=1;}this._drawAlerts();this._alertChanged(this.alertWidgets.length);},_ensureOneSelected:function(){var len=this.alertWidgets.length-1;for(var i=0;i<len;i++){if(this.alertWidgets[i].get("selected")){return;}}if(this.alertWidgets.length>0){this.alertWidgets[0].set("selected",true);}},_drawAlerts:function(){if(this._drawn){return;}dojo.html.set(this._alertContents,"");if(this.alertItems){for(var i=0;i<this.alertItems.length;i++){this._addAlert(this.alertItems[i]);}this._drawn=true;}},getUnhandledAlertCount:function(){return this.alertWidgets.length;},_addAlert:function(alert){},closeTooltips:function(){for(var i=0;i<this.alertWidgets.length;i++){this.alertWidgets[i].closeTooltips();}},_alertChanged:function(count){this._ensureOneSelected();this.onAlertChanged(count);},onAlertChanged:function(count){}});return _2bd5;});},"Sage/UI/Alarms/UnconfirmedPane":function(){define(["dijit/form/Button","Sage/UI/Alarms/AlertPane","Sage/UI/Alarms/UnconfirmedAlarm","Sage/Link","dojo/i18n","dojo/i18n!./nls/UnconfirmedPane","dojo/_base/declare"],function(_2bd7,_2bd8,_2bd9,link,i18n,_2bda,_2bdb){var _2bdc=_2bdb("Sage.UI.Alarms.UnconfirmedPane",_2bd8,{showConfirmationsText:"Show Confirmations",showCalendarText:"Show Calendar",acceptText:"Accept",declineText:"Decline",_acceptButton:false,templateString:["<div>","<div class=\"alarm-items-contents\" dojoAttachPoint=\"_alertContents\"></div>","<div class=\"alarm-snoozebar\" dojoAttachPoint=\"_confButtonBar\">","<table style=\"width:100%\">","<tr>","<td class=\"leftTools\"><a href=\"Calendar.aspx\" title=\"${showCalendarText}\">${showCalendarText}</a>","<td class=\"leftTools\"><a href=\"javascript: Sage.Link.toActivityListView('confirmations')\" title=\"${showConfirmationsText}\">${showConfirmationsText}</a></td>","<td class=\"rightTools\">","<button data-dojo-type=\"dijit.form.Button\" type=\"button\" dojoAttachEvent=\"onClick:_acceptSelected\" dojoAttachPoint=\"_acceptButton\">${acceptText}</button>","<button data-dojo-type=\"dijit.form.Button\" type=\"button\" dojoAttachEvent=\"onClick:_declineSelected\">${declineText}</button>","</td>","</tr>","</table>","</div>","</div>"].join(""),constructor:function(){dojo.mixin(this,_2bda);},onShow:function(){this._acceptButton.focus();},_addAlert:function(alert){var _2bdd=new _2bd9({userNotification:alert,selected:this.selectedAlerts.hasOwnProperty(alert["$key"])});this.alertWidgets.push(_2bdd);dojo.place(_2bdd.domNode,this._alertContents);},_acceptSelected:function(){var len=this.alertWidgets.length-1;for(var i=len;i>-1;i--){var wid=this.alertWidgets[i];if(wid.selected){var _2bde=Sage.Services.getService("ActivityService");_2bde.acceptConfirmation({notification:wid.userNotification,success:this.onPostSuccess,failure:function(){this._alertChanged(this.alertWidgets.length);},scope:this});this.alertWidgets.splice(i,1);wid.destroy();}}},_declineSelected:function(){var len=this.alertWidgets.length-1;for(var i=len;i>-1;i--){var wid=this.alertWidgets[i];if(wid.selected){var _2bdf=Sage.Services.getService("ActivityService");_2bdf.declineConfirmation({notification:wid.userNotification,success:this.onPostSuccess,failure:function(){this._alertChanged(this.alertWidgets.length);},scope:this});this.alertWidgets.splice(i,1);wid.destroy();}}},getUnhandledAlertCount:function(){return this.alertWidgets.length;},onPostSuccess:function(){this._alertChanged(this.alertWidgets.length);}});return _2bdc;});},"Sage/UI/Alarms/UnconfirmedAlarm":function(){define(["Sage/_Templated","dijit/_Widget","dijit/form/CheckBox","Sage/Utility/Activity","Sage/UI/Alarms/AlarmCountDown","Sage/Link","Sage/UI/Controls/EntityInfoToolTip","dojo/i18n","dojo/i18n!./nls/ActivityAlarm","dojo/_base/declare"],function(_2be0,_2be1,_2be2,_2be3,_2be4,link,_2be5,i18n,_2be6,_2be7){var _2be8=_2be7("Sage.UI.Alarms.UnconfirmedAlarm",[_2be1,_2be0],{widgetsInTemplate:true,userNotification:null,selected:false,key:"",_tooltips:[],widgetTemplate:new Simplate(["<div class=\"alarm-item\">","<table style=\"width:100%\" dojoAttachPoint=\"_item\" dojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">","<col width=\"50px\" />","<col width=\"50%\" />","<col width=\"50%\" />","<tr>","{% var imageClass = Sage.Utility.Activity.getActivityImageClass($.userNotification.Activity.Type, \"medium\"); %}","<td class=\"alarm-icon\">","<div class=\"dijitIcon dijitMenuItemIcon Global_Images icon24x24 {%= imageClass %}\" title=\"{%= $.cleanText($.userNotification.Activity.Description) %}\"></div>","<input type=\"checkbox\" data-dojo-type=\"dijit.form.CheckBox\" size=\"30px\" dojoAttachPoint=\"_checkbox\" />","</td>","<td class=\"alarm-content\">","{% var desc = $.userNotification.Activity.Description;if (!desc) { desc = Sage.Utility.Activity.getActivityTypeName($.userNotification.Activity.Type); } %}","<div class=\"alarm-description\">","{% if ($.userNotification.Activity.Recurring) { %}<div class=\"Global_Images icon16x16 icon_recurring\" title=\"{%= $.recurringText %}\" > </div>&nbsp;&nbsp;{% } %}","<a href=\"javascript:Sage.Link.editConfirmation('{%= $.userNotification.$key %}')\">{%= desc %}</a>","</div>","<div>{%= Sage.Utility.Activity.formatActivityStartDate($.userNotification.Activity.StartDate) %}</div>","<div>{%= $.leaderText %}: {%= $.userNotification.Activity.Leader.$descriptor %}</div>","{% if (($.userNotification.Activity.LeadId) && ($.userNotification.Activity.LeadId.trim() !== \"\")) { %}","<div id=\"{%= $.userNotification.Activity.$key %}_lead\" dojoAttachPoint=\"_leadnode\">","{%= $.leadText %}: <a href=\"Lead.aspx?entityid={%= $.userNotification.Activity.LeadId %}\">{%= $.userNotification.Activity.LeadName %}</a>","</div>","{% if ($.userNotification.Activity.AccountName !== \"\") { %}","<div>{%= $.companyText %}: {%= $.userNotification.Activity.AccountName %}</div>","{% } %}","{% } else { %}","{% if ($.userNotification.Activity.ContactName !== \"\") { %}","<div id=\"{%= $.userNotification.Activity.$key %}_con\" dojoAttachPoint=\"_connode\">","{%= $.contactText %}: <a href=\"Contact.aspx?entityid={%= $.userNotification.Activity.ContactId %}\">{%= $.userNotification.Activity.ContactName %}</a>","</div>","{% } %}","{% if ($.userNotification.Activity.AccountName !== \"\") { %}","<div id=\"{%= $.userNotification.Activity.$key %}_acc\" dojoAttachPoint=\"_accnode\">","{%= $.accountText %}: <a href=\"Account.aspx?entityid={%= $.userNotification.Activity.AcountId %}\">{%= $.userNotification.Activity.AccountName %}</a>","</div>","{% } %}","{% } %}","</td><td class=\"alarm-content\">","{% if ($.userNotification.Activity.Location) { %}","<div id=\"{%= $.userNotification.Activity.$key %}_Location\" dojoAttachPoint=\"_location\">","{%= $.locationText %}: {%= $.userNotification.Activity.Location %}&nbsp;","</div>","{% } %}","{% if ($.userNotification.Activity.OpportunityName) { %}","<div id=\"{%= $.userNotification.Activity.$key %}_opp\" dojoAttachPoint=\"_oppnode\">","{%= $.opportunityText %}: <a href=\"Opportunity.aspx?entityid={%= $.userNotification.Activity.OpportunityId %}\">{%= $.userNotification.Activity.OpportunityName %}</a>","</div>","{% } %}","{% if ($.userNotification.Activity.TicketNumber) { %}","<div id=\"{%= $.userNotification.Activity.$key %}_tick\" dojoAttachPoint=\"_ticknode\">","{%= $.ticketText %}: <a href=\"Ticket.aspx?entityid={%= $.userNotification.Activity.TicketId %}\">{%= $.userNotification.Activity.TicketNumber %}</a>","</div>","{% } %}","</td>","</tr>","</table>","</div>"]),constructor:function(){dojo.mixin(this,_2be6);},postCreate:function(){this.inherited(arguments);this._checkbox.set("checked",this.selected);this._setupTooltips();},_setuserNotificationAttr:function(un){this.userNotification=un;this.key=un["$key"];},_setupTooltips:function(){if(this.userNotification.Activity.AccountName!==""){this._tooltips.push(new _2be5({connectId:this._accnode,position:["below"],entityName:"accounts",entityId:this.userNotification.Activity.AccountId}));}if(this.userNotification.Activity.ContactName!==""){this._tooltips.push(new _2be5({connectId:this._connode,position:["below"],entityName:"contacts",entityId:this.userNotification.Activity.ContactId}));}if(this.userNotification.Activity.LeadName!==""){this._tooltips.push(new _2be5({connectId:this._leadnode,position:["below"],entityName:"leads",entityId:this.userNotification.Activity.LeadId}));}},closeTooltips:function(){for(var i=0;i<this._tooltips.length;i++){this._tooltips[i].close();}},cleanText:function(str){if(!str){return "";}var _2be9=new RegExp("[/:\"*?<>|\r\n'\"`]+","g");return str.replace(_2be9,"");},_onHover:function(){dojo.addClass(this.domNode,"alarm-item-hover");},_onUnhover:function(){dojo.removeClass(this.domNode,"alarm-item-hover");},_onClick:function(){this.selected=!this.selected;this._checkbox.set("checked",this.selected);this._setSelectedStyle();},_setSelectedAttr:function(_2bea){this.selected=_2bea;this._checkbox.set("checked",this.selected);this._setSelectedStyle();},_getSelectedAttr:function(){return this.selected;},_setSelectedStyle:function(){if(this.selected){dojo.addClass(this.domNode,"alarm-item-selected");}else{dojo.removeClass(this.domNode,"alarm-item-selected");}}});return _2be8;});},"Sage/UI/Alarms/JobNotificationButton":function(){define(["dojo/_base/declare","Sage/_Templated","dijit/_Widget","Sage/Utility","dojo/string","Sage/Data/SDataStore","dijit/form/ComboButton","dojo/i18n!./nls/JobNotificationButton","dojo/_base/event","dojo/_base/lang","dojo/dom-class","Sage/UI/Alarms/JobNotificationPopup","Sage/UI/ImageButton","Sage/Services/UserOptions"],function(_2beb,_2bec,_2bed,_2bee,_2bef,_2bf0,_2bf1,_2bf2,event,lang,_2bf3){var _2bf4=_2beb("Sage.UI.Alarms.JobNotificationButton",[_2bed,_2bec],{options:{displayJobNotificationsInToolbar:true,pollInterval:5},widgetsInTemplate:true,pollInterval:5,_notificationsCountKey:"NotificationsCount",_started:false,_notificationBtnVisible:false,widgetTemplate:new Simplate(["<span id=\"jobNotification\" data-dojo-attach-point=\"_jobNotification\" class=\"alarm-button-container alarm-button notification-buttonIcon display-none\">","<i class=\"fa fa-info-circle\"></i>","<button data-dojo-type=\"dijit.form.ComboButton\" data-dojo-attach-point=\"_button\" data-dojo-attach-event=\"onClick:_cboClick\" class=\"\" >","<div data-dojo-type=\"Sage.UI.Alarms.JobNotificationPopup\" id=\"notificationPopup\" data-dojo-attach-point=\"_popup\" data-dojo-attach-event=\"onClose:_popupClosed\"></div>","</button>","</span>"]),_setPollIntervalAttr:function(val){this.pollInterval=val;},_getPollIntervalAttr:function(){return this.pollInterval;},startup:function(){if(this._started){return;}var _2bf5=Sage.Services.getService("JobService");var _2bf6=_2bf5.getSchedulingSDataService();this._service=_2bf6;this.inherited(arguments);dojo.subscribe("/job/execution/changed",this,this._notificationChanged);dojo.subscribe("/job/execution/setNotificationCount",this,this._setNotificationCount);var _2bf7=Sage.Services.getService("UserOptions");if(_2bf7){_2bf7.getByCategory("ActivityAlarm",this._receivedOptions,this);}if(this._button.valueNode){this.connect(this._button.valueNode,"click",function(e){event.stop(e);});}},_receivedOptions:function(){this._popup.set("options",this.options);if(this.options.displayJobNotificationsInToolbar&&this.pollInterval>0){var self=this;window.setTimeout(function(){self._poll();},15000);}this._started=true;},_poll:function(){if(this._service){this._notificationStore=new _2bf0({id:"Executions",service:this._service,resourceKind:"executions",include:["$descriptors"],select:["$key","user"]});this._notificationStore.fetch({start:0,onComplete:this._onReceiveCounts,onError:this._countsFailed,scope:this});}},_onReceiveCounts:function(data){this._saveToSessionStorage(this._notificationsCountKey,data?data.length:0);this._initializeButton();var self=this;window.setTimeout(function(){self._poll();},this.pollInterval*60000);},_countsFailed:function(req){this._button.set("label"," ?");this._button.set("title",_2bf2.notificationErrorToolTip);this._button.disabled=true;this._showNotificationButton();try{Sage.Utility.ErrorHandler._configuration.preemption.showUnhandledMessagingServiceExceptionMsg=false;}catch(e){}},_initializeButton:function(){var _2bf8=this._getFromSessionStorage(this._notificationsCountKey)||0;if(_2bf8>0){this._button.set("label"," "+_2bf8+" ");this._button.set("title",_2bef.substitute(_2bf2.notificationToolTip,[_2bf8]));this._showNotificationButton();}else{this._hideNotificationButton();}},_setNotificationCount:function(_2bf9){this._saveToSessionStorage(this._notificationsCountKey,_2bf9);this._initializeButton();},_showNotificationButton:function(){if(!this._notificationBtnVisible){_2bf3.remove(this._jobNotification,"display-none");this._notificationBtnVisible=true;}},_hideNotificationButton:function(){if(this._notificationBtnVisible){_2bf3.add(this._jobNotification,"display-none");this._notificationBtnVisible=false;}},_cboClick:function(e){if(this._popup.isOpen){this._button.closeDropDown();}else{this._button.openDropDown();}return false;},_popupClosed:function(){},_notificationChanged:function(){this._poll();},_saveToSessionStorage:function(key,value){sessionStorage.setItem(key,value);},_getFromSessionStorage:function(key){return sessionStorage.getItem(key);}});return _2bf4;});},"Sage/UI/Alarms/JobNotificationPopup":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Widget","Sage/UI/EditableGrid","Sage/Utility","dojo/string","dojo/i18n!./nls/JobNotificationPopup","dojo/_base/declare","Sage/Utility/Jobs"],function(_2bfa,_2bfb,_2bfc,_2bfd,_2bfe,_2bff,_2c00,_2c01,_2c02){var _2c03=_2c01("Sage.UI.Alarms.JobNotificationPopup",[_2bfc,_2bfa,_2bfb],{_notificationCount:-1,_dataRequested:false,widgetsInTemplate:true,isOpen:false,grid:"",templateString:["<div class=\"alarm-popup notification-popup\">","<div class=\"alarm-title notification-title\">","<span class=\"alarm-main-title\">&nbsp;${notificationPopupStrings.title}</span>","<span class=\"alarm-title-tools notification-title-tools\">","<span dojoType=\"Sage.UI.ImageButton\" imageClass=\"icon_Help_16x16\" title=\"${notificationPopupStrings.helpText}\" dojoAttachEvent=\"onClick:_showHelp\" ></span>","</span>","</div>","<div data-dojo-type=\"dijit.layout.StackContainer\" dojoAttachPoint=\"_panelContainer\" class=\"alarm-body\" >","<div data-dojo-type=\"dijit.layout.BorderContainer\" id=\"jobNotifications_Grid\" dojoAttachPoint=\"jobNotifications_Grid\" style=\"width:100%;height:100%;\"></div>","</div>","</div>"].join(""),constructor:function(){this.notificationPopupStrings=_2c00;var _2c04=Sage.Services.getService("JobService");var _2c05=_2c04.getSchedulingSDataService();this._service=_2c05;},onOpen:function(){this.isOpen=true;this._panelContainer.resize();if(!this._dataRequested){this._loadNotifications();}else{this.grid.refresh();}},_onNotificationRequestComplete:function(){var count=this.context.query.scope.rowCount;},_loadNotifications:function(){var _2c06={readOnly:true,columns:this._getColumnLayout(),tools:[],storeOptions:{service:this._service,resourceKind:"executions",include:["$descriptors"],select:["$key","job","trigger","progress","elapsed","status","result"],sort:[{attribute:"status",descending:true}],onComplete:this._onNotificationRequestComplete},contextualCondition:function(){},id:this.id+"executions",tabId:"jobExecutions",gridNodeId:this.jobNotifications_Grid.id,singleClickEdit:true,dblClickAction:this._onDblClick,rowsPerPage:20};var grid=new _2bfd(_2c06);var _2c07=dijit.byId(grid.gridNodeId);_2c07.addChild(grid);window.setTimeout(function(){grid.startup();_2c07.resize();},1);this.grid=grid;grid.startup();this._dataRequested=true;},_onDblClick:function(){},_getColumnLayout:function(){function _2c08(_2c09){if(!_2c09||typeof _2c09!=="number"){_2c09=0;}var _2c0a=new dijit.ProgressBar({indeterminate:false,maximum:100,value:_2c09});return _2c0a;};var _2c0b=[{width:10,field:"$key",name:" ",sortable:false,hidden:true},{width:10,field:"job",name:this.notificationPopupStrings.colNameJobName||"Type",sortable:true,formatter:_2c02.formatJobDescription},{width:8,field:"progress",name:this.notificationPopupStrings.colNameProgress||"Progress",formatter:_2c08,sortable:false},{width:6,field:"status",name:this.notificationPopupStrings.colNameStatus||"Status",sortable:true},{width:24,field:"_item",name:this.notificationPopupStrings.colExecutionResult||"Result",formatter:_2c02.formatJobResult,sortable:false}];return _2c0b;},onClose:function(){this.isOpen=false;},startup:function(){this.inherited(arguments);},_showHelp:function(){_2bfe.openHelp("jobNotifications");}});return _2c03;});},"Sage/UI/SLXPreviewGrid/main":function(){define(["Sage/UI/SLXPreviewGrid/Grid","Sage/UI/SLXPreviewGrid/FilterPanel","Sage/UI/SLXPreviewGrid/Filter/DateRange","Sage/UI/SLXPreviewGrid/Filter/Text"],function(){});},"Sage/UI/ActivityList":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/_Widget","Sage/Utility","Sage/Utility/Activity","Sage/UI/Columns/DateTime","Sage/UI/Columns/SlxLink","Sage/UI/SLXPreviewGrid","Sage/UI/SLXPreviewGrid/Grid","dijit/form/FilteringSelect","Sage/UI/SLXPreviewGrid/Filter/DateRange","Sage/UI/SLXPreviewGrid/Filter/ActivityDateRange","Sage/UI/SLXPreviewGrid/Filter/Text","dojo/data/ItemFileReadStore","dojo/string","Sage/UI/SLXPreviewGrid/Filter/_previewGridFilterMixin","Sage/UI/SLXPreviewGrid/Filter/Lookup","Sage/Data/SDataServiceRegistry","dojo/i18n!./nls/ActivityList","Sage/Utility/Workspace"],function(_2c0c,lang,_2c0d,_2c0e,_2c0f,_2c10,_2c11,_2c12,_2c13,_2c14,_2c15,_2c16,_2c17,_2c18,_2c19,_2c1a,_2c1b,_2c1c,_2c1d,_2c1e){var _2c1f=_2c0c("Sage.UI.ActivityTypeFilterWidget",[_2c0d,_2c1a],{postCreate:function(){this.inherited(arguments);var div=document.createElement("div");this.domNode.appendChild(div);var _2c20=[];dojo.forEach(["atAppointment","atPhoneCall","atToDo","atPersonal"],function(item){_2c20.push({name:_2c0f.getActivityTypeName(item),id:item});});var store=new _2c18({data:{items:_2c20,label:"name",identifier:"id"}});this._select=new _2c14({store:store,required:false},div);},getQuery:function(){var v=this._select.get("value");if(v){return "Type eq '"+v+"'";}return "";},reset:function(){this._select.set("value",null);},getState:function(){return {"value":this._select.get("value")};},applyState:function(state){if(state){this._select.set("value",state["value"]||"");}}});var _2c21=_2c0c("Sage.UI.ActivityList",[_2c0d],{placeHolder:"",conditionFmt:"",parentRelationshipName:"",workspace:"",tabId:"",connections:[],constructor:function(_2c22){this.connections=[];},startup:function(){var _2c23=[{id:"SchedulePhoneCall",imageClass:"icon_Schedule_Meeting_16x16",handler:function(){Sage.Link.scheduleMeeting();},alternateText:_2c1d.addMeetingText},{id:"ScheduleMeeting",imageClass:"icon_Schedule_Call_16x16",handler:function(){Sage.Link.schedulePhoneCall();},alternateText:_2c1d.addPhoneCallText},{id:"ScheduleToDo",imageClass:"icon_Schdedule_To_Do_16x16",handler:function(){Sage.Link.scheduleToDo();},alternateText:_2c1d.addToDoText},{id:this.id+"_Help",imageClass:"icon_Help_16x16",handler:function(){_2c0e.openHelp("activitiestab");},alternateText:_2c1d.helpText}];var _2c24=[{field:"$key",editable:false,hidden:true,id:"id",formatter:function(value,_2c25,cel){var _2c26=[cel.grid.id,"-row",_2c25].join("");var id=(Sage.Utility.getModeId()==="insert")?_2c26:value;var _2c27=["<div id=",id," >",id,"</ div>"].join("");return _2c27;}},{field:"$key",name:_2c1d.completeText,sortable:false,width:"90px",type:_2c0f.activityCompleteCell},{field:"Type",name:_2c1d.typeText,type:_2c0f.activityTypeCell,width:"90px",filterConfig:{widgetType:_2c1f}},{field:"StartDate",name:_2c1d.startDateText,type:_2c10,useFiveSecondRuleToDetermineTimeless:true,getTimeless:true,width:"100px",filterConfig:{widgetType:_2c15,label:_2c1d.dateRangeText}},{field:"Duration",name:_2c1d.durationText,type:_2c0f.activityDurationCell,width:"40px"},{field:"Leader",name:_2c1d.leaderText,type:_2c0f.activityLeaderCell,width:"90px",filterConfig:{widgetType:_2c1b,lookupStructure:[{cells:[{name:_2c1d.firstNameText||"First Name",field:"UserInfo.FirstName",sortable:true,width:"200px",editable:false,propertyType:"System.string",excludeFromFilters:false,defaultValue:""},{name:_2c1d.lastNameText||"Last Name",field:"UserInfo.LastName",sortable:true,width:"200px",editable:false,propertyType:"System.string",excludeFromFilters:false,defaultValue:""},{name:_2c1d.typeText||"Type",field:"Type",sortable:true,width:"100px",editable:false,propertyType:"System.string",excludeFromFilters:false,defaultValue:""}]}],lookupGridOptions:{contextualCondition:function(){var where="";where="((Type ne 'Template') and (Type ne 'Retired'))";return where;},contextualShow:"",selectionMode:"single"},lookupStoreOptions:{resourceKind:"users",sort:[{attribute:"UserInfo.FirstName"}]},getQuery:function(){var obj=this._lup.get("selectedObject");if(obj&&obj["$key"]){return "Leader eq '"+obj["$key"].substr(0,12)+"'";}return "";}}}];this._addEntitySpecificColumns(_2c24);_2c24.push({field:"Description",name:_2c1d.descriptionText,width:"200px",filterConfig:{widgetType:_2c17}});_2c24.push({field:"Category",name:_2c1d.categoryText,width:"75px"});var _2c28=function(id,obj){var _2c29=id;var _2c2a=false;if(obj&&obj["$descriptor"]=="Sage.SalesLogix.Activity.Entities.ActivityAttendee"&&obj["Activity"]){_2c29=obj["Activity"]["$key"];_2c2a=obj["Activity"]["Recurring"];}else{if(obj){_2c2a=obj["Recurring"];}}Sage.Link.editActivity(_2c29,_2c2a);};var _2c2b=this.parentRelationshipName;var _2c2c={tools:_2c23,columns:_2c24,previewField:"LongNotes",readOnly:true,rowsPerPage:20,storeOptions:{select:["ContactId","OpportunityId","AccountId","LeadId","Description","Duration","Recurring","Type","Category","Timeless"],include:["Leader","$descriptors"],resourceKind:"activities",sort:[{attribute:"StartDate"}],service:_2c1c.getSDataService("system")},slxContext:{workspace:this.workspace,tabId:this.tabId},contextualCondition:function(){var _2c2d=_2c2b;var fmt="(Type eq 'atAppointment' or Type eq 'atPhoneCall' or Type eq 'atToDo' or Type eq 'atPersonal') and ${0} eq '${1}'";if(_2c2b==="ContactId"||_2c2b==="LeadId"){_2c2d="ActivityAttendees.EntityId";}else{if(_2c2b==="AccountId"){_2c2d=_2c2b;}}return _2c19.substitute(fmt,[_2c2d,_2c0e.getCurrentEntityId(),_2c2b]);},dblClickAction:_2c28};this.onBeforeCreateGrid(_2c2c);var grid=new _2c12.Grid(_2c2c,this.placeHolder);grid._grid.store.beforeRequest=function(req){req.setQueryArg("_expandRecurrences","false");};grid.startup();var _2c2e=_2c1e.getDetailTabWorkspaceContainer();_2c2e.resize();_2c2e.resize();this.connections.push(dojo.subscribe("/entity/activity/create",this,this.onActivityChanges));this.connections.push(dojo.subscribe("/entity/activity/change",this,this.onActivityChanges));this.connections.push(dojo.subscribe("/entity/activity/delete",this,this.onActivityChanges));dojo.connect(grid,"destroy",this,this.destroy);this._grid=grid;},onActivityChanges:function(_2c2f){this._grid.refresh();},destroy:function(){for(var i=0;i<this.connections.length;i++){dojo.unsubscribe(this.connections.pop());}this.inherited(arguments);},_addEntitySpecificColumns:function(_2c30){var _2c31=Sage.Services.getService("ClientEntityContext").getContext().EntityType;switch(_2c31){case "Sage.Entity.Interfaces.IAccount":case "Sage.Entity.Interfaces.IOpportunity":_2c30.push({field:"ContactName",name:_2c1d.contactText,width:"100px",type:_2c11,idField:"ContactId",pageName:"Contact"});break;case "Sage.Entity.Interfaces.IContact":_2c30.push({field:"OpportunityName",name:_2c1d.opportunityText,width:"100px",type:_2c11,idField:"OpportunityId",pageName:"Opportunity"});break;}},onBeforeCreateGrid:function(_2c32){}});return _2c21;});},"Sage/UI/SLXPreviewGrid/Filter/ActivityDateRange":function(){define(["dojo/_base/declare","Sage/UI/SLXPreviewGrid/Filter/DateRange"],function(_2c33,_2c34){var _2c35=_2c33("Sage.UI.SLXPreviewGrid.Filter.ActivityDateRange",[_2c34],{getQuery:function(){var query=this.inherited(arguments);return query.replace(/Timeless/g,"Activity.Timeless");}});return _2c35;});},"Sage/UI/SLXPreviewGrid/Filter/Lookup":function(){define(["dojo/_base/declare","dijit/_Widget","Sage/UI/SLXPreviewGrid/Filter/_previewGridFilterMixin"],function(_2c36,_2c37,_2c38){var _2c39=_2c36("Sage.UI.SLXPreviewGrid.Filter.Lookup",[_2c37,_2c38],{okText:"OK",lookupStructure:[],lookupGridOptions:{},lookupStoreOptions:{},postCreate:function(){this.inherited(arguments);var _2c3a={structure:this.lookupStructure,gridOptions:this.lookupGridOptions,storeOptions:this.lookupStoreOptions,isModal:true,preFilters:[],returnPrimaryKey:true,dialogTitle:this.name,dialogButtonText:this.okText};this._lup=new Sage.UI.Controls.Lookup({id:this.id+"_lup",config:_2c3a,required:false},this.domNode);var div=document.createElement("div");this.domNode.appendChild(div);dojo.place(this._lup.domNode,div,"only");},getQuery:function(){var obj=this._lup.get("selectedObject");if(obj&&obj["$key"]){return this.field+" eq '"+obj["$key"]+"'";}return "";},reset:function(){this._lup.set("selectedObject",null);},getState:function(){return {"value":this._lup.get("selectedObject")};},applyState:function(state){if(state){this._lup.set("selectedObject",state["value"]||"");}}});return _2c39;});},"Sage/UI/NotesHistoryList":function(){define(["dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","Sage/Utility/Activity","Sage/Utility/Email","Sage/Utility","Sage/UI/SLXPreviewGrid","Sage/UI/Columns/DateTime","Sage/UI/Columns/SlxLink","Sage/UI/SLXPreviewGrid/Filter/Text","Sage/UI/SLXPreviewGrid/Filter/_previewGridFilterMixin","dojo/data/ItemFileReadStore","dijit/form/FilteringSelect","dijit/form/CheckBox","Sage/UI/Dialogs","dojo/string","dojo/date/locale","dojo/i18n!./nls/NotesHistoryList","dojo/_base/declare","dojo/_base/lang","Sage/Utility/Workspace"],function(_2c3b,_2c3c,_2c3d,_2c3e,email,_2c3f,_2c40,_2c41,_2c42,_2c43,_2c44,_2c45,_2c46,_2c47,_2c48,_2c49,_2c4a,_2c4b,_2c4c,lang,_2c4d){var _2c4e=_2c4c("Sage.UI.HistoryTypeFilterWidget",[_2c3b,_2c3c,_2c3d,_2c44],{templateString:["<div>","<div dojoAttachPoint=\"selectContainer\"></div>","<div class=\"chkShowDBChanges checkboxRight\">","<label for=\"chkShowDbChanges\">",_2c4b.showDbChangesText,"</label>","<input id=\"chkShowDbChanges\" type=\"checkbox\" dojoType=\"dijit.form.CheckBox\" dojoAttachPoint=\"chkShowDbChanges\" />","</div>","</div>"].join(""),buildRendering:function(){this.inherited(arguments);var _2c4f=[];dojo.forEach(["atAppointment","atPhoneCall","atToDo","atNote","atPersonal","atInternal","atSchedule","atEMail","atDoc","atFax","atLiterature","atDatabaseChange"],function(item){_2c4f.push({name:_2c3e.getActivityTypeName(item),id:_2c3e.getActivityTypeEnumValue(item)});});var store=new _2c45({data:{items:_2c4f,label:"name",identifier:"id"}});this._select=new _2c46({store:store,required:false},this.selectContainer);},getQuery:function(){var _2c50=this.chkShowDbChanges.get("checked");var type=this._select.get("value");if(type){var c="(Type eq \""+type+"\"";if(_2c50){c+=" or Type eq \""+_2c3e.getActivityTypeEnumValue("atDatabaseChange")+"\"";}c+=")";return c;}else{if(!_2c50){return "Type ne \""+_2c3e.getActivityTypeEnumValue("atDatabaseChange")+"\"";}}return "";},reset:function(){this._select.set("value","");this.chkShowDbChanges.set("checked",false);},getState:function(){return {"value":this._select.get("value"),"showDBChanges":this.chkShowDbChanges.get("checked")};},applyState:function(state){if(state){this._select.set("value",state["value"]||"");this.chkShowDbChanges.set("checked",state["showDBChanges"]);}}});var _2c51=_2c4c(Sage.UI.SLXPreviewGrid.Filter.DateRange,{getQuery:function(){var _2c52=function(value,_2c53){if(!value){return "";}if(value.constructor!==Date){value=Date.parse(value);}if(_2c53){value.setUTCDate(value.getUTCDate()+1);}return _2c3f.Convert.toIsoStringFromDate(value);};var _2c54=function(value,_2c55){if(!value){return "";}if(value.constructor!==Date){value=Date.parse(value);}var pad=function(n){return n<10?"0"+n:n;};return [value.getFullYear(),"-",pad(value.getMonth()+1),"-",pad(value.getDate()),(_2c55)?"T23:59:59Z":"T00:00:00Z"].join("");};var dFrom=this.dteFrom.get("value");var dTo=this.dteTo.get("value");var fmt;var qry="";if(!dFrom&&!dTo){return "";}if(dTo&&dFrom){fmt=["((((Timeless eq true and CompletedDate eq OriginalDate) and (CompletedDate ge '${0}' and CompletedDate lt '${1}'))) or","(((Timeless eq false) or (Timeless eq true and CompletedDate ne OriginalDate)) and (CompletedDate ge '${2}' and CompletedDate lt '${3}')))"].join("");qry=_2c49.substitute(fmt,[_2c54(dFrom),_2c54(dTo,true),_2c52(dFrom),_2c52(dTo,true)]);}else{if(dFrom&&!dTo){fmt=["((((Timeless eq true and CompletedDate eq OriginalDate) and CompletedDate ge '${0}')) or","(((Timeless eq false) or (Timeless eq true and CompletedDate ne OriginalDate)) and CompletedDate ge '${1}'))"].join("");qry=_2c49.substitute(fmt,[_2c54(dFrom),_2c52(dFrom)]);}else{if(dTo&&!dFrom){fmt=["((((Timeless eq true and CompletedDate eq OriginalDate) and CompletedDate lt '${0}')) or","(((Timeless eq false) or (Timeless eq true and CompletedDate ne OriginalDate)) and CompletedDate lt '${1}'))"].join("");qry=_2c49.substitute(fmt,[_2c54(dTo,true),_2c52(dTo,true)]);}}}return qry;}});var _2c56=_2c4c("Sage.UI.NotesHistoryList",[_2c3b],{placeholder:"",parentRelationshipName:"",workspace:"",tabId:"",connections:[],options:{"includeAttendees":true},constructor:function(args){lang.mixin(this,args);this.connections=[];},startup:function(){var _2c57=[{field:"$key",editable:false,hidden:true,id:"id",formatter:function(value,_2c58,cel){var _2c59=[cel.grid.id,"-row",_2c58].join("");var id=(_2c3f.getModeId()==="insert")?_2c59:value;var _2c5a=["<div id=",id," >",id,"</ div>"].join("");return _2c5a;}},{field:"Type",name:_2c4b.typeText,type:_2c3e.historyTypeCell,width:"90px",filterConfig:{widgetType:_2c4e}},{field:"CompletedDate",name:_2c4b.dateTimeText,type:_2c41,useFiveSecondRuleToDetermineTimeless:true,width:"100px",filterConfig:{widgetType:_2c51,label:_2c4b.dateRangeText}},{field:"UserName",name:_2c4b.userText,width:"90px",filterConfig:{widgetType:_2c43}}];this._addEntitySpecificColumns(_2c57);_2c57.push({field:"Description",name:_2c4b.regardingText,width:"200px",filterConfig:{widgetType:_2c43}});_2c57.push({field:"Result",name:_2c4b.resultText,width:"90px"});_2c57.push({field:"Category",name:_2c4b.categoryText,width:"90px"});var _2c5b=(this.options.includeAttendees)?_2c4b.helpText:_2c4b.helpText+" *";var _2c5c=[{id:"SendEmail",imageClass:"icon_Send_Write_email_16x16",tooltip:_2c4b.sendEmailText,handler:this.onSendEmailClick,scope:this},{id:"SendWord",imageClass:"icon_Document_Type_16x16",tooltip:_2c4b.sendToWordText,handler:this.onSendToWordClick,scope:this},{id:"NewNote",imageClass:"icon_New_Note_16x16",tooltip:_2c4b.addNoteText,handler:Sage.Link.newNote,scope:Sage.Link},{id:"CompleteActivity",imageClass:"icon_complete_activity_16x16",tooltip:_2c4b.completeAnActivityText,handler:Sage.Link.scheduleCompleteActivity,scope:Sage.Link},{id:"Help",imageClass:"icon_Help_16x16",handler:function(){_2c3f.openHelp("noteshistory");},tooltip:_2c4b.helpText}];var _2c5d=this.parentRelationshipName;var self=this;var _2c5e={tools:_2c5c,columns:_2c57,previewField:"LongNotes",storeOptions:{select:["Type","CompletedDate","UserName","AccountName","ContactName","ContactId","OpportunityName","OpportunityId","Description","LongNotes","Timeless","Result"],resourceKind:"history",sort:[{attribute:"CompletedDate",descending:"true"}]},slxContext:{workspace:this.workspace,tabId:this.tabId},contextualCondition:function(){var fmt="${0} eq '${1}'";if(self.options.includeAttendees){if(_2c5d==="ContactId"||_2c5d==="LeadId"){fmt="((HistoryAttendees.EntityId eq  '${1}') or (${0} eq  '${1}' and  HistoryAttendees.IsPrimary eq true) or (${0} eq  '${1}' and  HistoryAttendees.EntityId eq null))";}}return _2c49.substitute(fmt,[_2c5d,_2c3f.getCurrentEntityId()]);},dblClickAction:Sage.Link.editHistory};this.onBeforeCreateGrid(_2c5e);var grid=new Sage.UI.SLXPreviewGrid.Grid(_2c5e,this.placeHolder);grid.startup();var _2c5f=_2c4d.getDetailTabWorkspaceContainer();_2c5f.resize();_2c5f.resize();this.connections.push(dojo.subscribe("/entity/history/create",this,this.onHistoryChanges));this.connections.push(dojo.subscribe("/entity/history/change",this,this.onHistoryChanges));this.connections.push(dojo.subscribe("/entity/history/delete",this,this.onHistoryChanges));dojo.connect(grid,"destroy",this,this.destroy);this._grid=grid;},onHistoryChanges:function(_2c60){this._grid.refresh();},destroy:function(){for(var i=0;i<this.connections.length;i++){dojo.unsubscribe(this.connections.pop());}this.inherited(arguments);},_addEntitySpecificColumns:function(list){var _2c61=Sage.Services.getService("ClientEntityContext").getContext().EntityType;switch(_2c61){case "Sage.Entity.Interfaces.IAccount":case "Sage.Entity.Interfaces.IOpportunity":list.push({field:"ContactName",name:_2c4b.contactText,width:"100px",type:_2c42,idField:"ContactId",pageName:"Contact"});break;case "Sage.Entity.Interfaces.IContact":list.push({field:"OpportunityName",name:_2c4b.opportunityText,width:"100px",type:_2c42,idField:"OpportunityId",pageName:"Opportunity"});break;}},onSendEmailClick:function(){var notes=this._grid.getSelectedRecords(["Description","LongNotes","AccountName","ContactName","CompletedDate","UserName"]);if(notes.length===0){_2c48.showWarning(_2c4b.pleaseSelectRecordsText);return;}var body=dojo.map(notes,function(n){var txt=_2c4b.accountText+": "+n.AccountName+"\n";if(n.ContactName){txt+=_2c4b.contactText+": "+n.ContactName+"\n";}var _2c62=_2c3f.Convert.toDateFromString(n.CompletedDate);txt+=_2c4b.dateText+": ";txt+=_2c4a.format(_2c62)+"\n";txt+=_2c4b.userText+": "+n.UserName+"\n";txt+=_2c4b.regardingText+": "+n.Description+"\n\n";txt+=_2c4b.notesText+":\n"+n.LongNotes;return txt;}).join("\n\n---------------------------------------------\n\n");var _2c63=dojo.map(notes,function(n){return n.Description;}).join("; ");email.writeEmail("",_2c63,body);},onSendToWordClick:function(){var _2c64=function(){if(typeof slx!=="undefined"&&slx&&slx.com){try{return slx.com.create("Word.Application");}catch(e){}}if(Sage.Utility.isIE){try{return new ActiveXObject("Word.Application");}catch(e){return null;}}return null;};var notes=this._grid.getSelectedRecords(["Description","LongNotes","AccountName","ContactName","CompletedDate","UserName","Type"]);if(notes.length===0){_2c48.showWarning(_2c4b.pleaseSelectRecordsText);return;}var _2c65=_2c64();if(!_2c65){_2c48.showWarning(_2c4b.UnableToFindWordMsg);return;}var _2c66=9;var _2c67=0;var doc=_2c65.Documents.Add();_2c65.PrintPreview=true;_2c65.Visible=true;_2c65.ActiveWindow.ActivePane.View.SeekView=_2c66;_2c65.Selection.TypeText(_2c4b.accountText+": "+notes[0].AccountName+"            "+_2c4b.printedOnText+": "+_2c4a.format(new Date(),{selector:"date",fullYear:true}));_2c65.ActiveWindow.ActivePane.View.SeekView=_2c67;dojo.forEach(notes,function(note){_2c65.Selection.TypeText("___________________________________________________________");_2c65.Selection.TypeParagraph();_2c65.Selection.TypeParagraph();if(note.ContactName){_2c65.Selection.TypeText(_2c4b.contactText+":        ");_2c65.Selection.TypeText(note.ContactName);_2c65.Selection.TypeParagraph();}if(note.CompletedDate){var _2c68=_2c3f.Convert.toDateFromString(note.CompletedDate);_2c65.Selection.TypeText(_2c4b.dateText+":        ");_2c65.Selection.TypeText(_2c4a.format(_2c68));_2c65.Selection.TypeParagraph();}if(note.UserName){_2c65.Selection.TypeText(_2c4b.userText+":        ");_2c65.Selection.TypeText(note.UserName);_2c65.Selection.TypeParagraph();}_2c65.Selection.TypeText(_2c4b.typeText+":        ");_2c65.Selection.TypeText(_2c3e.getActivityTypeName(note.Type));_2c65.Selection.TypeParagraph();if(note.Description){_2c65.Selection.TypeText(_2c4b.regardingText+":        ");_2c65.Selection.TypeText(note.Description);_2c65.Selection.TypeParagraph();}if(note.LongNotes){_2c65.Selection.TypeText(_2c4b.notesText+":        ");_2c65.Selection.TypeText(note.LongNotes);_2c65.Selection.TypeParagraph();}});_2c65.Selection.TypeText("___________________________________________________________");_2c65.Selection.TypeParagraph();_2c65.Visible=true;},onBeforeCreateGrid:function(_2c69){}});return _2c56;});},"Sage/UI/DashboardGroupListConfigurationProvider":function(){define(["Sage/UI/GroupListConfigurationProvider","dojo/string","dojo/_base/declare"],function(_2c6a,_2c6b,_2c6c){var _2c6d=_2c6c("Sage.UI.DashboardGroupListConfigurationProvider",[_2c6a],{formatPredicate:function(group){group.family=group.family&&group.family.toUpperCase();return _2c6b.substitute("name eq '${name}' and upper(family) eq '${family}'",group);},_createConfigurationForList:function(entry){var _2c6e=Sage.Services.getService("ClientGroupContext"),_2c6f;if(_2c6e){_2c6f=_2c6e.getContext();}_2c6f.CurrentTable="";return this.inherited(arguments);},_getListContextMenuItems:function(){return [];},_onListContext:function(e){return;}});return _2c6d;});},"Sage/UI/GroupListConfigurationProvider":function(){define(["Sage/_ConfigurationProvider","Sage/Data/GroupLayoutSingleton","Sage/Services/_ServiceMixin","Sage/Utility/_LocalStorageMixin","Sage/UI/Columns/SlxLink","Sage/UI/Columns/Boolean","Sage/UI/Columns/DateTime","Sage/UI/Columns/Numeric","Sage/UI/Columns/OwnerType","Sage/UI/Columns/Phone","Sage/UI/Columns/UserType","Sage/UI/Columns/Currency","Sage/Data/SDataStore","Sage/UI/SummaryFormatterScope","dijit/MenuSeparator","dijit/Menu","Sage/UI/PopupMenuItem","Sage/UI/MenuItem","dojo/_base/lang","dojo/_base/declare","dojo/i18n","Sage/Utility/Groups"],function(_2c70,_2c71,_2c72,_2c73,_2c74,_2c75,_2c76,_2c77,_2c78,_2c79,_2c7a,_2c7b,_2c7c,_2c7d,_2c7e,_2c7f,_2c80,_2c81,lang,_2c82,i18n,_2c83){var _2c84=_2c82("Sage.UI.GroupListConfigurationProvider",[_2c70,_2c72,_2c73],{serviceMap:{"groupContextService":"ClientGroupContext"},service:null,_hasAdHocList:false,ROWS_PER_PAGE:100,_currentConfiguration:false,constructor:function(_2c85){this._adHocOnlyMenuItems=[];this._menuItems=[];this._subscribes.push(dojo.subscribe("/group/context/changed",this,this._onGroupContextChanged));},_onGroupContextChanged:function(){this.onConfigurationChange();},requestConfiguration:function(_2c86){var _2c87=new _2c71(),_2c88=lang.hitch(this,this._onRequestConfigurationSuccess,_2c86||{}),_2c89=lang.hitch(this,this._onRequestConfigurationFailure,_2c86||{}),group=this.getCurrentGroup();_2c87.getGroupLayout(this.formatPredicate(group),_2c88,_2c89,group.$key);},_onRequestConfigurationSuccess:function(_2c8a,entry){if(_2c8a.success){_2c8a.success.call(_2c8a.scope||this,this._createConfiguration(entry),_2c8a,this);}},_onRequestConfigurationFailure:function(_2c8b,_2c8c){if(_2c8b.failure){_2c8b.failure.call(_2c8b.scope||this,_2c8c,_2c8b,this);}},_createConfigurationForList:function(entry){var _2c8d=entry.layout,_2c8e=[],_2c8f=[],_2c90=Sage.Services.getService("ClientGroupContext"),_2c91,i;if(_2c90){_2c91=_2c90.getContext();}if(entry["keyField"]){_2c8e.push(entry["keyField"]);}var _2c92=_2c83.getGridStructure(_2c8d);_2c8f=_2c92.structure;_2c8e=_2c92.select;var store=new _2c7c({service:this.service,resourceKind:"groups",resourcePredicate:this.formatPredicate(entry),queryName:"execute",select:_2c8e,include:[],count:this.ROWS_PER_PAGE});var _2c93={};for(i=0;i<entry["tableAliases"].length;i++){_2c93[entry["tableAliases"][i]["tableName"].toUpperCase()]=entry["tableAliases"][i]["alias"];}return {structure:[{defaultCell:{defaultValue:""},cells:[_2c8f]}],store:store,rowsPerPage:this.ROWS_PER_PAGE,layout:entry["layout"],tableAliases:_2c93,selectedRegionContextMenuItems:this._getListContextMenuItems(),onSelectedRegionContextMenu:this._onListContext,onNavigateToDefaultItem:lang.hitch(entry,function(item){if(item){var _2c94=this["keyField"],_2c95=this["entityName"],id=item[_2c94];if(id){Sage.Link.entityDetail(_2c95,id);}}}),id:entry["$key"]};},_getCurrentGroupID:function(){var _2c96=Sage.Services.getService("ClientGroupContext"),_2c97,_2c98;if(_2c96){_2c97=_2c96.getContext();_2c98=_2c97.CurrentGroupID;}return _2c98;},_onListContext:function(e){var _2c99=Sage.Services.getService("ClientGroupContext");var _2c9a=_2c99.getContext();for(var i=0;i<this._adHocOnlyMenuItems.length;i++){this._adHocOnlyMenuItems[i].set("disabled",!_2c9a.isAdhoc);}this._ensureAdHocListMenu();},_getListContextMenuItems:function(){var _2c9b,_2c9c=this._getCurrentGroupID();if(this._menuItems.length>0){return this._menuItems;}if(!Sage.UI.DataStore.ContextMenus||!Sage.UI.DataStore.ContextMenus.listContextMenu){return [];}this._menuItems=[];this._adHocOnlyMenuItems=[];var _2c9d=Sage.UI.DataStore.ContextMenus.listContextMenu.items;var len=_2c9d.length;for(var i=0;i<len;i++){var mDef=_2c9d[i];if(mDef.displayName===""){this._menuItems.push(new _2c7e());}else{var href=mDef.href;if(href.indexOf("javascript:")<0){href=dojo.string.substitute("javascript:${0}()",[href]);}if(href.indexOf("addSelectionsToGroup")>0){_2c9b=this._createAddToAdHocMenuItem(mDef);if(_2c9b.arrowWrapper){dojo.style(_2c9b.arrowWrapper,"visibility","");}}else{_2c9b=new _2c81({id:_2c9c+"_"+i,label:mDef.text||"...",icon:mDef.img,title:mDef.tooltip||"",ref:href,onClick:function(){if(this.ref!==""){try{window.location.href=this.ref;}catch(e){}}}});}this._menuItems.push(_2c9b);if(href.indexOf("removeSelectionsFromGroup")>0){this._adHocOnlyMenuItems.push(_2c9b);}}}return this._menuItems;},_createAddToAdHocMenuItem:function(_2c9e){this._adHocMenu=new _2c7f();this._adHocMenu.addChild(new _2c81({label:"loading..."}));this._adHocMenuHref=_2c9e.href;var _2c9f=new _2c80({label:_2c9e.text||"...",icon:_2c9e.img,title:_2c9e.tooltip||"",popup:this._adHocMenu});return _2c9f;},_ensureAdHocListMenu:function(){if(this._hasAdHocList){return;}this._hasAdHocList=true;var svc=Sage.Services.getService("ClientGroupContext");svc.getAdHocGroupList(function(list){this._adHocMenu.destroyDescendants();for(var i=0;i<list.length;i++){var grp=list[i];this._adHocMenu.addChild(new _2c81({label:grp["$descriptor"]||grp["name"],icon:"",title:grp["$descriptor"]||grp["name"],ref:dojo.string.substitute(this._adHocMenuHref,{"groupId":grp["$key"]}),onClick:function(){if(this.ref!==""){try{window.location.href=this.ref;}catch(e){}}}}));}},this);},_createConfigurationForSummary:function(entry){if(!this.summaryOptions){return false;}if(!entry){entry=this._currentConfiguration;}var store=new _2c7c({service:this.service,resourceKind:"groups",resourcePredicate:this.formatPredicate(entry),queryName:"execute",select:[entry["keyField"]],include:[]}),_2ca0=[{field:entry["keyField"],formatter:"formatSummary",width:"100%",name:"Summary View",canResize:function(){return false;}}],_2ca1=["Sage"],_2ca2=this.summaryOptions["templateLocation"],_2ca3=_2ca2&&_2ca2.split("/"),i,path;for(i=0;i<_2ca3.length-1;i++){_2ca1.push(_2ca3[i]);}path="dojo/i18n!"+_2ca1.join("/")+"/nls/"+_2ca3[_2ca3.length-1].replace(".html","");require([path],lang.hitch(this,function(nls){lang.mixin(this,nls);}));return {structure:_2ca0,layout:entry["layout"],store:store,rowHeight:200,rowsPerPage:50,formatterScope:new _2c7d({requestConfiguration:{mashupName:this.summaryOptions["mashupName"]||"SummaryViewQueries",queryName:this.summaryOptions["queryName"]||""},templateLocation:this.summaryOptions["templateLocation"]||""})};},_createConfigurationForDetail:function(entry){if(this.detailConfiguration){return {requestConfiguration:{mashupName:this.detailConfiguration["mashupName"]||"SummaryViewQueries",queryName:this.detailConfiguration["queryName"]||""},templateLocation:this.detailConfiguration["templateLocation"]};}return false;},_createConfiguration:function(entry){this._currentConfiguration=entry;var state=this.getFromLocalStorage("LISTPANEL_VIEWSTATE",this._getViewNS());return {list:this._createConfigurationForList(entry),summary:(state=="summary")?this._createConfigurationForSummary(entry):false,detail:this._createConfigurationForDetail(entry)};},formatPredicate:function(group){if(group.$key==="LOOKUPRESULTS"){group.family=group.family&&group.family.toUpperCase();group.name="Lookup Results";return dojo.string.substitute("name eq '${name}' and upper(family) eq '${family}'",group);}return "'"+group.$key+"'";},getCurrentGroup:function(){var _2ca4=Sage.Services.getService("ClientGroupContext"),_2ca5=_2ca4&&_2ca4.getContext(),_2ca6={name:"My Accounts",family:"Account",$key:""};if(_2ca5){_2ca6={name:_2ca5.CurrentName,family:_2ca5.CurrentFamily,$key:_2ca5.CurrentGroupID};}return _2ca6;},_getViewNS:function(){var ns=Sage.Groups.GroupManager.LOCALSTORE_NAMESPACE+"-"+this._getMainViewName();return ns;},_getMainViewName:function(){if(this._mainViewName){return this._mainViewName;}var _2ca7=Sage.Services.getService("ClientGroupContext"),_2ca8=-1,_2ca9=null;if(_2ca7){_2ca9=_2ca7.getContext();if(_2ca9){_2ca8=_2ca9.CurrentEntity;}}return _2ca8;}});return _2c84;});},"Sage/UI/Filters/CheckBoxFilter":function(){define(["dijit/_Widget","dijit/_Contained","dojo/NodeList-traverse","Sage/_Templated","Sage/Services/_ServiceMixin","Sage/_ActionMixin","dojo/string","dojo/on","dojo/_base/lang","dojo/dom-construct","./EditFilterItems","dojo/_base/array","dojo/query","dojo/dom-attr","dojo/i18n!./nls/CheckBoxFilter","Sage/Utility","Sage/Utility/Filters","dojo/json","dijit/registry","dojo/_base/declare","dojo/_base/Deferred","dojo/dom-class","dojo/_base/connect"],function(_2caa,_2cab,_2cac,_2cad,_2cae,_2caf,_2cb0,on,lang,_2cb1,_2cb2,array,query,_2cb3,nls,_2cb4,_2cb5,json,_2cb6,_2cb7,_2cb8,_2cb9,_2cba){var _2cbb=_2cb7("Sage.UI.Filters.CheckBoxFilter",[_2caa,_2cab,_2cae,_2caf,_2cad],{attributeMap:{"content":{node:"listNode",type:"innerHTML"}},serviceMap:{"groupContextService":"ClientGroupContext","systemDataService":{type:"sdata",name:"system"}},actionsFrom:"click",widgetsInTemplate:false,widgetTemplate:new Simplate(["<div class=\"filter-type-checkbox filter-collapsed\">","<h3 data-action=\"toggleExpand\" data-dojo-attach-point=\"filterNameNode\">{%: $.filter.$descriptor || $.filter.filterName %}","</h3>","<ul class=\"filter-loading-indicator\"><li><span>{%: $.loadingText %}</span></li></ul>","<a href=\"#\" class=\"filter-clear\" data-dojo-attach-point=\"clearLinkNode\">{%: $.clearText %}</a>","<span class=\"filter-sep\" data-dojo-attach-point=\"linkSep\"> | </span>","<a href=\"#\" class=\"filter-edit-items\" data-dojo-attach-point=\"moreLinkNode\">{%: $.moreText %}</a>","<ul class=\"filter-list\" data-dojo-attach-point=\"listNode\"></ul>","</div>"]),itemTemplate:new Simplate(["<li data-action=\"toggleSelect\" class=\"{%= $.selected ? \"filter-selected\" : \"\" %}\" data-name=\"{%= $.name %}\" data-selected=\"{%= !!$.selected %}\" ","role=\"checkbox\" aria-checked=\"{%= !!$.selected %}\">","<div>","<span class=\"p-selection\">&nbsp;</span>","<span class=\"p-label\">{%: $$._formatLabelText($.$descriptor, $.name) %}</span>","{% if ($.value > -1) { %}","&nbsp;<span class=\"p-spacer\">(</span>","<span class=\"p-count\">{%: $.value %}</span>","<span class=\"p-spacer\"> {%: $.ofText %} </span>","<span class=\"p-total\">{%: $.value %}</span>","<span class=\"p-spacer\">)</span>","{% } %}","</div>","</li>"]),_activeFilterCount:0,_loaded:false,_selected:null,_ranges:null,_filterGroup:null,_filterSubscriptions:null,appliedValues:null,parent:null,_originalActiveFilter:"",nullName:"SLX_NULL",emptyName:"SLX_EMPTY",filterGroup:"default",filter:null,store:null,editFilterItems:null,editFilterItemsHandle:null,output:null,entries:[],expanded:false,FILTER_UPDATE_DELAY:1000,lazyUpdateCounts:null,count:1000,loading:true,groupId:"",constructor:function(){this.inherited(arguments);this.output=[];this.entries=[];lang.mixin(this,nls);},postMixInProperties:function(){this.inherited(arguments);this._selected={};var _2cbc=this._isRangeFilter();if(_2cbc){this.store.request.setQueryArg("orderby","");this.compileRanges(_2cbc.ranges);}if(this.expanded){this.expanded=false;setTimeout(lang.hitch(this,this._toggleExpand),500);}else{if(this.appliedValues){setTimeout(lang.hitch(this,this._loadItems),500);}else{this.resolveDeferred();}}if(this.store&&this.store.request&&this.store.request.getQueryArg){this._originalActiveFilter=this.store.request.getQueryArg("_activeFilter");}},postCreate:function(){this.inherited(arguments);var _2cbd=false;if(this.configurationProvider.getFilterFormatter){var _2cbe=this.configurationProvider.getFilterFormatter(this.filter);if(_2cbe){_2cbd=true;}}if(!this._isDistinctFilter()||_2cbd){_2cb1.destroy(this.moreLinkNode);_2cb1.destroy(this.linkSep);}else{this.editFilterItemsHandle=on(this.moreLinkNode,"click",lang.hitch(this,this._moreLinkClicked));}on(this.clearLinkNode,"click",lang.hitch(this,this._clearLinkClicked));var id=this.filter.$key+"_editFilterItems",_2cbf=_2cb6.byId(id);this.editFilterItems=_2cbf||new _2cb2({id:id,store:this.store,filter:this.filter,filterPanel:this.parent,parent:this});},_clearLinkClicked:function(){var q=query("li.filter-selected",this.listNode),evt;array.forEach(q,function(node){if(node.click){node.click();}else{evt=document.createEvent("MouseEvents");evt.initMouseEvent("click",true,true,window,0,0,0,0,0,false,false,false,false,0,null);node.dispatchEvent(evt);}});},_moreLinkClicked:function(e){if(this._originalActiveFilter){this.editFilterItems.baseFilter=this._originalActiveFilter;}this.editFilterItems.showDialog();e.cancelBubble=true;},uninitialize:function(){this.inherited(arguments);if(this.editFilterItems){this.editFilterItems.destroy(false);}if(this.editFilterItemsHandle){this.editFilterItemsHandle.remove();}},_setFilterGroupAttr:function(value){if(this._filterSubscriptions){array.forEach(this._filterSubscriptions,function(_2cc0){this.unsubscribe(_2cc0);},this);}this._filterGroup=value;this._filterSubscriptions=[];this._filterSubscriptions.push(this.subscribe(_2cb0.substitute("/ui/filters/${0}/change",[this._filterGroup]),this._onChange),this.subscribe(_2cb0.substitute("/ui/filters/${0}/clear",[this._filterGroup]),this._onClear),this.subscribe(_2cb0.substitute("/ui/filters/${0}/refresh",[this._filterGroup]),lang.hitch(this,this._onRefresh)));},_onRefresh:function(_2cc1,_2cc2,_2cc3){this.appliedValues=_2cc1;this.updateCounts();},_updateActiveFilters:function(){var _2cc4=this._getFilterManager(),_2cc5=[],q=false;if(_2cc4){q=_2cc4.createQuery();}if(!this.expanded){return;}if(q===false){q="";}else{_2cc5.push(q);}if(this._originalActiveFilter){_2cc5.push(this._originalActiveFilter);}q=_2cc5.length>1?_2cc5.join(" AND "):_2cc5.join("");this.store.request.setQueryArg("_activeFilter",q);},refresh:function(){if(this._loaded){array.forEach(query("*",this.listNode),function(item){_2cb1.destroy(item);});this.requestData();}},_onChange:function(_2cc6,name,value,_2cc7){name=this._transformFilterItemName(name);if(_2cc7!==this&&_2cc6.$key===this.filter.$key){query(_2cb0.substitute("> [data-name=\"${0}\"]",[name]),this.listNode).forEach(function(el){_2cb3.set(el,"data-selected",(!!value).toString());_2cb9.toggle(el,"filter-selected",!!value);});}},_onClear:function(_2cc8,_2cc9){if(_2cc9!==this&&(!_2cc8||_2cc8.$key===this.filter.$key)){query("> [data-selected=\"true\"]",this.listNode).forEach(function(el){_2cb3.set(el,"data-selected","false");_2cb9.toggle(el,"filter-selected",false);});}},_getFilterGroupAttr:function(){return this._filterGroup;},_formatLabelText:function(value,name){if(name===this.nullName){return this.nullText;}else{if(name===this.emptyName){return this.emptyText;}}if(this.configurationProvider){if(this.configurationProvider.getFilterFormatter){var _2cca=this.configurationProvider.getFilterFormatter(this.filter);if(_2cca){return _2cca(value);}}}return value;},_isDistinctFilter:function(){return this.filter&&this.filter.details&&this.filter.details.distinctFilter;},_isRangeFilter:function(){return this.filter&&this.filter.details&&this.filter.details.rangeFilter;},compileRanges:function(_2ccb){var i=0;this._ranges={};for(i=0;i<_2ccb.length;i++){this._ranges[this._transformFilterItemName(_2ccb[i].rangeName)]=_2ccb[i];}},_saveExpandState:function(){var data=this.parent._configuration._hiddenFilters||{},key=this.parent._configuration._hiddenFiltersKey,_2ccc=Sage.Services.getService("ClientGroupContext"),_2ccd=_2ccc&&_2ccc.getContext(),prop=_2ccd.CurrentEntity+"_"+this.filter.filterName;if(!data[prop]){data[prop]={expanded:false,hidden:false};}data[prop].expanded=this.expanded;_2cb5.setHiddenFilters(key,json.stringify(data));},toggleExpand:function(_2cce,evt,el){this._toggleExpand();this._saveExpandState();},_toggleExpand:function(){this.expanded=!this.expanded;if(this.domNode){_2cb9.toggle(this.domNode,"filter-collapsed");}this._loadItems();},_loadItems:function(){if(!this._loaded){this._loaded=true;this.requestData();}else{this.updateCounts();}},toggleSelect:function(_2ccf,evt,el){var _2cd0=/^true$/i.test(_2ccf.selected),name=_2ccf.name,value=!_2cd0&&(this._isRangeFilter()?this._ranges[name]:name);this.onSelectionChange(this.filter,name,value,this);_2cb3.set(el,"data-selected",(!_2cd0).toString());_2cb3.set(el,"aria-checked",(!_2cd0).toString());_2cb9.toggle(el,"filter-selected",!_2cd0);},onSelectionChange:function(_2cd1,name,value,_2cd2){_2cba.publish(_2cb0.substitute("/ui/filters/${0}/change",[this._filterGroup]),[_2cd1,name,value,_2cd2]);},updateCounts:function(){if(!this.lazyUpdateCounts){this.lazyUpdateCounts=_2cb4.debounce(lang.hitch(this,function(){if(this.expanded){query("li[data-name] div span.p-count",this.listNode).forEach(function(node){node.innerHTML="0";});this._updateActiveFilters();this._doUpdateCounts();}}),this.FILTER_UPDATE_DELAY);}this.lazyUpdateCounts();},_doUpdateCounts:function(){this.store.fetch({onComplete:lang.hitch(this,this._updateCountsInPlace),count:this.count});},requestData:function(){if(this.loading){if(this.domNode){_2cb9.add(this.domNode,"filter-loading");this.set("content","");}}this.store.fetch({onError:lang.hitch(this,this._onFetchError),onComplete:lang.hitch(this,this._onFetchComplete),count:this.count});},_onFetchComplete:function(items,_2cd3){this._processFetchResult(items,_2cd3);this.resolveDeferred();},_onFetchError:function(error,_2cd4){if(this.domNode){_2cb9.remove(this.domNode,"filter-loading");}this.resolveDeferred();},isFilterItemHidden:function(_2cd5){var data=this.parent._configuration._hiddenFilters||{},_2cd6=Sage.Services.getService("ClientGroupContext"),_2cd7=_2cd6&&_2cd6.getContext(),prop=_2cd7.CurrentEntity+"_"+this.filter.filterName,_2cd8=false;if(data[prop]){_2cd8=array.some(data[prop].items,function(item){return item===_2cd5;});}return _2cd8;},_updateCountsInPlace:function(items,_2cd9){var i=0,entry=null,len=items.length;for(i=0;i<len;i++){entry=items[i];entry.name=this._transformFilterItemName(entry.name);query("li[data-name=\""+entry.name+"\"]",this.listNode).forEach(function(node){query("div span.p-count",node).forEach(function(span){span.innerHTML=entry.value;});});}this._finishedLoading();},_processFetchResult:function(items,_2cda){var i=0,entry=null,_2cdb=false,len=items.length,_2cdc=false;for(i=0;i<len;i++){entry=items[i];entry.name=this._transformFilterItemName(entry.name);_2cdb=this.isFilterItemHidden(entry.name);if(_2cdb===false||this._isRangeFilter()){_2cdc=this.appliedValues&&this.appliedValues[this.filter.$key]&&!!this.appliedValues[this.filter.$key][entry.name];entry.selected=_2cdc||(this.appliedValues&&!!this.appliedValues[entry.name]);entry.ofText=this.ofText;this.output.push(this.itemTemplate.apply(entry,this));this.entries.push(entry);}}this._fixMissingItems();if(this.domNode){this.set("content",this.output.join(""));}this._clearOutputEntries();this._updateCountsInPlace(items);},_transformFilterItemName:function(name){var _2cdd=name;if(name===null){_2cdd=this.nullName;}else{if(name===""){_2cdd=this.emptyName;}}return _2cdd?_2cdd.trim():_2cdd;},_fixMissingItems:function(){var _2cde,prop,val,_2cdf=true;for(prop in this.appliedValues){if(this.appliedValues.hasOwnProperty(prop)){val=this.appliedValues[prop];_2cdf=array.some(this.entries,function(entry){return entry.name===prop;});if(!_2cdf){_2cde={name:"",$descriptor:"",selected:true,value:0};_2cde.name=prop;_2cde.$descriptor=val;_2cde.ofText=this.ofText;if(typeof _2cde.$descriptor==="string"){this.output.push(this.itemTemplate.apply(_2cde,this));this.entries.push(_2cde);}}}}},_clearOutputEntries:function(){this.output=[];this.entries=[];},_finishedLoading:function(){this.loading=false;this.store.request.setQueryArg("_activeFilter",this._originalActiveFilter||"");if(this.domNode){_2cb9.remove(this.domNode,"filter-loading");}},_getFilterManager:function(){var _2ce0=this.parent.filterManager;if(!_2ce0){if(this.parent._configuration.getFilterManager){_2ce0=this.parent._configuration.getFilterManager();}}var _2ce1=Sage.Services.getService("ClientGroupContext");var _2ce2=_2ce1&&_2ce1.getContext();if(this.groupId!=_2ce2.CurrentGroupID){_2ce0=null;}return _2ce0;},resolveDeferred:function(){if(this.deferred){this.deferred=this.deferred.resolve();}}});return _2cbb;});},"Sage/UI/Filters/EditFilterItems":function(){define(["dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/Dialog","dijit/form/Button","Sage/UI/ImageButton","dijit/form/CheckBox","dijit/form/TextBox","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-construct","dijit/registry","Sage/UI/Controls/_DialogHelpIconMixin","Sage/Utility/Filters","dojo/json","dojo/parser","dojo/text!./templates/EditFilterItems.html","dojo/i18n!./nls/EditFilterItems"],function(_2ce3,_2ce4,_2ce5,_2ce6,_2ce7,_2ce8,_2ce9,_2cea,_2ceb,array,lang,_2cec,_2ced,_2cee,_2cef,json,_2cf0,_2cf1,_2cf2){return _2ceb("Sage.UI.Filters.EditFilterItems",[_2ce3,_2ce4,_2ce5],{templateString:_2cf1,widgetsInTemplate:true,id:"editFilterItems",store:null,activeFilters:"",filter:null,checkBoxes:null,allItems:null,filterPanel:null,parent:null,formatter:null,baseFilter:"",selectAllText:"Select All",findItemText:"Find Item:",findText:"Find",clearText:"Clear",dialogTitle:"Edit Filter Items",okText:"OK",cancelText:"Cancel",count:1000,loading:false,handles:null,mainHandles:null,safeCheck:true,checkBoxTemplate:new Simplate(["<input id=\"{%: $.id %}\" ","name=\"{%: $.name %}\" ","data-dojo-type=\"dijit.form.CheckBox\" ","data-dojo-props=\"label: '{%: $.name %}'\" ","class=\"editFilterCheckBox\" />","<label for=\"{%: $.id %}\">{%: $.itemName %}</label><br />"]),constructor:function(_2cf3){this.inherited(arguments);this.checkBoxes=[];this.allItems=[];this.handles=[];this.mainHandles=[];if(_2cf2){this.selectAllText=_2cf2.selectAllText;this.clearText=_2cf2.clearText;this.findItemText=_2cf2.findItemText;this.findText=_2cf2.findText;this.dialogTitle=_2cf2.dialogTitle;this.okText=_2cf2.okText;this.cancelText=_2cf2.cancelText;}},postCreate:function(){this.inherited(arguments);this.mainHandles.push(this.textFind.on("keyDown",lang.hitch(this,this._onFindMouseDown)));this.mainHandles.push(this.checkAll.on("click",lang.hitch(this,this._onCheckAllClick)));},_onCheckAllClick:function(){if(this.safeCheck){if(this.checkAll.checked){this._onSelectAllClick();}else{this._onClearAllClick();}}},showDialog:function(){this.requestData();lang.mixin(this.dialogNode,new _2cee());this.dialogNode.createHelpIconByTopic("editFilterItems");this.dialogNode.show();},hideDialog:function(){this.dialogNode.hide();},_onClearAllClick:function(){array.forEach(this.checkBoxes,function(_2cf4){var label=_2cf4.get("label"),index=array.indexOf(this.allItems,_2cf4.get("label"));if(index===-1){this.allItems.push(label);}_2cf4.set("checked",false);},this);},_onSelectAllClick:function(){array.forEach(this.checkBoxes,function(_2cf5){var label=_2cf5.get("label"),index=array.indexOf(this.allItems,_2cf5.get("label"));if(index>-1){this.allItems.splice(index,1);}_2cf5.set("checked",true);},this);},_onClearClick:function(){this.textFind.set("value","");this._onFindClick();},_onCancelClick:function(){this.textFind.set("value","");this._onFindClick();this.dialogNode.hide();this.allItems=[];},_onOKClick:function(){this.textFind.set("value","");this._onFindClick();var data=this.filterPanel._configuration._hiddenFilters||{},key=this.filterPanel._configuration._hiddenFiltersKey,_2cf6=Sage.Services.getService("ClientGroupContext"),_2cf7=_2cf6&&_2cf6.getContext(),prop=_2cf7.CurrentEntity+"_"+this.filter.filterName,items=[];if(!data[prop]){data[prop]={expanded:false,hidden:false};}data[prop].items=this.allItems;_2cef.setHiddenFilters(key,json.stringify(data));if(this.parent){this.parent.refresh();}this.dialogNode.hide();this.allItems=[];},uninitialize:function(){if(!this.contentNode){return;}array.forEach(this.mainHandles,function(_2cf8){_2cf8.remove();});this._destroyContent();this.checkBoxes=null;this.allItems=null;this.checkAll.destroy(false);this.buttonCancel.destroy(false);this.buttonOK.destroy(false);this.buttonFind.destroy(false);this.textFind.destroy(false);this.dialogNode.destroy(false);this.inherited(arguments);},requestData:function(){if(!this.loading){this._destroyContent();this.checkBoxes=[];this.activeFilters=this.store.request.getQueryArg("_activeFilter");this.store.request.setQueryArg("_activeFilter",this.baseFilter);}this.loading=true;this.store.fetch({onError:lang.hitch(this,this._onFetchError),onComplete:lang.hitch(this,this._onFetchComplete),count:this.count});},_onFindMouseDown:function(event){if(event.keyCode===13){this._onFindClick();}},_onFindClick:function(){if(!this.loading){var _2cf9=this.textFind.get("value");if(_2cf9){this.store.where="displayName like \"%"+this.textFind.get("value")+"%\"";}else{this.store.where="";}this.requestData();}},_destroyContent:function(){if(!this.contentNode){return;}array.forEach(_2ced.findWidgets(this.contentNode),function(_2cfa){_2cfa.destroy(false);});array.forEach(this.handles,function(_2cfb){_2cfb.remove();});this.handles=[];this.checkBoxes=[];this.contentNode.innerHTML="";},_onFetchError:function(){},_onCheckClick:function(e){var self=this.self,_2cfc=this.checkBox,name=_2cfc&&_2cfc.get("label"),index;if(_2cfc.checked){index=array.indexOf(self.allItems,name);if(index>-1){self.allItems.splice(index,1);}}else{self._safeCheckAll(false);self.allItems.push(name);}},_safeCheckAll:function(_2cfd){this.safeCheck=false;this.checkAll.set("checked",_2cfd);this.safeCheck=true;},_onFetchComplete:function(items){var entry,_2cfe,id,_2cff,_2d00=[],i,len=items.length,name,_2d01;for(i=0;i<len;i++){entry=items[i];_2d01=entry.$descriptor;if(this.formatter){_2d01=this.formatter(entry.$descriptor);}_2cfe=_2d01+" ("+entry.value+")";id=[this.filter.filterName,i].join("_");name=entry.name&&entry.name.trim();if(name){name=name.replace("'","\\'");_2d00.push(this.checkBoxTemplate.apply({id:id,name:name,itemName:_2cfe}));}}_2cff=_2cec.toDom(_2d00.join(""));_2cec.place(_2cff,this.contentNode,"last");this._finishedLoading();},_finishedLoading:function(){if(this.activeFilters){this.store.request.setQueryArg("_activeFilter",this.activeFilters);}this._parseCheckBoxes();this.setupCheckState();this.loading=false;},_parseCheckBoxes:function(){if(!this.contentNode){return;}var _2d02;_2cf0.parse(this.contentNode);_2d02=_2ced.findWidgets(this.contentNode);array.forEach(_2d02,function(_2d03){_2d03.on("click",lang.hitch({checkBox:_2d03,self:this},this._onCheckClick));this.checkBoxes.push(_2d03);},this);},setupCheckState:function(){var data=this.filterPanel._configuration._hiddenFilters||{},_2d04=Sage.Services.getService("ClientGroupContext"),_2d05=_2d04&&_2d04.getContext(),prop=_2d05.CurrentEntity+"_"+this.filter.filterName,_2d06=this.allItems.length===0;if(data[prop]){array.forEach(this.checkBoxes,function(_2d07){var _2d08,_2d09,label=_2d07.get("label");_2d08=array.indexOf(data[prop].items,label);_2d09=array.indexOf(this.allItems,label);if(_2d08>-1){_2d07.set("checked",false);if(_2d09===-1&&_2d06){this.allItems.push(label);}}else{_2d07.set("checked",true);}_2d09=array.indexOf(this.allItems,label);if(_2d09>-1){_2d07.set("checked",false);}else{_2d07.set("checked",true);}},this);this._safeCheckAll(this.allItems.length===0);}}});});},"Sage/UI/Filters/LookupFilter":function(){define(["dijit/_Widget","dijit/_Contained","dojo/NodeList-traverse","Sage/_Templated","Sage/_ActionMixin","dojo/string","dojo/_base/lang","dojo/_base/array","dijit/form/Select","dijit/form/TextBox","dojo/on","dojo/i18n!../nls/ConditionManager","dojo/_base/declare","Sage/Utility/Filters","dojo/json"],function(_2d0a,_2d0b,_2d0c,_2d0d,_2d0e,_2d0f,lang,array,_2d10,_2d11,on,_2d12,_2d13,_2d14,json){var _2d15=_2d13("Sage.UI.Filters.LookupFilter",[_2d0a,_2d0b,_2d0e,_2d0d],{widgetsInTemplate:true,widgetTemplate:new Simplate(["<div class=\"filter-type-checkbox filter-collapsed\">","<h3 data-action=\"toggleExpand\" data-dojo-attach-point=\"filterNameNode\">{%: $.filter.$descriptor || $.filter.filterName %}","</h3>","<ul class=\"filter-list\" data-dojo-attach-point=\"listNode\">","<select class=\"lookup-filter-operators\" data-dojo-attach-point=\"operators\" data-dojo-type=\"dijit.form.Select\"></select><br/>","<input class=\"filter-lookup-input\" data-dojo-attach-point=\"textInput\" data-dojo-type=\"dijit.form.TextBox\" />","</ul>","</div>"]),_loaded:false,_filterGroup:"default",appliedValues:null,_hasApplied:false,operatorsMapping:{"Equal":_2d12.equalTo,"NotEqual":_2d12.notEqualTo,"LessThan":_2d12.lessThan,"LessThanEqual":_2d12.equalOrLessThan,"GreaterThan":_2d12.greaterThan,"GreaterThanEqual":_2d12.equalOrGreaterThan,"StartsWith":_2d12.startingWith,"EndsWith":_2d12.endsWith,"Contains":_2d12.contains},filter:null,store:null,_autoSearchHandle:null,_autoSearchDelay:1000,_selectedOp:"Contains",postMixInProperties:function(){this.inherited(arguments);if(this.expanded){this.expanded=false;setTimeout(lang.hitch(this,this._toggleExpand),500);}else{if(this.appliedValues){setTimeout(lang.hitch(this,this._loadItems),500);}}},postCreate:function(){this.inherited(arguments);this.textInput.on("keyDown",lang.hitch(this,this._onInputKeyDown));if(this.appliedValues&&this.appliedValues.value){this.textInput.set("value",this.appliedValues.value.value);this._selectedOp=this.appliedValues.value.operator;this._hasApplied=true;}this.resolveDeferred();},_setupAutoSearch:function(){if(this._autoSearchHandle>0){window.clearTimeout(this._autoSearchHandle);}this._autoSearchHandle=setTimeout(lang.hitch(this,function(){this.doSearch();}),this._autoSearchDelay);},uninitialize:function(){this.inherited(arguments);},toggleExpand:function(_2d16,evt,el){this._toggleExpand();this._saveExpandState();},_toggleExpand:function(){this.expanded=!this.expanded;if(this.domNode){dojo.toggleClass(this.domNode,"filter-collapsed");}this._loadItems();},_loadItems:function(){var ops=this.filter&&this.filter.details&&this.filter.details.userLookupFilter&&this.filter.details.userLookupFilter.operators;if(this.operators){if(!this._loaded){this._loaded=true;array.forEach(ops,lang.hitch(this,function(op){var _2d17;_2d17=false;if(op===this._selectedOp){_2d17=true;}this.operators.addOption({disabled:false,label:this.operatorsMapping[op],selected:_2d17,value:op});}));this.operators.set("value",this._selectedOp);}}},_saveExpandState:function(){var data=this.parent._configuration._hiddenFilters||{},key=this.parent._configuration._hiddenFiltersKey,_2d18=Sage.Services.getService("ClientGroupContext"),_2d19=_2d18&&_2d18.getContext(),prop=_2d19.CurrentEntity+"_"+this.filter.filterName;if(!data[prop]){data[prop]={expanded:false,hidden:false};}data[prop].expanded=this.expanded;_2d14.setHiddenFilters(key,json.stringify(data));},_onInputKeyDown:function(event){if(event.keyCode===13||event.keyCode===0){this.doSearch();}else{this._setupAutoSearch();}},doSearch:function(){var value,name=this.filter.filterName,_2d1a=this;value={operator:this.operators.get("value"),value:this.textInput.get("value")};this.onSelectionChange(name,value,_2d1a);},onSelectionChange:function(name,value,_2d1b){dojo.publish(_2d0f.substitute("/ui/filters/${0}/change",[this._filterGroup]),[this.filter,name,value,_2d1b]);},resolveDeferred:function(){if(this.deferred){this.deferred=this.deferred.resolve();}}});return _2d15;});},"Sage/UI/Filters/EditFilters":function(){define(["dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/Dialog","dijit/form/Button","dijit/form/CheckBox","dojo/_base/declare","dojo/i18n","dojo/_base/array","dojo/_base/lang","dojo/dom-construct","dijit/registry","Sage/UI/Controls/_DialogHelpIconMixin","Sage/Utility/Filters","dojo/json","dojo/text!./templates/EditFilters.html","dojo/i18n!./nls/EditFilters"],function(_2d1c,_2d1d,_2d1e,_2d1f,_2d20,_2d21,_2d22,i18n,array,lang,_2d23,_2d24,_2d25,_2d26,json,_2d27){return _2d22("Sage.UI.Filters.EditFilters",[_2d1c,_2d1d,_2d1e],{templateString:_2d27,widgetsInTemplate:true,id:"editFilters",store:null,filterPanel:null,checkBoxes:null,selectAllText:"Select All",dialogTitle:"Edit Filters",okText:"OK",cancelText:"Cancel",constructor:function(){var _2d28=i18n.getLocalization("Sage.UI.Filters","EditFilters");this.inherited(arguments);this.checkBoxes=[];if(_2d28){this.selectAllText=_2d28.selectAllText;this.okText=_2d28.okText;this.cancelText=_2d28.cancelText;this.dialogTitle=_2d28.dialogTitle;}},postCreate:function(){this.inherited(arguments);this.checkAll.on("click",lang.hitch(this,this._onCheckAllClick));},_onCheckAllClick:function(){if(this.checkAll.checked){this._onSelectAllClick();}else{this._onClearAllClick();}},showDialog:function(){this.requestData();lang.mixin(this.dialogNode,new _2d25());this.dialogNode.createHelpIconByTopic("editFilters");this.dialogNode.show();},hideDialog:function(){this.dialogNode.hide();},uninitialize:function(){this._destroyContent();this.checkAll.destroy(false);this.buttonCancel.destroy(false);this.buttonOK.destroy(false);this.dialogNode.destroy(false);this.checkBoxes=null;this.inherited(arguments);},requestData:function(){this._destroyContent();if(this.store){this.store.fetch({onItem:lang.hitch(this,this._onFetchItem),onError:lang.hitch(this,this._onFetchError),onComplete:lang.hitch(this,this._onFetchComplete)});}},_onClearAllClick:function(){array.forEach(this.checkBoxes,function(_2d29){_2d29.set("checked",false);});},_onSelectAllClick:function(){array.forEach(this.checkBoxes,function(_2d2a){_2d2a.set("checked",true);});},_onCancelClick:function(){this.dialogNode.hide();},_onOKClick:function(){this.dialogNode.hide();var data=this.filterPanel._configuration._hiddenFilters,key=this.filterPanel._configuration._hiddenFiltersKey,_2d2b=Sage.Services.getService("ClientGroupContext"),_2d2c=_2d2b&&_2d2b.getContext();array.forEach(this.checkBoxes,function(_2d2d){var prop;prop=_2d2c.CurrentEntity+"_"+_2d2d.get("label");if(data[prop]){data[prop].hidden=!_2d2d.get("checked");}else{data[prop]={expanded:false,hidden:!_2d2d.get("checked"),items:[]};}});_2d26.setHiddenFilters(key,json.stringify(data));this.filterPanel.refreshFilters(false);},_destroyContent:function(){if(!this.contentNode){return;}array.forEach(_2d24.findWidgets(this.contentNode),function(_2d2e){_2d2e.destroy(false);});this.checkBoxes=[];this.contentNode.innerHTML="";},_onFetchError:function(){},_onFetchItem:function(entry){var type=entry.filterType,_2d2f=entry.filterName,_2d30=entry.$descriptor||entry.filterName,id=_2d2f+"_check",_2d31=new _2d21({"id":id,"label":_2d2f});_2d23.place(_2d31.domNode,this.contentNode,"last");_2d23.create("br",{},_2d31.domNode,"after");_2d23.create("label",{"for":id,innerHTML:_2d30},_2d31.domNode,"after");_2d31.on("click",lang.hitch(this,this._onCheckClick));this.checkBoxes.push(_2d31);},_onCheckClick:function(e){if(e.target&&e.target.checked===false){this.checkAll.set("checked",false);}},_onFetchComplete:function(){this.startup();this.setupCheckState();},setupCheckState:function(){var data=this.filterPanel._configuration._hiddenFilters||{},key=_2d26.getHiddenFiltersKey(),_2d32=Sage.Services.getService("ClientGroupContext"),_2d33=_2d32&&_2d32.getContext(),_2d34=false;this.checkAll.set("checked",true);this._onSelectAllClick();array.forEach(this.checkBoxes,function(_2d35){var prop;prop=_2d33.CurrentEntity+"_"+_2d35.get("label");if(data[prop]){if(data[prop].hidden){_2d35.set("checked",false);_2d34=true;}else{_2d35.set("checked",true);}}});this.checkAll.set("checked",!_2d34);}});});},"Sage/UI/Filters/EntityManagerEditFilters":function(){define(["dojo/string","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/Dialog","dijit/form/Button","dijit/form/CheckBox","dojo/_base/declare","dojo/i18n","dojo/_base/array","dojo/_base/lang","dojo/dom-construct","dijit/registry","Sage/UI/Controls/_DialogHelpIconMixin","Sage/Utility/Filters","dojo/json","dojo/text!./templates/EditFilters.html","dojo/i18n!./nls/EditFilters","Sage/Services/UserOptions"],function(_2d36,_2d37,_2d38,_2d39,_2d3a,_2d3b,_2d3c,_2d3d,i18n,array,lang,_2d3e,_2d3f,_2d40,_2d41,json,_2d42){return _2d3d("Sage.UI.Filters.EntityManagerEditFilters",[_2d37,_2d38,_2d39],{templateString:_2d42,widgetsInTemplate:true,id:"editFilters",store:null,filterPanel:null,checkBoxes:null,selectAllText:"Select All",dialogTitle:"Edit Filters",okText:"OK",cancelText:"Cancel",constructor:function(){var _2d43=i18n.getLocalization("Sage.UI.Filters","EditFilters");this.inherited(arguments);this.checkBoxes=[];if(_2d43){this.selectAllText=_2d43.selectAllText;this.okText=_2d43.okText;this.cancelText=_2d43.cancelText;this.dialogTitle=_2d43.dialogTitle;}},postCreate:function(){this.inherited(arguments);this.checkAll.on("click",lang.hitch(this,this._onCheckAllClick));},_onCheckAllClick:function(){if(this.checkAll.checked){this._onSelectAllClick();}else{this._onClearAllClick();}},showDialog:function(){this.requestData();lang.mixin(this.dialogNode,new _2d40());this.dialogNode.createHelpIconByTopic("editFilters");this.dialogNode.show();},hideDialog:function(){this.dialogNode.hide();},uninitialize:function(){this._destroyContent();this.checkAll.destroy(false);this.buttonCancel.destroy(false);this.buttonOK.destroy(false);this.dialogNode.destroy(false);this.checkBoxes=null;this.inherited(arguments);},requestData:function(){this._destroyContent();var _2d44,_2d45,_2d46,_2d47,data;_2d45=Sage.Services.getService("ClientGroupContext");_2d46=_2d45&&_2d45.getContext();_2d44=_2d36.substitute("METADATA_FILTERS_${0}_${1}",[_2d46.CurrentEntity,_2d46.CurrentGroupID]);_2d47=sessionStorage.getItem(_2d44);if(_2d47){data=json.parse(_2d47);for(var i=0;i<data.length;i++){this._onFetchItem(data[i]);}}else{var _2d48=[{"$key":"DisplayName","displayName":"Display Name","filterName":"Display Name","propertyName":"$descriptor","$descriptor":"Display Name","filterType":"comboWithArgument","details":{"userLookupFilter":{"operators":["Contains","EndsWith","StartsWith","Equal","NotEqual"]}}},{"$key":"EntityName","displayName":"Name","filterName":"Entity Name","propertyName":"name","$descriptor":"Name","filterType":"comboWithArgument","details":{"userLookupFilter":{"operators":["Contains","EndsWith","StartsWith","Equal","NotEqual"]}}},{"$key":"ModifiedDate","displayName":"Modified Date","filterName":"ModifiedDate","propertyName":"$updated","$descriptor":"Modified Date","filterType":"checkedList","propertyDataTypeId":"1f08f2eb-87c8-443b-a7c2-a51f590923f5","details":{"rangeFilter":{"characters":0,"ranges":[{"displayName":"Today","lower":":todaystart","rangeName":"Today","upper":":todayend"},{"displayName":"This Week","lower":":thisweekstart","rangeName":"ThisWeek","upper":":thisweekend"},{"displayName":"This Month","lower":":thismonthstart","rangeName":"ThisMonth","upper":":thismonthend"},{"displayName":"This Quarter","lower":":thisquarterstart","rangeName":"ThisQuarter","upper":":thisquarterend"},{"displayName":"This Year","lower":":thisyearstart","rangeName":"ThisYear","upper":":thisyearend"},{"displayName":"Last Week","lower":":lastweekstart","rangeName":"LastWeek","upper":":lastweekend"},{"displayName":"Last Month","lower":":lastmonthstart","rangeName":"LastMonth","upper":":lastmonthend"},{"displayName":"Last Quarter","lower":":lastquarterstart","rangeName":"LastQuarter","upper":":lastquarterend"},{"displayName":"Last Year","lower":":lastyearstart","rangeName":"LastYear","upper":":lastyearend"},{"displayName":"Week to Date","lower":":thisweekstart","rangeName":"WeektoDate","upper":":todayend"},{"displayName":"Month to Date","lower":":thismonthstart","rangeName":"MonthtoDate","upper":":todayend"},{"displayName":"Quarter to Date","lower":":thisquarterstart","rangeName":"QtrtoDate","upper":":todayend"},{"displayName":"Year to Date","lower":":thisyearstart","rangeName":"YeartoDate","upper":":todayend"},{"displayName":"Older","lower":null,"rangeName":"Older","upper":":beforelastyearend"}]}}},{"$key":"HasMeasure","displayName":"Measure","filterName":"HasMeasure","propertyName":"filters.filterType","$descriptor":"Has Metric","filterType":"checkedList","propertyDataTypeId":"ccc0f01d-7ba5-408e-8526-a3f942354b3a","details":{"distinctFilter":{"characters":0}}},{"$key":"HasFilter","displayName":"Filter","filterName":"HasFilter","propertyName":"filters.filterType","$descriptor":"Has Filter","filterType":"checkedList","propertyDataTypeId":"ccc0f01d-7ba5-408e-8526-a3f942354b3a","details":{"distinctFilter":{"characters":0}}}];sessionStorage.setItem(_2d44,json.stringify(_2d48));}this._onFetchComplete();},_onClearAllClick:function(){array.forEach(this.checkBoxes,function(_2d49){_2d49.set("checked",false);});},_onSelectAllClick:function(){array.forEach(this.checkBoxes,function(_2d4a){_2d4a.set("checked",true);});},_onCancelClick:function(){this.dialogNode.hide();},_onOKClick:function(){this.dialogNode.hide();var data=this.filterPanel._configuration._hiddenFilters,key=this.filterPanel._configuration._hiddenFiltersKey,_2d4b=Sage.Services.getService("ClientGroupContext"),_2d4c=_2d4b&&_2d4b.getContext();array.forEach(this.checkBoxes,function(_2d4d){var prop;prop=_2d4c.CurrentEntity+"_"+_2d4d.get("label");if(data[prop]){data[prop].hidden=!_2d4d.get("checked");}else{data[prop]={expanded:false,hidden:!_2d4d.get("checked"),items:[]};}});_2d41.setHiddenFilters(key,json.stringify(data));this.filterPanel.refreshFilters(false);},_destroyContent:function(){if(!this.contentNode){return;}array.forEach(_2d3f.findWidgets(this.contentNode),function(_2d4e){_2d4e.destroy(false);});this.checkBoxes=[];this.contentNode.innerHTML="";},_onFetchError:function(){},_onFetchItem:function(entry){var type=entry.filterType,_2d4f=entry.filterName,_2d50=entry.displayName||entry.filterName,id=_2d4f+"_check",_2d51=new _2d3c({"id":id,"label":_2d4f});_2d3e.place(_2d51.domNode,this.contentNode,"last");_2d3e.create("br",{},_2d51.domNode,"after");_2d3e.create("label",{"for":id,innerHTML:_2d50},_2d51.domNode,"after");_2d51.on("click",lang.hitch(this,this._onCheckClick));this.checkBoxes.push(_2d51);},_onCheckClick:function(e){if(e.target&&e.target.checked===false){this.checkAll.set("checked",false);}},_onFetchComplete:function(){this.startup();this.setupCheckState();},setupCheckState:function(){var data=this.filterPanel._configuration._hiddenFilters||{},key=_2d41.getHiddenFiltersKey(),_2d52=Sage.Services.getService("ClientGroupContext"),_2d53=_2d52&&_2d52.getContext(),_2d54=false;this.checkAll.set("checked",true);this._onSelectAllClick();array.forEach(this.checkBoxes,function(_2d55){var prop;prop=_2d53.CurrentEntity+"_"+_2d55.get("label");if(data[prop]){if(data[prop].hidden){_2d55.set("checked",false);_2d54=true;}else{_2d55.set("checked",true);}}});this.checkAll.set("checked",!_2d54);}});});},"Sage/UI/Filters/FilterPanel":function(){define(["dijit/_Widget","dijit/_Container","Sage/_Templated","Sage/Services/_ServiceMixin","Sage/_ConfigurationProvider","Sage/UI/Filters/CheckBoxFilter","Sage/UI/Filters/LookupFilter","Sage/UI/Filters/EditFilters","dojo/_base/declare","dojo/i18n","dojo/_base/array","dojo/_base/lang","dojo/query","dojo/on","dojo/i18n!./nls/FilterPanel","dojo/has","dojo/_base/sniff","dojo/ready","dojo/json","dojo/DeferredList","dojo/_base/Deferred","dojo/string","dijit/registry"],function(_2d56,_2d57,_2d58,_2d59,_2d5a,_2d5b,_2d5c,_2d5d,_2d5e,i18n,array,lang,query,on,nls,has,sniff,ready,json,_2d5f,_2d60,_2d61,_2d62){var _2d63=_2d5e("Sage.UI.Filters.FilterPanel",[_2d56,_2d57,_2d59,_2d58],{serviceMap:{"groupContextService":"ClientGroupContext","metaDataService":{type:"sdata",name:"metadata"}},knownFilterTypes:{"checkedList":_2d5b,"comboWithArgument":_2d5c},widgetsInTemplate:false,widgetTemplate:new Simplate(["<div class=\"filter-panel\" data-dojo-attach-point=\"containerNode\">","<div class=\"filter-edit\"><a href=\"#\" data-dojo-attach-point=\"clearAllFiltersNode\">{%= $.clearText %}</a> | <a href=\"#\" data-dojo-attach-point=\"editFiltersNode\">{%= $.editText %}</a></div>","<div class=\"filter-summary\" data-dojo-attach-point=\"filterSummaryNode\">{%= $.noneText %}</div>","</div>"]),_filterGroup:null,_filterSubscriptions:null,_configuration:null,_configurationConnects:null,_configurationProvider:null,_configurationProviderType:null,_appliedSet:null,configurationProvider:null,configurationProviderType:null,autoConfigure:true,store:null,filterGroup:"default",filterManager:null,_appliedFilters:null,_isApplyingConfig:false,_isFirstLoad:true,_editFilters:null,_editFiltersHandle:null,_isFetchingData:false,constructor:function(){var _2d64=Sage.Utility.getValue(window,"Sage.UI.DataStore.Filters");if(_2d64&&_2d64[this.filterGroup]){this._appliedSet=_2d64[this.filterGroup].applied;}if(nls){this.editText=nls.editText;this.noneText=nls.noneText;this.clearText=nls.clearText;}this._appliedFilters=[];dojo.subscribe("/group/context/changed",lang.hitch(this,function(){this._isApplyingConfig=false;this._isFetchingData=false;this._isFirstLoad=true;}));},postCreate:function(){this.inherited(arguments);this.startup();},startup:function(){this.inherited(arguments);if(!this._configurationProvider&&this._configurationProviderType){this.set("configurationProvider",new this._configurationProviderType());}if(this.autoConfigure){this.requestConfiguration();}},uninitialize:function(){this.inherited(arguments);if(this._editFilters){this._editFilters.destroy();this._editFiltersHandle.remove();}if(this._configurationProvider){this._configurationProvider.destroy();}},_setFilterGroupAttr:function(value){if(this._filterSubscriptions){dojo.forEach(this._filterSubscriptions,function(_2d65){this.unsubscribe(_2d65);},this);}this._filterGroup=value;this._filterSubscriptions=[];this._filterSubscriptions.push(this.subscribe(_2d61.substitute("/ui/filters/${0}/apply",[this._filterGroup]),lang.hitch(this,this._onApply)));this._filterSubscriptions.push(this.subscribe(_2d61.substitute("/ui/filters/${0}/change",[this._filterGroup]),lang.hitch(this,this._onChange)));this.subscribe(_2d61.substitute("/ui/filters/${0}/destroyFilters",[this._filterGroup]),lang.hitch(this,function(){this.destroyDescendants();this.filterSummaryNode.innerHTML=this.noneText;}));},_getFilterGroupAttr:function(){return this._filterGroup;},_onChange:function(_2d66,name,value,_2d67){var _2d68=false,_2d69,_2d6a=false;if((_2d66.details.lookupFilter)||(_2d66.details.userLookupFilter)){_2d6a=true;if(value){if(value.hasOwnProperty("value")){if((value.value===null)||(value.value==="")){_2d68=true;}}}}array.forEach(this._appliedFilters,function(_2d6b,i){if(_2d6b&&_2d6b.filterName===_2d66.filterName){_2d69=this._appliedFilters[i];var _2d6c=array.some(_2d69.items,function(item){return item===name;});if(_2d6c){if(_2d6a){if(value){if((value.value===null)||(value.value==="")){_2d69.items=[];this._appliedFilters.splice(i,1);}}}else{array.forEach(_2d69.items,function(item,x){if(item===name){_2d69.items.splice(x,1);}},this);}}else{_2d69.items.push(name);}_2d68=true;}},this);if(!_2d68){this._appliedFilters.push({"filterName":_2d66.filterName,"displayName":_2d66.$descriptor||_2d66.displayName,items:[name]});}this._updateFilterSummary();},_updateFilterSummary:function(){var _2d6d=[];array.forEach(array.filter(this._appliedFilters,function(_2d6e){return (typeof _2d6e.displayName!=="undefined"&&_2d6e.displayName!=="")&&(_2d6e.items&&_2d6e.items.length>0);}),function(_2d6f){_2d6d.push(_2d6f.displayName+" ("+_2d6f.items.length+")");},this);if(_2d6d.length===0){this.filterSummaryNode.innerHTML=this.noneText;}else{this.filterSummaryNode.innerHTML=_2d6d.join(", ");}},_onApply:function(_2d70,_2d71,_2d72){var key,items,_2d73,_2d74;if(_2d72&&this._configuration&&this._configuration.groupId){var _2d75=_2d72.getContext();if(_2d75.CurrentGroupID.toUpperCase()!==this._configuration.groupId.toUpperCase()){return;}}this._appliedFilters=[];this._appliedSet=_2d70;for(key in this._appliedSet){if(this._appliedSet.hasOwnProperty(key)){_2d74=_2d71[key];items=this._appliedSet[key];if(_2d74.details.lookupFilter||_2d74.details.userLookupFilter){if(items.hasOwnProperty("value")){this._onChange(_2d74,_2d74.filterName,items.value);}}else{for(_2d73 in items){if(items.hasOwnProperty(_2d73)){this._onChange(_2d74,_2d73);}}}}}if((this._configuration)){this.requestData();}},_handleConfigurationChange:function(){this.requestConfiguration();},_setConfigurationProviderAttr:function(_2d76){if(this._configurationConnects){dojo.forEach(this._configurationConnects,function(_2d77){this.disconnect(_2d77);},this);}if(this._configurationProvider&&this._configurationProvider!==_2d76){this._configurationProvider.destroy();}this._configurationProvider=_2d76;this._configurationConnects=[];if(this._configurationProvider){this._configurationConnects.push(this.connect(this._configurationProvider,"onConfigurationChange",this._handleConfigurationChange));this._configurationProvider.set("owner",this);if(this._created){if(this.autoConfigure){this.requestConfiguration();}}}},_getConfigurationProviderAttr:function(){return this._configurationProvider;},_setConfigurationProviderTypeAttr:function(value){this._configurationProviderType=value;},_getConfigurationProviderTypeAttr:function(){return this._configurationProviderType;},requestConfiguration:function(){if(this._configurationProvider&&!this._isApplyingConfig){this._isApplyingConfig=true;var _2d78={entityName:this._configuration?this._configuration.entityName||false:false,success:lang.hitch(this,this._applyConfiguration)};this._configurationProvider.requestConfiguration(_2d78);}},_applyConfiguration:function(_2d79){this._configuration=_2d79;this.store=_2d79.store;this.filterManager=_2d79.getFilterManager();if(this._editFilters){this._editFilters.destroy();this._editFiltersHandle.remove();}this._editFilters=new _2d5d({store:this.store,filterPanel:this});this._editFiltersHandle=on(this.editFiltersNode,"click",lang.hitch(this,function(){this._editFilters.showDialog();}));on(this.clearAllFiltersNode,"click",lang.hitch(this,this._clearAllFilters));this._appliedSet={};this._appliedFilters=[];this._updateFilterSummary();this.requestData(function(){var _2d7a=Sage.Services.getService("ClientGroupContext");_2d7a.publishFiltersApplied();});this._ensureApplyFilterWasPublished();},_ensureApplyFilterWasPublished:function(){var _2d7b,_2d7c;_2d7b=Sage.Services.getService("ClientGroupContext");_2d7c=_2d7b&&_2d7b.getContext();if(_2d7c&&_2d7c.AppliedFilterInfo){_2d7b.publishFiltersApplied(_2d7c.AppliedFilterInfo);}},_clearAllFilters:function(){var q=query("li.filter-selected",this.containerNode),evt;array.forEach(q,function(node){if(node.click){node.click();}else{evt=document.createEvent("MouseEvents");evt.initMouseEvent("click",true,true,window,0,0,0,0,0,false,false,false,false,0,null);node.dispatchEvent(evt);}});q=query(".filter-lookup-input input",this.containerNode);array.forEach(q,function(node){if(node.value){node.value="";if(has("ie")<9){node.fireEvent("onkeydown");}else{evt=document.createEvent("KeyboardEvent");if(evt.initKeyEvent){evt.initKeyEvent("keydown",true,true,null,false,false,false,false,13,0);}else{evt.initKeyboardEvent("keydown",true,true,null,13,null,null,1,null);}node.dispatchEvent(evt);}}});q=query(".lookup-filter-operators",this.containerNode);array.forEach(q,function(node){if(node.id){var _2d7d=_2d62.byId(node.id);if(_2d7d&&_2d7d.options){var _2d7e="Contains";array.some(_2d7d.options,function(_2d7f,idx){if(idx===0){_2d7e=_2d7f.value;}if(_2d7f.value==="Contains"){_2d7e=_2d7f.value;return true;}return false;});_2d7d.set("value",_2d7e);}}});},refreshFilters:function(_2d80){this._refreshing=true;if(_2d80!==true){this._clearAllFilters();}this.requestConfiguration();},requestData:function(_2d81){if(this._isFetchingData){return;}this._isFetchingData=true;this.destroyDescendants();var _2d82,_2d83,_2d84,_2d85,data;_2d83=Sage.Services.getService("ClientGroupContext");_2d84=_2d83&&_2d83.getContext();_2d82=_2d61.substitute("METADATA_FILTERS_${0}_${1}",[_2d84.CurrentEntity,_2d84.CurrentGroupID]);_2d85=sessionStorage.getItem(_2d82);if(_2d85){data=json.parse(_2d85);this._iterateFetchedItems(data);if(_2d81){_2d81();}}else{if(this.store){this.store.fetch({onError:lang.hitch(this,this._onFetchError),onComplete:lang.hitch(this,this._onFetchComplete,_2d82,_2d81)});}}},onRequestDataFailure:function(_2d86){},_onFetchError:function(){this._isFetchingData=false;},_onFetchItem:function(entry){var data=this._configuration._hiddenFilters||{},_2d87=Sage.Services.getService("ClientGroupContext"),_2d88=_2d87&&_2d87.getContext(),prop=_2d88.CurrentEntity+"_"+entry.filterName,_2d89=false,type=entry.filterType,_2d8a=false,_2d8b=new _2d60(),_2d8c=false;if(data[prop]){_2d89=data[prop].hidden;_2d8a=data[prop].expanded;}if(this.knownFilterTypes[type]){if(_2d89===false||typeof _2d89==="undefined"||_2d89===null){this.addChild(new this.knownFilterTypes[type]({configurationProvider:this._configurationProvider,filter:entry,store:this._configuration.createStoreForFilter(entry),appliedValues:this._appliedSet&&this._appliedSet[entry.$key],parent:this,groupId:_2d88.CurrentGroupID,expanded:_2d8a,deferred:_2d8b}));_2d8c=true;}}if(!_2d8c){_2d8b.resolve();}return _2d8b;},_onFetchComplete:function(_2d8d,_2d8e,items){sessionStorage.setItem(_2d8d,json.stringify(items));this._iterateFetchedItems(items);if(_2d8e){_2d8e();}},_iterateFetchedItems:function(items){if(!items||!items.length){return;}var i,_2d8f,_2d90;_2d8f=items.length;_2d90=[];for(i=0;i<_2d8f;i++){_2d90[i]=this._onFetchItem(items[i]);}_2d90=new _2d5f(_2d90);_2d90.then(lang.hitch(this,function(){this._isFetchingData=false;this._isApplyingConfig=false;if(this._isFirstLoad){this._isFirstLoad=false;this.requestData(function(){var _2d91=Sage.Services.getService("ClientGroupContext");_2d91.publishFiltersApplied();});}}));}});return _2d63;});},"Sage/UI/Filters/EntityManagerFilterPanel":function(){define(["dijit/_Widget","dijit/_Container","Sage/_Templated","Sage/Services/_ServiceMixin","Sage/_ConfigurationProvider","Sage/UI/Filters/EntityManagerCheckBoxFilter","Sage/UI/Filters/LookupFilter","Sage/UI/Filters/EntityManagerEditFilters","dojo/_base/declare","dojo/i18n","dojo/_base/array","dojo/_base/lang","dojo/query","dojo/on","dojo/i18n!./nls/FilterPanel","dojo/has","dojo/_base/sniff","dojo/ready","dojo/json","dojo/DeferredList","dojo/_base/Deferred","dojo/string","Sage/Services/UserOptions"],function(_2d92,_2d93,_2d94,_2d95,_2d96,_2d97,_2d98,_2d99,_2d9a,i18n,array,lang,query,on,nls,has,sniff,ready,json,_2d9b,_2d9c,_2d9d){var _2d9e=_2d9a("Sage.UI.Filters.EntityManagerFilterPanel",[_2d92,_2d93,_2d95,_2d94],{serviceMap:{"groupContextService":"ClientGroupContext","metaDataService":{type:"sdata",name:"metadata"}},knownFilterTypes:{"checkedList":_2d97,"comboWithArgument":_2d98},widgetsInTemplate:false,widgetTemplate:new Simplate(["<div class=\"filter-panel\" data-dojo-attach-point=\"containerNode\">","<div class=\"filter-edit\"><a href=\"#\" data-dojo-attach-point=\"clearAllFiltersNode\">{%= $.clearText %}</a> | <a href=\"#\" data-dojo-attach-point=\"editFiltersNode\">{%= $.editText %}</a></div>","<div class=\"filter-summary\" data-dojo-attach-point=\"filterSummaryNode\">{%= $.noneText %}</div>","</div>"]),_filterGroup:null,_filterSubscriptions:null,_configuration:null,_configurationConnects:null,_configurationProvider:null,_configurationProviderType:null,_appliedSet:null,configurationProvider:null,configurationProviderType:null,autoConfigure:true,store:null,filterGroup:"default",filterManager:null,_appliedFilters:null,_isApplyingConfig:false,_isFirstLoad:true,_editFilters:null,_editFiltersHandle:null,_isFetchingData:false,constructor:function(){var _2d9f=Sage.Utility.getValue(window,"Sage.UI.DataStore.Filters");if(_2d9f&&_2d9f[this.filterGroup]){this._appliedSet=_2d9f[this.filterGroup].applied;}if(nls){this.editText=nls.editText;this.noneText=nls.noneText;this.clearText=nls.clearText;}this._appliedFilters=[];dojo.subscribe("/group/context/changed",lang.hitch(this,function(){this._isApplyingConfig=false;this._isFetchingData=false;this._isFirstLoad=true;}));lang.mixin(this,nls);},postCreate:function(){this.inherited(arguments);this.startup();},startup:function(){this.inherited(arguments);if(!this._configurationProvider&&this._configurationProviderType){this.set("configurationProvider",new this._configurationProviderType());}if(this.autoConfigure){this.requestConfiguration();}},uninitialize:function(){this.inherited(arguments);if(this._editFilters){this._editFilters.destroy();this._editFiltersHandle.remove();}if(this._configurationProvider){this._configurationProvider.destroy();}},_setFilterGroupAttr:function(value){if(this._filterSubscriptions){dojo.forEach(this._filterSubscriptions,function(_2da0){this.unsubscribe(_2da0);},this);}this._filterGroup=value;this._filterSubscriptions=[];this._filterSubscriptions.push(this.subscribe(_2d9d.substitute("/ui/filters/${0}/apply",[this._filterGroup]),lang.hitch(this,this._onApply)));this._filterSubscriptions.push(this.subscribe(_2d9d.substitute("/ui/filters/${0}/change",[this._filterGroup]),lang.hitch(this,this._onChange)));this.subscribe(_2d9d.substitute("/ui/filters/${0}/destroyFilters",[this._filterGroup]),lang.hitch(this,function(){this.destroyDescendants();this.filterSummaryNode.innerHTML=this.noneText;}));},_getFilterGroupAttr:function(){return this._filterGroup;},_onChange:function(_2da1,name,value,_2da2){var _2da3=false,_2da4,_2da5=false;if((_2da1.details.lookupFilter)||(_2da1.details.userLookupFilter)){_2da5=true;if(value){if(value.hasOwnProperty("value")){if((value.value===null)||(value.value==="")){_2da3=true;}}}}array.forEach(this._appliedFilters,function(_2da6,i){if(_2da6&&(_2da6.displayName===_2da1.filterName||_2da6.displayName===_2da1.displayName)){_2da4=this._appliedFilters[i];var _2da7=true;if(!_2da5){_2da7=array.some(_2da4.items,function(item){return item===name;});}if(_2da7){if(_2da5){if(value){if((value.value===null)||(value.value==="")){_2da4.items=[];this._appliedFilters.splice(i,1);}}}else{array.forEach(_2da4.items,function(item,x){if(item===name){_2da4.items.splice(x,1);}},this);}}else{_2da4.items.push(name);}_2da3=true;}},this);if(!_2da3){this._appliedFilters.push({"filterName":_2da1.filterName,"displayName":_2da1.$descriptor||_2da1.displayName,items:[name]});}this._updateFilterSummary();},_updateFilterSummary:function(){var _2da8=[];array.forEach(array.filter(this._appliedFilters,function(_2da9){return (typeof _2da9.displayName!=="undefined"&&_2da9.displayName!=="")&&(_2da9.items&&_2da9.items.length>0);}),function(_2daa){_2da8.push(_2daa.displayName+" ("+_2daa.items.length+")");},this);if(_2da8.length===0){this.filterSummaryNode.innerHTML=this.noneText;}else{this.filterSummaryNode.innerHTML=_2da8.join(", ");}},_onApply:function(_2dab,_2dac,_2dad){var key,items,_2dae,_2daf;if(_2dad&&this._configuration&&this._configuration.groupId){var _2db0=_2dad.getContext();if(_2db0.CurrentGroupID.toUpperCase()!==this._configuration.groupId.toUpperCase()){return;}}this._appliedFilters=[];this._appliedSet=_2dab;for(key in this._appliedSet){if(this._appliedSet.hasOwnProperty(key)){_2daf=_2dac[key];items=this._appliedSet[key];if(_2daf.details.lookupFilter||_2daf.details.userLookupFilter){if(items.hasOwnProperty("value")){this._onChange(_2daf,_2daf.filterName,items.value);}}else{for(_2dae in items){if(items.hasOwnProperty(_2dae)){this._onChange(_2daf,_2dae);}}}}}if((this._configuration)){this.requestData();}},_handleConfigurationChange:function(){this.requestConfiguration();},_setConfigurationProviderAttr:function(_2db1){if(this._configurationConnects){dojo.forEach(this._configurationConnects,function(_2db2){this.disconnect(_2db2);},this);}if(this._configurationProvider&&this._configurationProvider!==_2db1){this._configurationProvider.destroy();}this._configurationProvider=_2db1;this._configurationConnects=[];if(this._configurationProvider){this._configurationConnects.push(this.connect(this._configurationProvider,"onConfigurationChange",this._handleConfigurationChange));this._configurationProvider.set("owner",this);if(this._created){if(this.autoConfigure){this.requestConfiguration();}}}},_getConfigurationProviderAttr:function(){return this._configurationProvider;},_setConfigurationProviderTypeAttr:function(value){this._configurationProviderType=value;},_getConfigurationProviderTypeAttr:function(){return this._configurationProviderType;},requestConfiguration:function(){if(this._configurationProvider&&!this._isApplyingConfig){this._isApplyingConfig=true;this._configurationProvider.requestConfiguration({success:lang.hitch(this,this._applyConfiguration)});}},_applyConfiguration:function(_2db3){this._configuration=_2db3;this.store=_2db3.store;this.filterManager=_2db3.getFilterManager();if(this._editFilters){this._editFilters.destroy();this._editFiltersHandle.remove();}this._editFilters=new _2d99({store:this.store,filterPanel:this});this._editFiltersHandle=on(this.editFiltersNode,"click",lang.hitch(this,function(){this._editFilters.showDialog();}));on(this.clearAllFiltersNode,"click",lang.hitch(this,this._clearAllFilters));this._appliedSet={};this._appliedFilters=[];this._updateFilterSummary();this.requestData(function(){var _2db4=Sage.Services.getService("ClientGroupContext");_2db4.publishFiltersApplied();});this._ensureApplyFilterWasPublished();},_ensureApplyFilterWasPublished:function(){var _2db5,_2db6;_2db5=Sage.Services.getService("ClientGroupContext");_2db6=_2db5&&_2db5.getContext();if(_2db6&&_2db6.AppliedFilterInfo){_2db5.publishFiltersApplied(_2db6.AppliedFilterInfo);}},_clearAllFilters:function(){var q=query("li.filter-selected",this.containerNode),evt;array.forEach(q,function(node){if(node.click){node.click();}else{evt=document.createEvent("MouseEvents");evt.initMouseEvent("click",true,true,window,0,0,0,0,0,false,false,false,false,0,null);node.dispatchEvent(evt);}});q=query(".filter-lookup-input input",this.containerNode);array.forEach(q,function(node){if(node.value){node.value="";if(has("ie")<9){node.fireEvent("onkeydown");}else{evt=document.createEvent("KeyboardEvent");if(evt.initKeyEvent){evt.initKeyEvent("keydown",true,true,null,false,false,false,false,13,0);}else{evt.initKeyboardEvent("keydown",true,true,null,13,null,null,1,null);}node.dispatchEvent(evt);}}});},refreshFilters:function(_2db7){this._refreshing=true;if(_2db7!==true){this._clearAllFilters();}this.requestConfiguration();},requestData:function(_2db8){var svc=Sage.Services.getService("RoleSecurityService");if(svc){if(svc.hasAccess("Administration/EntityManager/Entities/View")){}else{return;}}if(this._isFetchingData){return;}this._isFetchingData=true;this.destroyDescendants();var _2db9,_2dba,_2dbb,_2dbc,data;_2dba=Sage.Services.getService("ClientGroupContext");_2dbb=_2dba&&_2dba.getContext();_2db9=_2d9d.substitute("METADATA_FILTERS_${0}_${1}",[_2dbb.CurrentEntity,_2dbb.CurrentGroupID]);_2dbc=sessionStorage.getItem(_2db9);if(_2dbc){data=json.parse(_2dbc);this._iterateFetchedItems(data);if(_2db8){_2db8();}}else{var _2dbd=[{"$key":"DisplayName","displayName":this.filterDisplayName,"filterName":"Display Name","propertyName":"$descriptor","$descriptor":this.filterDisplayName,"filterType":"comboWithArgument","details":{"userLookupFilter":{"operators":["Contains","EndsWith","StartsWith","Equal","NotEqual"]}}},{"$key":"EntityName","displayName":this.filterName,"filterName":"Entity Name","propertyName":"name","$descriptor":this.filterName,"filterType":"comboWithArgument","details":{"userLookupFilter":{"operators":["Contains","EndsWith","StartsWith","Equal","NotEqual"]}}},{"$key":"ModifiedDate","displayName":this.filterModifiedDate,"filterName":"ModifiedDate","propertyName":"$updated","$descriptor":this.filterModifiedDate,"filterType":"checkedList","propertyDataTypeId":"1f08f2eb-87c8-443b-a7c2-a51f590923f5","details":{"rangeFilter":{"characters":0,"ranges":[{"displayName":"Today","lower":":todaystart","rangeName":"Today","upper":":todayend"},{"displayName":"This Week","lower":":thisweekstart","rangeName":"ThisWeek","upper":":thisweekend"},{"displayName":"This Month","lower":":thismonthstart","rangeName":"ThisMonth","upper":":thismonthend"},{"displayName":"This Quarter","lower":":thisquarterstart","rangeName":"ThisQuarter","upper":":thisquarterend"},{"displayName":"This Year","lower":":thisyearstart","rangeName":"ThisYear","upper":":thisyearend"},{"displayName":"Last Week","lower":":lastweekstart","rangeName":"LastWeek","upper":":lastweekend"},{"displayName":"Last Month","lower":":lastmonthstart","rangeName":"LastMonth","upper":":lastmonthend"},{"displayName":"Last Quarter","lower":":lastquarterstart","rangeName":"LastQuarter","upper":":lastquarterend"},{"displayName":"Last Year","lower":":lastyearstart","rangeName":"LastYear","upper":":lastyearend"},{"displayName":"Week to Date","lower":":thisweekstart","rangeName":"WeektoDate","upper":":todayend"},{"displayName":"Month to Date","lower":":thismonthstart","rangeName":"MonthtoDate","upper":":todayend"},{"displayName":"Quarter to Date","lower":":thisquarterstart","rangeName":"QtrtoDate","upper":":todayend"},{"displayName":"Year to Date","lower":":thisyearstart","rangeName":"YeartoDate","upper":":todayend"},{"displayName":"Older","lower":null,"rangeName":"Older","upper":":beforelastyearend"}]}}},{"$key":"HasMeasure","displayName":this.filterHasMetric,"filterName":"HasMeasure","propertyName":"filters.filterType","$descriptor":this.filterHasMetric,"filterType":"checkedList","propertyDataTypeId":"ccc0f01d-7ba5-408e-8526-a3f942354b3a","details":{"distinctFilter":{"characters":0}}},{"$key":"HasFilter","displayName":this.filterHasFilter,"filterName":"HasFilter","propertyName":"filters.filterType","$descriptor":this.filterHasFilter,"filterType":"checkedList","propertyDataTypeId":"ccc0f01d-7ba5-408e-8526-a3f942354b3a","details":{"distinctFilter":{"characters":0}}}];this._onFetchComplete(_2db9,_2db8,_2dbd);}},onRequestDataFailure:function(_2dbe){},_onFetchError:function(){this._isFetchingData=false;},_onFetchItem:function(entry){var data=this._configuration._hiddenFilters||{},_2dbf=Sage.Services.getService("ClientGroupContext"),_2dc0=_2dbf&&_2dbf.getContext(),prop=_2dc0.CurrentEntity+"_"+entry.filterName,_2dc1=false,type=entry.filterType,_2dc2=false,_2dc3=new _2d9c(),_2dc4=false;if(data[prop]){_2dc1=data[prop].hidden;_2dc2=data[prop].expanded;}if(this.knownFilterTypes[type]){if(_2dc1===false||typeof _2dc1==="undefined"||_2dc1===null){this.addChild(new this.knownFilterTypes[type]({configurationProvider:this._configurationProvider,filter:entry,store:this._configuration.createStoreForFilter(entry),appliedValues:this._appliedSet&&this._appliedSet[entry.$key],parent:this,groupId:_2dc0.CurrentGroupID,expanded:_2dc2,deferred:_2dc3}));_2dc4=true;}}if(!_2dc4){_2dc3.resolve();}return _2dc3;},_onFetchComplete:function(_2dc5,_2dc6,items){sessionStorage.setItem(_2dc5,json.stringify(items));this._iterateFetchedItems(items);if(_2dc6){_2dc6();}},_iterateFetchedItems:function(items){if(!items||!items.length){return;}var i,_2dc7,_2dc8;_2dc7=items.length;_2dc8=[];for(i=0;i<_2dc7;i++){_2dc8[i]=this._onFetchItem(items[i]);}_2dc8=new _2d9b(_2dc8);_2dc8.then(lang.hitch(this,function(){this._isFetchingData=false;this._isApplyingConfig=false;if(this._isFirstLoad){this._isFirstLoad=false;this.requestData(function(){var _2dc9=Sage.Services.getService("ClientGroupContext");_2dc9.publishFiltersApplied();});}}));}});return _2d9e;});},"Sage/UI/Filters/EntityManagerCheckBoxFilter":function(){define(["dijit/_Widget","dijit/_Contained","dojo/NodeList-traverse","Sage/_Templated","Sage/Services/_ServiceMixin","Sage/_ActionMixin","dojo/string","dojo/on","dojo/_base/lang","dojo/dom-construct","./EditFilterItems","dojo/_base/array","dojo/query","dojo/dom-attr","dojo/i18n!./nls/CheckBoxFilter","Sage/Utility","Sage/Utility/Filters","dojo/json","dijit/registry","dojo/_base/declare","dojo/_base/Deferred","dojo/dom-class","dojo/_base/connect","dojo/request","Sage/UI/Filters/FilterManager","Sage/Data/SDataServiceRegistry","dojo/date","dojox/storage/LocalStorageProvider"],function(_2dca,_2dcb,_2dcc,_2dcd,_2dce,_2dcf,_2dd0,on,lang,_2dd1,_2dd2,array,query,_2dd3,nls,_2dd4,_2dd5,json,_2dd6,_2dd7,_2dd8,_2dd9,_2dda,_2ddb,_2ddc,_2ddd,_2dde,_2ddf){var _2de0=_2dd7("Sage.UI.Filters.EntityManagerCheckBoxFilter",[_2dca,_2dcb,_2dce,_2dcf,_2dcd],{attributeMap:{"content":{node:"listNode",type:"innerHTML"}},serviceMap:{"groupContextService":"ClientGroupContext","systemDataService":{type:"sdata",name:"system"}},actionsFrom:"click",widgetsInTemplate:false,widgetTemplate:new Simplate(["<div class=\"filter-type-checkbox filter-collapsed\">","<h3 data-action=\"toggleExpand\" data-dojo-attach-point=\"filterNameNode\">{%: $.filter.$descriptor || $.filter.filterName %}","</h3>","<ul class=\"filter-loading-indicator\"><li><span>{%: $.loadingText %}</span></li></ul>","<a href=\"#\" class=\"filter-clear\" data-dojo-attach-point=\"clearLinkNode\">{%: $.clearText %}</a>","<span class=\"filter-sep\" data-dojo-attach-point=\"linkSep\"></span>","<a href=\"#\" class=\"filter-edit-items\" data-dojo-attach-point=\"moreLinkNode\"></a>","<ul class=\"filter-list\" data-dojo-attach-point=\"listNode\"></ul>","</div>"]),itemTemplate:new Simplate(["<li data-action=\"toggleSelect\" class=\"{%= $.selected ? \"filter-selected\" : \"\" %}\" data-name=\"{%= $.name %}\" data-selected=\"{%= !!$.selected %}\" ","role=\"checkbox\" aria-checked=\"{%= !!$.selected %}\">","<div>","<span class=\"p-selection\">&nbsp;</span>","<span class=\"p-label\">{%: $$._formatLabelText($.$descriptor, $.name) %}</span>","{% if ($.value > -1) { %}","&nbsp;<span class=\"p-spacer\">(</span>","<span class=\"p-count\">{%: $.value %}</span>","<span class=\"p-spacer\"> {%: $.ofText %} </span>","<span class=\"p-total\">{%: $.value %}</span>","<span class=\"p-spacer\">)</span>","{% } %}","</div>","</li>"]),_activeFilterCount:0,_loaded:false,_selected:null,_ranges:null,_filterGroup:null,_filterSubscriptions:null,appliedValues:null,parent:null,_originalActiveFilter:"",nullName:"SLX_NULL",emptyName:"SLX_EMPTY",filterGroup:"default",filter:null,store:null,editFilterItems:null,editFilterItemsHandle:null,output:null,entries:[],expanded:false,FILTER_UPDATE_DELAY:1000,lazyUpdateCounts:null,numModDateFiltersCnt:14,count:1000,loading:true,groupId:"",constructor:function(){this.inherited(arguments);this.output=[];this.entries=[];lang.mixin(this,nls);},postMixInProperties:function(){this.inherited(arguments);this._selected={};var _2de1=this._isRangeFilter();if(_2de1){this.store.request.setQueryArg("orderby","");this.compileRanges(_2de1.ranges);}if(this.expanded){this.expanded=false;setTimeout(lang.hitch(this,this._toggleExpand),500);}else{if(this.appliedValues){setTimeout(lang.hitch(this,this._loadItems),500);}else{this.resolveDeferred();}}if(this.store&&this.store.request&&this.store.request.getQueryArg){this._originalActiveFilter=this.store.request.getQueryArg("_activeFilter");}},postCreate:function(){this.inherited(arguments);var _2de2=false;if(this.configurationProvider.getFilterFormatter){var _2de3=this.configurationProvider.getFilterFormatter(this.filter);if(_2de3){_2de2=true;}}if(!this._isDistinctFilter()||_2de2){_2dd1.destroy(this.moreLinkNode);_2dd1.destroy(this.linkSep);}else{this.editFilterItemsHandle=on(this.moreLinkNode,"click",lang.hitch(this,this._moreLinkClicked));}on(this.clearLinkNode,"click",lang.hitch(this,this._clearLinkClicked));var id=this.filter.$key+"_editFilterItems",_2de4=_2dd6.byId(id);this.editFilterItems=_2de4||new _2dd2({id:id,store:this.store,filter:this.filter,filterPanel:this.parent,parent:this});},_clearLinkClicked:function(){var q=query("li.filter-selected",this.listNode),evt;array.forEach(q,function(node){if(node.click){node.click();}else{evt=document.createEvent("MouseEvents");evt.initMouseEvent("click",true,true,window,0,0,0,0,0,false,false,false,false,0,null);node.dispatchEvent(evt);}});},_moreLinkClicked:function(e){if(this._originalActiveFilter){this.editFilterItems.baseFilter=this._originalActiveFilter;}this.editFilterItems.showDialog();e.cancelBubble=true;},uninitialize:function(){this.inherited(arguments);if(this.editFilterItems){this.editFilterItems.destroy(false);}if(this.editFilterItemsHandle){this.editFilterItemsHandle.remove();}},_setFilterGroupAttr:function(value){if(this._filterSubscriptions){array.forEach(this._filterSubscriptions,function(_2de5){this.unsubscribe(_2de5);},this);}this._filterGroup=value;this._filterSubscriptions=[];this._filterSubscriptions.push(this.subscribe(_2dd0.substitute("/ui/filters/${0}/change",[this._filterGroup]),this._onChange),this.subscribe(_2dd0.substitute("/ui/filters/${0}/clear",[this._filterGroup]),this._onClear),this.subscribe(_2dd0.substitute("/ui/filters/${0}/refresh",[this._filterGroup]),lang.hitch(this,this._onRefresh)));},_onRefresh:function(_2de6,_2de7,_2de8){this.appliedValues=_2de6;this.updateCounts();},_updateActiveFilters:function(){var _2de9=this._getFilterManager(),_2dea=[],q=false;if(_2de9){q=_2de9.createQuery();}if(!this.expanded){return;}if(q===false){q="";}else{_2dea.push(q);}if(this._originalActiveFilter){_2dea.push(this._originalActiveFilter);}q=_2dea.length>1?_2dea.join(" AND "):_2dea.join("");return q;},refresh:function(){if(this._loaded){array.forEach(query("*",this.listNode),function(item){_2dd1.destroy(item);});this.requestData();}},_onChange:function(_2deb,name,value,_2dec){name=this._transformFilterItemName(name);if(_2dec!==this&&_2deb.$key===this.filter.$key){query(_2dd0.substitute("> [data-name=\"${0}\"]",[name]),this.listNode).forEach(function(el){_2dd3.set(el,"data-selected",(!!value).toString());_2dd9.toggle(el,"filter-selected",!!value);});}},_onClear:function(_2ded,_2dee){if(_2dee!==this&&(!_2ded||_2ded.$key===this.filter.$key)){query("> [data-selected=\"true\"]",this.listNode).forEach(function(el){_2dd3.set(el,"data-selected","false");_2dd9.toggle(el,"filter-selected",false);});}},_getFilterGroupAttr:function(){return this._filterGroup;},_formatLabelText:function(value,name){if(name===this.nullName){return this.nullText;}else{if(name===this.emptyName){return this.emptyText;}}if(this.configurationProvider){if(this.configurationProvider.getFilterFormatter){var _2def=this.configurationProvider.getFilterFormatter(this.filter);if(_2def){return _2def(value);}}}return value;},_isDistinctFilter:function(){return this.filter&&this.filter.details&&this.filter.details.distinctFilter;},_isRangeFilter:function(){return this.filter&&this.filter.details&&this.filter.details.rangeFilter;},compileRanges:function(_2df0){var i=0;this._ranges={};for(i=0;i<_2df0.length;i++){this._ranges[this._transformFilterItemName(_2df0[i].rangeName)]=_2df0[i];}},_saveExpandState:function(){var data=this.parent._configuration._hiddenFilters||{},key=this.parent._configuration._hiddenFiltersKey,_2df1=Sage.Services.getService("ClientGroupContext"),_2df2=_2df1&&_2df1.getContext(),prop=_2df2.CurrentEntity+"_"+this.filter.filterName;if(!data[prop]){data[prop]={expanded:false,hidden:false};}data[prop].expanded=this.expanded;_2dd5.setHiddenFilters(key,json.stringify(data));},toggleExpand:function(_2df3,evt,el){this._toggleExpand();this._saveExpandState();},_toggleExpand:function(){this.expanded=!this.expanded;if(this.domNode){_2dd9.toggle(this.domNode,"filter-collapsed");}this._loadItems();},_loadItems:function(){if(!this._loaded){this._loaded=true;this.requestData();if(this.appliedValues){this.updateCounts();}}else{this.updateCounts();}},toggleSelect:function(_2df4,evt,el){var _2df5=/^true$/i.test(_2df4.selected),name=_2df4.name,value=!_2df5&&(this._isRangeFilter()?this._ranges[name]:name);this.onSelectionChange(this.filter,name,value,this);_2dd3.set(el,"data-selected",(!_2df5).toString());_2dd3.set(el,"aria-checked",(!_2df5).toString());_2dd9.toggle(el,"filter-selected",!_2df5);},onSelectionChange:function(_2df6,name,value,_2df7){_2dda.publish(_2dd0.substitute("/ui/filters/${0}/change",[this._filterGroup]),[_2df6,name,value,_2df7]);},updateCounts:function(){if(!this.lazyUpdateCounts){this.lazyUpdateCounts=_2dd4.debounce(lang.hitch(this,function(){if(this.expanded){query("li[data-name] div span.p-count",this.listNode).forEach(function(node){node.innerHTML="0";});var where=this._updateActiveFilters();var _2df8=_2ddd.getSDataService("metadata");var _2df9=new Sage.SData.Client.SDataResourcePropertyRequest(_2df8);_2df9.setResourceKind("entities").setQueryArg("select","filters/filterType").setQueryArg("where",where).setQueryArg("format","json").setQueryArg("Count","500");_2df9.readFeed({success:function(_2dfa){this._onSuccessCount(_2dfa);},error:function(error){if(error){console.error(error);}},scope:this,async:true});}}),this.FILTER_UPDATE_DELAY);}this.lazyUpdateCounts();},requestData:function(){if(this.loading){if(this.domNode){_2dd9.add(this.domNode,"filter-loading");this.set("content","");}}var _2dfb=this.filter.$key;var _2dfc=_2ddd.getSDataService("metadata");if(_2dfb=="ModifiedDate"){var _2dfd=this._getFromLocalStorage("modifiedDateTotalFilterCount");if(_2dfd!==null){if(_2dfd.length==this.numModDateFiltersCnt){var _2dfe=[{"name":"Today","$descriptor":this.filteroptionToday,value:_2dfd[0].value},{"name":"ThisWeek","$descriptor":this.filteroptionThisWeek,value:_2dfd[1].value},{"name":"ThisMonth","$descriptor":this.filteroptionThisMonth,value:_2dfd[2].value},{"name":"ThisQuarter","$descriptor":this.filteroptionThisQuarter,value:_2dfd[3].value},{"name":"ThisYear","$descriptor":this.filteroptionThisYear,value:_2dfd[4].value},{"name":"LastWeek","$descriptor":this.filteroptionLastWeek,value:_2dfd[5].value},{"name":"LastMonth","$descriptor":this.filteroptionLastMonth,value:_2dfd[6].value},{"name":"LastQuarter","$descriptor":this.filteroptionLastQuarter,value:_2dfd[7].value},{"name":"LastYear","$descriptor":this.filteroptionLastYear,value:_2dfd[8].value},{"name":"WeektoDate","$descriptor":this.filteroptionWeektoStart,value:_2dfd[9].value},{"name":"MonthtoDate","$descriptor":this.filteroptionMonthtoStart,value:_2dfd[10].value},{"name":"QtrtoDate","$descriptor":this.filteroptionQtrtoStart,value:_2dfd[11].value},{"name":"YeartoDate","$descriptor":this.filteroptionYeartoStart,value:_2dfd[12].value},{"name":"Older","$descriptor":this.filteroptionOlder,value:_2dfd[13].value}];this._processFetchResult(_2dfe);this._updateCountsInPlace(_2dfe);this.resolveDeferred();return;}}else{_2ddb=new Sage.SData.Client.SDataResourcePropertyRequest(_2dfc);_2ddb.setResourceKind("entities").setQueryArg("select","$updated").setQueryArg("format","json").setQueryArg("Count","500");_2ddb.readFeed({success:function(_2dff){this._onSuccessModifiedDate(_2dff);},error:function(error){if(error){console.error(error);}},scope:this,async:true});}}else{if(_2dfb=="HasMeasure"){var _2e00=this._getFromLocalStorage("totalMetricCount");if(_2e00!==null){var _2e01=[{"name":"analyticsMetric","$descriptor":this.filterHasMetric,"value":_2e00.totalMetricCount}];this._processFetchResult(_2e01);query("div span.p-count",query("li[data-name=\"analyticsMetric\"]")[0]).forEach(function(span){span.innerHTML=_2e00.totalMetricCount;});this._finishedLoading();this.resolveDeferred();return;}else{_2ddb=new Sage.SData.Client.SDataResourcePropertyRequest(_2dfc);_2ddb.setResourceKind("entities").setQueryArg("where","filters.filterType eq \"analyticsMetric\"").setQueryArg("format","json").setQueryArg("Count","500");_2ddb.readFeed({success:function(_2e02){this._onSuccessHasMeasure(_2e02);},error:function(error){if(error){console.error(error);}},scope:this,async:true});}}else{if(_2dfb=="HasFilter"){var _2e03=this._getFromLocalStorage("totalFilterCount");if(_2e03!==null){var _2e04=[{"name":"analyticsMetric","$descriptor":this.filterHasFilter,"value":_2e03.totalFilterCount}];this._processFetchResult(_2e04);query("div span.p-count",query("li[data-name=\"analyticsMetric\"]")[1]).forEach(function(span){span.innerHTML=_2e03.totalFilterCount;});this._finishedLoading();this.resolveDeferred();return;}else{_2ddb=new Sage.SData.Client.SDataResourcePropertyRequest(_2dfc);_2ddb.setResourceKind("entities").setQueryArg("where","filters.filterType ne \"analyticsMetric\"").setQueryArg("format","json").setQueryArg("Count","500");_2ddb.readFeed({success:function(_2e05){this._onSuccessHasFilter(_2e05);},error:function(error){if(error){console.error(error);}},scope:this,async:true});}}}}},_onSuccessCount:function(_2e06){var _2e07=0,_2e08=0,_2e09=0,_2e0a=0,_2e0b=0,_2e0c=0,_2e0d=0,_2e0e=0,_2e0f=0,older=0;var _2e10=0,_2e11=0,_2e12=0,_2e13=0;var _2e14=_2e06.$resources;var _2e15=/\(([^)]+)\)/;var i;var _2e16=new Date(this.specialDates[":todaystart"](new Date(Date.now())));var _2e17=new Date(this.specialDates[":todayend"](new Date(Date.now())));var _2e18=new Date(this.specialDates[":thisweekstart"](new Date(Date.now())));var _2e19=new Date(this.specialDates[":thisweekend"](new Date(Date.now())));var _2e1a=new Date(this.specialDates[":thismonthstart"](new Date(Date.now())));var _2e1b=new Date(this.specialDates[":thismonthend"](new Date(Date.now())));var _2e1c=new Date(this.specialDates[":thisquarterstart"](new Date(Date.now())));var _2e1d=new Date(this.specialDates[":thisquarterend"](new Date(Date.now())));var _2e1e=new Date(this.specialDates[":thisyearstart"](new Date(Date.now())));var _2e1f=new Date(this.specialDates[":thisyearend"](new Date(Date.now())));var _2e20=new Date(this.specialDates[":lastweekstart"](new Date(Date.now())));var _2e21=new Date(this.specialDates[":lastweekend"](new Date(Date.now())));var _2e22=new Date(this.specialDates[":lastmonthstart"](new Date(Date.now())));var _2e23=new Date(this.specialDates[":lastmonthend"](new Date(Date.now())));var _2e24=new Date(this.specialDates[":lastquarterstart"](new Date(Date.now())));var _2e25=new Date(this.specialDates[":lastquarterend"](new Date(Date.now())));var _2e26=new Date(this.specialDates[":lastyearstart"](new Date(Date.now())));var _2e27=new Date(this.specialDates[":lastyearend"](new Date(Date.now())));for(i=0;i<=_2e14.length-1;i++){var _2e28=_2e15.exec(_2e14[i].$updated);var _2e29=new Date(parseInt(_2e28[1]));if(_2e29>=_2e16&&_2e29<=_2e17){_2e07++;}if(_2e29>=_2e18&&_2e29<=_2e19){_2e08++;}if(_2e29>=_2e1a&&_2e29<=_2e1b){_2e09++;}if(_2e29>=_2e1c&&_2e29<=_2e1d){_2e0a++;}if(_2e29>=_2e1e&&_2e29<=_2e1f){_2e0b++;}if(_2e29>=_2e20&&_2e29<=_2e21){_2e0c++;}if(_2e29>=_2e22&&_2e29<=_2e23){_2e0d++;}if(_2e29>=_2e24&&_2e29<=_2e25){_2e0e++;}if(_2e29>=_2e26&&_2e29<=_2e27){_2e0f++;}if(_2e29>=_2e18&&_2e29<=_2e17){_2e10++;}if(_2e29>=_2e1a&&_2e29<=_2e17){_2e11++;}if(_2e29>=_2e1c&&_2e29<=_2e17){_2e12++;}if(_2e29>=_2e1e&&_2e29<=_2e17){_2e13++;}if(_2e29<_2e27){older++;}}var _2e2a=0,_2e2b=0;var _2e2c=false,_2e2d=false;for(i=0;i<_2e14.length;i++){if(_2e14[i].filters&&_2e14[i].filters.$resources){_2e2c=false;_2e2d=false;var _2e2e=_2e14[i].filters.$resources;for(var j=0;j<_2e2e.length;j++){if(_2e2e[j].filterType.indexOf("analyticsMetric")>-1){_2e2c=true;break;}}for(var k=0;k<_2e2e.length;k++){if(_2e2e[k].filterType.indexOf("analyticsMetric")<=-1){_2e2d=true;break;}}if(_2e2c){++_2e2a;}if(_2e2d){++_2e2b;}}}var _2e2f=[{"name":"Today","$descriptor":this.filteroptionToday,value:_2e07},{"name":"ThisWeek","$descriptor":this.filteroptionThisWeek,value:_2e08},{"name":"ThisMonth","$descriptor":this.filteroptionThisMonth,value:_2e09},{"name":"ThisQuarter","$descriptor":this.filteroptionThisQuarter,value:_2e0a},{"name":"ThisYear","$descriptor":this.filteroptionThisYear,value:_2e0b},{"name":"LastWeek","$descriptor":this.filteroptionLastWeek,value:_2e0c},{"name":"LastMonth","$descriptor":this.filteroptionLastMonth,value:_2e0d},{"name":"LastQuarter","$descriptor":this.filteroptionLastQuarter,value:_2e0e},{"name":"LastYear","$descriptor":this.filteroptionLastYear,value:_2e0f},{"name":"WeektoDate","$descriptor":this.filteroptionWeektoStart,value:_2e10},{"name":"MonthtoDate","$descriptor":this.filteroptionMonthtoStart,value:_2e11},{"name":"QtrtoDate","$descriptor":this.filteroptionQtrtoStart,value:_2e12},{"name":"YeartoDate","$descriptor":this.filteroptionYeartoStart,value:_2e13},{"name":"Older","$descriptor":this.filteroptionOlder,value:older}];var _2e30="analyticsMetric";query("div span.p-count",query("li[data-name=\""+_2e30+"\"]")[0]).forEach(function(span){span.innerHTML=_2e2a;});query("div span.p-count",query("li[data-name=\""+_2e30+"\"]")[1]).forEach(function(span){span.innerHTML=_2e2b;});this._updateCountsInPlace(_2e2f);},_onSuccessHasFilter:function(_2e31){var _2e32=_2e31.$resources;var _2e33=[{"name":"analyticsMetric","$descriptor":this.filterHasFilter,"value":_2e32.length}];this._processFetchResult(_2e33);var _2e34="analyticsMetric";query("div span.p-count",query("li[data-name=\"analyticsMetric\"]")[1]).forEach(function(span){span.innerHTML=_2e32.length;});this._finishedLoading();this.resolveDeferred();this._saveToLocalStorage("totalFilterCount",{totalFilterCount:_2e32.length});},_onSuccessHasMeasure:function(_2e35){var _2e36=_2e35.$resources;var _2e37=[{"name":"analyticsMetric","$descriptor":this.filterHasMetric,"value":_2e36.length}];this._processFetchResult(_2e37);var _2e38="analyticsMetric";query("div span.p-count",query("li[data-name=\"analyticsMetric\"]")[0]).forEach(function(span){span.innerHTML=_2e36.length;});this._finishedLoading();this.resolveDeferred();this._saveToLocalStorage("totalMetricCount",{totalMetricCount:_2e36.length});},_onSuccessModifiedDate:function(_2e39){var _2e3a=0,_2e3b=0,_2e3c=0,_2e3d=0,_2e3e=0,_2e3f=0,_2e40=0,_2e41=0,_2e42=0,older=0;var _2e43=0,_2e44=0,_2e45=0,_2e46=0;var _2e47=_2e39.$resources;var _2e48=/\(([^)]+)\)/;var _2e49=new Date(this.specialDates[":todaystart"](new Date(Date.now())));var _2e4a=new Date(this.specialDates[":todayend"](new Date(Date.now())));var _2e4b=new Date(this.specialDates[":thisweekstart"](new Date(Date.now())));var _2e4c=new Date(this.specialDates[":thisweekend"](new Date(Date.now())));var _2e4d=new Date(this.specialDates[":thismonthstart"](new Date(Date.now())));var _2e4e=new Date(this.specialDates[":thismonthend"](new Date(Date.now())));var _2e4f=new Date(this.specialDates[":thisquarterstart"](new Date(Date.now())));var _2e50=new Date(this.specialDates[":thisquarterend"](new Date(Date.now())));var _2e51=new Date(this.specialDates[":thisyearstart"](new Date(Date.now())));var _2e52=new Date(this.specialDates[":thisyearend"](new Date(Date.now())));var _2e53=new Date(this.specialDates[":lastweekstart"](new Date(Date.now())));var _2e54=new Date(this.specialDates[":lastweekend"](new Date(Date.now())));var _2e55=new Date(this.specialDates[":lastmonthstart"](new Date(Date.now())));var _2e56=new Date(this.specialDates[":lastmonthend"](new Date(Date.now())));var _2e57=new Date(this.specialDates[":lastquarterstart"](new Date(Date.now())));var _2e58=new Date(this.specialDates[":lastquarterend"](new Date(Date.now())));var _2e59=new Date(this.specialDates[":lastyearstart"](new Date(Date.now())));var _2e5a=new Date(this.specialDates[":lastyearend"](new Date(Date.now())));for(var i=0;i<=_2e47.length-1;i++){var _2e5b=_2e48.exec(_2e47[i].$updated);var _2e5c=new Date(parseInt(_2e5b[1]));if(_2e5c>=_2e49&&_2e5c<=_2e4a){_2e3a++;}if(_2e5c>=_2e4b&&_2e5c<=_2e4c){_2e3b++;}if(_2e5c>=_2e4d&&_2e5c<=_2e4e){_2e3c++;}if(_2e5c>=_2e4f&&_2e5c<=_2e50){_2e3d++;}if(_2e5c>=_2e51&&_2e5c<=_2e52){_2e3e++;}if(_2e5c>=_2e53&&_2e5c<=_2e54){_2e3f++;}if(_2e5c>=_2e55&&_2e5c<=_2e56){_2e40++;}if(_2e5c>=_2e57&&_2e5c<=_2e58){_2e41++;}if(_2e5c>=_2e59&&_2e5c<=_2e5a){_2e42++;}if(_2e5c>=_2e4b&&_2e5c<=_2e4a){_2e43++;}if(_2e5c>=_2e4d&&_2e5c<=_2e4a){_2e44++;}if(_2e5c>=_2e4f&&_2e5c<=_2e4a){_2e45++;}if(_2e5c>=_2e51&&_2e5c<=_2e4a){_2e46++;}if(_2e5c<_2e5a){older++;}}var _2e5d=[{"name":"Today","$descriptor":this.filteroptionToday,value:_2e3a},{"name":"ThisWeek","$descriptor":this.filteroptionThisWeek,value:_2e3b},{"name":"ThisMonth","$descriptor":this.filteroptionThisMonth,value:_2e3c},{"name":"ThisQuarter","$descriptor":this.filteroptionThisQuarter,value:_2e3d},{"name":"ThisYear","$descriptor":this.filteroptionThisYear,value:_2e3e},{"name":"LastWeek","$descriptor":this.filteroptionLastWeek,value:_2e3f},{"name":"LastMonth","$descriptor":this.filteroptionLastMonth,value:_2e40},{"name":"LastQuarter","$descriptor":this.filteroptionLastQuarter,value:_2e41},{"name":"LastYear","$descriptor":this.filteroptionLastYear,value:_2e42},{"name":"WeektoDate","$descriptor":this.filteroptionWeektoStart,value:_2e43},{"name":"MonthtoDate","$descriptor":this.filteroptionMonthtoStart,value:_2e44},{"name":"QtrtoDate","$descriptor":this.filteroptionQtrtoStart,value:_2e45},{"name":"YeartoDate","$descriptor":this.filteroptionYeartoStart,value:_2e46},{"name":"Older","$descriptor":this.filteroptionOlder,value:older}];this._processFetchResult(_2e5d);this._updateCountsInPlace(_2e5d);this.resolveDeferred();this._saveToLocalStorage("modifiedDateTotalFilterCount",_2e5d);},_onFetchComplete:function(items,_2e5e){this._processFetchResult(items,_2e5e);this._updateCountsInPlace(items);this.resolveDeferred();},_onFetchError:function(error,_2e5f){if(this.domNode){_2dd9.remove(this.domNode,"filter-loading");}this.resolveDeferred();},isFilterItemHidden:function(_2e60){var data=this.parent._configuration._hiddenFilters||{},_2e61=Sage.Services.getService("ClientGroupContext"),_2e62=_2e61&&_2e61.getContext(),prop=_2e62.CurrentEntity+"_"+this.filter.filterName,_2e63=false;if(data[prop]){_2e63=array.some(data[prop].items,function(item){return item===_2e60;});}return _2e63;},_updateCountsInPlace:function(items,_2e64){var i=0,entry=null,len=items.length;for(i=0;i<len;i++){entry=items[i];entry.name=this._transformFilterItemName(entry.name);query("li[data-name=\""+entry.name+"\"]",this.listNode).forEach(function(node){query("div span.p-count",node).forEach(function(span){span.innerHTML=entry.value;});});}this._finishedLoading();},_processFetchResult:function(items,_2e65){var i=0,entry=null,_2e66=false,len=items.length,_2e67=false;for(i=0;i<len;i++){entry=items[i];entry.name=this._transformFilterItemName(entry.name);_2e66=this.isFilterItemHidden(entry.name);if(_2e66===false||this._isRangeFilter()){_2e67=this.appliedValues&&this.appliedValues[this.filter.$key]&&!!this.appliedValues[this.filter.$key][entry.name];entry.selected=_2e67||(this.appliedValues&&!!this.appliedValues[entry.name]);entry.ofText=this.ofText;this.output.push(this.itemTemplate.apply(entry,this));this.entries.push(entry);}}this._fixMissingItems();if(this.domNode){this.set("content",this.output.join(""));}this._clearOutputEntries();},_transformFilterItemName:function(name){var _2e68=name;if(name===null){_2e68=this.nullName;}else{if(name===""){_2e68=this.emptyName;}}return _2e68?_2e68.trim():_2e68;},_fixMissingItems:function(){var _2e69,prop,val,_2e6a=true;for(prop in this.appliedValues){if(this.appliedValues.hasOwnProperty(prop)){val=this.appliedValues[prop];_2e6a=array.some(this.entries,function(entry){return entry.name===prop;});if(!_2e6a){_2e69={name:"",$descriptor:"",selected:true,value:0};_2e69.name=prop;_2e69.$descriptor=val;_2e69.ofText=this.ofText;if(typeof _2e69.$descriptor==="string"){this.output.push(this.itemTemplate.apply(_2e69,this));this.entries.push(_2e69);}}}}},_clearOutputEntries:function(){this.output=[];this.entries=[];},_finishedLoading:function(){this.loading=false;this.store.request.setQueryArg("_activeFilter",this._originalActiveFilter||"");if(this.domNode){_2dd9.remove(this.domNode,"filter-loading");}},_getFilterManager:function(){var _2e6b=this.parent.filterManager;if(!_2e6b){if(this.parent._configuration.getFilterManager){_2e6b=this.parent._configuration.getFilterManager();}}var _2e6c=Sage.Services.getService("ClientGroupContext");var _2e6d=_2e6c&&_2e6c.getContext();if(this.groupId!=_2e6d.CurrentGroupID){_2e6b=null;}return _2e6b;},resolveDeferred:function(){if(this.deferred){this.deferred=this.deferred.resolve();}},_saveToLocalStorage:function(key,value){var _2e6e=new _2ddf();_2e6e.initialize();_2e6e.put(key,value,function(_2e6f,key,_2e70){if(_2e6f===_2e6e.FAILED){console.error("Failed writing key: "+key+" in local storage. Message: "+_2e70);}});},_getFromLocalStorage:function(key,value){var _2e71=new _2ddf();_2e71.initialize();return _2e71.get(key,value);},specialDates:{":today":function(today){today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":todaystart":function(today){today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":todayend":function(today){today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":yesterday":function(today){today.setDate(today.getDate()-1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":yesterdaystart":function(today){today.setDate(today.getDate()-1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":yesterdayend":function(today){today.setDate(today.getDate()-1);today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":tomorrow":function(today){today.setDate(today.getDate()+1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":tomorrowstart":function(today){today.setDate(today.getDate()+1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":tomorrowend":function(today){today.setDate(today.getDate()+1);today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":thisweekstart":function(today){today.setDate(today.getDate()-today.getDay());today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":thisweekend":function(today){today.setDate(today.getDate()+(6-today.getDay()));today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":thismonthstart":function(today){today.setDate(1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":thismonthend":function(today){today.setDate(_2dde.getDaysInMonth(today));today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":thisyearstart":function(today){today.setDate(1);today.setMonth(0);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":thisyearend":function(today){today.setDate(31);today.setMonth(11);today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":thisquarterstart":function(today){var month=today.getMonth(),mod=month%3;today.setMonth(month-mod);today.setDate(1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":thisquarterend":function(today){var month=today.getMonth(),mod=2-(month%3);today.setMonth(month+mod);today.setDate(_2dde.getDaysInMonth(today));today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":nextweekstart":function(today){today.setDate(today.getDate()+(7-today.getDay()));today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":nextweekend":function(today){today.setDate(today.getDate()+(7-today.getDay())+6);today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":nextmonthstart":function(today){today.setMonth(today.getMonth()+1);today.setDate(1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":nextmonthend":function(today){today.setMonth(today.getMonth()+1);today.setDate(1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":nextyearstart":function(today){today.setFullYear(today.getFullYear()+1);today.setMonth(0);today.setDate(1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":nextyearend":function(today){today.setFullYear(today.getFullYear()+1);today.setMonth(11);today.setDate(31);today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":nextquarterstart":function(today){var month=today.getMonth(),mod=2-(month%3);today.setMonth(month+mod+1);today.setDate(1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":nextquarterend":function(today){var month=today.getMonth(),mod=2-(month%3);today.setMonth(month+mod+3);today.setDate(_2dde.getDaysInMonth(today));today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":lastweekstart":function(today){today.setDate(today.getDate()-today.getDay()-7);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":lastweekend":function(today){today.setDate(today.getDate()-today.getDay()-1);today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":lastmonthstart":function(today){today.setMonth(today.getMonth()-1);today.setDate(1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":lastmonthend":function(today){today.setMonth(today.getMonth()-1);today.setDate(_2dde.getDaysInMonth(today));today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":lastyearstart":function(today){today.setFullYear(today.getFullYear()-1);today.setMonth(0);today.setDate(1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":lastyearend":function(today){today.setFullYear(today.getFullYear()-1);today.setMonth(11);today.setDate(31);today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;},":lastquarterstart":function(today){var month=today.getMonth(),mod=month%3;today.setMonth(month-mod-3);today.setDate(1);today.setHours(0);today.setMinutes(0);today.setSeconds(0);return today;},":lastquarterend":function(today){var month=today.getMonth(),mod=month%3;today.setMonth(month-mod-1);today.setDate(_2dde.getDaysInMonth(today));today.setHours(23);today.setMinutes(59);today.setSeconds(59);return today;}}});return _2de0;});},"Sage/UI/Filters/GroupFilterConfigurationProvider":function(){define(["Sage/Services/_ServiceMixin","Sage/_ConfigurationProvider","Sage/Data/GroupLayoutSingleton","Sage/Data/SDataStore","dojo/_base/declare","dojo/_base/lang","dijit/registry","dojo/string","Sage/Utility/Filters","dojo/json"],function(_2e72,_2e73,_2e74,_2e75,_2e76,lang,_2e77,_2e78,_2e79,json){var _2e7a=_2e76("Sage.UI.Filters.GroupFilterConfigurationProvider",[_2e73,_2e72],{FILTER_COUNT:150,_configuration:null,_hasLayoutConfiguration:false,_hasFilterHiddenConfiguration:false,serviceMap:{"groupContextService":"ClientGroupContext","metaDataService":{type:"sdata",name:"metadata"},"systemDataService":{type:"sdata",name:"system"}},constructor:function(_2e7b){this.inherited(arguments);this._subscribes.push(dojo.subscribe("/group/context/changed",this,this._onGroupContextChanged));},_onGroupContextChanged:function(){this.onConfigurationChange();},onConfigurationChange:function(){},_createConfiguration:function(entry,_2e7c){var _2e7d=entry&&entry.layout,_2e7e=[],_2e7f=[],i=0,_2e80=this.groupContextService&&this.groupContextService.getContext(),_2e81=_2e80&&_2e80.CurrentGroupID,_2e82=_2e80&&_2e80.CurrentEntity,_2e83=this.systemDataService,_2e84=this.metaDataService,_2e85,where;for(i=0;i<_2e7d.length;i++){_2e7e.push("\""+_2e7d[i].propertyPath+"\"");_2e7f.push("\""+_2e7d[i].caption+"\"");}_2e85=new Sage.SData.Client.SDataResourcePropertyRequest(_2e84);_2e85.setResourceKind("entities");_2e85.setResourceSelector("\""+_2e82+"\"");_2e85.setResourceProperty("filters");_2e85.setQueryArg("count",this.FILTER_COUNT);if(_2e82==="User"){_2e7f.push("\"Role\"");_2e7f.push("\"Team\"");}where=_2e78.substitute("filterType ne \"analyticsMetric\" and (propertyName in (${0}) or displayName in (${1}))",[_2e7e.join(","),_2e7f.join(",")]);_2e85.setQueryArg("where",where);this._configuration.store=new _2e75({executeReadWith:"readFeed",request:_2e85});this._configuration.createStoreForFilter=function(_2e86){var _2e87=new Sage.SData.Client.SDataResourcePropertyRequest(_2e83);_2e87.setResourceKind("groups");_2e87.setResourceSelector("\""+_2e81+"\"");_2e87.setResourceProperty("$queries/executeMetric");_2e87.setQueryArg("_filterName",_2e86.filterName);_2e87.setQueryArg("orderby","displayName");return _2e86&&_2e86.filterName?new _2e75({executeReadWith:"readFeed",request:_2e87}):null;};this._configuration.getFilterManager=function(){var _2e88=_2e77.byId("list");return _2e88&&_2e88.get("filterManager");};this._configuration.groupId=_2e81;},requestConfiguration:function(_2e89){this._configuration={};this._hasLayoutConfiguration=false;this._hasFilterHiddenConfiguration=false;var _2e8a=new _2e74(),group=this.getCurrentGroup(),_2e8b=lang.hitch(this,this._onRequestConfigurationSuccess,_2e89||{}),_2e8c=lang.hitch(this,this._onRequestConfigurationFailure,_2e89||{});_2e8a.getGroupLayout(this.formatPredicate(group),_2e8b,_2e8c,group.$key);this._getHiddenFilters(_2e89);},formatPredicate:function(group){return "'"+group.$key+"'";},getCurrentGroup:function(){var _2e8d=this.groupContextService&&this.groupContextService.getContext(),_2e8e=_2e8d&&_2e8d.CurrentFamily,name=_2e8d&&_2e8d.CurrentName,id=_2e8d&&_2e8d.CurrentGroupID;return {name:name,family:_2e8e,$key:id};},_onRequestConfigurationSuccess:function(_2e8f,entry){this._createConfiguration(entry,_2e8f);this._hasLayoutConfiguration=true;this._callOptionsSuccess(_2e8f);},_onRequestConfigurationFailure:function(_2e90,_2e91){if(_2e90.failure){_2e90.failure.call(_2e90.scope||this,_2e91,_2e90,this);}},_getHiddenFilters:function(_2e92){var key=this._getHiddenFiltersKey();if(key){_2e79.getHiddenFilters(key,lang.hitch(this,this._onHiddenFiltersFetchComplete,_2e92||{}),function(err){console.error(err);});}},_getHiddenFiltersKey:function(){var key=_2e79.getHiddenFiltersKey();return key;},_onHiddenFiltersFetchComplete:function(_2e93,_2e94){if(_2e94&&_2e94.response&&_2e94.response.value){this._configuration._hiddenFilters=json.parse(_2e94.response.value);if(this._configuration._hiddenFilters&&this._configuration._hiddenFilters.constructor===Array){this._configuration._hiddenFilters={};}}this._configuration._hiddenFiltersKey=this._getHiddenFiltersKey();this._hasFilterHiddenConfiguration=true;this._callOptionsSuccess(_2e93);},_callOptionsSuccess:function(_2e95){if(!this._hasLayoutConfiguration||!this._hasFilterHiddenConfiguration){return;}if(_2e95.success){_2e95.success.call(_2e95.scope||this,this._configuration,_2e95,this);this._hasLayoutConfiguration=false;this._hasFilterHiddenConfiguration=false;}}});return _2e7a;});},"Sage/UI/GroupTabPane":function(){define(["dojo/_base/declare","Sage/UI/TabController","Sage/UI/TabContainer"],function(_2e96,_2e97,_2e98){return _2e96("Sage.UI.GroupTabPane",[_2e98],{useMenu:false,useSlider:true,});});},"Sage/UI/JsonPrintDetailPane":function(){define(["Sage/UI/_DetailPane","Sage/_Templated","dojo/_base/declare"],function(_2e99,_2e9a,_2e9b){return _2e9b("Sage.UI.JsonPrintDetailPane",[_2e99,_2e9a],{widgetsInTemplate:true,contentNode:null,attributeMap:{"content":{node:"contentNode",type:"innerHTML"}},widgetTemplate:new Simplate(["<div class=\"json-print-detail-pane\">","<pre dojoAttachPoint=\"contentNode\"></pre>","</div>"]),_onSelected:function(index,row,grid){this.set("content",dojo.toJson(row,true));}});});},"Sage/UI/MenuBar":function(){define(["dijit/MenuBar","Sage/UI/MenuItem","Sage/UI/PopupMenuBarItem","Sage/UI/PopupMenuItem","dijit/Menu","Sage/UI/MenuBarItem","dijit/MenuSeparator","dojo/_base/declare","dojo/has"],function(_2e9c,_2e9d,_2e9e,_2e9f,Menu,_2ea0,_2ea1,_2ea2,has){var _2ea3=_2ea2("Sage.UI.MenuBar",[_2e9c],{postMixInProperties:function(){this.store=Sage.UI.DataStore.MenuBar||{};this.inherited(arguments);},postCreate:function(){this.inherited(arguments);var len=this.store.items?this.store.items.length:0;for(var i=0;i<len;i++){var _2ea4=this.store.items[i];var mid=(_2ea4.id!=="")?_2ea4.id:this.id+"_"+i;var _2ea5={label:_2ea4.text||"...",icon:_2ea4.img||this._blankGif,id:mid,title:_2ea4.tooltip||_2ea4.text||"",ref:_2ea4.href||_2ea4.navurl||"",imageClass:_2ea4.imageClass||""};if(_2ea4.items&&_2ea4.items.length>0){var menu=new Menu({});this._addItemsToMenu(_2ea4.items,menu,mid);_2ea5["popup"]=menu;this.addChild(new _2e9e(_2ea5));}else{_2ea5["onClick"]=dojo.hitch(_2ea5,function(){if(this.ref!==""){window.location.href=this.ref;}});this.addChild(new _2ea0(_2ea5));}}},_addItemsToMenu:function(items,menu,_2ea6){_2ea6=_2ea6||"";var len=items.length;for(var i=0;i<len;i++){var item=items[i];if(item.isspacer||item.text==="-"){menu.addChild(new _2ea1({}));}else{var _2ea7={label:item.text||"...",icon:item.img||this._blankGif,title:item.tooltip||item.text||"",ref:item.href||"",imageClass:item.imageClass||""};if(item.id!==""){_2ea7["id"]=_2ea6+"_"+item.id;}var _2ea8=/javascript:/g;if((has("ie")===10)&&_2ea8.test(item.href)){_2ea7["ref"]=item.href.replace(_2ea8,"");_2ea7["onClick"]=function(){eval(this.ref);};}else{if(item.href!==""){_2ea7["onClick"]=function(){if(this.ref!==""){try{window.location.href=this.ref;}catch(e){}}};}}if(item.submenu.length>0){var popup=new Menu({});this._addItemsToMenu(item.submenu,popup,item.id||"");_2ea7["popup"]=popup;menu.addChild(new _2e9f(_2ea7));}else{menu.addChild(new _2e9d(_2ea7));}}}}});return _2ea3;});},"Sage/UI/NavBar":function(){define(["dijit/layout/AccordionContainer","dijit/layout/_LayoutWidget","Sage/UI/NavBarPane","Sage/Layout/_SplitterEnhancedMixin","dojo/dom","dojo/on","dojo/dom-style","dojo/dom-class","dojo/cookie","dojo/_base/declare","dojo/dom-geometry","dojo/_base/array","dojo/aspect"],function(_2ea9,_2eaa,_2eab,_2eac,dom,on,_2ead,_2eae,_2eaf,_2eb0,_2eb1,array,_2eb2){var _2eb3=_2eb0("Sage.UI.NavBar",[_2ea9,_2eaa,_2eac],{persist:true,navPin:"navPinID",navIcon:"navIconID",animRotate:"rotate90",postCreate:function(){this.inherited(arguments);var items=Sage.UI.DataStore.NavBar&&Sage.UI.DataStore.NavBar.items;if(items){this._processNavCollection(items);}},_processNavCollection:function(items){for(var i=0;i<items.length;i++){var item=items[i];this.addChild(new _2eab({title:item.text,items:item.items}));}},startup:function(){var that=this;this.inherited(arguments);this.domNode.style.overflow="hidden";var _2eb4=true;var _2eb5=this.getParent().id;_2ead.set(_2eb5,"display","block");_2eb2.after(_2eaa.prototype,"startup",function(_2eb6){var _2eb7=this.getParent&&this.getParent();this.connect(dom.byId(that.navPin),"click",function(){_2eb7.resize();});});_2eb2.before(_2eaa.prototype,"resize",function(_2eb8){if(!(this.getParent()!==null&&this.getParent().hasOwnProperty("parent")&&this.getParent().parent.id===that.id)&&!_2eb4){that._hideContainer(_2eb5);_2eae.remove(_2eb5,"show");}});if(_2eaf(that.navPin)==="0"){_2eb4=false;that._hideContainer(_2eb5);that._hideContainer(_2eb5+"_splitter");_2eae.add(dom.byId(that.navPin),that.animRotate);_2ead.set(that.navIcon,"display","inline-block");}else{_2eae.add(_2eb5,"showSolid");_2eae.add(dom.byId(that.id),"show");_2ead.set(_2eb5+"_splitter","display","block");}if(parseInt(_2eaf(that.navPin+"_width"))>0){_2ead.set(_2eb5,"width",_2eaf(that.navPin+"_width"));}on(dom.byId(that.navPin),"click",function(e){if(_2eb4){_2eae.remove(_2eb5,"showSolid");_2eae.add(dom.byId(that.navPin),that.animRotate);_2ead.set(_2eb5+"_splitter","display","none");_2eb4=false;_2ead.set(that.navIcon,"display","inline-block");_2eaf(that.navPin,"0");}else{_2eaf(that.navPin,"1");_2eae.add(_2eb5,"showSolid");_2eae.remove(dom.byId(that.navPin),that.animRotate);_2ead.set(_2eb5+"_splitter","display","block");_2ead.set(that.navIcon,"display","none");_2eb4=true;}});on(dom.byId(_2eb5+"_splitter"),"click",function(e){_2eaf((that.navPin+"_width"),_2ead.getComputedStyle(dom.byId(_2eb5)).width);});on(dom.byId(that.navIcon),"click",function(e){e.stopPropagation();if(_2eb4){return;}that._toggleNavContainer(_2eb5,_2eb4);});on(dom.byId(_2eb5),"click",function(e){e.stopPropagation();});on(document,"click",function(e){if(!_2eb4&&(_2ead.getComputedStyle(dom.byId(_2eb5)).display!="none")){that._toggleNavContainer(_2eb5,!_2eb4);}});},layout:function(){var _2eb9=this.selectedChildWidget;if(!_2eb9){return;}var _2eba=_2eb9._wrapperWidget.domNode,_2ebb=_2eb1.getMarginExtents(_2eba),_2ebc=_2eb1.getPadBorderExtents(_2eba),_2ebd=_2eb9._wrapperWidget.containerNode,_2ebe=_2eb1.getMarginExtents(_2ebd),_2ebf=_2eb1.getPadBorderExtents(_2ebd),_2ec0=this._contentBox;var _2ec1=0;array.forEach(this.getChildren(),function(child){if(child!=_2eb9){var _2ec2=parseInt(_2ead.getComputedStyle(child.getParent().domNode.children[0]).height),_2ec3=parseInt(_2ead.getComputedStyle(child.getParent().domNode).marginBottom),_2ec4=parseInt(_2ead.getComputedStyle(child.getParent().domNode).marginTop),_2ec5=parseInt(_2ead.getComputedStyle(child.getParent().domNode).borderTopWidth),_2ec6=parseInt(_2ead.getComputedStyle(child.getParent().domNode).borderBottomWidth);if(!isNaN(_2ec2)){_2ec1+=_2ec2;}if(!isNaN(_2ec3)){_2ec1+=_2ec3;}if(!isNaN(_2ec4)){_2ec1+=_2ec4;}if(!isNaN(_2ec5)){_2ec1+=_2ec5;}if(!isNaN(_2ec6)){_2ec1+=_2ec6;}}});var node=this.getParent().domNode.children[0],cs=_2ead.getComputedStyle(node),me=_2eb1.getMarginExtents(node,cs),be=_2eb1.getBorderExtents(node,cs),_2ec7=me.b+me.t+parseInt(cs.height)+parseInt(cs.paddingTop)+parseInt(cs.paddingBottom)+be.h;this._verticalSpace=window.innerHeight-_2ebb.h-_2ebc.h-_2ebe.h-_2ebf.h-_2ec7-_2ec1-51;_2ead.set(this.domNode,"top",(_2ec7+"px"));this._containerContentBox={h:this._verticalSpace,w:this._contentBox.w-_2ebb.w-_2ebc.w-_2ebe.w-_2ebf.w};if(_2eb9){_2eb9.resize(this._containerContentBox);}},_toggleNavContainer:function(elem,_2ec8){var that=this;var node=dom.byId(elem);var _2ec9=this.getParent().id;if(_2ec8){_2eae.remove(node,"show");_2eae.remove(dom.byId(that.id),"show");setTimeout(function(){that._hideContainer(_2ec9);},500);}else{_2ead.set(_2ec9,"display","block");setTimeout(function(){_2eae.add(dom.byId(that.id),"show");_2eae.add(node,"show");},10);}},_hideContainer:function(elem){_2ead.set(elem,"display","none");_2ead.set(elem,"opacity","0");}});return _2eb3;});},"Sage/UI/NavBarPane":function(){define(["dijit/layout/_LayoutWidget","Sage/_Templated","Sage/UI/MenuItem","dijit/Menu","dojo/_base/declare","dojo/has"],function(_2eca,_2ecb,_2ecc,_2ecd,_2ece,has){var _2ecf=_2ece("Sage.UI.NavBarPane",[_2eca,_2ecb],{textImageRelationMap:{0:new Simplate(["<div class=\"Global_Images icon32x32 {%: $.imageClass %}\"></div>","<br />","<span>{%: $.text %}</span>"]),1:new Simplate(["<span>{%: $.text %}</span>","<br />","<div class=\"Global_Images icon32x32 {%: $.imageClass %}\"></div>"]),2:new Simplate(["<div class=\"Global_Images icon32x32 {%: $.imageClass %}\"></div>","<span>{%: $.text %}</span>"]),3:new Simplate(["<span>{%: $.text %}</span>","<div class=\"Global_Images icon32x32 {%: $.imageClass %}\"></div>"]),4:new Simplate(["<img src=\"{%: $.img %}\" alt=\"\" />","<span>{%: $.text %}</span>"]),},attributeMap:{"listContent":{node:"listNode",type:"innerHTML"}},widgetTemplate:new Simplate(["<div class=\"nav-bar-pane\">","<ul dojoAttachPoint=\"listNode,containerNode\"></ul>","</div>"]),itemTemplate:new Simplate(["<li id=\"{%: $.id %}\" class=\"{%: $.className %}\" aria-haspopup=\"{%: $.haspopup %}\">","<a href=\"{%: $.href %}\">","{%= $.innerTemplate.apply($) %}","</a>","</li>"]),title:null,items:null,_requiredContextMenus:null,_contextMenus:null,constructor:function(){this._requiredContextMenus=[];this._contextMenus=[];},postCreate:function(){this.inherited(arguments);this._processItemCollection(this.items);},startup:function(){this.inherited(arguments);this._processContextMenus(this._requiredContextMenus);},destroy:function(_2ed0){this.inherited(arguments);dojo.forEach(this._contextMenus,function(item){item.destroy(_2ed0);});},_processItemCollection:function(items){var _2ed1=[];dojo.forEach(items,function(item){item.id=item.id||Sage.guid("NavItem");if(window.location.href.indexOf(item.href)!==-1){item.className="nav-bar-item-current-page";}else{item.className="nav-bar-item";}if(item.contextmenu){this._requiredContextMenus.push({id:item.id,name:item.contextmenu});item.haspopup="true";}else{item.haspopup="false";}if(item.imageClass===""){item.innerTemplate=this.textImageRelationMap[4];}else{item.innerTemplate=this.textImageRelationMap[item.textImageRelation];}_2ed1.push(this.itemTemplate.apply(item,this));},this);this.set("listContent",_2ed1.join(""));},_processContextMenus:function(menus){var i,j,menu,_2ed2,item,_2ed3,items;for(i=0;i<menus.length;i++){menu=menus[i];_2ed3=Sage.UI.DataStore.ContextMenus&&Sage.UI.DataStore.ContextMenus[menu.name];items=_2ed3&&_2ed3.items;if(items&&items.length>0){_2ed2=new _2ecd({targetNodeIds:[menu.id]});for(j=0;j<items.length;j++){item=items[j];_2ed2.addChild(new _2ecc({id:_2ed2.id+"_"+item.id,label:item.text||"...",title:item.tooltip||"...",img:item.img||this._blankGif,ref:item.href,onClick:this._onContextMenuClick}));}this._contextMenus.push(_2ed2);}}},_onContextMenuClick:function(){if(this.ref!==""){var _2ed4=/javascript:/g;if((has("ie")===10)&&_2ed4.test(this.ref)){var _2ed5=this.ref.replace(_2ed4,"");eval(_2ed5);}else{try{window.location.href=this.ref;}catch(e){}}}}});return _2ecf;});},"Sage/UI/SpeedSearch":function(){define(["dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/i18n","dijit/_Widget","Sage/UI/TextBox","Sage/UI/ImageButton","Sage/UI/ToggleButton","dojo/i18n!./nls/SpeedSearch","dojo/text!../templates/SpeedSearch.html","dojo/_base/declare"],function(_2ed6,_2ed7,i18n,_2ed8,_2ed9,_2eda,_2edb,nls,_2edc,_2edd){var _2ede=_2edd("Sage.UI.SpeedSearch",[_2ed8,_2ed6,_2ed7],{templateString:_2edc,standardText:"standard",advancedText:"advanced",speedSearchText:"SpeedSearch",postMixInProperties:function(){dojo.mixin(this,i18n.getLocalization("Sage.UI","SpeedSearch"));this.inherited(arguments);},postCreate:function(){var that=this;var re=/SpeedSearch\.aspx|speedsearch\.aspx/;this.isSS=re.test(window.location.pathname);this.QS=window.location.search;if(this.QS){this.queryObject=dojo.queryToObject(this.QS.substring(1,this.QS.length));}var _2edf=new _2edb({showLabel:true,checked:false,"class":"quick-speedsearch-toggle",onClick:function(){if(this.getValue()===that.standardText){this.setValue(that.advancedText);if(that.isSS){that.toggleAdv();}}else{this.setValue(that.standardText);if(that.isSS){that.toggleAdv();}}},label:this.queryObject?this.queryObject.type:this.standardText},"ss-btn-toggle");_2edf.set("class","displaynone");if(_2edf.getValue()===this.advancedText&&this.isSS){this.toggleAdv();}var _2ee0=new _2ed9({watermark:true,value:this.speedSearchText,"class":"quick-speedsearch-text",onKeyDown:function(event){if(event.keyCode===13){that._goSearch(_2ee0.getValue(),_2edf.getValue());}}},"txt_ss");if(this.queryObject){_2ee0.forceFocus(this.queryObject.terms);}var _2ee1=new _2eda({imageClass:"fa fa-search","class":"quick-speedsearch-button",onClick:function(){that._goSearch(_2ee0.getValue(),_2edf.getValue());}},"ss-btn-image");this.inherited(arguments);},_goSearch:function(terms,type){if(terms!==this.speedSearchText){window.setTimeout(function(){window.location="SpeedSearch.aspx?terms="+terms+"&type="+type;},10);}},toggleAdv:function(){window.ToggleAdvanced();}});return _2ede;});},"Sage/UI/ToggleButton":function(){define(["dijit/form/Button","dijit/_Widget","dojo/text","dojo/text!../templates/ToggleButton.html","dojo/_base/declare"],function(_2ee2,_2ee3,text,_2ee4,_2ee5){var _2ee6=_2ee5("Sage.UI.ToggleButton",_2ee2,{templateString:_2ee4,__setValueAttr:{node:"valueNode",type:"attribute",attribute:"value"},getValue:function(){return this.get("label");},setValue:function(val){this.set("label",val);},_onButtonClick:function(e){}});return _2ee6;});},"Sage/UI/SummaryDetailPane":function(){define(["Sage/UI/_DetailPane","Sage/_Templated","Sage/UI/SummaryContainer","dojo/_base/declare"],function(_2ee7,_2ee8,_2ee9,_2eea){var _2eeb=_2eea("Sage.UI.SummaryDetailPane",[_2ee7,_2ee8],{widgetsInTemplate:false,contentNode:null,paneContents:null,attributeMap:{"content":{node:"contentNode",type:"innerHTML"}},widgetTemplate:new Simplate(["<div class=\"EntityCard\">","<div dojoAttachPoint=\"contentNode\"></div>","</div>"]),clear:function(){if(this.paneContents){this.paneContents.destroyRecursive();}},_onSelected:function(index,row,grid){if(!this._configuration){return;}if(this.paneContents){this.paneContents.destroyRecursive();}var _2eec=Sage.Services.getService("ClientGroupContext");var _2eed=_2eec.getContext();var _2eee=_2eed.CurrentTableKeyField;if(_2eee&&this._configuration.requestConfiguration){if(this._configuration.keyField){_2eee=this._configuration.keyField;}var _2eef=this._getKeyValue(row,_2eee);var _2ef0=Sage.Services.getService("SummaryViewDataManager");var pane=new _2ee9({id:"det_"+_2eef,templateLocation:this._configuration.templateLocation});pane.postProcessCallBack=this._configuration.postProcessCallBack;dojo.place(pane.domNode,this.contentNode,"only");this.paneContents=pane;_2ef0.requestDataNoWait(_2eef,pane,this._configuration.requestConfiguration);}else{this.set("content","Please check the configuration for this panel.");}},_getKeyValue:function(data,_2ef1){var parts=_2ef1.split(".");if(parts.length<2){return data[_2ef1];}else{return this._getKeyValue(data[parts[0]],parts[1]);}}});return _2eeb;});},"Sage/UI/TimeZoneItem":function(){define(["dijit/MenuBar","Sage/UI/MenuItem","Sage/UI/PopupMenuBarItem","Sage/UI/OrientableMenuBar","Sage/UI/MenuBarItem","Sage/UI/Controls/_DialogHelpIconMixin","dojo/i18n","dojo/data/ItemFileReadStore","dojo/i18n!./nls/TimeZoneItem","dojo/_base/declare"],function(_2ef2,_2ef3,_2ef4,_2ef5,_2ef6,_2ef7,i18n,_2ef8,_2ef9,_2efa){var _2efb=_2efa("Sage.UI.TimeZoneItem",_2ef2,{_TimeZoneDialog:new Simplate(["<div><div style=\"height:auto;\">","{%= $.setTimeZone %}<br />","<select id=\"timeZoneItemsList\" data-dojo-type=\"dijit.form.Select\" shouldPublishMarkDirty=\"false\" style=\"width:345px; margin-top:10px; margin-bottom:10px;\"></select></div>","<div class=\"button-bar alignright\"><button data-dojo-type=\"dijit.form.Button\""," type=\"button\" id=\"btnTimeZoneDialogOk\" title=\"{%= $.buttonOK %}\" align=\"right\">{%= $.buttonOK %}</button>","<button data-dojo-type=\"dijit.form.Button\""," type=\"button\" id=\"btnTimeZoneDialogCancel\" title=\"{%= $.buttonCancel %}\" align=\"right\">{%= $.buttonCancel %}</button>","</div></div>"]),postMixInProperties:function(){dojo.mixin(this,i18n.getLocalization("Sage.UI","TimeZoneItem"));this.inherited(arguments);},postCreate:function(){this.inherited(arguments);var _2efc;_2efc=Sage.Utility.getClientContextByKey("userTimeZone");this.addChild(new _2ef6({label:_2efc,title:this.timeZoneText,id:"btnTimeZoneMenu",onClick:function(){var _2efd=Sage.Utility.getClientContextByKey("userTimeZoneKey");dojo.xhrGet({url:"slxdata.ashx/slx/crm/-/timezones/p",handleAs:"json",load:function(data){var _2efe=dijit.byId("TimeZoneMenu"),_2eff=dijit.byId("btnTimeZoneMenu");_2efe._initializeDialog();_2efe._initializeTimeZoneDataStore(data,_2efd);},error:function(err){}});}}));},_initializeDialog:function(){var _2f00=dijit.byId("TimeZoneMenu");var d=new dijit.Dialog({title:_2f00.timeZoneSettingsText,style:"width:auto;"});dojo.mixin(d,new _2ef7());d.createHelpIconByTopic("Select_TimeZone");var mkup=this._TimeZoneDialog.apply({buttonOK:_2f00.buttonOKText,buttonCancel:_2f00.buttonCancelText,setTimeZone:_2f00.setTimeZoneText,setAsDefault:_2f00.setAsDefaultText});d.set("content",mkup);d.show();var _2f01=function(){dojo.disconnect(_2f02);dojo.disconnect(_2f03);dojo.disconnect(_2f04);setTimeout((function(d){return function(){d.destroyDescendants();d.destroy(false);};})(d),1);};var _2f05=function(){d.hide();};var _2f06=function(){var _2f07=dijit.byId("timeZoneItemsList"),_2f00=dijit.byId("TimeZoneMenu"),_2f08="";for(var i=0;i<_2f07.options.length;i++){if(_2f07.options[i].value===_2f07.value){_2f08=_2f07.options[i];break;}}if(_2f08){_2f00._updateTimeZone(_2f08,_2f00.location?true:false);}d.hide();};var _2f02=dojo.connect(d,"hide",this,_2f01);var _2f03=dojo.connect(dijit.byId("btnTimeZoneDialogCancel"),"onClick",this,_2f05);var _2f04=dojo.connect(dijit.byId("btnTimeZoneDialogOk"),"onClick",this,_2f06);},_initializeTimeZoneDataStore:function(data,_2f09){var items=[];var _2f0a="";var _2f0b="";var i;for(i=0;i<data.length;i++){if(!data[i].Displayname||!data[i].Keyname){continue;}if(data[i].Keyname==_2f09){_2f0a=data[i].OffsetHours;break;}}dojo.forEach(data,function(item){if(!item.Displayname||!item.Keyname){return;}if(item.OffsetHours==_2f0a){items.push({id:item.Keyname,text:item.Displayname+_2f0b,isDefault:item.IsDefault});}});var _2f0c={label:"text",value:"id",identifier:"id",items:items};var _2f0d=new _2ef8({data:_2f0c});var _2f0e=dijit.byId("timeZoneItemsList");_2f0e.setStore(_2f0d);_2f0e.set("searchAttr","text");for(i=0;i<_2f0e.options.length;i++){if(_2f0e.options[i].value===_2f09){_2f0e.setValue(_2f0e.options[i].value);break;}}},_updateTimeZone:function(_2f0f,_2f10){var self=this;var _2f11={"$name":"setusertimezone","request":{"UserId":Sage.Utility.getClientContextByKey("userID"),"userTimeZone":_2f0f.value,"isCustomerPortal":_2f10?"t":""}};var _2f12=new Sage.SData.Client.SDataServiceOperationRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic")).setResourceKind("users").setOperationName("setusertimezone");_2f12.execute(_2f11,{success:function(){var _2f13=dijit.byId("btnTimeZoneMenu");_2f13.setLabel(_2f0f.label);this._updateLocalClientContext(_2f0f.label,_2f0f.value);},failure:function(){},scope:this});},_updateLocalClientContext:function(_2f14,_2f15){Sage.Utility.setClientContextByKey("userTimeZone",_2f14);Sage.Utility.setClientContextByKey("userTimeZoneKey",_2f15);}});return _2efb;});},"Sage/UI/UniqueToListValidationTextBox":function(){define(["dijit/form/ValidationTextBox","dojo/_base/declare"],function(_2f16,_2f17){var _2f18=_2f17("Sage.UI.UniqueToListValidationTextBox",_2f16,{notUniqueText:"This value already exists",uniqueList:"",_uniqueHash:{},isValid:function(_2f19){var _2f1a=this.inherited(arguments);var value=this.get("value");return (!(value in this._uniqueHash)&&_2f1a);},_setUniqueListAttr:function(value){this.uniqueList=dojo.isString(value)?value.split(","):(dojo.isArray(value)?value:[value]);this._uniqueHash={};for(var i=0;i<this.uniqueList.length;i++){this._uniqueHash[this.uniqueList[i]]=1;}}});return _2f18;});},"Sage/UI/URL":function(){define(["dijit/_Widget","Sage/_Templated","dijit/form/ValidationTextBox","dojox/validate/regexp","Sage/UI/Controls/TextBox","dojo/_base/declare","Sage/Utility"],function(_2f1b,_2f1c,_2f1d,_2f1e,_2f1f,_2f20,_2f21){dojo.mixin(_2f1d.prototype.attributeMap,{slxchangehook:"focusNode"});var _2f22=_2f20("Sage.UI.URL",[_2f1b,_2f1c],{widgetTemplate:new Simplate(["<div class=\"urlcontrol\" slxcompositecontrol=\"true\" id=\"{%= $.id %}\" >","<input data-dojo-type=\"Sage.UI.Controls.TextBox\" name=\"{%= $.name %}\" ","data-dojo-props=\"textWithIcons: {%= $.buttonVisible %}\"","dojoAttachPoint=\"focusNode\" type=\"text\" style=\"\" ","hotKey=\"{%= $.hotKey %}\" ","{% if($.disabled === \"disabled\") { %} ","disabled=\"disabled\" ","{% } %}","{% if($.readonly === \"readonly\") { %} ","readonly=\"readonly\" ","{% } %}","{% if ($.disabled !== \"disabled\") { %} "," dojoAttachEvent=\"onChange:formatURLChange, onDblClick:launchWebSite, regExpGen:regExpGen\" ","{% } %}"," tabindex=\"{%= $.tabIndex %}\" ","value=\"{%= $.url %}\" required=\"{%= $.required %}\" ","id=\"{%= $.id %}_urlText\" maxlength=\"{%= $.maxLength %}\" > ","{% if ($.buttonVisible && $.disabled !== \"disabled\") { %}","<img alt=\"{%= $.buttonToolTip %}\" data-dojo-attach-event=\"ondijitclick: launchWebSite\"   "," tabindex=\"{%= $.tabIndex %}\" alt=\"{%= $.buttonToolTip %}\" ","src=\"{%= $.buttonImageUrl %}\" title=\"{%= $.buttonToolTip %}\" id=\"{%= $.id %}_urlButton\"> ","{% } %}","</div>"]),name:"",autoPostBack:false,readonly:"",disabled:"",hotKey:"",buttonVisible:true,maxLength:128,buttonImageUrl:"",buttonToolTip:"WWW",required:false,tabIndex:0,url:"",webAddressId:"",constructor:function(_2f23){_2f23.id=_2f23.webAddressId;},postCreate:function(){this.formatURL();this.inherited(arguments);},widgetsInTemplate:true,attributeMap:{slxchangehook:{node:"focusNode",type:"attribute",attribute:"slxchangehook"}},regExpGen:function(){return _2f21.regexp.invalidInput;},formatURL:function(){dojo.style(this.focusNode.focusNode,"color","#000099");dojo.style(this.focusNode.focusNode,"font-family","Tahoma");},formatURLChange:function(){if(this.url!==this.focusNode.value){this.url=this.focusNode.value;}},launchWebSite:function(){var url=this.url;if(url.length<1){return;}var _2f24="http://";var _2f25="https://";var winH;if(url.indexOf(_2f24)===-1&&url.indexOf(_2f25)===-1){url=_2f24+url;}winH=window.open(url,"",["dependent=no","directories=yes","location=yes","menubar=yes","resizeable=yes","pageXOffset=0px","pageYOffset=0px","scrollbars=yes","status=yes","titlebar=yes","toolbar=yes"].join(","));}});return _2f22;});},"Sage/UI/ActivityScheduler":function(){define(["dojo/i18n","dojo/date","dijit/Menu","Sage/Data/SingleEntrySDataStore","Sage/Data/SDataServiceRegistry","Sage/Utility/UserOptions","Sage/Utility/Activity","Sage/Utility","Sage/MainView/ActivityMgr/OccurrenceOrSeriesQueryDlg","dojo/i18n!./nls/ActivityScheduler","dojo/_base/declare","dojo/_base/lang","dojo/string"],function(i18n,_2f26,_2f27,_2f28,_2f29,_2f2a,_2f2b,_2f2c,_2f2d,_2f2e,_2f2f,_2f30,_2f31){var _2f32=_2f2f("Sage.UI.ActivityScheduler",null,{_weekStart:null,_scheduler:null,_schedulerId:"slxLogixScheduler",schedulerContextMenu:null,eventConnections:[],_menuItems:null,_contentWindow:null,_iFrameId:null,_userOptions:{},_schedulerLaunched:false,self:this,_recurringIcon:"../../images/icons/recurring_14x14.png",_attachmentIcon:"../../images/icons/attach_14x14.png",_alarmIcon:"../../images/icons/alarm_14x14.png",_activityCompleteIcon:"../../images/icons/completed_step_14x14.png",_userActivityData:{},_currentActivity:{},_securityAccessData:[],constructor:function(_2f33,_2f34,_2f35,_2f36){_2f30.mixin(this,_2f2e);this._userOptions={daystarttime:"9",dayendtime:"6",defaultactivity:"meeting",starttime:"8",endtime:"5",weekstart:"1",numevents:"3",defaultcalendarview:"month",defaultinterval:15,displaycontactaccount:"0",rememberusers:true,workweekmon:true,workweektue:true,workweekwed:true,workweekthu:true,workweekfri:true,workweeksat:false,workweeksun:false,workweek:[1,2,3,4,5],showonopportunities:false,showonregarding:false,showonphonenumber:false,showontime:false};_scheduler=_2f35.scheduler;this._schedulerId=_2f34;this._menuItems=[];this._contentWindow=_2f35;this._iFrameId=_2f36;this._preloadCalendarUserOptions();var self=this;dojo.subscribe("/entity/activity/updateScheduler",function(data){self._updateSchedulerEvent(data);});dojo.subscribe("/entity/activity/clearScheduler",function(){self._clearScheduler();});dojo.subscribe("/entity/activity/addToScheduler",function(data){self._addSchedulerEvent(data);});dojo.subscribe("/entity/activity/deleteFromScheduler",function(id){if(id){if(id.indexOf("result")==-1){self._deleteSchedulerEvent(id);}}});},_loadAllEvents:function(data){setTimeout(function(){this._scheduler.parse(data,"json");},100);},_addSchedulerEvent:function(data){if(data!==null){var _2f37=dojo.clone(data);var _2f38=[];_2f38.push(_2f37);self._scheduler.parse(_2f38,"json");}},_updateSchedulerEvent:function(data){if(data!==null){var _2f39=dojo.clone(data);self._scheduler.deleteEvent(_2f39.id);var _2f3a=[];_2f3a.push(_2f39);self._scheduler.parse(_2f3a,"json");}},_deleteSchedulerEvent:function(_2f3b){_scheduler.deleteEvent(_2f3b);},_setCurrentDate:function(date){_scheduler.setCurrentView(date);},_getSchedulerDate:function(){return _scheduler._date;},_launchScheduler:function(){_scheduler.init(this._schedulerId,new Date(),this._userOptions["defaultcalendarview"]);this._schedulerLaunched=true;this._userOptions["date"]=_scheduler.date;this._userOptions["weekStartDate"]=_scheduler._week_min_date;this._userOptions["weekEndDate"]=_scheduler._week_max_date;this._userOptions["workWeekStartDate"]=_scheduler._workweek_min_date;this._userOptions["workWeekEndDate"]=_scheduler._workweek_max_date;dojo.publish("/entity/activity/SchedulerCreated",[this._userOptions,this]);},_clearScheduler:function(){_scheduler.clearAll();},_clearSchedulerEvents:function(data){if(data){for(var i=0;i<data.length;i++){_scheduler.deleteEvent(data[i]);}}},_loadTimelessActivities:function(){var ar=[];ar.push(_scheduler._mode);ar.push(_scheduler._date);ar.push(self._getWeekStart());dojo.publish("/entity/activity/calendar/schedulerDateChanged",[ar,this]);},_initScheduler:function(){_scheduler.config.scroll_hour=this._userOptions["daystarttime"];_scheduler.config.workWeek=this._userOptions["workweek"];_scheduler.config.workHours=[0,this._userOptions["daystarttime"]*60,this._userOptions["dayendtime"]*60,24*60];_scheduler.config.eventsMaxCount=this._userOptions["numevents"];_scheduler.locale={date:this.scheduler_dates,labels:this.scheduler_labels};_scheduler.templates.day_scale_date=function(d){var _2f3c=_scheduler.date.date_to_str("%l");return _2f3c(d);};_scheduler.templates.day_date=function(dt){return _2f2b.formatLongDate(dt);};_scheduler.templates.week_date=function(d1,d2){var _2f3d=_scheduler.date.date_to_str("%F %d");var _2f3e=_scheduler.date.date_to_str("%d, %Y");if(d1.getMonth()!=d2.getMonth()){return _2f2b.formatLongDate(d1)+" &ndash; "+_2f2b.formatLongDate(_scheduler.date.add(d2,-1,"day"));}else{var d3=scheduler.date.add(d2,-1,"day");return _2f2b.formatLongDate(d1)+" &ndash; "+_2f2b.formatLongDate(_scheduler.date.add(d2,-1,"day"));}};var _2f3f=function(id){var valid=false;if(id){if(id.trim()!==""){valid=true;}}return valid;};var _2f40=_scheduler.date.date_to_str("%g:%i %A");var _2f41=_scheduler.date.date_to_str("%m/%d/%Y");_scheduler.templates.tooltip_text=function(start,end,event){var type=event.type;var _2f42="";var _2f43=(event.subType===null)?"":event.subType.replace("at","");if(type=="event"){_2f42="<b>"+self.tooltipType+" :</b> Event<br><b>"+self.tooltipDayType+" :</b> "+_2f43;_2f42+="<br/><b>"+self.tooltipStartDate+" :</b> "+_2f2b.formatEventDate(start);_2f42+="<br/><b>"+self.tooltipEndDate+" :</b> "+_2f2b.formatDateAdd(end,"day",-1);if(event.location){_2f42+="<br/><b>"+self.tooltipLocation+" :</b> "+event.location;}if(event.description){_2f42+="<br/><b>"+self.tooltipDescription+" :</b> "+event.description;}}else{_2f42="<b>"+self.tooltipTime+" :</b> "+_2f40(start)+" - "+_2f40(end);if(_2f3f(event.leadId)){if(event.leadName){_2f42+="<br/><b>"+self.tooltipLeadName+" :</b> "+event.leadName;}if(event.accountName){_2f42+="<br/><b>"+self.tooltipCompanyName+" :</b> "+event.accountName;}}else{if(event.contactName){_2f42+="<br/><b>"+self.tooltipContactName+" :</b> "+event.contactName;}if(event.accountName){_2f42+="<br/><b>"+self.tooltipAccountName+" :</b> "+event.accountName;}}if(event.phoneNumber){_2f42+="<br/><b>"+self.tooltipPhoneNumber+" :</b> "+event.phoneNumber;}if(event.location){_2f42+="<br/><b>"+self.tooltipLocation+" :</b> "+event.location;}if(event.regarding){_2f42+="<br/><b>"+self.tooltipRegarding+" :</b> "+event.regarding;}if(event.priority){_2f42+="<br/><b>"+self.tooltipPriority+" :</b> "+event.priority;}if(event.notes){_2f42+="<br/><b>"+self.tooltipNotes+" :</b> "+event.notes;}}return _2f42;};_scheduler.clearAll();var self=this;_scheduler.attachEvent("onTemplatesReady",function(){_scheduler.date.workweek_start=_scheduler.date.WorkWeekStart;_scheduler.templates.workweek_date=_scheduler.templates.week_date;_scheduler.templates.workweek_scale_date=_scheduler.templates.week_scale_date;_scheduler.date.add_workweek=function(date,inc){return _scheduler.date.add(date,inc*7,"day");};_scheduler.date.get_workweek_end=function(date){var shift=self._userOptions["workweek"][(self._userOptions["workweek"].length)-1]-self._userOptions["workweek"][0];return _scheduler.date.add(date,shift,"day");};});_scheduler.date.WorkWeekStart=function(date){var _2f44=self._userOptions["workweek"][0];if(date===null){date=new Date();}var shift=date.getDay();shift=_2f44-shift;var _2f45=_scheduler.date.add(date,shift,"day");if(_2f45>date){_2f45=_scheduler.date.add(_2f45,-7,"day");}return _scheduler.date.date_part(_2f45);};_scheduler.templates.event_title_class=function(start,end,event){var mode=_scheduler.getState().mode;if(mode!=="month"&&event.type!=="event"){if(!event.confirmed){return "pending";}}return "";};_scheduler.date.getDay=function(value){var _2f46=value;if(value.length>1){var _2f47=[];_2f47["SUNDAY"]=0;_2f47["MONDAY"]=1;_2f47["TUESDAY"]=2;_2f47["WEDNESDAY"]=3;_2f47["THURSDAY"]=4;_2f47["FRIDAY"]=5;_2f47["SATURDAY"]=6;_2f46=_2f47[value.toUpperCase()];}if(!_2f46){_2f46=1;}return _2f46;};_scheduler.templates.event_header=function(start,end,ev){var html="";var _2f48=_scheduler.date.date_to_str("%g:%i %A");var _2f49=_scheduler.date.date_to_str("%g:%i");if(ev.endsAfterMidnight){end=ev.actualEndDate;}if(ev.iconSrc){html+="<img src=\""+ev.iconSrc+"\" style=\"float:left;padding-right:4px;\"/>";}if(ev["recurring"]){html+="  <img src=\""+self._recurringIcon+"\" style=\"float:left;padding-right:4px;\"/>";}if(_scheduler._mode==="day"){if(ev["attachment"]){html+="  <img src=\""+self._attachmentIcon+"\" style=\"float:left;padding-right:4px;\"/>";}if(ev["alarm"]){html+="  <img src=\""+self._alarmIcon+"\" style=\"float:left;padding-right:4px;\"/>";}}if(ev["id"].toString().indexOf("-hist")>0){html+="  <img src=\""+self._activityCompleteIcon+"\" style=\"float:left;padding-right:4px;\"/>";}if(_scheduler._mode==="day"){html+=_2f48(start)+"-"+_2f48(end);}else{html+=_2f49(start)+"-"+_2f49(end);}return html;},_scheduler.templates.event_text=function(start,end,ev){var _2f4a="";var _2f4b=_scheduler.date.date_to_str("%g:%i %A");if(ev.endsAfterMidnight){end=ev.actualEndDate;}if(_scheduler._mode!=="month"){var _2f4c=ev["contactId"];var _2f4d=ev["contactName"];var _2f4e=ev["leadId"];var _2f4f=ev["leadName"];var _2f50=ev["accountId"];var _2f51=ev["accountName"];var _2f52=ev["opportunityId"];var _2f53=ev["opportunity"];var _2f54="";var _2f55="";var _2f56=false;if(_2f56){_2f4a+="</br>";}if(_2f3f(_2f4e)&&_2f51){if(_2f4f){_2f54="<a href=\"javascript:void(window.parent.location ='../../Lead.aspx?entityid="+_2f4e+"')\" >"+_2f4f+"</a><br>";}_2f55="<a href=\"javascript:void(window.parent.location ='../../Lead.aspx?entityid="+_2f4e+"')\" >"+_2f51+"</a><br>";}else{if(_2f3f(_2f50)&&_2f51){_2f55="<a href=\"javascript:void(window.parent.location = '../../Account.aspx?entityid="+_2f50+"')\">"+_2f51+"</a><br>";}if(_2f3f(_2f4c)){_2f54="<a href=\"javascript:void(window.parent.location ='../../Contact.aspx?entityid="+_2f4c+"')\" >"+_2f4d+"</a><br>";}}switch(self._userOptions["displaycontactaccount"]){case "0":_2f4a+=_2f54;break;case "1":_2f4a+=_2f55;break;case "2":_2f4a+=_2f54;_2f4a+=_2f55;break;case "3":_2f4a+=_2f55;_2f4a+=_2f54;break;case "4":_2f4a+="";break;}if(self._userOptions["showonopportunities"]&&_2f3f(_2f52)){_2f4a+="<a href=\"javascript:void(window.parent.location ='../../Opportunity.aspx?entityid="+_2f52+"&modeid=Detail')\" >"+_2f53+"</a><br>";}if(self._userOptions["showonphonenumber"]&&ev["phoneNumber"]){_2f4a+=ev["phoneNumber"]+"<br/>";}if(self._userOptions["showonregarding"]&&ev["regarding"]){_2f4a+=ev["regarding"]+"<br/>";}if(self._userOptions["showontime"]){_2f4a+=_2f4b(start)+"-"+_2f4b(end)+"<br/>";}if(ev["location"]){_2f4a+=ev["location"]+"<br/>";}if(ev["priority"]){_2f4a+=ev["priority"]+"<br/>";}if(ev["notes"]){_2f4a+=ev["notes"];}}else{_2f4a=ev.text;}return _2f4a;};_scheduler.date.week_start=function(date){var _2f57=self._userOptions["weekstart"];if(date===null){date=new Date();}var shift=date.getDay();shift=_2f57-shift;var _2f58=_scheduler.date.add(date,shift,"day");if(_2f58>date){_2f58=_scheduler.date.add(_2f58,-7,"day");}return _scheduler.date.date_part(_2f58);};_scheduler.date.arraySort=function(a,b){return a-b;};_scheduler.addEventNow=function(start,end,type){var sdate,edate,_2f59;if(start===null){if(_scheduler._mode==="month"){sdate=_2f2b.roundDateToNextQuarterHour(new Date());}else{sdate=new Date();}}else{var nDate=new Date(start);if(_scheduler._mode==="month"){nDate.setMinutes(new Date().getMinutes());nDate.setHours(new Date().getHours());sdate=_2f2b.roundDateToNextQuarterHour(nDate);}else{sdate=nDate;}}edate=end===null?sdate:new Date(end);if(type===null||typeof type==="object"){type=self._userOptions["defaultactivity"];}if(end!==null){_2f59=dojo.date.difference(sdate,new Date(end),"minute");}else{_2f59="60";}var svc=Sage.Services.getService("ActivityService");if(type=="event"){var args={StartDate:Sage.Utility.Convert.toIsoStringFromDate(sdate),EndDate:Sage.Utility.Convert.toIsoStringFromDate(edate)};svc.scheduleEvent(args);}else{if(type!==null){if(type.toLowerCase().indexOf("phone")>-1){type="PhoneCall";}else{if(type.toLowerCase().indexOf("meeting")>-1){type="Meeting";}else{if(type.toLowerCase().indexOf("to")>-1){type="ToDo";}else{if(type.toLowerCase().indexOf("personal")>-1){type="PersonalActivity";}else{type="Meeting";}}}}}svc.scheduleActivity({type:type,preConfigured:{StartDate:Sage.Utility.Convert.toIsoStringFromDate(sdate),Duration:_2f59}});}};_scheduler.xy.menu_width=0;_scheduler.config.details_on_dblclick=true;_scheduler.config.details_on_create=true;_scheduler.attachEvent("onClick",function(){return false;});_scheduler.showLightbox=function(_2f5a){if(_2f5a!==null&&_2f5a!==undefined){if(typeof _2f5a=="string"){var eId=_2f5a.replace("0:","");var _2f5b=eId.split("-");if(_2f5b[2]=="act"){if(_scheduler._events[_2f5a]&&!_scheduler._events[_2f5a].confirmed){Sage.Link.confirmActivityFor(_2f5b[0],_2f5b[1]);}else{Sage.Link.editActivity(_2f5b[0],false,_2f5b[1]);}}else{if(_2f5b[1]=="evt"||_2f5b[2]=="evt"){Sage.Link.editEvent(_2f5b[0]);}else{if(_2f5b[1]=="hist"||_2f5b[2]=="hist"){Sage.Link.editHistory(_2f5b[0]);}}}}}};_scheduler.getCalendarEventID=function(_2f5c){var _2f5d=_2f5c;if(_2f5c!==null&&_2f5c!==undefined){if(typeof _2f5c=="string"){_2f5c=_2f5c.replace("0:","");var eId=_2f5c.split("-");_2f5d=eId[0];}}return _2f5d;};_scheduler.getCalendarEventUserID=function(_2f5e){var _2f5f=_2f5e;if(_2f5e!==null&&_2f5e!==undefined){if(typeof _2f5e=="string"){_2f5e=_2f5e.replace("0:","");var eId=_2f5e.split("-");_2f5f=eId[1];}}return _2f5f;};_scheduler.goToActivityAssociation=function(_2f60,_2f61){var _2f62=null;if(_scheduler._events&&_scheduler._events[_2f61]){switch(_2f60){case "Contact":_2f62=_scheduler._events[_2f61].contactId;break;case "Account":_2f62=_scheduler._events[_2f61].accountId;break;case "Lead":_2f62=_scheduler._events[_2f61].leadId;break;case "Opportunity":_2f62=_scheduler._events[_2f61].opportunityId;break;case "Ticket":_2f62=_scheduler._events[_2f61].ticketId;break;}}if(_2f3f(_2f62)){Sage.Link.entityDetail(_2f60,_2f62);}};_scheduler.openActivity=function(_2f63){_scheduler.showLightbox(_2f63);};_scheduler.completeActivity=function(_2f64){Sage.Link.completeActivity(_scheduler.getCalendarEventID(_2f64));};_scheduler.getMenuActivityAction=function(_2f65,_2f66){if(!_2f65){return false;}var _2f67=false;var _2f68=_scheduler.getCalendarEventUserID(_2f65);var _2f69=_scheduler._events[_2f65]["leaderUserId"];var _2f6a=_2f2c.getClientContextByKey("userID");var _2f6b=_scheduler._events[_2f65]["confirmed"]||false;var _2f6c=_scheduler._events[_2f65]["allowDelete"];var _2f6d=_scheduler._events[_2f65]["allowEdit"];switch(_2f66){case "delete":if(_2f6c){if(_2f68===_2f69){_2f67="delete";}else{if(_2f6b){_2f67="declineConfirmed";}else{_2f67="decline";}}}else{if(_2f6a===_2f68){if(_2f6a===_2f69){_2f67="delete";}else{if(_2f6b){_2f67="declineConfirmed";}else{_2f67="decline";}}}else{_2f67=false;}}break;case "complete":if(_2f6b&&_2f68===_2f69&&_2f6d){_2f67=true;}break;}return _2f67;};_scheduler.deleteActivity=function(_2f6e){var _2f6f=_scheduler.getCalendarEventID(_2f6e);Sage.Link.deleteActivity(_2f6f);};_scheduler.declineConfirmedUserActivity=function(_2f70){var _2f71=_scheduler.getCalendarEventID(_2f70);var _2f72=_scheduler.getCalendarEventUserID(_2f70);var _2f73=_scheduler._events[_2f70]["leaderUserId"];_2f71=_2f71.indexOf(";")>0?_2f71.substring(0,12):_2f71;var _2f74={"$key":_2f71,"Leader":{"$key":_2f73}};var _2f75=Sage.Services.getService("ActivityService");_2f75.declineMemberConfirmation(_2f74,_2f72);};_scheduler.declineActivity=function(_2f76){var _2f77=_scheduler.getCalendarEventID(_2f76);var _2f78=_scheduler.getCalendarEventUserID(_2f76);var _2f79=Sage.Services.getService("ActivityService");_2f79.confirmActivityFor(_2f77,_2f78,self._loadNotification,self);};_scheduler.deleteActivityEvent=function(_2f7a){Sage.Link.deleteEvent(_scheduler.getCalendarEventID(_2f7a));};_scheduler.attachEvent("onEventAdded",function(_2f7b,_2f7c){if(typeof _2f7b!="string"){_scheduler.addEventNow(_2f7c.start_date,_2f7c.end_date,"atAppointment");_scheduler.deleteEvent(_2f7b);}});_scheduler.attachEvent("onBeforeEventChanged",function(_2f7d,_2f7e,isNew){if(isNew){switch(this._mode){case "day":case "week":case "workweek":_scheduler.addEventNow(_2f7d.start_date,_2f7d.end_date,self._userOptions["defaultactivity"]);_scheduler.deleteEvent(_2f7d.id);break;case "month":var _2f7f=_2f7d.end_date;if(dojo.date.compare(_2f7d.end_date,_2f7d.start_date)>0){_2f7f=dojo.date.add(_2f7d.end_date,"day",-1);}_scheduler.addEventNow(_2f7d.start_date,_2f7f,"event");_scheduler.deleteEvent(_2f7d.id);break;}}else{if(!_2f7d.allowEdit){return false;}var _2f80={Id:_2f7d.id,Text:_2f7d.text,StartDate:_2f7d.start_date,Alarm:_2f7d.alarm,EndDate:Sage.Utility.Convert.toIsoStringFromDate(_2f7d.end_date),AlarmMinutesBefore:_2f7d.alarmMinutesBefore||-15,Duration:dojo.date.difference(_2f7d.start_date,_2f7d.end_date,"minute")};if(typeof _2f7d.id=="string"){if(_2f7d.id&&_2f7d.id.indexOf("-act")>0){_2f80.Id=_scheduler.getCalendarEventID(_2f7d.id);_2f80.UserId=_scheduler.getCalendarEventUserID(_2f7d.id);if(_2f80.AlarmMinutesBefore){_2f80.AlarmTime=dojo.date.add(_2f80.StartDate,"minute",_2f80.AlarmMinutesBefore);_2f80.AlarmTime=Sage.Utility.Convert.toIsoStringFromDate(_2f80.AlarmTime);}_2f80.StartDate=Sage.Utility.Convert.toIsoStringFromDate(_2f80.StartDate);self._currentActivity=_2f80;if(_2f7d.id.indexOf(";")>0){self.onEditRecurrenceActivity(_2f80.Id);}else{self._updateUserActivity();}}else{if(_2f7d.id&&_2f7d.id.indexOf("-evt")>0){_2f80.Id=_2f7d.id.replace("-evt","");_2f80.EndDate=dojo.date.add(_2f7d.end_date,"day",-1);self._updateEvent(_2f80);}}}}return true;});_scheduler.attachEvent("onViewChange",function(mode,date){var _2f81={};_2f81.mode=mode;_2f81.date=date;_2f81.weekStartDate=_scheduler._week_min_date;_2f81.weekEndDate=_scheduler._week_max_date;_2f81.workWeekStartDate=_scheduler._workweek_min_date;_2f81.workWeekEndDate=_scheduler._workweek_max_date;dojo.publish("/entity/activity/calendar/schedulerDateChanged",[_2f81,this]);});_scheduler.attachEvent("onContextMenu",function(_2f82,_2f83){var pos=_scheduler._mouse_coords(_2f83);var start=_scheduler._min_date.valueOf()+(pos.y*_scheduler.config.time_step+(_scheduler._table_view?0:pos.x)*24*60)*60000;start=_scheduler._correct_shift(start);self._bindContextMenu(_2f82,start);});var _2f84=_scheduler.date.date_to_str("%g %A");_scheduler.config.hour_size_px=(60/this._userOptions["defaultinterval"])*42;_scheduler.templates.hour_scale=function(date){var html="";for(var i=0;i<60/self._userOptions["defaultinterval"];i++){if(i===0){html+="<div style='height:21px;line-height:21px;border-bottom: 1px solid #DcDcDc;'>"+_2f84(date)+"</div>";date=_scheduler.date.add(date,self._userOptions["defaultinterval"],"minute");}else{html+="<div style='height:21px;line-height:21px;'></div>";}}return html;};_scheduler.render_event_bar=function(ev){if(this._cols[ev._sday]===0){return;}var _2f85=this._rendered_location;var x=this._colsS[ev._sday];var x2=this._colsS[ev._eday];if(x2==x){x2=this._colsS[ev._eday+1];}var hb=this.xy.bar_height;var y=this._colsS.heights[ev._sweek]+(this._colsS.height?(this.xy.month_scale_height+2):2)+(ev._sorder*hb);var d=document.createElement("DIV");var cs=ev._timed?"dhx_cal_event_clear":"dhx_cal_event_line";var cse=_scheduler.templates.event_class(ev.start_date,ev.end_date,ev);if(cse){cs=cs+" "+cse;}var _2f86=(ev.color?("background-color:"+ev.color+";"):"");var color=(ev.textColor?("color:"+ev.textColor+";"):"");var html="";var _2f87=10;var _2f88=(this.xy.month_scale_height+_2f87)+2;var _2f89=this._colsS.heights[ev._sweek+1]-y;if(this._mode!=="month"||(this._mode==="month"&&(_2f89>_2f88))){var _2f8a=x2-x-15;if(ev["id"].toString().indexOf("-evt")===-1){x+=5;_2f8a=x2-x-8;}html="<div event_id=\""+ev.id+"\" class=\""+cs+"\" style=\"position:absolute; top:"+y+"px; left:"+x+"px; width:"+_2f8a+"px;"+color+""+_2f86+""+(ev._text_style||"")+"\" id =\""+_scheduler.uid()+"\">";if(ev._timed){if(ev.iconSrc){html+="<img src=\""+ev.iconSrc+"\" style=\"float:left;padding-right:4px;\"/>";}if(ev["id"].toString().indexOf("-hist")>0){html+="  <img src=\""+self._activityCompleteIcon+"\" style=\"float:left;padding-right:4px;\"/>";}html+=_scheduler.templates.event_bar_date(ev.start_date,ev.end_date,ev);}html+=_scheduler.templates.event_bar_text(ev.start_date,ev.end_date,ev)+"</div>";html+="</div>";}else{if(_2f89>(_2f87+2)){var uId=_scheduler.uid();html="<div style=\"position:absolute; top:"+y+"px; left:"+x+"px;width:"+(x2-x-5)+"px;\" id =\""+uId+"\">";html+="<a title=\""+self.tooltipMoreActivities+"\" href =\"javascript:window.scheduler.setCurrentView(new Date('"+ev.start_date+"'),'day');\">";html+="<img src=\"../../images/CalendarMoreArrow.png\" style=\"float:right\" />";html+="</a></div>";}else{html="<div></div>";}}d.innerHTML=html;this._rendered.push(d.firstChild);_2f85.appendChild(d.firstChild);};this.eventConnections.push(dojo.connect(document.body,"onclick",this,"_bodyClicked"));this.eventConnections.push(dojo.connect(window.parent.document.body,"onclick",this,"_bodyClicked"));this._bindContextMenu(null,new Date());},_loadNotification:function(_2f8b){this._notificationData=false;if(!this._notificationStore){this._notificationStore=new _2f28({include:["Activity","$descriptors"],resourceKind:"userNotifications",service:_2f29.getSDataService("system")});}this._notificationStore.fetch({predicate:"'"+_2f8b+"'",onComplete:this._receivedNotification,onError:this._requestFailure,scope:this});},_requestFailure:function(){},_receivedNotification:function(_2f8c){this._notificationData=_2f8c;var _2f8d=Sage.Services.getService("ActivityService");_2f8d.declineConfirmation({notification:this._notificationData,success:this._successfulDeclineConfirmation,failure:this._failedAcceptDecline,scope:this});},_successfulDeclineConfirmation:function(){dojo.publish("/entity/activity/decline",[this._getActivityDataFromNotificationData(),null]);dojo.publish("/entity/userNotification/delete",[this._notificationData["$key"],this]);},_getActivityDataFromNotificationData:function(){var _2f8e=null;var _2f8f=null;if(this._notificationData){if(this._notificationData.Activity){_2f8e=this._notificationData.Activity.$key;}if(this._notificationData.ToUser){_2f8f=this._notificationData.ToUser.$key;}}var _2f90={"activityId":_2f8e,"userId":_2f8f};return _2f90;},onEditRecurrenceActivity:function(actId){if(!this._editOccSeriesDlg){this._editOccSeriesDlg=new _2f2d({id:"editOccSeriesQueryCalendar",mode:"edit",disableSeriesOption:"disabled"});dojo.connect(this._editOccSeriesDlg,"onSelectOccurrence",this,function(actid,sDate){this._updateActivity(this._currentActivity);});}this._editOccSeriesDlg.set("activityId",actId);this._editOccSeriesDlg.show();},_bodyClicked:function(){if(this.schedulerContextMenu&&this.schedulerContextMenu.isShowingNow){this.schedulerContextMenu._popupWrapper.style.display="none";}},_updateUserActivity:function(){var _2f91=this._currentActivity;var _2f92=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("system"));_2f92.setResourceKind("userActivities");var key=dojo.string.substitute("\"ActivityId=${0};UserId=${1}\"",[_2f91.Id,_2f91.UserId]);_2f92.setResourceSelector(key);this._userActivityData={$key:key,Id:_2f91.Id,StartDate:_2f91.StartDate,Alarm:_2f91.Alarm,Duration:_2f91.Duration};if(_2f91.AlarmMinutesBefore){this._userActivityData.AlarmTime=_2f91.AlarmTime;}_2f92.update(this._userActivityData,{scope:this,success:function(act){this._updateActivity();},failure:function(e){}});},_updateActivity:function(_2f93){if(!_2f93){_2f93=this._userActivityData;}_2f93.$key=_2f93.Id;var _2f94=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("system"));_2f94.setResourceKind("activities");_2f94.setResourceSelector(dojo.string.substitute("\"${0}\"",[_2f93.$key]));_2f94.update(_2f93,{success:function(act){var _2f95=[];var i;var actId=_2f93.$key.substring(0,12);for(i in this._scheduler._events){var evt=this._scheduler._events[i];if(evt.id.indexOf(actId)>-1){_2f95.push(evt.id);}}if(_2f95){for(i=0;i<_2f95.length;i++){this._scheduler.deleteEvent(_2f95[i]);}}dojo.publish("/entity/activity/activityScheduler/reloadActivity",[actId,this]);if(actId!==act.$key){dojo.publish("/entity/activity/activityScheduler/reloadActivity",[act.$key,this]);}},failure:function(){},scope:dojo.global});},_getWeekStart:function(date){var _2f96=this._userOptions["weekstart"];if(date===null){date=new Date();}var shift=date.getDay();shift=_2f96-shift;var _2f97=_scheduler.date.add(date,shift,"day");if(_2f97>date){_2f97=_scheduler.date.add(_2f97,-7,"day");}return _scheduler.date.date_part(_2f97);},_getWorkWeekStart:function(date){},_getMonthStart:function(date){return date.setDate(1);},_updateEvent:function(_2f98){var _2f99=new Sage.SData.Client.SDataSingleResourceRequest(Sage.Data.SDataServiceRegistry.getSDataService("dynamic"));_2f99.setResourceKind("events");_2f99.setResourceSelector(dojo.string.substitute("\"${0}\"",[_2f98.Id]));var event={$key:_2f98.Id,StartDate:Sage.Utility.Convert.toIsoStringFromDate(_2f98.StartDate),EndDate:Sage.Utility.Convert.toIsoStringFromDate(_2f98.EndDate)};_2f99.update(event,{success:function(act){},failure:function(){},scope:dojo.global});},_preloadCalendarUserOptions:function(){var _2f9a=Sage.Services.getService("UserOptions");if(_2f9a){_2f9a.getByCategory("Calendar",this._receivedCalendarOptions,this,this._failedCalendarOptions);}},_receivedCalendarOptions:function(data){var opts=data["$resources"];if(opts.length>0){this._userOptions["workweek"]=[];}for(var i=0;i<opts.length;i++){var opt=opts[i];switch(opt["name"].toUpperCase()){case "WEEKSTART":this._userOptions["weekstart"]=_2f2a.getDay(opt["value"]);break;default:this._userOptions[opt["name"].toLowerCase()]=_2f2a.getConvertedOptionValue(opt["name"],opt["value"]);break;}}if(this._userOptions["workweeksun"]){this._userOptions["workweek"].push(0);}if(this._userOptions["workweekmon"]){this._userOptions["workweek"].push(1);}if(this._userOptions["workweektue"]){this._userOptions["workweek"].push(2);}if(this._userOptions["workweekwed"]){this._userOptions["workweek"].push(3);}if(this._userOptions["workweekthu"]){this._userOptions["workweek"].push(4);}if(this._userOptions["workweekfri"]){this._userOptions["workweek"].push(5);}if(this._userOptions["workweeksat"]){this._userOptions["workweek"].push(6);}if(this._userOptions["workweek"]){this._userOptions["workweek"].sort(_2f2a.arraySort);}this._initScheduler();this._launchScheduler();},_failedCalendarOptions:function(data){this._initScheduler();this._launchScheduler();},_bindContextMenu:function(_2f9b,_2f9c){if(this.schedulerContextMenu){this.schedulerContextMenu.unBindDomNode(this._iFrameId);}this.schedulerContextMenu=new dijit.Menu({});var _2f9d=null;if(_2f9b===null){_2f9d="mnuCalendarSchedule";}else{if(_2f9b.indexOf("-act")>0){_2f9d="mnuCalendarActivity";}else{if(_2f9b.indexOf("-evt")>0){_2f9d="mnuCalendarEvent";}else{if(_2f9b.indexOf("-hist")>0){_2f9d="mnuCalendarHistory";}}}}var _2f9e=Sage.UI.DataStore.ContextMenus.calendar_activityContextMenu.items;var len=_2f9e.length;for(var i=0;i<len;i++){var mDef=_2f9e[i];if(mDef.id===_2f9d){this._buildChildMenu(mDef.submenu,null,_2f9b,_2f9c);break;}}this.schedulerContextMenu.bindDomNode(this._iFrameId);},_buildChildMenu:function(_2f9f,_2fa0,_2fa1,_2fa2){var len=_2f9f.length;for(var i=0;i<len;i++){var mDef=_2f9f[i];if(mDef.submenu.length>0){var _2fa3=new dijit.Menu();this._buildChildMenu(mDef.submenu,_2fa3,_2fa1,_2fa2);var _2fa4=new dijit.PopupMenuItem({label:mDef.text,popup:_2fa3});if(_2fa0){_2fa0.addChild(_2fa4);}else{this.schedulerContextMenu.addChild(_2fa4);}}else{var _2fa5=null;if((mDef.text==="-")||(mDef.text===" ")||(mDef.isspacer)){_2fa5=new dijit.MenuSeparator();}else{var href=mDef.href;href=href.replace("javascript:Sage.Link.","javascript:parent.Sage.Link.");var _2fa6=false;var _2fa7=false;if(href.toUpperCase()==="DELETEACTIVITY"){_2fa7=_scheduler.getMenuActivityAction(_2fa1,"delete");if(!_2fa7){_2fa6=true;}}else{if(href.toUpperCase()==="COMPLETEACTIVITY"){var _2fa8=_scheduler.getMenuActivityAction(_2fa1,"complete");if(!_2fa8){_2fa6=true;}}}_2fa5=new Sage.UI.MenuItem({label:mDef.text||"...",icon:"Libraries/dojo/dojo/resources/blank.gif",title:mDef.tooltip||"",ref:href,deleteAction:_2fa7,disabled:_2fa6,onClick:function(){switch(this.ref.toUpperCase()){case "SCHEDULEPHONECALL":_scheduler.addEventNow(_2fa2,null,"PhoneCall");break;case "SCHEDULEMEETING":_scheduler.addEventNow(_2fa2,null,"Meeting");break;case "SCHEDULETODO":_scheduler.addEventNow(_2fa2,null,"ToDo");break;case "SCHEDULEPERSONALACTIVITY":_scheduler.addEventNow(_2fa2,null,"PersonalActivity");break;case "SCHEDULEEVENT":_scheduler.addEventNow(_2fa2,null,"event");break;case "OPENACTIVITY":case "OPENEVENT":case "OPENHISTORY":_scheduler.openActivity(_2fa1);break;case "COMPLETEACTIVITY":_scheduler.completeActivity(_scheduler.getCalendarEventID(_2fa1));break;case "DELETEACTIVITY":if(this.deleteAction==="delete"){_scheduler.deleteActivity(_2fa1);}else{if(this.deleteAction==="decline"){_scheduler.declineActivity(_2fa1);}else{if(this.deleteAction==="declineConfirmed"){_scheduler.declineConfirmedUserActivity(_2fa1);}}}break;case "GOTOACCOUNT":_scheduler.goToActivityAssociation("Account",_2fa1);break;case "GOTOCONTACT":_scheduler.goToActivityAssociation("Contact",_2fa1);break;case "GOTOOPPORTUNITY":_scheduler.goToActivityAssociation("Opportunity",_2fa1);break;case "GOTOTICKET":_scheduler.goToActivityAssociation("Ticket",_2fa1);break;case "GOTOLEAD":_scheduler.goToActivityAssociation("Lead",_2fa1);break;case "DELETEEVENT":_scheduler.deleteActivityEvent(_scheduler.getCalendarEventID(_2fa1));break;}}});}if(_2fa0){_2fa0.addChild(_2fa5);}else{this.schedulerContextMenu.addChild(_2fa5);}}}}});return _2f32;});},"Sage/UI/TimelessActivitiesPane":function(){define(["dijit/_Widget","dojo/i18n","Sage/UI/SLXPreviewGrid","Sage/UI/EditableGrid","Sage/UI/Columns/ActivityType","Sage/UI/Columns/HistoryType","Sage/Utility","Sage/Data/SDataServiceRegistry","Sage/Data/WritableSDataStore","dojo/_base/lang","dojo/string","dojo/i18n!./nls/TimelessActivitiesPane","dojo/_base/declare"],function(_2fa9,i18n,_2faa,_2fab,_2fac,_2fad,_2fae,_2faf,_2fb0,lang,_2fb1,_2fb2,_2fb3){var _2fb4=_2fb3("Sage.UI.TimelessActivitiesPane",_2fa9,{gridMode:null,Id:null,grid:null,currentUserIds:[],userColor:[],queryStartDate:null,queryEndDate:null,currentUserDeafultCalendarView:null,schedulerDate:null,weekStart:null,workWeekStart:null,weekEnd:null,workWeekEnd:null,users:{},userActivities:[],constructor:function(_2fb5){lang.mixin(this,i18n.getLocalization("Sage.UI","TimelessActivitiesPane",this.lang));this.Id=_2fb5.Id;this.users=_2fb5.users;this.gridMode=_2fb5.mode;var _2fb6;var self=this;var _2fb7=function(data){var ndate=data.date.valueOf();switch(data.mode){case "day":var _2fb8=new Date(ndate);_2fb8.setHours(0,0,0,0);self.queryStartDate=Sage.Utility.Activity.formatRawTimelessStartDate(_2fb8);self.queryEndDate=Sage.Utility.Activity.formatRawTimelessEndDate(_2fb8);break;case "month":var _2fb9=dojo.date.getDaysInMonth(new Date(ndate));var _2fba=new Date(new Date(ndate).setDate(1));_2fba.setHours(0,0,0,0);var _2fbb=new Date(new Date(ndate).setDate(_2fb9));_2fbb.setHours(0,0,0,0);self.queryStartDate=Sage.Utility.Activity.formatRawTimelessStartDate(_2fba);self.queryEndDate=Sage.Utility.Activity.formatRawTimelessEndDate(_2fbb);break;case "week":var _2fbc=new Date(data.weekStartDate.valueOf());var _2fbd=new Date(data.weekEndDate.valueOf());_2fbc.setHours(0,0,0,0);_2fbd.setHours(0,0,0,0);self.queryStartDate=Sage.Utility.Activity.formatRawTimelessStartDate(_2fbc);self.queryEndDate=Sage.Utility.Activity.formatRawTimelessEndDate(_2fbd);break;case "workweek":var _2fbe=new Date(data.workWeekStartDate.valueOf());var _2fbf=new Date(data.workWeekEndDate.valueOf());_2fbe.setHours(0,0,0,0);_2fbf.setHours(0,0,0,0);self.queryStartDate=Sage.Utility.Activity.formatRawTimelessStartDate(_2fbe);self.queryEndDate=Sage.Utility.Activity.formatRawTimelessEndDate(_2fbf);break;default:var sDate=new Date(ndate);sDate.setHours(0,0,0,0);self.queryStartDate=Sage.Utility.Activity.formatRawTimelessStartDate(sDate);self.queryEndDate=Sage.Utility.Activity.formatRawTimelessEndDate(sDate,"day",1);break;}};if(this.users){for(var i in this.users){_2fb6=lang.trim(this.users[i]["userId"].toString());var _2fc0=_2fb1.substitute("'${0}'",[_2fb6]);if(dojo.indexOf(this.currentUserIds,_2fc0)==-1){this.currentUserIds.push(_2fc0);}if(this.users[i]["usercolor"]){this.userColor[_2fb6]=lang.trim(this.users[i]["usercolor"].toString());}if(this.currentUserDeafultCalendarView===null){this.currentUserDeafultCalendarView=this.users[i]["defaultcalendarview"].toString();}if(this.weekStart===null){this.weekStart=this.users[i]["weekstartdate"];}if(this.weekEnd===null){this.weekEnd=this.users[i]["weekenddate"];}if(this.workWeekStart===null){this.workWeekStart=this.users[i]["workweekstartdate"];}if(this.workWeekEnd===null){this.workWeekEnd=this.users[i]["workweekenddate"];}}var _2fc1={};_2fc1.mode=this.currentUserDeafultCalendarView;_2fc1.date=new Date();_2fc1.weekStartDate=this.weekStart;_2fc1.weekEndDate=this.weekEnd;_2fc1.workWeekStartDate=this.workWeekStart;_2fc1.workWeekEndDate=this.workWeekEnd;_2fb7(_2fc1);}dojo.subscribe("/sage/ui/calendarUserList/updated",function addUser(_2fc2){if(_2fc2){self.currentUserIds=[];for(var i in _2fc2){var _2fc3=lang.trim(_2fc2[i]["userId"].toString());var _2fc4=_2fb1.substitute("'${0}'",[_2fc3]);if(dojo.indexOf(self.currentUserIds,_2fc4)==-1){self.currentUserIds.push(_2fc4);}if(_2fc2[i]["usercolor"]){self.userColor[_2fc3]=lang.trim(_2fc2[i]["usercolor"].toString());}}}self.userActivities=[];setTimeout(function(){self.grid.refresh();},"1");});dojo.subscribe("/sage/ui/calendarUser/selectionChanged/add",function addUser(data){var _2fc5=lang.trim(data.userId.toString());var _2fc6=_2fb1.substitute("'${0}'",[_2fc5]);if(dojo.indexOf(self.currentUserIds,_2fc6)==-1){self.currentUserIds.push(_2fc6);}self.userColor[_2fc5]=data.usercolor.toString();self.userActivities=[];setTimeout(function(){self.grid.refresh();},"1");});dojo.subscribe("/sage/ui/calendarUser/selectionChanged/remove",function removeUser(data){self.currentUserIds=dojo.filter(self.currentUserIds,function(item){return item!="'"+data.userId.toString()+"'";});self.userActivities=[];self.grid.refresh();});dojo.subscribe("/entity/activity/calendar/schedulerDateChanged",function refreshList(data){_2fb7(data);self.userActivities=[];self.grid.refresh();});dojo.subscribe("/entity/activity/create",function(data){self.refreshGrid(data);});dojo.subscribe("/entity/userActivities/timeless/saved",function(data){self.grid.refresh();});dojo.subscribe("/entity/activity/change",function(data){self.refreshGrid(data);});dojo.subscribe("/entity/activity/timeless/delete",function(data){self.userActivities=[];self.grid.refresh();});},refreshGrid:function(data){if(data!==null){if(data.Timeless||data.TimelessChanged){this.userActivities=[];this.grid.refresh();}}},startup:function(){var self=this;var _2fc7;if(this.gridMode==="completed"){_2fc7={context:null,readOnly:true,columns:[{field:"$key",editable:false,hidden:true,id:"id",formatter:function(value,_2fc8,cel){var _2fc9=[cel.grid.id,"-row",_2fc8].join("");var id=(Sage.Utility.getModeId()==="insert")?_2fc9:value;var _2fca=["<div id=",id," >",id,"</ div>"].join("");return _2fca;}},{field:"UserId",name:" ",sortable:false,width:"20px",formatter:function(value){return "<div class='userStyles "+self.userColor[value]+"'></div>";}},{field:"Type",keyField:"$key",name:this.header_type,type:_2fad,width:"90px"},{field:"ContactName",name:this.header_contact,width:"100px"},{field:"Description",name:this.header_regarding,width:"100px"}],storeOptions:{service:_2faf.getSDataService("dynamic"),resourceKind:"history",include:["$descriptors"],select:["$key","Regarding","Description","AccountId","AccountName","ActivityId","ContactName","Recurring","StartDate","Timeless","Type","Priority","PhoneNumber","LeadId","LeadName","LongNotes","Location","UserName"],sort:[{attribute:"StartDate",descending:true}]},tools:[],contextualCondition:function(){if(self.queryStartDate===null){self.queryStartDate=Sage.Utility.Activity.formatTimelessStartDate(new Date());}if(self.queryEndDate===null){self.queryEndDate=Sage.Utility.Activity.formatTimelessEndDate(new Date());}return dojo.string.substitute("UserId in (${0}) and Timeless and StartDate between @${1}@ and @${2}@ and Type in ('atPhoneCall','atToDo','atAppointment','atPersonal')",[self.currentUserIds.toString(),self.queryStartDate,self.queryEndDate]);},id:this.Id,tabId:"ActivityCalendar",gridNodeId:this.gridNodeId,rowsPerPage:10,singleClickEdit:true,dblClickAction:Sage.Link.editActivity,selectionMode:"single"};}else{_2fc7={context:null,readOnly:true,columns:[{field:"$key",editable:false,hidden:true,id:"id",formatter:function(value,_2fcb,cel){var _2fcc=[cel.grid.id,"-row",_2fcb].join("");var id=(Sage.Utility.getModeId()==="insert")?_2fcc:value;var _2fcd=["<div id=",id," >",id,"</ div>"].join("");return _2fcd;}},{field:"UserActivities.$resources",name:" ",sortable:false,width:"20px",formatter:function(data){var uId;if(data){for(var i=0;i<data.length;i++){var _2fce=data[i];if(!_2fce["remove"]){var _2fcf=_2fce.User.$key;uId=_2fcf;}}}return "<div class='userStyles "+self.userColor[uId]+"'></div>";}},{field:"Type",keyField:"$key",name:this.header_type,type:_2fac,width:"90px"},{field:"ContactName",name:this.header_contact,width:"100px"},{field:"Description",name:this.header_regarding,width:"100px"}],storeOptions:{service:_2faf.getSDataService("system"),resourceKind:"activities",include:["$descriptors,UserInfo"],select:["$key","Regarding","Description","AccountId","AccountName","ActivityId","ContactName","Recurring","StartDate","Timeless","Type","Priority","Leader/$key","PhoneNumber","LeadId","LeadName","LongNotes","Location","UserActivities/User/$key"],sort:[{attribute:"StartDate",descending:true}],onComplete:this._onComplete},tools:[],contextualCondition:function(){if(self.queryStartDate===null){self.queryStartDate=Sage.Utility.Activity.formatTimelessStartDate(new Date());}if(self.queryEndDate===null){self.queryEndDate=Sage.Utility.Activity.formatTimelessEndDate(new Date());}return dojo.string.substitute("UserActivities.UserId in (${0}) and Timeless and UserActivities.Status ne 'asDeclned' and StartDate between @${1}@ and @${2}@ and Type in ('atPhoneCall','atToDo','atAppointment','atPersonal')",[self.currentUserIds.toString(),self.queryStartDate,self.queryEndDate]);},id:this.Id,tabId:"ActivityCalendar",gridNodeId:this.gridNodeId,rowsPerPage:10,singleClickEdit:true,dblClickAction:Sage.Link.editActivity,selectionMode:"single"};}var grid=new _2fab(_2fc7);var _2fd0=dijit.byId(grid.gridNodeId);_2fd0.addChild(grid);window.setTimeout(function(){grid.startup();_2fd0.resize();},1);this.grid=grid;grid.onRowContextMenu=function(e){var item=e.grid.getItem(e.rowIndex);self._bindContextMenu(item.$key,new Date(),e.grid.domNode);};var _2fd1=function(id){var valid=false;if(id){if(id.trim()!==""){valid=true;}}return valid;};grid.onRowMouseOver=function(e){var item=e.grid.getItem(e.rowIndex);var html="";var _2fd2,_2fd3="";if(item.Type){html+=self.tooltip_type+" : "+Sage.Utility.Activity.getActivityTypeName(item.Type)+"<br>";}if(_2fd1(item.LeadId)){html+=self.tooltip_lead+" : "+item.LeadName+"<br>";if(item.AccountName){html+=self.tooltip_company+" : "+item.AccountName+"<br>";}}else{if(item.ContactName){html+=self.tooltip_contact+" : "+item.ContactName+"<br>";}if(item.AccountName){html+=self.tooltip_account+" : "+item.AccountName+"<br>";}}if(item.PhoneNumber){html+=self.tooltip_phone+" : "+item.PhoneNumber+"<br>";}if(item.UserId){_2fd2=item.UserId;_2fd3=item.UserName;}else{if(item.Leader){_2fd2=item.Leader.$key;_2fd3=item.Leader.$descriptor;}}if(lang.trim(_2fae.getClientContextByKey("userID")).toUpperCase()!==_2fd2){if(_2fd3){html+=self.tooltip_leader+" : "+_2fd3+"<br>";}}if(item.Description){html+=self.tooltip_regarding+" : "+item.Description+"<br>";}if(item.Location){html+=self.tooltip_location+" : "+item.Location+"<br>";}if(item.LongNotes){html+=self.tooltip_notes+" : "+item.LongNotes+"<br>";}dijit.showTooltip(html,e.cellNode);};grid.onRowMouseOut=function(e){dijit.hideTooltip(e.cellNode);};dojo.connect(this.grid,"onHeaderCellClick",function(e){self.userActivities=[];this.inherited(arguments);});dojo.connect(dijit.byId("TaskPane_splitter"),"onMouseUp",function(e){self.userActivities=[];});},_startGrid:function(data){this.grid.startup();},_onComplete:function(data){var self=this;if(data){self.userActivities=[];var cnt=data.length;for(var i=0;i<cnt;i++){var _2fd4=false;var _2fd5=data[i]["$key"];if(data[i].UserActivities){var _2fd6=data[i].UserActivities.$resources;var ln=_2fd6.length;for(var j=0;j<ln;j++){if(_2fd4){data[i].UserActivities.$resources[j]["remove"]=true;continue;}var _2fd7=_2fd6[j];var _2fd8=_2fd7.User.$key;var _2fd9=self.userActivities[_2fd5];if(_2fd9){if(dojo.indexOf(_2fd9,_2fd8)<0){self.userActivities[_2fd5].push(_2fd8);_2fd4=true;}else{data[i].UserActivities.$resources[j]["remove"]=true;}}else{self.userActivities[_2fd5]=[];self.userActivities[_2fd5].push(_2fd8);_2fd4=true;}}}else{var uId=data[i].Leader.$key;var uIds=self.userActivities[_2fd5];if(uIds){if(dojo.indexOf(uIds,uId)<0){self.userActivities[_2fd5].push(uId);}}else{self.userActivities[_2fd5]=[];self.userActivities[_2fd5].push(uId);}data[i].UserActivities=[];data[i].UserActivities.$resources=[];var _2fda={};_2fda.$key=uId;_2fda.User={$key:uId};data[i].UserActivities.$resources.push(_2fda);}}}},_bindContextMenu:function(_2fdb,_2fdc,_2fdd){if(this.pMenu1){this.pMenu1.unBindDomNode(_2fdd);}this.pMenu1=null;this.pMenu1=new dijit.Menu({});var _2fde="mnuCalendarActivity";if(this.gridMode==="completed"){_2fde="mnuCalendarHistory";}var _2fdf=Sage.UI.DataStore.ContextMenus.calendar_activityContextMenu.items;var len=_2fdf.length;for(var i=0;i<len;i++){var mDef=_2fdf[i];if(mDef.id===_2fde){this._buildChildMenu(mDef.submenu,null,_2fdb,_2fdc);break;}}this.pMenu1.bindDomNode(_2fdd);},_buildChildMenu:function(_2fe0,_2fe1,_2fe2,_2fe3){var len=_2fe0.length;for(var i=0;i<len;i++){var mDef=_2fe0[i];if(mDef.submenu.length>0){var _2fe4=new dijit.Menu();this._buildChildMenu(mDef.submenu,_2fe4,_2fe2,_2fe3);var _2fe5=new dijit.PopupMenuItem({label:mDef.text,popup:_2fe4});if(_2fe1){_2fe1.addChild(_2fe5);}else{this.pMenu1.addChild(_2fe5);}}else{var _2fe6=null;if((mDef.text==="-")||(mDef.text===" ")||(mDef.isspacer)){_2fe6=new dijit.MenuSeparator();}else{var href=mDef.href;var self=this;_2fe6=new Sage.UI.MenuItem({label:mDef.text||"...",icon:"Libraries/dojo/dojo/resources/blank.gif",title:mDef.tooltip||"",ref:href,onClick:function(){switch(this.ref.toUpperCase()){case "OPENACTIVITY":Sage.Link.editActivity(_2fe2);break;case "OPENHISTORY":Sage.Link.editHistory(_2fe2);break;case "COMPLETEACTIVITY":Sage.Link.completeActivity(_2fe2);break;case "DELETEACTIVITY":Sage.Link.deleteActivity(_2fe2,function(data){self.grid.refresh();});break;case "GOTOACCOUNT":Sage.Link.goToActivityAssociation("Account",_2fe2);break;case "GOTOCONTACT":Sage.Link.goToActivityAssociation("Contact",_2fe2);break;case "GOTOOPPORTUNITY":Sage.Link.goToActivityAssociation("Opportunity",_2fe2);break;case "GOTOTICKET":Sage.Link.goToActivityAssociation("Ticket",_2fe2);break;case "GOTOLEAD":Sage.Link.goToActivityAssociation("Lead",_2fe2);break;}}});}if(_2fe1){_2fe1.addChild(_2fe6);}else{this.pMenu1.addChild(_2fe6);}}}}});return _2fb4;});},"Sage/UI/Columns/HistoryType":function(){define(["dojox/grid/cells/_base","Sage/Utility","Sage/Utility/Activity","dojo/string","dojo/_base/declare"],function(_2fe7,util,_2fe8,_2fe9,_2fea){var _2feb=_2fea("Sage.UI.Columns.HistoryType",_2fe7,{keyField:false,format:function(_2fec,_2fed){var type=this.get(_2fec,_2fed);if(!type){return this.defaultValue;}var key=util.getValue(_2fed,this.keyField||"$key");var fmt="<div class=\"Global_Images icon16x16 ${0}\"></div>&nbsp;<span onclick=\"javascript:Sage.Link.editHistory('${1}')\" class=\"activity-type-link\">${2}</span>";return _2fe9.substitute(fmt,[_2fe8.getActivityImageClass(type,"small"),key,_2fe8.getActivityTypeName(type)]);}});return _2feb;});},"Sage/UI/CalendarUsersListPane":function(){define(["Sage/Data/SDataServiceRegistry","Sage/Data/WritableSDataStore","Sage/UI/EditCalendarUsers","Sage/Utility","dojo/_base/lang","dojo/_base/array","dojo/i18n","dojo/on","dojo/parser","dojo/dom","dojo/query","dojo/_base/lang","dojo/_base/declare","dojo/dom-construct","dojo/i18n!./nls/CalendarUsersListPane","dojo/data/ItemFileWriteStore","dojox/grid/enhanced/plugins/IndirectSelection","dojox/grid/EnhancedGrid","dojox/grid/enhanced/plugins/Pagination"],function(_2fee,_2fef,_2ff0,_2ff1,_2ff2,array,i18n,on,_2ff3,dom,_2ff4,lang,_2ff5,_2ff6,_2ff7){var _2ff8=_2ff5("Sage.UI.CalendarUsersListPane",null,{Id:null,_store:null,_grid:null,_colors:{},_selectedUsers:{},_maxUserCount:4,_checkedUsersCount:0,_initialLoad:false,_storeItems:[],_maxUserCountReached:false,_userOptions:{},editCalendarUsers:null,_favoriteUsersList:[],editCalendarUsersHandle:null,_userCalendarFavoriteId:null,_usersListUpdatedFromDialog:false,_selectedUsersListUpdatedFromDialog:false,_LOCALSTORE_NAMESPACE:"SalesLogix-Calendar",_currentUserId:null,constructor:function(_2ff9){this.Id=_2ff9.Id;this.EditCalUsersNodeId=_2ff9.EditUsersNode;this._userOptions=_2ff9.options;this._usersListUpdatedFromDialog=false;this._selectedUsersListUpdatedFromDialog=false;this._currentUserId=Sage.Utility.getClientContextByKey("userID");this._colors=[{"usercolor":"user2","set":false},{"usercolor":"user3","set":false},{"usercolor":"user4","set":false},{"usercolor":"user5","set":false}];lang.mixin(this,_2ff7);this._initializeList();var self=this;var _2ffa=_2ff6.toDom("<div align=\"right\"><a id=\"editUserLink\" href=\"#\" class=\"filter-edit-items\">"+this.editUsersLinkText+"</a></div>");_2ff6.place(_2ffa,dojo.byId("grid"),"before");this.editCalendarUsers=new _2ff0({id:"EditCalendarUsers1",parent:this});on(dom.byId("editUserLink"),"click",function(e){self.editCalendarUsers.showDialog(self._favoriteUsersList,self._userCalendarFavoriteId);e.cancelBubble=true;});},refresh:function(){var _2ffb=Sage.Utility.getClientContextByKey("userID");var query={conditions:dojo.string.substitute("AccessId eq '${0}'",[_2ff2.trim(_2ffb)])};dijit.byId("grid").setQuery(query);},_where:function(){var _2ffc=Sage.Utility.getClientContextByKey("userID");return dojo.string.substitute("AccessId eq '${0}'",[_2ff2.trim(_2ffc)]);},_getSort:function(){var sort=[{attribute:"Name"}];return sort;},_getUserColor:function(_2ffd){var color="";if(this._selectedUsers[_2ffd]){color=this._selectedUsers[_2ffd].usercolor;}return color;},_initializeList:function(){var _2ffe=this.header_user||"User";var _2fff=this.maxUsersErrorMessage||"Sorry, you cannot view more than ${0} calendars (including your own) at one time.  Clear one of the currently-selected calendars and try again.";_2fff=dojo.string.substitute(_2fff,[this._maxUserCount]);var self=this;var _3000=function(data,_3001){self._storeItems=[];self._favoriteUsersList=[];array.forEach(data,function(item,i){_2ff2.mixin(item,{usercolor:"",username:item["Name"],userId:item["ResourceId"],ResourceId:_2ff2.trim(item["ResourceId"])});self._favoriteUsersList.push(item["ResourceId"]);self._storeItems.push(item);if(!self._userCalendarFavoriteId){self._userCalendarFavoriteId=item["$key"];}});if(self._favoriteUsersList.length===0){self._favoriteUsersList.push(Sage.Utility.getClientContextByKey("userID"));}};var store=this._store=new Sage.Data.WritableSDataStore({service:_2fee.getSDataService("dynamic"),resourceKind:"calendarfavoriteusersviews",select:["$key","Name","UserId","ResourceId","Selected"],include:[],sort:[{attribute:"Selected desc"}],query:{conditions:this._where()},onComplete:_3000});var _3002=[{field:"ResourceId",width:"20px",name:" ",formatter:function(value){return "<div class='userStyles "+self._getUserColor(value)+"'></div>";}},{field:"Name",width:"100%",name:_2ffe}];var grid=this._grid=new dojox.grid.EnhancedGrid({id:"grid",store:store,structure:_3002,layout:"layout",noDataMessage:"<span class='dojoxGridNoData'>"+this.noUsersMessage+"</span>",keepSelection:true,plugins:{indirectSelection:{headerSelector:false,width:"20px",styles:"text-align: center;"}}},dojo.byId(this.Id));dojo.connect(grid.selection,"onSelected",function(_3003){if(!self._initialLoad){if(self._checkedUsersCount<self._maxUserCount){var item=grid.getItem(_3003);self._checkedUsersCount++;var _3004=item["ResourceId"].substr(0,12);var _3005="";if(self._selectedUsers[_3004]){}else{if(_3004===_2ff2.trim(_2ff1.getClientContextByKey("userID"))){_3005="user1";}else{if(!_3005||_3005===""){for(var j=0;j<self._colors.length;j++){if(!self._colors[j]["set"]){_3005=self._colors[j]["usercolor"];self._colors[j]["set"]=true;break;}}}}var _3006={};_3006["userId"]=_3004;_3006["usercolor"]=_3005;self._selectedUsers[_3004]=_3006;var _3007=_2ff2.clone(_3006);self._saveUserOption();grid.update();dojo.publish("/sage/ui/calendarUser/selectionChanged/add",[_3007,null]);}}else{self._maxUserCountReached=true;grid.rowSelectCell.toggleRow(_3003,false);Sage.UI.Dialogs.showError(_2fff);}}else{if(self._checkedUsersCount<self._maxUserCount){}}});dojo.connect(grid.selection,"onDeselected",function(_3008){if(!self._initialLoad){if(self._maxUserCountReached){self._maxUserCountReached=false;return;}var item=grid.getItem(_3008);var _3009=false;var _300a=item["ResourceId"].substr(0,12);var _300b=self._selectedUsers[_300a].usercolor;if(self._selectedUsers[_300a]){_3009=true;}if(_3009){for(var j=0;j<self._colors.length;j++){if(self._colors[j]["usercolor"]===_300b){self._colors[j]["set"]=false;break;}}delete self._selectedUsers[_300a];self._checkedUsersCount--;self._saveUserOption();grid.update();var _300c={};_300c["userId"]=_300a;dojo.publish("/sage/ui/calendarUser/selectionChanged/remove",[_300c,this]);}}});dojo.connect(grid,"_onFetchComplete",function(){self._initialLoad=true;var _300d=false;var _300e=[];var _300f=_2ff2.clone(self._selectedUsers);var _3010=self._grid.rowCount>self._grid.rowsPerPage?self._grid.rowsPerPage:self._grid.rowCount;for(var i=0;i<_3010;i++){var item=self._storeItems[i];var _3011=item["ResourceId"].substr(0,12);if(self._selectedUsers[_3011]){_300e.push(_3011);if(!self._grid.selection.selected[i]){if(self._checkedUsersCount<self._maxUserCount){self._grid.rowSelectCell.toggleRow(i,true);self._checkedUsersCount++;}}}else{self._grid.rowSelectCell.toggleRow(i,false);}}for(var j in _300f){var uId=_2ff2.trim(_300f[j]["userId"].toString());var _3012=_2ff2.trim(_300f[j]["usercolor"].toString());if(array.indexOf(_300e,uId)<0){delete self._selectedUsers[uId];for(var k=0;k<self._colors.length;k++){if(self._colors[k]["usercolor"]===_3012){self._colors[k]["set"]=false;break;}}_300d=true;}}if(_300d){self._saveUserOption();}self._initialLoad=false;if(self._selectedUsers&&!self._isEmpty(self._selectedUsers)){var _3013=_2ff2.clone(self._selectedUsers);if(!self._usersListUpdatedFromDialog){dojo.publish("/sage/ui/calendarUserList/loaded",[_3013,null]);}else{if(self._usersListUpdatedFromDialog&&self._selectedUsersListUpdatedFromDialog){dojo.publish("/sage/ui/calendarUserList/updated",[_3013,null]);}}self._grid.update();}else{if(!self._usersListUpdatedFromDialog){dojo.publish("/sage/ui/calendarUserList/loadedNavigationCalendar",[self._userOptions["weekstart"],this]);}}});self._grid.canSort=function(col){return false;};if(this._userOptions["rememberusers"]){this._loadCalendarUserListOptions();}else{var data={};var key="calendarUsers-"+this._currentUserId;data["value"]=this._getFromSessionStorage(key,this._LOCALSTORE_NAMESPACE);this._receivedCalendarUserListOptions(data);}},_isEmpty:function(obj){for(var prop in obj){if(obj.hasOwnProperty(prop)){return false;}}return true;},_loadCalendarUserListOptions:function(){var _3014=Sage.Services.getService("UserOptions");if(_3014){_3014.get("CalendarUsers","Calendar",this._receivedCalendarUserListOptions,null,this);}},_receivedCalendarUserListOptions:function(data){if(data!==null){if(data){var _3015=data["value"];var _3016=_2ff1.getClientContextByKey("userID");_3016=_2ff2.trim(_3016);if(_3015===null||_3015===""){_3015=_3016+"|"+"user1";}else{if(_3015.indexOf(_3016)<0){_3015+=","+_3016+"|"+"user1";}}dojo.cookie("selectedCalendarUsers",_3015);this._setSelectedUsers(_3015);}}if(this._selectedUsers){this._grid.startup();}},refreshCalendarUsers:function(_3017){var _3018="";var _3019=false;var self=this;for(var i in this._selectedUsers){_3018=this._selectedUsers[i]["userId"].toString();if(!_2ff1.isItemInArray(_3017,_3018)){var _301a=this._selectedUsers[_3018].usercolor;for(var j=0;j<this._colors.length;j++){if(this._colors[j]["usercolor"]===_301a){this._colors[j]["set"]=false;break;}}this._checkedUsersCount--;var _301b={};_301b["userId"]=_3018;dojo.publish("/sage/ui/calendarUser/selectionChanged/remove",[_301b,this]);delete this._selectedUsers[i];_3019=true;}}this._usersListUpdatedFromDialog=true;if(_3019){this._selectedUsersListUpdatedFromDialog=true;this._saveUserOption(this.refresh);}else{this._selectedUsersListUpdatedFromDialog=false;setTimeout(function(){self.refresh();},"10");}},_saveUserOption:function(_301c){var _301d="";if(this._selectedUsers){for(var i in this._selectedUsers){if(_301d!==""){_301d+=",";}_301d+=_2ff2.trim(this._selectedUsers[i]["userId"].toString());_301d+="|";if(this._selectedUsers[i]["usercolor"]){_301d+=this._selectedUsers[i]["usercolor"].toString();}}if(this._userOptions["rememberusers"]){var _301e=Sage.Services.getService("UserOptions");if(_301e){_301e.set("CalendarUsers","Calendar",_301d,_301c,null,this);}}else{var key="calendarUsers-"+this._currentUserId;this._saveToSessionStorage(key,_301d,this._LOCALSTORE_NAMESPACE);}}},_setSelectedUsers:function(_301f){if(_301f!==null){var _3020=_301f.split(",");var _3021;var _3022,_3023;for(var i=0;i<_3020.length;i++){_3021=_3020[i];if(_3021){_3022=_3021.split("|")[0];_3023=_3021.split("|")[1];if(!_3023){for(var j=0;j<this._colors.length;j++){if(!this._colors[j]["set"]){_3023=this._colors[j]["usercolor"];this._colors[j]["set"]=true;break;}}}else{for(var k=0;k<this._colors.length;k++){if(this._colors[k]["usercolor"]===_3023){this._colors[k]["set"]=true;break;}}}var _3024={};_3024["userId"]=_3022;_3024["usercolor"]=_3023;this._selectedUsers[_3022]=_3024;}}}},_getFromSessionStorage:function(key,_3025){if(!_3025){_3025=this._LOCALSTORE_NAMESPACE;}var _3026=_3025+"_"+key;return sessionStorage.getItem(_3026);},_saveToSessionStorage:function(key,value,_3027){if(!_3027){_3027=this._LOCALSTORE_NAMESPACE;}var _3028=_3027+"_"+key;sessionStorage.setItem(_3028,value);}});return _2ff8;});},"Sage/UI/EditCalendarUsers":function(){define(["dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","Sage/Data/SDataServiceRegistry","Sage/Data/WritableSDataStore","dijit/Dialog","dijit/form/Button","Sage/UI/ImageButton","dijit/form/CheckBox","dijit/form/TextBox","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-construct","dijit/registry","Sage/UI/Controls/_DialogHelpIconMixin","dojo/json","dojo/parser","dojo/text!./templates/EditCalendarUsers.html","dojo/i18n!./nls/EditCalendarUsers","Sage/Utility"],function(_3029,_302a,_302b,_302c,_302d,_302e,_302f,_3030,_3031,_3032,_3033,array,lang,_3034,_3035,_3036,json,_3037,_3038,_3039,_303a){return _3033("Sage.UI.EditCalendarUsers",[_3029,_302a,_302b],{templateString:_3038,widgetsInTemplate:true,id:"editFilterItems",store:null,checkBoxes:null,allItems:null,parent:null,formatter:null,favoriteUserIds:[],maxSelectCount:25,selectedCount:0,currentUserId:null,count:1000,loading:false,handles:null,mainHandles:null,safeCheck:true,open:false,checkBoxTemplate:new Simplate(["<input id=\"{%: $.id %}\" ","name=\"{%: $.name %}\" ","data-dojo-type=\"dijit.form.CheckBox\" ","{%: $.disabled %}","class=\"editFilterCheckBox\" />","<label for=\"{%: $.id %}\" {%: $.disabledStyle %}>{%: $.itemName %}</label><br />"]),constructor:function(_303b){this.inherited(arguments);this.checkBoxes=[];this.allItems=[];this.handles=[];this.mainHandles=[];lang.mixin(this,_3039);this.initialize();},initialize:function(){this.maxUsersErrorMessage=dojo.string.substitute(this.maxUsersErrorMessage,[this.maxSelectCount]);this.currentUserId=Sage.Utility.getClientContextByKey("userID");var _303c=new Sage.SData.Client.SDataResourceCollectionRequest(_302c.getSDataService("dynamic"));_303c.setResourceKind("activityresourceviews");this.store=new _302d({service:_302c.getSDataService("dynamic"),resourceKind:"activityresourceviews",select:["$key","ResourceId","Name"],include:[],sort:[{attribute:"Name"}]});},_where:function(_303d){var _303e=Sage.Utility.getClientContextByKey("userID");var _303f="";if(lang.trim(_303e)==="ADMIN"){_303f=dojo.string.substitute("(AccessId eq '${0}' OR AccessId eq '${1}' OR AccessId eq 'EVERYONE') AND Type eq 'User'",[_303e,lang.trim(_303e)]);}else{_303f=dojo.string.substitute("(AccessId eq '${0}' OR AccessId eq 'EVERYONE') AND Type eq 'User'",[lang.trim(_303e)]);}if(_303d){_303d=_303d.replace(/'/g,"''");_303f+=dojo.string.substitute(" AND Name like '%${0}%'",[lang.trim(_303d)]);}return _303f;},postCreate:function(){this.inherited(arguments);this.mainHandles.push(this.textFind.on("keyDown",lang.hitch(this,this._onFindMouseDown)));},showDialog:function(_3040,_3041){this.favariteUserCalendarId=_3041;this.favoriteUserIds=_3040;this.requestData();lang.mixin(this.dialogNode,new _3036());this.dialogNode.titleNode.innerHTML=this.dialogTitle;this.dialogNode.show();this.open=true;},hideDialog:function(){this.dialogNode.hide();},_onClearClick:function(){this.textFind.set("value","");this._onFindClick();},_onCancelClick:function(){this.textFind.set("value","");this.dialogNode.hide();this.allItems=[];},_onOKClick:function(){this.textFind.set("value","");this._addFavoriteUsers(this.allItems,this._refreshParent,this);this.dialogNode.hide();this.allItems=[];},_refreshParent:function(scope){if(scope.parent){scope.parent.refreshCalendarUsers(scope.allItems);}},_addFavoriteUsers:function(_3042,_3043,scope){var _3044=Sage.Data.SDataServiceRegistry.getSDataService("dynamic");var _3045=new Sage.SData.Client.SDataServiceOperationRequest(_3044).setResourceKind("UserCalendarFavorites").setOperationName("UpdateUserCalendarFavorites");var entry={"$name":"UpdateUserCalendarFavorites","request":{"UserCalendarFavoriteId":this.favariteUserCalendarId,"userId":this.currentUserId,"favUserIds":_3042.join()}};_3045.execute(entry,{success:_3043(scope),failure:function(){_3043(scope);},scope:scope||this});},uninitialize:function(){if(!this.contentNode){return;}array.forEach(this.mainHandles,function(_3046){_3046.remove();});this._destroyContent();this.checkBoxes=null;this.allItems=null;this.buttonCancel.destroy(false);this.buttonOK.destroy(false);this.buttonFind.destroy(false);this.textFind.destroy(false);this.dialogNode.destroy(false);this.inherited(arguments);},requestData:function(_3047){if(!this.loading){this._destroyContent();this.checkBoxes=[];}this.loading=true;var _3048="";if(_3047){_3048=this._where(_3047);}else{_3048=this._where();}this.store.fetch({onError:lang.hitch(this,this._onFetchError),onComplete:lang.hitch(this,this._onFetchComplete),query:{conditions:_3048},count:this.count,scope:this});},_onFindMouseDown:function(event){if(event.keyCode===13){this._onFindClick();}},_onFindClick:function(){if(!this.loading){var _3049=this.textFind.get("value");if(_3049){this.requestData(_3049);}else{this.requestData();}}},_destroyContent:function(){if(!this.contentNode){return;}array.forEach(_3035.findWidgets(this.contentNode),function(_304a){_304a.destroy(false);});array.forEach(this.handles,function(_304b){_304b.remove();});this.handles=[];this.checkBoxes=[];this.contentNode.innerHTML="";},_onFetchError:function(){},_onCheckClick:function(e){var self=this.self,_304c=this.checkBox,name=_304c&&_304c.get("id"),index;if(_304c.checked){index=array.indexOf(self.allItems,name);if(index==-1){if(self.selectedCount<self.maxSelectCount){self.selectedCount++;self.allItems.push(name);}else{Sage.UI.Dialogs.showError(self.maxUsersErrorMessage);_304c.set("checked",false);}}}else{index=array.indexOf(self.allItems,name);self.allItems.splice(index,1);self.selectedCount--;}},_onFetchComplete:function(items){var entry,_304d,id,_304e=null,_304f=[],i,len=items.length,name,_3050,_3051,_3052;this.selectedCount=0;for(i=0;i<len;i++){entry=items[i];_3051="";_3052="";name=entry.Name||"";id=entry.ResourceId;if(id==this.currentUserId){_3051="disabled = 'true'";}_304f.push(this.checkBoxTemplate.apply({id:id,name:name,itemName:name,disabled:_3051,disabledStyle:_3052}));}this.contentNode.innerHTML="";_304e=_3034.toDom(_304f.join(""));_3034.place(_304e,this.contentNode,"last");this._finishedLoading();},_finishedLoading:function(){this._parseCheckBoxes();this.setupCheckState();this.loading=false;},_parseCheckBoxes:function(){if(!this.contentNode){return;}var _3053;_3037.parse(this.contentNode);_3053=_3035.findWidgets(this.contentNode);array.forEach(_3053,function(_3054){_3054.on("click",lang.hitch({checkBox:_3054,self:this},this._onCheckClick));this.checkBoxes.push(_3054);},this);},setupCheckState:function(){var _3055=this.currentUserId;if(!_303a.isItemInArray(this.favoriteUserIds,_3055)){this.favoriteUserIds.push(_3055);}array.forEach(this.checkBoxes,function(_3056){var _3057,_3058,label=_3056.get("id");_3057=array.indexOf(this.favoriteUserIds,label);if(_303a.isItemInArray(this.favoriteUserIds,label)){_3056.set("checked",true);this.selectedCount++;this.allItems.push(label);}else{_3056.set("checked",false);}},this);}});});},"Sage/Utility/main":function(){define(["Sage/Utility/Activity","Sage/Utility/Dashboard","Sage/Utility/Groups","Sage/Utility/_LocalStorageMixin","Sage/Utility/SDataLookup","Sage/Utility/Sql","Sage/Utility/Email","Sage/Utility/ErrorHandler","Sage/Utility/File","Sage/Utility/File/DragDropWatcher","Sage/Utility/File/DefaultDropHandler","Sage/Utility/UserOptions","Sage/Utility/Validate","Sage/Utility/PickList","Sage/Utility/Jobs","Sage/Utility/Workspace"],function(){});},"Sage/Utility/Dashboard":function(){define(["dojo/i18n","dojox/grid/DataGrid","Sage/Groups/GroupManager","Sage/UI/Dialogs","dojo/data/ItemFileReadStore","Sage/UI/Controls/_DialogHelpIconMixin","dojo/i18n!./nls/Dashboard","dojo/i18n!../UI/Dashboard/nls/WidgetDefinition","dojo/i18n!dijit/nls/common"],function(i18n,_3059,_305a,_305b,_305c,_305d,_305e,_305f,_3060){Sage.namespace("Utility.Dashboard");dojo.mixin(Sage.Utility.Dashboard,{promoteGroupToDashboard:function(){var _3061="<Widget name=\"Group List\" family=\"System\"><options><name>Group List</name><title>{0}</title><entity>{1}</entity><resource>{7}</resource><groupname>{2}</groupname><limit>{3}</limit><visiblerows>{6}</visiblerows><datasource>slxdata.ashx/slx/crm/-/analytics?entity=Sage.Entity.Interfaces.I{4}&amp;groupname={5}</datasource></options></Widget>";var _3062=new Simplate(["<div>","<div\">{%= $.headerText %}</div>","<div id=\"{%= $.id %}-grid\" style=\"width:auto;height:150px;\"></div>","<div align=\"right\"><button data-dojo-type=\"dijit.form.Button\" type=\"submit\" class=\"okButton\" ","style=\"margin-top:5px;\" data-dojo-props=\"onClick:function(){dijit.byId('promoteDialog').promote();}\"",">{%= $.okText %}</button>","<button data-dojo-type=\"dijit.form.Button\" type=\"button\" class=\"cancelButton\" ","style=\"margin-top:5px; margin-left:10px;\" data-dojo-props=\"onClick:function(){dijit.byId('promoteDialog').hide();}\"",">{%= $.cancelText %}</button></div>","</div> "]);var _3063=null;if(dijit.byId("promoteDialog")){_3063=dijit.byId("promoteDialog");}else{_3063=new dijit.Dialog({id:"promoteDialog",title:window.MasterPageLinks.PromoteTitle,promote:function(a,b,c){var cgi=_305a.GetCurrentGroupInfo();var _3064=dijit.byId("promoteDialog-grid");var items=_3064.selection.getSelected();if(items.length===0){_305b.showInfo(window.MasterPageLinks.PromotePageNoneSelected,window.MasterPageLinks.PromoteTitle);return;}else{var _3065=[],_3066=items[0].Name,_3067=dijit.byId(cgi.Id);if(_305f.My_Dashboard==items[0].Name){_3066="My Dashboard";}else{if(_305f.Sales==items[0].Name){_3066="Sales";}}var _3068=String.format(_3061,_3067?_3067.title:cgi.Name,"Sage.Entity.Interfaces.I"+cgi.Entity,cgi.Name,10,$("<div/>").text(cgi.Entity).html(),$("<div/>").text(cgi.Name).html(),10,cgi.Entity);dojo.xhrPost({url:String.format("slxdata.ashx/slx/crm/-/dashboard/page?action=addwidget&name={0}&family={1}",encodeURIComponent(_3066),encodeURIComponent(items[0].Family)),headers:{"Content-Type":"application/json"},postData:_3068,error:function(_3069,_306a,error){_305b.showInfo(window.MasterPageLinks.Warning,_3069.responseText);},load:function(data,_306b){_305b.showInfo(String.format(window.MasterPageLinks.PromotionNotification,items[0].Name,_3067?_3067.title:cgi.Name));if(typeof window.callback==="function"){window.callback(data,_306b);}}});}this.destroyRecursive();}});dojo.mixin(_3063,new _305d());_3063.createHelpIconByTopic("PromoteGroup");}var grid=null;grid=new _3059({id:"promoteDialog-grid",structure:[{field:"Name",name:_305e.pageText,width:"200px"}],selectionMode:"single",height:"100px"},document.createElement("div"));var _306c=function(){dojo.disconnect(_306d);setTimeout((function(_306e){return function(){_306e.destroyDescendants();_306e.destroy(false);};})(_3063),1);};var _306d=dojo.connect(_3063,"hide",this,_306c);dojo.xhrGet({url:"slxdata.ashx/slx/crm/-/dashboard/page",cache:false,preventCache:true,handleAs:"json",load:function(data,xhr){var _306f={items:data};var _3070=new _305c({data:_306f});_3063.set("content",_3062.apply({id:_3063.id,okText:_3060.buttonOk,cancelText:_3060.buttonCancel,headerText:window.MasterPageLinks.PromoteDescription}));_3063.show();dojo.place(grid.domNode,"promoteDialog-grid","replace");grid.setStore(_3070);},error:function(e){alert(window.MasterPageLinks.Warning+e.responseText);if(console.log){}}});}});return Sage.Utility.Dashboard;});},"Sage/Utility/SDataLookup":function(){define([],function(){Sage.namespace("Utility.SDataLookup");dojo.mixin(Sage.Utility.SDataLookup,{setFormatType:function(opts){switch(opts.propertyFormat){case "Phone":return Sage.UI.Columns.Phone;case "DateTime":return Sage.UI.Columns.DateTime;default:return "";}},childObjectFormatter:function(opts){var _3071=opts.grid.grid._by_idx[opts.rowIdx].item,res,i;if(!_3071||!_3071[opts.childentity]||_3071[opts.childentity].$resources.length===0){return dojo.string.substitute("<div style=\"text-indent:16px\">${0}</div>",[opts.value||"&nbsp;"]);}opts.value=opts.value||"&nbsp;";res=[];if(opts.includeButton){res.push(dojo.string.substitute(["<input type=button id=\"SOPshow${1}\" style=\"height:16px;width:14px;border:0;background:transparent;vertical-align:top\" onclick=\"dojo.query('.SOProw${1}').style({display:''});dojo.query('#SOPshow${1}').style({display:'none'});dojo.query('#SOPhide${1}').style({display:''})\" value=\"+\">","<input type=button id=\"SOPhide${1}\" style=\"display:none;height:16px;width:14px;border:0;background:transparent;vertical-align:top\" onclick=\"dojo.query('.SOProw${1}').style({display:'none'});dojo.query('#SOPshow${1}').style({display:''});dojo.query('#SOPhide${1}').style({display:'none'})\" value=\"-\"> "].join(""),[opts.value,opts.rowIdx]));}res.push(dojo.string.substitute("${0}<div class=SOProw${1} style=\"display:none\">",[opts.value,opts.rowIdx]));for(i=0;i<_3071[opts.childentity].$resources.length;i++){res.push(dojo.string.substitute("<div style=\"text-indent:2em\">${0}</div>",[_3071[opts.childentity].$resources[i][opts.fieldName]||"&nbsp;"]));}res.push("</div>");return res.join("");}});});},"Sage/Utility/Sql":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/i18n!./nls/Sql"],function(array,_3072,lang,nls){var _3073=_3072("Sage.Utility.Sql",null,{_allQuotesReg:null,_badQuotesReg:null,_closingQuotesReg:null,_normalQuotesReg:null,_openingQuotesReg:null,_selectInClauseReg:null,_closingQuotes:["'","´","’","’"],_openingQuotes:["'","`","‘","‘"],resources:nls,quoteType:{apostrophe:0,accent:1,curly:2,unicode:3},constructor:function(){this.inherited(arguments);this._allQuotesReg=new RegExp("['`´‘’‘’]");this._badQuotesReg=new RegExp("[`´‘’‘’]");this._closingQuotesReg=new RegExp("['´’’]");this._normalQuotesReg=new RegExp("'");this._openingQuotesReg=new RegExp("['`‘‘]");},fixQuoted:function(value){var temp=value;if(value&&lang.isString(value)&&value.length>0){if(this._badQuotesReg.test(temp)){temp=this.removeBadOuterQuotes(temp);}if(this._normalQuotesReg.test(temp)){var ch=temp.charAt(0);if(this._normalQuotesReg.test(ch)){temp=temp.substr(1,temp.length-1);}if(temp===""){return "";}ch=temp.charAt(temp.length-1);if(this._normalQuotesReg.test(ch)){temp=temp.substr(0,temp.length-1);}}}else{return "''";}return "'"+temp+"'";},fixQuotes:function(_3074){if(_3074&&lang.isArray(_3074)){array.forEach(_3074,function(value,idx){_3074[idx]=this.fixQuoted(value);},this);return _3074.join(",");}return false;},fixInClause:function(_3075){var empty="('')";if(_3075&&typeof _3075!=="undefined"&&lang.isString(_3075)===false){if(lang.isArray(_3075)){_3075="'"+_3075.toString().replace(/,/g,"','")+"'";}else{_3075="'"+_3075.toString()+"'";}}var temp;if(_3075&&lang.isString(_3075)&&lang.trim(_3075).length>0){if(this.hasValidApostropheQuoteCount(_3075)===false){throw new Error(this.resources.InvalidApostropheCount);}temp=_3075.replace(/\r\n/g," ").replace(/\n/g," ").replace(/\r/g," ").trim();if(temp===""){return empty;}if(this._badQuotesReg.test(temp)){if(temp.charAt(0)==="("&&temp.charAt(temp.length-1)===")"){temp=temp.substr(1,temp.length-1);temp=temp.substr(0,temp.length-1);}if(temp===""){return empty;}var _3076=temp.toUpperCase().indexOf("SELECT")===0;if(_3076){var _3077=false;var _3078=-1;var _3079=[];for(var i=0;i<temp.length;i++){var ch=temp.charAt(i);if(_3077===false){if(this._openingQuotesReg.test(ch)){_3077=true;switch(ch){case "'":_3078=this.quoteType.apostrophe;break;case "`":_3078=this.quoteType.accent;_3079.push(i);break;case "‘":_3078=this.quoteType.curly;_3079.push(i);break;case "‘":_3078=this.quoteType.unicode;_3079.push(i);break;}}}else{if(this._closingQuotesReg.test(ch)){var _307a=this.translateQuoteType(ch);if(_307a==-1){continue;}if(_3078==_307a){_3077=false;switch(_3078){case this.quoteType.accent:case this.quoteType.curly:case this.quoteType.unicode:_3079.push(i);break;}_3078=-1;}}}}if(_3079&&lang.isArray(_3079)&&_3079.length>0){array.forEach(_3079,function(_307b){temp=temp.substr(0,_307b)+"'"+temp.substr(_307b+1);});}if(typeof console!=="undefined"){}if(this.hasValidApostropheQuoteCount(temp)===false){throw new Error(this.resources.InvalidApostropheCount);}return "("+temp+")";}else{var _307c=temp.split(",");array.forEach(_307c,function(value,idx){_307c[idx]=value.trim();});var fixed=this.fixQuotes(_307c);if(fixed){if(typeof console!=="undefined"){}if(this.hasValidApostropheQuoteCount(fixed)===false){throw new Error(this.resources.InvalidApostropheCount);}return "("+fixed+")";}if(typeof console!=="undefined"){}return empty;}}else{if(temp.charAt(0)!="("){if(typeof console!=="undefined"){}return "("+temp+")";}if(typeof console!=="undefined"){}return temp;}}else{if(_3075&&lang.isString(_3075)){temp=_3075.replace(/\r\n/g,"").replace(/\n/g,"").replace(/\r/g,"");if(temp.length>0){if(typeof console!=="undefined"){}return "('"+temp+"')";}if(typeof console!=="undefined"){}return empty;}}if(typeof console!=="undefined"){}return _3075;},hasBadOuterQuotes:function(value){if(value&&lang.isString(value)&&value.length>0){if(this._badQuotesReg.test(value)){var ch=value.charAt(0);if(this._badQuotesReg.test(ch)){return true;}ch=value.charAt(value.length-1);if(this._badQuotesReg.test(ch)){return true;}}}return false;},hasValidApostropheQuoteCount:function(value){if(value&&lang.isString(value)&&value.length>0){if(this._normalQuotesReg.test(value)){var _307d=value.match(/'/g);if(_307d&&lang.isArray(_307d)&&_307d.length>0){return (_307d.length%2)===0;}}}return true;},removeBadOuterQuotes:function(value){if(this.hasBadOuterQuotes(value)){var temp=value;var ch=temp.charAt(0);if(this._badQuotesReg.test(ch)){temp=temp.substr(1,temp.length-1);}if(temp===""){return "";}ch=temp.charAt(temp.length-1);if(this._badQuotesReg.test(ch)){temp=temp.substr(0,temp.length-1);}return temp;}return value;},replaceQuotesAroundValues:function(value){if(value&&lang.isString(value)&&value.length>0){var temp=value;array.forEach([/`(.*?)´/g,/‘(.*?)’/g,/\u2018(.*?)\u2019/g],function(reg){var _307e=temp.match(reg);array.forEach(_307e,function(match){if(match.length==2){temp=temp.replace(match,"''");}else{var _307f=match.substr(1,match.length-1);_307f=_307f.substr(0,_307f.length-1);temp=temp.replace(match,"'"+_307f+"'");}});return temp;});}return value;},translateQuoteType:function(ch){if(ch&&lang.isString(ch)&&ch.length==1&&this._allQuotesReg.test(ch)){switch(ch){case "'":return this.quoteType.apostrophe;case "`":case "´":return this.quoteType.accent;case "‘":case "’":return this.quoteType.curly;case "‘":case "’":return this.quoteType.unicode;}}return -1;}});return _3073;});},"Sage/Utility/Validate":function(){define([],function(){Sage.namespace("Utility.Validate");dojo.mixin(Sage.Utility.Validate,{findNestedWidgets:function(_3080){return dojo.query("[widgetid]",_3080).map(dijit.byNode).filter(function(wid){return wid;});},shouldSubmit:function(){if(!this._isValid){this._isValid=true;return false;}return true;},_isValid:true,_getWorkspaceNode:function(_3081){var node;switch(_3081){case "Sage.Platform.WebPortal.Workspaces.DialogWorkspace":node="DialogWorkspace_window";break;default:node="mainform";}return node;},onWorkSpaceSave:function(_3082){var node=this._getWorkspaceNode(_3082);this._isValid=this.runValidation(node);},runValidation:function(node){var _3083=this.findNestedWidgets(dojo.byId(node)),_3084=false;dojo.forEach(_3083,function(_3085){if(_3085.validate){_3085._hasBeenBlurred=true;var valid=_3085.disabled||!_3085.validate||_3085.validate();if(!valid&&!_3084){dojo.window.scrollIntoView(_3085.containerNode||_3085.domNode);_3085.focus();_3084=true;}}},this);if(_3084){return false;}return true;}});});},"Sage/Utility/PickList":function(){define(["dojo/_base/lang","dojo/_base/declare","Sage/Data/SDataServiceRegistry","dojo/json","./_LocalStorageMixin","../Utility"],function(lang,_3086,_3087,json,_3088,util){var _3089=_3086("Sage.Utility.PickList",[_3088],{_storageNameSpace:"PickListData",checkStaleCache:function(){var _308a=this.getFromLocalStorage("modified_at",this._storageNameSpace);var _308b=sessionStorage.getItem("PickListChangeStateCheck");if(_308a&&_308b===null){_308a=new Date(Date.parse(_308a));var _308c,_308d,entry,data;data=sessionStorage.getItem("pickListExpireCheck");if(data===null){_308c=_3087.getSDataService("system");_308d=new Sage.SData.Client.SDataServiceOperationRequest(_308c);_308d.setOperationName("getPickListsChangeState");_308d.execute({},{success:lang.hitch(this,function(data){if(!data||!data.response||!data.response.lastModifiedDate){return;}var _308e=util.Convert.toDateFromString(data.response.lastModifiedDate);if(this._isLocalStorageExpired(_308a,_308e)){this.clear(this._storageNameSpace);}})});sessionStorage.setItem("PickListChangeStateCheck","true");}}},_isLocalStorageExpired:function(_308f,_3090){_308f.setSeconds(0);_3090.setSeconds(0);_308f.setMilliseconds(0);_3090.setMilliseconds(0);return _3090.valueOf()>=_308f.valueOf();},});Sage.namespace("Utility.PickList");lang.mixin(Sage.Utility.PickList,new _3089());return Sage.Utility.PickList;});},"Sage/Workspaces/main":function(){define(["Sage/Workspaces/Dialog"],function(){});},"Sage/Workspaces/Dialog":function(){define(["dojo/dom","dojo/dom-style","dojo/dom-construct","dijit/Dialog","dojo/NodeList-manipulate","dojo/_base/declare","Sage/UI/Controls/_DialogHelpIconMixin","dojo/query"],function(dom,_3091,_3092,_3093,_3094,_3095,_3096,query){return _3095("Sage.Workspaces.Dialog",[_3093,_3096],{constructor:function(_3097,_3098){this._initialized=false;this._clientId=_3097.clientId;this._stateClientId=_3097.stateClientId;this._panelClientId=_3097.panelClientId;this._contentClientId=_3097.contentClientId;this._context=null;this._dialog=null;this._dialogPanel=null;this._closedOnServerSide=false;this._dialogInfo={};this.closable=true;this._width=200;this._height=500;this._toolbarId=this._clientId+"_"+this._clientId+"_toolbar";if(this._clientId){this.statics.__instances[this._clientId]=this;this.statics.__initRequestManagerEvents();}this.inherited(arguments);},init:function(){this._context=dom.byId(this._clientId);dom.byId(this._contentClientId).style.display="";this.handleEvents();},clearState:function(){var _3099=dom.byId(this._stateClientId);_3099.value="";},disable:function(){if(!this.open){return;}this.hide();},enable:function(){if(this.open){return;}this.show();},show_:function(evt){var title,width,_309a;if(typeof evt==="string"){evt={id:evt};}evt.event="open";evt.from=evt.from||"client";title=evt.title||"";this.set("title",title);var help=evt.help;if(help){this.createHelpIcon(help.url,help.target);}width=evt.width||500;_3091.set(this.domNode,"width",width+"px");_309a=evt.height||200;query(".dijitDialogPaneContent").style({"overflow":"auto"});var value=Sys.Serialization.JavaScriptSerializer.serialize(evt);var _309b=dom.byId(this._stateClientId);_309b.value=value;var _309c=dojo.byId(this._toolbarId);if(_309c){if(this.helpIcon){dojo.place(_309c,this.helpIcon,"before");}}},setSize:function(width,_309d){this._width=width||this._width||500;_3091.set(this.domNode,"width",this._width+"px");this._height=_309d||this._height||200;_3091.set(this.domNode,"height",this._height+"px");},fitToViewport:function(){},handleEvents:function(){var _309e=dom.byId(this._stateClientId);var value=_309e.value;var evt={};if(value){evt=eval("("+value+")");}_309e.value="";switch(evt.event){case "open":this._dialogInfo=evt;this.title=this._dialogInfo.title;this.show_(evt);this.enable();break;case "close":if(this.open){this._closedOnServerSide=false;this.hide_();this.disable();this._dialogInfo={};this._closedOnServerSide=true;}break;}},hide:function(evt){if(this._toolbarId){_3092.destroy(this._toolbarId);}if(evt&&((evt.originalTarget&&evt.originalTarget.className.indexOf("dijitDialogCloseIcon")>-1)||(evt.srcElement&&evt.srcElement.className.indexOf("dijitDialogCloseIcon")>-1))){var _309f=Sage.Services.getService("ClientBindingManagerService");if(_309f){_309f.rollbackCurrentTransaction();}dom.byId(this._stateClientId).value="{\"event\":\"close\",\"id\":\""+this._dialogInfo.id+"\"}";__doPostBack(this._stateClientId,"");}this.inherited(arguments);},hide_:function(evt){if(this._closedOnServerSide){return;}evt={event:"close",id:this._dialogInfo.id};var _30a0=Sage.Services.getService("ClientBindingManagerService");if(_30a0){_30a0.rollbackCurrentTransaction();}var value=Sys.Serialization.JavaScriptSerializer.serialize(evt);dom.byId(this._stateClientId).value=value;__doPostBack(this._stateClientId,"");},statics:{__instances:{},__requestManagerEventsInitialized:false,__initRequestManagerEvents:function(){var self=this;if(self.__requestManagerEventsInitialized){return;}var _30a1=function(a,b){if(!a||!b){return false;}else{return a.contains?(a!=b&&a.contains(b)):(!!(a.compareDocumentPosition(b)&16));}};var prm=Sys.WebForms.PageRequestManager.getInstance();prm.add_pageLoaded(function(_30a2,args){var _30a3=args.get_panelsUpdated();if(_30a3){for(var id in self.__instances){for(var i=0;i<_30a3.length;i++){var _30a4=self.__instances[id];if(_30a1(_30a3[i],document.getElementById(_30a4._stateClientId))){_30a4.handleEvents();break;}}}}});prm.add_endRequest(function(_30a5,args){for(var id in self.__instances){var _30a6=self.__instances[id];_30a6.clearState();}});self.__requestManagerEventsInitialized=true;}}});});},"url:Sage/templates/ImageButton.html":"<span id=\"${id}\" class=\"dijit dijitReset dijitInline\" role=\"presentation\">\r\n<span class=\"dijitReset dijitInline dijitButtonNode imageButtonNode\" data-dojo-attach-event=\"ondijitclick:_onClick\" role=\"presentation\">\r\n        <span class=\"dijitReset dijitStretch dijitButtonContents\"\r\n\t\t\tdata-dojo-attach-point=\"titleNode,focusNode\"\r\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\r\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\">\r\n                <img alt=\"\" src=\"\" data-dojo-attach-point=\"iconNode\"/>\r\n                <div class=\"dijitIcon dijitMenuItemIcon Global_Images icon16x16 ${imageClass}\" data-dojo-attach-point=\"iconNodeSprite\"></div>\r\n            </span\r\n\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span\r\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText circleLayout circleTheme\"\r\n\t\t\t\tid=\"${id}_label\"\r\n\t\t\t\tdata-dojo-attach-point=\"containerNode\"\r\n\t\t\t></span\r\n\t\t></span\r\n\t></span\r\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\r\n\t\ttabIndex=\"-1\" role=\"presentation\" data-dojo-attach-point=\"valueNode\"\r/></span>\r\r\n","url:Sage/UI/Controls/templates/DropDownSelectPickList.html":"<div>\r\n    <select id=\"${id}-Select\" data-dojo-type=\"Sage.UI.ComboBox\" shouldPublishMarkDirty=\"false\" dojoAttachPoint=\"comboBox\" value=\"${value}\" dojoAttachEvent=\"onBlur: _onBlur,onChange:_onChange\">\r\n    </select>\r\n</div>\r\n","url:Sage/UI/Controls/templates/DropDownSelectUser.html":"<div>\r\n    <select data-dojo-type=\"Sage.UI.ComboBox\" shouldPublishMarkDirty=\"false\" dojoAttachPoint=\"comboBox\" dojoAttachEvent=\"onBlur: _onBlur\">\r\n    </select>\r\n</div>\r\n","url:Sage/UI/Controls/templates/DateTimePicker.html":"<div class=\"dateTimePicker\">\r\n        <div dojoAttachPoint=\"tooltipContainer\">\r\n        \r\n            <div dojoAttachPoint=\"dateContainer\" class=\"dateTimePicker-dateContainer\">\r\n               \r\n                    <input id=\"${id}-Calendar\" data-dojo-type=\"Sage.UI.Calendar\"\r\n                        style=\"width:inherit;\"\r\n                        textAlign=\"${textAlign}\"\r\n                           type=\"text\" \r\n                           tabindex=\"0\"\r\n                           displayMode=\"popup\"\r\n                           dojoAttachPoint=\"dateNode\"\r\n                           dojoAttachEvent=\"onValueSelected:_onValueSelected,onBlur:_onCalendarBlur\">\r\n               \r\n            </div>\r\n            \r\n            <div dojoAttachPoint=\"timeZoneContainer\" class=\"dateTimePicker-timeZoneContainer\">\r\n               \r\n                    <label for=\"${id}-TimeStart\">${timeStartText}</label><br />\r\n                    <input id=\"${id}-TimeTextBox\" data-dojo-type=\"dijit.form.TimeTextBox\" \r\n                           style=\"width:16em;\"\r\n                           textAlign=\"${textAlign}\"\r\n                           tabindex=\"0\"\r\n                           type=\"text\" dojoAttachPoint=\"timeNode\">\r\n                    <br /><br/>\r\n                    <label for=\"${id}-TzCalculator\">${timeZoneCalculatorText}</label>\r\n                    <div id=\"timeZoneCalucaltor\" class=\"dateTimePicker-timeZoneCalculator\">\r\n                       <p style=\"width:auto;margin-top:auto\">\r\n                            <label for=\"${id}-TzSelectSource\">${timeZoneSourceText}</label><br />\r\n                            <select id=\"${id}-TzSelectSource\" data-dojo-type=\"dijit.form.ComboBox\"  dojoAttachPoint=\"timeZoneSourceComboNode\" style=\"width:15em;\">\r\n                            </select>\r\n                            <br />\r\n                            <label for=\"${id}-TzSelectDest\">${timeZoneDestText}</label><br />\r\n                           <select id=\"${id}-TzSelectDest\" data-dojo-type=\"dijit.form.ComboBox\"  dojoAttachPoint=\"timeZoneDestComboNode\" style=\"width:15em;\">\r\n                           </select>\r\n                           <br/>\r\n                            <span id=\"${id}-ConvertResults\" dojoAttachPoint=\"convertResultsNode\" style=\"float:left;padding-top:5px;\">\r\n                        </span>\r\n                        </p><br/>\r\n                        <button id=\"${id}-Convert\" data-dojo-type=\"dijit.form.Button\" dojoAttachPoint=\"timeZoneConvertButtonNode\" type=\"button\" style=\"float:right\" dojoAttachEvent=\"onClick:_convertClicked\">\r\n                            ${convertText}\r\n                        </button>\r\n                       \r\n                        \r\n                    </div>\r\n               \r\n                <div class=\"button-bar alignright\" style=\"clear: both\">\r\n                    <button id=\"${id}-OKButton\" tabindex=\"0\" data-dojo-type=\"dijit.form.Button\" dojoAttachPoint=\"OKButtonNode\" type=\"button\" dojoAttachEvent=\"onClick:_okClicked\">\r\n                        ${okText}\r\n                    </button>\r\n                    <button id=\"${id}-CancelButton\" tabindex=\"0\" data-dojo-type=\"dijit.form.Button\" dojoAttachPoint=\"CancelButtonNode\" type=\"button\" dojoAttachEvent=\"onClick:_cancelClicked\">\r\n                        ${cancelText}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n    \r\n</div>\r\n\r\n","url:Sage/Utility/File/templates/FallbackFilePicker_Attachment.html":"[\r\n'<div>',\r\n    '<div dojoType=\"dijit.Dialog\" id=\"uploadFileDialog\" title=\"{%= $.attachFileText %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onHide:_onHide\">',\r\n        '<iframe src=\"about:blank\" style=\"width:0px;height:0px;border-width:0px;\" name=\"{%= $._iframeId %}\" id=\"{%= $._iframeId %}\" dojoAttachPoint=\"_iframe\" dojoAttachEvent=\"onload:_iframeLoad\"></iframe>',\r\n        '<form method=\"post\" enctype=\"multipart/form-data\" action=\"{%= $._buildPostUrl() %}\" target=\"{%= $._iframeId %}\" dojoAttachPoint=\"_postForm\" class=\"attachment-properties-form\">',\r\n            '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"160\">',\r\n                '<div data-dojo-type=\"dijit.layout.ContentPane\" label=\"{%= $.uploadFileText %}\" >',\r\n                    '<input name=\"file\" multiple=\"false\" type=\"file\" dojoAttachEvent=\"onchange:_onNewFile\" dojoAttachPoint=\"btn_FileSelect\" class=\"uploadButton\" />',\r\n                '</div>',\r\n                 '<div dojoType=\"dijit.form.TextBox\" label=\"{%= $.descriptionText %}\" name=\"description\" id=\"{%= $.id %}_tb_Description\" dojoAttachPoint=\"tb_Description\" maxlength=\"128\" ></div>',\r\n                 '<input type=\"hidden\" dojoType=\"dijit.form.TextBox\" name=\"fileName\" id=\"{%= $.id %}_tb_realFileName\" dojoAttachPoint=\"tb_realFileName\" maxlength=\"255\" />',\r\n            '</div>',\r\n            '<div class=\"general-dialog-actions\" align=\"right\">',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id %}_btn_OK\" name=\"btn_OK\" dojoAttachPoint=\"btn_OK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.okText %}</div>',\r\n                '<span>&nbsp;&nbsp</span>',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $.cancelText %}</div>',\r\n            '</div>',\r\n            '<input type=\"hidden\" name=\"dataType\" value=\"R\" />',\r\n            '<input type=\"hidden\" name=\"attachDate\" dojoAttachPoint=\"_attachDate\"/>',\r\n            '<input type=\"hidden\" name=\"accountId\" dojoAttachPoint=\"_accountId\"/>',\r\n            '<input type=\"hidden\" name=\"activityId\" dojoAttachPoint=\"_activityId\" />',\r\n            '<input type=\"hidden\" name=\"contactId\" dojoAttachPoint=\"_contactId\" />',\r\n            '<input type=\"hidden\" name=\"contractId\" dojoAttachPoint=\"_contractId\" />',\r\n            '<input type=\"hidden\" name=\"defectId\" dojoAttachPoint=\"_defectId\" />',\r\n            '<input type=\"hidden\" name=\"historyId\" dojoAttachPoint=\"_historyId\" />',\r\n            '<input type=\"hidden\" name=\"leadId\" dojoAttachPoint=\"_leadId\" />',\r\n            '<input type=\"hidden\" name=\"opportunityId\" dojoAttachPoint=\"_opportunityId\" />',\r\n            '<input type=\"hidden\" name=\"productId\" dojoAttachPoint=\"_productId\" />',\r\n            '<input type=\"hidden\" name=\"returnId\" dojoAttachPoint=\"_returnId\" />',\r\n            '<input type=\"hidden\" name=\"salesOrderId\" dojoAttachPoint=\"_salesOrderId\" />',\r\n            '<input type=\"hidden\" name=\"ticketId\" dojoAttachPoint=\"_ticketId\" />',\r\n            '<input type=\"hidden\" name=\"userId\" dojoAttachPoint=\"_userId\" />',\r\n        '</form>',\r\n    '</div>',\r\n'</div>'\r\n]","url:Sage/Utility/File/templates/FallbackFilePicker_LibraryDoc.html":"[\r\n'<div>',\r\n    '<div dojoType=\"dijit.Dialog\" id=\"uploadFileDialog\" title=\"{%= $.addLibraryFileText %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onHide:_onHide\">',\r\n        '<iframe src=\"about:blank\" style=\"width:0px;height:0px;border-width:0px;\" name=\"{%= $._iframeId %}\" id=\"{%= $._iframeId %}\" dojoAttachPoint=\"_iframe\" dojoAttachEvent=\"onload:_iframeLoad\"></iframe>',\r\n        '<form method=\"post\" enctype=\"multipart/form-data\" action=\"\" target=\"{%= $._iframeId %}\" dojoAttachPoint=\"_postForm\" class=\"attachment-properties-form\">',\r\n            '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"160\">',\r\n                 '<div data-dojo-type=\"dijit.layout.ContentPane\" label=\"{%= $.uploadFileText %}\" >',\r\n                    '<input name=\"file\" multiple=\"false\" type=\"file\" dojoAttachEvent=\"onchange:_onNewFile\" dojoAttachPoint=\"btn_FileSelect\" class=\"uploadButton\" />',\r\n                 '</div>',\r\n                 '<div dojoType=\"dijit.form.TextBox\" label=\"{%= $.descriptionText %}\" name=\"description\" id=\"{%= $.id %}_tb_Description\" dojoAttachPoint=\"tb_Description\" maxlength=\"255\" ></div>',\r\n                 '<input type=\"hidden\" dojoType=\"dijit.form.TextBox\" name=\"fileName\" id=\"{%= $.id %}_tb_realFileName\" dojoAttachPoint=\"tb_realFileName\" maxlength=\"255\" />',\r\n            '</div>',\r\n            '<div class=\"general-dialog-actions\" align=\"right\">',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id %}_btn_OK\" name=\"btn_OK\" dojoAttachPoint=\"btn_OK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.okText %}</div>',\r\n                '<span>&nbsp;&nbsp</span>',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $.cancelText %}</div>',\r\n            '</div>',\r\n        '</form>',\r\n    '</div>',\r\n'</div>'\r\n]","url:Sage/UI/Controls/templates/Lookup.html":"<div class=\"textcontrol lookup\">\r\n    <span id=\"${id}\" class=\"lookup\">\r\n        <input id=\"${id}_LookupText\" class=\"text-with-icons\" required=\"${required}\" type=\"text\" dojoAttachPoint=\"textbox,focusNode\" />\r\n        <a href=\"#\">\r\n            <img id=\"${id}_LookupBtn\" src=\"images/icons/Find_16x16.png\" dojoAttachPoint=\"lookupButton\" alt=\"${buttonToolTip}\" title=\"${buttonToolTip}\" />\r\n        </a>\r\n        \r\n        <img id=\"${id}_btnClearResult\" src=\"images/icons/Delete_16x16.png\" dojoAttachPoint=\"clearButton\" class=\"display-none\" alt=\"${closeButtonToolTip}\" title=\"${closeButtonToolTip}\"/>\r\n    </span>\r\n</div>","url:Sage/MainView/ActivityMgr/templates/ActivityEditor.html":"[\r\n'<div>',\r\n    '<div dojoType=\"dijit.Dialog\" id=\"activityDialog\" title=\"\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onHide:_onDlgHide\">',\r\n        '<div class=\"activity-dialog\">',  //body\r\n            '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"regardingContainer\">',\r\n                '<select id=\"pk_Regarding\" label=\"{%= $.regardingText %}\" id=\"{%= $.id %}_pk_Regarding\" shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.SingleSelectPickList\" dojoAttachPoint=\"pk_Regarding\" canEditText=\"true\" itemMustExist=\"false\" maxLength=\"255\" ></select>',\r\n                '<div dojoType=\"dijit.form.TextBox\" label=\"{%= $.locationText %}\" id=\"{%= $.id %}_tb_Location\" dojoAttachPoint=\"tb_Location\" maxLength=\"255\" ></div>',\r\n            '</div>', //first tablecontainer 1 col\r\n        //Dates section for add/edit mode..................\r\n            '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"dateSection_AddEdit\">',\r\n                '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DateTimePicker\" id=\"{%= $.id %}_dtp_startDate\" dojoAttachPoint=\"dtp_startDate\" displayDate=\"true\" displayTime=\"true\" label=\"{%= $.startTimeText %}\"></div>',\r\n                '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DurationSelect\" label=\"{%= $.durationText %}\" id=\"{%= $.id %}_sel_Duration\" dojoAttachPoint=\"sel_Duration\" includeDisablingCheckbox=\"false\" valuesAreAfterStart=\"true\"></div>',\r\n                '<div dojoType=\"dijit.layout.ContentPane\" label=\"\" class=\"remove-padding\">',\r\n                    '<div dojoType=\"dijit.form.CheckBox\" label=\"{%= $.timeLessText %}\" id=\"{%= $.id %}_cb_Timeless\" dojoAttachPoint=\"cb_Timeless\" ></div>',\r\n                    '<label class=\"checkbox-label\" for=\"{%= $.id %}_cb_Timeless\">{%= $.timeLessText %}</label>',\r\n                '</div>',\r\n                '<div dojoType=\"dojox.layout.TableContainer\" label=\"{%= $.alarmText %}\" cols=\"2\" showLabels=\"false\" class=\"removeExtraSpace\">',\r\n                    '<div dojoType=\"dijit.form.CheckBox\" id=\"{%= $.id %}_cb_Alarm\" dojoAttachPoint=\"cb_Alarm\" ></div>',\r\n                    '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DurationSelect\" id=\"{%= $.id %}_sel_AlarmDur\" dojoAttachPoint=\"sel_AlarmDur\" valuesAreAfterStart=\"false\" ></div>',\r\n                '</div>',\r\n                '<div dojoType=\"dijit.layout.ContentPane\" label=\"\" class=\"remove-padding\">',\r\n                    '<div dojoType=\"dijit.form.CheckBox\" label=\"\" id=\"{%= $.id %}_cb_AutoRollover\" dojoAttachPoint=\"cb_AutoRollover\"></div>',\r\n                    '<label class=\"checkbox-label\" for=\"{%= $.id %}_cb_AutoRollover\">{%= $.rolloverText %}</label>',\r\n                '</div>',\r\n            '</div>',\r\n        //Dates section for complete mode...................\r\n            '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"dateSection_Complete\">',\r\n                '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DateTimePicker\" id=\"{%= $.id %}_dtp_completedDate\" dojoAttachPoint=\"dtp_completedDate\" displayDate=\"true\" displayTime=\"true\" label=\"{%= $.completedText %}\"></div>',\r\n                '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DateTimePicker\" id=\"{%= $.id %}_dtp_scheduledDate\" dojoAttachPoint=\"dtp_scheduledDate\" displayDate=\"true\" displayTime=\"true\" label=\"{%= $.scheduledText %}\"></div>',\r\n                '<div dojoType=\"dijit.layout.ContentPane\" label=\"\" class=\"remove-padding\">',\r\n                    '<div dojoType=\"dijit.form.CheckBox\" label=\"{%= $.timeLessText %}\" id=\"{%= $.id %}_cb_TimelessComplete\" dojoAttachPoint=\"cb_TimelessComplete\" ></div>',\r\n                    '<label class=\"checkbox-label\" for=\"{%= $.id %}_cb_TimelessComplete\">{%= $.timeLessText %}</label>',\r\n                '</div>',\r\n                '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DurationSelect\" label=\"{%= $.durationText %}\" id=\"{%= $.id %}_sel_DurationComplete\" dojoAttachPoint=\"sel_DurationComplete\" includeDisablingCheckbox=\"false\" valuesAreAfterStart=\"true\"></div>',\r\n            '</div>',\r\n\r\n            '<div dojoType=\"dijit.layout.TabContainer\" id=\"{%= $.id %}_tc_EditActivity\"  dojoAttachPoint=\"tc_EditActivity\" class=\"tab-container\">',\r\n/*  General Tab   */\r\n                '<div dojoType=\"dijit.layout.ContentPane\" id=\"{%= $.id %}_cp_General\" title=\"{%= $.tabNameGeneralText %}\" class=\"tabContent remove-padding\" dojoAttachPoint=\"cp_General\">',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"resultContainer\" class=\"bottom-border-section\">', \r\n                        '<select shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.SingleSelectPickList\" label=\"{%= $.resultText %}\" id=\"{%= $.id %}_pl_Result\"  name=\"pl_Result\" dojoAttachPoint=\"pl_Result\" canEditText=\"true\" itemMustExist=\"false\" maxLength=\"64\"></select>',\r\n                    '</div>',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"4\" labelWidth=\"4\" baseClass=\"contact-lead-radios\" >',\r\n                        '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"contactOrLead\" label=\"{%= $.contactText %}\" value=\"contact\" id=\"{%= $.id %}_rdo_Contact\" dojoAttachPoint=\"rdo_Contact\" dojoAttachEvent=\"onChange:_setContactLeadVisibility\" checked=\"true\" />',\r\n                        '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"contactOrLead\" label=\"{%= $.leadText %}\" value=\"lead\" id=\"{%= $.id %}_rdo_Lead\" dojoAttachPoint=\"rdo_Lead\" />',\r\n                    '</div>',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"contactContainer\" baseClass=\"bottom-border-section\">',\r\n\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.nameText %}\" dojoAttachPoint=\"container_ContactLup\" class=\"remove-padding lookup-container\"></div>',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.opportunityText %}\" dojoAttachPoint=\"container_OppLup\" class=\"remove-padding lookup-container\"></div>',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.accountText %}\" dojoAttachPoint=\"container_AccountLup\"  class=\"remove-padding lookup-container\"></div>',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.ticketText %}\" dojoAttachPoint=\"container_TicketLup\"  class=\"remove-padding lookup-container\"></div>',\r\n                    '</div>',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"leadContainer\"  baseClass=\"bottom-border-section\" class=\"display-none\">',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.nameText %}\" dojoAttachPoint=\"container_LeadLup\"  class=\"remove-padding lookup-container\"></div>',\r\n                        '<input dojoType=\"dijit.form.TextBox\" id=\"{%= $.id %}_tb_LeadCompanyName\" label=\"{%= $.companyText %}\" dojoAttachPoint=\"tb_LeadCompanyName\" readonly=\"true\" />',\r\n                    '</div>',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\" class=\"bottom-border-section\" >',\r\n                        '<select label=\"{%= $.priorityText %}\" id=\"{%= $.id %}_pk_Priority\" shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.SingleSelectPickList\" dojoAttachPoint=\"pk_Priority\" canEditText=\"true\" itemMustExist=\"false\" pickListName=\"Priorities\" sort=\"false\" maxLength=\"64\" style=\"width: {%= 472 - $.labelWidth %}px;\"></select>',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.leaderText %}\" dojoAttachPoint=\"container_LeaderLup\" class=\"remove-padding lookup-container\" style=\"width: {%= 472 - $.labelWidth %}px;\"></div>',\r\n                        '<select label=\"{%= $.categoryText %}\" id=\"{%= $.id %}_pk_Category\" shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.SingleSelectPickList\" dojoAttachPoint=\"pk_Category\" canEditText=\"true\" itemMustExist=\"false\" maxLength=\"64\" style=\"width: {%= 472 - $.labelWidth %}px;\"></select>',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"&nbsp;\" class=\"dijitTextBox\" style=\"border-width:0px\">&nbsp;</div>',\r\n                    '</div>',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"{%= $.labelWidth %}\" class=\"valigntop\" dojoAttachPoint=\"notesContainer\">',\r\n                        '<textarea dojoType=\"dijit.form.SimpleTextarea\" id=\"{%= $.id %}_ta_Notes\" label=\"{%= $.notesText %}\" dojoAttachPoint=\"ta_Notes\" class=\"notes-text\"></textarea>',\r\n                    '</div>',\r\n                '</div>',  // end general tab\r\n/* Availability Tab   */\r\n                '<div dojoType=\"dijit.layout.ContentPane\" id=\"{%= $.id %}_cp_Availability\" title=\"{%= $.tabNameAvailabilityText %}\" class=\"tabContent remove-padding\" dojoAttachPoint=\"cp_Availability\" dojoAttachEvent=\"onShow:_onShowAvailabilityTab\">',\r\n                    '<div dojoType=\"dijit.Toolbar\" region=\"top\" splitter=\"false\" class=\"right-tools\" >',  // list-panel-tbar                                  \r\n                        '<div dojoType=\"dijit.layout.ContentPane\" dojoAttachPoint=\"container_ResourcesLup\" class=\"remove-padding\"></div>',\r\n                    '</div>',\r\n/* Scheduler ........... */\r\n                    '<div id=\"scheduler_here\" class=\"dhx_cal_container\" style=\"width:100%;height:230px;\">',\r\n                        '<div class=\"dhx_cal_navline\">',\r\n                            '<div class=\"dhx_cal_prev_timeline_button\" style=\"right:50px;\">&nbsp;</div>',\r\n\t\t\t                '<div class=\"dhx_cal_next_timeline_button\" style=\"right:19px;\">&nbsp;</div>',\r\n//'<div class=\"dhx_cal_today_button\"></div>',\r\n\t\t\t                '<div class=\"dhx_cal_date\"></div>',\r\n//'<div class=\"dhx_cal_tab\" name=\"day_tab\" style=\"right:204px;\"></div>',\r\n//'<div class=\"dhx_cal_tab\" name=\"week_tab\" style=\"right:140px;\"></div>',\r\n                            '<div class=\"dhx_cal_tab\" name=\"timeline_tab\" style=\"right:280px;\"></div>',\r\n//'<div class=\"dhx_cal_tab\" name=\"month_tab\" style=\"right:76px;\"></div>',\r\n\t\t                '</div>',\r\n\t\t                '<div class=\"dhx_cal_header\"></div>',\r\n\t\t                '<div class=\"dhx_cal_data\"></div>',\r\n                    '</div>',\r\n                '</div>',\r\n/* Recurring Tab  */\r\n                '<div dojoType=\"dijit.layout.ContentPane\" id=\"{%= $.id %}_cp_Recurring\" title=\"{%= $.recurringText %}\" class=\"tabContent\" dojoAttachPoint=\"cp_Recurring\" dojoAttachEvent=\"onShow:_showRecurringTab\">',\r\n                    '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.MainView.ActivityMgr.RecurringEditor\" id=\"{%= $.id %}_recEd\" labelWidth=\"{%= $.labelWidth - 20 %}\" dojoAttachPoint=\"_recurringEditor\"></div>',\r\n                '</div>',\r\n/* Attachments Tab  */\r\n                '<div dojoType=\"dijit.layout.ContentPane\" id=\"{%= $.id %}_cp_Attachments\" title=\"{%= $.tabNameAttachmentsText %}\" class=\"tabContent remove-padding\" dojoAttachPoint=\"cp_Attachments\">',\r\n                    '<div id=\"{%= $.id %}_attachmentsGridPlaceholder\" dojoAttachPoint=\"_attachmentGridPlaceholder\" style=\"width:100%;height:100%;\" ></div>',\r\n                '</div>',  //end attachments tab\r\n            '</div>',  //tab container\r\n/* Buttons       */\r\n        // Add/edit activity buttons\r\n            '<table class=\"activity-dialog-followup\" id=\"add_edit_buttons\" dojoAttachPoint=\"add_edit_buttons\">',\r\n                '<tr>',\r\n                    '<td class=\"alignleft\">',\r\n                        '<div class=\"scheduled-by-label\" dojoAttachPoint=\"lbl_ScheduledBy\"></div>',\r\n                    '</td><td class=\"alignright\">',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Complete\" name=\"btn_Complete\" dojoAttachPoint=\"btn_Complete\" dojoAttachEvent=\"onClick:_completeClick\">{%= $.completeBtnText %}</div>',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Delete\" name=\"btn_Delete\" dojoAttachPoint=\"btn_Delete\" dojoAttachEvent=\"onClick:_deleteClick\">{%= $.deleteText %}</div>',\r\n                        '<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_OK\" name=\"btn_OK\" dojoAttachPoint=\"btn_OK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.okText %}</div>',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $.cancelText %}</div>',\r\n                    '</td>',\r\n                '</tr>',\r\n            '</table>',\r\n\r\n\r\n        //complete activity buttons\r\n            '<table class=\"activity-dialog-followup display-none\" id=\"complete_buttons\" dojoAttachPoint=\"complete_buttons\">',\r\n                '<tr>',\r\n                    '<col width=\"50%\" /><col width=\"50%\" />',\r\n                    '<td class=\"alignleft\">',\r\n                        '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"{%= $.labelWidth %}\" >',\r\n                            '<select label=\"{%= $.followupText %}\" id=\"sel_Followup\" dojoType=\"dijit.form.ComboBox\" dojoAttachPoint=\"sel_Followup\">',\r\n                                '<option value=\"none\" selected=\"selected\">{%= $.noneText %}</option>',\r\n                                '<option value=\"phone\">{%= Sage.Utility.Activity.getActivityTypeName(\"atPhoneCall\") %}</option>',\r\n                                '<option value=\"meeting\">{%= Sage.Utility.Activity.getActivityTypeName(\"atAppointment\") %}</option>',\r\n                                '<option value=\"todo\">{%= Sage.Utility.Activity.getActivityTypeName(\"atToDo\") %}</option>',\r\n                            '</select>',\r\n                            '<div dojoType=\"dijit.layout.ContentPane\" label=\"\" class=\"remove-padding\">',\r\n                                '<div dojoType=\"dijit.form.CheckBox\" label=\"\" id=\"ck_coAttachments\" dojoAttachPoint=\"ck_coAttachments\" ></div>',\r\n                                '<label class=\"checkbox-label\" for=\"{%= $.id %}_ck_coAttachments\">{%= $.carryOverAttachmentsText %}</label>',\r\n                            '</div>',\r\n                            '<div dojoType=\"dijit.layout.ContentPane\" label=\"\" class=\"remove-padding\">',\r\n                                '<div dojoType=\"dijit.form.CheckBox\" label=\"\" id=\"ck_coNotes\" dojoAttachPoint=\"ck_coNotes\" ></div>',\r\n                                '<label class=\"checkbox-label\" for=\"{%= $.id %}_ck_coNotes\">{%= $.carryOverNotesText %}</label>',\r\n                            '</div>',\r\n                        '</div>',\r\n                    '</td><td class=\"alignright valignbottom\" rowspan=\"2\">',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_asScheduled\" name=\"btn_asScheduled\" dojoAttachPoint=\"btn_asScheduled\" dojoAttachEvent=\"onClick:_asScheduledClick\">{%= $.asScheduledText %}</div>',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Now\" name=\"btn_Now\" dojoAttachPoint=\"btn_Now\" dojoAttachEvent=\"onClick:_nowClick\">{%= $.nowText %}</div>',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_CancelComplete\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_CancelComplete\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $.cancelText %}</div>',\r\n                    '</td>',\r\n                '</tr><tr>',\r\n                    '<td class=\"alignleft\" >',\r\n                        '<div class=\"scheduled-by-label\" dojoAttachPoint=\"lbl_ScheduledByComp\"></div>',\r\n                    '</td>',\r\n                '</tr>',\r\n            '</table>',\r\n\r\n\r\n\r\n        //Confirmations button bar...\r\n            '<table class=\"button-bar display-none\" id=\"confirmation_edit_buttons\" dojoAttachPoint=\"confirmation_edit_buttons\">',\r\n                '<tr>',\r\n                    '<td class=\"alignleft\" style=\"width:{%= $.labelWidth %}px;\">',\r\n                        '<label for=\"{%= $.id %}_ta_confirmationResponse\" id=\"responseLabel\" dojoAttachPoint=\"responseLabel\">{%= $.responseText %}</label>',\r\n                    '</td>',\r\n                    '<td class=\"alignleft\">',\r\n                        '<textarea dojoType=\"dijit.form.SimpleTextarea\" id=\"{%= $.id %}_ta_confirmationResponse\" dojoAttachPoint=\"ta_confirmationResponse\" class=\"notes-text dijitTextBox\" maxLength=\"128\" ></textarea>',\r\n                    '</td><td class=\"alignright valignbottom\">',\r\n                        '<span id=\"newConfButtons\" dojoAttachPoint=\"newConfButtons\">',\r\n                            '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_accept\" name=\"btn_accept\" dojoAttachPoint=\"btn_accept\" dojoAttachEvent=\"onClick:_acceptConfClick\">{%= $.acceptText %}</div>',\r\n                            '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_decline\" name=\"btn_decline\" dojoAttachPoint=\"btn_decline\" dojoAttachEvent=\"onClick:_declineClick\">{%= $.declineText %}</div>',\r\n                            '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_cancelConf\" name=\"btn_cancelConf\" dojoAttachPoint=\"btn_cancelConf\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $.cancelText %}</div>',\r\n                        '</span>',\r\n                        '<span id=\"otherConfButtons\" dojoAttachPoint=\"otherConfButtons\" class=\"display-none\">',\r\n                            '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_deleteConf\" name=\"btn_deleteConf\" dojoAttachPoint=\"btn_deleteConf\" dojoAttachEvent=\"onClick:_deleteConfClick\">{%= $.deleteConfText %}</div>',\r\n                            '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_closeConf\" name=\"btn_closeConf\" dojoAttachPoint=\"btn_closeConf\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $.closeText %}</div>',\r\n                        '</span>',\r\n                    '</td>',\r\n                '</tr>',\r\n            '</table>',\r\n        '</div>', //body\r\n    '</div>',  //dialog\r\n'</div>' //root node\r\n]\r\n","url:Sage/MainView/ActivityMgr/AttendeeLookup/templates/SpeedSearchLookup.html":"[\r\n'<div>',\r\n    '<div data-dojo-type=\"dijit.Dialog\" id=\"{%= $.id %}-Dialog\" title=\"\" dojoAttachPoint=\"_dialog\" >', //dialog\r\n         '<div class=\"event-dialog\">',\r\n        '<div style=\"padding:5px;\" id=\"{%= $.id %}-Condition-container\">',\r\n            '<input id=\"Text1\" type=\"text\" style=\"width:85%;\"  data-dojo-attach-point=\"_valueBox\" data-dojo-attach-event=\"onkeypress:_onKeyPress\"/>',     \r\n            '<button id=\"{%= $.id %}-Search\" data-dojo-type=\"dijit.form.Button\" type=\"button\" dojoAttachPoint=\"searchButton\" dojoAttachEvent=\"onClick:_doSearch\">{%= $.srchBtnCaption %}</button>',\r\n          \r\n        '</div>',    \r\n        '<div data-dojo-attach-point=\"contentNode\">',  \r\n        '<div id=\"{%= $.id %}-Grid-container\" dojoAttachPoint=\"_speedSearchGrid\"  style=\"width:auto;height:400px;\"></div>',\r\n        '</div>',\r\n            '<div class=\"lookupButtonWrapper\">',           \r\n                '<button data-dojo-type=\"dijit.form.Button\" type=\"button\" id=\"{%= $.id %}-GridSelectButton\" ',\r\n                    'onClick=\"dijit.byId(\\'{%= $.id %}\\').getGridSelections(); \">{%= $.okText %}',\r\n                   '</button>',            \r\n                '<button data-dojo-type=\"dijit.form.Button\" type=\"button\" id=\"{%= $.id %}-CloseButton\" ',\r\n                    'onClick=\"dijit.byId(\\'{%= $.id %}-Dialog\\').hide();\">{%= $.cancelText %}</button>',\r\n            '</div>',\r\n             '</div>',\r\n     '</div> ', //dialog   \r\n'</div>'\r\n]","url:Sage/UI/Controls/templates/SingleSelectPickList.html":"<div>\r\n    <select id=\"${id}-Combo\" data-dojo-type=\"Sage.UI.ComboBox\" shouldPublishMarkDirty=\"false\" required=\"${required}\" dojoAttachPoint=\"comboBox\" dojoAttachEvent=\"onChange:_onChange\" tabindex=\"${tabIndex}\">\r\n    </select>\r\n</div>\r\n","url:Sage/MainView/ActivityMgr/templates/RecurringEditor.html":"\r\n['<div>',\r\n    '<table style=\"width:100%\">',\r\n        '<tr>',\r\n            '<td class=\"recurring-selectors\">',  //radio buttons...\r\n                '<div>{%= $.activityOccurrsText %}</div>',\r\n                '<div>',\r\n                    '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"recurPeriod\" value=\"None\" id=\"{%= $.id %}_rdo_Once\" dojoAttachPoint=\"rdo_Once\" checked=\"true\" dojoAttachEvent=\"onChange:_onceChanged\" />',  //  \r\n                    '<label for=\"{%= $.id %}_rdo_Once\">&nbsp;{%= $.onceText %}</label>',\r\n                '</div><div>',\r\n                    '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"recurPeriod\" value=\"daily\" id=\"{%= $.id %}_rdo_Daily\" dojoAttachPoint=\"rdo_Daily\" dojoAttachEvent=\"onChange:_dailyChanged\" />',\r\n                    '<label for=\"{%= $.id %}_rdo_Daily\">&nbsp;{%= $.dailyText %}</label>',\r\n                '</div><div>',\r\n                    '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"recurPeriod\" value=\"weekly\" id=\"{%= $.id %}_rdo_Weekly\" dojoAttachPoint=\"rdo_Weekly\" dojoAttachEvent=\"onChange:_weeklyChanged\" />',\r\n                    '<label for=\"{%= $.id %}_rdo_Weekly\">&nbsp;{%= $.weeklyText %}</label>',\r\n                '</div><div>',\r\n                    '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"recurPeriod\" value=\"monthly\" id=\"{%= $.id %}_rdo_Monthly\" dojoAttachPoint=\"rdo_Monthly\" dojoAttachEvent=\"onChange:_monthlyChanged\" />',\r\n                    '<label for=\"{%= $.id %}_rdo_Monthly\">&nbsp;{%= $.monthlyText %}</label>',\r\n                '</div><div>',\r\n                    '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"recurPeriod\" value=\"yearly\" id=\"{%= $.id %}_rdo_Yearly\" dojoAttachPoint=\"rdo_Yearly\" dojoAttachEvent=\"onChange:_yearlyChanged\" />',\r\n                    '<label for=\"{%= $.id %}_rdo_Yearly\">&nbsp;{%= $.yearlyText %}</label>',\r\n                '</div>',\r\n            '</td>',\r\n            '<td>',  //panel for each different recurring type...\r\n                '<div dojoType=\"dijit.layout.StackContainer\" dojoAttachPoint=\"_panelContainer\" class=\"recurring-body\" >',\r\n                    '<div dojoType=\"dijit.layout.ContentPane\" dojoAttachPoint=\"_oncePanel\" class=\"recurring-panel\"  >',\r\n                        '{%= $.occursOnceText %}',\r\n                    '</div>',\r\n//daily panel...............................\r\n                    '<div dojoType=\"dijit.layout.ContentPane\" dojoAttachPoint=\"_dailyPanel\" class=\"recurring-panel\"  >',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= $.labelWidth %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"dailyEvery\" value=\"days\" id=\"{%= $.id %}_rdoDailyEvery\" checked=\"true\" dojoAttachPoint=\"_rdoDailyEvery\" dojoAttachEvent=\"onChange:_dailyEveryChanged\" />',\r\n                                '<label for=\"{%= $.id %}_rdoDailyEvery\" class=\"padded-inline-label\">{%= $.everyText %}</label>',\r\n                            '</div>',\r\n                            '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"1\" constraints=\"{places: 0, type: \\'decimal\\'}\" dojoAttachPoint=\"_dailyEveryText\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_intervalChanged\" />',\r\n                            '<span class=\"padded-inline-label\">{%= $.daysText %}</span>',\r\n                        '</div>',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= $.labelWidth %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"dailyEvery\" value=\"daysAfter\" id=\"{%= $.id %}_rdoDailyEveryAfter\" dojoAttachPoint=\"_rdoDailyEveryAfter\" />',\r\n                                '<label for=\"{%= $.id %}_rdoDailyEveryAfter\" class=\"padded-inline-label\">{%= $.everyText %}</label>',\r\n                            '</div>',\r\n                            '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"1\" constraints=\"{places: 0, type: \\'decimal\\'}\" dojoAttachPoint=\"_dailyEveryAfterText\" disabled=\"true\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_intervalChanged\" />',\r\n                            '<span class=\"padded-inline-label\">{%= $.daysAfterText %}</span>',\r\n                            '</div>',\r\n                    '</div>',\r\n//weekly panel............................\r\n                    '<div dojoType=\"dijit.layout.ContentPane\" dojoAttachPoint=\"_weeklyPanel\" class=\"recurring-panel\"  >',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= $.labelWidth %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"weeklyEvery\" value=\"weeksOn\" id=\"{%= $.id %}_rdoWeeklyEvery\" checked=\"true\" dojoAttachPoint=\"_rdoWeeklyEvery\" dojoAttachEvent=\"onChange:_weeklyEveryChanged\" />',\r\n                                '<label for=\"{%= $.id %}_rdoWeeklyEvery\" class=\"padded-inline-label\">{%= $.everyText %}</label>',\r\n                            '</div>',\r\n                            '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"1\" constraints=\"{places: 0, type: \\'decimal\\'}\" dojoAttachPoint=\"_weeklyEveryText\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_intervalChanged\" />',\r\n                            '<span class=\"padded-inline-label\">{%= $.weeksOnText %}</span>',\r\n                        '</div>',\r\n                        '<div style=\"white-space:normal;padding-bottom:10px;margin:5px 0 0 20px;\">',\r\n                            '<span class=\"no-wrap\">',\r\n                                '<input dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" name=\"chkMonday\" value=\"mon\" id=\"{%= $.id %}_chkMonday\" dojoAttachPoint=\"_chkMonday\" dojoAttachEvent=\"onClick:_dayChecked\" />',\r\n                                '<label for=\"{%= $.id %}_chkMonday\" class=\"padded-inline-label\">{%= $.monText %}</label>',\r\n                            '</span>',\r\n                            '<span class=\"no-wrap\">',\r\n                                '<input dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" name=\"chkTuesday\" value=\"tue\" id=\"{%= $.id %}_chkTuesday\" dojoAttachPoint=\"_chkTuesday\" dojoAttachEvent=\"onClick:_dayChecked\" />',\r\n                                '<label for=\"{%= $.id %}_chkTuesday\" class=\"padded-inline-label\">{%= $.tueText %}</label>',\r\n                            '</span>',\r\n                            '<span class=\"no-wrap\">',\r\n                                '<input dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" name=\"chkWednesday\" value=\"wed\" id=\"{%= $.id %}_chkWednesday\" dojoAttachPoint=\"_chkWednesday\" dojoAttachEvent=\"onClick:_dayChecked\" />',\r\n                                '<label for=\"{%= $.id %}_chkWednesday\" class=\"padded-inline-label\">{%= $.wedText %}</label>',\r\n                            '</span>',\r\n                            '<span class=\"no-wrap\">',\r\n                                '<input dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" name=\"chkThursday\" value=\"thu\" id=\"{%= $.id %}_chkThursday\" dojoAttachPoint=\"_chkThursday\" dojoAttachEvent=\"onClick:_dayChecked\" />',\r\n                                '<label for=\"{%= $.id %}_chkThursday\" class=\"padded-inline-label\">{%= $.thurText %}</label>',\r\n                            '</span>',\r\n                            '<span class=\"no-wrap\">',\r\n                                '<input dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" name=\"chkFriday\" value=\"fri\" id=\"{%= $.id %}_chkFriday\" dojoAttachPoint=\"_chkFriday\" dojoAttachEvent=\"onClick:_dayChecked\" />',\r\n                                '<label for=\"{%= $.id %}_chkFriday\" class=\"padded-inline-label\">{%= $.friText %}</label>',\r\n                            '</span>',\r\n                            '<span class=\"no-wrap\">',\r\n                                '<input dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" name=\"chkSaturday\" value=\"sat\" id=\"{%= $.id %}_chkSaturday\" dojoAttachPoint=\"_chkSaturday\" dojoAttachEvent=\"onClick:_dayChecked\" />',\r\n                                '<label for=\"{%= $.id %}_chkSaturday\" class=\"padded-inline-label\">{%= $.satText %}</label>',\r\n                            '</span>',\r\n                            '<span class=\"no-wrap\">',\r\n                                '<input dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" name=\"chkSunday\" value=\"sun\" id=\"{%= $.id %}_chkSunday\" dojoAttachPoint=\"_chkSunday\" dojoAttachEvent=\"onClick:_dayChecked\" />',\r\n                                '<label for=\"{%= $.id %}_chkSunday\" class=\"padded-inline-label\">{%= $.sunText %}</label>',\r\n                            '</span>',\r\n                        '</div>',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= $.labelWidth %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"weeklyEvery\" value=\"weeksAfter\" id=\"{%= $.id %}_rdoWeeklyEveryAfter\" dojoAttachPoint=\"_rdoWeeklyEveryAfter\" />',\r\n                                '<label for=\"{%= $.id %}_rdoWeeklyEveryAfter\" class=\"padded-inline-label\">{%= $.everyText %}</label>',\r\n                            '</div>',\r\n                            '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"1\" constraints=\"{places: 0, type: \\'decimal\\'}\" dojoAttachPoint=\"_weeklyEveryAfterText\" disabled=\"true\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_calculateEnd\" />',\r\n                            '<span class=\"padded-inline-label\">{%= $.weeksAfterText %}</span>',\r\n                        '</div>',\r\n                    '</div>',\r\n//monthly panel.........................................................\r\n                    '<div dojoType=\"dijit.layout.ContentPane\" dojoAttachPoint=\"_monthlyPanel\" class=\"recurring-panel\"  >',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= $.labelWidth %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"monthlyOn\" value=\"monthyOn\" id=\"{%= $.id %}_rdoMonthlyOn\" checked=\"true\" dojoAttachPoint=\"_rdoMonthlyOn\" dojoAttachEvent=\"onChange:_monthlyOnChanged\" />',\r\n                                '<label for=\"{%= $.id %}_rdoMonthlyOn\" class=\"padded-inline-label\">{%= $.everyText %}</label>',\r\n                            '</div>',\r\n                            '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"1\" constraints=\"{places: 0, type: \\'decimal\\'}\" dojoAttachPoint=\"_monthlyEveryText\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_intervalChanged\" />',\r\n                            '<span class=\"padded-inline-label\">{%= $.monthsOnText %}</span>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"_datesSelect\" dojoAttachEvent=\"onChange:_calculateEnd\" maxHeight=\"300\"></select>',\r\n                        '</div>',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= $.labelWidth %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"monthlyOn\" value=\"monthyOnThe\" id=\"{%= $.id %}_rdoMonthlyOnThe\" dojoAttachPoint=\"_rdoMonthlyOnThe\" />', // dojoAttachEvent=\"onChange:_monthlyOnChanged\"\r\n                                '<label for=\"{%= $.id %}_rdoMonthlyOnThe\" class=\"padded-inline-label\">{%= $.everyText %}</label>',\r\n                            '</div>',\r\n                            '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"1\" constraints=\"{places: 0, type: \\'decimal\\'}\" dojoAttachPoint=\"_monthlyOnTheText\" disabled=\"true\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_intervalChanged\" />',\r\n                            '<span class=\"padded-inline-label\">{%= $.monthsOnTheText %}</span>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"_weeksSelect\" disabled=\"true\" dojoAttachEvent=\"onChange:_calculateEnd\"></select>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"_weekdaySelect\" disabled=\"true\" dojoAttachEvent=\"onChange:_calculateEnd\"></select>',\r\n                        '</div>',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= $.labelWidth %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"monthlyOn\" value=\"monthyAfter\" id=\"{%= $.id %}_rdoMonthlyAfter\" dojoAttachPoint=\"_rdoMonthlyAfter\" dojoAttachEvent=\"onChange:_monthlyOnChanged\" />',\r\n                                '<label for=\"{%= $.id %}_rdoMonthlyAfter\" class=\"padded-inline-label\">{%= $.everyText %}</label>',\r\n                            '</div>',\r\n                            '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"1\" constraints=\"{places: 0, type: \\'decimal\\'}\" dojoAttachPoint=\"_monthlyAfterText\" disabled=\"true\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_calculateEnd\" />',\r\n                            '<span class=\"padded-inline-label\">{%= $.monthsAfterText %}</span>',\r\n                        '</div>',\r\n                    '</div>',\r\n// yearly panel..............\r\n                    '<div dojoType=\"dijit.layout.ContentPane\" dojoAttachPoint=\"_yearlyPanel\" class=\"recurring-panel\"  >',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= $.labelWidth %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"yearlyOn\" value=\"yearlyOn\" id=\"{%= $.id %}_rdoYearlyOn\" checked=\"true\" dojoAttachPoint=\"_rdoYearlyOn\" dojoAttachEvent=\"onChange:_yearlyOnChanged\" />',\r\n                                '<label for=\"{%= $.id %}_rdoYearlyOn\" class=\"padded-inline-label\">{%= $.everyText %}</label>',\r\n                            '</div>',\r\n                            '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"1\" constraints=\"{places: 0, type: \\'decimal\\'}\" dojoAttachPoint=\"_yearlyEveryText\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_intervalChanged\" />',\r\n                            '<span class=\"padded-inline-label\">{%= $.yearsOnText %}</span>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"_monthNamesSelect\" dojoAttachEvent=\"onChange:_yearlyRecurDateChanged\"></select>',\r\n                            '<select dojoType=\"dijit.form.Select\" maxHeight=\"300\" dojoAttachPoint=\"_yearDatesSelect\" dojoAttachEvent=\"onChange:_yearlyRecurDateChanged\"></select>',\r\n                        '</div>',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= $.labelWidth  %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"yearlyOn\" value=\"yearlyOnThe\" id=\"{%= $.id %}_rdoYearlyOnThe\" dojoAttachPoint=\"_rdoYearlyOnThe\" />',\r\n                                '<label for=\"{%= $.id %}_rdoYearlyOnThe\" class=\"padded-inline-label\">{%= $.theText %}</label>',\r\n                            '</div>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"_yearWeeksSelect\" disabled=\"true\" dojoAttachEvent=\"onChange:_yearlyRecurDateChanged\"></select>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"_yearWeekdaySelect\" disabled=\"true\" dojoAttachEvent=\"onChange:_yearlyRecurDateChanged\"></select>',\r\n                            '<label class=\"padded-inline-label\">{%= $.inText %}</label>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"_yearMonthNamesSelect\" disabled=\"true\" dojoAttachEvent=\"onChange:_yearlyRecurDateChanged\"></select>',\r\n                        '</div>',\r\n                        '<div>',\r\n                            '<div class=\"recurring-radio-label\" style=\"min-width:{%= $.labelWidth %}px;\">',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"yearlyOn\" value=\"yearlyEveryAfter\" id=\"{%= $.id %}_rdoYearlyEveryAfter\" dojoAttachPoint=\"_rdoYearlyEveryAfter\" dojoAttachEvent=\"onChange:_yearlyOnChanged\" />',\r\n                                '<label for=\"{%= $.id %}_rdoYearlyEveryAfter\" class=\"padded-inline-label\">{%= $.everyText %}</label>',\r\n                            '</div>',\r\n                            '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"1\" constraints=\"{places: 0, type: \\'decimal\\'}\" dojoAttachPoint=\"_yearlyEveryAfterText\" disabled=\"true\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_calculateEnd\" />',\r\n                            '<span class=\"padded-inline-label\">{%= $.yearsAfterText %}</span>',\r\n                            '</div>',\r\n                    '</div>',\r\n                '</div>', //stack container\r\n// End date calculator section.........................................\r\n                '<div dojoAttachPoint=\"_startEndCalculator\" class=\"display-none\">',\r\n                    '<hr />',\r\n                    '<table>',\r\n                        '<tr>',\r\n                            '<td>{%= $.startRecurringText %}</td>',\r\n                            '<td>',\r\n                                '<div dojoType=\"Sage.UI.Controls.DateTimePicker\" shouldPublishMarkDirty=\"false\" id=\"{%= $.id %}_dtp_StartRecur\" value=\"{%= $.startDate %}\" dojoAttachPoint=\"dtp_startRecur\" displayDate=\"true\" displayTime=\"false\" dojoAttachEvent=\"onChange:_recurringStartDateChanged\" readOnly=\"true\" ></div>',\r\n                            '</td>',\r\n                        '</tr>',\r\n                        '<tr>',\r\n                            '<td>',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"endRecur\" value=\"endAfterNum\" id=\"{%= $.id %}_rdoEndAfterNum\" dojoAttachPoint=\"_rdoEndAfter\" dojoAttachEvent=\"onChange:_endCalcModeChanged\" checked=\"true\" />',\r\n                                '<label for=\"{%= $.id %}_rdoEndAfterNum\" class=\"padded-inline-label\">{%= $.endAfterText  %}</label>',\r\n                            '</td><td>',\r\n                                '<input dojoType=\"Sage.UI.NumberTextBox\" shouldPublishMarkDirty=\"false\" value=\"2\" constraints=\"{places: 0, type: \\'decimal\\', max: 999, min: 1}\" maxlength=\"3\" id=\"{%= $.id %}_num_Occurances\" dojoAttachPoint=\"num_Occurances\" class=\"small-inline-textbox\" dojoAttachEvent=\"onChange:_numOccurancesChanged\" />',\r\n                                '<span class=\"padded-inline-label\">{%= $.occurrencesText %}</span>',\r\n                            '</td>',\r\n                        '</tr><tr>',\r\n                            '<td>',\r\n                                '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"endRecur\" value=\"endOn\" id=\"{%= $.id %}_rdoEndOn\" dojoAttachPoint=\"_rdoEndOn\" />',\r\n                                '<label for=\"{%= $.id %}_rdoEndOn\" class=\"padded-inline-label\">{%= $.endOnText %}</label>',\r\n                            '</td>',\r\n                            '<td>',\r\n                                '<div dojoType=\"Sage.UI.Controls.DateTimePicker\" shouldPublishMarkDirty=\"false\" id=\"{%= $.id %}_dtp_EndRecur\" dojoAttachPoint=\"dtp_endRecur\" displayDate=\"true\" displayTime=\"false\" dojoAttachEvent=\"onChange:_endRecurChanged\" ></div>',\r\n                            '</td>',\r\n                        '</tr>',\r\n                    '</table>',\r\n                '</div>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</table>',\r\n'</div>']","url:Sage/MainView/ActivityMgr/templates/HistoryEditor.html":"\r\n[\r\n'<div>',\r\n    '<div dojoType=\"dijit.Dialog\" id=\"historyDialog\" title=\"\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onHide:_onDlgHide\">',\r\n        '<div class=\"activity-dialog\">',  //body\r\n            '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"{%= $.labelWidth %}\">',\r\n                '<select label=\"{%= $.regardingText %}\" shouldPublishMarkDirty=\"false\" id=\"{%= $.id %}_pk_Regarding\" dojoType=\"Sage.UI.Controls.SingleSelectPickList\" dojoAttachPoint=\"pk_Regarding\" canEditText=\"true\" itemMustExist=\"false\" maxLength=\"255\"></select>',\r\n                '<div dojoType=\"Sage.UI.Controls.TextBox\" shouldPublishMarkDirty=\"false\" label=\"{%= $.locationText %}\" id=\"{%= $.id %}_tb_Location\" dojoAttachPoint=\"tb_Location\" maxLength=\"255\" ></div>',\r\n            '</div>', //first tablecontainer 1 col\r\n            '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\">',\r\n                '<div dojoType=\"Sage.UI.Controls.DateTimePicker\" shouldPublishMarkDirty=\"false\" id=\"{%= $.id %}_dtp_CompletetdDate\" dojoAttachPoint=\"dtp_completedDate\" displayDate=\"true\" displayTime=\"true\" label=\"{%= $.completedDateText %}\"></div>',\r\n                '<div dojoType=\"Sage.UI.Controls.DateTimePicker\" shouldPublishMarkDirty=\"false\" id=\"{%= $.id %}_dtp_StartDate\" dojoAttachPoint=\"dtp_startDate\" displayDate=\"true\" displayTime=\"true\" label=\"{%= $.startTimeText %}\"></div>',\r\n                '<div dojoType=\"dijit.layout.ContentPane\" label=\"\" class=\"remove-padding\">',\r\n                    '<div dojoType=\"dijit.form.CheckBox\" label=\"{%= $.timeLessText %}\" id=\"{%= $.id %}_cb_Timeless\" dojoAttachPoint=\"cb_Timeless\" ></div>',\r\n                    '<label class=\"checkbox-label\" for=\"cb_Timeless\">{%= $.timeLessText %}</label>',\r\n                '</div>',\r\n                 '<div dojoType=\"Sage.UI.Controls.DurationSelect\" shouldPublishMarkDirty=\"false\" label=\"{%= $.durationText %}\" id=\"{%= $.id %}_sel_Duration\" dojoAttachPoint=\"sel_Duration\" includeDisablingCheckbox=\"false\" valuesAreAfterStart=\"true\"></div>',\r\n                '<div dojoType=\"dijit.layout.ContentPane\" label=\"\" class=\"remove-padding\">',\r\n                    \r\n                '</div>',\r\n            '</div>', //second tablecontainer 2 col\r\n\r\n            '<div dojoType=\"dijit.layout.TabContainer\" id=\"{%= $.id %}_tc_EditHistory\"  dojoAttachPoint=\"tc_EditHistory\" class=\"tab-container\">',\r\n/*  General Tab   */\r\n                '<div dojoType=\"dijit.layout.ContentPane\" id=\"{%= $.id %}_cp_General\" title=\"{%= $.tabNameGeneralText %}\" class=\"tabContent remove-padding\" dojoAttachPoint=\"cp_General\">',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"result_Section\" class=\"bottom-border-section\">',\r\n                        '<select label=\"{%= $.resultText %}\" id=\"{%= $.id %}_tb_Result\" shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.SingleSelectPickList\" dojoAttachPoint=\"pk_Result\" canEditText=\"true\" itemMustExist=\"false\" maxLength=\"64\"></select>',\r\n                    '</div>',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"4\" labelWidth=\"4\" baseClass=\"contact-lead-radios\" >',\r\n                        '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"contactOrLead\" label=\"{%= $.contactText %}\" value=\"contact\" id=\"{%= $.id %}_rdo_Contact\" dojoAttachPoint=\"rdo_Contact\" dojoAttachEvent=\"onChange:_setContactLeadVisibility\" checked=\"true\" />',\r\n                        '<input dojoType=\"dijit.form.RadioButton\" type=\"radio\" name=\"contactOrLead\" label=\"{%= $.leadText %}\" value=\"lead\" id=\"{%= $.id %}_rdo_Lead\" dojoAttachPoint=\"rdo_Lead\" />',\r\n                    '</div>',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"contactContainer\" baseClass=\"bottom-border-section\">',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.nameText %}\" dojoAttachPoint=\"container_ContactLup\" class=\"remove-padding lookup-container\"></div>',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.opportunityText %}\" dojoAttachPoint=\"container_OppLup\" class=\"remove-padding lookup-container\"></div>',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.accountText %}\" dojoAttachPoint=\"container_AccountLup\"  class=\"remove-padding lookup-container\"></div>',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.ticketText %}\" dojoAttachPoint=\"container_TicketLup\"  class=\"remove-padding lookup-container\"></div>',\r\n                    '</div>',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"leadContainer\"  baseClass=\"bottom-border-section\" class=\"display-none\">',\r\n                        '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.nameText %}\" dojoAttachPoint=\"container_LeadLup\"  class=\"remove-padding lookup-container\"></div>',\r\n                        '<input dojoType=\"dijit.form.TextBox\" id=\"{%= $.id %}_tb_LeadCompanyName\" label=\"{%= $.companyText %}\" dojoAttachPoint=\"tb_LeadCompanyName\" readonly=\"true\" />',\r\n                    '</div>',                       \r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"{%= $.labelWidth %}\"  class=\"bottom-border-section\">',\r\n                        '<select label=\"{%= $.categoryText %}\" id=\"{%= $.id %}_pk_Category\" shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.SingleSelectPickList\" dojoAttachPoint=\"pk_Category\" canEditText=\"true\" itemMustExist=\"false\" maxLength=\"64\"  style=\"width: {%= 472 - $.labelWidth %}px;\" ></select>', \r\n                         '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $.leaderText %}\" dojoAttachPoint=\"container_LeaderLup\" class=\"remove-padding lookup-container\" style=\"width: {%= 472 - $.labelWidth %}px;\"></div>',\r\n                         '<select label=\"{%= $.priorityText %}\" id=\"{%= $.id %}_pk_Priority\" shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.SingleSelectPickList\" dojoAttachPoint=\"pk_Priority\" canEditText=\"true\" itemMustExist=\"false\" pickListName=\"Priorities\" sort=\"false\" maxLength=\"64\" style=\"width: {%= 472 - $.labelWidth %}px;\"></select>',                          \r\n                    '</div>',\r\n                    '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"{%= $.labelWidth %}\"  class=\"valigntop\">',\r\n                        '<textarea dojoType=\"dijit.form.SimpleTextarea\" id=\"{%= $.id %}_ta_Notes\" label=\"{%= $.notesText %}\" dojoAttachPoint=\"ta_Notes\" class=\"notes-text\" ></textarea>',\r\n                    '</div>',\r\n                '</div>',  // end general tab\r\n\r\n              /* Attachments Tab  */\r\n                '<div dojoType=\"dijit.layout.ContentPane\" id=\"{%= $.id %}_cp_Attachments\" title=\"{%= $.tabNameAttachmentsText %}\" class=\"tabContent\" dojoAttachPoint=\"cp_Attachments\" dojoAttachEvent=\"onShow:_showAttachmentsTab\">',\r\n                    '<div id=\"{%= $.id %}_attachmentsGridPlaceholder\" dojoAttachPoint=\"_attachmentGridPlaceholder\" style=\"width:100%;height:100%;\" ></div>',\r\n                '</div>',  //end attachments tab\r\n            '</div>', //end tab container\r\n            '<table class=\"activity-dialog-followup\">',\r\n                '<col width=\"50%\" /><col width=\"50%\" />',\r\n                 '<tr>',\r\n                    '<td class=\"alignleft\">',\r\n                        //followUp section\r\n                        '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"1\" labelWidth=\"{%= $.labelWidth %}\" dojoAttachPoint=\"followUp_Section\" >',\r\n                            '<select label=\"{%= $.followupText %}\" id=\"{%= $.id %}_followUpSelect\" dojoType=\"dijit.form.ComboBox\" dojoAttachPoint=\"sel_Followup\">',\r\n                                '<option value=\"none\" selected=\"selected\">{%= $.noneText %}</option>',\r\n                                '<option value=\"atPhoneCall\">{%= Sage.Utility.Activity.getActivityTypeName(\"atPhoneCall\") %}</option>',\r\n                                '<option value=\"atAppointment\">{%= Sage.Utility.Activity.getActivityTypeName(\"atAppointment\") %}</option>',\r\n                                '<option value=\"atToDo\">{%= Sage.Utility.Activity.getActivityTypeName(\"atToDo\") %}</option>',\r\n                            '</select>',\r\n                            '<div dojoType=\"dijit.layout.ContentPane\" label=\"\" class=\"remove-padding\">',\r\n                                '<div dojoType=\"dijit.form.CheckBox\" label=\"\" id=\"{%= $.id %}_ck_coAttachments\" dojoAttachPoint=\"ck_coAttachments\" ></div>',\r\n                                '<label class=\"checkbox-label\" for=\"{%= $.id %}_ck_coAttachments\">{%= $.carryOverAttachmentsText %}</label>',\r\n                            '</div>',\r\n                            '<div dojoType=\"dijit.layout.ContentPane\" label=\"\" class=\"remove-padding\">',\r\n                                '<div dojoType=\"dijit.form.CheckBox\" label=\"\" id=\"{%= $.id %}_ck_coNotes\" dojoAttachPoint=\"ck_coNotes\" ></div>',\r\n                                '<label class=\"checkbox-label\" for=\"{%= $.id %}_ck_coNotes\">{%= $.carryOverNotesText %}</label>',\r\n                            '</div>',\r\n                        '</div>',//end followUp section                         \r\n                    '</td>',\r\n                    '<td class=\"alignright valignbottom\" rowspan=\"2\">',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btnDelete\" name=\"btn_Delete\" dojoAttachPoint=\"btn_Delete\" dojoAttachEvent=\"onClick:_deleteClick\">{%= $.deleteText %}</div>',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_OK\" name=\"btn_OK\" dojoAttachPoint=\"btn_OK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.okText %}</div>',\r\n                        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $. cancelText %}</div>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                   '<td class=\"alignleft\">',\r\n                      '<div class=\"scheduled-by-label\" dojoAttachPoint=\"lbl_ScheduledBy\"></div>',\r\n                   '</td>',                 \r\n                '</tr>',\r\n            '</table>',\r\n        '</div>', //body\r\n    '</div>',  //dialog\r\n'</div>' //root node\r\n]\r\n","url:Sage/Library/templates/DocumentProperties.html":"[\r\n'<div>',\r\n'    <div dojoType=\"dijit.Dialog\" id=\"propertiesDialog\" title=\"{%= Sage.Utility.htmlEncode($.resources.DocumentProperties) %}\" dojoAttachPoint=\"_dialog\">',\r\n'        <div dojoType=\"dijit.form.Form\" id=\"propertiesForm\" method=\"POST\" onSubmit=\"return true;\">',\r\n'            <table style=\"border: 1px solid #9f9f9f;\" cellspacing=\"10\">',\r\n'                <tr>',\r\n'                    <td>',\r\n'                        <label for=\"FileName\">{%= $.resources.FileName %}:</label>',\r\n'                    </td>',\r\n'                    <td>',\r\n'                        <input class=\"libInputText\" type=\"text\" id=\"fileName\" name=\"fileName\" required=\"true\" maxlength=\"255\" dojoType=\"dijit.form.ValidationTextBox\" />',\r\n'                    </td>',\r\n'                    <td>',\r\n'                        <label for=\"CreateDate\">{%= $.resources.Created %}:</label>',\r\n'                    </td>',\r\n'                    <td>',\r\n'                        <input type=\"text\" id=\"createDate\" name=\"createDate\" disabled=\"disabled\" dojoType=\"dijit.form.DateTextBox\" />',\r\n'                    </td>',\r\n'                </tr>',\r\n'                <tr>',\r\n'                    <td>',\r\n'                        <label for=\"Directroy\">{%= $.resources.Directory %}:</label>',\r\n'                    </td>',\r\n'                    <td>',\r\n'                        <input class=\"libInputText\" type=\"text\" id=\"directory.fullPath\" name=\"directory.fullPath\" maxlength=\"255\" dojoType=\"dijit.form.TextBox\" />',\r\n'                    </td>',\r\n'                    <td>',\r\n'                        <label for=\"RevisionDate\">{%= $.resources.Revised %}:</label>',\r\n'                    </td>',\r\n'                    <td>',\r\n'                        <input type=\"text\" id=\"revisionDate\" name=\"revisionDate\" required=\"false\" dojoType=\"dijit.form.DateTextBox\" />',\r\n'                    </td>',\r\n'                </tr>',\r\n'                <tr>',\r\n'                    <td>',\r\n'                        <label for=\"Status\">{%= $.resources.Status %}:</label>',\r\n'                    </td>',\r\n'                    <td>',\r\n'                        <input class=\"libInputText\" type=\"text\" id=\"status\" name=\"status\" required=\"false\" dojoType=\"dijit.form.TextBox\" />',\r\n'                    </td>',\r\n'                    <td>',\r\n'                        <label for=\"ExpireDate\">{%= $.resources.Expires %}:</label>',\r\n'                    </td>',\r\n'                    <td>',\r\n'                        <div id=\"expiresRoot\" name=\"expiresRoot\"></div>',\r\n'                    </td>',\r\n'                </tr>',\r\n'                <tr>',\r\n'                    <td>',\r\n'                        <label for=\"FileSize\">{%= $.resources.Size %}:</label>',\r\n'                    </td>',\r\n'                    <td>',\r\n'                        <input class=\"libInputText\" type=\"text\" id=\"fileSize\" name=\"fileSize\" required=\"false\" dojoType=\"dijit.form.TextBox\" />',\r\n'                    </td>',\r\n'                    <td>',\r\n'                    </td>',\r\n'                    <td>',\r\n'                        <input type=\"checkbox\" dojoType=\"dijit.form.CheckBox\" id=\"doNotExpire\" name=\"doNotExpire\" dojoAttachEvent=\"onChange:_doNotExpireChange\" />',\r\n'                        <label for=\"doNotExpire\">{%= $.resources.DoNotExpire %}</label>',\r\n'                    </td>',\r\n'                </tr>',\r\n'            </table>',\r\n'            <br><label for=\"Description\">{%= $.resources.Description %}:</label>',\r\n'            <br>',\r\n'            <textarea class=\"libTextBox\" id=\"description\" name=\"description\" maxlength=\"255\" dojoType=\"dijit.form.Textarea\"></textarea>',\r\n'            <br><br>',\r\n'            <label for=\"abstract\">{%= $.resources.Abstract %}:</label>',\r\n'            <br>',\r\n'            <textarea class=\"libTextBox\" id=\"abstract\" name=\"abstract\" dojoType=\"dijit.form.Textarea\"></textarea>',\r\n'            <p></p>',\r\n'            <input type=\"checkbox\" dojoType=\"dijit.form.CheckBox\" id=\"forceDistribution\" name=\"forceDistribution\" />',\r\n'            <label for=\"forceDistribution\">{%= $.resources.ForceDistribution %}</label>',\r\n'            <div style=\"text-align: right\">',\r\n'                <button class=\"libOkBtn\" dojoType=\"dijit.form.Button\" id=\"okButton\" type=\"button\" dojoAttachEvent=\"onClick:_submitClick\">{%= $.resources.OK %}</button>',\r\n'                &nbsp;',\r\n'                <button dojoType=\"dijit.form.Button\" id=\"cancelButton\" type=\"button\" dojoAttachEvent=\"onClick:_cancelClick\">{%= $.resources.Cancel %}</button>',\r\n'            </div>',\r\n'            <div style=\"display: none\">',\r\n'                <input type=\"text\" dojoType=\"dijit.form.DateTextBox\" id=\"expireDate\" name=\"expireDate\" value=\"\" />',\r\n'            </div>',\r\n'            <input type=\"hidden\" dojoType=\"dijit.form.TextBox\" id=\"$key\" name=\"$key\" value=\"\" />',\r\n'            <input type=\"hidden\" dojoType=\"dijit.form.TextBox\" id=\"$etag\" name=\"$etag\" value=\"\" />',\r\n'            <input type=\"hidden\" dojoType=\"dijit.form.TextBox\" id=\"expires\" name=\"expires\" value=\"\" />',\r\n'            <input type=\"hidden\" dojoType=\"dijit.form.TextBox\" id=\"flags\" name=\"flags\" value=\"\" />',\r\n'            <input type=\"hidden\" dojoType=\"dijit.form.TextBox\" id=\"abstract$originalValue\" name=\"abstract$originalValue\" value=\"\" />',\r\n'            <input type=\"hidden\" dojoType=\"dijit.form.TextBox\" id=\"description$originalValue\" name=\"description$originalValue\" value=\"\" />',\r\n'            <input type=\"hidden\" dojoType=\"dijit.form.TextBox\" id=\"expireDate$originalValue\" name=\"expireDate$originalValue\" value=\"\" />',\r\n'            <input type=\"hidden\" dojoType=\"dijit.form.TextBox\" id=\"fileName$originalValue\" name=\"fileName$originalValue\" value=\"\" />',\r\n'            <input type=\"hidden\" dojoType=\"dijit.form.TextBox\" id=\"revisionDate$originalValue\" name=\"revisionDate$originalValue\" value=\"\" />',\r\n'        </div>',\r\n'    </div>',\r\n'</div>'\r\n]","url:Sage/MainView/ReportMgr/Crystal/templates/CrystalReportParametersDialog.html":"<div>\r\n    <div data-dojo-type=\"dijit.Dialog\" title=\"{%= $._getDialogTitle() %}\" dojoattachpoint=\"_dialog\" dojoattachevent=\"onCancel:_dialog_OnCancel\" style=\"width: 625px\">\r\n        <div data-dojo-type=\"dijit.form.Form\">\r\n            <div style=\"overflow:auto\">\r\n                <div dojoattachpoint=\"paramsContainerDiv\" id=\"paramsContainerDiv\" style=\"height:400px; overflow:auto\"></div>\r\n            </div>\r\n            <div align=\"right\" style=\"margin-top:10px\">\r\n                <div data-dojo-type=\"dijit.form.Button\"dojoAttachPoint=\"cmdBack\" dojoAttachEvent=\"onClick:_cmdBack_OnClick\" >{%= Sage.Utility.htmlEncode($._nlsResources.cmdBack_Caption) %}</div>\r\n                <div data-dojo-type=\"dijit.form.Button\"dojoAttachPoint=\"cmdNext\" dojoAttachEvent=\"onClick:_cmdNext_OnClick\">{%= Sage.Utility.htmlEncode($._nlsResources.cmdNext_Caption) %}</div>\r\n                <div data-dojo-type=\"dijit.form.Button\" dojoAttachPoint=\"cmdCancel\" dojoAttachEvent=\"onClick:_cmdCancel_OnClick\" style=\"margin-left:5px;\">{%= Sage.Utility.htmlEncode($._nlsResources.cmdCancel_Caption) %}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","url:Sage/MainView/ReportMgr/Crystal/templates/BooleanParameterEditor.html":"<div>\r\n    <div dojoattachpoint=\"promptParameterContainer\" class=\"crystalParameterContainer\">\r\n        <div dojoattachpoint=\"paramsHeaderContainer\"></div>\r\n        <div>\r\n            <div dojotype=\"dijit.form.FilteringSelect\" data-dojo-attach-point=\"cmbValues\" style=\"width:40%\"></div>\r\n            <span dojoAttachPoint=\"errorInvalidOption\" class=\"display-none\" style=\"color:red\">*</span>\r\n        </div>\r\n        <div dojoattachpoint=\"divValidationMessage\" style=\"color:red\">\r\n            <span dojoattachpoint=\"spanValidationMessage\">&nbsp;</span>\r\n        </div>\r\n    </div>\r\n    <div>\r\n        <br />\r\n    </div>\r\n</div>","url:Sage/MainView/ReportMgr/Crystal/templates/ParameterHeaderWidget.html":"<table style=\"padding-bottom:5px; width:100%\">\r\n    <colgroup>\r\n        <col style=\"width:45%\" />\r\n        <col style=\"width:10%\" />\r\n        <col style=\"width:45%\" />\r\n    </colgroup>\r\n    <tr>\r\n        <td>\r\n            <label for=\"values\" style=\"font-weight:bold\" >${promptText}</label>\r\n        </td>\r\n        <td></td>\r\n        <td>\r\n            <label style=\"font-weight:bold\">${parameterFieldName}</label>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <td colspan=\"3\">\r\n            <div style=\"border-bottom: 1px solid #B5BCC7\"></div>\r\n        </td>\r\n    </tr>\r\n</table>\r\n","url:Sage/UI/templates/TransferBoxWidget.html":"<div>\r\n    <table style=\"width:100%\">\r\n        <colgroup>\r\n            <col style=\"width:45%\" />\r\n            <col style=\"width:10%\" />\r\n            <col style=\"width:45%\" />\r\n        </colgroup>\r\n        <tr>\r\n            <td colspan=\"3\">\r\n                <div data-dojo-attach-point=\"searchFilterDiv\">\r\n                    <label>${searchFilterText}</label>\r\n                    <div dojoType=\"dijit.form.TextBox\" dojoAttachPoint=\"searchFilter\"></div>\r\n                    <button data-dojo-type=\"Sage.UI.ImageButton\" imageClass=\"icon_Find_16x16\" data-dojo-attach-point=\"filterButton\" data-dojo-attach-event=\"onClick:_onFilterClick\" ></button>\r\n                </div>\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <td>\r\n                <label data-dojo-attach-point=\"availableValues\">${availableValuesText}</label>\r\n            </td>\r\n            <td></td>\r\n            <td>\r\n                <label data-dojo-attach-point=\"selectedValues\">${selectedValuesText}</label>\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <td data-dojo-attach-point=\"colFromNode\">\r\n                <div data-dojo-attach-point=\"fromNode\"></div>\r\n            </td>\r\n            <td style=\"text-align:center\">\r\n                <div data-dojo-attach-point=\"transferButtons\">\r\n                    <button data-dojo-type=\"dijit.form.Button\" data-dojo-attach-event=\"onClick:_onAddClick\" data-dojo-attach-point=\"addButton\" title=\"${btnAddTooltip}\">&gt;</button>\r\n                    <button data-dojo-type=\"dijit.form.Button\" data-dojo-attach-event=\"onClick:_onAddAllClick\" data-dojo-attach-point=\"addAllButton\" title=\"${btnAddAllTooltip}\">&gt;&gt;</button>\r\n                    <button data-dojo-type=\"dijit.form.Button\" data-dojo-attach-event=\"onClick:_onRemoveClick\" data-dojo-attach-point=\"removeButton\" title=\"${btnRemoveTooltip}\">&lt;</button>\r\n                    <button data-dojo-type=\"dijit.form.Button\" data-dojo-attach-event=\"onClick:_onRemoveAllClick\" data-dojo-attach-point=\"removeAllButton\" title=\"${btnRemoveAllTooltip}\">&lt;&lt;</button>\r\n                </div>\r\n            </td>\r\n            <td>\r\n                <div data-dojo-attach-point=\"toNode\"></div>\r\n            </td>\r\n            <td style=\"vertical-align:top\">\r\n                <span data-dojo-attach-point=\"errorValidation\" class=\"display-none\" style=\"color:red\">*</span>\r\n            </td>\r\n        </tr>\r\n    </table>\r\n</div>","url:Sage/MainView/ReportMgr/Crystal/templates/DateParameterEditor.html":"<div>\r\n    <div data-dojo-attach-point=\"promptParameterContainer\" class=\"crystalParameterContainer\">\r\n        <div data-dojo-attach-point=\"paramsHeaderContainer\"></div>\r\n        <div data-dojo-attach-point=\"divMinMaxMessage\">\r\n            <span data-dojo-attach-point=\"spanMinMaxMessage\">&nbsp;</span>\r\n        </div>\r\n        <div>\r\n            <table data-dojo-attach-point=\"tblRange\" style=\"width:100%\">\r\n                <colgroup>\r\n                    <col style=\"width:1%\" />\r\n                    <col style=\"width:44%\" />\r\n                    <col style=\"width:10%\" />\r\n                    <col style=\"width:1%\" />\r\n                    <col style=\"width:44%\" />\r\n                </colgroup>\r\n                <tr>\r\n                    <td colspan=\"3\">\r\n                        <label data-dojo-attach-point=\"lblDiscreteStartRange\" style=\"font-weight:bold\">{%= Sage.Utility.htmlEncode($.txtStartOfRange) %}</label>\r\n                    </td>\r\n                    <td colspan=\"2\" data-dojo-attach-point=\"colEndDefaultValuesLabel\">\r\n                        <label style=\"font-weight:bold\">{%= Sage.Utility.htmlEncode($.txtEndOfRange) %}</label>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point=\"rowRangeListItems\">\r\n                    <td></td>\r\n                    <td data-dojo-attach-point=\"colStartDefaultValues\">\r\n                        <div>\r\n                            <select dojotype=\"dijit.form.FilteringSelect\" data-dojo-attach-point=\"cboDiscreteStartRange\" style=\"width:90%\"></select>\r\n                            <span data-dojo-attach-point=\"lstErrorDiscreteStartRange\" class=\"display-none\" style=\"color:red\">*</span>\r\n                        </div>\r\n                    </td>\r\n                    <td colspan=\"2\"></td>\r\n                    <td data-dojo-attach-point=\"colEndDefaultValues\">\r\n                        <div>\r\n                            <select dojotype=\"dijit.form.FilteringSelect\" data-dojo-attach-point=\"cboEndRangeValues\" style=\"width:90%\"></select>\r\n                            <span data-dojo-attach-point=\"lstErrorEndRange\" class=\"display-none\" style=\"color:red\">*</span>\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point=\"rowStartEndOrValue\">\r\n                    <td colspan=\"3\">\r\n                        <label style=\"font-weight:bold\">{%= Sage.Utility.htmlEncode($.lblOrValue_Caption) %}</label><br />\r\n                    </td>\r\n                    <td colspan=\"2\" data-dojo-attach-point=\"rowToValueLabel\">\r\n                        <label style=\"font-weight:bold\">{%= Sage.Utility.htmlEncode($.lblOrValue_Caption) %}</label><br />\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point=\"rowCustomRangeValues\">\r\n                    <td></td>\r\n                    <td data-dojo-attach-point=\"rowDiscreteFromRange\">\r\n                        <div shouldpublishmarkdirty=\"false\" dojotype=\"Sage.UI.Controls.DateTimePicker\" data-dojo-attach-point=\"dtDiscreteFromRange\" displaydate=\"true\"\r\n                             displaytime=\"false\" required=\"true\" style=\"width:90%\">\r\n                        </div>\r\n                        <span data-dojo-attach-point=\"errorDiscreteValue\" class=\"display-none\" style=\"color:red\">*</span>\r\n                    </td>\r\n                    <td colspan=\"2\"></td>\r\n                    <td data-dojo-attach-point=\"rowToRange\">\r\n                        <div shouldpublishmarkdirty=\"false\" dojotype=\"Sage.UI.Controls.DateTimePicker\" data-dojo-attach-point=\"dtToRange\" displaydate=\"true\"\r\n                             displaytime=\"false\" required=\"true\" style=\"width:90%\">\r\n                        </div>\r\n                        <span data-dojo-attach-point=\"errorEndRange\" class=\"display-none\" style=\"color:red\">*</span>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point=\"rowIncludeRangeOptions\">\r\n                    <td></td>\r\n                    <td colspan=\"2\">\r\n                        <input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"chkIncludeFromRange\" />\r\n                        <label>{%= Sage.Utility.htmlEncode($.txtIncludeThisValue) %}</label>\r\n                    </td>\r\n                    <td></td>\r\n                    <td>\r\n                        <input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"chkIncludeToRange\" />\r\n                        <label>{%= Sage.Utility.htmlEncode($.txtIncludeThisValue) %}</label>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point=\"rowUpperLowerRangeOptions\">\r\n                    <td></td>\r\n                    <td colspan=\"2\">\r\n                        <input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"chkNoLowerValue\" dojoattachevent=\"onChange:_chkNoLowerValue_OnCheck\" />\r\n                        <label>{%= Sage.Utility.htmlEncode($.txtNoLowerValue) %}</label>\r\n                    </td>\r\n                    <td></td>\r\n                    <td>\r\n                        <input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"chkNoUpperValue\" dojoattachevent=\"onChange:_chkNoUpperValue_OnCheck\" />\r\n                        <label>{%= Sage.Utility.htmlEncode($.txtNoUpperValue) %}</label>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point=\"rowRangeValidationError\" class=\"display-none\">\r\n                    <td colspan=\"4\">\r\n                        <div>\r\n                            <label data-dojo-attach-point=\"lblRangeValidationError\" style=\"color:red\">{%= Sage.Utility.htmlEncode($.txtPleaseSpecifyValue) %}</label>\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point=\"rowAddRangeParameter\">\r\n                    <td colspan=\"4\"></td>\r\n                    <td>\r\n                        <div style=\"padding:5px\">\r\n                            <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"cmdAddRange\" dojoattachevent=\"onClick:_cmdAddRange_OnClick\"\r\n                                 style=\"float:right\">\r\n                                {%= Sage.Utility.htmlEncode($.txtAddRange) %}\r\n                            </div>\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n            <table style=\"width:100%\">\r\n                <colgroup>\r\n                    <col style=\"width:1%\" />\r\n                    <col style=\"width:44%\" />\r\n                    <col style=\"width:10%\" />\r\n                    <col style=\"width:44%\" />\r\n                </colgroup>\r\n                <tr>\r\n                    <td colspan=\"4\">\r\n                        <div data-dojo-attach-point=\"transferBoxContainer\" style=\"height:auto\"></div>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point=\"rowCustomValues\">\r\n                    <td></td>\r\n                    <td>\r\n                        <div>\r\n                            <label>{%= Sage.Utility.htmlEncode($.lblEnterValue_Caption) %}</label><br />\r\n                            <div shouldpublishmarkdirty=\"false\" dojotype=\"Sage.UI.Controls.DateTimePicker\" data-dojo-attach-point=\"dtCustomValue\" displaydate=\"true\"\r\n                                 displaytime=\"false\" required=\"true\" style=\"width:93%\">\r\n                            </div>\r\n                            <span data-dojo-attach-point=\"errorCustomDate\" class=\"display-none\" style=\"color:red\">*</span>\r\n                        </div>\r\n                    </td>\r\n                    <td>\r\n                        <br />\r\n                        <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"cmdAddCustom\" dojoattachevent=\"onClick:_cmdAddCustom_OnClick\">{%= Sage.Utility.htmlEncode(\">\") %}</div>\r\n                    </td>\r\n                    <td></td>\r\n                </tr>\r\n                <tr>\r\n                    <td></td>\r\n                    <td colspan=\"3\">\r\n                        <div data-dojo-attach-point=\"divValidationMessage\" style=\"color:red\">\r\n                            <span data-dojo-attach-point=\"spanValidationMessage\">&nbsp;</span>\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n        </div>\r\n    </div>\r\n    <div>\r\n        <br />\r\n    </div>\r\n</div>","url:Sage/MainView/ReportMgr/Crystal/templates/SimpleParameterEditor.html":"<div>\r\n    <div dojoattachpoint=\"promptParameterContainer\" class=\"crystalParameterContainer\">\r\n        <div dojoattachpoint=\"paramsHeaderContainer\"></div>\r\n        <table class=\"crystalTableContainer\">\r\n            <colgroup>\r\n                <col style=\"width:45%\" />\r\n                <col style=\"width:10%\" />\r\n                <col style=\"width:45%\" />\r\n            </colgroup>\r\n            <tr>\r\n                <td colspan=\"3\">\r\n                    <div dojoattachpoint=\"divMinMaxMessage\">\r\n                        <span dojoattachpoint=\"spanMinMaxMessage\">&nbsp;</span>\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n            <tr data-dojo-attach-point=\"rowParameterRange\">\r\n                <td colspan=\"3\">\r\n                    <div data-dojo-attach-point=\"parameterRangeWidgetContainer\" style=\"height:auto\"></div>\r\n                </td>\r\n            </tr>\r\n            <tr dojoattachpoint=\"rowSingleValue\" class=\"display-none\">\r\n                <td colspan=\"2\">\r\n                    <div class=\"textcontrol picklist\">\r\n                        <label>{%= Sage.Utility.htmlEncode($.lblSelectValue_Caption) %}</label><br />\r\n                        <select data-dojo-type=\"dijit.form.FilteringSelect\" dojoAttachPoint=\"cmbValues\"></select>\r\n                        <span dojoAttachPoint=\"errorEndRange\" class=\"display-none\" style=\"color:red\">*</span>\r\n                    </div>\r\n                </td>\r\n                <td colspan=\"2\"></td>\r\n            </tr>\r\n            <tr dojoAttachPoint=\"rowOrEnterValue\">\r\n                <td colspan=\"3\">\r\n                    <label style=\"font-weight:bold\">{%= Sage.Utility.htmlEncode($.lblOrValue_Caption) %}</label><br />\r\n                </td>\r\n            </tr>\r\n            <tr dojoattachpoint=\"rowCustomValues\" class=\"display-none\">\r\n                <td>\r\n                    <div>\r\n                        <label>{%= Sage.Utility.htmlEncode($.lblEnterValue_Caption) %}</label><br />\r\n                        <div dojoAttachPoint=\"customValueContainer\"></div>\r\n                        <span dojoAttachPoint=\"errorCustomValue\" class=\"display-none\" style=\"color:red\">*</span>\r\n                    </div>\r\n                </td>\r\n                <td colspan=\"2\"></td>\r\n            </tr>\r\n            <tr>\r\n                <td colspan=\"3\">\r\n                    <div dojoattachpoint=\"divValidationMessage\" style=\"color:red\">\r\n                        <span dojoattachpoint=\"spanValidationMessage\">&nbsp;</span>\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n        </table>\r\n    </div>\r\n    <div>\r\n        <br />\r\n    </div>\r\n</div>","url:Sage/MainView/ReportMgr/Crystal/templates/ParameterRangeWidget.html":"<table class=\"crystalTableContainer\">\r\n    <colgroup>\r\n        <col style=\"width:1%\" />\r\n        <col style=\"width:44%\" />\r\n        <col style=\"width:10%\" />\r\n        <col style=\"width:1%\" />\r\n        <col style=\"width:44%\" />\r\n    </colgroup>\r\n    <tr data-dojo-attach-point=\"rowStartEndRangeLabels\">\r\n        <td colspan=\"3\">\r\n            <label style=\"font-weight:bold\">${txtStartOfRange}</label>\r\n        </td>\r\n        <td colspan=\"2\">\r\n            <label style=\"font-weight:bold\">${txtEndOfRange}</label>\r\n        </td>\r\n    </tr>\r\n    <tr data-dojo-attach-point=\"rowStartEndRangeValues\">\r\n        <td></td>\r\n        <td>\r\n            <div dojotype=\"dijit.form.FilteringSelect\" data-dojo-attach-point=\"cboStartRangeValues\" style=\"width:90%\"></div>\r\n            <span data-dojo-attach-point=\"errorStartRange\" class=\"display-none\" style=\"color:red\">*</span>\r\n        </td>\r\n        <td colspan=\"2\"></td>\r\n        <td>\r\n            <select dojotype=\"dijit.form.FilteringSelect\" data-dojo-attach-point=\"cboEndRangeValues\" style=\"width:90%\"></select>\r\n            <span data-dojo-attach-point=\"errorEndRange\" class=\"display-none\" style=\"color:red\">*</span>\r\n        </td>\r\n    </tr>\r\n    <tr data-dojo-attach-point=\"rowStartEndOrValue\">\r\n        <td colspan=\"3\">\r\n            <label style=\"font-weight:bold\">${lblOrValue_Caption}</label><br />\r\n        </td>\r\n        <td colspan=\"2\">\r\n            <label style=\"font-weight:bold\">${lblOrValue_Caption}</label><br />\r\n        </td>\r\n    </tr>\r\n    <tr data-dojo-attach-point=\"rowStartEndCustomValue\">\r\n        <td></td>\r\n        <td>\r\n            <div>\r\n                <label>${lblEnterValue_Caption}</label><br />\r\n                <div data-dojo-attach-point=\"startCustomValueContainer\"></div>\r\n                <span data-dojo-attach-point=\"errorStartCustomValue\" class=\"display-none\" style=\"color:red\">*</span>\r\n        </td>\r\n        <td colspan=\"2\"></td>\r\n        <td>\r\n            <div>\r\n                <label style=\"padding-left:3px\">${lblEnterValue_Caption}</label><br />\r\n                <div data-dojo-attach-point=\"endCustomValueContainer\"></div>\r\n                <span data-dojo-attach-point=\"errorEndCustomValue\" class=\"display-none\" style=\"color:red\">*</span>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <td></td>\r\n        <td>\r\n            <input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"chkIncludeFromRange\" />\r\n            <label>${txtIncludeThisValue}</label>\r\n        </td>\r\n        <td colspan=\"2\"></td>\r\n        <td>\r\n            <input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"chkIncludeToRange\" />\r\n            <label>${txtIncludeThisValue}</label>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <td></td>\r\n        <td>\r\n            <input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"chkNoLowerValue\" dojoAttachEvent=\"onChange:_chkNoLowerValue_OnCheck\" />\r\n            <label>${txtNoLowerValue}</label>\r\n        </td>\r\n        <td colspan=\"2\"></td>\r\n        <td>\r\n            <input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"chkNoUpperValue\" dojoAttachEvent=\"onChange:_chkNoUpperValue_OnCheck\" />\r\n            <label>${txtNoUpperValue}</label>\r\n        </td>\r\n    </tr>\r\n</table>","url:Sage/MainView/ReportMgr/Crystal/templates/MultiSelectParameterEditor.html":"<div>\r\n    <div data-dojo-attach-point=\"promptParameterContainer\" class=\"crystalParameterContainer\">\r\n        <div data-dojo-attach-point=\"paramsHeaderContainer\"></div>\r\n        <div data-dojo-attach-point=\"divMinMaxMessage\">\r\n            <span data-dojo-attach-point=\"spanMinMaxMessage\">&nbsp;</span>\r\n        </div>\r\n        <div data-dojo-attach-point=\"parameterRangeDiv\" class=\"display-none\">\r\n            <div data-dojo-attach-point=\"parameterRangeWidgetContainer\" style=\"height:auto\"></div>\r\n            <div>\r\n                <label class=\"display-none\" data-dojo-attach-point=\"lblRangeValidationError\" style=\"color:red\">{%= Sage.Utility.htmlEncode($.txtPleaseSpecifyValue) %}</label>\r\n            </div>\r\n            <div style=\"padding:5px\">\r\n                <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"cmdAddRange\" dojoattachevent=\"onClick:_cmdAddRange_OnClick\"\r\n                     style=\"float:right\">\r\n                    {%= Sage.Utility.htmlEncode($.txtAddRange) %}\r\n                </div>\r\n            </div>\r\n            <br />\r\n        </div>\r\n        <div data-dojo-attach-point=\"divMultipleValues\">\r\n            <table style=\"width:100%\">\r\n                <colgroup>\r\n                    <col style=\"width:1%\" />\r\n                    <col style=\"width:44%\" />\r\n                    <col style=\"width:10%\" />\r\n                    <col style=\"width:44%\" />\r\n                </colgroup>\r\n                <tr>\r\n                    <td colspan=\"4\">\r\n                        <div data-dojo-attach-point=\"transferBoxContainer\" style=\"height:auto\"></div>\r\n                    </td>\r\n                </tr>\r\n                <tr data-dojo-attach-point=\"rowCustomValues\">\r\n                    <td></td>\r\n                    <td>\r\n                        <div>\r\n                            <label>{%= Sage.Utility.htmlEncode($.lblEnterValue_Caption) %}</label><br />\r\n                            <div data-dojo-attach-point=\"customValueContainer\"></div>\r\n                            <span data-dojo-attach-point=\"errorCustomDate\" class=\"display-none\" style=\"color:red\">*</span>\r\n                        </div>\r\n                    </td>\r\n                    <td>\r\n                        <br />\r\n                        <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"cmdAddCustom\" dojoattachevent=\"onClick:_cmdAddCustom_OnClick\">{%= Sage.Utility.htmlEncode(\">\") %}</div>\r\n                    </td>\r\n                    <td></td>\r\n                </tr>\r\n                <tr>\r\n                    <td></td>\r\n                    <td colspan=\"3\">\r\n                        <div data-dojo-attach-point=\"divValidationMessage\" style=\"color:red\">\r\n                            <span data-dojo-attach-point=\"spanValidationMessage\">&nbsp;</span>\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n        </div>\r\n    </div>\r\n    <div>\r\n        <br />\r\n    </div>\r\n</div>","url:Sage/MainView/ReportMgr/Crystal/templates/CrystalReportConditionsDialog.html":"<div>\r\n    <div data-dojo-type=\"dijit.Dialog\" title=\"{%= $._getDialogTitle() %}\" dojoattachpoint=\"_dialog\" dojoattachevent=\"onCancel:_dialog_OnCancel\" style=\"width: 600px;\">\r\n        <div data-dojo-type=\"dijit.form.Form\">\r\n            <div>\r\n                \r\n                <div>\r\n                    <table cellspacing=\"5\">\r\n                        <tr>\r\n                            <td>\r\n                                <label>{%= $._nlsResources.txtShowRecordsThatMatch %}</label>\r\n                            </td>\r\n                            <td>\r\n                                <select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"cmbConditionPresets\" sortByLabel=\"false\" dojoAttachEvent=\"onChange:_cmbConditionPresets_OnChange\" style=\"width:150px\" >\r\n                                </select>\r\n                            </td>\r\n                        </tr>                   \r\n                        <tr dojoAttachPoint=\"trConnector\" class=\"display-none\">\r\n                            <td>\r\n                                <label>{%= $._nlsResources.txtMatch %}</label>\r\n                            </td>\r\n                            <td>\r\n                                <select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"cmbConnector\" style=\"width:150px\" >\r\n                                    <option value=\"Or\">{%= $._nlsResources.txtAny %}</option>\r\n                                    <option value=\"And\">{%= $._nlsResources.txtAll %}</option>\r\n                                </select>\r\n                                <label>&nbsp;{%= $._nlsResources.txtOfTheFollowingConditions %}</label>\r\n                            </td>\r\n                        </tr>\r\n                    </table>\r\n                </div>\r\n\r\n                <div dojoType=\"dijit.Toolbar\" dojoAttachPoint=\"tbConditions\" region=\"top\" splitter=\"false\" class=\"right-tools display-none\">\r\n                    <span dojoType=\"Sage.UI.ImageButton\" icon=\"{%= $._btnPlusIconPath %}\" title=\"{%= $._nlsResources.btnAddCondition_Caption %}\" dojoAttachEvent=\"onClick:_btnAddCondition_Click\" dojoAttachPoint=\"btnAddCondition\"></span>\r\n                </div>                                  \r\n                \r\n                <div id=\"divGrdCrystalConditions\" style=\"width:100%; height:200px; overflow:auto\" >            \r\n                    <table data-dojo-type=\"dojox.grid.DataGrid\" dojoAttachPoint=\"grdCrystalConditions\" id=\"grdCrystalConditions\" class=\"display-none\" formatterScope=\"Sage.MainView.ReportMgr.Crystal.CrystalReportsFormatter\">\r\n                        <thead>\r\n                            <th field=\"conditionType\" width=\"60px\" formatter=\"formatConditionType\" >{%= $._nlsResources.grdCrystalConditions_ConditionType_Caption %}</th>\r\n                            <th field=\"table\" width=\"80px\">{%= $._nlsResources.grdCrystalConditions_TableName_Caption %}</th>\r\n                            <th field=\"field\" width=\"80px\">{%= $._nlsResources.grdCrystalConditions_FieldName_Caption %}</th>\r\n                            <th field=\"operator\" formatter=\"formatOperator\" width=\"50px\">{%= $._nlsResources.grdCrystalConditions_Operator_Caption %}</th>\r\n                            <th field=\"_item\" formatter=\"formatConditionValue\" width=\"125px\">{%= $._nlsResources.grdCrystalConditions_Value_Caption %}</th>\r\n                            <th field=\"value\" formatter=\"formatEditCondition\" width=\"40px\">&nbsp;</th>\r\n                            <th field=\"_item\" formatter=\"formatDeleteCondition\" width=\"40px\">&nbsp;</th>\r\n                        </thead>\r\n                    </table>\r\n                </div>               \r\n\r\n            </div>\r\n\r\n            <div align=\"right\" style=\"margin-top:10px\">\r\n                <div data-dojo-type=\"dijit.form.Button\"dojoAttachPoint=\"cmdBack\" dojoAttachEvent=\"onClick:_cmdBack_OnClick\" style=\"display:none\">{%= Sage.Utility.htmlEncode($._nlsResources.cmdBack_Caption) %}</div>\r\n                <div data-dojo-type=\"dijit.form.Button\"dojoAttachPoint=\"cmdNext\" dojoAttachEvent=\"onClick:_cmdNext_OnClick\">{%= Sage.Utility.htmlEncode($._nlsResources.cmdNext_Caption) %}</div>\r\n                <div data-dojo-type=\"dijit.form.Button\" dojoAttachPoint=\"cmdCancel\" dojoAttachEvent=\"onClick:_cmdCancel_OnClick\" style=\"margin-left:5px;\">{%= Sage.Utility.htmlEncode($._nlsResources.cmdCancel_Caption) %}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","url:Sage/MainView/ReportMgr/Crystal/templates/CrystalReportConditionEditor.html":"[\r\n    '<div>',\r\n        '<div data-dojo-type=\"dijit.Dialog\" title=\"{%= $._nlsResources.dlgCrystalReportConditionDetails_Title %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onCancel:_dialog_OnCancel, onShow:_dialog_OnShow\" style=\"width: 300px\">',\r\n            '<div data-dojo-type=\"dijit.form.Form\" style=\"overflow-x:hidden\">',\r\n                \r\n                '<table cellspacing=\"10\">',\r\n                    \r\n                    '<tr>',\r\n                        '<td>',\r\n                            '<label>{%= $._nlsResources.cmbConditionType_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',                            \r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"cmbConditionType\" sortByLabel=\"false\" dojoAttachEvent=\"onChange:_cmbConditionType_OnChange\" style=\"width:150px\" >',\r\n                            '</select>',\r\n                        '</td>',\r\n                    '</tr>',\r\n\r\n                    '<tr dojoAttachPoint=\"trCurrentUser\">',\r\n                        '<td>',\r\n                            '&nbsp;',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<input data-dojo-type=\"dijit.form.CheckBox\" dojoAttachPoint=\"chkCurrentUser\" dojoAttachEvent=\"onChange:_chkCurrentUser_OnChange\" /> <label>{%= $._nlsResources.chkCurrentUser_Caption %}</label>',\r\n                        '</td>',                        \r\n                    '</tr>',\r\n                    \r\n                    '<tr dojoAttachPoint=\"trUser\">',\r\n                        '<td>',\r\n                            '<label>{%= $._nlsResources.lkpUser_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $._nlsResources.lkpUser_Caption %}\" dojoAttachPoint=\"contentPaneLkpUser\" class=\"remove-padding lookup-container\" style=\"width:300px; padding: 0px !important;\"></div>',                            \r\n                        '</td>',                        \r\n                    '</tr>',\r\n\r\n                    '<tr dojoAttachPoint=\"trGroup\">',\r\n                        '<td>',\r\n                            '<label>{%= $._nlsResources.lkpGroup_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $._nlsResources.lkpGroup_Caption %}\" dojoAttachPoint=\"contentPaneLkpGroup\" class=\"remove-padding lookup-container\" style=\"width:300px; padding: 0px !important;\"></div>',                            \r\n                        '</td>',\r\n                    '</tr>',                                                       \r\n\r\n\r\n                    '<tr dojoAttachPoint=\"trDateRange\">',\r\n                        '<td>',\r\n                            '<label>{%= $._nlsResources.cmbDateRange_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"cmbDateRange\" dojoAttachEvent=\"onChange:_cmbDateRange_OnChange\" style=\"width:150px\" >',\r\n                                '<option value=\"DateRange\">{%= $._nlsResources.cmbDateRange_SpecificDates_Caption %}</option>',\r\n                                '<option value=\"ThisWeek\">{%= $._nlsResources.cmbDateRange_ThisWeek_Caption %}</option>',\r\n                                '<option value=\"ThisMonth\">{%= $._nlsResources.cmbDateRange_ThisMonth_Caption %}</option>',\r\n                                '<option value=\"ThisQuarter\">{%= $._nlsResources.cmbDateRange_ThisQuarter_Caption %}</option>',\r\n                                '<option value=\"ThisYear\">{%= $._nlsResources.cmbDateRange_ThisYear_Caption %}</option>',\r\n                                '<option value=\"LastWeek\">{%= $._nlsResources.cmbDateRange_LastWeek_Caption %}</option>',\r\n                                '<option value=\"LastMonth\">{%= $._nlsResources.cmbDateRange_LastMonth_Caption %}</option>',\r\n                                '<option value=\"LastQuarter\">{%= $._nlsResources.cmbDateRange_LastQuarter_Caption %}</option>',\r\n                                '<option value=\"LastYear\">{%= $._nlsResources.cmbDateRange_LastYear_Caption %}</option>',\r\n                                '<option value=\"MonthToDate\">{%= $._nlsResources.cmbDateRange_MonthToDate_Caption %}</option>',\r\n                                '<option value=\"QuarterToDate\">{%= $._nlsResources.cmbDateRange_QuarterToDate_Caption %}</option>',\r\n                                '<option value=\"YearToDate\">{%= $._nlsResources.cmbDateRange_YearToDate_Caption %}</option>',\r\n                            '</select>',\r\n                        '</td>',\r\n                    '</tr>',\r\n                    '<tr dojoAttachPoint=\"trFromDate\" >',\r\n                        '<td>',\r\n                            '<label>{%= $._nlsResources.dtFromDate_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DateTimePicker\" dojoAttachPoint=\"dtFromDate\" displayDate=\"true\" displayTime=\"false\" label=\"{%= $._nlsResources.dtFromDate_Caption %}\" style=\"width:150px\"></div>',\r\n                        '</td>',\r\n                    '</tr>',\r\n                    '<tr dojoAttachPoint=\"trToDate\" >',\r\n                        '<td>',\r\n                            '<label>{%= $._nlsResources.dtToDate_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DateTimePicker\" dojoAttachPoint=\"dtToDate\" displayDate=\"true\" displayTime=\"false\" label=\"{%= $._nlsResources.dtToDate_Caption %}\" style=\"width:150px\"></div>',\r\n                        '</td>',\r\n                    '</tr>',\r\n\r\n\r\n\r\n                    '<tr dojoAttachPoint=\"trTable\">',\r\n                        '<td>',\r\n                            '<label>{%= $._nlsResources.cmbTable_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"cmbTables\" style=\"width:150px\" data-dojo-props=\"maxHeight:100\" dojoAttachEvent=\"onChange:_cmbTables_OnChange\" >',\r\n                            '</select>',\r\n                        '</td>',\r\n                    '</tr>',\r\n\r\n\r\n                    '<tr dojoAttachPoint=\"trField\">',\r\n                        '<td>',\r\n                            '<label>{%= $._nlsResources.cmbField_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"cmbFields\" style=\"width:150px\" data-dojo-props=\"maxHeight:100\" dojoAttachEvent=\"onChange:_cmbFields_OnChange\" >',\r\n                            '</select>',\r\n                        '</td>',\r\n                    '</tr>',\r\n\r\n                    '<tr dojoAttachPoint=\"trOperator\">',\r\n                        '<td>',\r\n                            '<label>{%= $._nlsResources.cmbOperator_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"cmbOperators\" sortByLabel=\"false\" style=\"width:150px\" dojoAttachEvent=\"onChange:_cmbOperators_OnChange\" >',\r\n                            '</select>',\r\n                        '</td>',\r\n                    '</tr>',\r\n\r\n                    '<tr dojoAttachPoint=\"trStringValue1\">',\r\n                        '<td>',\r\n                            '<label>{%= $._nlsResources.txtValue_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<input type=\"text\" dojoAttachPoint=\"txtStringValue1\" required=\"false\" dojoType=\"dijit.form.TextBox\" style=\"width:150px\" />',\r\n                        '</td>',\r\n                    '</tr>',  \r\n\r\n                    '<tr dojoAttachPoint=\"trStringValue2\">',\r\n                        '<td>',\r\n                            '<label>{%= $._nlsResources.txtValue2_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<input type=\"text\" dojoAttachPoint=\"txtStringValue2\" required=\"false\" dojoType=\"dijit.form.TextBox\" style=\"width:150px\" />',\r\n                        '</td>',\r\n                    '</tr>',  \r\n\r\n                    '<tr dojoAttachPoint=\"trNumericValue1\">',\r\n                        '<td>',\r\n                            '<label dojoAttachPoint=\"lblNumericValue1\">{%= $._nlsResources.txtValue_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<input type=\"text\" dojoAttachPoint=\"txtNumericValue1\" required=\"false\" dojoType=\"Sage.UI.Controls.Numeric\" style=\"width:150px\" />',\r\n                        '</td>',\r\n                    '</tr>',  \r\n\r\n                    '<tr dojoAttachPoint=\"trNumericValue2\">',\r\n                        '<td>',\r\n                            '<label>{%= $._nlsResources.txtNumericValueTo_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<input type=\"text\" dojoAttachPoint=\"txtNumericValue2\" required=\"false\" dojoType=\"Sage.UI.Controls.Numeric\" style=\"width:150px\" />',\r\n                        '</td>',\r\n                    '</tr>',  \r\n\r\n                    '<tr dojoAttachPoint=\"trDateValue1\" >',\r\n                        '<td>',\r\n                            '<label>{%= $._nlsResources.dtFromDate_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DateTimePicker\" dojoAttachPoint=\"dtDateValue1\" displayDate=\"true\" displayTime=\"true\" label=\"{%= $._nlsResources.dtFromDate_Caption %}\" style=\"width:150px\"></div>',\r\n                        '</td>',\r\n                    '</tr>',\r\n                    '<tr dojoAttachPoint=\"trDateValue2\" >',\r\n                        '<td>',\r\n                            '<label>{%= $._nlsResources.dtToDate_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DateTimePicker\" dojoAttachPoint=\"dtDateValue2\" displayDate=\"true\" displayTime=\"true\" label=\"{%= $._nlsResources.dtToDate_Caption %}\" style=\"width:150px\"></div>',\r\n                        '</td>',\r\n                    '</tr>',\r\n\r\n                    \r\n                '</table>',\r\n                \r\n                '<div align=\"right\" style=\"margin-top:10px\">',\r\n                    '<div data-dojo-type=\"dijit.form.Button\"dojoAttachPoint=\"cmdOK\" dojoAttachEvent=\"onClick:_cmdOK_OnClick\">{%= $._nlsResources.cmdOK_Caption %}</div>',\r\n                    '<div data-dojo-type=\"dijit.form.Button\" dojoAttachPoint=\"cmdCancel\" dojoAttachEvent=\"onClick:_cmdCancel_OnClick\" style=\"margin-left:5px;\">{%= $._nlsResources.cmdCancel_Caption %}</div>',\r\n                '</div>',\r\n            '</div>',\r\n        '</div>',\r\n    '</div>'\r\n]","url:Sage/MainView/ReportMgr/Common/templates/ExportOptionsDialog.html":"<div>\r\n    <div data-dojo-type=\"dijit.Dialog\" title=\"{%= $._getDialogTitle() %}\" dojoattachpoint=\"_dialog\" dojoattachevent=\"onCancel:_dialog_OnCancel\" style=\"width: 600px\">\r\n        <div data-dojo-type=\"dijit.form.Form\">\r\n            <div style=\"overflow:auto\">\r\n                <div dojoattachpoint=\"containerDiv\" id=\"containerDiv\" style=\"height:350px; overflow:auto\">\r\n                    <table cellspacing=\"10\">\r\n                        <tr dojoAttachpoint=\"trScheduleDescription\">\r\n                            <td>\r\n                                <label>{%= $._nlsResources.txtScheduleDescription_Caption %}:</label>\r\n                            </td>\r\n                            <td>\r\n                                <input type=\"text\" dojoAttachPoint=\"txtScheduleDescription\" required=\"true\" dojoType=\"dijit.form.TextBox\" style=\"width:300px\" />\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>\r\n                                <label>{%= $._nlsResources.txtOutputFormat_Caption %}:</label>\r\n                            </td>\r\n                            <td>\r\n                                <select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"cmbOutputFormat\" sortByLabel=\"false\" style=\"width:300px\" >\r\n                                </select>\r\n                            </td>\r\n                        </tr>\r\n                        <tr dojoAttachpoint=\"trRunAsUserId\">\r\n                            <td>\r\n                                <label>{%= $._nlsResources.txtRunAs_Caption %}:</label>\r\n                            </td>\r\n                            <td>\r\n                                <div dojoType=\"dijit.layout.ContentPane\" label=\"{%= $._nlsResources.txtRunAs_Caption %}\" dojoAttachPoint=\"container_lkpRunAsUserId\" style=\"padding: 0 !important;\"></div>                            \r\n                            </td>\r\n                        </tr>\r\n                        <tr dojoAttachpoint=\"trSchedulingWidget\">                            \r\n                            <td colspan=\"2\">\r\n                                <div data-dojo-type=\"Sage.UI.JobSchedulingWidget\" id=\"jobSchedulingWidget\" data-dojo-attach-point=\"jobSchedulingWidget\"></div>\r\n                            </td>\r\n                        </tr>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n            <div align=\"right\" style=\"margin-top:10px\">\r\n                <div data-dojo-type=\"dijit.form.Button\"dojoAttachPoint=\"cmdBack\" dojoAttachEvent=\"onClick:_cmdBack_OnClick\" >{%= Sage.Utility.htmlEncode($._nlsResources.cmdBack_Caption) %}</div>\r\n                <div data-dojo-type=\"dijit.form.Button\"dojoAttachPoint=\"cmdNext\" dojoAttachEvent=\"onClick:_cmdNext_OnClick\">{%= Sage.Utility.htmlEncode($._nlsResources.cmdNext_Caption) %}</div>\r\n                <div data-dojo-type=\"dijit.form.Button\" dojoAttachPoint=\"cmdCancel\" dojoAttachEvent=\"onClick:_cmdCancel_OnClick\" style=\"margin-left:5px;\">{%= Sage.Utility.htmlEncode($._nlsResources.cmdCancel_Caption) %}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","url:Sage/UI/templates/JobSchedulingWidget.html":"<div>\r\n    <div dojoAttachPoint=\"divJobSchedulingWidget\">\r\n        <table>\r\n            <tr>\r\n                <td>\r\n                    <label>${lblCreateSchedule}:</label>\r\n                </td>\r\n            </tr>\r\n            <tr style=\"padding-left: 10px\">\r\n                <td>\r\n                    <label style=\"padding-left: 10px\">${lblEveryText}</label>&nbsp;\r\n                    <div dojoAttachPoint=\"divMinutesHours\" class=\"display-none\" style=\"display: -moz-inline-box; display: inline-block\">\r\n                        <select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"cboMinutesHours\"></select>\r\n                    </div>\r\n                    <select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"cboFrequency\" dojoAttachEvent=\"onChange:_onFrequencyChange\">\r\n                        <option value=\"minutes\">${lblMinutesFrequency}</option>\r\n                        <option value=\"hourly\">${lblHourlyFrequency}</option>\r\n                        <option value=\"daily\">${lblDailyFrequency}</option>\r\n                        <option value=\"weekday\">${lblWeekDayFrequency}</option>\r\n                        <option value=\"weekly\">${lblWeeklyFrequency}</option>\r\n                        <option value=\"monthly\">${lblMonthlyFrequency}</option>\r\n                        <option value=\"yearly\" selected=\"selected\" disabled=\"disabled\">${lblYearlyFrequency}</option>\r\n                    </select>\r\n                    <label dojoAttachPoint=\"lblOnText\" class=\"display-none\">${lblOnText}</label>&nbsp;\r\n                    <label dojoAttachPoint=\"lblOnTheText\" class=\"display-none\">${lblOnTheText}</label>&nbsp;\r\n                    <div dojoAttachPoint=\"divMonthDay\" style=\"display: -moz-inline-box; display: inline-block\" class=\"display-none\">\r\n                        <select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"cboMonthDay\">\r\n                            <option value=\"1\" selected=\"selected\">${lblFirstDay}</option>\r\n                            <option value=\"2\">${lblSecondDay}</option>\r\n                            <option value=\"3\">${lblThirdDay}</option>\r\n                            <option value=\"4\">${lblFourthDay}</option>\r\n                        </select>&nbsp;\r\n                    </div>\r\n                    <div dojoAttachPoint=\"divDay\" style=\"display: -moz-inline-box; display: inline-block\" class=\"display-none\">\r\n                        <select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"cboDay\">\r\n                            <option value=\"SUN\">${lblSunday}</option>\r\n                            <option value=\"MON\" selected=\"selected\">${lblMonday}</option>\r\n                            <option value=\"TUE\">${lblTuesday}</option>\r\n                            <option value=\"WED\">${lblWednesday}</option>\r\n                            <option value=\"THU\">${lblThursday}</option>\r\n                            <option value=\"FRI\">${lblFriday}</option>\r\n                            <option value=\"SAT\">${lblSaturday}</option>\r\n                        </select>&nbsp;\r\n                    </div>\r\n                    <label dojoAttachPoint=\"lblAtText\">${lblAtText}</label>&nbsp;&nbsp;\r\n                    <div dojoAttachPoint=\"divMinutesPastHour\" class=\"display-none\" style=\"display: -moz-inline-box; display: inline-block\">\r\n                        <select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"cboMinutesPastHour\"></select>&nbsp;\r\n                    </div>\r\n                    <label dojoAttachPoint=\"lblMinutesPastHour\" class=\"display-none\">${lblMinutesPastHour}</label>&nbsp;\r\n                    <div dojoAttachPoint=\"divRunAtTime\" style=\"display: -moz-inline-box; display: inline-block\">\r\n                        <div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DateTimePicker\" dojoAttachPoint=\"dtRunAtTime\" displayDate=\"false\" displayTime=\"true\" label=\"${lblAtText}\" required=\"true\"></div>\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n            <tr dojoAttachPoint=\"rowRunFromDate\">\r\n                <td>\r\n                    <label style=\"padding-left: 10px\">${lblFromTimeText}</label>&nbsp;\r\n                    <div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DateTimePicker\" dojoAttachPoint=\"dtRunFromDate\" displayDate=\"true\" label=\"${lblFromTimeText}\" style=\"width: 180px\"></div>&nbsp;\r\n                    <label>${lblToTimeText}</label>&nbsp;\r\n                    <div shouldPublishMarkDirty=\"false\" dojoType=\"Sage.UI.Controls.DateTimePicker\" dojoAttachPoint=\"dtRunToDate\" displayDate=\"true\" label=\"${lblToTimeText}\" style=\"width: 180px\"></div>&nbsp;\r\n                </td>\r\n            </tr>\r\n            <tr dojoAttachPoint=\"rowCronExpression\">\r\n                <td>\r\n                    <label style=\"padding-left: 10px\">${lblCronExpressionText}</label>&nbsp;\r\n                    <div data-dojo-type=\"dijit.form.TextBox\" dojoAttachPoint=\"txtCronExpression\" style=\"width: 375px\"></div>&nbsp\r\n                </td>\r\n            </tr>\r\n        </table>\r\n    </div>\r\n</div>","url:Sage/templates/MenuItem.html":"<tr class=\"dijitReset\" data-dojo-attach-point=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<span role=\"presentation\" class=\"dijitInline dijitIcon dijitMenuItemIcon\" data-dojo-attach-point=\"iconNode\"></span>\n        <div class=\"dijitIcon dijitMenuItemIcon Global_Images icon16x16 ${imageClass}\" data-dojo-attach-point=\"iconNodeSprite\"></div>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode,textDirNode\"\n\t\trole=\"presentation\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">\n\t\t<span data-dojo-attach-point=\"arrowWrapper\" style=\"visibility: hidden\">\n\t\t\t<span class=\"dijitInline dijitIcon dijitMenuExpand\"></span>\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</span>\n\t</td>\n</tr>\n","url:Sage/templates/MenuBarItem.html":"<div class=\"dijitReset dijitInline dijitMenuItem dijitMenuItemLabel\" data-dojo-attach-point=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\">\r\n    <span>\r\n        <img src=\"${_blankGif}\" class=\"dijitIcon dijitMenuItemIcon\" data-dojo-attach-point=\"iconNode\"/>\r\n        <div class=\"dijitIcon dijitMenuItemIcon Global_Images icon16x16 ${imageClass}\" data-dojo-attach-point=\"iconNodeSprite\"></div>\r\n        <span data-dojo-attach-point=\"containerNode,textDirNode\"></span>\n    </span>\n</div>\n","url:Sage/templates/GridMenuItem.html":"<tr class=\"dijitReset\" data-dojo-attach-point=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<span role=\"presentation\" class=\"dijitInline dijitIcon dijitMenuItemIcon\" data-dojo-attach-point=\"iconNode\"></span>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode,textDirNode\"\n\t\trole=\"presentation\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">\n\t\t<span data-dojo-attach-point=\"arrowWrapper\" style=\"visibility: hidden\">\n\t\t\t<span class=\"dijitInline dijitIcon dijitMenuExpand\"></span>\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</span>\n\t</td>\n</tr>\n","url:Sage/MainView/Contact/templates/ContactDetailSummary.html":"[\r\n'<table style=\"width:100%\">',\r\n    '<thead>',\r\n        '<tr>',\r\n            '<th>',\r\n                '<div class=\"SummaryTitle\">',\r\n                    '<a href=\"Contact.aspx?entityid={%= $.templateData.id %}\">{%= Sage.Utility.htmlEncode($.templateData.name) %}</a>',\r\n                '</div>',\r\n            '</th>',\r\n        '</tr>',\r\n        '<tr>',\r\n            '<td>',\r\n                '<span>{%= $.templateData.address_address1 %}</span>',\r\n            '</td>',\r\n        '</tr>',\r\n        '<tr>',\r\n            '<td>',\r\n                '<span>{%= $.templateData.address_citystatezip %}</span>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</thead>',\r\n    '<tbody>',\r\n        '<tr>',\r\n            '<td class=\"DataColumn\">',\r\n                '<table>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svAccount_Caption || \"Account:\" %}</td>',\r\n                        '<td class=\"DataItem\"><a href=\"Account.aspx?entityid={{%= $.templateData.account_id %}}\">{%= Sage.Utility.htmlEncode($.templateData.accountname) %}</a></td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svTitle_Caption || \"Title:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.title %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svWorkPhone_Caption || \"Work Phone:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.workphone) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svHomePhone_Caption || \"Home Phone:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.homephone) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svMobilePhone_Caption || \"Mobile Phone:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.mobilephone) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svEmail_Caption || \"Email:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.email %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svWebAddress_Caption || \"Web:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.webaddress %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svType_Caption || \"Type:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.type %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svAccMgr_Caption || \"Acct. Mgr.:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.accountmanager_userinfo_firstname %} {%= $.templateData.accountmanager_userinfo_lastname %}</td>',\r\n                    '</tr>',\r\n                '</table>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</tbody>',\r\n'</table>',\r\n'<br/>',\r\n'<div style=\"padding-right:20px; text-align:right\">',\r\n    '<asp:Panel runat=\"server\" ID=\"pnlCancel\" CssClass=\"controlslist qfActionContainer\">',\r\n        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Close\" onClick=\"javascript:contactSearchForDuplicates._close();\">{%= $.closeText %}</div>',\r\n    '</asp:Panel>',\r\n'</div>'\r\n] ","url:Sage/MainView/Lead/templates/LeadDetailSummary.html":"[\r\n'<table style=\"width:100%\">',\r\n    '<thead>',\r\n        '<tr>',\r\n            '<th>',\r\n                '<div class=\"SummaryTitle\">',\r\n                    '<a href=\"Lead.aspx?entityid={%= $.templateData.id %}\">{%= Sage.Utility.htmlEncode($.templateData.name) %}</a>',\r\n                '</div>',\r\n            '</th>',\r\n        '</tr>',\r\n        '<tr>',\r\n            '<td>',\r\n                '<span>{%= $.templateData.address_address1 %}</span>',\r\n            '</td>',\r\n        '</tr>',\r\n        '<tr>',\r\n            '<td>',\r\n                '<span>{%= $.templateData.address_citystatezip %}</span>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</thead>',\r\n    '<tbody>',\r\n        '<tr>',\r\n            '<td class=\"DataColumn\">',\r\n                '<table>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svCompany_Caption || \"Company:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.accountname %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svTitle_Caption || \"Title:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.title %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svWorkPhone_Caption || \"Work Phone:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.workphone) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svHomePhone_Caption || \"Home Phone:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.homephone) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svMobilePhone_Caption || \"Mobile Phone:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.mobilephone) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svEmail_Caption || \"Email:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.email %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svWebAddress_Caption || \"Web:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.webaddress %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svType_Caption || \"Type:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.type %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svAccMgr_Caption || \"Acct. Mgr.:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.accountmanager_userinfo_firstname %} {%= $.templateData.accountmanager_userinfo_lastname %}</td>',\r\n                    '</tr>',\r\n                '</table>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</tbody>',\r\n'</table>',\r\n'<br/>',\r\n'<div style=\"padding-right:20px; text-align:right\">',\r\n    '<asp:Panel runat=\"server\" ID=\"pnlCancel\" CssClass=\"controlslist qfActionContainer\">',\r\n        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Close\" onClick=\"javascript:contactSearchForDuplicates._close();\">{%= $.closeText %}</div>',\r\n    '</asp:Panel>',\r\n'</div>'\r\n]","url:Sage/MainView/Account/templates/AccountDetailSummary.html":"[\r\n'<table style=\"width:100%\">',\r\n    '<thead>',\r\n        '<tr>',\r\n            '<th>',\r\n                '<div class=\"SummaryTitle\">',\r\n                    '<a href=\"Account.aspx?entityid={%= $.templateData.id %}\">{%= Sage.Utility.htmlEncode($.templateData.name) %}</a>',\r\n                '</div>',\r\n            '</th>',\r\n        '</tr>',\r\n        '<tr>',\r\n            '<td>',\r\n                '<span>{%= $.templateData.address_address1 %}</span>',\r\n            '</td>',\r\n        '</tr>',\r\n        '<tr>',\r\n            '<td>',\r\n                '<span>{%= $.templateData.address_citystatezip %}</span>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</thead>',\r\n    '<tbody>',\r\n        '<tr>',\r\n            '<td class=\"DataColumn\">',\r\n                '<table>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svType_Caption || \"Type:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.type %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svSubType_Caption || \"Sub Type:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.subtype %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svSubType_Caption || \"Status:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.status %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svDivision_Caption || \"Division:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.division %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svIndustry_Caption || \"Industry:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.industry) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svMainPhone_Caption || \"Main phone:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.mainphone) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svTollFree_Caption || \"Toll free:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= Sage.Format.phone($.templateData.tollfree) %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svEmail_Caption || \"Email:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.email %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svWebAddress_Caption || \"Web:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.webaddress %}</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td class=\"SummaryCaption\">{%= $.svAccMgr_Caption || \"Acct. Mgr.:\" %}</td>',\r\n                        '<td class=\"DataItem\">{%= $.templateData.accountmanager_userinfo_firstname %} {%= $.templateData.accountmanager_userinfo_lastname %}</td>',\r\n                    '</tr>',\r\n                '</table>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</tbody>',\r\n'</table>',\r\n'<br/>',\r\n'<div style=\"padding-right:20px; text-align:right\">',\r\n    '<asp:Panel runat=\"server\" ID=\"pnlCancel\" CssClass=\"controlslist qfActionContainer\">',\r\n        '<div dojoType=\"dijit.form.Button\" id=\"{%= $.id %}_btn_Close\" onClick=\"javascript:contactSearchForDuplicates._close();\">{%= $.closeText %}</div>',\r\n    '</asp:Panel>',\r\n'</div>'\r\n]","url:Sage/MainView/Contact/templates/ContactUserAssociationEditor.html":"[\r\n'<div>',\r\n    '<div data-dojo-type=\"dijit.Dialog\" title=\"{%= $.dialogTitleText %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onCancel:_close\">',\r\n        '<div data-dojo-type=\"dijit.form.Form\" id=\"{%= $.id %}_frmContactUserAssociation\">',\r\n            '<table cellspacing=\"20\">',\r\n                '<tr>',\r\n                    '<td colspan=\"2\">',\r\n                        '<label>{%= $.associateContactText %}</label>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<div>',\r\n                            '<label>{%= $.user_Caption %}</label>',\r\n                        '</div>',\r\n                    '</td>',\r\n                    '<td>',\r\n                         '<div dojoAttachPoint=\"divUserLookupContainer\">',\r\n                            '<div data-dojo-type=\"dijit.layout.ContentPane\" label=\"{%= $.update_To_Caption %}\" id=\"{%= $.id %}_luAccountMgr\" dojoAttachPoint=\"userLookup_Container\" allowClearingResult=\"false\" class=\"removePadding\"></div>',\r\n                        '</div>',\r\n                    '</td>',\r\n                '</tr>',            \r\n            \r\n            '</table>',\r\n            '<div class=\"button-bar\" align=\"right\">',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id%}_btn_OK\" name=\"btn_OK\" dojoAttachPoint=\"btn_OK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.btnOK_Caption %}</div>',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id%}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_close\">{%= $.btnCancel_Caption %}</div>',\r\n            '</div>',\r\n        '</div>',\r\n    '</div>',\r\n'</div>'\r\n]\r\n","url:Sage/MainView/IntegrationContract/templates/MatchingOptionsConfig.html":"[\r\n'<div>',\r\n    '<div id=\"{%= $.id %}-Context-container\">',\r\n        '<label class=\"wizardsectiontitle boldText padBottom\">{%= $.matchingHeader %}',\r\n            '<span class=\"boldtext\">{%= $.resourceDisplayName %}</span>',\r\n        '</label>',\r\n        '<br /><br />',\r\n    '</div>',\r\n    '<div>',\r\n        '<label class=\"wizardsectiontext padBottom\" style=\"padding-left:20px\">{%= $.matchingDescription %}</label>',\r\n    '</div>',\r\n    '<div>',\r\n        '<br />',\r\n        '<label class=\"slxlabel\" style=\"padding-left:20px\">{%= $.propertyText %}</label>',\r\n        '<label class=\"slxlabel\" style=\"padding-left:240px\">{%= $.operatorText %}</label>',\r\n    '</div>',\r\n    '<div id=\"{%= $.id %}-Loading-container\">',\r\n        '<br />',\r\n        '<label class=\"wizardsectiontitle boldText padBottom\" style=\"padding-left:20px\">{%= $.loadingText %}</label>',\r\n    '</div>',\r\n//conditions\r\n    '<div style=\"padding:10px;\" id=\"{%= $.id %}-Condition-container\"></div>',\r\n//buttons\r\n    '<div class=\"button-bar alignright\">',\r\n        '<button dojoType=\"dijit.form.Button\" type=\"submit\" onClick=\"dijit.byId(\\'{%= $.id %}-Dialog\\').matchingObject.updateMatchProperties();\">',\r\n            '{%= $.okText %}',\r\n        '</button>',\r\n        '<button dojoType=\"dijit.form.Button\" type=\"button\" onClick=\"dijit.byId(\\'{%= $.id %}-Dialog\\').destroy();\">',\r\n            '{%= $.cancelText %}',\r\n        '</button>',\r\n    '</div>',\r\n'</div>'\r\n]","url:Sage/MainView/IntegrationContract/templates/AdvancedSearchOptions.html":"[\r\n'<div>',\r\n    '<div>',\r\n        '<label class=\"wizardsectiontitle boldText padBottom\">{%= $.searchOptionsHeader %}',\r\n            '<span class=\"boldtext\">{%= $.configOptions.targetAccount %}</span>',\r\n        '</label>',\r\n        '<br /><br />',\r\n    '</div>',\r\n    '<div>',\r\n        '<label class=\"wizardsectiontext padBottom\" style=\"padding-left:20px\">{%= $.searchOptionsText %}</label>',\r\n    '</div>',\r\n    '<div>',\r\n        '<br />',\r\n        '<label class=\"slxlabel\" style=\"padding-left:20px\">{%= $.propertyText %}</label>',\r\n        '<label class=\"slxlabel\" style=\"padding-left:136px\">{%= $.operatorText %}</label>',\r\n        '<label class=\"slxlabel\" style=\"padding-left:118px\">{%= $.searchText %}</label>',\r\n    '</div>',\r\n    '<div dojoAttachPoint=\"conditionContainer\" style=\"padding:10px;\" id=\"{%= $.id %}-Condition-container\"></div>',\r\n    '<div class=\"button-bar alignright\">',\r\n        '<button dojoType=\"dijit.form.Button\" type=\"submit\" onClick=\"dijit.byId(\\'{%= $.id %}-Dialog\\').refineSearchObject.getSelections();\">',\r\n            '{%= $.okText %}',\r\n        '</button>',\r\n        '<button dojoType=\"dijit.form.Button\" type=\"button\" onClick=\"dijit.byId(\\'{%= $.id %}-Dialog\\').hide();\">',\r\n            '{%= $.cancelText %}',\r\n        '</button>',\r\n    '</div>',\r\n'</div>'\r\n]\r\n","url:Sage/MainView/IntegrationContract/templates/InvoiceRTDV.html":"[\n'<div>',\n    '<div dojoType=\"dijit.Dialog\" id=\"{%= $.id%}_invoiceDetailsDialog\" title=\"{%= $.dialogCaption %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onHide:hideDetailsDialog\">',\n        '<div dojoAttachPoint=\"loadingContainer\">',\r\n            '<br />',\r\n            '<label class=\"wizardsectiontitle boldText padBottom\" style=\"padding-left:20px\">{%= $.loadingText %}</label>',\r\n            '<br />',\r\n            '<br />',\r\n        '</div>',\n        '<div dojoAttachPoint=\"invoiceDialogContent\" class=\"display-none\">',\n            '<div dojoType=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\">',\n                 '<input dojoType=\"dijit.form.TextBox\" name=\"reference\" id=\"{%= $.id%}_reference\" label=\"{%= $.lblInvoiceCaption %}\" readonly=\"true\" />',\n                 '<input dojoType=\"dijit.form.TextBox\" name=\"grossTotal\" id=\"{%= $.id%}_grossTotal\" label=\"{%= $.lblNetTotalCaption %}\" readonly=\"readonly\" />',\n            '</div >',\n            '<div style=\"height:350px;width:800px\">',\r\n                '<div id=\"{%= $.id%}_invoiceTabContainer\" dojoAttachPoint=\"invoiceTabContainer\" dojoType=\"dijit.layout.TabContainer\" style=\"width:100%;height:100%;\">',\r\n                    '<div id=\"{%= $.id%}_invoiceContent\" dojoAttachPoint=\"invoiceContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.detailsTabTitle %}\" selected=\"true\">',\r\n                        '<div id=\"{%= $.id%}_divInvoiceDetails\">',\r\n                            '<table cellspacing=\"5\">',\n                                '<col style=\"width:200px\" />',\r\n                                '<col style=\"width:200px\" />',\n                                '<tr>',\n                                    '<td>',\r\n                                        '<label for=\"Invoice_date\">{%= $.lblInvoiceDateCaption %}</label>',\r\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_invoiceDate\" name=\"date\" readonly=\"readonly\" dojoType=\"Sage.UI.DateTextBox\" />',\n                                    '</td>',\n                                    '<td>',\n                                        '<label for=\"invoiceDiscountPercent\">{%= $.lblInvoiceDiscountPercentCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_discountPercent\" name=\"invoiceDiscountPercent\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                '</tr>',\n                                '<tr>',\n                                    '<td>',\r\n                                        '<label for=\"Invoice_deliveryDate\">{%= $.lblDueDateCaption %}</label>',\r\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_deliveryDate\" name=\"deliveryDate\" readonly=\"readonly\" dojoType=\"Sage.UI.DateTextBox\" />',\n                                    '</td>',\n                                    '<td>',\n                                        '<label for=\"Invoice_carrierTotalPrice\">{%= $.lblCarrierTotalPriceCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_carrierTotalPrice\" name=\"carrierTotalPrice\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                '</tr>',\n                                '<tr>',\n                                    '<td>',\n                                        '<label for=\"Invoice_customerReference\">{%= $.lblCustomerPOCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_customerReference\" name=\"customerReference\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                    '<td>',\r\n                                        '<label for=\"Invoice_taxTotal\">{%= $.lblTaxCaption %}</label>',\r\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_taxTotal\" name=\"taxTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                '</tr>',\n                                '<tr>',\n                                    '<td>',\n                                        '<label for=\"settlementDiscountPercent\">{%= $.lblSettlementDiscountPercentCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_settlementDiscountPercent\" name=\"settlementDiscountPercent\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                    '<td>',\n                                        '<label for=\"Invoice_notes\">{%= $.lblNotesCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_notes\" name=\"notes\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                '</tr>',\n                                '<tr>',\n                                    '<td>',\n                                        '<label for=\"settlementDiscountTerms\">{%= $.lblSettlementDiscountTermsCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_settlementDiscountTerms\" name=\"settlementDiscountTerms\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                    '<td>',\n                                        '<label for=\"Invoice_costTotal\">{%= $.lblCostTotalCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_costTotal\" name=\"costTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                '</tr>',\n                                '<tr>',\n                                    '<td>',\n                                        '<label for=\"operatingCompanyCurrency\">{%= $.lblOCCurrencyCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_operatingCompanyCurrency\" name=\"operatingCompanyCurrency\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                    '<td>',\n                                        '<label for=\"Invoice_profitTotal\">{%= $.lblProfitTotalCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_profitTotal\" name=\"profitTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                '</tr>',\n                                '<tr>',\n                                    '<td>',\n                                        '<label for=\"operatingCompanyCurrencyExchangeRateDate\">{%= $.lblOperatingCompanyCurrencyExchangeRateDateCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_operatingCompanyCurrencyExchangeRateDate\" name=\"operatingCompanyCurrencyExchangeRateDate\" readonly=\"readonly\" dojoType=\"Sage.UI.DateTextBox\" />',\n                                    '</td>',\n                                    '<td>',\n                                        '<label for=\"Invoice_priceList\">{%= $.lblPriceListCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_priceList\" name=\"pricelist.name\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                '</tr>',\n                                '<tr>',\n                                    '<td>',\n                                        '<label for=\"Invoice_currency\">{%= $.lblCurrencyCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_currency\" name=\"currency\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                    '<td>',\n                                        '<label for=\"Invoice_salesPerson\">{%= $.lblSalesPersonCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_salesPerson\" name=\"buyerContact.fullName\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                '</tr>',\n                                '<tr>',\n                                    '<td>',\n                                        '<label for=\"Invoice_invoiceDiscountAmount\">{%= $.lblInvoiceDiscountAmountCaption %}</label>',\n                                    '</td>',\n                                    '<td>',\n                                        '<input type=\"text\" id=\"{%= $.id%}_invoiceDiscountAmount\" name=\"invoiceDiscountAmount\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                    '</td>',\n                                '</tr>',\r\n                            '</table>',\r\n                        '</div>',\r\n                    '</div>',\r\n                    '<div id=\"{%= $.id%}_addressesContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.addressTabTitle %}\" style=\"width:100%;height:100%;\">',\r\n                        '<div id=\"sdgrdInvoiceAddresses\" style=\"width:100%;height:100%;\">',\r\n                            '<div id=\"{%= $.id%}_sdgrdInvoiceAddresses_Grid\" dojoAttachPoint=\"sdgrdInvoiceAddresses_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                        '</div>',\r\n                    '</div>',\r\n                    '<div id=\"{%= $.id%}_invoiceLinesContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.invoiceLinesTabTitle %}\" style=\"width:100%;height:100%;\">',\r\n                        '<div id=\"sdgrdInvoiceLines\" style=\"width:100%;height:100%;\">',\r\n                            '<div id=\"{%= $.id%}_sdgrdInvoiceLines_Grid\" dojoAttachPoint=\"sdgrdInvoiceLines_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                        '</div>',\r\n                    '</div>',\r\n                    '<div id=\"{%= $.id%}_paymentsContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.paymentsTabTitle %}\" style=\"width:100%;height:100%;\" dojoAttachPoint=\"cp_Payments\" dojoAttachEvent=\"onShow:initPayments\">',\r\n                        '<div id=\"sdgrdPayments\" style=\"width:100%;height:100%;\">',\r\n                            '<div id=\"{%= $.id%}_sdgrdPayments_Grid\" dojoAttachPoint=\"sdgrdPayments_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                        '</div>',\r\n                    '</div>',\r\n                    '<div id=\"{%= $.id%}_deliveriesContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.deliveriesTabTitle %}\" style=\"width:100%;height:100%;\" dojoAttachPoint=\"cp_Deliveries\" dojoAttachEvent=\"onShow:initDeliveries\">',\r\n                        '<div id=\"sdgrdDeliveries\" style=\"width:100%;height:100%;\">',\r\n                            '<div id=\"{%= $.id%}_sdgrdDeliveries_Grid\" dojoAttachPoint=\"sdgrdDeliveries_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                        '</div>',\r\n                    '</div>',\r\n                '</div>',\r\n            '</div>',\r\n            '<div class=\"button-bar alignright\">',\r\n                 '<button dojoType=\"dijit.form.Button\" id=\"{%= $.id%}_invoiceBtnClose\" type=\"button\" dojoAttachEvent=\"onClick:hideDetailsDialog\">{%= $.btnCloseCaption %}</button>',\r\n            '</div>',\r\n        '</div>',\r\n    '</div>',\r\n'</div>'\r\n]","url:Sage/MainView/IntegrationContract/templates/SalesOrderRTDV.html":"[\n'<div>',\r\n    '<div dojoType=\"dijit.Dialog\" id=\"{%= $.id%}_salesOrderDetailsDialog\" title=\"{%= $.dialogCaption %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onHide:hideDetailsDialog\">',\r\n        '<div dojoAttachPoint=\"loadingContainer\">',\r\n            '<br />',\r\n            '<label class=\"wizardsectiontitle boldText padBottom\" style=\"padding-left:20px\">{%= $.loadingText %}</label>',\r\n            '<br />',\r\n            '<br />',\r\n        '</div>',\r\n        '<table cellspacing=\"5\" dojoAttachPoint=\"salesOrderDetails\" border=\"0\" width=\"100%\" class=\"display-none\">',\n            '<div>',\r\n                '<tr>',\n\t\t\t        '<td>',\r\n\t\t\t             '<label for=\"SalesOrder_reference\">{%= $.lblSalesOrderCaption %}</label>',\r\n\t\t\t        '</td>',\r\n                    '<td>',\r\n                        '<input type=\"text\" id=\"{%= $.id%}_reference\" name=\"reference\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                    '</td>',\r\n                    '<td>',\n                        '<label for=\"SalesOrder_status\">{%= $.lblStatusCaption %}</label>',\n                    '</td>',\n                    '<td>',\n                        '<input type=\"text\" id=\"{%= $.id%}_status\" name=\"status\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                    '</td>',\r\n                    '<td>',\n                        '<label for=\"SalesOrder_grossTotal\">{%= $.lblGrossTotalCaption %}</label>',\r\n                    '</td>',\n                    '<td>',\n                        '<input type=\"text\" id=\"{%= $.id%}_grossTotal\" name=\"grossTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                    '</td>',\r\n                '</tr>',\r\n            '</div>',\r\n        '</table>',\r\n        '<div style=\"height:370px;width:800px\" dojoAttachPoint=\"tabContentDetails\" class=\"display-none\">',\r\n            '<div id=\"{%= $.id%}_salesOrderContainer\" dojoAttachPoint=\"salesOrderContainer\" dojoType=\"dijit.layout.TabContainer\" style=\"width:100%;height:100%;\">',\r\n                '<div id=\"{%= $.id%}_salesOrderContent\" dojoAttachPoint=\"salesOrderContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.detailsTabTitle %}\" selected=\"true\" style=\"width:100%;height:100%;\">',\r\n                    '<div id=\"{%= $.id%}_divDetails\">',\r\n                        '<table cellspacing=\"5\">',\r\n                            '<col style=\"width:200px\" />',\r\n                            '<col style=\"width:200px\" />',\r\n                            '<tr>',\r\n                                '<td>',\r\n                                    '<label for=\"SalesOrder_OrderDate\">{%= $.lblOrderDateCaption %}</label>',\r\n                                '</td>',\r\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_OrderDate\" name=\"date\" readonly=\"readonly\" dojoType=\"Sage.UI.DateTextBox\" />',\n                                '</td>',\r\n                                '<td>',\n                                    '<label for=\"SalesOrder_TaxTotal\">{%= $.lblTaxTotalCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_TaxTotal\" name=\"taxTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\r\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\r\n                                    '<label for=\"SalesOrder_HoldStatus\">{%= $.lblHoldStatusCaption %}</label>',\r\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_HoldStatus\" name=\"statusFlagText\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_Currency\">{%= $.lblCurrencyCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_Currency\" name=\"currency\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_Type\">{%= $.lblTypeCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_Type\" name=\"type\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\r\n                                    '<label for=\"SalesOrder_CostTotal\">{%= $.lblCostTotalCaption %}</label>',\r\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_CostTotal\" name=\"costTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_PONumber\">{%= $.lblPONumberCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_PONumber\" name=\"customerReference\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_ProfitTotal\">{%= $.lblProfitTotalCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_ProfitTotal\" name=\"profitTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_Quotation\">{%= $.lblQuotationCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_Quotation\" name=\"quotation.reference\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_InvoiceStatus\">{%= $.lblInvoiceStatusCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_InvoiceStatus\" name=\"invoiceStatus\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_Contact\">{%= $.lblContactCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_Contact\" name=\"buyerContact.fullName\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_DeliveryDate\">{%= $.lblDeliveryDateCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_DeliveryDate\" name=\"deliveryDate\" readonly=\"readonly\" dojoType=\"Sage.UI.DateTextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_PriceList\">{%= $.lblPriceListCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_PriceList\" name=\"pricelist.name\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_DueDate\">{%= $.lblDueDateCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_DueDate\" name=\"dueDate\" readonly=\"readonly\" dojoType=\"Sage.UI.DateTextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_NetTotal\">{%= $.lblNetTotalCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_NetTotal\" name=\"netTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_Carrier\">{%= $.lblCarrierCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_Carrier\" name=\"carrierCompany\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_DiscountTotal\">{%= $.lblDiscountTotalCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_DiscountTotal\" name=\"discountTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_AllocationStatus\">{%= $.lblAllocationStatusCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_AllocationStatus\" name=\"allocationStatus\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_DeliveryStatus\">{%= $.lblDeliveryStatusCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_DeliveryStatus\" name=\"deliveryStatus\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesOrder_ChargesTotal\">{%= $.lblChargesTotalCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_ChargesTotal\" name=\"chargesTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                        '</table>',\r\n                    '</div>',\r\n                '</div>',\r\n                '<div id=\"{%= $.id%}_soAddressesContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.addressTabTitle %}\" style=\"width:100%;height:100%;\">',\r\n                    '<div id=\"sdgrdSalesOrderAddresses\" dojoAttachPoint=\"sdgrdSalesOrderAddresses\" style=\"width:100%;height:100%;\">',\r\n                        '<div id=\"{%= $.id%}_sdgrdSalesOrderAddresses_Grid\" dojoAttachPoint=\"sdgrdSalesOrderAddresses_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                    '</div>',\r\n                '</div>',\r\n                '<div id=\"{%= $.id%}_soSalesPersonsContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.salesPersonsTabTitle %}\" style=\"width:100%;height:100%;\" dojoAttachPoint=\"cp_SalesPersons\" dojoAttachEvent=\"onShow:initSalesPersons\">',\r\n                    '<div id=\"sdgrdSalesPersons\" style=\"width:100%;height:100%;\">',\r\n                        '<div id=\"{%= $.id%}_sdgrdSalesPersons_Grid\" dojoAttachPoint=\"sdgrdSalesPersons_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                    '</div>',\r\n                '</div>',\r\n                '<div id=\"{%= $.id%}_soLinesContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.salesOrderLinesTabTitle %}\" style=\"width:100%;height:100%;\">',\r\n                    '<div id=\"sdgrdSalesOrderLines\" style=\"width:100%;height:100%;\">',\r\n                        '<div id=\"{%= $.id%}_sdgrdSalesOrderLines_Grid\" dojoAttachPoint=\"sdgrdSalesOrderLines_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                    '</div>',\r\n                '</div>',\r\n                '<div id=\"{%= $.id%}_soPaymentsContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.paymentsTabTitle %}\" style=\"width:100%;height:100%;\" dojoAttachPoint=\"cp_Payments\" dojoAttachEvent=\"onShow:initPayments\">',\r\n                    '<div id=\"sdgrdSOPayments\" style=\"width:100%;height:100%;\">',\r\n                        '<div id=\"{%= $.id%}_sdgrdSOPayments_Grid\" dojoAttachPoint=\"sdgrdSOPayments_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                    '</div>',\r\n                '</div>',\r\n                '<div id=\"{%= $.id%}_soDeliveriesContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.deliveriesTabTitle %}\" style=\"width:100%;height:100%;\" dojoAttachPoint=\"cp_Deliveries\" dojoAttachEvent=\"onShow:initDeliveries\">',\r\n                    '<div id=\"sdgrdSODeliveries\" style=\"width:100%;height:100%;\">',\r\n                        '<div id=\"{%= $.id%}_sdgrdSODeliveries_Grid\" dojoAttachPoint=\"sdgrdSODeliveries_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                    '</div>',\r\n                '</div>',\r\n            '</div>',\r\n        '</div>',\r\n        '<div class=\"button-bar alignright\">',\r\n            '<button dojoType=\"dijit.form.Button\" id=\"{%= $.id%}_soBtnClose\" type=\"button\" dojoAttachEvent=\"onClick:hideDetailsDialog\">{%= $.btnCloseCaption %}</button>',\r\n        '</div>',\r\n    '</div>',\r\n'</div>'\r\n]","url:Sage/MainView/IntegrationContract/templates/SalesQuoteRTDV.html":"[\n'<div>',\r\n    '<div dojoType=\"dijit.Dialog\" id=\"{%= $.id%}_salesQuoteDetailsDialog\" title=\"{%= $.dialogCaption %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onHide:hideDetailsDialog\">',\r\n        '<div dojoAttachPoint=\"loadingContainer\">',\r\n            '<br />',\r\n            '<label class=\"wizardsectiontitle boldText padBottom\" style=\"padding-left:20px\">{%= $.loadingText %}</label>',\r\n            '<br />',\r\n            '<br />',\r\n        '</div>',\r\n        '<table cellspacing=\"5\" dojoAttachPoint=\"salesQuoteDetails\" border=\"0\" width=\"100%\" class=\"display-none\">',\n            '<div>',\r\n                '<tr>',\n\t\t\t        '<td>',\r\n\t\t\t             '<label for=\"SalesQuote_reference\">{%= $.lblSalesQuoteCaption %}</label>',\r\n\t\t\t        '</td>',\r\n                    '<td>',\r\n                        '<input type=\"text\" id=\"{%= $.id%}_reference\" name=\"reference\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                    '</td>',\r\n                    '<td>',\n                        '<label for=\"SalesQuote_status\">{%= $.lblStatusCaption %}</label>',\n                    '</td>',\n                    '<td>',\n                        '<input type=\"text\" id=\"{%= $.id%}_status\" name=\"status\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                    '</td>',\r\n                    '<td>',\n                        '<label for=\"SalesQuote_grossTotal\">{%= $.lblGrossTotalCaption %}</label>',\r\n                    '</td>',\n                    '<td>',\n                        '<input type=\"text\" id=\"{%= $.id%}_grossTotal\" name=\"grossTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                    '</td>',\r\n                '</tr>',\r\n            '</div>',\r\n        '</table>',\r\n        '<div style=\"height:370px;width:800px\" dojoAttachPoint=\"tabContentDetails\" class=\"display-none\">',\r\n            '<div id=\"{%= $.id%}_salesQuoteContainer\" dojoAttachPoint=\"salesQuoteContainer\" dojoType=\"dijit.layout.TabContainer\" style=\"width:100%;height:100%;\">',\r\n                '<div id=\"{%= $.id%}_salesQuoteContent\" dojoAttachPoint=\"salesQuoteContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.detailsTabTitle %}\" selected=\"true\" style=\"width:100%;height:100%;\">',\r\n                    '<div id=\"{%= $.id%}_divDetails\">',\r\n                        '<table cellspacing=\"5\">',\r\n                            '<col style=\"width:200px\" />',\r\n                            '<col style=\"width:200px\" />',\r\n                            '<tr>',\r\n                                '<td>',\r\n                                    '<label for=\"SalesQuote_QuoteDate\">{%= $.lblQuoteDateCaption %}</label>',\r\n                                '</td>',\r\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_QuoteDate\" name=\"date\" readonly=\"readonly\" dojoType=\"Sage.UI.DateTextBox\" />',\n                                '</td>',\r\n                                '<td>',\n                                    '<label for=\"SalesQuote_TaxTotal\">{%= $.lblTaxTotalCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_TaxTotal\" name=\"taxTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\r\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\r\n                                    '<label for=\"SalesQuote_HoldStatus\">{%= $.lblHoldStatusCaption %}</label>',\r\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_HoldStatus\" name=\"statusFlagText\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesQuote_Currency\">{%= $.lblCurrencyCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_Currency\" name=\"currency\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesQuote_Type\">{%= $.lblTypeCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_Type\" name=\"type\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\r\n                                    '<label for=\"SalesQuote_CostTotal\">{%= $.lblCostTotalCaption %}</label>',\r\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_CostTotal\" name=\"costTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesQuote_PONumber\">{%= $.lblPONumberCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_PONumber\" name=\"customerReference\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesQuote_ProfitTotal\">{%= $.lblProfitTotalCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_ProfitTotal\" name=\"profitTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesQuote_Quotation\">{%= $.lblQuotationCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_Quotation\" name=\"quotation.reference\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesQuote_InvoiceStatus\">{%= $.lblInvoiceStatusCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_InvoiceStatus\" name=\"invoiceStatus\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesQuote_Contact\">{%= $.lblContactCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_Contact\" name=\"buyerContact.fullName\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesQuote_DeliveryDate\">{%= $.lblDeliveryDateCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_DeliveryDate\" name=\"deliveryDate\" readonly=\"readonly\" dojoType=\"Sage.UI.DateTextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesQuote_PriceList\">{%= $.lblPriceListCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_PriceList\" name=\"pricelist.name\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesQuote_DueDate\">{%= $.lblDueDateCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_DueDate\" name=\"dueDate\" readonly=\"readonly\" dojoType=\"Sage.UI.DateTextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesQuote_NetTotal\">{%= $.lblNetTotalCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_NetTotal\" name=\"netTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesQuote_Carrier\">{%= $.lblCarrierCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_Carrier\" name=\"carrierCompany\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesQuote_DiscountTotal\">{%= $.lblDiscountTotalCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_DiscountTotal\" name=\"discountTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesQuote_AllocationStatus\">{%= $.lblAllocationStatusCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_AllocationStatus\" name=\"allocationStatus\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                            '<tr>',\n                                '<td>',\n                                    '<label for=\"SalesQuote_DeliveryStatus\">{%= $.lblDeliveryStatusCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_DeliveryStatus\" name=\"deliveryStatus\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                                '<td>',\n                                    '<label for=\"SalesQuote_ChargesTotal\">{%= $.lblChargesTotalCaption %}</label>',\n                                '</td>',\n                                '<td>',\n                                    '<input type=\"text\" id=\"{%= $.id%}_ChargesTotal\" name=\"chargesTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                                '</td>',\n                            '</tr>',\r\n                        '</table>',\r\n                    '</div>',\r\n                '</div>',\r\n                '<div id=\"{%= $.id%}_soAddressesContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.addressTabTitle %}\" style=\"width:100%;height:100%;\">',\r\n                    '<div id=\"sdgrdSalesQuoteAddresses\" dojoAttachPoint=\"sdgrdSalesQuoteAddresses\" style=\"width:100%;height:100%;\">',\r\n                        '<div id=\"{%= $.id%}_sdgrdSalesQuoteAddresses_Grid\" dojoAttachPoint=\"sdgrdSalesQuoteAddresses_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                    '</div>',\r\n                '</div>',\r\n                '<div id=\"{%= $.id%}_soSalesPersonsContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.salesPersonsTabTitle %}\" style=\"width:100%;height:100%;\" dojoAttachPoint=\"cp_SalesPersons\" dojoAttachEvent=\"onShow:initSalesPersons\">',\r\n                    '<div id=\"sdgrdSalesPersons\" style=\"width:100%;height:100%;\">',\r\n                        '<div id=\"{%= $.id%}_sdgrdSalesPersons_Grid\" dojoAttachPoint=\"sdgrdSalesPersons_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                    '</div>',\r\n                '</div>',\r\n                '<div id=\"{%= $.id%}_soLinesContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.salesQuoteLinesTabTitle %}\" style=\"width:100%;height:100%;\">',\r\n                    '<div id=\"sdgrdSalesQuoteLines\" style=\"width:100%;height:100%;\">',\r\n                        '<div id=\"{%= $.id%}_sdgrdSalesQuoteLines_Grid\" dojoAttachPoint=\"sdgrdSalesQuoteLines_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                    '</div>',\r\n                '</div>',\r\n                '<div id=\"{%= $.id%}_soPaymentsContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.paymentsTabTitle %}\" style=\"width:100%;height:100%;\" dojoAttachPoint=\"cp_Payments\" dojoAttachEvent=\"onShow:initPayments\">',\r\n                    '<div id=\"sdgrdSOPayments\" style=\"width:100%;height:100%;\">',\r\n                        '<div id=\"{%= $.id%}_sdgrdSOPayments_Grid\" dojoAttachPoint=\"sdgrdSOPayments_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                    '</div>',\r\n                '</div>',\r\n                '<div id=\"{%= $.id%}_soDeliveriesContent\" dojoType=\"dijit.layout.ContentPane\" title=\"{%= $.deliveriesTabTitle %}\" style=\"width:100%;height:100%;\" dojoAttachPoint=\"cp_Deliveries\" dojoAttachEvent=\"onShow:initDeliveries\">',\r\n                    '<div id=\"sdgrdSODeliveries\" style=\"width:100%;height:100%;\">',\r\n                        '<div id=\"{%= $.id%}_sdgrdSODeliveries_Grid\" dojoAttachPoint=\"sdgrdSODeliveries_Grid\" style=\"width:100%;height:100%;\"></div>',\r\n                    '</div>',\r\n                '</div>',\r\n            '</div>',\r\n        '</div>',\r\n        '<div class=\"button-bar alignright\">',\r\n            '<button dojoType=\"dijit.form.Button\" id=\"{%= $.id%}_soBtnClose\" type=\"button\" dojoAttachEvent=\"onClick:hideDetailsDialog\">{%= $.btnCloseCaption %}</button>',\r\n        '</div>',\r\n    '</div>',\r\n'</div>'\r\n]","url:Sage/MainView/IntegrationContract/templates/CustomerPaymentsRTDV.html":"[\n'<div>',\n    '<div dojoType=\"dijit.Dialog\" id=\"{%= $.id%}_customerPaymentsDetailsDialog\" title=\"{%= $.dialogCaption %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onHide:hideDetailsDialog\">',\n        '<table cellspacing=\"5\">',\n            '<tr>',\n                '<td>',\n                    '<label for=\"PaymentDetails_reference\">{%= $.lblReferenceCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_reference\" name=\"reference\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n                '<td>',\n                    '<label for=\"PaymentDetails_date\">{%= $.lblDateCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_date\" name=\"date\" readonly=\"readonly\" dojoType=\"Sage.UI.DateTextBox\" />',\n                '</td>',\n            '</tr>',\n            '<tr>',\n                '<td>',\n                    '<label for=\"PaymentDetails_processDate\">{%= $.lblProcessDateCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_processDate\" name=\"processDate\" readonly=\"readonly\" dojoType=\"Sage.UI.DateTextBox\" />',\n                '</td>',\n                '<td>',\n                    '<label for=\"PaymentDetails_name\">{%= $.lblNameCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_name\" name=\"name\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n            '</tr>',\n            '<tr>',\n                '<td>',\n                    '<label for=\"PaymentDetails_type\">{%= $.lblTypeCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_type\" name=\"type\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n                '<td>',\n                    '<label for=\"PaymentDetails_status\">{%= $.lblStatusCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_status\" name=\"status\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n            '</tr>',\n            '<tr>',\n                '<td>',\n                    '<label for=\"PaymentDetails_currency\">{%= $.lblCurrencyCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_currency\" name=\"currency\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n                '<td>',\n                    '<label for=\"PaymentDetails_tenderType\">{%= $.lblTenderTypeCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_tenderType\" name=\"tenderType\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n            '</tr>',\n            '<tr>',\n                '<td>',\n                    '<label for=\"PaymentDetails_tenderReference\">{%= $.lblTenderReferenceCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_tenderReference\" name=\"tenderReference\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n                '<td>',\n                    '<label for=\"PaymentDetails_discountTotal\">{%= $.lblDiscountsCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_discountTotal\" name=\"discountTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n            '</tr>',\n            '<tr>',\n                '<td>',\n                    '<label for=\"PaymentDetails_netTotal\">{%= $.lblNetTotalCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_netTotal\" name=\"netTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n                '<td>',\n                    '<label for=\"PaymentDetails_taxTotal\">{%= $.lblTaxesCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_taxTotal\" name=\"taxTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n            '</tr>',\n            '<tr>',\n                '<td>',\n                    '<label for=\"PaymentDetails_chargesTotal\">{%= $.lblChargesCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_chargesTotal\" name=\"chargesTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n                '<td>',\n                    '<label for=\"PaymentDetails_taxCode\">{%= $.lblTaxCodeCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_taxCode\" name=\"taxCode\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n            '</tr>',\n            '<tr>',\n                '<td>',\n                    '<label for=\"PaymentDetails_grossTotal\">{%= $.lblGrossTotalCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_grossTotal\" name=\"grossTotal\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n                '<td>',\n                    '<label for=\"PaymentDetails_source\">{%= $.lblSourceCaption %}</label>',\n                '</td>',\n                '<td>',\n                    '<input type=\"text\" id=\"{%= $.id%}_source\" name=\"source\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" />',\n                '</td>',\n            '</tr>',\n        '</table>',\r\n        '<div class=\"button-bar alignright\">',\r\n            '<button dojoType=\"dijit.form.Button\" id=\"{%= $.id%}_paymentBtnClose\" type=\"button\" dojoAttachEvent=\"onClick:hideDetailsDialog\">{%= $.btnCloseCaption %}</button>',\r\n        '</div>',\n    '</div>',\n'</div>'\n]","url:Sage/MainView/JobMgr/templates/RunJobDialog.html":"[\r\n    '<div>',\r\n        '<div data-dojo-type=\"dijit.Dialog\" title=\"{%= $.nlsResources.dlgRunJob_Title %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onCancel:_dialog_OnCancel, onShow:_dialog_OnShow\" style=\"width: 525px\">',\r\n            '<div data-dojo-type=\"dijit.form.Form\">',\r\n                '<table cellspacing=\"10\">',                    \r\n                    '<tr>',\r\n                        '<td style=\"width:150px\">',\r\n                            '<label>{%= $.nlsResources.txtJobName_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<input type=\"text\" dojoAttachPoint=\"txtJobName\" required=\"true\" dojoType=\"dijit.form.TextBox\" disabled=\"disabled\" style=\"width:320px\" />',\r\n                        '</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td style=\"width:150px\">',\r\n                            '<label>{%= $.nlsResources.txtTriggerDescription_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<input type=\"text\" dojoAttachPoint=\"txtTriggerDescription\" required=\"true\" dojoType=\"dijit.form.TextBox\" style=\"width:320px\" />',\r\n                        '</td>',\r\n                    '</tr>',\r\n                    '<tr>',\r\n                        '<td>',\r\n                            '<label>{%= $.nlsResources.cmbScheduleType_Caption %}:</label>',\r\n                        '</td>',\r\n                        '<td>',\r\n                            '<select dojoType=\"dijit.form.Select\" dojoAttachPoint=\"cmbScheduleType\" dojoAttachEvent=\"onChange:_cmbScheduleType_OnChange\" style=\"width:320px\" >',\r\n                                '<option value=\"now\">{%= $.nlsResources.txtRunNow %}</option>',\r\n                                '<option value=\"scheduled\">{%= $.nlsResources.txtScheduledExecution %}</option>',\r\n                            '</select>',\r\n                        '</td>',\r\n                    '</tr>',\r\n                '</table>',\r\n                '<div data-dojo-type=\"Sage.UI.JobSchedulingWidget\" id=\"jobSchedulingWidget\" data-dojo-attach-point=\"jobSchedulingWidget\"></div>',\r\n                '<div dojoType=\"dijit.layout.TabContainer\" dojoAttachPoint=\"tabsContainer\" class=\"tab-container\" style=\"width:100%; height:250px\">',\r\n                    '<div dojoType=\"dijit.layout.ContentPane\"  title=\"{%= $.nlsResources.contentPaneParameters_Caption %}\" class=\"tabContent remove-padding\" dojoAttachPoint=\"contentPaneParameters\">',\r\n                        '<div id=\"divGrdParameters\" style=\"height:200px;\">',\r\n                            '<table data-dojo-type=\"dojox.grid.DataGrid\" dojoAttachPoint=\"grdJobParameters\">',\r\n                                '<thead>',\r\n                                    '<th field=\"name\" width=\"100px\">{%= $.nlsResources.colName_Caption %}</th>',\r\n                                    '<th id=\"parameterValue\" field=\"defaultValue\" width=\"100px\" editable=\"true\">{%= $.nlsResources.colValue_Caption %}</th>',\r\n                                    '<th field=\"description\" width=\"225px\">{%= $.nlsResources.colDescription_Caption %}</th>',\r\n                                '</thead>',\r\n                            '</table>',\r\n                        '</div>',\r\n                    '</div>',\r\n                '</div>',\r\n                '<div align=\"right\" style=\"margin-top:10px\">',\r\n                    '<div data-dojo-type=\"dijit.form.Button\"dojoAttachPoint=\"cmdOK\" dojoAttachEvent=\"onClick:_cmdOK_OnClick\">{%= $.nlsResources.cmdOK_Caption %}</div>',\r\n                    '<div data-dojo-type=\"dijit.form.Button\" dojoAttachPoint=\"cmdCancel\" dojoAttachEvent=\"onClick:_cmdCancel_OnClick\" style=\"margin-left:5px;\">{%= $.nlsResources.cmdCancel_Caption %}</div>',\r\n                '</div>',\r\n            '</div>',\r\n        '</div>',\r\n    '</div>'\r\n]","url:Sage/MainView/EntityMgr/templates/EntityDetailTabManager.html":"[\r\n'<div style=\"width:100%;height:100%;\">',\r\n'    <div data-dojo-type=\"dijit.layout.TabContainer\" id=\"tabContainer\" style=\"width:100%; height:100%;\">',\r\n'        <div data-dojo-type=\"dijit.layout.ContentPane\" id=\"filterDetailGridPane\" style=\"width:100%; height: 100%;\">',\r\n'        </div>',\r\n'        <div data-dojo-type=\"dijit.layout.ContentPane\" id=\"metricDetailGridPane\" style=\"width:100%; height: 100%;\">',\r\n'        </div>',\r\n'    </div>',\r\n'</div>'\r\n]","url:Sage/MainView/EntityMgr/templates/DetailTabContentGrid.html":"[\r\n'<div data-dojo-type=\"dijit.layout.ContentPane\"  style=\"width:100%;height:100%;\">',\r\n    '<div data-dojo-attach-point=\"containerNode\" class=\"dijit dijitToolbar list-panel-tbar right-tools dijitaligntop\" role=\"toolbar\">',\r\n        '<span dojoattachpoint=\"filterGridToolbarContainerLabel\"class=\"dijitToolbarLabel list-panel-left-tools\">',\r\n        '</span>',\r\n        '<span dojoattachpoint=\"filterGridToolbarContainer\" class=\"dijit dijitReset dijitInline list-panel-tool-help dijitButton\">',\r\n        '</span>',\r\n    '</div>',\r\n    '<div dojoattachpoint=\"recordCountLabel\" class=\"alignright dgridRecordLabel\">',\r\n    '</div>',\r\n    '<div dojoattachpoint=\"entityFilter_Grid\" class=\"entityFilter_Grid\" style=\"width:100%;\">',\r\n    '</div>',\r\n'</div>'\r\n]","url:Sage/MainView/EntityMgr/AddEditEntityFilter/templates/AddEditFiltersDialogMain.html":"[\r\n'<div>',\r\n\t'<div data-dojo-type=\"dijit.Dialog\" dojoattachpoint=\"_dialog\" style=\"width:60%;\">',\r\n        '<div data-dojo-type=\"dijit.form.Form\" dojoattachpoint=\"addEditFiltersForm\" class=\"FManagerDialogForm\" >',\r\n            '<div class=\"mainContentContent\">',\r\n\t\t        '<table class=\"detailTableContainer formtable\" style=\"width:100%\">',\r\n\t\t\r\n\t\t\t        '<colgroup>',\r\n                        '<col style=\"width:100%\" />',\r\n\t\t\t        '</colgroup>',\r\n\t\t\t\r\n\t\t\t        '<tr dojoattachpoint=\"_filterNameSection\">',\r\n\t\t\t\t        '<td class=\"FManagerDialogFieldLabel\">',\r\n\t\t\t\t\t\t    '<div style=\"padding:0 !important;\" class=\"lbl alignright width110\"  >',\r\n                                '<label style=\"line-height:32px !important;\" dojoattachpoint=\"lblFilterName\">',\r\n                                '</label>',\r\n\t\t\t\t\t\t    '</div>',\r\n\t\t\t\t\t        '<div class=\"fld  dijitInline\" dojoattachpoint=\"filterName\" />',\r\n\t\t\t\t        '</td>',\r\n\t\t\t        '</tr>',\r\n\t\t\t        '<tr dojoattachpoint=\"_displayNameSection\">',\r\n\t\t\t\t        '<td class=\"FManagerDialogFieldLabel\">',\r\n\t\t\t\t\t\t    '<div style=\"padding:0 !important;\" class=\"lbl alignright width110\"  >',\r\n                                '<label style=\"line-height:32px !important;\" dojoattachpoint=\"lblDisplayName\">',\r\n                                '</label>',\r\n\t\t\t\t\t\t    '</div>',\r\n\t\t\t\t\t        '<div class=\"fld dijitInline\" dojoattachpoint=\"displayName\" />',\r\n\t\t\t\t        '</td>',\r\n\t\t\t        '</tr>',\r\n\t\t\t        '<tr dojoattachpoint=\"_TypeDropDownSection\">',\r\n\t\t\t\t        '<td class=\"FManagerDialogFieldLabel\">',\r\n\t\t\t\t\t\t    '<div style=\"padding:0 !important;\" class=\"lbl alignright width110\"  >',\r\n                                '<label style=\"line-height:32px !important;\" dojoattachpoint=\"lblTypeDp\">',\r\n                                '</label>',\r\n\t\t\t\t\t\t    '</div>',\r\n\t\t\t\t\t        '<div class=\"fld dijitInline\" dojoattachpoint=\"typeDp\" />',\r\n\t\t\t\t        '</td>',\r\n\t\t\t        '</tr>',\r\n\t\t\t        '<tr dojoattachpoint=\"_filterDropDownSection\">',\r\n                        '<td class=\"FManagerDialogFieldLabel\">',\r\n\t\t\t\t\t\t    '<div style=\"padding:0 !important;\" class=\"lbl alignright width110\"  >',\r\n                                '<label style=\"line-height:32px !important;\" dojoattachpoint=\"lblFilterDp\">',\r\n                                '</label>',\r\n\t\t\t\t\t\t    '</div>',\r\n                            '<div class=\"fld propertyDiv dijitInline\" dojoattachpoint=\"propertyDiv\" >',\r\n                                '<input data-dojo-type=\"dijit.form.ValidationTextBox\" data-dojo-props=\"required: true\" dojoattachpoint=\"entitySelected\" class=\"entitySelected\" />',\r\n                                '<div style=\"\" data-dojo-type=\"dijit.form.Button\" iconclass=\"myIcon\" dojoattachevent=\"onClick:_showDDTree\" class=\"transparentDropDown\" dojoattachpoint=\"transparentDropDown\" />',\r\n                            '</div>',\r\n                        '</td>',\r\n\t\t\t        '</tr>',\r\n\t\t        '</table>',\r\n                '<div dojoattachpoint=\"_TypeSpecificDetailsSection\">',\r\n                '</div>',\r\n\t\t\t\t'<div dojoattachpoint=\"divValidationMessage\" class=\"errorText\">',\r\n                     '<span dojoattachpoint=\"spanValidationMessage\">&nbsp;</span>',\r\n                 '</div>',\r\n            '</div>',\r\n            '<div>',\r\n                '<div class=\"lookupButtonWrapper\">',                    \r\n                    '<span data-dojo-type=\"dijit.form.Button\" dojoattachpoint=\"cmdSave\" dojoattachevent=\"onClick:_cmdSave_OnClick\"></span>',\r\n                    '<span data-dojo-type=\"dijit.form.Button\" dojoattachpoint=\"cmdCancel\" dojoattachevent=\"onClick:_cmdCancel_OnClick\"></span>',\r\n                '</div>',\r\n            '</div>',\r\n        '</div>',\r\n\t'</div>',\r\n'</div>'\r\n ]","url:Sage/MainView/EntityMgr/AddEditEntityFilter/templates/DistinctDetailsView.html":"[\r\n'<div>',\r\n    '<table class=\"detailTableContainer formtable\" style=\"width:100%\">',\r\n        '<tr dojoattachpoint=\"_filterDetailsSection\">',\r\n            '<td class=\"FManagerDialogFieldLabel\">',\r\n\t\t\t\t'<div style=\"padding:0 !important;\" class=\"lbl alignright width110\"  >',\r\n                    '<label style=\"line-height:32px !important;\" dojoattachpoint=\"lblEntityFiltersDetailsContains\">',\r\n                    '</label>',\r\n\t\t\t    '</div>',\r\n                '<div class=\"fld dijitInline\" dojoattachpoint=\"txtEntityFiltersDetailsContains\" />',\r\n            '</td>',\r\n        '</tr>',\r\n    '</table>',\r\n'</div>'\r\n ]","url:Sage/MainView/EntityMgr/AddEditEntityFilter/templates/RangeDetailsView.html":"[\r\n'<div>',\r\n     '<div dojoattachpoint=\"characterContainer\" >',\r\n     '</div>',\t\r\n     '<table class=\"detailTableContainer\" style=\"width:100%\">',\r\n        '<tr>',\r\n             '<td class=\"FManagerDialogFieldLabel\">',\r\n                '<div style=\"padding:0 !important;\" class=\"lbl alignright dijitInline width110\">&nbsp</div>',\r\n                '<div class=\"fld dijitInline rangegridwhole\" dojoattachpoint=\"rangegridwhole\">',\r\n                    '<div data-dojo-attach-point=\"containerNode\" class=\"dijit dijitToolbar list-panel-tbar right-tools dijitaligntop\" role=\"toolbar\">',\r\n                        '<span dojoattachpoint=\"labelSection\"class=\"dijitToolbarLabel list-panel-left-tools\">',\r\n                        '</span>',\r\n                        '<span dojoattachpoint=\"rangeGridToolbarContainer\" class=\" dijit dijitReset dijitInline list-panel-tool-help dijitButton\">',\r\n                        '</span>',\r\n                    '</div>',\r\n                    '<div dojoattachpoint=\"recordCountLabel\" class=\"alignright dgridRecordLabel\">',\r\n                    '</div>',\r\n                    '<div dojoattachpoint=\"rangeGridContainer\"class=\"FManagerDialogFromGrid\">',\r\n                    '</div>',\r\n                '</div>',\r\n             '</td>',\r\n        '</tr>',\r\n    '</table>',\r\n'</div>'\r\n]\r\n","url:Sage/MainView/EntityMgr/AddEditEntityFilter/templates/AMDDetailsView.html":"[\r\n'<div>',\r\n    '<table class=\"detailTableContainer  formtable\" style=\"width:100%\">',\r\n        '<tr dojoattachpoint=\"_filterDetailsSection\">',\r\n            '<td  class=\"FManagerDialogFieldLabel\">',\r\n\t\t\t\t'<div style=\"padding:0 !important;\" class=\"lbl alignright width110\"  >',\r\n                        '<label style=\"line-height:32px !important;\" dojoattachpoint=\"lblEntityFiltersDetailsAggregation\">',\r\n                    '</label>',\r\n\t\t\t    '</div>',\r\n                '<div class=\"fld  dijitInline\" dojoattachpoint=\"dpEntityFiltersDetailsAggregation\" />',\r\n            '</td>',\r\n        '</tr>',\r\n    '</table>',\r\n'</div>'\r\n]\r\n","url:Sage/MainView/EntityMgr/AddEditEntityFilter/templates/ADDMDDetailsView.html":"[\r\n'<div>',    \r\n    '<div dojoattachpoint=\"aggregate\">',\r\n    '</div>',\t\r\n    '<table class=\"detailTableContainer\"  style=\"width:100%\">',\r\n        '<colgroup>',\r\n            '<col style=\"width:100%\" />',\r\n        '</colgroup>',\r\n        '<tr dojoattachpoint=\"_MetricsFromSection\">',\r\n            '<td class=\"FManagerDialogFieldLabel\">',\r\n    \t\t    '<div style=\"padding:0 !important;\" class=\"lbl alignright width110\"  >',\r\n                    '<label style=\"line-height:32px !important;\" dojoattachpoint=\"lblMetricRangeFrom\">',\r\n                    '</label>',\r\n\t\t\t    '</div>',\r\n                '<div class=\"fld propertyDiv dijitInline\" dojoattachpoint=\"propertyDiv\" >',\r\n                    '<input data-dojo-type=\"dijit.form.ValidationTextBox\" data-dojo-props=\"required: true\" dojoattachpoint=\"propertyDpButtonFrom\" class=\"propertyDpButtonFrom FManagerDialogTextBox\" />',\r\n                    '<div style=\"\" data-dojo-type=\"dijit.form.Button\" iconclass=\"myIcon\" dojoattachevent=\"onClick:_showDDFrom\" class=\"transparentDropDown\" dojoattachpoint=\"transparentDropDown\" />',\r\n                '</div>',\r\n            '</td>',\r\n        '</tr>',\r\n        '<tr dojoattachpoint=\"_MetricsToSection\">',\r\n            '<td class=\"FManagerDialogFieldLabel\">',\r\n\t\t\t\t'<div style=\"padding:0 !important;\" class=\"lbl alignright width110\"  >',\r\n                    '<label style=\"line-height:32px !important;\" dojoattachpoint=\"lblMetricRangeTo\">',\r\n                    '</label>',\r\n\t\t\t    '</div>',\r\n                '<div class=\"fld propertyDiv dijitInline\" dojoattachpoint=\"propertyDiv\" >',\r\n                    '<input data-dojo-type=\"dijit.form.ValidationTextBox\" data-dojo-props=\"required: true\" dojoattachpoint=\"propertyDpButtonTo\" class=\"propertyDpButtonTo FManagerDialogTextBox\" />',\r\n                    '<div style=\"\" data-dojo-type=\"dijit.form.Button\" iconclass=\"myIcon\" dojoattachevent=\"onClick:_showDDTo\" class=\"transparentDropDown\" dojoattachpoint=\"transparentDropDown\" />',\r\n                '</div>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</table>',\r\n'</div>'\r\n]\r\n","url:Sage/MainView/EntityMgr/AddEditEntityFilter/templates/UserLookupDetailsView.html":"[\r\n'<div>',\r\n    '<table class=\"detailTableContainer\" style=\"width:100%\">',\r\n        '<tr>',\r\n            '<td class=\"FManagerDialogFieldLabel\">',\r\n                '<div style=\"padding:0 !important;\" class=\"lbl alignright dijitInline width110\">&nbsp</div>',\r\n                '<div class=\"fld dijitInline rangegridwhole\" dojoattachpoint=\"rangegridwhole\">',\r\n                    '<div data-dojo-attach-point=\"containerNode\" class=\"dijit dijitToolbar list-panel-tbar right-tools dijitaligntop\" role=\"toolbar\">',\r\n                        '<span dojoattachpoint=\"labelSection\" class=\"dijitToolbarLabel list-panel-left-tools\">',\r\n                        '</span>',\r\n                        '<span dojoattachpoint=\"rangeGridToolbarContainer\" class=\"dijit dijitReset dijitInline list-panel-tool-help dijitButton\">',\r\n                        '</span>',\r\n                    '</div>', \r\n                    '<div dojoattachpoint=\"operatorsListContainer\" class=\"FManagerDialogFromGrid\">',\r\n                    '</div>',\r\n                '</div>',\r\n            '</td>',\r\n        '</tr>',\r\n    '</table>',\r\n'</div>'\r\n]\r\n","url:Sage/MainView/Options/templates/OptionsDialog.html":"<div>\r\n    <div data-dojo-type=\"dijit.Dialog\" title=\"{%= $._nlsResources.txtOptions %}\" dojoattachpoint=\"_dialog\" dojoattachevent=\"onCancel:_dialog_OnCancel\" style=\"width: 450px\">\r\n        <div data-dojo-type=\"dijit.form.Form\" dojoAttachPoint=\"frmOptions\" id=\"frmOptions\" >\r\n            <div style=\"overflow:auto\">\r\n                <div>\r\n                    <table cellspacing=\"10\">\r\n\r\n                        <tr>\r\n                            <td>\r\n                                <label>{%= $._nlsResources.txtColumns %}:</label>\r\n                            </td>\r\n                            <td>                                \r\n                                <div style=\"display:inline-block;\"><input type=\"text\" dojoType=\"Sage.UI.Controls.Numeric\" dojoAttachPoint=\"txtFieldCount\" id=\"txtFieldCount\" style=\"width:25px\" /></div>\r\n                                <label>{%= $._nlsResources.txtZero %}</label>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colspan=\"2\">\r\n                                <div dojoType=\"dijit.form.CheckBox\" label=\"{%= $._nlsResources.txtHideOnSelection %}\" id=\"chkHideOnSelection\" name=\"chkHideOnSelection\" dojoAttachPoint=\"chkHideOnSelection\" ></div>\r\n                                <label class=\"checkbox-label\" for=\"chkHideOnSelection\">{%= $._nlsResources.txtHideOnSelection %}</label>\r\n                            </td>\r\n                        </tr>                        \r\n                        <tr>\r\n                            <td colspan=\"2\">\r\n                                <div dojoType=\"dijit.form.CheckBox\" label=\"{%= $._nlsResources.txtStayInDetailViewOnLookup %}\" id=\"chkStayInDetailView\" name=\"chkStayInDetailView\" dojoAttachPoint=\"chkStayInDetailView\" ></div>\r\n                                <label class=\"checkbox-label\" for=\"chkStayInDetailView\">{%= $._nlsResources.txtStayInDetailViewOnLookup %}</label>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colspan=\"2\">\r\n                                <div dojoType=\"dijit.form.CheckBox\" label=\"{%= $._nlsResources.txtDisplayExtendedGroupListOnLookup %}\" id=\"chkShowOnLookup\" name=\"chkShowOnLookup\" dojoAttachPoint=\"chkShowOnLookup\" ></div>\r\n                                <label class=\"checkbox-label\" for=\"chkShowOnLookup\">{%= $._nlsResources.txtDisplayExtendedGroupListOnLookup %}</label>\r\n                            </td>\r\n                        </tr>\r\n                        \r\n                    </table>\r\n                </div>\r\n            </div>\r\n            <div align=\"right\" style=\"margin-top:10px\">                \r\n                <div data-dojo-type=\"dijit.form.Button\"dojoAttachPoint=\"cmdOk\" dojoAttachEvent=\"onClick:_cmdOk_OnClick\">{%= Sage.Utility.htmlEncode($._nlsResources.cmdOk_Caption) %}</div>\r\n                <div data-dojo-type=\"dijit.form.Button\" dojoAttachPoint=\"cmdCancel\" dojoAttachEvent=\"onClick:_cmdCancel_OnClick\" style=\"margin-left:5px;\">{%= Sage.Utility.htmlEncode($._nlsResources.cmdCancel_Caption) %}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","url:Sage/MainView/Lead/templates/ImportLeadsProgressDisplay.html":"[\r\n'<div>',\r\n    '<div data-dojo-type=\"dijit.Dialog\" title=\"{%= $.importProgressCaption %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onCancel:_close\" style=\"width: 450px\">',\r\n        '<div data-dojo-type=\"dijit.form.Form\" id=\"{%= $.id %}_frmImportProgress\">',\r\n            '<label dojoAttachPoint=\"lblProcessingLabelContainer\">{%= $.lblPrimaryProgress %}</label>',\r\n            '<div dojoAttachPoint=\"importPrimaryProgressBarContainer\"></div>',\r\n            '<div dojoAttachPoint=\"importSecondaryProgressBarContainer\"></div>',\r\n            '<table border=\"0\" cellpadding=\"1\" cellspacing=\"0\" class=\"formtable\">',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.lblTotalRecords %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<span class=\"textcontrol\">',\r\n                            '<input dojoType=\"dijit.form.TextBox\" id=\"{%= $.id %}_recordCount\" dojoAttachPoint=\"totalRecordCount\" readonly=\"readonly\" />',\r\n                        '</span>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.lblTotalRecordsProcessed %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<span class=\"textcontrol\">',\r\n                            '<input dojoType=\"dijit.form.TextBox\" id=\"{%= $.id %}_processedCount\" dojoAttachPoint=\"processedCount\" readonly=\"readonly\" />',\r\n                        '</span>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.lblTotalRecordsImported %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<span class=\"textcontrol\">',\r\n                            '<input dojoType=\"dijit.form.TextBox\" id=\"{%= $.id %}_importedCount\" dojoAttachPoint=\"importedCount\" readonly=\"readonly\" />',\r\n                        '</span>',\r\n                    '</td>',\r\n                '</tr>',\r\n                 '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.lblTotalRecordsMerged %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<span class=\"textcontrol\">',\r\n                            '<input dojoType=\"dijit.form.TextBox\" id=\"{%= $.id %}_mergedCount\" dojoAttachPoint=\"mergedCount\" readonly=\"readonly\" />',\r\n                        '</span>',\r\n                    '</td>',\r\n                '</tr>',\r\n                 \r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.lblTotalDuplicates %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<span class=\"textcontrol\">',\r\n                            '<input dojoType=\"dijit.form.TextBox\" id=\"{%= $.id %}_duplicatesCount\" dojoAttachPoint=\"duplicateCount\" readonly=\"readonly\" />',\r\n                        '</span>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.lblDuplicateRate %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<span class=\"textcontrol\">',\r\n                            '<div dojoType=\"Sage.UI.Controls.Numeric\" id=\"{%= $.id %}_duplicateRate\" constraints=\"{ places: 0, type: \\'percent\\' }\" dojoAttachPoint=\"duplicateRate\" readonly=\"readonly\" style=\"width: auto\"></div>',\r\n                        '</span>',\r\n                    '</td>',\r\n                '</tr>',\r\n                 '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.lblTotalProjectedDuplicates %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<span class=\"textcontrol\">',\r\n                            '<input dojoType=\"dijit.form.TextBox\" id=\"{%= $.id %}_projectedDuplicateCount\" dojoAttachPoint=\"projectedDuplicateCount\" readonly=\"readonly\" />',\r\n                        '</span>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.lblTotalErrors %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<span class=\"textcontrol\">',\r\n                            '<input dojoType=\"dijit.form.TextBox\" id=\"{%= $.id %}_errorCount\" dojoAttachPoint=\"errorCount\" readonly=\"readonly\" />',\r\n                        '</span>',\r\n                    '</td>',\r\n                '</tr>',\r\n            '</table>',\r\n            '<div dojoAttachPoint=\"importHistoryLinkContainer\" class=\"display-none\">',\r\n                '<label>{%= $.lblImportHistoryLinkText %}</label>',\r\n                '<br/>',\r\n                '<label>{%= $.lblImportLinkNumber %}</label>',\r\n                '<a dojoAttachPoint=\"importHistoryLink\"></a>',\r\n            '</div>',\r\n            '<div class=\"button-bar\" align=\"right\">',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id%}_btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_cancel\">{%= $.btnCancelText %}</div>',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id%}_btn_Close\" dojoAttachPoint=\"btn_Close\" dojoAttachEvent=\"onClick:_close\">{%= $.btnCloseText %}</div>',\r\n            '</div>',\r\n        '</div>',\r\n    '</div>',\r\n'</div>'\r\n]","url:Sage/TaskPane/User/templates/ContactUserAssociationEditor.html":"[\r\n'<div>',\r\n    '<div data-dojo-type=\"dijit.Dialog\" title=\"{%= $.dialogTitleText %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onCancel:_close\">',\r\n        '<div data-dojo-type=\"dijit.form.Form\" id=\"{%= $.id %}_frmContactUserAssociation\">',\r\n            '<table cellspacing=\"20\">',\r\n                '<tr>',\r\n                    '<td colspan=\"2\">',\r\n                        '<label>{%= $.associateContactText %}</label>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<div>',\r\n                            '<label>{%= $.user_Caption %}</label>',\r\n                        '</div>',\r\n                    '</td>',\r\n                    '<td>',\r\n                         '<div dojoAttachPoint=\"divContactLookupContainer\">',\r\n                            '<div data-dojo-type=\"dijit.layout.ContentPane\" label=\"{%= $.update_To_Caption %}\" id=\"{%= $.id %}_luAccountMgr\" dojoAttachPoint=\"contactLookup_Container\" allowClearingResult=\"false\" class=\"removePadding\"></div>',\r\n                        '</div>',\r\n                    '</td>',\r\n                '</tr>',            \r\n            \r\n            '</table>',\r\n            '<div class=\"button-bar\" align=\"right\">',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id%}_btn_OK\" name=\"btn_OK\" dojoAttachPoint=\"btn_OK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.btnOK_Caption %}</div>',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id%}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_close\">{%= $.btnCancel_Caption %}</div>',\r\n            '</div>',\r\n        '</div>',\r\n    '</div>',\r\n'</div>'\r\n]\r\n","url:Sage/MainView/Import/templates/SelectFile.html":"<div>\r\n    <div data-dojo-type=\"dijit.Dialog\" title=\"{%= $._nlsResources.dlgSelectFile_Title %}\" data-dojo-attach-point=\"_dialog\" data-dojo-attach-event=\"onCancel:_btnCancel_OnClick\" style=\"width: 625px\">\r\n        <div data-dojo-type=\"dijit.form.Form\">\r\n            <input type=\"file\" data-dojo-attach-point=\"fileInputBtn\" style=\"display:none;\" />\r\n            <div class=\"crystalParameterContainer\">\r\n                <table cellspacing=\"10\" width=\"100%\">\r\n                    <colgroup>\r\n                        <col style=\"width:2%\"/>\r\n                        <col style=\"width:8%\" />\r\n                        <col style=\"width:90%\" />\r\n                    </colgroup>\r\n                    <tr>\r\n                        <td colspan=\"3\">\r\n                            <label class=\"wizardHeaderText\">{%= $._nlsResources.txtSelectFile %}</label>\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>\r\n                            <span data-dojo-attach-point=\"errorNoUploadFile\" class=\"display-none\" style=\"color:red\">*</span>\r\n                        </td>\r\n                        <td colspan=\"2\">\r\n                            <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"btnUploadFile\" data-dojo-attach-event=\"onClick:_btnUploadFile_OnClick\" >{%= Sage.Utility.htmlEncode($._nlsResources.btnUploadFile_Caption) %}</div>\r\n                            <input data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"txtFakeUploadFile\" readonly=\"readonly\" value=\"{%= Sage.Utility.htmlEncode($._nlsResources.txtUploadFile_Caption) %}\" style=\"width: 65%\" />\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td colspan=\"2\"></td>\r\n                        <td>\r\n                            <label data-dojo-attach-point=\"lblFileUpload\"></label>\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n            </div>\r\n            <br/>\r\n            <div class=\"crystalParameterContainer\">\r\n                <table cellspacing=\"10\">\r\n                    <tr>\r\n                        <td>\r\n                            <label>{%= $.lstTemplate_Caption %}</label>\r\n                        </td>\r\n                        <td>\r\n                            <div data-dojo-type=\"dijit.layout.ContentPane\" data-dojo-attach-point=\"templates_Container\"></div>\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n            </div>\r\n            <br/>\r\n            <div data-dojo-attach-point=\"divValidationMessage\" style=\"color:red\">\r\n                <span data-dojo-attach-point=\"spanValidationMessage\">&nbsp;</span>\r\n            </div>\r\n            <div align=\"right\" style=\"margin-top:10px\">\r\n                <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"btnNext\" data-dojo-attach-event=\"onClick:_btnNext_OnClick\">{%= Sage.Utility.htmlEncode($.btnNext_Caption) %}</div>\r\n                <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"btnCancel\" data-dojo-attach-event=\"onClick:_btnCancel_OnClick\" style=\"margin-left:5px;\">{%= Sage.Utility.htmlEncode($.btnCancel_Caption) %}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","url:Sage/MainView/Import/templates/DefineDelimiter.html":"<div>\r\n    <div data-dojo-type=\"dijit.Dialog\" title=\"{%= $._nlsResources.dlgDefineDelimiter_Title %}\" data-dojo-attach-point=\"_dialog\" data-dojo-attach-event=\"onCancel:_btnCancel_OnClick\" style=\"width: 825px\">\r\n        <div data-dojo-type=\"dijit.form.Form\">\r\n            <div style=\"overflow:auto\">\r\n                <label class=\"wizardHeaderText\">{%= $._nlsResources.txtHeader_Caption %}</label>\r\n            </div>\r\n            <br/>\r\n            <div style=\"padding-left: 5px\">\r\n                <label>{%= $._nlsResources.txtChooseDelimiter %}</label>\r\n                <div>\r\n                    <input data-dojo-type=\"dijit.form.RadioButton\" type=\"radio\" name=\"delimiterOption\" value=\"\\t\" data-dojo-attach-point=\"rdoTabOption\" data-dojo-attach-event=\"onClick:_rdoOption_OnClick\" /> {%= $._nlsResources.rdoTabOption %}\r\n                    <input data-dojo-type=\"dijit.form.RadioButton\" type=\"radio\" name=\"delimiterOption\" value=\";\" data-dojo-attach-point=\"rdoSemiColonOption\" data-dojo-attach-event=\"onClick:_rdoOption_OnClick\" /> {%= $._nlsResources.rdoSemicolonOption %}\r\n                    <input data-dojo-type=\"dijit.form.RadioButton\" type=\"radio\" name=\"delimiterOption\" value=\",\" data-dojo-attach-point=\"rdoCommaOption\" data-dojo-attach-event=\"onClick:_rdoOption_OnClick\" /> {%= $._nlsResources.rdoCommaOption %}\r\n                    <input data-dojo-type=\"dijit.form.RadioButton\" type=\"radio\" name=\"delimiterOption\" value=\" \" data-dojo-attach-point=\"rdoSpaceOption\" data-dojo-attach-event=\"onClick:_rdoOption_OnClick\" /> {%= $._nlsResources.rdoSpaceOption %}\r\n                    <input data-dojo-type=\"dijit.form.RadioButton\" type=\"radio\" name=\"delimiterOption\" value=\"otherOption\" data-dojo-attach-point=\"rdoOtherOption\" data-dojo-attach-event=\"onClick:_rdoOption_OnClick\" /> {%= $._nlsResources.rdoOtherOption %}\r\n                    <input data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"txtOtherOption\" style=\"width:40px\" maxlength=\"1\" disabled=\"disabled\" data-dojo-attach-event=\"onChange:_txtOtherOption_OnChange\" />\r\n                </div>\r\n                <br/>\r\n                <div>\r\n                    <label> {%= $._nlsResources.txtQualifier %}</label>\r\n                    <select data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"cmbQualifiers\" sortByLabel=\"false\" style=\"width:80px\">\r\n                        <option value=\"\\x000\"></option>\r\n                        <option value=\"&quot;\">\"</option>\r\n                        <option value=\"'\">'</option>\r\n                        <option value=\"None\" selected=\"selected\">{%= Sage.Utility.htmlEncode($.emptyListItem_Caption) %}</option>\r\n                    </select>\r\n                </div>\r\n                <br/>\r\n                <div>\r\n                    <input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"chkFirstRowFieldNames\" data-dojo-attach-event=\"onChange:_chkFirstRowFieldNames_OnChange\" checked=\"true\" />\r\n                    <label> {%= $._nlsResources.chkFirstRowFieldNames %}</label>\r\n                </div>\r\n                <br/>\r\n                <label data-dojo-attach-point=\"lblPreviewData\"></label>\r\n                <div data-dojo-attach-point=\"divLoadingMessage\">\r\n                    <br />\r\n                    <label style=\"padding-left:300px;font-size:16px;font-weight:bold\"> {%= Sage.Utility.htmlEncode($.gridLoading_Caption) %}</label>\r\n                </div>\r\n                <div data-dojo-type=\"dijit.layout.ContentPane\" data-dojo-attach-point=\"previewGrid_Container\"></div>\r\n            </div>\r\n            <div align=\"right\" style=\"margin-top:10px\">\r\n                <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"btnBack\" data-dojo-attach-event=\"onClick:_btnBack_OnClick\" >{%= Sage.Utility.htmlEncode($.btnBack_Caption) %}</div>\r\n                <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"btnNext\" data-dojo-attach-event=\"onClick:_btnNext_OnClick\">{%= Sage.Utility.htmlEncode($.btnNext_Caption) %}</div>\r\n                <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"btnCancel\" data-dojo-attach-event=\"onClick:_btnCancel_OnClick\" style=\"margin-left:5px;\">{%= Sage.Utility.htmlEncode($.btnCancel_Caption) %}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","url:Sage/MainView/Import/templates/MapFields.html":"<div>\r\n    <div data-dojo-type=\"dijit.Dialog\" title=\"{%= $._nlsResources.dlgMapFields_Title %}\" data-dojo-attach-point=\"_dialog\" data-dojo-attach-event=\"onCancel:_btnCancel_OnClick\" style=\"width: 650px;height:500px\">\r\n        <div style=\"overflow:auto\">\r\n            <label class=\"wizardHeaderText\" data-dojo-attach-point=\"lblMatchedFields\"></label>\r\n        </div>\r\n        <br/>\r\n        <div style=\"overflow:auto\" data-dojo-attach-point=\"divRequiredFields\">\r\n            <label style=\"color: red;font-size: 13px\" data-dojo-attach-point=\"lblRequiredFields\"></label>\r\n        </div>\r\n        <br/>\r\n        <div style=\"padding-left: 5px\">\r\n            <div>\r\n                <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"btnUnMapped\" data-dojo-attach-event=\"onClick:btnUnMapped_OnClick\" ></div>\r\n                <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"btnMapped\" data-dojo-attach-event=\"onClick:btnMapped_OnClick\" ></div>\r\n                <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"btnAll\" data-dojo-attach-event=\"onClick:btnAll_OnClick\" ></div>\r\n            </div>\r\n            <div data-dojo-attach-point=\"mappingsGrid\"></div>\r\n        </div>\r\n        <br />\r\n        <div data-dojo-attach-point=\"divValidationMessage\" style=\"color:red\">\r\n            <span data-dojo-attach-point=\"spanValidationMessage\">&nbsp;</span>\r\n        </div>\r\n        <div align=\"right\" style=\"margin-top:10px\">\r\n            <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"btnBack\" data-dojo-attach-event=\"onClick:_btnBack_OnClick\" >{%= Sage.Utility.htmlEncode($.btnBack_Caption) %}</div>\r\n            <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"btnNext\" data-dojo-attach-event=\"onClick:_btnNext_OnClick\">{%= Sage.Utility.htmlEncode($.btnNext_Caption) %}</div>\r\n            <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"btnCancel\" data-dojo-attach-event=\"onClick:_btnCancel_OnClick\" style=\"margin-left:5px;\">{%= Sage.Utility.htmlEncode($.btnCancel_Caption) %}</div>\r\n        </div>\r\n    </div>\r\n</div>","url:Sage/MainView/Import/templates/ManageImportOptions.html":"<div>\r\n    <div data-dojo-type=\"dijit.Dialog\" title=\"{%= $._nlsResources.dlgManageImportOptions_Title %}\" data-dojo-attach-point=\"_dialog\" data-dojo-attach-event=\"onCancel:_btnCancel_OnClick\" style=\"width: 625px\">\r\n        <div data-dojo-type=\"dijit.form.Form\">\r\n            <div data-dojo-attach-point=\"divImportType\" class=\"crystalParameterContainer display-none\">\r\n                <table cellspacing=\"10\">\r\n                    <tr>\r\n                        <td>\r\n                            <label class=\"wizardHeaderText\">{%= $._nlsResources.lstImportType_Caption %}</label>\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>\r\n                            <div data-dojo-type=\"dijit.layout.ContentPane\" data-dojo-attach-point=\"importType_Container\">\r\n                                <select data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"cmbImportTypes\" sortByLabel=\"false\" style=\"width:200px\" data-dojo-attach-event=\"onChange:_cmbImportTypes_OnChange\">\r\n                                    <option value=\"insert\" selected=\"selected\">{%= $._nlsResources.lstImportOption_Insert %}</option>\r\n                                    <option value=\"update\">{%= $._nlsResources.lstImportOption_Update %}</option>\r\n                                    <option value=\"insertAndUpdate\">{%= $._nlsResources.lstImportOption_InsertUpdate %}</option>\r\n                                </select>\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>\r\n                            <label data-dojo-attach-point=\"lblImportOption\"></label>\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n            </div>\r\n            <br/>   \r\n            <div data-dojo-attach-point=\"divAssociations\" class=\"crystalParameterContainer\">\r\n                <label class=\"wizardHeaderText\">{%= $._nlsResources.txtMatchHeader_Caption %}</label>\r\n                <div data-dojo-type=\"dijit.layout.ContentPane\" data-dojo-attach-point=\"associations_Container\" style=\"padding-left:10px\"></div>\r\n            </div>\r\n            <br/>\r\n            <div class=\"crystalParameterContainer\">\r\n                <label class=\"wizardHeaderText\">{%= $._nlsResources.txtOptionsHeader_Caption %}</label>\r\n                <table cellspacing=\"10\">\r\n                    <tr>\r\n                        <td>\r\n                            <label>{%= $._nlsResources.defaultOwner_Caption %}</label>\r\n                        </td>\r\n                        <td>\r\n                            <div data-dojo-type=\"dijit.layout.ContentPane\" data-dojo-attach-point=\"defaultOwner_Container\"\r\n                                 allowClearingResult=\"false\" style=\"width:200px\"></div>\r\n                        </td>\r\n                    </tr>\r\n                    <tr data-dojo-attach-point=\"rowCreateAdHoc\">\r\n                        <td colspan=\"2\">\r\n                            <input data-dojo-type=\"dijit.form.RadioButton\" type=\"radio\" name=\"adHocGroupOption\" value=\"createAdHoc\"\r\n                                   data-dojo-attach-point=\"rdoCreateAdHoc\" /> {%= $._nlsResources.createAdHoc_Caption %}\r\n                        </td>\r\n                    </tr>\r\n                    <tr data-dojo-attach-point=\"rowAdHocGroupName\">\r\n                        <td colspan=\"2\" style=\"padding-left: 20px\">\r\n                            <input data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"txtAdHocGroupName\" style=\"width:200px\"  />\r\n                            <span data-dojo-attach-point=\"errorNoAddHocGroupName\" class=\"display-none\" style=\"color:red\">*</span>\r\n                        </td>\r\n                    </tr>\r\n                    <tr data-dojo-attach-point=\"rowAdHocGroupOption\">\r\n                        <td colspan=\"2\">\r\n                            <input data-dojo-type=\"dijit.form.RadioButton\" type=\"radio\" name=\"adHocGroupOption\" value=\"existingAdHoc\"\r\n                                   data-dojo-attach-point=\"rdoExistingAdHoc\" /> {%= $._nlsResources.existingAdHoc_Caption %}\r\n                        </td>\r\n                    </tr>\r\n                    <tr data-dojo-attach-point=\"rowAdHocGroups\">\r\n                        <td colspan=\"2\" style=\"padding-left: 12px\">\r\n                            <div data-dojo-type=\"dijit.layout.ContentPane\" data-dojo-attach-point=\"adHocGroups_Container\"></div>\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n            </div>\r\n            <br />\r\n            <div data-dojo-attach-point=\"divValidationMessage\" style=\"color:red\">\r\n                <span data-dojo-attach-point=\"spanValidationMessage\">&nbsp;</span>\r\n            </div>\r\n            <div align=\"right\" style=\"margin-top:10px\">\r\n                <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"btnBack\" data-dojo-attach-event=\"onClick:_btnBack_OnClick\" >{%= Sage.Utility.htmlEncode($.btnBack_Caption) %}</div>\r\n                <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"btnNext\" data-dojo-attach-event=\"onClick:_btnNext_OnClick\">{%= Sage.Utility.htmlEncode($.btnNext_Caption) %}</div>\r\n                <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"btnCancel\" data-dojo-attach-event=\"onClick:_btnCancel_OnClick\" style=\"margin-left:5px;\">{%= Sage.Utility.htmlEncode($.btnCancel_Caption) %}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","url:Sage/MainView/Import/templates/AddActions.html":"<div>\r\n    <div data-dojo-type=\"dijit.Dialog\" title=\"{%= $._nlsResources.dlgAddActions_Title %}\" data-dojo-attach-point=\"_dialog\" data-dojo-attach-event=\"onCancel:_btnCancel_OnClick\" style=\"width: 625px\">\r\n        <div data-dojo-type=\"dijit.form.Form\">\r\n            <div style=\"overflow:auto\">\r\n                <div data-dojo-attach-point=\"paramsContainerDiv\" id=\"paramsContainerDiv\" style=\"height:400px; overflow:auto\"></div>\r\n            </div>\r\n            <div align=\"right\" style=\"margin-top:10px\">\r\n                <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"btnBack\" data-dojo-attach-event=\"onClick:_btnBack_OnClick\" >{%= Sage.Utility.htmlEncode($.btnBack_Caption) %}</div>\r\n                <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"btnNext\" data-dojo-attach-event=\"onClick:_btnNext_OnClick\">{%= Sage.Utility.htmlEncode($.btnNext_Caption) %}</div>\r\n                <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"btnCancel\" data-dojo-attach-event=\"onClick:_btnCancel_OnClick\" style=\"margin-left:5px;\">{%= Sage.Utility.htmlEncode($.btnCancel_Caption) %}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","url:Sage/MainView/Import/templates/Review.html":"<div>\r\n    <div data-dojo-type=\"dijit.Dialog\" title=\"{%= $._nlsResources.dlgMapFields_Title %}\" data-dojo-attach-point=\"_dialog\" data-dojo-attach-event=\"onCancel:_btnCancel_OnClick\" style=\"width: 625px\">\r\n        <div data-dojo-type=\"dijit.form.Form\">\r\n            <div class=\"crystalParameterContainer\">\r\n                <label class=\"wizardHeaderText\">{%= $._nlsResources.txtHeader_Caption %}</label>\r\n                <br/>\r\n                <div style=\"padding-left: 5px\">\r\n                    <label data-dojo-attach-point=\"previewFileName\"></label>\r\n                </div>\r\n                <div style=\"padding-left: 5px\">\r\n                    <label data-dojo-attach-point=\"previewImportDataMode\"></label>\r\n                </div>\r\n                <div style=\"padding-left: 5px\">\r\n                    <label data-dojo-attach-point=\"previewRecordCount\"></label>\r\n                </div>\r\n                <div style=\"padding-left: 5px\">\r\n                    <label data-dojo-attach-point=\"previewAdHocGroup\"></label>\r\n                </div>\r\n            </div>\r\n            <br/>\r\n            <div class=\"crystalParameterContainer\">\r\n                <table cellspacing=\"10\">\r\n                    <tr>\r\n                        <td>\r\n                            <label>{%= $.lstTemplate_Caption %}</label>\r\n                        </td>\r\n                        <td>\r\n                            <div data-dojo-type=\"dijit.layout.ContentPane\" data-dojo-attach-point=\"templates_Container\"></div>\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n                <div>\r\n                    <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"btnSaveTemplate\" data-dojo-attach-event=\"onClick:_btnSaveTemplate_OnClick\" >{%= Sage.Utility.htmlEncode($._nlsResources.btnSaveTemplate_Caption) %}</div>\r\n                    <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"btnSaveAsTemplate\" data-dojo-attach-event=\"onClick:_btnSaveAsTemplate_OnClick\" >{%= Sage.Utility.htmlEncode($._nlsResources.btnSaveAsTemplate_Caption) %}</div>\r\n                </div>\r\n            </div>\r\n            <div align=\"right\" style=\"margin-top:10px\">\r\n                <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"btnBack\" data-dojo-attach-event=\"onClick:_btnBack_OnClick\" >{%= Sage.Utility.htmlEncode($.btnBack_Caption) %}</div>\r\n                <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"btnFinish\" data-dojo-attach-event=\"onClick:_btnFinish_OnClick\">{%= Sage.Utility.htmlEncode($.btnFinish_Caption) %}</div>\r\n                <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"btnCancel\" data-dojo-attach-event=\"onClick:_btnCancel_OnClick\" style=\"margin-left:5px;\">{%= Sage.Utility.htmlEncode($.btnCancel_Caption) %}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","url:Sage/MainView/Import/templates/ManageImportTemplate.html":"<div>\r\n    <div data-dojo-type=\"dijit.Dialog\" title=\"{%= $._nlsResources.dlgManageImportTemplate_Title %}\" data-dojo-attach-point=\"_dialog\" data-dojo-attach-event=\"onCancel:_btnCancel_OnClick\" style=\"width: 800px\">\r\n        <div data-dojo-type=\"dijit.form.Form\">\r\n            <table cellspacing=\"10\">\r\n                <tr>\r\n                    <td>\r\n                        <label>{%= $._nlsResources.txtDescription_Caption %}</label>\r\n                    </td>\r\n                    <td>\r\n                        <input data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"txtTemplateDescription\" style=\"width:200px\" />\r\n                        <span data-dojo-attach-point=\"errorInvalidDescription\" class=\"display-none\" style=\"color:red\">*</span>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td>\r\n                        <label>{%= $._nlsResources.txtImportTemplates_Caption %}</label>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n            <div data-dojo-attach-point=\"divLoadingMessage\">\r\n                <br />\r\n                <label style=\"padding-left:300px;font-size:16px;font-weight:bold\"> {%= Sage.Utility.htmlEncode($.gridLoading_Caption) %}</label>\r\n            </div>\r\n            <div data-dojo-attach-point=\"templatesGrid\"></div>\r\n            <div data-dojo-attach-point=\"divValidationMessage\" style=\"color:red\">\r\n                <span data-dojo-attach-point=\"spanValidationMessage\">&nbsp;</span>\r\n            </div>\r\n            <div align=\"right\" style=\"margin-top:10px\">\r\n                <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"btnBack\" data-dojo-attach-event=\"onClick:_btnSave_OnClick\" >{%= Sage.Utility.htmlEncode($._nlsResources.btnSave_Caption) %}</div>\r\n                <div data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"btnCancel\" data-dojo-attach-event=\"onClick:_btnCancel_OnClick\" style=\"margin-left:5px;\">{%= Sage.Utility.htmlEncode($.btnClose_Caption) %}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","url:Sage/MainView/Opportunity/templates/UpdateOpportunities.html":"[\r\n'<div>',\r\n    '<div data-dojo-type=\"dijit.Dialog\" title=\"{%= $.updateMultipleOpps_Caption %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onCancel:_close\">',\r\n        '<div data-dojo-type=\"dijit.form.Form\" id=\"{%= $.id %}_frmUpdateMultipleOpps\">',\r\n            '<table cellspacing=\"20\">',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.update_Property_Caption %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<select title=\"{%= $.update_Property_Caption %}\" labelWidth=\"20\" name=\"{%= $.id %}_PropertyName\" dojoAttachPoint=\"propertyNameSelect\" dojoAttachEvent=\"onChange:_propertyChanged\" data-dojo-type=\"dijit.form.Select\" style=\"width:150px\">',\r\n                            '{% for (var i=0; i < $._updateableProperties.length;i++) { %}',\r\n                                '<option value=\"{%= $._updateableProperties[i].propertyName %}\" {% if ($.selectedFieldIndex == i ) { %} selected {% } %} >{%= $._updateableProperties[i].propertyDisplayName %}</option>',\r\n                            '{% } %}',\r\n                        '</select>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div id=\"divUpdateOppsTolbl\" dojoAttachPoint=\"divUpdateOppsTolbl\" class=\"display-none\">',\r\n                            '<label>{%= $.update_To_Caption %}</label>',\r\n                        '</div>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div dojoAttachPoint=\"divAcctMgrContainer\">',\r\n                            '<div data-dojo-type=\"dijit.layout.ContentPane\" label=\"{%= $.update_To_Caption %}\" id=\"{%= $.id %}_luAccountMgr\" dojoAttachPoint=\"accountMgr_Container\" allowClearingResult=\"false\" class=\"removePadding\"></div>',\r\n                        '</div>',\r\n                        '<div dojoAttachPoint=\"divCloseProbContainer\" class=\"display-none\">',\r\n                            '<select id=\"{%= $.id %}_pkl_CloseProbability\" PickListName=\"Opportunity Probability\" label=\"{%= $.update_To_Caption %}\" id=\"{%= $.id %}_pkl_CloseProbability\" data-dojo-type=\"Sage.UI.Controls.SingleSelectPickList\" dojoAttachPoint=\"pkl_CloseProbability\" canEditText=\"false\" itemMustExist=\"true\"></select>',\r\n                        '</div>',\r\n                        '<div data-dojo-type=\"dojox.layout.TableContainer\" dojoAttachPoint=\"divForecastContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"2\" baseClass=\"display-none\">',\r\n                            '<input data-dojo-type=\"dijit.form.RadioButton\" type=\"radio\" name=\"addToForecast\" label=\"{%= $.addToForecast_Yes %}\" value=\"yesForecast\" id=\"{%= $.id %}_rdgYesForecast\" dojoAttachPoint=\"rdoYesForecast\" checked=\"true\" />',\r\n                            '<input data-dojo-type=\"dijit.form.RadioButton\" type=\"radio\" name=\"addToForecast\" label=\"{%= $.addToForecast_No %}\" value=\"noForecast\" id=\"{%= $.id %}_rdgNoForecast\" />',\r\n                        '</div>',\r\n                        '<div data-dojo-type=\"dojox.layout.TableContainer\" orientation=\"horiz\" cols=\"2\" labelWidth=\"2\" dojoAttachPoint=\"divEstCloseContainer\" baseClass=\"display-none\">',\r\n                            '<input data-dojo-type=\"dijit.form.RadioButton\" type=\"radio\" name=\"estimatedClose\" id=\"{%= $.id %}_rdgEstClose\" checked=\"true\" label=\"{%= $.estimatedClose_To %}\" value=\"estimatedClose\" dojoAttachPoint=\"rdoEstClose\" dojoAttachEvent=\"onChange:estimatedCloseDateChange\" />',\r\n                            '<input data-dojo-type=\"dijit.form.RadioButton\" type=\"radio\" name=\"estimatedClose\" value=\"move\" id=\"{%= $.id %}_rdgEstMove\" label=\"{%= $.estimatedClose_MoveOut %}\" />',\r\n                        '</div>',\r\n                        '<div dojoAttachPoint=\"divCommentsContainer\" class=\"display-none\">',\r\n                            '<textarea data-dojo-type=\"dijit.form.SimpleTextarea\" id=\"{%= $.id %}_txtComments\" dojoAttachPoint=\"txtComments\" style=\"font-size: 85%\"></textarea>',\r\n                        '</div>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td></td>',\r\n                    '<td></td>',\r\n                    '<td></td>',\r\n                    '<td>',\r\n                        '<div id=\"divEstCloseDateContainer\" class=\"display-none\" dojoAttachPoint=\"divEstCloseDateContainer\">',\r\n                            '<div data-dojo-type=\"Sage.UI.Controls.DateTimePicker\" id=\"{%= $.id %}_dtpEstCloseDate\" displayDate=\"true\" displayTime=\"false\" dojoAttachPoint=\"dtpEstCloseDate\"></div>',\r\n                        '</div>',\r\n                        '<div id=\"divMoveEstimatedCloseContainer\" class=\"display-none\" dojoAttachPoint=\"divMoveEstimatedCloseContainer\">',\r\n                            '<select data-dojo-type=\"dijit.form.Select\" name=\"moveEstCloseDate\" id=\"{%= $.id %}_moveEstCloseDateList\" dojoAttachPoint=\"moveEstCloseDateList\">',\r\n                                '<option value=\"Forward\">{%= $.moveEstCloseDate_Forward %}</option>',\r\n                                '<option value=\"Backward\">{%= $.moveEstCloseDate_Backward %}</option>',\r\n                            '</select>',\r\n                            '<div data-dojo-type=\"dijit.form.TextBox\" labelWidth=\"20\" dojoAttachPoint=\"daysToMove\"></div>&nbsp',\r\n                            '<label>{%= $.estimatedClose_Days %}</label>',\r\n                        '</div>',\r\n                    '</td>',\r\n                '</tr>',\r\n            '</table>',\r\n            '<div class=\"button-bar\" align=\"right\">',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id%}_btn_OK\" name=\"btn_OK\" dojoAttachPoint=\"btn_OK\" dojoAttachEvent=\"onClick:_okClick\">{%= $.btnOK_Caption %}</div>',\r\n                '<div data-dojo-type=\"dijit.form.Button\" id=\"{%= $.id%}_btn_Cancel\" name=\"btn_Cancel\" dojoAttachPoint=\"btn_Cancel\" dojoAttachEvent=\"onClick:_close\">{%= $.btnCancel_Caption %}</div>',\r\n            '</div>',\r\n        '</div>',\r\n    '</div>',\r\n'</div>'\r\n]\r\n","url:Sage/MainView/Opportunity/templates/OpportunityStatistics.html":" [\r\n    '<div>',\r\n        '<div data-dojo-type=\"dijit.Dialog\" id=\"{%= $.id%}_dlgOpportunityStatistics\" title=\"{%= $.opportunityStatistics_Caption %}\" dojoAttachPoint=\"_dialog\" dojoAttachEvent=\"onCancel:_close\">',\r\n            '<div dojoAttachPoint=\"loadingContainer\">',\r\n                '<br />',\r\n                '<label class=\"wizardsectiontitle boldText padBottom\" style=\"padding-left:20px\">{%= $.loadingMessge %}</label>',\r\n                '<br />',\r\n                '<br />',\r\n            '</div>',\r\n            '<table cellspacing=\"20\" dojoAttachPoint=\"statisticsContentsContainer\" class=\"display-none\">',\r\n                '<tr>',\r\n                    '<td >',\r\n                        '<label>{%= $.opportunityCount %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<label dojoAttachPoint=\"opportunityCount\"></label>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.salesPotentialTotal %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div id=\"salesPotential\" dojoAttachPoint=\"salesPotentialTotal_Container\" disabled=\"disabled\"></div>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div id=\"salesPotentialAverage\" dojoAttachPoint=\"salesPotentialAverage_Container\" disabled=\"disabled\"></div>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.weightedPotentialTotal %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div id=\"weightedPotential\" dojoAttachPoint=\"weightedPotentialTotal_Container\" disabled=\"disabled\"></div>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div id=\"weightedPotentialAverage\" dojoAttachPoint=\"weightedPotentialAverage_Container\" disabled=\"disabled\"></div>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.averageCloseProbability %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div dojoType=\"Sage.UI.Controls.Numeric\" constraints=\"{ places: 2, maxPlaces: 2, type: \\'percent\\' }\" dojoAttachPoint=\"closeProbability_Container\" readonly=\"readonly\"></div>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.actualAmountTotal %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div id=\"actualAmount\" dojoAttachPoint=\"actualAmountTotal_Container\" disabled=\"disabled\"></div>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<div id=\"actualAmountAverage\" dojoAttachPoint=\"actualAmountAverage_Container\" disabled=\"disabled\"></div>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.averageDaysOpen %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<label dojoAttachPoint=\"daysOpen_Container\"></label>',\r\n                    '</td>',\r\n                '</tr>',\r\n                '<tr>',\r\n                    '<td>',\r\n                        '<label>{%= $.rangeEstClose %}</label>',\r\n                    '</td>',\r\n                    '<td>',\r\n                        '<label dojoAttachPoint=\"rangeEstClose_Container\"></label>',\r\n                    '</td>',\r\n                '</tr>',\r\n            '</table>',\r\n            '<div class=\"button-bar alignright\">',\r\n                '<button dojoType=\"dijit.form.Button\" id=\"{%= $.id%}_btn_Cancel\" type=\"button\" dojoAttachEvent=\"onClick:_close\">{%= $.btnClose_Caption %}</button>',\r\n            '</div>',\r\n        '</div>',\r\n    '</div>'\r\n]","url:Sage/UI/Columns/templates/DndCell.html":"<div>\r\n    <div data-dojo-type=\"dojo.dnd.Source\" dojoAttachPoint=\"sourceNode\" copyOnly=\"true\" accept=\"\">\r\n        <div class=\"dojoDndItem\" dojoAttachPoint=\"dndItem\"></div>\r\n    </div>\r\n</div>\r\n","url:Sage/UI/Controls/templates/Address.html":"<div class=\"address-container\" id=\"{%= $.clientId %}\" >\r\n    <!--\r\n    -- IMPORTANT: Comments in a widget template must be placed inside the root node.\r\n    Simplate template\r\n    https://github.com/mmorton/simplate\r\n    https://github.com/mmorton/simplate/blob/master/demo/index.html\r\n    Basic formatting example: {%= $.id %}\r\n    -->\r\n    <textarea id=\"{%= $.clientId %}_displayText1\" class=\"address-textarea\" style=\"height:{%= $.height %};\"\r\n        data-dojo-type=\"Sage.UI.Controls.SimpleTextarea\" readonly=\"readonly\" dragRestriction=\"true\"  tabindex=\"{%= $.tabIndex %}\"\r\n    {% if ($.enabled && !$.readOnly) { %}\r\n        data-dojo-attach-event=\"onDblClick: showDialog, ondijitclick: showDialog\"\r\n    {% } %}\r\n        slxchangehook=\"true\" >{%= $.displayValue %}</textarea>\r\n    {% if ($.enabled && !$.readOnly) { %}\r\n    <img alt=\"{%= $.imageData.imageEditAltText %}\" data-dojo-attach-event=\"ondijitclick: showDialog\" class=\"address-edit-button\"\r\n         src=\"{%= $.imageData.imageEditUrl %}\" title=\"{%= $.imageData.imageEditToolTip %}\" id=\"{%= $.clientId %}-Button\" \r\n          tabindex=\"{%= $.tabIndex %}\" />\r\n    {% } %}\r\n    {% if ($.enabled && $.showButton) { %}\r\n    <img alt=\"{%= $.imageData.imageMapQuestAltText %}\" data-dojo-attach-event=\"ondijitclick: showMap\" class=\"address-map-button\"\r\n         src=\"{%= $.imageData.imageMapQuestUrl %}\" title=\"{%= $.imageData.imageMapQuestToolTip %}\" id=\"{%= $.clientId %}-MapQuest\" \r\n          tabindex=\"{%= $.tabIndex %}\" />\r\n    {% } %}\r\n</div>","url:Sage/UI/Controls/templates/AddressEdit.html":"<!--\r\nSimplate template\r\nhttps://github.com/mmorton/simplate\r\nhttps://github.com/mmorton/simplate/blob/master/demo/index.html\r\nBasic formatting example: {%= $.id %}\r\n-->\r\n<div>\r\n        <table style=\"width:100%;height:100%;\">\r\n                {% for (var i = 0; i < $.fields.length; i++) { %}\r\n                {% if ($.fields[i].visible) { %}\r\n                    <tr>\r\n                        <td><label>{%= $.fields[i].fieldLabel %}</label></td>\r\n                        <td style=\"width: 150px;\">\r\n                            {% if ($.fields[i].xtype === 'picklistcombo') { %}\r\n                            <select data-dojo-type=\"Sage.UI.Controls.DropDownSelectPickList\"\r\n                                dojoAttachPoint=\"_valueBox\"\r\n                                pickListName=\"{%= $.fields[i].pickList.pickListName %}\"\r\n                                storeMode=\"text\"\r\n                                style=\"width: 100%;\"\r\n                                value=\"{%= $.fields[i].value %}\"\r\n                           {% } %}\r\n                           {% if ($.fields[i].xtype === 'checkbox') { %}\r\n                                <input data-dojo-type=\"Sage.UI.Controls.CheckBox\"\r\n                                       checked=\"{%= $.fields[i].value %}\"\r\n                                       disabled=\"{%= $.fields[i].disabled %}\"\r\n                           {% } %}\r\n                           {% if ($.fields[i].xtype === 'textfield') { %}\r\n                                <input data-dojo-type=\"Sage.UI.Controls.TextBox\"\r\n                                style=\"width: 100%;\" type=\"text\"\r\n                                value=\"{%= $.fields[i].value %}\"\r\n                           {% } %}\r\n                                id=\"{%= $.id %}-{%= $.fields[i].name %}\"\r\n                                name=\"{%= $.fields[i].formClientId %}\"\r\n                                shouldPublishMarkDirty=\"false\"\r\n                                onChange=\"dijit.byId('{%= $.id %}').editorChange();\"\r\n                                textAlign=\"{%= $.fields[i].textAlign %}\" data-dojo-attach-point=\"focusNode\"\r\n                                maxLength=\"{%= $.fields[i].maxLength %}\" />\r\n                        </td>\r\n                   </tr>\r\n                {% } %}          \r\n                {% } %}            \r\n        </table>                    \r\n        <div class=\"button-bar alignright\" style=\"clear: both\">\r\n            <button id=\"{%= $.id %}-OKButton\" data-dojo-type=\"dijit.form.Button\" type=\"submit\" onClick=\"dijit.byId('{%= $.id %}')._okClicked();\">\r\n                {%= $.okText %}\r\n            </button>\r\n            <button id=\"{%= $.id %}-CancelButton\" data-dojo-type=\"dijit.form.Button\" type=\"button\" onClick=\"dijit.byId('{%= $.id %}')._cancelClicked();\">\r\n                {%= $.cancelText %}\r\n            </button>\r\n        </div>\r\n</div>","url:Sage/UI/Controls/templates/CopyToClipboard.html":"<div>\r\n    <div data-dojo-type=\"dijit.Dialog\" dojoAttachPoint=\"dialogNode\">\r\n        \r\n        <span>${helpText}</span>\r\n        <div style=\"width: 550px; height: 400px;\">\r\n            <div data-dojo-type=\"dijit.layout.TabContainer\" dojoAttachPoint=\"tabNode\" style=\"width: 100%; height: 100%;\">\r\n                <div data-dojo-type=\"dijit.layout.ContentPane\" title=\"${textTab}\">\r\n                    <div dojoAttachPoint=\"contentNode\"></div>\r\n                </div>\r\n            \r\n                <div data-dojo-type=\"dijit.layout.ContentPane\" title=\"${sourceTab}\">\r\n                    <textarea dojoAttachPoint=\"textNode\" data-dojo-type=\"dijit.form.SimpleTextarea\" style=\"width: 100%; height: 95%;\"></textarea>\r\n                </div>\r\n            </div>\r\n        </div>\r\n            \r\n        <div style=\"float:right;padding:8px 0px 8px 8px;\">\r\n            <button data-dojo-type=\"dijit.form.Button\" type=\"submit\" dojoAttachEvent=\"onClick:_closeClicked\">\r\n                ${closeText}\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>\r\n","url:Sage/UI/Controls/templates/MultiSelectPickList.html":"<div>\r\n    <input id=\"${id}-TextBox\" data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"textNode\" data-dojo-attach-event=\"onBlur: _onTextBlur\" tabindex=\"${tabIndex}\"/>\r\n    <div id=\"${id}-Button\" data-dojo-type=\"dijit.form.DropDownButton\" data-dojo-attach-point=\"dropDownButtonNode\">\r\n        <span></span>\r\n        <div class=\"multiSelectPickListDialog\" id=\"${id}-ToolTipDialog\" data-dojo-type=\"dijit.TooltipDialog\" data-dojo-attach-point=\"tooltipDialogNode\" data-dojo-attach-event=\"onClose: _onTooltipClose, onShow: _onTooltipShow\">\r\n            <div data-dojo-attach-point=\"tooltipContainer\" style=\"height:200px; width: 200px; overflow-y:auto;\">\r\n            \r\n            </div>\r\n            \r\n            <div style=\"width: 100%; text-align:right\">\r\n                <p>\r\n                    <button id=\"${id}-OKButton\" data-dojo-type=\"dijit.form.Button\" type=\"submit\" tabindex=\"${tabIndex}\">${okText}</button>\r\n                <p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","url:Sage/UI/Controls/templates/Name.html":"<div class=\"person\" slxcompositecontrol=\"true\" id=\"{%= $.id %}\" ><input id=\"{%= $.id %}-TextBox\" value=\"{%= $.nameDesc %}\"\r\n    data-dojo-type=\"Sage.UI.Controls.TextBox\" name=\"{%= $.name %}\" required=\"{%= $.required %}\" dojoAttachPoint=\"focusNode\"  data-dojo-attach-event=\"onChange:textBoxOnChange, onDblClick: showDialog\" data-dojo-props=\"textWithIcons: {%= $.buttonVisible %}\" />\r\n    {% if ($.buttonVisible) { %}\r\n    <img alt=\"{%= $.buttonToolTip %}\"  data-dojo-attach-event=\"ondijitclick: showDialog\"  tabindex=\"{%= $.tabIndex %}\"     \r\n    style=\"padding-left:0;cursor: pointer; vertical-align: left;\" \r\n    src=\"{%= $.buttonImageUrl %}\" title=\"{%= $.buttonToolTip %}\" id=\"{%= $.id %}-Button\" />\r\n    {% } %}\r\n<!--\r\nSimplate template\r\nhttps://github.com/mmorton/simplate\r\nhttps://github.com/mmorton/simplate/blob/master/demo/index.html\r\nBasic formatting example: {%= $.id %}\r\n-->\r\n</div>","url:Sage/UI/Controls/templates/PersonName.html":"<!--\r\nSimplate template\r\nhttps://github.com/mmorton/simplate\r\nhttps://github.com/mmorton/simplate/blob/master/demo/index.html\r\nBasic formatting example: {%= $.id %}\r\n-->\r\n<div>\r\n        <table width=\"100%\">\r\n            <tr>\r\n                <td><label>{%= $.prefixText %}</label></td>\r\n                <td>\r\n                    <select id=\"{%= $.id %}-Prefix\" data-dojo-type=\"Sage.UI.Controls.DropDownSelectPickList\" \r\n                    dojoAttachPoint=\"_valueBox\"\r\n                    pickListName=\"Name Prefix\"\r\n                    storeMode=\"text\"\r\n                    name=\"{%= $.NamePrefix %}\" \r\n                    style=\"display: inline-block\"\r\n                    shouldPublishMarkDirty=\"false\" />\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td><label>{%= $.nameFirstText %}</label></td>\r\n                <td>\r\n                    <input id=\"{%= $.id %}-First\" data-dojo-type=\"Sage.UI.Controls.TextBox\"\r\n                    style=\"width:inherit;\"\r\n                    textAlign=\"{%= $.textAlign %}\"\r\n                    name=\"{%= $.NameFirst %}\" type=\"text\" data-dojo-attach-point=\"focusNode\"\r\n                    shouldPublishMarkDirty=\"false\">\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td><label>{%= $.nameMiddleText %}</label></td>\r\n                <td>\r\n                    <input id=\"{%= $.id %}-Middle\" data-dojo-type=\"Sage.UI.Controls.TextBox\"\r\n                    style=\"width:inherit;\"\r\n                    textAlign=\"{%= $.textAlign %}\"\r\n                    name=\"{%= $.NameMiddle %}\" type=\"text\" data-dojo-attach-point=\"focusNode\"\r\n                    shouldPublishMarkDirty=\"false\">\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td><label>{%= $.nameLastText %}</label></td>\r\n                <td>\r\n                    <input id=\"{%= $.id %}-Last\" data-dojo-type=\"Sage.UI.Controls.TextBox\"\r\n                    style=\"width:inherit;\"\r\n                    textAlign=\"{%= $.textAlign %}\"\r\n                    name=\"{%= $.NameLast %}\" type=\"text\" data-dojo-attach-point=\"focusNode\"\r\n                    shouldPublishMarkDirty=\"false\">\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td><label>{%= $.suffixText %}</label></td>\r\n                <td>\r\n                    <select id=\"{%= $.id %}-Suffix\" data-dojo-type=\"Sage.UI.Controls.DropDownSelectPickList\"\r\n                    dojoAttachPoint=\"_valueBox\"\r\n                    pickListName=\"Name Suffix\"\r\n                    storeMode=\"text\"\r\n                    name=\"{%= $.NameSuffix %}\"\r\n                    style=\"display: inline-block\"\r\n                    shouldPublishMarkDirty=\"false\" />\r\n                </td>\r\n            </tr>\r\n        </table>                    \r\n        <div class=\"button-bar alignright\" style=\"clear: both\">\r\n            <button id=\"{%= $.id %}-OKButton\" data-dojo-type=\"dijit.form.Button\" type=\"submit\" onClick=\"dijit.byId('{%= $.id %}')._okClicked();\">\r\n                {%= $.okText %}\r\n            </button>\r\n            <button id=\"{%= $.id %}-CancelButton\" data-dojo-type=\"dijit.form.Button\" type=\"button\" onClick=\"dijit.byId('{%= $.id %}')._cancelClicked();\">\r\n                {%= $.cancelText %}\r\n            </button>\r\n        </div>\r\n</div>\r\n","url:Sage/UI/Controls/templates/PickListAsText.html":"<div>\r\n    <span id=\"${id}-Span\" data-dojo-attach-point=\"textSpan\"></span>\r\n</div>\r\n","url:Sage/UI/templates/ScrollingTabController.html":"<div class=\"dijitTabListContainer-${tabPosition}\" style=\"visibility:hidden\">\n\t<div data-dojo-type=\"dijit.layout._ScrollingTabControllerMenuButton\"\n\t\t class=\"tabStripButton-${tabPosition}\"\n\t\t id=\"${id}_menuBtn\"\n\t\t data-dojo-props=\"containerId: '${containerId}', iconClass: 'dijitTabStripMenuIcon',\n\t\t\t\t\tdropDownPosition: ['below-alt', 'above-alt']\"\n\t\t data-dojo-attach-point=\"_menuBtn\" showLabel=\"false\" title=\"\">&#9660;</div>\n\t<div data-dojo-type=\"dijit.layout._ScrollingTabControllerButton\"\n\t\t class=\"tabStripButton-${tabPosition}\"\n\t\t id=\"${id}_leftBtn\"\n\t\t data-dojo-props=\"iconClass:'fa fa-chevron-left', showLabel:false, title:''\"\n\t\t data-dojo-attach-point=\"_leftBtn\" data-dojo-attach-event=\"onClick: doSlideLeft\">&#9664;</div>\n\t<div data-dojo-type=\"dijit.layout._ScrollingTabControllerButton\"\n\t\t class=\"tabStripButton-${tabPosition}\"\n\t\t id=\"${id}_rightBtn\"\n\t\t data-dojo-props=\"iconClass:'fa fa-chevron-right', showLabel:false, title:''\"\n\t\t data-dojo-attach-point=\"_rightBtn\" data-dojo-attach-event=\"onClick: doSlideRight\">&#9654;</div>\n\t<div class='dijitTabListWrapper' data-dojo-attach-point='tablistWrapper'>\n\t\t<div role='tablist' data-dojo-attach-event='onkeydown:onkeydown'\n\t\t\t data-dojo-attach-point='containerNode' class='nowrapTabStrip'></div>\n\t</div>\n</div>","url:Sage/UI/Filters/templates/EditFilterItems.html":"<div>\r\n    <div class=\"filter-items-dialog\" data-dojo-type=\"dijit.Dialog\" data-dojo-props=\"title:'${dialogTitle}'\" data-dojo-attach-point=\"dialogNode\">\r\n        <div class=\"filter-items-search\">\r\n            <label>${findItemText}</label> <input data-dojo-attach-point=\"textFind\" data-dojo-type=\"dijit.form.TextBox\" />\r\n            <span data-dojo-attach-point=\"buttonFind\" title=\"${findText}\" data-dojo-type=\"Sage.UI.ImageButton\" data-dojo-props=\"imageClass: 'icon_Find_16x16'\" data-dojo-attach-event=\"onClick:_onFindClick\"></span>&nbsp;\r\n\t\t\t<span data-dojo-attach-point=\"buttonClear\" title=\"${clearText}\" data-dojo-type=\"dijit.form.Button\" data-dojo-attach-event=\"onClick:_onClearClick\">${clearText}</span>\r\n        </div>\r\n        <div class=\"filter-clear-all\">\r\n            <input data-dojo-attach-point=\"checkAll\" data-dojo-type=\"dijit.form.CheckBox\" />\r\n            <label>${selectAllText}</label>\r\n        </div>\r\n        <div class=\"filter-items-dialog-content\" data-dojo-attach-point=\"contentNode\">\r\n        </div>\r\n        <div class=\"button-bar alignright\">\r\n            <button data-dojo-attach-point=\"buttonOK\" data-dojo-attach-event=\"onClick:_onOKClick\" data-dojo-type=\"dijit.form.Button\">${okText}</button>\r\n            <button data-dojo-attach-point=\"buttonCancel\" data-dojo-attach-event=\"onClick:_onCancelClick\" data-dojo-type=\"dijit.form.Button\">${cancelText}</button>\r\n        </div>\r\n    </div>\r\n</div>","url:Sage/UI/Filters/templates/EditFilters.html":"<div>\r\n    <div class=\"filter-dialog\" data-dojo-type=\"dijit.Dialog\" data-dojo-props=\"title:'${dialogTitle}'\" data-dojo-attach-point=\"dialogNode\">\r\n        <div class=\"filter-clear-all\">\r\n            <input data-dojo-attach-point=\"checkAll\" data-dojo-type=\"dijit.form.CheckBox\" />\r\n            <label>${selectAllText}</label>\r\n        </div>\r\n        <div class=\"filter-dialog-content\" data-dojo-attach-point=\"contentNode\">\r\n            \r\n        </div>\r\n        \r\n        <div class=\"button-bar alignright\">\r\n            <button data-dojo-attach-point=\"buttonOK\" data-dojo-attach-event=\"onClick:_onOKClick\" data-dojo-type=\"dijit.form.Button\">${okText}</button>\r\n            <button data-dojo-attach-point=\"buttonCancel\" data-dojo-attach-event=\"onClick:_onCancelClick\" data-dojo-type=\"dijit.form.Button\">${cancelText}</button>\r\n        </div>\r\n    </div>\r\n</div>","url:Sage/templates/ToggleButton.html":"<span class=\"dijit dijitReset dijitInline\" role=\"presentation\"\r\t><span class=\"dijitReset dijitInline dijitButtonNode\"\r\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" role=\"presentation\"\r\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\r\t\t\tdata-dojo-attach-point=\"titleNode,focusNode\"\r\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\r\t\t\t><span class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span\r\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span\r\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\r\t\t\t\tid=\"${id}_label\"\r\t\t\t\tdata-dojo-attach-point=\"containerNode\"\r\t\t\t></span\r\t\t></span\r\t></span\r\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\r\t\ttabIndex=\"-1\" role=\"presentation\" data-dojo-attach-point=\"valueNode\"\r/></span>\r","url:Sage/templates/SpeedSearch.html":"<span>\r    <!-- the textbox -->\r    <input type=\"text\" id=\"txt_ss\" />\r    <!--the image button-->\r    <button id='ss-btn-image' type=\"button\" style=\"font-size:10px\"></button>\r    <button id='ss-btn-toggle' type=\"button\" style=\"font-size:10px\"></button>\r</span>\r","url:Sage/UI/templates/EditCalendarUsers.html":"<div>\r\n    <div class=\"filter-items-dialog\" data-dojo-type=\"dijit.Dialog\"  data-dojo-attach-point=\"dialogNode\" >\r\n        <div class=\"filter-items-search\" style=\"border-bottom: 1px solid #cccccc;\">\r\n            <label>${findItemText}</label> <input data-dojo-attach-point=\"textFind\" data-dojo-type=\"dijit.form.TextBox\" />\r\n            <span data-dojo-attach-point=\"buttonFind\" title=\"${findText}\" data-dojo-type=\"Sage.UI.ImageButton\" data-dojo-props=\"imageClass: 'icon_Find_16x16'\" data-dojo-attach-event=\"onClick:_onFindClick\"></span>&nbsp;\r\n\t\t\t<span data-dojo-attach-point=\"buttonClear\" title=\"${clearText}\" data-dojo-type=\"dijit.form.Button\" data-dojo-attach-event=\"onClick:_onClearClick\">${clearText}</span>\r\n        </div>     \r\n        <div class=\"filter-items-dialog-content\" data-dojo-attach-point=\"contentNode\" style=\"height:238px;\">\r\n        </div>\r\n        <div class=\"button-bar alignright\">\r\n            <button data-dojo-attach-point=\"buttonOK\" data-dojo-attach-event=\"onClick:_onOKClick\" data-dojo-type=\"dijit.form.Button\">${okText}</button>\r\n            <button data-dojo-attach-point=\"buttonCancel\" data-dojo-attach-event=\"onClick:_onCancelClick\" data-dojo-type=\"dijit.form.Button\">${cancelText}</button>\r\n        </div>\r\n    </div>\r\n</div>","*now":function(r){r(["dojo/i18n!*preload*Sage/nls/Sage*[\"ar\",\"ca\",\"cs\",\"da\",\"de\",\"el\",\"en-gb\",\"en-us\",\"es-es\",\"fi-fi\",\"fr-fr\",\"he-il\",\"hu\",\"it-it\",\"ja-jp\",\"ko-kr\",\"nl-nl\",\"nb\",\"pl\",\"pt-br\",\"pt-pt\",\"ru\",\"sk\",\"sl\",\"sv\",\"th\",\"tr\",\"zh-tw\",\"zh-cn\",\"ROOT\"]"]);}}});define("Sage/Sage",[],1);